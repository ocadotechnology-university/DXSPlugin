(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1556],{45886:(wn,wt,e)=>{"use strict";e.d(wt,{E:()=>Ne});var o=e(12082),l=e(11638),A=e(48821),B=e(17899),u=e(14041),r=e(64947),Y=e(23180),ye=e(18690),ce=e(73657),a=e(14451),fe=e(27799),le=e(94389),ie=e(20947),oe=e(20473),ze=e(45917),Le=e(39347),Pe=e(63309),C=e(4832),ee=e(85121),R=e(17400),p=e(42226),w=e(69550),f=e(52755),E=e(89350),F=e(8911),re=e(33602),se=e(48108),_e=e(77225),Q=e(55700),g=e(71865),H=e(40477),G=e(75962),Oe=e(87145);const ue=[(0,l.bW)({api:A.q,deps:{configApi:A.p},factory:({configApi:ne})=>o.Yi.compile(`${ne.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,l.bW)({api:A.l,deps:{},factory:()=>new o.$K}),(0,l.bW)({api:A.a,deps:{},factory:()=>new o.R8}),(0,l.bW)({api:A.r,deps:{alertApi:A.l},factory:({alertApi:ne})=>{const N=new o.i3(ne,new o.Fb);return o.u_.forward(N,{hidden:!1}),N}}),(0,l.bW)({api:A.y,deps:{errorApi:A.r},factory:({errorApi:ne})=>o.gu.create({errorApi:ne})}),(0,l.bW)({api:A.s,deps:{configApi:A.p,identityApi:A.t,discoveryApi:A.q},factory:({configApi:ne,identityApi:N,discoveryApi:X})=>(0,o.FA)({middleware:[o.W.resolvePluginProtocol({discoveryApi:X}),o.W.injectIdentityAuth({identityApi:N,config:ne})]})}),(0,l.bW)({api:A.x,deps:{},factory:()=>new o.aQ}),(0,l.bW)({api:A.g,deps:{discoveryApi:A.q,oauthRequestApi:A.x,configApi:A.p},factory:({discoveryApi:ne,oauthRequestApi:N,configApi:X})=>o.kF.create({configApi:X,discoveryApi:ne,oauthRequestApi:N,environment:X.getOptionalString("auth.environment")})}),(0,l.bW)({api:A.m,deps:{discoveryApi:A.q,oauthRequestApi:A.x,configApi:A.p},factory:({discoveryApi:ne,oauthRequestApi:N,configApi:X})=>o.n5.create({configApi:X,discoveryApi:ne,oauthRequestApi:N,environment:X.getOptionalString("auth.environment")})}),(0,l.bW)({api:A.d,deps:{discoveryApi:A.q,oauthRequestApi:A.x,configApi:A.p},factory:({discoveryApi:ne,oauthRequestApi:N,configApi:X})=>o.Qf.create({configApi:X,discoveryApi:ne,oauthRequestApi:N,defaultScopes:["read:user"],environment:X.getOptionalString("auth.environment")})}),(0,l.bW)({api:A.o,deps:{discoveryApi:A.q,oauthRequestApi:A.x,configApi:A.p},factory:({discoveryApi:ne,oauthRequestApi:N,configApi:X})=>o.gE.create({configApi:X,discoveryApi:ne,oauthRequestApi:N,environment:X.getOptionalString("auth.environment")})}),(0,l.bW)({api:A.e,deps:{discoveryApi:A.q,oauthRequestApi:A.x,configApi:A.p},factory:({discoveryApi:ne,oauthRequestApi:N,configApi:X})=>o.WW.create({configApi:X,discoveryApi:ne,oauthRequestApi:N,environment:X.getOptionalString("auth.environment")})}),(0,l.bW)({api:A.h,deps:{discoveryApi:A.q,oauthRequestApi:A.x,configApi:A.p},factory:({discoveryApi:ne,oauthRequestApi:N,configApi:X})=>o.kI.create({configApi:X,discoveryApi:ne,oauthRequestApi:N,environment:X.getOptionalString("auth.environment")})}),(0,l.bW)({api:A.i,deps:{discoveryApi:A.q,oauthRequestApi:A.x,configApi:A.p},factory:({discoveryApi:ne,oauthRequestApi:N,configApi:X})=>o.Ke.create({configApi:X,discoveryApi:ne,oauthRequestApi:N,defaultScopes:["account"],environment:X.getOptionalString("auth.environment")})}),(0,l.bW)({api:A.j,deps:{discoveryApi:A.q,oauthRequestApi:A.x,configApi:A.p},factory:({discoveryApi:ne,oauthRequestApi:N,configApi:X})=>o.l9.create({configApi:X,discoveryApi:ne,oauthRequestApi:N,defaultScopes:["REPO_READ"]})}),(0,l.bW)({api:A.k,deps:{discoveryApi:A.q,oauthRequestApi:A.x,configApi:A.p},factory:({discoveryApi:ne,oauthRequestApi:N,configApi:X})=>o.l2.create({configApi:X,discoveryApi:ne,oauthRequestApi:N,environment:X.getOptionalString("auth.environment")})}),(0,l.bW)({api:A.v,deps:{discoveryApi:A.q,oauthRequestApi:A.x,configApi:A.p},factory:({discoveryApi:ne,oauthRequestApi:N,configApi:X})=>o.Ud.create({configApi:X,discoveryApi:ne,oauthRequestApi:N,environment:X.getOptionalString("auth.environment")})}),(0,l.bW)({api:B.x9,deps:{discovery:A.q,identity:A.t,config:A.p},factory:({config:ne,discovery:N,identity:X})=>B.ak.create({config:ne,discovery:N,identity:X})})];function it({children:ne}){return(0,ye.Ri)()?u.createElement(u.Fragment,null,ne):u.createElement(ye.fS,null,ne)}const ot=()=>u.createElement(Y.M,{status:"404",statusMessage:"PAGE NOT FOUND"}),pt=({step:ne,error:N})=>{let X="";return ne==="load-config"?X=`The configuration failed to load, someone should have a look at this error: ${N.message}`:ne==="load-chunk"&&(X=`Lazy loaded chunk failed to load, try to reload the page: ${N.message}`),u.createElement(it,null,u.createElement(Y.M,{statusMessage:X,stack:N.stack}))},nt=({error:ne,resetError:N,plugin:X})=>u.createElement(Y.bJ,{title:`Error in ${X==null?void 0:X.getId()}`,defaultExpanded:!0,error:ne},u.createElement(r.A,{variant:"outlined",onClick:N},"Retry")),Ge={Progress:Y.ke,Router:ce.Kd,NotFoundErrorPage:ot,BootErrorPage:pt,ErrorBoundaryFallback:nt},De={brokenImage:fe.A,catalog:F.A,scaffolder:ie.A,techdocs:oe.A,search:ze.default,chat:Le.A,dashboard:Pe.A,docs:C.A,email:ee.A,github:p.A,group:re.A,help:w.A,"kind:api":R.A,"kind:component":E.A,"kind:domain":a.A,"kind:group":re.A,"kind:location":f.A,"kind:system":le.A,"kind:user":se.A,"kind:resource":Q.A,"kind:template":g.A,user:se.A,warning:_e.A},Ae=[{id:"light",title:"Light Theme",variant:"light",icon:u.createElement(Oe.A,null),Provider:({children:ne})=>u.createElement(H.nS,{theme:H.Zj.light,children:ne})},{id:"dark",title:"Dark Theme",variant:"dark",icon:u.createElement(G.A,null),Provider:({children:ne})=>u.createElement(H.nS,{theme:H.Zj.dark,children:ne})}];function Ne(ne){var N,X,Ue,te;return(0,o.Z8)({...ne,apis:(N=ne==null?void 0:ne.apis)!=null?N:[],bindRoutes:ne==null?void 0:ne.bindRoutes,components:{...Ge,...ne==null?void 0:ne.components},configLoader:ne==null?void 0:ne.configLoader,defaultApis:ue,icons:{...De,...ne==null?void 0:ne.icons},plugins:(X=ne==null?void 0:ne.plugins)!=null?X:[],featureFlags:(Ue=ne==null?void 0:ne.featureFlags)!=null?Ue:[],themes:(te=ne==null?void 0:ne.themes)!=null?te:Ae})}},75757:(wn,wt,e)=>{"use strict";e.d(wt,{K3:()=>C,cr:()=>Y,dJ:()=>Pe});var o=e(29835),l=e(3399),A=e(10288),B=e.n(A),u=e(94214),r=e.n(u);const Y=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111");function ye(ee){return!ee.cursor}const ce="catalog";var a=Object.defineProperty,fe=(ee,R,p)=>R in ee?a(ee,R,{enumerable:!0,configurable:!0,writable:!0,value:p}):ee[R]=p,le=(ee,R,p)=>(fe(ee,typeof R!="symbol"?R+"":R,p),p);class ie{constructor(R){le(this,"discoveryApi"),le(this,"fetchApi"),this.discoveryApi=R.discoveryApi,this.fetchApi=R.fetchApi||{fetch:B()}}async analyzeLocation(R,p){const w=await this.discoveryApi.getBaseUrl(ce),E=u.parse("/analyze-location").expand({});return await this.fetchApi.fetch(`${w}${E}`,{headers:{"Content-Type":"application/json",...(p==null?void 0:p.token)&&{Authorization:`Bearer ${p==null?void 0:p.token}`}},method:"POST",body:JSON.stringify(R.body)})}async createLocation(R,p){const w=await this.discoveryApi.getBaseUrl(ce),E=u.parse("/locations{?dryRun}").expand({...R.query});return await this.fetchApi.fetch(`${w}${E}`,{headers:{"Content-Type":"application/json",...(p==null?void 0:p.token)&&{Authorization:`Bearer ${p==null?void 0:p.token}`}},method:"POST",body:JSON.stringify(R.body)})}async deleteEntityByUid(R,p){const w=await this.discoveryApi.getBaseUrl(ce),E=u.parse("/entities/by-uid/{uid}").expand({uid:R.path.uid});return await this.fetchApi.fetch(`${w}${E}`,{headers:{"Content-Type":"application/json",...(p==null?void 0:p.token)&&{Authorization:`Bearer ${p==null?void 0:p.token}`}},method:"DELETE"})}async deleteLocation(R,p){const w=await this.discoveryApi.getBaseUrl(ce),E=u.parse("/locations/{id}").expand({id:R.path.id});return await this.fetchApi.fetch(`${w}${E}`,{headers:{"Content-Type":"application/json",...(p==null?void 0:p.token)&&{Authorization:`Bearer ${p==null?void 0:p.token}`}},method:"DELETE"})}async getEntities(R,p){const w=await this.discoveryApi.getBaseUrl(ce),E=u.parse("/entities{?fields,limit,filter*,offset,after,order*}").expand({...R.query});return await this.fetchApi.fetch(`${w}${E}`,{headers:{"Content-Type":"application/json",...(p==null?void 0:p.token)&&{Authorization:`Bearer ${p==null?void 0:p.token}`}},method:"GET"})}async getEntitiesByQuery(R,p){const w=await this.discoveryApi.getBaseUrl(ce),E=u.parse("/entities/by-query{?fields,limit,orderField*,cursor,filter*,fullTextFilterTerm,fullTextFilterFields}").expand({...R.query});return await this.fetchApi.fetch(`${w}${E}`,{headers:{"Content-Type":"application/json",...(p==null?void 0:p.token)&&{Authorization:`Bearer ${p==null?void 0:p.token}`}},method:"GET"})}async getEntitiesByRefs(R,p){const w=await this.discoveryApi.getBaseUrl(ce),E=u.parse("/entities/by-refs").expand({});return await this.fetchApi.fetch(`${w}${E}`,{headers:{"Content-Type":"application/json",...(p==null?void 0:p.token)&&{Authorization:`Bearer ${p==null?void 0:p.token}`}},method:"POST",body:JSON.stringify(R.body)})}async getEntityAncestryByName(R,p){const w=await this.discoveryApi.getBaseUrl(ce),E=u.parse("/entities/by-name/{kind}/{namespace}/{name}/ancestry").expand({kind:R.path.kind,namespace:R.path.namespace,name:R.path.name});return await this.fetchApi.fetch(`${w}${E}`,{headers:{"Content-Type":"application/json",...(p==null?void 0:p.token)&&{Authorization:`Bearer ${p==null?void 0:p.token}`}},method:"GET"})}async getEntityByName(R,p){const w=await this.discoveryApi.getBaseUrl(ce),E=u.parse("/entities/by-name/{kind}/{namespace}/{name}").expand({kind:R.path.kind,namespace:R.path.namespace,name:R.path.name});return await this.fetchApi.fetch(`${w}${E}`,{headers:{"Content-Type":"application/json",...(p==null?void 0:p.token)&&{Authorization:`Bearer ${p==null?void 0:p.token}`}},method:"GET"})}async getEntityByUid(R,p){const w=await this.discoveryApi.getBaseUrl(ce),E=u.parse("/entities/by-uid/{uid}").expand({uid:R.path.uid});return await this.fetchApi.fetch(`${w}${E}`,{headers:{"Content-Type":"application/json",...(p==null?void 0:p.token)&&{Authorization:`Bearer ${p==null?void 0:p.token}`}},method:"GET"})}async getEntityFacets(R,p){const w=await this.discoveryApi.getBaseUrl(ce),E=u.parse("/entity-facets{?facet*,filter*}").expand({...R.query});return await this.fetchApi.fetch(`${w}${E}`,{headers:{"Content-Type":"application/json",...(p==null?void 0:p.token)&&{Authorization:`Bearer ${p==null?void 0:p.token}`}},method:"GET"})}async getLocation(R,p){const w=await this.discoveryApi.getBaseUrl(ce),E=u.parse("/locations/{id}").expand({id:R.path.id});return await this.fetchApi.fetch(`${w}${E}`,{headers:{"Content-Type":"application/json",...(p==null?void 0:p.token)&&{Authorization:`Bearer ${p==null?void 0:p.token}`}},method:"GET"})}async getLocationByEntity(R,p){const w=await this.discoveryApi.getBaseUrl(ce),E=u.parse("/locations/by-entity/{kind}/{namespace}/{name}").expand({kind:R.path.kind,namespace:R.path.namespace,name:R.path.name});return await this.fetchApi.fetch(`${w}${E}`,{headers:{"Content-Type":"application/json",...(p==null?void 0:p.token)&&{Authorization:`Bearer ${p==null?void 0:p.token}`}},method:"GET"})}async getLocations(R,p){const w=await this.discoveryApi.getBaseUrl(ce),E=u.parse("/locations").expand({});return await this.fetchApi.fetch(`${w}${E}`,{headers:{"Content-Type":"application/json",...(p==null?void 0:p.token)&&{Authorization:`Bearer ${p==null?void 0:p.token}`}},method:"GET"})}async refreshEntity(R,p){const w=await this.discoveryApi.getBaseUrl(ce),E=u.parse("/refresh").expand({});return await this.fetchApi.fetch(`${w}${E}`,{headers:{"Content-Type":"application/json",...(p==null?void 0:p.token)&&{Authorization:`Bearer ${p==null?void 0:p.token}`}},method:"POST",body:JSON.stringify(R.body)})}async validateEntity(R,p){const w=await this.discoveryApi.getBaseUrl(ce),E=u.parse("/validate-entity").expand({});return await this.fetchApi.fetch(`${w}${E}`,{headers:{"Content-Type":"application/json",...(p==null?void 0:p.token)&&{Authorization:`Bearer ${p==null?void 0:p.token}`}},method:"POST",body:JSON.stringify(R.body)})}}var oe=Object.defineProperty,ze=(ee,R,p)=>R in ee?oe(ee,R,{enumerable:!0,configurable:!0,writable:!0,value:p}):ee[R]=p,Le=(ee,R,p)=>(ze(ee,typeof R!="symbol"?R+"":R,p),p);class Pe{constructor(R){Le(this,"apiClient"),this.apiClient=new ie(R)}async getEntityAncestors(R,p){return await this.requestRequired(await this.apiClient.getEntityAncestryByName({path:(0,o.KU)(R.entityRef)},p))}async getLocationById(R,p){return await this.requestOptional(await this.apiClient.getLocation({path:{id:R}},p))}async getLocationByEntity(R,p){return await this.requestOptional(await this.apiClient.getLocationByEntity({path:(0,o.KU)(R)},p))}async getEntities(R,p){const{filter:w=[],fields:f=[],order:E,offset:F,limit:re,after:se}=R!=null?R:{},_e=[];if(E)for(const H of[E].flat())H&&_e.push(`${H.order}:${H.field}`);const Q=await this.requestRequired(await this.apiClient.getEntities({query:{fields:f,limit:re,filter:this.getFilterValue(w),offset:F,after:se,order:E?_e:void 0}},p)),g=(H,G)=>{var Oe,ue;if(((Oe=H.metadata)==null?void 0:Oe.name)===void 0||H.kind===void 0||((ue=G.metadata)==null?void 0:ue.name)===void 0||G.kind===void 0)return 0;const it=(0,o.U2)(H),ot=(0,o.U2)(G);return it<ot?-1:it>ot?1:0};return{items:Q.sort(g)}}async getEntitiesByRefs(R,p){const w=await this.apiClient.getEntitiesByRefs({body:R},p);if(!w.ok)throw await l.o3.fromResponse(w);const{items:f}=await w.json();return{items:f.map(E=>E!=null?E:void 0)}}async queryEntities(R={},p){var w,f;const E={};if(ye(R)){const{fields:F=[],filter:re,limit:se,orderFields:_e,fullTextFilter:Q}=R;E.filter=this.getFilterValue(re),se!==void 0&&(E.limit=se),_e!==void 0&&(E.orderField=(Array.isArray(_e)?_e:[_e]).map(({field:H,order:G})=>`${H},${G}`)),F.length&&(E.fields=F);const g=(w=Q==null?void 0:Q.term)==null?void 0:w.trim();g&&(E.fullTextFilterTerm=g),(f=Q==null?void 0:Q.fields)!=null&&f.length&&(E.fullTextFilterFields=Q.fields)}else{const{fields:F=[],limit:re,cursor:se}=R;E.cursor=se,re!==void 0&&(E.limit=re),F.length&&(E.fields=F)}return this.apiClient.getEntitiesByQuery({query:E},p).then(F=>F.json())}async getEntityByRef(R,p){return this.requestOptional(await this.apiClient.getEntityByName({path:(0,o.KU)(R)},p))}async getEntityByName(R,p){const{kind:w,namespace:f="default",name:E}=R;return this.requestOptional(await this.apiClient.getEntityByName({path:{kind:w,namespace:f,name:E}},p))}async refreshEntity(R,p){const w=await this.apiClient.refreshEntity({body:{entityRef:R}},p);if(w.status!==200)throw new Error(await w.text())}async getEntityFacets(R,p){const{filter:w=[],facets:f}=R;return await this.requestOptional(await this.apiClient.getEntityFacets({query:{facet:f,filter:this.getFilterValue(w)}},p))}async addLocation(R,p){const{type:w="url",target:f,dryRun:E}=R,F=await this.apiClient.createLocation({body:{type:w,target:f},query:{dryRun:E?"true":void 0}},p);if(F.status!==201)throw new Error(await F.text());const{location:re,entities:se,exists:_e}=await F.json();if(!re)throw new Error(`Location wasn't added: ${f}`);return{location:re,entities:se,exists:_e}}async getLocationByRef(R,p){return(await this.requestRequired(await this.apiClient.getLocations({},p))).map(f=>f.data).find(f=>R===(0,o.KL)(f))}async removeLocationById(R,p){await this.requestIgnored(await this.apiClient.deleteLocation({path:{id:R}},p))}async removeEntityByUid(R,p){await this.requestIgnored(await this.apiClient.deleteEntityByUid({path:{uid:R}},p))}async validateEntity(R,p,w){const f=await this.apiClient.validateEntity({body:{entity:R,location:p}},w);if(f.ok)return{valid:!0};if(f.status!==400)throw await l.o3.fromResponse(f);const{errors:E=[]}=await f.json();return{valid:!1,errors:E}}async requestIgnored(R){if(!R.ok)throw await l.o3.fromResponse(R)}async requestRequired(R){if(!R.ok)throw await l.o3.fromResponse(R);return R.json()}async requestOptional(R){if(!R.ok){if(R.status===404)return;throw await l.o3.fromResponse(R)}return await R.json()}getFilterValue(R=[]){const p=[];for(const w of[R].flat()){const f=[];for(const[E,F]of Object.entries(w))for(const re of[F].flat())re===Y?f.push(E):typeof re=="string"&&f.push(`${E}=${re}`);f.length&&p.push(f.join(","))}return p}}const C="backstage.io/catalog-processing"},29835:(wn,wt,e)=>{"use strict";e.d(wt,{Cr:()=>or,Eo:()=>ma,Ey:()=>Dn,I4:()=>Za,IB:()=>Be,KL:()=>qa,KU:()=>F,Kx:()=>tn,L8:()=>hn,P:()=>ze,Qz:()=>Ct,U2:()=>re,ZD:()=>Ve,_P:()=>oe,aY:()=>La,fO:()=>he,fT:()=>Pt,jn:()=>Cn,nC:()=>At,oQ:()=>ie,r2:()=>rr,sA:()=>an,sM:()=>E,tj:()=>Ln,u0:()=>Ft,vv:()=>Jt,yz:()=>Bt,zj:()=>gn,zu:()=>Mt});var o=e(45250),l=e.n(o),A=e(11601),B=e.n(A);function u(et){return et.kind.toLocaleUpperCase("en-US")==="API"}function r(et){return et.kind.toLocaleUpperCase("en-US")==="COMPONENT"}function Y(et){return et.kind.toLocaleUpperCase("en-US")==="DOMAIN"}function ye(et){return et.kind.toLocaleUpperCase("en-US")==="GROUP"}function ce(et){return et.kind.toLocaleUpperCase("en-US")==="LOCATION"}function a(et){return et.kind.toLocaleUpperCase("en-US")==="RESOURCE"}function fe(et){return et.kind.toLocaleUpperCase("en-US")==="SYSTEM"}function le(et){return et.kind.toLocaleUpperCase("en-US")==="USER"}const ie="default",oe="backstage.io/view-url",ze="backstage.io/edit-url",Le="kubernetes.io/api-server",Pe="kubernetes.io/api-server-certificate-authority",C="kubernetes.io/auth-provider";var ee=Object.defineProperty,R=(et,Ee,rt)=>Ee in et?ee(et,Ee,{enumerable:!0,configurable:!0,writable:!0,value:rt}):et[Ee]=rt,p=(et,Ee,rt)=>(R(et,typeof Ee!="symbol"?Ee+"":Ee,rt),rt);class w{constructor(Ee=ie){p(this,"namespace"),this.namespace=Ee}async enforce(Ee){return Ee.metadata.namespace?Ee:lodash.merge({metadata:{namespace:this.namespace}},Ee)}}function f(et){let Ee=et.indexOf(":");const rt=et.indexOf("/");rt!==-1&&rt<Ee&&(Ee=-1);const un=Ee===-1?void 0:et.slice(0,Ee),Un=rt===-1?void 0:et.slice(Ee+1,rt),Zn=et.slice(Math.max(Ee+1,rt+1));if(un===""||Un===""||Zn==="")throw new TypeError(`Entity reference "${et}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:un,namespace:Un,name:Zn}}function E(et){return{kind:et.kind,namespace:et.metadata.namespace||ie,name:et.metadata.name}}function F(et,Ee){var rt,un,Un,Zn;if(!et)throw new Error("Entity reference must not be empty");const pa=Ee==null?void 0:Ee.defaultKind,xa=(Ee==null?void 0:Ee.defaultNamespace)||ie;let Ha,wa,Va;if(typeof et=="string"){const Ia=f(et);Ha=(rt=Ia.kind)!=null?rt:pa,wa=(un=Ia.namespace)!=null?un:xa,Va=Ia.name}else Ha=(Un=et.kind)!=null?Un:pa,wa=(Zn=et.namespace)!=null?Zn:xa,Va=et.name;if(Ha)if(wa){if(!Va){const Ia=JSON.stringify(et);throw new Error(`Entity reference ${Ia} had missing or empty name`)}}else{const Ia=JSON.stringify(et);throw new Error(`Entity reference ${Ia} had missing or empty namespace`)}else{const Ia=JSON.stringify(et);throw new Error(`Entity reference ${Ia} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:Ha,namespace:wa,name:Va}}function re(et){var Ee,rt;let un,Un,Zn;return"metadata"in et?(un=et.kind,Un=(Ee=et.metadata.namespace)!=null?Ee:ie,Zn=et.metadata.name):(un=et.kind,Un=(rt=et.namespace)!=null?rt:ie,Zn=et.name),`${un.toLocaleLowerCase("en-US")}:${Un.toLocaleLowerCase("en-US")}/${Zn.toLocaleLowerCase("en-US")}`}var se=Object.defineProperty,_e=(et,Ee,rt)=>Ee in et?se(et,Ee,{enumerable:!0,configurable:!0,writable:!0,value:rt}):et[Ee]=rt,Q=(et,Ee,rt)=>(_e(et,typeof Ee!="symbol"?Ee+"":Ee,rt),rt);class g{constructor(Ee){Q(this,"parentRef");const{kind:rt,namespace:un,name:Un}=F(Ee,{defaultKind:"Group",defaultNamespace:ie});if(rt.toLocaleUpperCase("en-US")!=="GROUP")throw new TypeError("group parent must be a group");this.parentRef=re({kind:rt,namespace:un,name:Un})}async enforce(Ee){if(Ee.kind!=="Group")return Ee;const rt=Ee;return rt.spec.parent||re(rt)!==this.parentRef&&(rt.spec.parent=this.parentRef),rt}}class H{static isValidPrefixAndOrSuffix(Ee,rt,un,Un){if(typeof Ee!="string")return!1;const Zn=Ee.split(rt);return Zn.length===1?Un(Zn[0]):Zn.length===2?un(Zn[0])&&Un(Zn[1]):!1}static isJsonSafe(Ee){try{return l().isEqual(Ee,JSON.parse(JSON.stringify(Ee)))}catch{return!1}}static isValidDnsSubdomain(Ee){return typeof Ee=="string"&&Ee.length>=1&&Ee.length<=253&&Ee.split(".").every(H.isValidDnsLabel)}static isValidDnsLabel(Ee){return typeof Ee=="string"&&Ee.length>=1&&Ee.length<=63&&/^[a-z0-9]+(?:\-+[a-z0-9]+)*$/.test(Ee)}static isValidTag(Ee){return typeof Ee=="string"&&Ee.length>=1&&Ee.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(Ee)}static isValidUrl(Ee){if(typeof Ee!="string")return!1;try{return new URL(Ee),!0}catch{return!1}}static isValidString(Ee){var rt;return typeof Ee=="string"&&((rt=Ee==null?void 0:Ee.trim())==null?void 0:rt.length)>=1}static isNonEmptyString(Ee){var rt;return typeof Ee=="string"&&((rt=Ee==null?void 0:Ee.trim())==null?void 0:rt.length)>=1}}var G="http://json-schema.org/draft-07/schema",Oe="EntityEnvelope",ue="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",it=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],ot="object",pt=["apiVersion","kind","metadata"],nt=!0,Ge={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},De={$schema:G,$id:Oe,description:ue,examples:it,type:ot,required:pt,additionalProperties:nt,properties:Ge},Ae="http://json-schema.org/draft-07/schema",Ne="Entity",ne="The parts of the format that's common to all versions/kinds of entity.",N=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],X="object",Ue=["apiVersion","kind","metadata"],te=!1,we={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},ht={$schema:Ae,$id:Ne,description:ne,examples:N,type:X,required:Ue,additionalProperties:te,properties:we},Wt="http://json-schema.org/draft-07/schema",bt="EntityMeta",It="Metadata fields common to all versions/kinds of entity.",O=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],S="object",K=["name"],ae=!0,We={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},type:{type:"string",description:"An optional value to categorize links into specific groups.",examples:["runbook","documentation","logs","dashboard"],minLength:1}}}}},qe={$schema:Wt,$id:bt,description:It,examples:O,type:S,required:K,additionalProperties:ae,properties:We},gt="http://json-schema.org/draft-07/schema",_t="common",st="object",Zt="Common definitions to import from other schemas",at={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","targetRef"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference",deprecated:!0},targetRef:{type:"string",minLength:1,description:"The entity ref of the target of this relation."}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},mt={$schema:gt,$id:_t,type:st,description:Zt,definitions:at};const Qe=new Map,Lt=[De,ht,qe,mt];function St(et){if(!(et!=null&&et.length))throw new TypeError("Unknown error");const Ee=et[0];throw new TypeError(`${Ee.instancePath||"<root>"} ${Ee.message}${Ee.params?` - ${Object.entries(Ee.params).map(([rt,un])=>`${rt}: ${un}`).join(", ")}`:""}`)}function en(et,Ee={}){var rt;const un=(rt=Ee==null?void 0:Ee.disableCache)!=null?rt:!1,Un=un?"":JSON.stringify(et);if(!un){const Ha=Qe.get(Un);if(Ha)return Ha}const Zn=xt(et),pa=new(B())({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});Zn.length&&pa.addSchema(Zn,void 0,void 0,!0);const xa=pa.compile(et);return un||Qe.set(Un,xa),xa}function xt(et){if(typeof et!="object")return[];const Ee=new Set;et.$id&&Ee.add(et.$id);const rt=new Array,un=[et];for(;un.length;){const Un=un.pop();for(const Zn of pe(Un))if(!Ee.has(Zn)){Ee.add(Zn);const pa=Lt.find(xa=>xa.$id===Zn);pa&&(rt.push(pa),un.push(pa))}}return rt}function*pe(et){const Ee=[et];for(;Ee.length;){const rt=Ee.pop();if(typeof rt=="object"&&rt)for(const[un,Un]of Object.entries(rt))un==="$ref"&&typeof Un=="string"?yield Un.split("#")[0]:Ee.push(Un)}}function Fe(et){const Ee=en(et||De);return rt=>{if(Ee(rt)===!0)return rt;throw St(Ee.errors)}}function Mt(et){const Ee=en(et);return rt=>{var un;if(Ee(rt)===!0)return rt;const Zn=(un=Ee.errors)==null?void 0:un.filter(pa=>["/kind","/apiVersion"].includes(pa.instancePath));if(Zn!=null&&Zn.length&&Zn.every(pa=>pa.keyword==="enum"))return!1;throw St(Ee.errors)}}function Xt(et){const Ee=en(et||ht);return rt=>{if(Ee(rt)===!0)return rt;throw St(Ee.errors)}}class Bt{static isValidApiVersion(Ee){return H.isValidPrefixAndOrSuffix(Ee,"/",H.isValidDnsSubdomain,rt=>rt.length>=1&&rt.length<=63&&/^[a-z0-9A-Z]+$/.test(rt))}static isValidKind(Ee){return typeof Ee=="string"&&Ee.length>=1&&Ee.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(Ee)}static isValidObjectName(Ee){return typeof Ee=="string"&&Ee.length>=1&&Ee.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(Ee)}static isValidNamespace(Ee){return H.isValidDnsLabel(Ee)}static isValidLabelKey(Ee){return H.isValidPrefixAndOrSuffix(Ee,"/",H.isValidDnsSubdomain,Bt.isValidObjectName)}static isValidLabelValue(Ee){return Ee===""||Bt.isValidObjectName(Ee)}static isValidAnnotationKey(Ee){return H.isValidPrefixAndOrSuffix(Ee,"/",H.isValidDnsSubdomain,Bt.isValidObjectName)}static isValidAnnotationValue(Ee){return typeof Ee=="string"}}const jt={isValidApiVersion:Bt.isValidApiVersion,isValidKind:Bt.isValidKind,isValidEntityName:Bt.isValidObjectName,isValidNamespace:Bt.isValidNamespace,isValidLabelKey:Bt.isValidLabelKey,isValidLabelValue:Bt.isValidLabelValue,isValidAnnotationKey:Bt.isValidAnnotationKey,isValidAnnotationValue:Bt.isValidAnnotationValue,isValidTag:et=>typeof et=="string"&&et.length>=1&&et.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(et)};function Ln(et={}){return{...jt,...et}}var pn=Object.defineProperty,cn=(et,Ee,rt)=>Ee in et?pn(et,Ee,{enumerable:!0,configurable:!0,writable:!0,value:rt}):et[Ee]=rt,En=(et,Ee,rt)=>(cn(et,typeof Ee!="symbol"?Ee+"":Ee,rt),rt);class lt{constructor(Ee=Ln()){En(this,"validators"),this.validators=Ee}async enforce(Ee){var rt,un,Un,Zn,pa,xa,Ha;function wa(v,c,P){if(c==null)throw new Error(`${v} must have a value`);let z;try{z=P(c)}catch(Te){throw new Error(`${v} could not be validated, ${Te}`)}if(!z){let Te;switch(P.name){case"isValidLabelValue":case"isValidObjectName":Te="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":Te="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":Te="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":Te="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":Te="a string";break;case"isValidKind":Te="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":Te="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":Te="a non empty string";break;default:Te=void 0;break}const He=Te?` expected ${Te} but found "${c}".`:"";throw new Error(`"${v}" is not valid;${He} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function Va(v,c,P){return c===void 0||wa(v,c,P)}wa("apiVersion",Ee.apiVersion,this.validators.isValidApiVersion),wa("kind",Ee.kind,this.validators.isValidKind),wa("metadata.name",Ee.metadata.name,this.validators.isValidEntityName),Va("metadata.namespace",Ee.metadata.namespace,this.validators.isValidNamespace);for(const[v,c]of Object.entries((rt=Ee.metadata.labels)!=null?rt:[]))wa(`labels.${v}`,v,this.validators.isValidLabelKey),wa(`labels.${v}`,c,this.validators.isValidLabelValue);for(const[v,c]of Object.entries((un=Ee.metadata.annotations)!=null?un:[]))wa(`annotations.${v}`,v,this.validators.isValidAnnotationKey),wa(`annotations.${v}`,c,this.validators.isValidAnnotationValue);const Ia=(Un=Ee.metadata.tags)!=null?Un:[];for(let v=0;v<Ia.length;++v)wa(`tags.${v}`,Ia[v],this.validators.isValidTag);const Ga=(Zn=Ee.metadata.links)!=null?Zn:[];for(let v=0;v<Ga.length;++v)wa(`links.${v}.url`,(pa=Ga[v])==null?void 0:pa.url,H.isValidUrl),Va(`links.${v}.title`,(xa=Ga[v])==null?void 0:xa.title,H.isNonEmptyString),Va(`links.${v}.icon`,(Ha=Ga[v])==null?void 0:Ha.icon,Bt.isValidObjectName);return Ee}}var Ot=Object.defineProperty,Vt=(et,Ee,rt)=>Ee in et?Ot(et,Ee,{enumerable:!0,configurable:!0,writable:!0,value:rt}):et[Ee]=rt,Dt=(et,Ee,rt)=>(Vt(et,typeof Ee!="symbol"?Ee+"":Ee,rt),rt);const ct=null;class je{constructor(Ee=ct){Dt(this,"knownFields"),this.knownFields=Ee}async enforce(Ee){for(const rt of Object.keys(Ee))if(!this.knownFields.includes(rt))throw new Error(`Unknown field ${rt}`);return Ee}}var Yt=Object.defineProperty,Gt=(et,Ee,rt)=>Ee in et?Yt(et,Ee,{enumerable:!0,configurable:!0,writable:!0,value:rt}):et[Ee]=rt,sn=(et,Ee,rt)=>(Gt(et,typeof Ee!="symbol"?Ee+"":Ee,rt),rt);class bn{constructor(){sn(this,"validate")}async enforce(Ee){if(!this.validate){const Un=new Ajv({allowUnionTypes:!0});this.validate=Un.addSchema([mt,qe],void 0,void 0,!0).compile(ht)}if(this.validate(Ee)===!0)return Ee;const[un]=this.validate.errors||[];throw un?new Error(`Malformed envelope, ${un.instancePath||"<root>"} ${un.message}`):new Error("Malformed envelope, Unknown error")}}class In{constructor(Ee){this.policies=Ee}async enforce(Ee){let rt=Ee;for(const un of this.policies){const Un=await un.enforce(rt);if(!Un)throw new Error(`Policy ${un.constructor.name} did not return a result`);rt=Un}return rt}}class Pn{constructor(Ee){this.policies=Ee}async enforce(Ee){for(const rt of this.policies){const un=await rt.enforce(Ee);if(un)return un}throw new Error("The entity did not match any known policy")}}const qn={allOf(et){return new In(et)},oneOf(et){return new Pn(et)}};var Gn="http://json-schema.org/draft-07/schema",Nn="ApiV1alpha1",On="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",Jn=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],aa=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc","trpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],ft={$schema:Gn,$id:Nn,description:On,examples:Jn,allOf:aa};function m(et){let Ee;return{async check(rt){return Ee||(Ee=Mt(et)),Ee(rt)===rt}}}const D=m(ft);var j="http://json-schema.org/draft-07/schema",de="ComponentV1alpha1",x='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',$=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],q=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],xe={$schema:j,$id:de,description:x,examples:$,allOf:q};const ke=m(xe);var vt="http://json-schema.org/draft-07/schema",kt="DomainV1alpha1",V="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",ve=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],$e=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],Ke={$schema:vt,$id:kt,description:V,examples:ve,allOf:$e};const Je=m(Ke);var Ut="http://json-schema.org/draft-07/schema",Rt="GroupV1alpha1",Nt="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",_n=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],An=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],mn={$schema:Ut,$id:Rt,description:Nt,examples:_n,allOf:An};const ln=m(mn);var M="http://json-schema.org/draft-07/schema",J="LocationV1alpha1",be="A location is a marker that references other places to look for catalog data.",Re=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],yt=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],Tt={$schema:M,$id:J,description:be,examples:Re,allOf:yt};const Kt=m(Tt),Jt="ownedBy",hn="ownerOf",Dn="consumesApi",he="apiConsumedBy",Ve="providesApi",Be="apiProvidedBy",At="dependsOn",Pt="dependencyOf",tn="parentOf",Ct="childOf",Ft="memberOf",gn="hasMember",Cn="partOf",an="hasPart";var fn="http://json-schema.org/draft-07/schema",Wn="ResourceV1alpha1",jn="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",ea=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],kn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],Fn={$schema:fn,$id:Wn,description:jn,examples:ea,allOf:kn};const ra=m(Fn);var la="http://json-schema.org/draft-07/schema",Aa="SystemV1alpha1",ya="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",Oa=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],ia=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],Da={$schema:la,$id:Aa,description:ya,examples:Oa,allOf:ia};const Ua=m(Da);var $a="http://json-schema.org/draft-07/schema",Qa="UserV1alpha1",Na="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",za=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],pr=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],ja={$schema:$a,$id:Qa,description:Na,examples:za,allOf:pr};const ar=m(ja),ma="backstage.io/managed-by-location",rr="backstage.io/managed-by-origin-location",Za="backstage.io/source-location",lr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function La(et){if(typeof et!="string")throw new TypeError(`Unable to parse location ref '${et}', unexpected argument ${typeof et}`);const Ee=et.indexOf(":");if(Ee<0)throw new TypeError(`Unable to parse location ref '${et}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const rt=et.substring(0,Ee).trim(),un=et.substring(Ee+1).trim();if(!rt||!un)throw new TypeError(`Unable to parse location ref '${et}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(rt==="http"||rt==="https")throw new TypeError(`Invalid location ref '${et}', please prefix it with 'url:', e.g. 'url:${et}'`);if(lr.test(un))throw new TypeError(`Invalid location ref '${et}', target is a javascript: URL`);return{type:rt,target:un}}function qa(et){const{type:Ee,target:rt}=et;if(Ee){if(!rt)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");if(lr.test(rt))throw new TypeError(`Invalid location ref '${Ee}:${rt}', target is a javascript: URL`);return`${Ee}:${rt}`}function or(et){var Ee,rt,un,Un,Zn;const pa=(Zn=(rt=(Ee=et.metadata)==null?void 0:Ee.annotations)==null?void 0:rt[Za])!=null?Zn:(Un=(un=et.metadata)==null?void 0:un.annotations)==null?void 0:Un[ma];if(!pa)throw new Error(`Entity '${re(et)}' is missing location`);return La(pa)}},12082:(wn,wt,e)=>{"use strict";e.d(wt,{$K:()=>ln,Lz:()=>Un,l2:()=>Ut,Ke:()=>ve,l9:()=>Ke,i3:()=>he,Fb:()=>Pt,W:()=>la,iO:()=>mo,Qf:()=>Gt,WW:()=>bn,kF:()=>qn,n5:()=>q,R8:()=>J,aQ:()=>za,gE:()=>Jn,kI:()=>kt,u_:()=>tn,Yi:()=>hn,Ud:()=>Nt,gu:()=>Za,FA:()=>fn,Z8:()=>$o});var o=e(14041),l=e(39067),A=e.n(l),B=e(97388),u=e(96403),r=e.n(u),Y=e(48821),ye=e(11638),ce=e(46195),a=e(46108),fe=e.n(a),le=e(48875),ie=e.n(le);const oe=null;function ze(h,n){let s,y=!1;const L={};try{s=n!=null&&n.key?h.getConfig(n.key):h;for(const Ce of oe){const Ze=s.getOptionalNumber(Ce);Ze!==void 0&&(L[Ce]=Ze,y=!0)}}catch(Ce){throw new InputError(`Failed to read duration from config, ${Ce}`)}try{if(!y){const Ze=oe.map(tt=>`'${tt}'`).join(", ");throw new Error(`Needs one or more of ${Ze}`)}const Ce=s.keys().filter(Ze=>!oe.includes(Ze));if(Ce.length){const Ze=Ce.length===1?"property":"properties",tt=Ce.map(nn=>`'${nn}'`).join(", "),$t=oe.map(nn=>`'${nn}'`).join(", ");throw new Error(`Unknown ${Ze} ${tt}; expected one or more of ${$t}`)}}catch(Ce){let Ze="Failed to read duration from config";throw n!=null&&n.key&&(Ze+=` at '${n.key}'`),new InputError(`${Ze}, ${Ce}`)}return L}var Le=Object.defineProperty,Pe=(h,n,s)=>n in h?Le(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,C=(h,n,s)=>(Pe(h,typeof n!="symbol"?n+"":n,s),s);const ee=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function R(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function p(h){if(h===null)return"null";if(Array.isArray(h))return"array";const n=typeof h;return n==="number"&&isNaN(h)?"nan":n==="string"&&h===""?"empty-string":n}const w={type(h,n,s,y){return`Invalid type in config for key '${h}' in '${n}', got ${s}, wanted ${y}`},missing(h){return`Missing required config value at '${h}'`},convert(h,n,s){return`Unable to convert config value for key '${h}' in '${n}' to a ${s}`}};class f{constructor(n,s="mock-config",y,L=""){this.data=n,this.context=s,this.fallback=y,this.prefix=L,C(this,"filteredKeys"),C(this,"notifiedFilteredKeys",new Set)}static fromConfigs(n){return n.length===0?new f(void 0):n.reduce((s,{data:y,context:L,filteredKeys:Ce,deprecatedKeys:Ze})=>{const tt=new f(y,L,s);if(tt.filteredKeys=Ce,Ze)for(const{key:$t,description:nn}of Ze)console.warn(`The configuration key '${$t}' of ${L} is deprecated and may be removed soon. ${nn||""}`);return tt},void 0)}has(n){var s,y;return this.readValue(n)!==void 0?!0:(y=(s=this.fallback)==null?void 0:s.has(n))!=null?y:!1}keys(){var n,s;const y=this.data?Object.keys(this.data):[],L=(s=(n=this.fallback)==null?void 0:n.keys())!=null?s:[];return[...new Set([...y,...L])]}get(n){const s=this.getOptional(n);if(s===void 0)throw new Error(w.missing(this.fullKey(n!=null?n:"")));return s}getOptional(n){var s,y;const L=fe()(this.readValue(n)),Ce=(s=this.fallback)==null?void 0:s.getOptional(n);return L===void 0?Ce:Ce===void 0?L:ie()({},{value:Ce},{value:L},(Ze,tt)=>!R(tt)||!R(Ze)?tt:void 0).value}getConfig(n){const s=this.getOptionalConfig(n);if(s===void 0)throw new Error(w.missing(this.fullKey(n)));return s}getOptionalConfig(n){var s;const y=this.readValue(n),L=(s=this.fallback)==null?void 0:s.getOptionalConfig(n);if(R(y))return this.copy(y,n,L);if(y!==void 0)throw new TypeError(w.type(this.fullKey(n),this.context,p(y),"object"));return L}getConfigArray(n){const s=this.getOptionalConfigArray(n);if(s===void 0)throw new Error(w.missing(this.fullKey(n)));return s}getOptionalConfigArray(n){var s;const y=this.readConfigValue(n,L=>{if(!Array.isArray(L))return{expected:"object-array"};for(const[Ce,Ze]of L.entries())if(!R(Ze))return{expected:"object-array",value:Ze,key:`${n}[${Ce}]`};return!0});if(y)return y.map((L,Ce)=>this.copy(L,`${n}[${Ce}]`))}getNumber(n){const s=this.getOptionalNumber(n);if(s===void 0)throw new Error(w.missing(this.fullKey(n)));return s}getOptionalNumber(n){const s=this.readConfigValue(n,L=>typeof L=="number"||typeof L=="string"||{expected:"number"});if(typeof s=="number"||s===void 0)return s;const y=Number(s);if(!Number.isFinite(y))throw new Error(w.convert(this.fullKey(n),this.context,"number"));return y}getBoolean(n){const s=this.getOptionalBoolean(n);if(s===void 0)throw new Error(w.missing(this.fullKey(n)));return s}getOptionalBoolean(n){const s=this.readConfigValue(n,L=>typeof L=="boolean"||typeof L=="number"||typeof L=="string"||{expected:"boolean"});if(typeof s=="boolean"||s===void 0)return s;const y=String(s).trim();if(/^(?:y|yes|true|1|on)$/i.test(y))return!0;if(/^(?:n|no|false|0|off)$/i.test(y))return!1;throw new Error(w.convert(this.fullKey(n),this.context,"boolean"))}getString(n){const s=this.getOptionalString(n);if(s===void 0)throw new Error(w.missing(this.fullKey(n)));return s}getOptionalString(n){return this.readConfigValue(n,s=>typeof s=="string"&&s!==""||{expected:"string"})}getStringArray(n){const s=this.getOptionalStringArray(n);if(s===void 0)throw new Error(w.missing(this.fullKey(n)));return s}getOptionalStringArray(n){return this.readConfigValue(n,s=>{if(!Array.isArray(s))return{expected:"string-array"};for(const[y,L]of s.entries())if(typeof L!="string"||L==="")return{expected:"string-array",value:L,key:`${n}[${y}]`};return!0})}fullKey(n){return`${this.prefix}${this.prefix?".":""}${n}`}copy(n,s,y){const L=new f(n,this.context,y,this.fullKey(s));return L.filteredKeys=this.filteredKeys,L}readConfigValue(n,s){var y,L;const Ce=this.readValue(n);if(Ce===void 0)return(L=this.fallback)==null?void 0:L.readConfigValue(n,s);const Ze=s(Ce);if(Ze!==!0){const{key:tt=n,value:$t=Ce,expected:nn}=Ze;throw new TypeError(w.type(this.fullKey(tt),this.context,p($t),nn))}return Ce}readValue(n){const s=n?n.split("."):[];for(const L of s)if(!ee.test(L))throw new TypeError(`Invalid config key '${n}'`);if(this.data===void 0)return;let y=this.data;for(const[L,Ce]of s.entries())if(R(y))y=y[Ce];else if(y!==void 0){const Ze=this.fullKey(s.slice(0,L).join("."));throw new TypeError(w.type(Ze,this.context,p(y),"object"))}return y}}var E=e(18690),F=e(21613),re=e(91638),se=e(59294),_e=e(46155),Q=e.n(_e),g=e(45145),H=e(47304),G=Object.defineProperty,Oe=(h,n,s)=>n in h?G(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,ue=(h,n,s)=>(Oe(h,typeof n!="symbol"?n+"":n,s),s);class it{constructor(...n){ue(this,"holders"),this.holders=n}get(n){for(const s of this.holders){const y=s.get(n);if(y)return y}}}const ot=(0,B.tK)("api-context"),pt=h=>{var n;const{apis:s,children:y}=h,L=(n=(0,o.useContext)(ot))==null?void 0:n.atVersion(1),Ce=L?new it(s,L):s;return o.createElement(ot.Provider,{value:(0,B.Bl)({1:Ce}),children:y})};pt.propTypes={apis:A().shape({get:A().func.isRequired}).isRequired,children:A().node};var nt=Object.defineProperty,Ge=(h,n,s)=>n in h?nt(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,De=(h,n,s)=>(Ge(h,typeof n!="symbol"?n+"":n,s),s);class Ae{constructor(n){this.factories=n,De(this,"apis",new Map)}static validateFactories(n,s){for(const y of s){const L=[y],Ce=new Set;for(;L.length;){const Ze=L.shift(),tt=n.get(Ze);if(tt)for(const $t of Object.values(tt.deps)){if($t.id===y.id)throw new Error(`Circular dependency of api factory for ${y}`);Ce.has($t)||(Ce.add($t),L.push($t))}}}}get(n){return this.load(n)}load(n,s=[]){const y=this.apis.get(n.id);if(y)return y;const L=this.factories.get(n);if(!L)return;if(s.includes(L.api))throw new Error(`Circular dependency of api factory for ${L.api}`);const Ce=this.loadDeps(n,L.deps,[...s,L.api]),Ze=L.factory(Ce);return this.apis.set(n.id,Ze),Ze}loadDeps(n,s,y){const L={};for(const Ce in s)if(s.hasOwnProperty(Ce)){const Ze=s[Ce],tt=this.load(Ze,y);if(!tt)throw new Error(`No API factory available for dependency ${Ze} of dependent ${n}`);L[Ce]=tt}return L}}var Ne=Object.defineProperty,ne=(h,n,s)=>n in h?Ne(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,N=(h,n,s)=>(ne(h,typeof n!="symbol"?n+"":n,s),s),X=(h=>(h[h.default=10]="default",h[h.app=50]="app",h[h.static=100]="static",h))(X||{});class Ue{constructor(){N(this,"factories",new Map)}register(n,s){const y=X[n],L=this.factories.get(s.api.id);return L&&L.priority>=y?!1:(this.factories.set(s.api.id,{priority:y,factory:s}),!0)}get(n){const s=this.factories.get(n.id);if(s)return s.factory}getAllApis(){const n=new Set;for(const{factory:s}of this.factories.values())n.add(s.api);return n}}function te(h){return new Promise((n,s)=>{const y=h.width||500,L=h.height||700,Ce=window.screen.width/2-y/2,Ze=window.screen.height/2-L/2,tt=window.open(h.url,h.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${y},height=${L},top=${Ze},left=${Ce}`);let $t="";if(!tt||typeof tt.closed=="undefined"||tt.closed){const xn=new Error("Failed to open auth popup.");xn.name="PopupRejectedError",s(xn);return}const nn=xn=>{if(xn.source!==tt||xn.origin!==h.origin)return;const{data:da}=xn;if(da.type==="config_info"){$t=da.targetOrigin;return}if(da.type!=="authorization_response")return;const ta=da;if("error"in ta){const fa=new Error(ta.error.message);fa.name=ta.error.name,s(fa)}else n(ta.response);Bn()},Yn=setInterval(()=>{if(tt.closed){const xn=`Login failed, ${$t&&$t!==window.location.origin?`Incorrect app origin, expected ${$t}`:"popup was closed"}`,da=new Error(xn);da.name="PopupClosedError",s(da),Bn()}},100);function Bn(){window.removeEventListener("message",nn),clearInterval(Yn)}window.addEventListener("message",nn)})}var we=Object.defineProperty,ht=(h,n,s)=>n in h?we(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,Wt=(h,n,s)=>(ht(h,typeof n!="symbol"?n+"":n,s),s);let bt=!1;function It(h){return[...h].join(" ")}class O{constructor(n){Wt(this,"discoveryApi"),Wt(this,"environment"),Wt(this,"provider"),Wt(this,"joinScopesFunc"),Wt(this,"authRequester"),Wt(this,"sessionTransform"),Wt(this,"enableExperimentalRedirectFlow"),Wt(this,"popupOptions");var s;const{configApi:y,discoveryApi:L,environment:Ce,provider:Ze,joinScopes:tt=It,oauthRequestApi:$t,sessionTransform:nn=Bn=>Bn,popupOptions:Yn}=n;!bt&&!y&&(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),bt=!0),this.enableExperimentalRedirectFlow=y&&(s=y.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?s:!1,this.authRequester=$t.createAuthRequester({provider:Ze,onAuthRequest:async Bn=>this.enableExperimentalRedirectFlow?this.executeRedirect(Bn):this.showPopup(Bn)}),this.discoveryApi=L,this.environment=Ce,this.provider=Ze,this.joinScopesFunc=tt,this.sessionTransform=nn,this.popupOptions=Yn}async createSession(n){return n.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(n.scopes):this.showPopup(n.scopes):this.authRequester(n.scopes)}async refreshSession(n){const s=await fetch(await this.buildUrl("/refresh",{optional:!0,...n&&{scope:this.joinScopesFunc(n)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(L=>{throw new Error(`Auth refresh request failed, ${L}`)});if(!s.ok){const L=new Error(`Auth refresh request failed, ${s.statusText}`);throw L.status=s.status,L}const y=await s.json();if(y.error){const L=new Error(y.error.message);throw y.error.name&&(L.name=y.error.name),L}return await this.sessionTransform(y)}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(s=>{throw new Error(`Logout request failed, ${s}`)});if(!n.ok){const s=new Error(`Logout request failed, ${n.statusText}`);throw s.status=n.status,s}}async showPopup(n){var s,y,L,Ce,Ze,tt,$t,nn;const Yn=this.joinScopesFunc(n),Bn=await this.buildUrl("/start",{scope:Yn,origin:window.location.origin,flow:"popup"}),xn=(y=(s=this.popupOptions)==null?void 0:s.size)!=null&&y.fullscreen?window.screen.width:((Ce=(L=this.popupOptions)==null?void 0:L.size)==null?void 0:Ce.width)||450,da=(tt=(Ze=this.popupOptions)==null?void 0:Ze.size)!=null&&tt.fullscreen?window.screen.height:((nn=($t=this.popupOptions)==null?void 0:$t.size)==null?void 0:nn.height)||730,ta=await te({url:Bn,name:`${this.provider.title} Login`,origin:new URL(Bn).origin,width:xn,height:da});return await this.sessionTransform(ta)}async executeRedirect(n){const s=this.joinScopesFunc(n);return window.location.href=await this.buildUrl("/start",{scope:s,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(n,s){const y=await this.discoveryApi.getBaseUrl("auth"),L=this.buildQueryString({...s,env:this.environment});return`${y}/${this.provider.id}${n}${L}`}buildQueryString(n){if(!n)return"";const s=Object.entries(n).map(([y,L])=>{if(typeof L=="string")return`${encodeURIComponent(y)}=${encodeURIComponent(L)}`;if(L)return encodeURIComponent(y)}).filter(Boolean).join("&");return s?`?${s}`:""}}var S=Object.defineProperty,K=(h,n,s)=>n in h?S(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,ae=(h,n,s)=>(K(h,typeof n!="symbol"?n+"":n,s),s);class We{constructor(n){ae(this,"discoveryApi"),ae(this,"environment"),ae(this,"provider");const{discoveryApi:s,environment:y,provider:L}=n;this.discoveryApi=s,this.environment=y,this.provider=L}async createSession(){const n=await this.buildUrl("/start"),s=await te({url:n,name:`${this.provider.title} Login`,origin:new URL(n).origin,width:450,height:730});return{...s,id:s.profile.email}}async refreshSession(){}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(s=>{throw new Error(`Logout request failed, ${s}`)});if(!n.ok){const s=new Error(`Logout request failed, ${n.statusText}`);throw s.status=n.status,s}}async buildUrl(n){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${n}?env=${this.environment}`}}function qe(h,n){for(const s of n)if(!h.has(s))return!1;return!0}class gt{constructor(n){this.options=n}sessionExistsAndHasScope(n,s){if(!n)return!1;if(!s||this.options.sessionScopes===void 0)return!0;const y=this.options.sessionScopes(n);return qe(y,s)}getExtendedScope(n,s){const y=new Set(this.options.defaultScopes);if(n&&this.options.sessionScopes!==void 0){const L=this.options.sessionScopes(n);for(const Ce of L)y.add(Ce)}if(s)for(const L of s)y.add(L);return y}}var _t=Object.defineProperty,st=(h,n,s)=>n in h?_t(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,Zt=(h,n,s)=>(st(h,typeof n!="symbol"?n+"":n,s),s);class at{constructor(){Zt(this,"isClosed",!1),Zt(this,"terminatingError"),Zt(this,"observable",new(r())(n=>this.isClosed?(this.terminatingError?n.error(this.terminatingError):n.complete(),()=>{}):(this.subscribers.add(n),()=>{this.subscribers.delete(n)}))),Zt(this,"subscribers",new Set)}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(s=>s.next(n))}error(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(s=>s.error(n))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,s,y){const L=typeof n=="function"?{next:n,error:s,complete:y}:n;return this.observable.subscribe(L)}}class mt{constructor(n){Zt(this,"isClosed"),Zt(this,"currentValue"),Zt(this,"terminatingError"),Zt(this,"observable"),Zt(this,"subscribers",new Set),this.isClosed=!1,this.currentValue=n,this.terminatingError=void 0,this.observable=new(r())(s=>this.isClosed?(this.terminatingError?s.error(this.terminatingError):s.complete(),()=>{}):(s.next(this.currentValue),this.subscribers.add(s),()=>{this.subscribers.delete(s)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=n,this.subscribers.forEach(s=>s.next(n))}error(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(s=>s.error(n))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,s,y){const L=typeof n=="function"?{next:n,error:s,complete:y}:n;return this.observable.subscribe(L)}}var Qe=Object.defineProperty,Lt=(h,n,s)=>n in h?Qe(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,St=(h,n,s)=>(Lt(h,typeof n!="symbol"?n+"":n,s),s);class en{constructor(){St(this,"subject",new mt(Y.S.SignedOut)),St(this,"signedIn",!1)}setIsSignedIn(n){this.signedIn!==n&&(this.signedIn=n,this.subject.next(this.signedIn?Y.S.SignedIn:Y.S.SignedOut))}sessionState$(){return this.subject}}var xt=Object.defineProperty,pe=(h,n,s)=>n in h?xt(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,Fe=(h,n,s)=>(pe(h,typeof n!="symbol"?n+"":n,s),s);class Mt{constructor(n){Fe(this,"connector"),Fe(this,"helper"),Fe(this,"sessionScopesFunc"),Fe(this,"sessionShouldRefreshFunc"),Fe(this,"stateTracker",new en),Fe(this,"refreshPromise"),Fe(this,"currentSession");const{connector:s,defaultScopes:y=new Set,sessionScopes:L,sessionShouldRefresh:Ce}=n;this.connector=s,this.sessionScopesFunc=L,this.sessionShouldRefreshFunc=Ce,this.helper=new gt({sessionScopes:L,defaultScopes:y})}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const y=await this.collapsedSessionRefresh(n.scopes),L=this.sessionScopesFunc(this.currentSession),Ce=this.sessionScopesFunc(y);return qe(Ce,L)&&(this.currentSession=y),y}catch(y){if(n.optional)return;throw y}}if(!this.currentSession&&!n.instantPopup)try{const s=await this.collapsedSessionRefresh(n.scopes);return this.currentSession=s,this.getSession(n)}catch{}if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(n){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession(this.helper.getExtendedScope(this.currentSession,n));try{const s=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),s}finally{delete this.refreshPromise}}}var Xt=Object.defineProperty,Bt=(h,n,s)=>n in h?Xt(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,jt=(h,n,s)=>(Bt(h,typeof n!="symbol"?n+"":n,s),s);class Ln{constructor(n){jt(this,"connector"),jt(this,"helper"),jt(this,"stateTracker",new en),jt(this,"currentSession");const{connector:s,defaultScopes:y=new Set,sessionScopes:L}=n;this.connector=s,this.helper=new gt({sessionScopes:L,defaultScopes:y})}setSession(n){this.currentSession=n,this.stateTracker.setIsSignedIn(!!n)}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes))return this.currentSession;if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}var pn=Object.defineProperty,cn=(h,n,s)=>n in h?pn(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,En=(h,n,s)=>(cn(h,typeof n!="symbol"?n+"":n,s),s);class lt{constructor(n){En(this,"manager"),En(this,"storageKey"),En(this,"schema"),En(this,"sessionShouldRefreshFunc"),En(this,"helper");const{manager:s,storageKey:y,schema:L,sessionScopes:Ce,sessionShouldRefresh:Ze=()=>!1}=n;this.manager=s,this.storageKey=y,this.schema=L,this.sessionShouldRefreshFunc=Ze,this.helper=new gt({sessionScopes:Ce,defaultScopes:new Set})}setSession(n){this.manager.setSession(n),this.saveSession(n)}async getSession(n){const{scopes:s}=n,y=this.loadSession();if(this.helper.sessionExistsAndHasScope(y,s)&&!this.sessionShouldRefreshFunc(y))return this.manager.setSession(y),y;const L=await this.manager.getSession(n);return this.saveSession(L),L}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const n=localStorage.getItem(this.storageKey);if(n){const s=JSON.parse(n,(y,L)=>(L==null?void 0:L.__type)==="Set"?new Set(L.__value):L);try{return this.schema.parse(s)}catch(y){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${y}`),y}}return}catch{localStorage.removeItem(this.storageKey);return}}saveSession(n){if(n===void 0){localStorage.removeItem(this.storageKey);return}try{this.schema.parse(n)}catch(s){console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${s}`);return}localStorage.setItem(this.storageKey,JSON.stringify(n,(s,y)=>y instanceof Set?{__type:"Set",__value:Array.from(y)}:y))}}var Ot=Object.defineProperty,Vt=(h,n,s)=>n in h?Ot(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,Dt=(h,n,s)=>(Vt(h,typeof n!="symbol"?n+"":n,s),s);const ct={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class je{constructor(n){Dt(this,"sessionManager"),Dt(this,"scopeTransform"),this.sessionManager=n.sessionManager,this.scopeTransform=n.scopeTransform}static create(n){const{configApi:s,discoveryApi:y,environment:L="development",provider:Ce=ct,oauthRequestApi:Ze,defaultScopes:tt=[],scopeTransform:$t=xn=>xn,popupOptions:nn}=n,Yn=new O({configApi:s,discoveryApi:y,environment:L,provider:Ce,oauthRequestApi:Ze,sessionTransform({backstageIdentity:xn,...da}){var ta;const fa={...da,providerInfo:{idToken:da.providerInfo.idToken,accessToken:da.providerInfo.accessToken,scopes:je.normalizeScopes($t,da.providerInfo.scope),expiresAt:da.providerInfo.expiresInSeconds?new Date(Date.now()+da.providerInfo.expiresInSeconds*1e3):void 0}};if(xn){const Ya=(ta=xn.expiresInSeconds)!=null?ta:da.providerInfo.expiresInSeconds;fa.backstageIdentity={token:xn.token,identity:xn.identity,expiresAt:Ya?new Date(Date.now()+Ya*1e3):void 0}}return fa},popupOptions:nn}),Bn=new Mt({connector:Yn,defaultScopes:new Set(tt),sessionScopes:xn=>xn.providerInfo.scopes,sessionShouldRefresh:xn=>{var da,ta;let fa=1/0;return(da=xn.providerInfo)!=null&&da.expiresAt&&(fa=Math.min(fa,(xn.providerInfo.expiresAt.getTime()-Date.now())/1e3)),(ta=xn.backstageIdentity)!=null&&ta.expiresAt&&(fa=Math.min(fa,(xn.backstageIdentity.expiresAt.getTime()-Date.now())/1e3)),fa<60*5}});return new je({sessionManager:Bn,scopeTransform:$t})}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(n,s){var y;const L=je.normalizeScopes(this.scopeTransform,n),Ce=await this.sessionManager.getSession({...s,scopes:L});return(y=Ce==null?void 0:Ce.providerInfo.accessToken)!=null?y:""}async getIdToken(n={}){var s;const y=await this.sessionManager.getSession({...n,scopes:new Set(["openid"])});return(s=y==null?void 0:y.providerInfo.idToken)!=null?s:""}async getBackstageIdentity(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.backstageIdentity}async getProfile(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.profile}static normalizeScopes(n,s){if(!s)return new Set;const y=Array.isArray(s)?s:s.split(/[\s|,]/).filter(Boolean);return new Set(n(y))}}const Yt={id:"github",title:"GitHub",icon:()=>null};class Gt{static create(n){const{configApi:s,discoveryApi:y,environment:L="development",provider:Ce=Yt,oauthRequestApi:Ze,defaultScopes:tt=["read:user"]}=n;return je.create({configApi:s,discoveryApi:y,oauthRequestApi:Ze,provider:Ce,environment:L,defaultScopes:tt})}}const sn={id:"gitlab",title:"GitLab",icon:()=>null};class bn{static create(n){const{configApi:s,discoveryApi:y,environment:L="development",provider:Ce=sn,oauthRequestApi:Ze,defaultScopes:tt=["read_user"]}=n;return je.create({configApi:s,discoveryApi:y,oauthRequestApi:Ze,provider:Ce,environment:L,defaultScopes:tt})}}const In={id:"google",title:"Google",icon:()=>null},Pn="https://www.googleapis.com/auth/";class qn{static create(n){const{configApi:s,discoveryApi:y,oauthRequestApi:L,environment:Ce="development",provider:Ze=In,defaultScopes:tt=["openid",`${Pn}userinfo.email`,`${Pn}userinfo.profile`]}=n;return je.create({configApi:s,discoveryApi:y,oauthRequestApi:L,provider:Ze,environment:Ce,defaultScopes:tt,scopeTransform($t){return $t.map(nn=>nn==="openid"?nn:nn==="profile"||nn==="email"?`${Pn}userinfo.${nn}`:nn.startsWith(Pn)?nn:`${Pn}${nn}`)}})}}const Gn={id:"okta",title:"Okta",icon:()=>null},Nn=new Set(["openid","profile","email","phone","address","groups","offline_access"]),On="okta.";class Jn{static create(n){const{configApi:s,discoveryApi:y,environment:L="development",provider:Ce=Gn,oauthRequestApi:Ze,defaultScopes:tt=["openid","email","profile","offline_access"]}=n;return je.create({configApi:s,discoveryApi:y,oauthRequestApi:Ze,provider:Ce,environment:L,defaultScopes:tt,scopeTransform($t){return $t.map(nn=>Nn.has(nn)||nn.startsWith(On)?nn:`${On}${nn}`)}})}}const aa=ce.z.object({profile:ce.z.object({email:ce.z.string().optional(),displayName:ce.z.string().optional(),picture:ce.z.string().optional()}),backstageIdentity:ce.z.object({token:ce.z.string(),identity:ce.z.object({type:ce.z.literal("user"),userEntityRef:ce.z.string(),ownershipEntityRefs:ce.z.array(ce.z.string())})})}),ft={id:"saml",title:"SAML",icon:()=>null};class m{constructor(n){this.sessionManager=n}static create(n){const{discoveryApi:s,environment:y="development",provider:L=ft}=n,Ce=new We({discoveryApi:s,environment:y,provider:L}),Ze=new Ln({connector:Ce}),tt=new lt({manager:Ze,storageKey:`${L.id}Session`,schema:aa});return new m(tt)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.backstageIdentity}async getProfile(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.profile}}var D=Object.defineProperty,j=(h,n,s)=>n in h?D(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,de=(h,n,s)=>(j(h,typeof n!="symbol"?n+"":n,s),s);const x={id:"microsoft",title:"Microsoft",icon:()=>null},$=class Mr{constructor(n){de(this,"oauth2"),de(this,"configApi"),de(this,"environment"),de(this,"provider"),de(this,"oauthRequestApi"),de(this,"discoveryApi"),de(this,"scopeTransform");const{configApi:s,environment:y="development",provider:L=x,oauthRequestApi:Ce,discoveryApi:Ze,defaultScopes:tt=["openid","offline_access","profile","email","User.Read"],scopeTransform:$t=nn=>nn.concat("offline_access")}=n;this.configApi=s,this.environment=y,this.provider=L,this.oauthRequestApi=Ce,this.discoveryApi=Ze,this.scopeTransform=$t,this.oauth2={[Mr.MicrosoftGraphID]:je.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform,defaultScopes:tt})}}static create(n){return new Mr(n)}microsoftGraph(){return this.oauth2[Mr.MicrosoftGraphID]}static resourceForScopes(n){var s;const y=[...new Set(n.split(" ").map(Mr.resourceForScope).filter(Ce=>Ce!=="openid"))];if(y.length>1)return Promise.reject(new Error(`Requested access token with scopes from multiple Azure resources: ${y.join(", ")}. Access tokens can only have a single audience.`));const L=(s=y[0])!=null?s:Mr.MicrosoftGraphID;return Promise.resolve(L)}static resourceForScope(n){var s;const y=(s=n.match(/^(?<resourceURI>.*)\/(?<scp>[^\/]*)$/))==null?void 0:s.groups;if(y){const{resourceURI:L}=y;return L.replace(/^api:\/\//,"")}switch(n){case"email":case"openid":case"offline_access":case"profile":return"openid";default:return Mr.MicrosoftGraphID}}async getAccessToken(n,s){const y=n===void 0?Mr.MicrosoftGraphID:await Mr.resourceForScopes(Array.isArray(n)?n.join(" "):n);return y in this.oauth2||(this.oauth2[y]=je.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform})),this.oauth2[y].getAccessToken(n,s)}getIdToken(n){return this.microsoftGraph().getIdToken(n)}getProfile(n){return this.microsoftGraph().getProfile(n)}getBackstageIdentity(n){return this.microsoftGraph().getBackstageIdentity(n)}signIn(){return this.microsoftGraph().signIn()}signOut(){return this.microsoftGraph().signOut()}sessionState$(){return this.microsoftGraph().sessionState$()}};de($,"MicrosoftGraphID","00000003-0000-0000-c000-000000000000");let q=$;const xe={id:"onelogin",title:"onelogin",icon:()=>null},ke=new Set(["openid","profile","email","phone","address","groups","offline_access"]),vt="onelogin.";class kt{static create(n){const{configApi:s,discoveryApi:y,environment:L="development",provider:Ce=xe,oauthRequestApi:Ze}=n;return je.create({configApi:s,discoveryApi:y,oauthRequestApi:Ze,provider:Ce,environment:L,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(tt){return tt.map($t=>ke.has($t)||$t.startsWith(vt)?$t:`${vt}${$t}`)}})}}const V={id:"bitbucket",title:"Bitbucket",icon:()=>null};class ve{static create(n){const{configApi:s,discoveryApi:y,environment:L="development",provider:Ce=V,oauthRequestApi:Ze,defaultScopes:tt=["account"]}=n;return je.create({configApi:s,discoveryApi:y,oauthRequestApi:Ze,provider:Ce,environment:L,defaultScopes:tt})}}const $e={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class Ke{static create(n){const{configApi:s,discoveryApi:y,environment:L="development",provider:Ce=$e,oauthRequestApi:Ze,defaultScopes:tt=["PROJECT_ADMIN"]}=n;return je.create({configApi:s,discoveryApi:y,oauthRequestApi:Ze,provider:Ce,environment:L,defaultScopes:tt})}}const Je={id:"atlassian",title:"Atlassian",icon:()=>null};class Ut{static create(n){const{configApi:s,discoveryApi:y,environment:L="development",provider:Ce=Je,oauthRequestApi:Ze}=n;return je.create({configApi:s,discoveryApi:y,oauthRequestApi:Ze,provider:Ce,environment:L})}}const Rt={id:"vmwareCloudServices",title:"VMware Cloud",icon:()=>null};class Nt{static create(n){const{configApi:s,discoveryApi:y,oauthRequestApi:L,environment:Ce="development",provider:Ze=Rt,defaultScopes:tt=["openid"]}=n;return je.create({configApi:s,discoveryApi:y,oauthRequestApi:L,provider:Ze,environment:Ce,defaultScopes:tt})}}var _n=Object.defineProperty,An=(h,n,s)=>n in h?_n(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,mn=(h,n,s)=>(An(h,typeof n!="symbol"?n+"":n,s),s);class ln{constructor(){mn(this,"subject",new at)}post(n){this.subject.next(n)}alert$(){return this.subject}}class M{constructor(n){this.actualApis=n}static fromApis(n){return new M(n)}captureEvent(n){this.actualApis.forEach(s=>{try{s.captureEvent(n)}catch{}})}}class J{captureEvent(n){}}var be=Object.defineProperty,Re=(h,n,s)=>n in h?be(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,yt=(h,n,s)=>(Re(h,typeof n!="symbol"?n+"":n,s),s);const Tt="theme";class Kt{constructor(n){this.themes=n,yt(this,"activeThemeId"),yt(this,"subject",new mt(void 0))}static createWithStorage(n){var s;const y=new Kt(n);if(!window.localStorage)return y;const L=(s=window.localStorage.getItem(Tt))!=null?s:void 0;return y.setActiveThemeId(L),y.activeThemeId$().subscribe(Ce=>{Ce?window.localStorage.setItem(Tt,Ce):window.localStorage.removeItem(Tt)}),window.addEventListener("storage",Ce=>{var Ze;if(Ce.key===Tt){const tt=(Ze=localStorage.getItem(Tt))!=null?Ze:void 0;y.setActiveThemeId(tt)}}),y}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(n){this.activeThemeId=n,this.subject.next(n)}}const Jt="Invalid discovery URL pattern,";class hn{constructor(n){this.parts=n}static compile(n){const s=n.split(/\{\{\s*pluginId\s*\}\}/),y=s.join("pluginId");let L;try{L=new URL(y)}catch{throw new Error(`${Jt} URL '${y}' is invalid`)}if(L.hash)throw new Error(`${Jt} URL must not have a hash`);if(L.search)throw new Error(`${Jt} URL must not have a query`);if(y.endsWith("/"))throw new Error(`${Jt} URL must not end with a slash`);return new hn(s)}async getBaseUrl(n){return this.parts.join(encodeURIComponent(n))}}class Dn{constructor(n,s){this.endpoints=n,this.defaultEndpoint=s}static fromConfig(n,s){var y,L;const Ce=(y=s==null?void 0:s.pathPattern)!=null?y:"/api/{{ pluginId }}",Ze=n.getString("backend.baseUrl"),tt=(L=n.getOptionalConfigArray("discovery.endpoints"))==null?void 0:L.flatMap($t=>{const nn=typeof $t.get("target")=="object"?$t.getString("target.external"):$t.getString("target"),Yn=hn.compile(nn);return $t.getStringArray("plugins").map(Bn=>[Bn,Yn])});return new Dn(new Map(tt),hn.compile(`${Ze}${Ce}`))}async getBaseUrl(n){const s=this.endpoints.get(n);return s?s.getBaseUrl(n):this.defaultEndpoint.getBaseUrl(n)}}class he{constructor(n,s){this.alertApi=n,this.errorApi=s}post(n,s){return s!=null&&s.hidden||this.alertApi.post({message:n.message,severity:"error"}),this.errorApi.post(n,s)}error$(){return this.errorApi.error$()}}var Ve=Object.defineProperty,Be=(h,n,s)=>n in h?Ve(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,At=(h,n,s)=>(Be(h,typeof n!="symbol"?n+"":n,s),s);class Pt{constructor(){At(this,"subject",new at)}post(n,s){this.subject.next({error:n,context:s})}error$(){return this.subject}}class tn{static forward(n,s){window.addEventListener("unhandledrejection",y=>{n.post(y.reason,s)})}}var Ct=Object.defineProperty,Ft=(h,n,s)=>n in h?Ct(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,gn=(h,n,s)=>(Ft(h,typeof n!="symbol"?n+"":n,s),s);function Cn(h){if(h.length<3)throw new Error(`The '${h}' feature flag must have a minimum length of three characters.`);if(h.length>150)throw new Error(`The '${h}' feature flag must not exceed 150 characters.`);if(!h.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${h}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class an{constructor(){gn(this,"registeredFeatureFlags",[]),gn(this,"flags")}registerFlag(n){Cn(n.name),this.registeredFeatureFlags.push(n)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(n){return this.flags||(this.flags=this.load()),this.flags.get(n)===Y.F.Active}save(n){this.flags||(this.flags=this.load()),n.merge||this.flags.clear();for(const[y,L]of Object.entries(n.states))this.flags.set(y,L);const s=Array.from(this.flags.entries()).filter(([,y])=>y===Y.F.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(s)))}load(){try{const n=window.localStorage.getItem("featureFlags");if(!n)return new Map;const s=JSON.parse(n);if(typeof s!="object"||s===null||Array.isArray(s))return new Map;const y=Object.entries(s).filter(([L,Ce])=>(Cn(L),Ce===Y.F.Active));return new Map(y)}catch{return new Map}}}function fn(h){var n;let s=h.baseImplementation||e.g.fetch;const y=[(n=h.middleware)!=null?n:[]].flat().reverse();for(const L of y)s=L.apply(s);return{fetch:s}}class Wn{constructor(n,s,y,L){this.identityApi=n,this.allowUrl=s,this.headerName=y,this.headerValue=L}static create(n){var s,y;const L=jn(n),Ce=((s=n.header)==null?void 0:s.name)||"authorization",Ze=((y=n.header)==null?void 0:y.value)||(tt=>`Bearer ${tt}`);return new Wn(n.identityApi,L,Ce,Ze)}apply(n){return async(s,y)=>{const L=new Request(s,y),{token:Ce}=await this.identityApi.getCredentials();return L.headers.get(this.headerName)||typeof Ce!="string"||!Ce||!this.allowUrl(L.url)?n(s,y):(L.headers.set(this.headerName,this.headerValue(Ce)),n(L))}}}function jn(h){return h.allowUrl?h.allowUrl:h.urlPrefixAllowlist?ea(h.urlPrefixAllowlist):h.config?ea([h.config.getString("backend.baseUrl")]):()=>!1}function ea(h){const n=h.map(s=>s.replace(/\/$/,""));return s=>n.some(y=>s===y||s.startsWith(`${y}/`))}function kn(h,n){return!n||n==="/"?h:`${h.replace(/\/$/,"")}/${n.replace(/^\//,"")}`}class Fn{constructor(n){this.discoveryApi=n}apply(n){return async(s,y)=>{const L=new Request(s,y),Ce="plugin://";if(!L.url.startsWith(Ce))return n(s,y);const{hostname:Ze,pathname:tt,search:$t,hash:nn,username:Yn,password:Bn}=new URL(`http://${L.url.substring(Ce.length)}`);let xn=await this.discoveryApi.getBaseUrl(Ze);if(Yn||Bn){const ta=new URL(xn),fa=`${Yn}${Bn?`:${Bn}`:""}@`;xn=`${ta.protocol}//${fa}${ta.host}${ta.pathname}`}const da=`${kn(xn,tt)}${$t}${nn}`;return n(da,typeof s=="string"||ra(s)?y:s)}}}function ra(h){return typeof h=="object"&&(h==null?void 0:h.constructor)===URL}class la{static resolvePluginProtocol(n){return new Fn(n.discoveryApi)}static injectIdentityAuth(n){return Wn.create(n)}constructor(){}}var Aa=Object.defineProperty,ya=(h,n,s)=>n in h?Aa(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,Oa=(h,n,s)=>(ya(h,typeof n!="symbol"?n+"":n,s),s);function ia(h,n){for(const s of n)if(!h.has(s))return!1;return!0}function Da(h,...n){const s=new Set(h);for(const y of n)for(const L of y)s.add(L);return s}class Ua{constructor(){Oa(this,"requests",[]),Oa(this,"subject",new mt(this.getCurrentPending()))}request(n){return new Promise((s,y)=>{this.requests.push({scopes:n,resolve:s,reject:y}),this.subject.next(this.getCurrentPending())})}resolve(n,s){this.requests=this.requests.filter(y=>ia(n,y.scopes)?(y.resolve(s),!1):!0),this.subject.next(this.getCurrentPending())}reject(n){this.requests.forEach(s=>s.reject(n)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const n=this.requests.length===0?void 0:this.requests.slice(1).reduce((s,y)=>Da(s,y.scopes),this.requests[0].scopes);return{scopes:n,resolve:s=>{n&&this.resolve(n,s)},reject:s=>{n&&this.reject(s)}}}}var $a=Object.defineProperty,Qa=(h,n,s)=>n in h?$a(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,Na=(h,n,s)=>(Qa(h,typeof n!="symbol"?n+"":n,s),s);class za{constructor(){Na(this,"subject",new mt([])),Na(this,"currentRequests",[]),Na(this,"handlerCount",0)}createAuthRequester(n){const s=new Ua,y=this.handlerCount;return this.handlerCount++,s.pending().subscribe({next:L=>{const Ce=this.currentRequests.slice(),Ze=this.makeAuthRequest(L,n);Ze?Ce[y]=Ze:delete Ce[y],this.currentRequests=Ce,this.subject.next(Ce.filter(Boolean))}}),L=>s.request(L)}makeAuthRequest(n,s){const{scopes:y}=n;if(y)return{provider:s.provider,trigger:async()=>{const L=await s.onAuthRequest(y);n.resolve(L)},reject:()=>{const L=new Error("Login failed, rejected by user");L.name="RejectedError",n.reject(L)}}}authRequest$(){return this.subject}}var pr=Object.defineProperty,ja=(h,n,s)=>n in h?pr(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,ar=(h,n,s)=>(ja(h,typeof n!="symbol"?n+"":n,s),s);const ma=new Map,rr=class to{constructor(n,s){this.namespace=n,this.errorApi=s,ar(this,"subscribers",new Set),ar(this,"observable",new(r())(y=>(this.subscribers.add(y),()=>{this.subscribers.delete(y)})))}static create(n){var s;return new to((s=n.namespace)!=null?s:"",n.errorApi)}static addStorageEventListener(){window.addEventListener("storage",n=>{var s;for(const[y,L]of ma.entries())(s=n.key)!=null&&s.startsWith(y)&&L.handleStorageChange(n.key)})}get(n){return this.snapshot(n).value}snapshot(n){let s,y="absent";try{const L=localStorage.getItem(this.getKeyName(n));L&&(s=JSON.parse(L,(Ce,Ze)=>(typeof Ze=="object"&&Ze!==null&&Object.freeze(Ze),Ze)),y="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${n}`))}return{key:n,value:s,presence:y}}forBucket(n){const s=`${this.namespace}/${n}`;return ma.has(s)||ma.set(s,new to(s,this.errorApi)),ma.get(s)}async set(n,s){localStorage.setItem(this.getKeyName(n),JSON.stringify(s)),this.notifyChanges(n)}async remove(n){localStorage.removeItem(this.getKeyName(n)),this.notifyChanges(n)}observe$(n){return to.hasSubscribed||(to.addStorageEventListener(),to.hasSubscribed=!0),this.observable.filter(({key:s})=>s===n)}handleStorageChange(n){if(!(n!=null&&n.startsWith(this.namespace)))return;const s=n==null?void 0:n.slice(`${this.namespace}/`.length);s.includes("/")||this.notifyChanges(decodeURIComponent(s))}getKeyName(n){return`${this.namespace}/${encodeURIComponent(n)}`}notifyChanges(n){const s=this.snapshot(n);for(const y of this.subscribers)y.next(s)}};ar(rr,"hasSubscribed",!1);let Za=rr;const lr=(0,o.createContext)(void 0);function La(){const[h]=(0,E.AV)(o.createElement(E.qh,{index:!0,element:o.createElement("div",null)}));return!h.index}const qa=(h,n)=>{try{const s=(0,F.ue)(n,{pathname:h}),y=s==null?void 0:s.filter($t=>{var nn;return((nn=$t==null?void 0:$t.route.routeRefs)==null?void 0:nn.size)>0}).pop(),L=y==null?void 0:y.route;if(!L||L.path===""&&h!=="/")return;let Ce;L.routeRefs.size===1&&(Ce=L.routeRefs.values().next().value);let Ze;L.plugins.size===1&&(Ze=L.plugins.values().next().value);const tt=Object.entries((y==null?void 0:y.params)||{}).reduce(($t,[nn,Yn])=>(Yn!==void 0&&nn!=="*"&&($t[nn]=Yn),$t),{});return{extension:"App",pluginId:(Ze==null?void 0:Ze.getId())||"root",...Ce?{routeRef:Ce.id}:{},_routeNodeType:L.element,params:tt}}catch{return}},or=({pathname:h,search:n,hash:s,attributes:y})=>{const L=(0,ye.st)();return(0,o.useEffect)(()=>{L.captureEvent("navigate",`${h}${n}${s}`,{attributes:y})},[L,h,n,s,y]),null},et=({routeObjects:h})=>{const{pathname:n,search:s,hash:y}=(0,E.zy)(),{params:L,...Ce}=qa(n,h)||{params:{}};return o.createElement(ye.Ig,{attributes:Ce},o.createElement(or,{pathname:n,search:s,hash:y,attributes:L}))};function Ee(h){return La()?rt(h):""}function rt(h){var n;let{pathname:s}=new URL((n=h.getOptionalString("app.baseUrl"))!=null?n:"/","http://sample.dev");return s=s.replace(/\/*$/,""),s}function un({component:h,appIdentityProxy:n,children:s}){const[y,L]=(0,o.useState)(),Ce=(0,Y.u)(Y.p),Ze=rt(Ce);return y?(n.setTarget(y,{signOutTargetUrl:Ze||"/"}),o.createElement(o.Fragment,null,s)):o.createElement(h,{onSignInSuccess:L})}function Un(h){const{Router:n,SignInPage:s}=(0,ye.nm)().getComponents(),y=(0,Y.u)(Y.p),L=rt(y),Ce=`${L}/*`,Ze=(0,o.useContext)(lr);if(!Ze)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:tt,appIdentityProxy:$t}=Ze;return s?La()?o.createElement(n,null,o.createElement(et,{routeObjects:tt}),o.createElement(un,{component:s,appIdentityProxy:$t},o.createElement(E.BV,null,o.createElement(E.qh,{path:Ce,element:o.createElement(o.Fragment,null,h.children)})))):o.createElement(n,{basename:L},o.createElement(et,{routeObjects:tt}),o.createElement(un,{component:s,appIdentityProxy:$t},h.children)):($t.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:L||"/"}),La()?o.createElement(n,null,o.createElement(et,{routeObjects:tt}),o.createElement(E.BV,null,o.createElement(E.qh,{path:Ce,element:o.createElement(o.Fragment,null,h.children)}))):o.createElement(n,{basename:L},o.createElement(et,{routeObjects:tt}),h.children))}(0,ye.h3)(Un,"core.type","AppRouter");function Zn(h){const n={};for(const y in h.collectors)h.collectors.hasOwnProperty(y)&&(n[y]=h.collectors[y]());const s=[{node:o.Children.toArray(h.root),parent:void 0,contexts:{}}];for(;s.length!==0;){const{node:y,parent:L,contexts:Ce}=s.shift();o.Children.forEach(y,Ze=>{if(!(0,o.isValidElement)(Ze))return;const tt={};for(const $t in n)if(n.hasOwnProperty($t)){const nn=n[$t];tt[$t]=nn.visit(nn.accumulator,Ze,L,Ce[$t])}for(const $t of h.discoverers){const nn=$t(Ze);nn&&s.push({node:nn,parent:Ze,contexts:tt})}})}return Object.fromEntries(Object.entries(n).map(([y,L])=>[y,L.accumulator]))}function pa(h,n){return()=>({accumulator:h(),visit:n})}function xa(h){var n;return(n=h.props)==null?void 0:n.children}function Ha(h){var n,s,y;if((n=h.props)!=null&&n.path&&((s=h.props)!=null&&s.element))return(y=h.props)==null?void 0:y.element}const wa=pa(()=>new Set,(h,n)=>{const s=(0,ye.E0)(n,"core.plugin");s&&h.add(s)}),Va=h=>{const{children:n}=h,s=(0,Y.u)(Y.f),y="with"in h?s.isActive(h.with):!s.isActive(h.without);return o.createElement(o.Fragment,null,y?n:null)};(0,ye.h3)(Va,"core.featureFlagged",!0);const Ia={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set,plugins:new Set};function Ga(h){var n,s;const y=h;return y!=null&&y.type?(s=(n=y.type.displayName)!=null?n:y.type.name)!=null?s:String(y.type):String(y)}const v=h=>{const n=new Set;return h&&n.add(h),n};function c(h,n=new Array){return o.Children.forEach(h,s=>{if(!(0,o.isValidElement)(s))return;const y=(0,ye.E0)(s,"core.mountPoint");if(y){const L=(0,ye.E0)(s,"core.plugin");n.push({routeRef:y,plugin:L})}c(s.props.children,n)}),n}const P=pa(()=>({paths:new Map,parents:new Map,objects:new Array}),(h,n,s,y)=>{var L,Ce,Ze,tt,$t,nn,Yn;if(y!=null&&y.isElementAncestor)return y;if((s==null?void 0:s.props.element)===n)return{...y,isElementAncestor:!0};const Bn=(L=n.props)==null?void 0:L.path,xn=(0,ye.E0)(n,"core.mountPoint");if(xn&&Bn)throw new Error(`Path property may not be set directly on a routable extension "${Ga(n)}"`);const da=(Ze=(Ce=y==null?void 0:y.obj)==null?void 0:Ce.children)!=null?Ze:h.objects;if(Bn!==void 0){if(typeof Bn!="string")throw new Error(`Element path must be a string at "${Ga(n)}"`);const ta=Bn.startsWith("/")?Bn.slice(1):Bn,fa=n.props.element;if((0,ye.E0)(n,"core.gatherMountPoints")){if(fa)throw new Error(`Mount point gatherers may not have an element prop "${Ga(n)}"`);const Ya={path:ta,element:"gathered",routeRefs:new Set,caseSensitive:!!((tt=n.props)!=null&&tt.caseSensitive),children:[Ia],plugins:new Set};return da.push(Ya),{obj:Ya,gatherPath:ta,routeRef:y==null?void 0:y.routeRef,gatherRouteRef:y==null?void 0:y.routeRef}}if(fa){const[Ya,...va]=c(fa);if(va.length>0)throw new Error(`Route element with path "${Bn}" may not contain multiple routable extensions`);if(!Ya)return y;const{routeRef:mr,plugin:Ur}=Ya,_o={path:ta,element:"mounted",routeRefs:new Set([mr]),caseSensitive:!!(($t=n.props)!=null&&$t.caseSensitive),children:[Ia],plugins:v(Ur)};return da.push(_o),h.paths.set(mr,ta),h.parents.set(mr,y==null?void 0:y.routeRef),{obj:_o,routeRef:mr!=null?mr:y==null?void 0:y.routeRef,gatherPath:ta,gatherRouteRef:y==null?void 0:y.gatherRouteRef}}}if(xn){if((y==null?void 0:y.gatherPath)===void 0)throw new Error(`Routable extension "${Ga(n)}" with mount point "${xn}" must be assigned a path`);(nn=y==null?void 0:y.obj)==null||nn.routeRefs.add(xn);const ta=(0,ye.E0)(n,"core.plugin");return ta&&((Yn=y==null?void 0:y.obj)==null||Yn.plugins.add(ta)),h.paths.set(xn,y.gatherPath),h.parents.set(xn,y==null?void 0:y.gatherRouteRef),{...y,routeRef:xn}}return y}),z=pa(()=>({paths:new Map,parents:new Map,objects:new Array}),(h,n,s,y)=>{var L,Ce,Ze,tt,$t;if((s==null?void 0:s.props.element)===n)return y;let nn=y==null?void 0:y.obj,Yn=y==null?void 0:y.routeRef,Bn=y==null?void 0:y.sticky;const xn=(L=n.props)==null?void 0:L.path,da=(Ce=nn==null?void 0:nn.children)!=null?Ce:h.objects,ta=!!((Ze=n.props)!=null&&Ze.caseSensitive);let fa=y==null?void 0:y.path;if((0,ye.E0)(n,"core.gatherMountPoints")){if(!xn)throw new Error("Mount point gatherer must have a path");fa=xn}const Ya=(tt=n.props)==null?void 0:tt.element;let va=(0,ye.E0)(n,"core.mountPoint");if(!va&&(0,o.isValidElement)(Ya)&&(va=(0,ye.E0)(Ya,"core.mountPoint")),va){let Ur=xn;if(fa&&(Ur?fa=void 0:Ur=fa),!Ur)throw new Error("Mounted routable extension must have a path");h.paths.set(va,Ur),Yn&&Bn?(h.parents.set(va,Yn),xn&&(Yn=va,Bn=!1)):(h.parents.set(va,Yn),Yn=va),xn?(nn={caseSensitive:ta,path:xn,element:"mounted",routeRefs:new Set([va]),children:[Ia],plugins:v((0,ye.E0)(n.props.element,"core.plugin"))},da.push(nn)):nn==null||nn.routeRefs.add(va)}if((0,ye.E0)(n,"core.gatherMountPoints")&&(Bn=!0),(0,ye.E0)(n,"core.gatherMountPoints")){if(!xn)throw new Error("Mount point gatherer must have a path");va||(nn={caseSensitive:ta,path:xn,element:"gathered",routeRefs:new Set,children:[Ia],plugins:(($t=y==null?void 0:y.obj)==null?void 0:$t.plugins)||new Set},da.push(nn))}return{obj:nn,path:fa,routeRef:Yn,sticky:Bn}}),Te=pa(()=>new Set,(h,n)=>{if(n.type===Va){const s=n.props;h.add("with"in s?s.with:s.without)}}),He=(0,B.Q6)("route-ref-type",()=>Symbol("route-ref-type"));function Ht(h){return h[He]==="absolute"}function rn(h){return h[He]==="sub"}function Mn(h){return h[He]==="external"}function Sn(...h){const n=h.join("/").replace(/\/\/+/g,"/");return n!=="/"&&n.endsWith("/")?n.slice(0,-1):n}function Ea(h,n,s){let y,L="";if(Ht(h))y=h;else if(rn(h))y=h.parent,L=h.path;else if(Mn(h)){const tt=s.get(h);if(!tt)return[void 0,""];if(Ht(tt))y=tt;else if(rn(tt))y=tt.parent,L=tt.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${tt}`)}else throw h[He]?new Error(`Unknown or invalid route ref type, ${h[He]}`):new Error(`Unknown object passed to useRouteRef, got ${h}`);if(!y)return[void 0,""];const Ce=n.get(y);if(Ce===void 0)return[void 0,""];const Ze=Sn(Ce,L);return[y,Ze]}function ba(h,n,s,y,L){var Ce;const Ze=(Ce=(0,F.ue)(L,n))!=null?Ce:[],tt=Array();let $t=-1;for(let Bn=h;Bn&&($t=Ze.findIndex(xn=>xn.route.routeRefs.has(Bn)),$t===-1);Bn=y.get(Bn))tt.unshift(Bn);tt.length===0&&($t-=1);const nn=$t===-1?"":Ze[$t].pathname,Yn=tt.slice(0,-1).map(Bn=>{const xn=s.get(Bn);if(xn===void 0)throw new Error(`No path for ${Bn}`);if(xn.includes(":"))throw new Error(`Cannot route to ${h} with parent ${Bn} as it has parameters`);return xn});return`${Sn(nn,...Yn)}/`}class Ra{constructor(n,s,y,L,Ce){this.routePaths=n,this.routeParents=s,this.routeObjects=y,this.routeBindings=L,this.appBasePath=Ce}resolve(n,s){const[y,L]=Ea(n,this.routePaths,this.routeBindings);if(!y)return;let Ce;typeof s=="string"?Ce=this.trimPath(s):s.pathname?Ce={...s,pathname:this.trimPath(s.pathname)}:Ce=s;const Ze=this.appBasePath+ba(y,Ce,this.routePaths,this.routeParents,this.routeObjects);return(...[$t])=>{const nn=$t&&Q()($t,Yn=>typeof Yn=="string"?Yn.replaceAll(/[&?#;\/]/g,Bn=>encodeURIComponent(Bn)):Yn);return Sn(Ze,(0,F.tW)(L,nn))}}trimPath(n){return n&&(n.startsWith(this.appBasePath)?n.slice(this.appBasePath.length):n)}}const ua=(0,B.tK)("routing-context"),Ja=({routePaths:h,routeParents:n,routeObjects:s,routeBindings:y,basePath:L="",children:Ce})=>{const Ze=new Ra(h,n,s,y,L),tt=(0,B.Bl)({1:Ze});return o.createElement(ua.Provider,{value:tt},Ce)};function er(h,n){const s=new Set(n.values());s.delete(void 0);for(const y of n.keys()){if(s.has(y))continue;let L=y,Ce="";for(;L;){const tt=h.get(L);if(tt===void 0)throw new Error(`No path for ${L}`);Ce=Sn(tt,Ce),L=n.get(L)}const Ze=Ce.match(/:(\w+)/g);if(Ze){for(let tt=0;tt<Ze.length;tt++)for(let $t=tt+1;$t<Ze.length;$t++)if(Ze[$t]===Ze[tt])throw new Error(`Parameter ${Ze[$t]} is duplicated in path ${Ce}`)}}}function hr(h,n){for(const s of n)if(s.externalRoutes){for(const[y,L]of Object.entries(s.externalRoutes))if(!L.optional&&!h.has(L))throw new Error(`External route '${y}' of the '${s.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const cr=(0,B.tK)("app-context"),Eo=({appContext:h,children:n})=>{const s=(0,B.Bl)({1:h});return o.createElement(cr.Provider,{value:s,children:n})};var no=Object.defineProperty,Nr=(h,n,s)=>n in h?no(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,ur=(h,n,s)=>(Nr(h,typeof n!="symbol"?n+"":n,s),s);function Vr(h){return new Error(`Tried to access IdentityApi ${h} before app was loaded`)}function Lr(h){console.warn(`WARNING: Call to ${h} is deprecated and will break in the future`)}class xr{constructor(){ur(this,"target"),ur(this,"waitForTarget"),ur(this,"resolveTarget",()=>{}),ur(this,"signOutTargetUrl","/"),this.waitForTarget=new Promise(n=>{this.resolveTarget=n})}setTarget(n,s){this.target=n,this.signOutTargetUrl=s.signOutTargetUrl,this.resolveTarget(n)}getUserId(){if(!this.target)throw Vr("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return Lr("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw Vr("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return Lr("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(n=>n.getProfileInfo())}async getBackstageIdentity(){const n=await this.waitForTarget.then(s=>s.getBackstageIdentity());return n.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${n.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),n}async getCredentials(){return this.waitForTarget.then(n=>n.getCredentials())}async getIdToken(){return this.waitForTarget.then(n=>{if(!n.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return Lr("getIdToken"),n.getIdToken()})}async signOut(){await this.waitForTarget.then(n=>n.signOut()),window.location.href=this.signOutTargetUrl}}function Fr(h,n,s){if(h!==void 0){const L=s.find(Ce=>Ce.id===h);if(L)return L}if(n){const L=s.find(Ce=>Ce.variant==="dark");if(L)return L}const y=s.find(L=>L.variant==="light");return y||s[0]}const Cr=()=>{const h=(0,o.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[n,s]=(0,o.useState)(h.matches);return(0,o.useEffect)(()=>{const y=L=>{s(L.matches)};return h.addListener(y),()=>{h.removeListener(y)}},[h]),n};function Pr({children:h}){const n=(0,Y.u)(Y.n),s=(0,g.A)(n.activeThemeId$(),n.getActiveThemeId()),y=window.matchMedia?Cr():!1,L=Fr(s,y,n.getInstalledThemes());if(!L)throw new Error("App has no themes");return o.createElement(L.Provider,{children:h})}const ao=async()=>ro();function ro(h=/*__APP_INJECTED_CONFIG_MARKER__*/"[{\"context\":\"app\",\"deprecatedKeys\":[],\"data\":{\"app\":{\"title\":\"Scaffolded Backstage App\",\"baseUrl\":\"http://localhost:3000\"},\"organization\":{\"name\":\"My Company\"},\"backend\":{\"baseUrl\":\"http://localhost:7007\"},\"integrations\":{\"github\":[{\"host\":\"github.com\"}]},\"techdocs\":{\"builder\":\"local\"},\"catalog\":{\"import\":{\"entityFilename\":\"catalog-info.yaml\",\"pullRequestBranchName\":\"backstage-integration\"}}}}]"/*__INJECTED_END__*/){const n=[{context:"app-config.yaml",data:{app:{title:"Scaffolded Backstage App",baseUrl:"http://localhost:3000"},organization:{name:"My Company"},backend:{baseUrl:"http://localhost:7007"},integrations:{github:[{host:"github.com"}]},techdocs:{builder:"local"},catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}}}}];if(!n)throw new Error("No static configuration provided");if(!Array.isArray(n))throw new Error("Static configuration has invalid format");const s=n.slice();if(h!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const L=JSON.parse(h);Array.isArray(L)?s.push(...L):s.push({data:L,context:"env"})}catch(L){throw new Error(`Failed to load runtime configuration, ${L}`)}const y=window.__APP_CONFIG__;return y&&s.push({context:"window",data:y}),s}var oo=Object.defineProperty,Gr=(h,n,s)=>n in h?oo(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,io=(h,n,s)=>(Gr(h,typeof n!="symbol"?n+"":n,s),s);class so{constructor(){io(this,"apis",[])}add(n,s){return this.apis.push([n.id,s]),s}build(){return new ir(new Map(this.apis))}}class ir{constructor(n){this.apis=n}static builder(){return new so}static from(n){return new ir(new Map(n.map(([s,y])=>[s.id,y])))}static with(n,s){return new ir(new Map([[n.id,s]]))}with(n,s){return new ir(new Map([...this.apis,[n.id,s]]))}get(n){return this.apis.get(n.id)}}function lo(h){const n=new Map;return h&&h({bind:(y,L)=>{for(const[Ce,Ze]of Object.entries(L)){const tt=y[Ce];if(!tt)throw new Error(`Key ${Ce} is not an existing external route`);if(!Ze&&!tt.optional)throw new Error(`External route ${Ce} is required but was undefined`);Ze&&n.set(tt,Ze)}}}),n}var Jr=(h,n,s)=>{if(!n.has(h))throw TypeError("Cannot "+s)},gr=(h,n,s)=>(Jr(h,n,"read from private field"),s?s.call(h):n.get(h)),Kr=(h,n,s)=>{if(n.has(h))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(h):n.set(h,s)},Br=(h,n,s,y)=>(Jr(h,n,"write to private field"),y?y.call(h,s):n.set(h,s),s),fr,vr,Rr;const Sr="language",dr="en",vo=class Xo{constructor(n,s){Kr(this,fr,void 0),Kr(this,vr,void 0),Kr(this,Rr,void 0),Br(this,fr,n),Br(this,vr,s),Br(this,Rr,new mt({language:gr(this,vr)}))}static create(n){var s,y;const L=(s=n==null?void 0:n.availableLanguages)!=null?s:[dr];if(L.length!==new Set(L).size)throw new Error(`Supported languages may not contain duplicates, got '${L.join("', '")}'`);if(!L.includes(dr))throw new Error(`Supported languages must include '${dr}'`);const Ce=(y=n==null?void 0:n.defaultLanguage)!=null?y:dr;if(!L.includes(Ce))throw new Error(`Initial language must be one of the supported languages, got '${Ce}'`);return new Xo(L,Ce)}static createWithStorage(n){const s=Xo.create(n);if(!window.localStorage)return s;const y=window.localStorage.getItem(Sr),{languages:L}=s.getAvailableLanguages();return y&&L.includes(y)&&s.setLanguage(y),s.language$().subscribe(({language:Ce})=>{Ce!==window.localStorage.getItem(Sr)&&window.localStorage.setItem(Sr,Ce)}),window.addEventListener("storage",Ce=>{var Ze;if(Ce.key===Sr){const tt=(Ze=localStorage.getItem(Sr))!=null?Ze:void 0;tt&&s.setLanguage(tt)}}),s}getAvailableLanguages(){return{languages:gr(this,fr).slice()}}setLanguage(n){const s=n!=null?n:dr;if(s!==gr(this,vr)){if(s&&!gr(this,fr).includes(s))throw new Error(`Failed to change language to '${s}', available languages are '${gr(this,fr).join("', '")}'`);Br(this,vr,s),gr(this,Rr).next({language:s})}}getLanguage(){return{language:gr(this,vr)}}language$(){return gr(this,Rr)}};fr=new WeakMap,vr=new WeakMap,Rr=new WeakMap;let co=vo;function uo(h){const n=h;if(n.$$type!=="@backstage/TranslationResource")throw new Error(`Invalid translation resource, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation resource, bad version '${n.version}'`);return n}function Yr(h){const n=h;if(n.$$type!=="@backstage/TranslationRef")throw new Error(`Invalid translation ref, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation ref, bad version '${n.version}'`);return n}var zr=(h,n,s)=>{if(!n.has(h))throw TypeError("Cannot "+s)},ha=(h,n,s)=>(zr(h,n,"read from private field"),s?s.call(h):n.get(h)),_=(h,n,s)=>{if(n.has(h))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(h):n.set(h,s)},I=(h,n,s,y)=>(zr(h,n,"write to private field"),y?y.call(h,s):n.set(h,s),s),U=(h,n,s)=>(zr(h,n,"access private method"),s),k,me,Ie,Ye,Xe,dt,qt,zt,dn,Rn,yn,$n,Vn,Tn,oa,ca;function Hn(h){return Object.fromEntries(Object.entries(h).filter(n=>n[1]!==null))}class Kn{constructor(n){this.onLoad=n,_(this,Ye),_(this,k,new Set),_(this,me,new Map),_(this,Ie,new Map)}addTranslationResource(n){const s=uo(n);for(const y of s.resources){const L=U(this,Ye,Xe).call(this,y.language,s.id);ha(this,Ie).has(L)||ha(this,Ie).set(L,y.loader)}}needsLoading(n,s){const y=U(this,Ye,Xe).call(this,n,s);return ha(this,Ie).get(y)?!ha(this,k).has(y):!1}async load(n,s){const y=U(this,Ye,Xe).call(this,n,s),L=ha(this,Ie).get(y);if(!L||ha(this,k).has(y))return;const Ce=ha(this,me).get(y);if(Ce){await Ce;return}const Ze=L().then(tt=>{this.onLoad({language:n,namespace:s,messages:tt.messages}),ha(this,k).add(y)},tt=>{throw ha(this,k).add(y),tt});ha(this,me).set(y,Ze),await Ze}}k=new WeakMap,me=new WeakMap,Ie=new WeakMap,Ye=new WeakSet,Xe=function(h,n){return`${h}/${n}`};const Xn=class ji{constructor(n,s,y){_(this,yn),_(this,Vn),_(this,oa),_(this,dt,void 0),_(this,qt,void 0),_(this,zt,void 0),_(this,dn,new Set),_(this,Rn,new Set),I(this,dt,n),I(this,qt,s),I(this,zt,y)}static create(n){const{languages:s}=n.languageApi.getAvailableLanguages(),y=(0,H.Q_)({fallbackLng:dr,supportedLngs:s,interpolation:{escapeValue:!1},ns:[],defaultNS:!1,fallbackNS:!1,initImmediate:!1});if(y.init(),!y.isInitialized)throw new Error("i18next was unexpectedly not initialized");const{language:L}=n.languageApi.getLanguage();L!==dr&&y.changeLanguage(L);const Ce=new Kn($t=>{y.addResourceBundle($t.language,$t.namespace,Hn($t.messages),!1,!0)}),Ze=(n==null?void 0:n.resources)||[];for(let $t=Ze.length-1;$t>=0;$t--){const nn=Ze[$t];nn.$$type==="@backstage/TranslationResource"?Ce.addTranslationResource(nn):nn.$$type==="@backstage/TranslationMessages"&&y.addResourceBundle(dr,nn.id,Hn(nn.messages),!0,!1)}const tt=new ji(y,Ce,n.languageApi.getLanguage().language);return n.languageApi.language$().subscribe(({language:$t})=>{var nn;U(nn=tt,yn,$n).call(nn,$t)}),tt}getTranslation(n){const s=Yr(n);return U(this,oa,ca).call(this,s),U(this,Vn,Tn).call(this,s)}translation$(n){const s=Yr(n);return U(this,oa,ca).call(this,s),new(r())(y=>{let L={};const Ce=()=>{L={};const tt=L;ha(this,qt).load(ha(this,zt),s.id).then(()=>{if(tt===L){const $t=U(this,Vn,Tn).call(this,s);$t.ready&&y.next($t)}},$t=>{tt===L&&y.error(Array.isArray($t)?$t[0]:$t)})},Ze=()=>{const tt=U(this,Vn,Tn).call(this,s);tt.ready?y.next(tt):Ce()};return ha(this,qt).needsLoading(ha(this,zt),s.id)&&Ce(),ha(this,Rn).add(Ze),()=>{ha(this,Rn).delete(Ze)}})}};dt=new WeakMap,qt=new WeakMap,zt=new WeakMap,dn=new WeakMap,Rn=new WeakMap,yn=new WeakSet,$n=function(h){ha(this,zt)!==h&&(I(this,zt,h),ha(this,dt).changeLanguage(h),ha(this,Rn).forEach(n=>n()))},Vn=new WeakSet,Tn=function(h){return ha(this,qt).needsLoading(ha(this,zt),h.id)?{ready:!1}:{ready:!0,t:ha(this,dt).getFixedT(null,h.id)}},oa=new WeakSet,ca=function(h){if(ha(this,dn).has(h.id))return;ha(this,dn).add(h.id);const n=h.getDefaultMessages();ha(this,dt).addResourceBundle(dr,h.id,n,!0,!1);const s=h.getDefaultResource();s&&ha(this,qt).addTranslationResource(s)};let Sa=Xn;function _a(h){const n=new URL(h);return n.protocol=document.location.protocol,n.hostname=document.location.hostname,n.port=document.location.port,n.toString().replace(/\/$/,"")}function ga(h){const n=f.fromConfigs(h),s=n.getOptionalString("app.baseUrl"),y=n.getOptionalString("backend.baseUrl");let L=h,Ce,Ze;if(s&&y){const tt=new URL(s).origin,$t=new URL(y).origin;if(tt===$t){const nn=_a(y);y!==nn&&(Ce=nn)}}if(s){const tt=_a(s);s!==tt&&(Ze=tt)}return(Ze||Ce)&&(L=L.concat({data:{app:Ze&&{baseUrl:Ze},backend:Ce&&{baseUrl:Ce}},context:"relative-resolver"})),L}var Ca=Object.defineProperty,Ta=(h,n,s)=>n in h?Ca(h,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[n]=s,Ma=(h,n,s)=>(Ta(h,typeof n!="symbol"?n+"":n,s),s),jr=(h,n,s)=>{if(!n.has(h))throw TypeError("Cannot "+s)},Lo=(h,n,s)=>(jr(h,n,"read from private field"),s?s.call(h):n.get(h)),ei=(h,n,s)=>{if(n.has(h))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(h):n.set(h,s)},ti=(h,n,s,y)=>(jr(h,n,"write to private field"),y?y.call(h,s):n.set(h,s),s),Qr;function xo(h,n,s){var y;const L=!!h,Ce=(0,re.default)(h||(()=>Promise.resolve([])));let Ze;if(L&&Ce.loading){const{Progress:nn}=n;Ze=o.createElement(nn,null)}else if(Ce.error){const{BootErrorPage:nn}=n;Ze=o.createElement(nn,{step:"load-config",error:Ce.error})}const{ThemeProvider:tt=Pr}=n;return Ze?{node:o.createElement(pt,{apis:ir.with(Y.n,s)},o.createElement(tt,null,Ze))}:{api:f.fromConfigs((y=Ce.value)!=null&&y.length?ga(Ce.value):[])}}class Bo{constructor(n){this.app=n}getPlugins(){return this.app.getPlugins()}getSystemIcon(n){return this.app.getSystemIcon(n)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class Uo{constructor(n){Ma(this,"apiHolder"),Ma(this,"configApi"),Ma(this,"apis"),Ma(this,"icons"),Ma(this,"plugins"),Ma(this,"featureFlags"),Ma(this,"components"),Ma(this,"themes"),Ma(this,"configLoader"),Ma(this,"defaultApis"),Ma(this,"bindRoutes"),Ma(this,"appLanguageApi"),Ma(this,"translationResources"),Ma(this,"appIdentityProxy",new xr),Ma(this,"apiFactoryRegistry"),ei(this,Qr,!1);var s,y,L,Ce,Ze,tt,$t,nn,Yn;this.apis=(s=n.apis)!=null?s:[],this.icons=n.icons,this.plugins=new Set((y=n.plugins)!=null?y:[]),this.featureFlags=(L=n.featureFlags)!=null?L:[],this.components=n.components,this.themes=n.themes,this.configLoader=(Ce=n.configLoader)!=null?Ce:ao,this.defaultApis=(Ze=n.defaultApis)!=null?Ze:[],this.bindRoutes=n.bindRoutes,this.apiFactoryRegistry=new Ue,this.appLanguageApi=co.createWithStorage({defaultLanguage:(tt=n.__experimentalTranslations)==null?void 0:tt.defaultLanguage,availableLanguages:($t=n.__experimentalTranslations)==null?void 0:$t.availableLanguages}),this.translationResources=(Yn=(nn=n.__experimentalTranslations)==null?void 0:nn.resources)!=null?Yn:[]}getPlugins(){return Array.from(this.plugins)}getSystemIcon(n){return this.icons[n]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(n){const s=this.getProvider();return()=>o.createElement(s,null,n)}getProvider(){if(Lo(this,Qr))throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");ti(this,Qr,!0);const n=new Bo(this);let s=!1;return({children:L})=>{const Ce=(0,o.useRef)(!0),Ze=(0,o.useMemo)(()=>Kt.createWithStorage(this.themes),[]),{routing:tt,featureFlags:$t,routeBindings:nn}=(0,o.useMemo)(()=>{const ta=La();ta&&console.warn(`
DEPRECATION WARNING: React Router Beta is deprecated and support for it will be removed in a future release.
                     Please migrate to use React Router v6 stable.
                     See https://backstage.io/docs/tutorials/react-router-stable-migration
`);const fa=Zn({root:L,discoverers:[xa,Ha],collectors:{routing:ta?z:P,collectedPlugins:wa,featureFlags:Te}});return fa.collectedPlugins.forEach(Ya=>this.plugins.add(Ya)),this.verifyPlugins(this.plugins),this.getApiHolder(),{...fa,routeBindings:lo(this.bindRoutes)}},[L]);s||(s=!0,er(tt.paths,tt.parents),hr(nn,this.plugins));const Yn=xo(this.configLoader,this.components,Ze),Bn="api"in Yn;if(Bn){const{api:ta}=Yn;this.configApi=ta}if("node"in Yn)return Yn.node;if(Bn&&Ce.current){Ce.current=!1;const ta=this.getApiHolder().get(Y.f);if(ta){for(const va of this.featureFlags)ta.registerFlag({...va,pluginId:""});for(const va of this.plugins.values())if("getFeatureFlags"in va)for(const mr of va.getFeatureFlags())ta.registerFlag({name:mr.name,pluginId:va.getId()});else for(const mr of va.output())mr.type==="feature-flag"&&ta.registerFlag({name:mr.name,pluginId:va.getId()});const fa=ta.getRegisteredFlags(),Ya=new Set(fa.map(va=>va.name));for(const va of $t)Ya.has(va)||ta.registerFlag({name:va,pluginId:""})}}const{ThemeProvider:xn=Pr,Progress:da}=this.components;return o.createElement(pt,{apis:this.getApiHolder()},o.createElement(Eo,{appContext:n},o.createElement(xn,null,o.createElement(Ja,{routePaths:tt.paths,routeParents:tt.parents,routeObjects:tt.objects,routeBindings:nn,basePath:Ee(Yn.api)},o.createElement(lr.Provider,{value:{routeObjects:tt.objects,appIdentityProxy:this.appIdentityProxy}},o.createElement(o.Suspense,{fallback:o.createElement(da,null)},L))))))}}getRouter(){return Un}getApiHolder(){if(this.apiHolder){for(const n of this.plugins)for(const s of n.getApis())this.apiFactoryRegistry.get(s.api)||this.apiFactoryRegistry.register("default",s);return Ae.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:Y.n,deps:{},factory:()=>Kt.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:Y.p,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:Y.t,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("static",{api:se.pl,deps:{},factory:()=>this.appLanguageApi}),this.apiFactoryRegistry.register("default",{api:se.Jm,deps:{languageApi:se.pl},factory:({languageApi:n})=>Sa.create({languageApi:n,resources:this.translationResources})}),this.apiFactoryRegistry.register("default",{api:Y.f,deps:{},factory:()=>new an});for(const n of this.defaultApis)this.apiFactoryRegistry.register("default",n);for(const n of this.plugins)for(const s of n.getApis())if(!this.apiFactoryRegistry.register("default",s))throw new Error(`Plugin ${n.getId()} tried to register duplicate or forbidden API factory for ${s.api}`);for(const n of this.apis)if(!this.apiFactoryRegistry.register("app",n))throw new Error(`Duplicate or forbidden API factory for ${n.api} in app`);return Ae.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new Ae(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(n){const s=new Set;for(const y of n){const L=y.getId();if(s.has(L))throw new Error(`Duplicate plugin found '${L}'`);s.add(L)}}}Qr=new WeakMap;function $o(h){return new Uo(h)}let yo=!1;const mo=h=>{const n=(0,ye.nm)(),{NotFoundErrorPage:s}=n.getComponents(),y=(0,o.useMemo)(()=>La(),[]),Ce=[...(0,ye.OJ)(h.children,Ze=>Ze.getElements().flatMap(tt=>{var $t;let nn=tt.props.path;if(nn==="")return[];nn=($t=nn==null?void 0:nn.replace(/\/\*$/,""))!=null?$t:"/";let Yn=y?tt:tt.props.element;return!y&&!Yn&&(Yn=tt,yo||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),yo=!0)),[{path:nn,element:Yn,children:tt.props.children?[{path:nn==="/"?"/":"*",element:tt.props.children}]:void 0}]}).sort((tt,$t)=>$t.path.localeCompare(tt.path)).map(tt=>({...tt,path:tt.path==="/"?"/":`${tt.path}/*`}))),{path:"*",element:o.createElement(s,null)}];return(0,E.Ye)(Ce)};(0,ye.h3)(mo,"core.type","FlatRoutes")},23180:(wn,wt,e)=>{"use strict";e.d(wt,{Db:()=>Cn,eu:()=>ia,BI:()=>yi,cy:()=>ac,fX:()=>ss,z7:()=>qa,UC:()=>bo,dv:()=>vi,lz:()=>La,ly:()=>or,wB:()=>z,DT:()=>et,Vf:()=>ls,pp:()=>Sn,tH:()=>Kn,M:()=>Fs,bJ:()=>ir,Hk:()=>cs,Y9:()=>To,Pu:()=>zr,ST:()=>Sl,of:()=>ui,nO:()=>ga,s3:()=>Ml,f1:()=>Wi,N_:()=>ma,z9:()=>Za,rW:()=>qt,h2:()=>Lr,z3:()=>yn,Mm:()=>Vn,YW:()=>Do,dT:()=>xl,ke:()=>Tn,_1:()=>Jr,kE:()=>di,l6:()=>mo,Bx:()=>nl,Mj:()=>El,Cn:()=>Ko,uk:()=>$i,GE:()=>el,tW:()=>yl,Ds:()=>fl,O6:()=>Bi,hl:()=>ol,c_:()=>va,Xs:()=>ta,So:()=>xn,Ek:()=>fa,W$:()=>Ya,EV:()=>da,tA:()=>as,md:()=>As,Yl:()=>gs,xO:()=>tc,XI:()=>Ei,ny:()=>us,Bp:()=>Gr,hC:()=>Tr,HZ:()=>zo,FS:()=>Po,Ut:()=>Oo});var o=e(48821),l=e(11638),A=e(29365),B=e(38097),u=e(72501),r=e(32881),Y=e(74219),ye=e(65398),ce=e.n(ye),a=e(14041),fe=e(18846),le=e(64947),ie=e(76891),oe=e(93453),ze=e(46805),Le=e(61477),Pe=e(19087),C=e(58837),ee=e(54917),R=e(268),p=e(7031),w=e(99703),f=e(60882),E=e(50868),F=e(49203),re=e(53373),se=e.n(re),_e=e(45250),Q=e(18690),g=e(73657),H=e(21613),G=e(77125),Oe=e(20279),ue=e(40697),it=e(25577),ot=e(71677),pt=e(99594),nt=e(51100),Ge=e(5893),De=e(25534),Ae=e(1517),Ne=e(67566),ne=e(41809),N=e(67991),X=e.n(N),Ue=e(12784),te=e.n(Ue),we=e(22249),ht=e(1121),Wt=e(24260),bt=e(20644),It=e.n(bt),O=e(45145),S=e(42899);const K=e.p+"static/missingAnnotation.67f79e98..svg",ae=e.p+"static/noInformation.4b426325..svg",We=e.p+"static/createComponent.975d1e1e..svg",qe=e.p+"static/noBuild.1715fa71..svg";var gt=e(58007),_t=e(8109),st=e(5951),Zt=e(8973),at=e(29655),mt=e(91567),Qe=e(9181),Lt=e(6924),St=e(60767),en=e(28138),xt=e(37197),pe=e(43144),Fe=e(86613),Mt=e(68887),Xt=e(63798),Bt=e(91467),jt=e(3399),Ln=e(62220),pn=e.n(Ln),cn=e(85058),En=e(88951),lt=e(40703),Ot=e(59469),Vt=e(48653),Dt=e(45685),ct=e(52235),je=e(90147),Yt=e(69076),Gt=e(67720),sn=e(95061),bn=e(41857),In=e(48543),Pn=e(26343),qn=e(81215),Gn=e(10437),Nn=e(95479),On=e.n(Nn),Jn=e(61009),aa=e(13677),ft=e(54801),m=e(9719),D=e(46423),j=e(28233),de=e(55197),x=e(45810),$=e.n(x),q=e(27799),xe=e(93285),ke=e(38605),vt=e(31653),kt=e(25301),V=e(83313),ve=e(89019),$e=e(62461),Ke=e(64704),Je=e(6774),Ut=e(75625),Rt=e(65859),Nt=e(5416),_n=e(33494),An=e(80113),mn=e(26229),ln=e(46802),M=e(78467),J=e(16975);const be=e.p+"static/mic-drop.fe3ef4d0..svg";var Re=e(45634),yt=e(1125),Tt=e(73845),Kt=e(27326),Jt=e(97388),hn=e(13085),Dn=e(79065),he=e(55704),Ve=e(94509),Be=e(16249),At=e(62248),Pt=e(46195),tn=e(80824),Ct=e(51253),Ft=e(3514),gn=e.n(Ft);function Cn(t){const[i,d]=(0,a.useState)([]),b=(0,o.u)(o.l),{anchorOrigin:T={vertical:"top",horizontal:"center"},transientTimeoutMs:W}=t,Z=W!=null?W:5e3;(0,a.useEffect)(()=>{const Me=b.alert$().subscribe(ut=>d(Et=>Et.concat(ut)));return()=>{Me.unsubscribe()}},[b]);const[ge]=i;if((0,a.useEffect)(()=>{if(ge&&ge.display==="transient"){const Me=setTimeout(()=>{d(ut=>{const Et=ut.filter(on=>on!==ge);return Et.length===ut.length?ut:Et})},Z);return()=>clearTimeout(Me)}},[ge,Z]),i.length===0)return null;const Se=()=>{d(Me=>Me.filter(ut=>ut!==ge))};return a.createElement(B.A,{open:!0,anchorOrigin:T},a.createElement(Y.A,{action:a.createElement(A.A,{color:"inherit",size:"small",onClick:Se,"data-testid":"error-button-close"},a.createElement(r.A,null)),severity:ge.severity},a.createElement(u.A,{component:"span"},String(ge.message),i.length>1&&a.createElement("em",null,` (${i.length-1} older ${ce()("message",i.length-1)})`))))}const an="@backstage/autologout:lastSeenOnline",fn=({enableEffect:t,autologoutIsEnabled:i,idleTimeoutSeconds:d,lastSeenOnlineStore:b,identityApi:T})=>{useEffect(()=>{if(i&&t){const W=b.get();if(W){const ge=Math.ceil(new Date().getTime()/1e3),Se=Math.ceil(W.getTime()/1e3);ge-Se>d&&T.signOut()}b.save(new Date)}else b.delete()},[i,t,T,d,b])},Wn=t=>{const{idleTimer:i,setOpen:d,open:b,promptTimeoutMillis:T,remainingTime:W,setRemainingTime:Z}=t;useEffect(()=>{const ut=setInterval(()=>{Z(Math.ceil(i.getRemainingTime()))},500);return()=>{clearInterval(ut)}},[i,Z]);const ge=()=>{d(!1),i.activate()},Me=Math.max(W-T/1e3,0)>1?"seconds":"second";return React.createElement(Dialog,{open:b,"data-testid":"inactivity-prompt-dialog"},React.createElement(DialogTitle,null,"Logging out due to inactivity"),React.createElement(DialogContent,null,React.createElement(DialogContentText,null,"You are about to be disconnected in"," ",React.createElement("b",null,Math.ceil(W/1e3)," ",Me),". Are you still there?")),React.createElement(DialogActions,null,React.createElement(Button$1,{onClick:ge,color:"secondary",variant:"contained",size:"small"},"Yes! Don't log me out")))};class jn{constructor(i){this.key=i}save(i){localStorage.setItem(this.key,i.toJSON())}delete(){localStorage.removeItem(this.key)}get(){const i=localStorage.getItem(this.key);return i!==null?new Date(Date.parse(i)):null}}const ea=({idleTimeoutMinutes:t,events:i,useWorkerTimers:d,logoutIfDisconnected:b,promptBeforeIdleSeconds:T,promptOpen:W,setPromptOpen:Z,remainingTimeCountdown:ge,setRemainingTimeCountdown:Se,identityApi:Me,lastSeenOnlineStore:ut})=>{const Et=T*1e3,on=Et>0,Qt=async()=>{Z(!0),Se(Et)},vn=()=>{Z(!1),Se(0),Me.signOut()},na=()=>{Z(!1),Se(0)},zn=(Fa,tr)=>{ut.save(new Date)},sa=useIdleTimer({timeout:t*60*1e3,events:i,crossTab:!0,name:"autologout-timer",timers:d?workerTimers:void 0,onIdle:vn,onActive:on?na:void 0,onAction:b?zn:void 0,onPrompt:on?Qt:void 0,promptBeforeIdle:on?Et:void 0,syncTimers:1e3});return React.createElement(React.Fragment,null,on&&React.createElement(Wn,{idleTimer:sa,open:W,setOpen:Z,remainingTime:ge,setRemainingTime:Se,promptTimeoutMillis:Et}))},kn={enabled:!0,idleTimeoutMinutes:.5,promptBeforeIdleSeconds:10,useWorkerTimers:!0,logoutIfDisconnected:!0},Fn=null,ra=(t,i)=>{var d,b,T,W,Z,ge,Se,Me,ut,Et;return{enabled:(b=(d=t.getOptionalBoolean("auth.autologout.enabled"))!=null?d:i.enabled)!=null?b:kn.enabled,idleTimeoutMinutes:(W=(T=t.getOptionalNumber("auth.autologout.idleTimeoutMinutes"))!=null?T:i.idleTimeoutMinutes)!=null?W:kn.idleTimeoutMinutes,promptBeforeIdleSeconds:(ge=(Z=t.getOptionalNumber("auth.autologout.promptBeforeIdleSeconds"))!=null?Z:i.promptBeforeIdleSeconds)!=null?ge:kn.promptBeforeIdleSeconds,useWorkerTimers:(Me=(Se=t.getOptionalBoolean("auth.autologout.useWorkerTimers"))!=null?Se:i.useWorkerTimers)!=null?Me:kn.useWorkerTimers,logoutIfDisconnected:(Et=(ut=t.getOptionalBoolean("auth.autologout.logoutIfDisconnected"))!=null?ut:i.logoutIfDisconnected)!=null?Et:kn.logoutIfDisconnected}},la=t=>{const i=useApi(identityApiRef),d=useApi(configApiRef),[b,T]=useState(!1);useEffect(()=>{async function na(zn){(await zn.getCredentials()).token?T(!0):T(!1)}na(i)},[i]);const{enabled:W,idleTimeoutMinutes:Z,promptBeforeIdleSeconds:ge,logoutIfDisconnected:Se,useWorkerTimers:Me}=useMemo(()=>ra(d,t),[d,t]);useEffect(()=>{if(Z<.5)throw new Error("\u274C idleTimeoutMinutes property should be >= 0.5 minutes (30 seconds).");if(ge<0)throw new Error("\u274C promptBeforeIdleSeconds property should be >= 0 seconds. Set to 0 to disable the prompt.");if(Z*60<=ge)throw new Error("\u274C promptBeforeIdleSeconds should be smaller than idleTimeoutMinutes")},[Z,ge]);const ut=useMemo(()=>new jn(an),[]),[Et,on]=useState(!1),[Qt,vn]=useState(0);return fn({enableEffect:Se,autologoutIsEnabled:W&&b,idleTimeoutSeconds:Z*60,lastSeenOnlineStore:ut,identityApi:i}),!W||!b?null:React.createElement(ea,{idleTimeoutMinutes:Z,promptBeforeIdleSeconds:ge,useWorkerTimers:Me,events:Fn,logoutIfDisconnected:Se,promptOpen:Et,setPromptOpen:on,remainingTimeCountdown:Qt,setRemainingTimeCountdown:vn,identityApi:i,lastSeenOnlineStore:ut})};function Aa(t){let i=0;for(let b=0;b<t.length;b++)i=t.charCodeAt(b)+((i<<5)-i);let d="#";for(let b=0;b<3;b++){const T=i>>b*8&255;d+=`00${T.toString(16)}`.slice(-2)}return d}function ya(t){var i;const d=t.trim().split(" "),b=(i=d[0])!=null?i:"",T=d.length>1?d[d.length-1]:"";return b&&T?`${b.charAt(0)}${T.charAt(0)}`:b.charAt(0)}const Oa=(0,C.A)(t=>({avatar:{width:"4rem",height:"4rem",color:t.palette.common.white},avatarText:{fontWeight:t.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function ia(t){const{displayName:i,picture:d,customStyles:b}=t,T=Oa();let W={...b};const Z={fontFamily:W.fontFamily,fontSize:W.fontSize,fontWeight:W.fontWeight};return d||(W={backgroundColor:Aa(i||""),...b}),a.createElement(Pe.A,{alt:i,src:d,className:T.avatar,style:W},i&&a.createElement(u.A,{variant:"h6",component:"span",className:T.avatarText,style:Z},ya(i)))}function Da(){const[t]=(0,Q.AV)(a.createElement(Q.qh,{index:!0,element:a.createElement("div",null)}));return!t.index}const Ua=(0,C.A)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",userSelect:"none",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),$a=t=>/^([a-z+.-]+):/.test(t),Qa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,Na=window.open;if(Na&&!Na.__backstage){const t=function(...d){const b=String(d[0]);if(Qa.test(b))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return Na.apply(this,d)};t.__backstage=!0,window.open=t}const za=()=>{try{return(0,o.u)(o.p).getOptionalString("app.baseUrl")}catch{return}},pr=()=>{var t;const i="http://sample.dev",d=(t=za())!=null?t:"/",{pathname:b}=new URL(d,i);return(0,_e.trimEnd)(b,"/")},ja=t=>{let i=String(t);const d=pr(),b=$a(i),T=i.startsWith(d);return!b&&!T&&(i=d.concat(i)),i},ar=t=>{var i;return t instanceof Array?t.map(ar).join(" ").trim():typeof t=="object"&&t?ar((i=t==null?void 0:t.props)==null?void 0:i.children):["string","number"].includes(typeof t)?String(t):""},ma=a.forwardRef(({onClick:t,noTrack:i,...d},b)=>{const T=Ua(),W=(0,l.st)(),Z=Da()?ja(d.to):d.to,ge=ar(d.children)||Z,Se=$a(Z),Me=Se&&!!/^https?:/.exec(Z);if(Qa.test(Z))throw new Error("Link component rejected javascript: URL as a security precaution");const ut=Et=>{t==null||t(Et),i||W.captureEvent("click",ge,{attributes:{to:Z}})};return Se?a.createElement(F.A,{...Me?{target:"_blank",rel:"noopener"}:{},...d,...d["aria-label"]?{"aria-label":`${d["aria-label"]}, Opens in a new window`}:{},ref:b,href:Z,onClick:ut,className:se()(T.externalLink,d.className)},d.children,a.createElement(u.A,{component:"span",className:T.visuallyHidden},", Opens in a new window")):a.createElement(F.A,{...d,ref:b,component:g.N_,to:Z,onClick:ut})}),rr=a.forwardRef((t,i)=>a.createElement(ma,{ref:i,...t,color:"initial"})),Za=a.forwardRef((t,i)=>a.createElement(le.A,{ref:i,component:rr,...t})),lr=null;function La(t){const{text:i,tooltipDelay:d=1e3,tooltipText:b="Text copied to clipboard","aria-label":T="Copy text"}=t,W=(0,o.u)(o.r),[Z,ge]=(0,a.useState)(!1),[{error:Se},Me]=(0,nt.A)();(0,a.useEffect)(()=>{Se&&W.post(Se)},[Se,W]);const ut=Et=>{Et.stopPropagation(),ge(!0),Me(i)};return a.createElement(a.Fragment,null,a.createElement(ot.Ay,{id:"copy-test-tooltip",title:b,placement:"top",leaveDelay:d,onClose:()=>ge(!1),open:Z},a.createElement(A.A,{onClick:ut,"aria-label":T},a.createElement(pt.A,null))))}function qa(t){const{text:i,language:d,showLineNumbers:b=!1,highlightedNumbers:T,customStyle:W,showCopyCodeButton:Z=!1}=t,ge=(0,ee.A)(),Se=ge.palette.type==="dark"?ue.A:it.A,Me=ge.palette.type==="dark"?"#256bf3":"#e6ffed";return a.createElement(G.A,{position:"relative"},a.createElement(Oe.A,{customStyle:W,language:d,style:Se,showLineNumbers:b,wrapLines:!0,lineNumberStyle:{color:ge.palette.textVerySubtle},lineProps:ut=>T!=null&&T.includes(ut)?{style:{backgroundColor:Me}}:{}},i),Z&&a.createElement(G.A,{position:"absolute",top:0,right:0},a.createElement(La,{text:i})))}function or(t){const{title:i,to:d}=t,b=(0,Ge.A)(T=>T.breakpoints.down("xs"));return d?b?a.createElement(A.A,{component:g.N_,color:"primary",title:i,size:"small",to:d},a.createElement(De.A,null)):a.createElement(le.A,{component:g.N_,variant:"contained",color:"primary",to:d},i):null}var et;(t=>{(i=>{i.TOP_BOTTOM="TB",i.BOTTOM_TOP="BT",i.LEFT_RIGHT="LR",i.RIGHT_LEFT="RL"})(t.Direction||(t.Direction={})),(i=>{i.UP_LEFT="UL",i.UP_RIGHT="UR",i.DOWN_LEFT="DL",i.DOWN_RIGHT="DR"})(t.Alignment||(t.Alignment={})),(i=>{i.NETWORK_SIMPLEX="network-simplex",i.TIGHT_TREE="tight-tree",i.LONGEST_PATH="longest-path"})(t.Ranker||(t.Ranker={})),(i=>{i.LEFT="l",i.RIGHT="r",i.CENTER="c"})(t.LabelPosition||(t.LabelPosition={}))})(et||(et={}));const Ee=(0,C.A)(t=>({node:{fill:t.palette.primary.light,stroke:t.palette.primary.light},text:{fill:t.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function rt({node:{id:t}}){const i=Ee(),[d,b]=a.useState(0),[T,W]=a.useState(0),Z=a.useRef(null);a.useLayoutEffect(()=>{if(Z.current){let{height:ut,width:Et}=Z.current.getBBox();ut=Math.round(ut),Et=Math.round(Et),(ut!==T||Et!==d)&&(b(Et),W(ut))}},[d,T]);const ge=10,Se=d+ge*2,Me=T+ge*2;return a.createElement("g",null,a.createElement("rect",{className:i.node,width:Se,height:Me,rx:10}),a.createElement("text",{ref:Z,className:i.text,y:Me/2,x:Se/2,textAnchor:"middle",alignmentBaseline:"middle"},t))}const un="arrow-marker",Un="node",Zn="edge",pa="label",xa=(0,we.A)(t=>({node:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),Ha=t=>a.createElement(rt,{...t});function wa({render:t=Ha,setNode:i,node:d}){const{width:b,height:T,x:W=0,y:Z=0}=d,ge=d,Se=xa(),Me=a.useRef(null);return a.useLayoutEffect(()=>{if(Me.current){let{height:ut,width:Et}=Me.current.getBBox();ut=Math.round(ut),Et=Math.round(Et),(ut!==T||Et!==b)&&i(d.id,{...d,height:ut,width:Et})}},[d,b,T,i]),a.createElement("g",{ref:Me,"data-testid":Un,className:Se.node,transform:`translate(${W-b/2},${Z-T/2})`},t({node:ge}))}const Va=(0,we.A)(t=>({text:{fill:t.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function Ia({edge:{label:t}}){const i=Va();return a.createElement("text",{className:i.text,textAnchor:"middle"},t)}const Ga=(0,we.A)(t=>({path:{strokeWidth:1.3,stroke:t.palette.textSubtle,fill:"none",transition:`${t.transitions.duration.shortest}ms`},label:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),v=t=>a.createElement(Ia,{...t});function c({render:t=v,setEdge:i,id:d,edge:b,curve:T,showArrowHeads:W}){const{x:Z=0,y:ge=0,width:Se,height:Me,points:ut}=b,Et=b,on=Ga(),Qt=a.useRef(null);a.useLayoutEffect(()=>{if(Qt.current){let{height:zn,width:sa}=Qt.current.getBBox();zn=Math.round(zn),sa=Math.round(sa),(zn!==Me||sa!==Se)&&i(d,{...b,height:zn,width:sa})}},[b,Me,Se,i,d]);let vn="";const na=a.useMemo(()=>ht.A().x(zn=>zn.x).y(zn=>zn.y).curve(Wt[T]),[T]);if(ut){const zn=ut.filter(sa=>It()(sa.x)&&It()(sa.y));vn=na(zn)||""}return a.createElement(a.Fragment,null,vn&&a.createElement("path",{"data-testid":Zn,className:on.path,markerEnd:W?`url(#${un})`:void 0,d:vn}),Et.label?a.createElement("g",{ref:Qt,"data-testid":pa,className:on.label,transform:`translate(${Z},${ge})`},t({edge:Et})):null)}const P="workspace";function z(t){var i,d;const{edges:b,nodes:T,renderNode:W,direction:Z=et.Direction.TOP_BOTTOM,align:ge,nodeMargin:Se=50,edgeMargin:Me=10,rankMargin:ut=50,paddingX:Et=0,paddingY:on=0,acyclicer:Qt,ranker:vn=et.Ranker.NETWORK_SIMPLEX,labelPosition:na=et.LabelPosition.RIGHT,labelOffset:zn=10,edgeRanks:sa=1,edgeWeight:Fa=1,renderLabel:tr,defs:Qn,zoom:Ba="enabled",curve:Ka="curveMonotoneX",showArrowHeads:nr=!1,fit:Or="grow",...qr}=t,Dr=(0,ne.A)(),[$r,Qo]=a.useState(100),[Hr,Io]=a.useState(100),Pa=a.useRef(new(X()).graphlib.Graph),[sr,po]=a.useState(((i=Pa.current.graph())==null?void 0:i.width)||0),[wr,ho]=a.useState(((d=Pa.current.graph())==null?void 0:d.height)||0),[Wr,kr]=a.useState([]),[Zo,rc]=a.useState([]),go=Math.max(sr,$r),eo=Math.max(wr,Hr),oc=Math.min(wr,Hr),ic=Or==="grow"?eo:oc,sc=a.useMemo(()=>te()(ka=>{if(!ka)return;const Xa=Ne.A(ka),Wa=Ne.A(ka.getElementById(P));function _r(){Xa.call(Ae.s_().scaleExtent([1,1/0]).on("zoom",Ir=>{Ir.transform.x=Math.min(0,Math.max(Ir.transform.x,go-go*Ir.transform.k)),Ir.transform.y=Math.min(0,Math.max(Ir.transform.y,eo-eo*Ir.transform.k)),Wa.attr("transform",Ir.transform)}))}Ba==="enabled"?_r():Ba==="enable-on-click"&&Xa.on("click",()=>_r());const{width:Ar,height:Mo}=ka.getBoundingClientRect();$r!==Ar&&Qo(Ar),Hr!==Mo&&Io(Mo)},100),[Hr,$r,go,eo,Ba]),zi=a.useCallback(()=>{const ka=Pa.current.nodes(),Xa=Pa.current.edges();ka.forEach(Wa=>{T.some(Ar=>Ar.id===Wa)||Pa.current.removeNode(Wa)}),Xa.forEach(Wa=>{b.some(Ar=>Ar.from===Wa.v&&Ar.to===Wa.w)||Pa.current.removeEdge(Wa.v,Wa.w)}),T.forEach(Wa=>{const _r=Pa.current.nodes().find(Ar=>Wa.id===Ar);if(_r&&Pa.current.node(_r)){const{width:Ar,height:Mo,x:Ir,y:uc}=Pa.current.node(_r);Pa.current.setNode(_r,{...Wa,width:Ar,height:Mo,x:Ir,y:uc})}else Pa.current.setNode(Wa.id,{...Wa,width:0,height:0})}),b.forEach(Wa=>{Pa.current.setEdge(Wa.from,Wa.to,{...Wa,label:Wa.label,width:0,height:0,labelpos:na,labeloffset:zn,weight:Fa,minlen:sa})})},[b,T,na,zn,Fa,sa]),fo=a.useMemo(()=>te()(()=>{X().layout(Pa.current);const{height:ka,width:Xa}=Pa.current.graph(),Wa=Math.max(0,ka||0),_r=Math.max(0,Xa||0);po(_r),ho(Wa),kr(Pa.current.nodes()),rc(Pa.current.edges())},250,{leading:!0}),[]);a.useEffect(()=>(Pa.current.setGraph({rankdir:Z,align:ge,nodesep:Se,edgesep:Me,ranksep:ut,marginx:Et,marginy:on,acyclicer:Qt,ranker:vn}),zi(),fo(),fo.cancel),[Qt,ge,Z,Me,Et,on,Se,ut,vn,zi,fo]);function lc(ka,Xa){return Pa.current.setNode(ka,Xa),fo(),Pa.current}function cc(ka,Xa){return Pa.current.setEdge(ka,Xa),fo(),Pa.current}return a.createElement("svg",{ref:sc,...qr,width:"100%",height:ic,viewBox:`0 0 ${go} ${eo}`},a.createElement("defs",null,a.createElement("marker",{id:un,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},a.createElement("path",{fill:Dr.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),Qn),a.createElement("g",{id:P},a.createElement("svg",{width:sr,height:wr,y:eo/2-wr/2,x:go/2-sr/2,viewBox:`0 0 ${sr} ${wr}`},Zo.map(ka=>{const Xa=Pa.current.edge(ka);return Xa?a.createElement(c,{key:`${ka.v}-${ka.w}`,id:ka,setEdge:cc,render:tr,edge:Xa,curve:Ka,showArrowHeads:nr}):null}),Wr.map(ka=>{const Xa=Pa.current.node(ka);return Xa?a.createElement(wa,{key:ka,setNode:lc,render:W,node:Xa}):null}))))}const Te=(0,C.A)(t=>{var i,d;return{root:{padding:t.spacing(0),marginBottom:t.spacing(0),marginTop:t.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:t.spacing(6),marginTop:-t.spacing(3),zIndex:"unset"},icon:{fontSize:t.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap",color:t.palette.banner.text},message:{display:"flex",alignItems:"center","& a":{color:t.palette.banner.link}},button:{color:(i=t.palette.banner.closeButtonColor)!=null?i:"inherit"},info:{backgroundColor:t.palette.banner.info},error:{backgroundColor:t.palette.banner.error},warning:{backgroundColor:(d=t.palette.banner.warning)!=null?d:t.palette.banner.error}}},{name:"BackstageDismissableBanner"}),He=t=>{var i;const{variant:d,message:b,id:T,fixed:W=!1}=t,Z=Te(),Se=useApi(storageApiRef).forBucket("notifications"),Me=(i=Se.snapshot("dismissedBanners").value)!=null?i:[],[ut,Et]=useState(new Set(Me)),on=useObservable(Se.observe$("dismissedBanners"));useEffect(()=>{var vn;if(on!=null&&on.value){const na=(vn=on==null?void 0:on.value)!=null?vn:[];Et(new Set(na))}},[on==null?void 0:on.value]);const Qt=()=>{Se.set("dismissedBanners",[...ut,T])};return React.createElement(Snackbar,{anchorOrigin:W?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!ut.has(T),classes:{root:classNames(Z.root,!W&&Z.topPosition)}},React.createElement(SnackbarContent,{classes:{root:classNames(Z.content,Z[d]),message:Z.message},message:b,action:[React.createElement(IconButton,{key:"dismiss",title:"Permanently dismiss this message",className:Z.button,onClick:Qt},React.createElement(CloseIcon,{className:Z.icon}))]}))},Ht=(0,C.A)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),rn=({missing:t})=>{const i=Ht();switch(t){case"field":return a.createElement("img",{src:K,className:i.generalImg,alt:"annotation is missing"});case"info":return a.createElement("img",{src:ae,alt:"no Information",className:i.generalImg});case"content":return a.createElement("img",{src:We,alt:"create Component",className:i.generalImg});case"data":return a.createElement("img",{src:qe,alt:"no Build",className:i.generalImg});default:return null}},Mn=(0,C.A)(t=>({root:{backgroundColor:t.palette.background.default,padding:t.spacing(2,0,0,0)},action:{marginTop:t.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function Sn(t){const{title:i,description:d,missing:b,action:T}=t,W=Mn();return a.createElement(S.A,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:W.root,spacing:2},a.createElement(S.A,{item:!0,xs:12,md:6},a.createElement(S.A,{container:!0,direction:"column"},a.createElement(S.A,{item:!0,xs:!0},a.createElement(u.A,{variant:"h5"},i)),a.createElement(S.A,{item:!0,xs:!0},a.createElement(u.A,{variant:"body1"},d)),a.createElement(S.A,{item:!0,xs:!0,className:W.action},T))),a.createElement(S.A,{item:!0,xs:12,md:6,className:W.imageContainer},typeof b=="string"?a.createElement(rn,{missing:b}):b.customImage))}const Ea=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,ba=/^.*ANNOTATION.*$/m,Ra=Ea.match(ba)[0],ua=Ea.split(`
`).findIndex(t=>ba.test(t)),Ja=(0,C.A)(t=>({code:{borderRadius:6,margin:t.spacing(2,0),background:t.palette.type==="dark"?"#444":t.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function er(t){return Array.from(Array(t+1).keys(),i=>i+ua)}function hr(t){const i=t.map(d=>Ra.replace("ANNOTATION",d)).join(`
`);return Ea.replace(Ra,i)}function cr(t){const i=t.length<=1;return React.createElement(React.Fragment,null,"The ",i?"annotation":"annotations"," ",t.map(d=>React.createElement("code",null,d)).reduce((d,b)=>React.createElement(React.Fragment,null,d,", ",b))," ",i?"is":"are"," missing. You need to add the"," ",i?"annotation":"annotations"," to your component if you want to enable this tool.")}function Eo(t){const{annotation:i,readMoreUrl:d}=t,b=Array.isArray(i)?i:[i],T=d||"https://backstage.io/docs/features/software-catalog/well-known-annotations",W=Ja();return React.createElement(Sn,{missing:"field",title:"Missing Annotation",description:cr(b),action:React.createElement(React.Fragment,null,React.createElement(Typography,{variant:"body1"},"Add the annotation to your component YAML as shown in the highlighted example below:"),React.createElement(Box,{className:W.code},React.createElement(qa,{text:hr(b),language:"yaml",showLineNumbers:!0,highlightedNumbers:er(b.length),customStyle:{background:"inherit",fontSize:"115%"}})),React.createElement(Button$1,{color:"primary",component:ma,to:T},"Read more"))})}const no=(0,C.A)(t=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${t.palette.border}`},"& th, & td":{border:`1px solid ${t.palette.border}`,padding:t.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:t.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:t.palette.background.paper},"& tr":{backgroundColor:t.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:t.palette.background.default},"& a":{color:t.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),Nr=(t,i)=>i?typeof i=="string"?t+i:a.Children.toArray(i.props.children).reduce(Nr,t):t,ur=({level:t,children:i})=>{const T=a.Children.toArray(i).reduce(Nr,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return a.createElement(`h${t}`,{id:T},i)},Vr={code:({inline:t,className:i,children:d,...b})=>{const T=String(d).replace(/\n+$/,""),W=/language-(\w+)/.exec(i||"");return!t&&W?a.createElement(qa,{language:W[1],text:T}):a.createElement("code",{className:i,...b},d)},h1:ur,h2:ur,h3:ur,h4:ur,h5:ur,h6:ur};function Lr(t){const{content:i,dialect:d="gfm",linkTarget:b,transformLinkUri:T,transformImageUri:W,className:Z}=t,ge=no();return a.createElement(St.$,{remarkPlugins:d==="gfm"?[en.A]:[],className:`${ge.markdown} ${Z}`,children:i,components:Vr,linkTarget:b,transformLinkUri:T,transformImageUri:W})}const xr=(t,i)=>(i.palette.type==="light"?R.e$:R.a)(i.palette[t].light,.6),Fr=(t,i)=>(i.palette.type==="light"?R.a:R.e$)(i.palette[t].light,.9),Cr=(0,C.A)(t=>({root:{marginRight:t.spacing(1),fill:({severity:i})=>xr(i,t)}})),Pr=({severity:t})=>{const i=Cr({severity:t});return a.createElement(Qe.A,{classes:i})},ao=({severity:t})=>{const i=Cr({severity:t});return a.createElement(Lt.A,{classes:i})},ro=(0,C.A)(t=>({panel:{backgroundColor:({severity:i})=>Fr(i,t),color:({severity:i})=>xr(i,t),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:i})=>xr(i,t),fontWeight:t.typography.fontWeightBold},markdownContent:{"& p":{display:"inline"}},message:{width:"100%",display:"block",color:({severity:i})=>xr(i,t),backgroundColor:({severity:i})=>Fr(i,t)},details:{width:"100%",display:"block",color:t.palette.textContrast,backgroundColor:t.palette.background.default,border:`1px solid ${t.palette.border}`,padding:t.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),oo=t=>t.charAt(0).toLocaleUpperCase("en-US")+t.slice(1);function Gr(t){const{severity:i="warning",title:d,titleFormat:b,message:T,children:W,defaultExpanded:Z}=t,ge=ro({severity:i}),Se=oo(i)+(d?`: ${d}`:"");return a.createElement(Zt.A,{defaultExpanded:Z!=null?Z:!1,className:ge.panel,role:"alert"},a.createElement(at.A,{expandIcon:a.createElement(ao,{severity:i}),className:ge.summary},a.createElement(Pr,{severity:i}),a.createElement(u.A,{className:ge.summaryText,variant:"subtitle1"},b==="markdown"?a.createElement(Lr,{content:Se,className:ge.markdownContent}):Se)),(T||W)&&a.createElement(mt.A,null,a.createElement(S.A,{container:!0},T&&a.createElement(S.A,{item:!0,xs:12},a.createElement(u.A,{className:ge.message,variant:"body1"},T)),W&&a.createElement(S.A,{item:!0,xs:12,className:ge.details},W))))}const io=(0,C.A)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageErrorPanel"}),so=({error:t,message:i,stack:d,children:b})=>{const T=io();return a.createElement(gt.A,{dense:!0},a.createElement(_t.A,{alignItems:"flex-start"},a.createElement(st.A,{classes:{secondary:T.text},primary:"Error",secondary:t}),a.createElement(La,{text:t})),a.createElement(_t.A,{alignItems:"flex-start"},a.createElement(st.A,{classes:{secondary:T.text},primary:"Message",secondary:i}),a.createElement(La,{text:i})),d&&a.createElement(_t.A,{alignItems:"flex-start"},a.createElement(st.A,{classes:{secondary:T.text},primary:"Stack Trace",secondary:d}),a.createElement(La,{text:d})),b)};function ir(t){const{title:i,error:d,defaultExpanded:b,titleFormat:T,children:W}=t;return a.createElement(Gr,{severity:"error",title:i!=null?i:d.message,defaultExpanded:b,titleFormat:T},a.createElement(so,{error:d.name,message:d.message,stack:d.stack,children:W}))}const lo=(0,C.A)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function Jr(t){var i;const{title:d,error:b,defaultExpanded:T}=t,W=lo();if(b.name!=="ResponseError")return a.createElement(ir,{title:d!=null?d:b.message,defaultExpanded:T,error:b});const{body:Z,cause:ge}=b,{request:Se,response:Me}=Z,ut=`${Me.statusCode}: ${ge.name}`,Et=Se&&`${Se.method} ${Se.url}`,on=ge.message.replace(/\\n/g,`
`),Qt=(i=ge.stack)==null?void 0:i.replace(/\\n/g,`
`),vn=JSON.stringify(Z,void 0,2);return a.createElement(ir,{title:d!=null?d:b.message,defaultExpanded:T,error:{name:ut,message:on,stack:Qt}},Et&&a.createElement(_t.A,{alignItems:"flex-start"},a.createElement(st.A,{classes:{secondary:W.text},primary:"Request",secondary:Se?`${Et}`:void 0}),a.createElement(La,{text:Et})),a.createElement(a.Fragment,null,a.createElement(xt.A,{component:"li",className:W.divider}),a.createElement(_t.A,{alignItems:"flex-start"},a.createElement(st.A,{classes:{secondary:W.text},primary:"Full Error as JSON"})),a.createElement(qa,{language:"json",text:vn,showCopyCodeButton:!0})))}function gr(t){const i=document.createElement("div");return i.setAttribute("id",t),i}function Kr(t){document.body.insertBefore(t,document.body.lastElementChild.nextElementSibling)}function Br(t){const i=useRef(null);useEffect(function(){const T=document.querySelector(`#${t}`),W=T||gr(t);return T||Kr(W),W.appendChild(i.current),function(){i.current.remove(),W.childNodes.length===-1&&W.remove()}},[t]);function d(){return i.current||(i.current=document.createElement("div")),i.current}return d()}const fr="core.calloutSeen";function vr(){const[t,i]=useState(()=>{const b=localStorage.getItem(fr);return b?JSON.parse(b):{}}),d=useCallback((b,T)=>{const W=localStorage.getItem(fr),ge={...W?JSON.parse(W):{},[b]:T};i(ge),localStorage.setItem(fr,JSON.stringify(ge))},[]);return{states:t,setState:d}}function Rr(t){const{states:i,setState:d}=vr(),b=useCallback(()=>{d(t,!0)},[d,t]);return{seen:i[t]===!0,markSeen:b}}function Sr(t){const{seen:i,markSeen:d}=Rr(t);return{show:i===!1,hide:d}}const dr=(0,C.A)(t=>({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:`2px solid ${t.palette.common.white}`,zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:t.palette.common.white,zIndex:2003}}),{name:"BackstageFeatureCalloutCircular"});function vo(t){const{featureId:i,title:d,description:b,children:T}=t,{show:W,hide:Z}=Sr(i),ge=Br("core.callout"),Se=useRef(null),[Me,ut]=useState(),Et=dr(),on=useCallback(()=>{if(Se.current){const Qt=Se.current.getBoundingClientRect(),vn=Math.max(Qt.width,Qt.height),na=800,zn=Qt.x-(vn-Qt.width)/2-na,sa=Qt.y-(vn-Qt.height)/2-na,Fa=vn+2*na,tr=450,Qn=Qt.x+Qt.width/2-tr,Ba=Qt.y-(vn-Qt.height)/2+vn+20;ut({dotLeft:zn,dotTop:sa,dotSize:Fa,borderWidth:na,textTop:Ba,textLeft:Qn,textWidth:tr})}},[]);return useEffect(()=>(window.addEventListener("resize",on),window.addEventListener("scroll",on),()=>{window.removeEventListener("resize",on),window.removeEventListener("scroll",on)}),[on]),useLayoutEffect(on,[Se.current,on]),W?React.createElement(React.Fragment,null,React.createElement(Box,{className:Et.featureWrapper,ref:Se},T),createPortal(React.createElement(Box,{className:Et.backdrop},React.createElement(ClickAwayListener,{onClickAway:Z},React.createElement(React.Fragment,null,React.createElement(Box,{className:Et.dot,"data-testid":"dot",style:{left:Me==null?void 0:Me.dotLeft,top:Me==null?void 0:Me.dotTop,width:Me==null?void 0:Me.dotSize,height:Me==null?void 0:Me.dotSize,borderWidth:Me==null?void 0:Me.borderWidth},onClick:Z,onKeyDown:Z,role:"button",tabIndex:0},React.createElement(Box,{className:Et.pulseCircle})),React.createElement(Box,{className:Et.text,"data-testid":"text",style:{left:Me==null?void 0:Me.textLeft,top:Me==null?void 0:Me.textTop,width:Me==null?void 0:Me.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},d),React.createElement(Typography,null,b))))),ge)):React.createElement(React.Fragment,null,T)}const co=(0,C.A)(t=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:t.palette.text.secondary,cursor:"default"},primary:{color:t.palette.primary.main},secondary:{color:t.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function uo({color:t="primary",disabled:i=!1,href:d="#",icon:b=a.createElement(Fe.A,null),label:T,onClick:W,title:Z}){const ge=co();return i?a.createElement(G.A,{title:Z,className:se()(ge.link,ge.disabled)},b,a.createElement(u.A,{variant:"caption",component:"span",className:ge.label},T)):a.createElement(ma,{title:Z,className:se()(ge.link,ge[t]),to:d,onClick:W},b,a.createElement(u.A,{variant:"caption",component:"span",className:ge.label},T))}const Yr=(0,C.A)(t=>({links:{margin:t.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:t.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function zr(t){const{links:i}=t,d=Yr();return a.createElement("nav",{className:d.links},i.map((b,T)=>a.createElement(uo,{key:T+1,...b})))}const ha=t=>{const i=t==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${i}) 0%,
    hsla(0, 0%, ${i}, 0.987) 8.1%,
    hsla(0, 0%, ${i}, 0.951) 15.5%,
    hsla(0, 0%, ${i}, 0.896) 22.5%,
    hsla(0, 0%, ${i}, 0.825) 29%,
    hsla(0, 0%, ${i}, 0.741) 35.3%,
    hsla(0, 0%, ${i}, 0.648) 41.2%,
    hsla(0, 0%, ${i}, 0.55) 47.1%,
    hsla(0, 0%, ${i}, 0.45) 52.9%,
    hsla(0, 0%, ${i}, 0.352) 58.8%,
    hsla(0, 0%, ${i}, 0.259) 64.7%,
    hsla(0, 0%, ${i}, 0.175) 71%,
    hsla(0, 0%, ${i}, 0.104) 77.5%,
    hsla(0, 0%, ${i}, 0.049) 84.5%,
    hsla(0, 0%, ${i}, 0.013) 91.9%,
    hsla(0, 0%, ${i}, 0) 100%
  `},_=100,I=10,U=(0,C.A)(t=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:_,height:`calc(100% + ${I}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-I,background:`linear-gradient(90deg, ${ha(t.palette.type)})`},fadeRight:{right:-I,background:`linear-gradient(270deg, ${ha(t.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-t.spacing(2)},buttonRight:{right:-t.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function k(t){const[[i,d],b]=React.useState([0,0]);return React.useLayoutEffect(()=>{const T=t.current;if(!T){b([0,0]);return}const W=()=>{const Z=T.scrollLeft,ge=T.scrollWidth-T.offsetWidth-T.scrollLeft;b([Z,ge])};return W(),T.addEventListener("scroll",W),window.addEventListener("resize",W),()=>{T.removeEventListener("scroll",W),window.removeEventListener("resize",W)}},[t]),[i,d]}function me(t,i,d){const[b,T]=React.useState(0);return React.useLayoutEffect(()=>{if(b===0)return;const W=window.performance.now(),Z=requestAnimationFrame(ge=>{if(!t.current)return;const Se=ge-W,Me=Math.abs(b)*Se/i,Et=Math.max(d,Me)*Math.sign(b);t.current.scrollBy({left:Et});const on=b-Et;Math.sign(b)!==Math.sign(on)?T(0):T(on)});return()=>cancelAnimationFrame(Z)},[t,b,i,d]),T}function Ie(t){const{scrollStep:i=100,scrollSpeed:d=50,minScrollDistance:b=5,children:T,...W}=t,Z=U(t),ge=React.useRef(),[Se,Me]=k(ge),ut=me(ge,d,b),Et=on=>{ge.current&&ut(on?i:-i)};return React.createElement(Box,{...W,className:Z.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:Z.container,ref:ge},T),React.createElement(Box,{className:classNames(Z.fade,Z.fadeLeft,{[Z.fadeHidden]:Se===0})}),React.createElement(Box,{className:classNames(Z.fade,Z.fadeRight,{[Z.fadeHidden]:Me===0})}),Se>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>Et(!1),className:classNames(Z.button,Z.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),Me>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>Et(!0),className:classNames(Z.button,Z.buttonRight,{})},React.createElement(ChevronRight,null)))}const Ye=(0,C.A)(t=>({alpha:{color:t.palette.common.white,fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}}),{name:"BackstageLifecycle"});function Xe(t){const i=Ye(t),{shorthand:d,alpha:b}=t;return d?React.createElement(Typography,{component:"span",className:i[b?"alpha":"beta"],style:{fontSize:"120%"}},b?React.createElement(React.Fragment,null,"\u03B1"):React.createElement(React.Fragment,null,"\u03B2")):React.createElement(Typography,{component:"span",className:i[b?"alpha":"beta"]},b?"Alpha":"Beta")}const dt=(0,a.lazy)(()=>Promise.all([e.e(2838),e.e(2608)]).then(e.bind(e,22608)).then(t=>({default:t.RealLogViewer})));function qt(t){const{Progress:i}=(0,l.nm)().getComponents();return a.createElement(a.Suspense,{fallback:a.createElement(i,null)},a.createElement(dt,{...t}))}const zt=(0,C.A)(t=>({root:{paddingLeft:t.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),dn=({request:t,busy:i,setBusy:d})=>{const b=zt(),[T,W]=(0,a.useState)(),Z=async()=>{d(!0);try{await t.trigger()}catch(Se){W((0,jt.bJ)(Se)?Se.message:"An unspecified error occurred")}finally{d(!1)}},ge=t.provider.icon;return a.createElement(_t.A,{disabled:i,classes:{root:b.root}},a.createElement(Bt.A,null,a.createElement(ge,{fontSize:"large"})),a.createElement(st.A,{primary:t.provider.title,secondary:T&&a.createElement(u.A,{color:"error"},T)}),a.createElement(le.A,{color:"primary",variant:"contained",onClick:Z},"Log in"))},Rn=(0,C.A)(t=>({dialog:{paddingTop:t.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:t.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:t.spacing(2,0)}}),{name:"OAuthRequestDialog"});function yn(t){var i;const d=Rn(),[b,T]=(0,a.useState)(!1),W=(0,o.u)(o.x),ge=(i=(0,o.u)(o.p).getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?i:!1,Se=(0,O.A)((0,a.useMemo)(()=>W.authRequest$(),[W]),[]),Me=()=>{Se.forEach(ut=>ut.reject())};return a.createElement(ie.A,{open:!!Se.length,fullWidth:!0,maxWidth:"xs",classes:{paper:d.dialog},"aria-labelledby":"oauth-req-dialog-title"},a.createElement("main",null,a.createElement(Le.A,{classes:{root:d.title},id:"oauth-req-dialog-title"},a.createElement(u.A,{className:d.titleHeading,variant:"h1",variantMapping:{h1:"span"}},"Login Required"),ge?a.createElement(u.A,null,"This will trigger a http redirect to OAuth Login."):null),a.createElement(ze.A,{dividers:!0,classes:{root:d.contentList}},a.createElement(gt.A,null,Se.map(ut=>a.createElement(dn,{key:ut.provider.title,request:ut,busy:b,setBusy:T}))))),a.createElement(oe.A,{classes:{root:d.actionButtons}},a.createElement(le.A,{onClick:Me},"Reject All")))}const $n=(0,C.A)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function Vn(t){var i;const[d,b]=(0,a.useState)(!1),T=(0,cn.a)(),W=$n(),Z=ge=>{T()&&b(ge)};return a.createElement(ot.Ay,{title:(i=t.title)!=null?i:t.text||"",placement:t.placement,disableHoverListener:!d},a.createElement(pn(),{text:t.text,line:t.line,onToggled:Z,containerClassName:W.container}))}function Tn(t){const i=(0,ee.A)(),[d,b]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{const T=setTimeout(()=>b(!0),i.transitions.duration.short);return()=>clearTimeout(T)},[i.transitions.duration.short]),d?a.createElement(En.A,{...t,"data-testid":"progress"}):a.createElement(G.A,{display:"none"})}const oa=(0,C.A)(t=>({root:{maxWidth:"fit-content",padding:t.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:t.palette.textSubtle},arrow:{color:t.palette.textSubtle}}),{name:"BackstageBottomLink"});function ca(t){const{link:i,title:d,onClick:b}=t,T=oa();return a.createElement(G.A,null,a.createElement(xt.A,null),a.createElement(ma,{to:i,onClick:b,underline:"none"},a.createElement(G.A,{display:"flex",alignItems:"center",className:T.root},a.createElement(G.A,{className:T.boxTitle,fontWeight:"fontWeightBold",m:1},a.createElement(u.A,null,a.createElement("strong",null,d))),a.createElement(ct.A,{className:T.arrow}))))}const Hn=t=>{const{slackChannel:i}=t;if(i){if(typeof i=="string")return a.createElement(u.A,null,"Please contact ",i," for help.");if(!i.href)return a.createElement(u.A,null,"Please contact ",i.name," for help.")}else return null;return a.createElement(Za,{to:i.href,variant:"contained"},i.name)},Kn=class extends a.Component{constructor(i){super(i),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(i,d){console.error(`ErrorBoundary, error: ${i}, info: ${d}`),this.setState({error:i,errorInfo:d})}render(){const{slackChannel:i,children:d}=this.props,{error:b}=this.state;return b?a.createElement(ir,{title:"Something Went Wrong",error:b},a.createElement(Hn,{slackChannel:i})):d}},Xn=(0,C.A)(t=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:t.spacing(2,2,2,2.5)},headerTitle:{fontWeight:t.typography.fontWeightBold},headerSubheader:{paddingTop:t.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),Sa=(0,p.A)(t=>({root:{display:"inline-block",padding:t.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(Ot.A),_a={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function ga(t){const{title:i,subheader:d,divider:b=!0,deepLink:T,slackChannel:W,errorBoundaryProps:Z,variant:ge,children:Se,headerStyle:Me,headerProps:ut,icon:Et,action:on,actionsClassName:Qt,actions:vn,cardClassName:na,actionsTopRight:zn,className:sa,noPadding:Fa,titleTypographyProps:tr}=t,Qn=Xn();let Ba={},Ka={};ge&&ge.split(/[\s]+/g).forEach(Dr=>{Ba={...Ba,..._a.card[Dr]},Ka={...Ka,..._a.cardContent[Dr]}});const nr=()=>!d&&!Et?null:a.createElement("div",{className:Qn.headerSubheader,"data-testid":"info-card-subheader"},d&&a.createElement("div",{className:Qn.subheader},d),Et),Or=Z||(W?{slackChannel:W}:{});return a.createElement(lt.A,{style:Ba,className:sa},a.createElement(Kn,{...Or},i&&a.createElement(Dt.A,{classes:{root:Qn.header,title:Qn.headerTitle,subheader:Qn.headerSubheader,avatar:Qn.headerAvatar,action:Qn.headerAction,content:Qn.headerContent},title:i,subheader:nr(),action:on,style:{...Me},titleTypographyProps:tr,...ut}),zn&&a.createElement(Sa,null,zn),b&&a.createElement(xt.A,null),a.createElement(Vt.A,{className:se()(na,{[Qn.noPadding]:Fa}),style:Ka},Se),vn&&a.createElement(Ot.A,{className:Qt},vn),T&&a.createElement(ca,{...T})))}const Ca=(0,C.A)(t=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:t.typography.pxToRem(45),fontWeight:t.typography.fontWeightBold,color:t.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),Ta={fractional:!0,inverse:!1,unit:"%",max:100},Ma=({palette:t,value:i,inverse:d,max:b})=>{if(isNaN(i))return"#ddd";const T=b||Ta.max,W=d?T-i:i;return W<T/3?t.status.error:W<T*(2/3)?t.status.warning:t.status.ok};function jr(t){const[i,d]=useState(null),{getColor:b=Ma}=t,T=Ca(t),{palette:W}=useTheme(),{value:Z,fractional:ge,inverse:Se,unit:Me,max:ut,description:Et}={...Ta,...t},on=ge?Math.round(Z*ut):Z,Qt=ut!==100?Math.round(Z):on,[vn,na]=useState(!1);return useEffect(()=>{const zn=i,sa=()=>na(!0),Fa=()=>na(!1);return zn&&Et?(zn.addEventListener("mouseenter",sa),zn.addEventListener("mouseleave",Fa),()=>{zn.removeEventListener("mouseenter",sa),zn.removeEventListener("mouseleave",Fa)}):()=>{na(!1)}},[Et,i]),React.createElement(Box,{ref:d,className:T.root},React.createElement(Circle,{strokeLinecap:"butt",percent:on,strokeWidth:12,trailWidth:12,strokeColor:b({palette:W,value:Qt,inverse:Se,max:ut}),className:T.circle}),Et&&vn?React.createElement(Box,{className:T.description},Et):React.createElement(Box,{className:T.overlay},isNaN(Z)?"N/A":`${Qt}${Me}`))}const Lo=(0,C.A)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function ei(t){const i=Lo(t),{title:d,subheader:b,progress:T,inverse:W,deepLink:Z,description:ge,icon:Se,variant:Me,getColor:ut}=t,Et={inverse:W,description:ge,getColor:ut,value:T};return React.createElement(Box,{className:i.root},React.createElement(ga,{title:d,subheader:b,deepLink:Z,variant:Me,icon:Se},React.createElement(jr,{...Et})))}function ti(t){const{value:i,getColor:d=Ma,width:b="thick"}=t,{palette:T}=useTheme();if(isNaN(i))return null;let W=Math.round(i*100*100)/100;W>100&&(W=100);const Z=b==="thick"?4:1,ge=d({palette:T,value:W,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${W}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:W,strokeWidth:Z,trailWidth:Z,strokeColor:ge})))}const Qr=(0,C.A)(t=>(0,w.A)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none"}}),{name:"BackstageClosedDropdown"}),xo=()=>{const t=Qr();return a.createElement(Gn.A,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"#616161"}))},Bo=(0,C.A)(t=>(0,w.A)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none"}}),{name:"BackstageOpenedDropdown"}),Uo=()=>{const t=Bo();return a.createElement(Gn.A,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"#616161"}))},$o=(0,p.A)(t=>(0,w.A)({root:{"label + &":{marginTop:t.spacing(3)},"&.Mui-focused > div[role=button]":{borderColor:t.palette.primary.main}},input:{borderRadius:t.shape.borderRadius,position:"relative",backgroundColor:t.palette.background.paper,border:"1px solid #ced4da",fontSize:t.typography.body1.fontSize,padding:t.spacing(1.25,3.25,1.25,1.5),transition:t.transitions.create(["border-color","box-shadow"]),fontFamily:"Helvetica Neue","&:focus":{background:t.palette.background.paper,borderRadius:t.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(bn.A),yo=(0,C.A)(t=>(0,w.A)({formControl:{margin:t.spacing(1,0),maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function mo(t){const{multiple:i,items:d,label:b,placeholder:T,selected:W,onChange:Z,triggerReset:ge,native:Se=!1,disabled:Me=!1,margin:ut}=t,Et=yo(),[on,Qt]=(0,a.useState)(W||(i?[]:"")),[vn,na]=(0,a.useState)(!1);(0,a.useEffect)(()=>{Qt(i?[]:"")},[ge,i]),(0,a.useEffect)(()=>{Qt(W||(i?[]:""))},[W,i]);const zn=Qn=>{Qt(Qn.target.value),Z(Qn.target.value)},sa=Qn=>{if(Me){Qn.preventDefault();return}na(Ba=>i&&!(Qn.target instanceof HTMLElement)?!0:!Ba)},Fa=()=>{na(!1)},tr=Qn=>()=>{const Ba=on.filter(Ka=>Ka!==Qn);Qt(Ba),Z(Ba)};return a.createElement(G.A,{className:Et.root},a.createElement(sn.A,{className:Et.formControl},a.createElement(In.A,{className:Et.formLabel},b),a.createElement(qn.A,{"aria-label":b,value:on,native:Se,disabled:Me,"data-testid":"select",displayEmpty:!0,multiple:i,margin:ut,onChange:zn,open:vn,onOpen:sa,onClose:Fa,input:a.createElement($o,null),label:b,renderValue:Qn=>{var Ba;return i&&on.length!==0?a.createElement(G.A,{className:Et.chips},Qn.map(Ka=>{const nr=d.find(Or=>Or.value===Ka);return nr?a.createElement(Gt.A,{key:nr==null?void 0:nr.value,label:nr==null?void 0:nr.label,clickable:!0,onDelete:tr(Ka),className:Et.chip}):!1})):a.createElement(u.A,null,on.length===0?T||"":(Ba=d.find(Ka=>Ka.value===Qn))==null?void 0:Ba.label)},IconComponent:()=>vn?a.createElement(Uo,null):a.createElement(xo,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},T&&!i&&a.createElement(Pn.A,{value:[]},T),Se?d&&d.map(Qn=>a.createElement("option",{value:Qn.value,key:Qn.value},Qn.label)):d&&d.map(Qn=>a.createElement(Pn.A,{key:Qn.value,value:Qn.value},i&&a.createElement(Yt.A,{color:"primary",checked:on.includes(Qn.value)||!1,className:Et.checkbox}),Qn.label)))))}const h=()=>{},n=a.createContext({stepperLength:0,stepIndex:0,setStepIndex:h,stepHistory:[],setStepHistory:h,onStepChange:h});function s(t){const{children:i,elevated:d,onStepChange:b,activeStep:T=0}=t,[W,Z]=useState(T),[ge,Se]=useState([0]);useEffect(()=>{Z(T)},[T]);const Me=[];let ut;return Children.forEach(i,Et=>{isValidElement(Et)&&(Et.props.end?ut=Et:Me.push(Et))}),React.createElement(React.Fragment,null,React.createElement(n.Provider,{value:{stepIndex:W,setStepIndex:Z,stepHistory:ge,setStepHistory:Se,onStepChange:b,stepperLength:Children.count(i)}},React.createElement(MuiStepper,{activeStep:W,orientation:"vertical",elevation:d?2:0},Me)),W>=Children.count(i)-1&&ut)}const y=(0,C.A)(t=>({root:{marginTop:t.spacing(3),"& button":{marginRight:t.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),L=({text:t,handleClick:i})=>React.createElement(Button$1,{onClick:i},t||"Reset"),Ce=({text:t,handleClick:i,disabled:d,last:b,stepIndex:T})=>React.createElement(Button$1,{variant:"contained",color:"primary",disabled:d,"data-testid":`nextButton-${T}`,onClick:i},t||(b?"Finish":"Next")),Ze=({text:t,handleClick:i,disabled:d,stepIndex:b})=>React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:d,"data-testid":`skipButton-${b}`,onClick:i},t||"Skip"),tt=({text:t,handleClick:i,disabled:d,stepIndex:b})=>React.createElement(Button$1,{onClick:i,"data-testid":`backButton-${b}`,disabled:d},t||"Back"),$t=({actions:t={},children:i})=>{const d=y(),{stepperLength:b,stepIndex:T,setStepIndex:W,stepHistory:Z,setStepHistory:ge,onStepChange:Se}=useContext(n),Me=(Qt,vn)=>{vn&&vn(),Se&&Se(T,Qt),W(Qt)},ut=()=>{const Qt=t.nextStep?t.nextStep(T,b-1):T+1;Me(Qt,t.onNext),ge([...Z,Qt])},Et=()=>{Z.pop(),Me(Z[Z.length-1],t.onBack),ge([...Z])},on=()=>{Me(0,t.onRestart),ge([0])};return React.createElement(Box,{className:d.root},[void 0,!0].includes(t.showBack)&&T!==0&&React.createElement(tt,{text:t.backText,handleClick:Et,disabled:T===0,stepIndex:T}),t.showSkip&&React.createElement(Ze,{text:t.skipText,handleClick:ut,disabled:!!b&&T>=b||!!t.canSkip&&!t.canSkip(),stepIndex:T}),[void 0,!0].includes(t.showNext)&&React.createElement(Ce,{text:t.nextText,handleClick:ut,disabled:!!b&&T>=b||!!t.canNext&&!t.canNext(),stepIndex:T}),t.showRestart&&T!==0&&React.createElement(L,{text:t.restartText,handleClick:on,stepIndex:T}),i)},nn=(0,C.A)(t=>({end:{padding:t.spacing(3)}}),{name:"SimpleStepperStep"});function Yn(t){const{title:i,children:d,end:b,actions:T,...W}=t,Z=nn();return b?React.createElement(Box,{className:Z.end},React.createElement(Typography,{variant:"h6"},i),d,React.createElement($t,{actions:{...T||{},showNext:!1}})):React.createElement(MuiStep,{...W},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},i)),React.createElement(StepContent,null,d,React.createElement($t,{actions:T})))}const Bn=(0,C.A)(t=>({status:{fontWeight:t.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:t.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:t.palette.status.ok}},warning:{"&::before":{backgroundColor:t.palette.status.warning}},error:{"&::before":{backgroundColor:t.palette.status.error}},pending:{"&::before":{backgroundColor:t.palette.status.pending}},running:{"&::before":{backgroundColor:t.palette.status.running}},aborted:{"&::before":{backgroundColor:t.palette.status.aborted}}}),{name:"BackstageStatus"});function xn(t){const i=Bn(t);return a.createElement(u.A,{component:"span",className:se()(i.status,i.ok),"aria-label":"Status ok","aria-hidden":"true",...t})}function da(t){const i=Bn(t);return a.createElement(u.A,{component:"span",className:se()(i.status,i.warning),"aria-label":"Status warning","aria-hidden":"true",...t})}function ta(t){const i=Bn(t);return a.createElement(u.A,{component:"span",className:se()(i.status,i.error),"aria-label":"Status error","aria-hidden":"true",...t})}function fa(t){const i=Bn(t);return a.createElement(u.A,{component:"span",className:se()(i.status,i.pending),"aria-label":"Status pending","aria-hidden":"true",...t})}function Ya(t){const i=Bn(t);return a.createElement(u.A,{component:"span",className:se()(i.status,i.running),"aria-label":"Status running","aria-hidden":"true",...t})}function va(t){const i=Bn(t);return a.createElement(u.A,{component:"span",className:se()(i.status,i.aborted),"aria-label":"Status aborted","aria-hidden":"true",...t})}const mr=t=>(0,w.A)({root:{fontWeight:t.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:t.spacing(4),border:"0",verticalAlign:"top"}}),Ur={root:{border:"0",verticalAlign:"top"}},_o=t=>(0,w.A)({root:{margin:t.spacing(0,0,-1,0)}}),Vi=t=>(0,w.A)({root:{padding:t.spacing(0,0,1,0)},random:{}}),Gi=(0,p.A)(mr,{name:"BackstageMetadataTableTitleCell"})(ft.A),Ji=(0,p.A)(Ur,{name:"BackstageMetadataTableCell"})(ft.A),Yi=({dense:t,children:i})=>a.createElement(Jn.A,{size:t?"small":"medium"},a.createElement(aa.A,null,i)),Qi=({title:t,children:i,...d})=>a.createElement(m.A,null,t&&a.createElement(Gi,null,t),a.createElement(Ji,{colSpan:t?1:2,...d},i)),ni=(0,p.A)(_o,{name:"BackstageMetadataTableList"})(({classes:t,children:i})=>a.createElement(gt.A,{disablePadding:!0,className:t.root},i)),ai=(0,p.A)(Vi,{name:"BackstageMetadataTableListItem"})(({classes:t,children:i})=>a.createElement(_t.A,{className:t.root},i)),ri=(0,w.A)({root:{margin:"0 0",listStyleType:"none"}}),Zi=t=>(0,w.A)({root:{...ri.root,paddingLeft:t.spacing(1)}}),oi=(0,p.A)(ri,{name:"BackstageStructuredMetadataTableList"})(({classes:t,children:i})=>a.createElement(ni,{classes:t},i)),ii=(0,p.A)(Zi,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:t,children:i})=>a.createElement(ni,{classes:t},i));function Xi(t,i,d){const b=t.map((T,W)=>a.createElement(ai,{key:W},Wo(T,i,d)));return d?a.createElement(ii,null,b):a.createElement(oi,null,b)}function qi(t,i,d){const b=Object.keys(t).map(T=>{const W=Wo(t[T],i,!0);return a.createElement(ai,{key:T},a.createElement(u.A,{variant:"body2",component:"span"},`${i.titleFormat(T)}: `),W)});return d?a.createElement(ii,null,b):a.createElement(oi,null,b)}function Wo(t,i,d){return a.isValidElement(t)?a.createElement(a.Fragment,null,t):t!==null&&typeof t=="object"&&!Array.isArray(t)?qi(t,i,d):Array.isArray(t)?Xi(t,i,d):typeof t=="boolean"?a.createElement(a.Fragment,null,t?"\u2705":"\u274C"):a.createElement(u.A,{variant:"body2",component:"span"},t)}const es=({value:t,options:i})=>a.createElement(a.Fragment,null,Wo(t,i,!1)),ts=({title:t,value:i,options:d})=>a.createElement(Qi,{title:d.titleFormat(t)},a.createElement(es,{value:i,options:d}));function ns(t,i){return Object.keys(t).map(d=>a.createElement(ts,{key:d,title:d,value:t[d],options:i}))}function as(t){const{metadata:i,dense:d=!0,options:b={}}=t,T=ns(i,{titleFormat:On(),...b});return a.createElement(Yi,{dense:d},T)}function rs(t){return qs.stringify(t,{strictNullHandling:!0})}function si(t){return qs.parse(t,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function li(t,i){return si(t)[i]}function os(t,i,d){const b={...si(t),[i]:d};return rs(b)}function dc(t,i=250){const[d,b]=useSearchParams(),T=d.toString(),[W,Z]=useState(li(T,t));return useEffect(()=>{const ge=li(T,t);Z(Se=>isEqual(ge,Se)?Se:ge)},[T,Z,t]),useDebouncedEffect(()=>{const ge=os(T,t,W);T!==ge&&b(ge,{replace:!0})},[b,W,T,t],i),[W,Z]}const is={url:"https://github.com/backstage/backstage/issues",items:[{title:"Support Not Configured",icon:"warning",links:[{title:"Add `app.support` config key",url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]};function ci(){const i=(0,o.b)().get(o.p),d=i==null?void 0:i.getOptionalConfig("app.support");return d?{url:d.getString("url"),items:d.getConfigArray("items").flatMap(b=>{var T;return{title:b.getString("title"),icon:b.getOptionalString("icon"),links:((T=b.getOptionalConfigArray("links"))!=null?T:[]).flatMap(W=>({url:W.getString("url"),title:W.getString("title")}))}})}:is}function yr(t,i){const b=(0,l.nm)().getSystemIcon(t);return b?a.createElement(b,{...i}):a.createElement(q.A,{...i})}function mc(t){return yr("brokenImage",t)}function ss(t){return yr("catalog",t)}function pc(t){return yr("chat",t)}function hc(t){return yr("dashboard",t)}function ls(t){return yr("docs",t)}function gc(t){return yr("email",t)}function cs(t){return yr("github",t)}function fc(t){return yr("group",t)}function Ao(t){return yr("help",t)}function us(t){return yr("user",t)}function Ec(t){return yr("warning",t)}const ds=(0,C.A)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),ms=({icon:t})=>{var i;const d=(0,l.nm)(),b=t&&(i=d.getSystemIcon(t))!=null?i:Ao;return a.createElement(b,null)},ps=({link:t})=>{var i;return a.createElement(ma,{to:t.url},(i=t.title)!=null?i:t.url)},hs=({item:t})=>{var i;return a.createElement(Pn.A,null,a.createElement(D.A,null,a.createElement(ms,{icon:t.icon})),a.createElement(st.A,{primary:t.title,secondary:(i=t.links)==null?void 0:i.reduce((d,b,T)=>[...d,T>0&&a.createElement("br",{key:T}),a.createElement(ps,{link:b,key:b.url})],[])}))};function gs(t){const{title:i,items:d,children:b}=t,{items:T}=ci(),[W,Z]=(0,a.useState)(!1),[ge,Se]=(0,a.useState)(null),Me=ds(),ut=(0,Ge.A)(Qt=>Qt.breakpoints.down("sm")),Et=Qt=>{Se(Qt.currentTarget),Z(!0)},on=()=>{Z(!1)};return a.createElement(a.Fragment,null,a.createElement(G.A,{display:"flex",ml:1},ut?a.createElement(A.A,{color:"primary",size:"small",onClick:Et,"data-testid":"support-button","aria-label":"Support"},a.createElement(Ao,null)):a.createElement(le.A,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:Et,startIcon:a.createElement(Ao,null)},"Support")),a.createElement(de.Ay,{"data-testid":"support-button-popover",open:W,anchorEl:ge,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:on},a.createElement(j.A,{className:Me.popoverList,autoFocusItem:!!ge},i&&a.createElement(Pn.A,{alignItems:"flex-start",className:Me.menuItem},a.createElement(u.A,{variant:"subtitle1"},i)),a.Children.map(b,(Qt,vn)=>a.createElement(Pn.A,{alignItems:"flex-start",key:`child-${vn}`,className:Me.menuItem},Qt)),(d!=null?d:T).map((Qt,vn)=>a.createElement(hs,{item:Qt,key:`item-${vn}`}))),a.createElement(oe.A,null,a.createElement(le.A,{color:"primary",onClick:on,"aria-label":"Close"},"Close"))))}const fs=(0,C.A)(t=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:t.spacing(3),paddingBottom:t.spacing(3),paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function bo(t){const{className:i,stretch:d,noPadding:b,children:T,...W}=t,Z=fs();return a.createElement("article",{...W,className:se()(Z.root,i,{[Z.stretch]:d,[Z.noPadding]:b})},T)}const Es=(0,C.A)(t=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:t.palette.background.paper,paddingLeft:t.spacing(3),minWidth:0},defaultTab:{...t.typography.caption,padding:t.spacing(3,3),textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,color:t.palette.text.secondary},selected:{color:t.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:t.palette.background.default,color:t.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function ui(t){const{tabs:i,onChange:d,selectedIndex:b}=t,[T,W]=(0,a.useState)(b!=null?b:0),Z=Es(),ge=(0,a.useCallback)((Se,Me)=>{b===void 0&&W(Me),d&&d(Me)},[b,d]);return(0,a.useEffect)(()=>{b!==void 0&&W(b)},[b]),a.createElement(G.A,{className:Z.tabsWrapper},a.createElement(vt.A,{indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:ge,value:T},i.map((Se,Me)=>a.createElement(ke.A,{...Se.tabProps,"data-testid":`header-tab-${Me}`,label:Se.label,key:Se.id,value:Me,className:Z.defaultTab,classes:{selected:Z.selected,root:Z.tabRoot}}))))}function vs(t){var i,d,b,T,W;const Z=(0,Q.g)(),Se=t.map(({path:Qt,children:vn})=>({caseSensitive:!1,path:`${Qt}/*`,element:vn})).sort((Qt,vn)=>vn.path.replace(/\/\*$/,"").localeCompare(Qt.path.replace(/\/\*$/,""))),Me=(d=(0,Q.Ye)(Se))!=null?d:(i=t[0])==null?void 0:i.children;let ut=(b=Z["*"])!=null?b:"";ut.startsWith("/")||(ut=`/${ut}`);const[Et]=(T=(0,H.ue)(Se,ut))!=null?T:[],on=Et?t.findIndex(Qt=>`${Qt.path}/*`===Et.route.path):0;return{index:on===-1?0:on,element:Me,route:(W=t[on])!=null?W:t[0]}}function di(t){const{routes:i}=t,d=(0,Q.Zp)(),{index:b,route:T,element:W}=vs(i),Z=(0,a.useMemo)(()=>i.map(Se=>({id:Se.path,label:Se.title,tabProps:Se.tabProps})),[i]),ge=Se=>{let{path:Me}=i[Se];Me=Me.replace(/\/\*$/,""),Me=Me.replace(/^\//,""),d(Me)};return a.createElement(a.Fragment,null,a.createElement(ui,{tabs:Z,selectedIndex:b,onChange:ge}),a.createElement(bo,null,a.createElement(xe.m,{title:T==null?void 0:T.title}),W))}const ko=()=>null;(0,l.h3)(ko,"core.gatherMountPoints",!0);function mi(t){const i=a.createElement(ko,{path:"",title:""},a.createElement("div",null)).type;return a.Children.toArray(t).flatMap(d=>{if(!(0,a.isValidElement)(d))return[];if(d.type===a.Fragment)return mi(d.props.children);if(d.type!==i)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:b,title:T,children:W,tabProps:Z}=d.props;return[{path:b,title:T,children:W,tabProps:Z}]})}function ys(t){const i=mi(t.children);return a.createElement(di,{routes:i})}ys.Route=ko;const _s=(0,C.A)(t=>({value:{marginBottom:t.spacing(.75)},subvalue:{color:t.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function As(t){const{value:i,subvalue:d}=t,b=_s();return a.createElement(a.Fragment,null,a.createElement(G.A,{className:b.value},i),a.createElement(G.A,{className:b.subvalue},d))}const bs=(0,C.A)(t=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:t.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:t.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${t.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:t.spacing(2)}}}),{name:"BackstageTableFilters"}),Cs=t=>{var i;const d=bs(),{onChangeFilters:b}=t,[T,W]=(0,a.useState)({...t.selectedFilters}),[Z,ge]=(0,a.useState)(!1),Se=()=>{W({}),ge(Me=>!Me)};return(0,a.useEffect)(()=>{b(T)},[T,b]),a.createElement(G.A,{className:d.root},a.createElement(G.A,{className:d.header},a.createElement(G.A,{className:d.value},"Filters"),a.createElement(le.A,{color:"primary",onClick:Se},"Clear all")),a.createElement(G.A,{className:d.filters},((i=t.filters)==null?void 0:i.length)&&t.filters.map(Me=>a.createElement(mo,{triggerReset:Z,key:Me.element.label,...Me.element,selected:T[Me.element.label],onChange:ut=>W({...T,[Me.element.label]:ut})}))))};function Ps(t){return a.createElement("tbody",{"data-testid":"loading-indicator"},a.createElement("tr",null,a.createElement("td",{colSpan:t.colSpan},a.createElement(G.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",minHeight:"15rem"}},a.createElement(M.A,{size:"5rem"})))))}const pi={Add:(0,a.forwardRef)((t,i)=>a.createElement(V.A,{...t,ref:i})),Check:(0,a.forwardRef)((t,i)=>a.createElement($e.A,{...t,ref:i})),Clear:(0,a.forwardRef)((t,i)=>a.createElement(Ke.default,{...t,ref:i})),Delete:(0,a.forwardRef)((t,i)=>a.createElement(Je.A,{...t,ref:i})),DetailPanel:(0,a.forwardRef)((t,i)=>a.createElement(Xt.A,{...t,ref:i})),Edit:(0,a.forwardRef)((t,i)=>a.createElement(Ut.A,{...t,ref:i})),Export:(0,a.forwardRef)((t,i)=>a.createElement(mn.A,{...t,ref:i})),Filter:(0,a.forwardRef)((t,i)=>a.createElement(Rt.A,{...t,ref:i})),FirstPage:(0,a.forwardRef)((t,i)=>a.createElement(Nt.A,{...t,ref:i})),LastPage:(0,a.forwardRef)((t,i)=>a.createElement(_n.A,{...t,ref:i})),NextPage:(0,a.forwardRef)((t,i)=>a.createElement(Xt.A,{...t,ref:i})),PreviousPage:(0,a.forwardRef)((t,i)=>a.createElement(Mt.A,{...t,ref:i})),ResetSearch:(0,a.forwardRef)((t,i)=>a.createElement(Ke.default,{...t,ref:i})),Search:(0,a.forwardRef)((t,i)=>a.createElement(Rt.A,{...t,ref:i})),SortArrow:(0,a.forwardRef)((t,i)=>a.createElement(ve.A,{...t,ref:i})),ThirdStateCheck:(0,a.forwardRef)((t,i)=>a.createElement(An.A,{...t,ref:i})),ViewColumn:(0,a.forwardRef)((t,i)=>a.createElement(ln.A,{...t,ref:i}))};function hi(t,i){const d=i.split(".");let b=t[d[0]];for(let T=1;T<d.length;++T){if(b===void 0)return b;const W=d[T];b=b[W]}return b}const Os=(0,p.A)(t=>({header:{padding:t.spacing(1,2,1,2.5),borderTop:`1px solid ${t.palette.grey.A100}`,borderBottom:`1px solid ${t.palette.grey.A100}`,fontWeight:t.typography.fontWeightBold,position:"static",wordBreak:"normal"}}),{name:"BackstageTableHeader"})(kt.rV),gi=(0,p.A)(t=>({root:{padding:t.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:t.typography.fontWeightBold}},searchField:{paddingRight:t.spacing(2)}}),{name:"BackstageTableToolbar"})(kt.Nb),Rs=(0,C.A)(t=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:t.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),Ss=(0,C.A)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function Ts(t,i){return t.map(d=>{var b;const T=(b=d.headerStyle)!=null?b:{};let W=d.cellStyle||{};if(d.highlight)if(T.color=i.palette.textContrast,typeof W=="object")W.fontWeight=i.typography.fontWeightBold;else{const Z=W;W=(ge,Se,Me)=>({...Z(ge,Se,Me),fontWeight:i.typography.fontWeightBold})}return{...d,headerStyle:T,cellStyle:W}})}function Ds(t,i){return(0,_e.transform)(t,(d,b,T)=>{(0,_e.isEqual)(b,i[T])||(d[T]=b)})}const fi={search:"",filtersOpen:!1,filters:{}};function ws(t){const{toolbarRef:i,setSearch:d,hasFilters:b,selectedFiltersLength:T,toggleFilters:W}=t,Z=Rs(),ge=(0,a.useCallback)(Se=>{t.onSearchChanged(Se),d(Se)},[t,d]);return b?a.createElement(G.A,{className:Z.root},a.createElement(G.A,{className:Z.root},a.createElement(A.A,{onClick:W,"aria-label":"filter list"},a.createElement(Rt.A,null)),a.createElement(u.A,{className:Z.title},"Filters (",T,")")),a.createElement(gi,{...t,ref:i,onSearchChanged:ge})):a.createElement(gi,{...t,ref:i,onSearchChanged:ge})}function Ei(t){const{data:i,columns:d,emptyContent:b,options:T,title:W,subtitle:Z,localization:ge,filters:Se,initialState:Me,onStateChange:ut,components:Et,isLoading:on,...Qt}=t,vn=Ss(),na=(0,ee.A)(),zn={...fi,...Me},[sa,Fa]=(0,a.useState)(zn.filtersOpen),tr=(0,a.useCallback)(()=>Fa(sr=>!sr),[Fa]),[Qn,Ba]=(0,a.useState)(zn.filters),[Ka,nr]=(0,a.useState)(zn.search);(0,a.useEffect)(()=>{if(ut){const sr=Ds({search:Ka,filtersOpen:sa,filters:Qn},fi);ut(sr)}},[Ka,sa,Qn,ut]);const Or=(0,a.useCallback)(sr=>{var po;return(po=d.find(wr=>wr.title===sr))==null?void 0:po.field},[d]),qr=(0,a.useMemo)(()=>{if(typeof i=="function"||!Qn)return i;const sr=Object.values(Qn);return i&&sr.flat().length?i.filter(wr=>!!Object.entries(Qn).filter(([,ho])=>!!ho.length).every(([ho,Wr])=>{const kr=hi(wr,Or(ho));return Array.isArray(kr)&&Array.isArray(Wr)?kr.some(Zo=>Wr.includes(Zo)):Array.isArray(kr)?kr.includes(Wr):Array.isArray(Wr)?Wr.includes(kr):kr===Wr})):i},[i,Qn,Or]),Dr=Object.values(Qn).flat().length,$r=!!(Se!=null&&Se.length),Qo=(0,a.useCallback)(sr=>a.createElement(ws,{setSearch:nr,hasFilters:$r,selectedFiltersLength:Dr,toggleFilters:tr,...sr}),[tr,$r,Dr,nr]),Hr=typeof i!="function"&&i.length===0,Io=d.length,Pa=(0,a.useMemo)(()=>Is({hasNoRows:Hr,emptyContent:b,columnCount:Io,loading:on}),[Hr,b,Io,on]);return a.createElement(G.A,{className:vn.root},sa&&i&&typeof i!="function"&&(Se==null?void 0:Se.length)&&a.createElement(Cs,{filters:Ms(Se,i,d),selectedFilters:Qn,onChangeFilters:Ba}),a.createElement(kt.Ay,{components:{Header:Os,Body:Pa,Toolbar:Qo,...Et},options:{headerStyle:{textTransform:"uppercase"},...T},columns:Ts(d,na),icons:pi,title:a.createElement(a.Fragment,null,a.createElement(u.A,{variant:"h5",component:"h2"},W),Z&&a.createElement(u.A,{color:"textSecondary",variant:"body1"},Z)),data:qr,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"},...ge},...Qt}))}Ei.icons=Object.freeze(pi);function Is({columnCount:t,emptyContent:i,hasNoRows:d,loading:b}){return T=>b?a.createElement(Ps,{colSpan:t}):i&&d?a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{colSpan:t},i))):a.createElement(kt.C6,{...T})}function Ms(t,i,d){const b=W=>{const Z=new Set,ge=Se=>{Se!=null&&Z.add(Se)};return i&&i.forEach(Se=>{var Me;const ut=hi(Se,(Me=d.find(Et=>Et.title===W))==null?void 0:Me.field);Array.isArray(ut)?ut.forEach(ge):ge(ut)}),Z},T=W=>({placeholder:"All results",label:W.column,multiple:W.type==="multiple-select",items:[...b(W.column)].sort().map(Z=>({label:Z,value:Z}))});return t.map(W=>({type:W.type,element:T(W)}))}function Ls(t,i){const d=t[t.length-1];if(d)return d>=.9?i.palette.status.ok:d>=.5?i.palette.status.warning:i.palette.status.error}function vc(t){var i;const d=useTheme();return t.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...t},t.title&&React.createElement("title",null,t.title),React.createElement(SparklinesLine,{color:(i=t.color)!=null?i:Ls(t.data,d)})):null}const xs=t=>(0,C.A)(i=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:i.spacing(2),textAlign:t.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:i.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),Bs=({title:t="Unknown page",className:i})=>a.createElement(u.A,{variant:"h4",component:"h2",className:i,"data-testid":"header-title"},t);function vi(t){const{description:i,title:d,titleComponent:b=void 0,children:T,textAlign:W="left"}=t,Z=xs({textAlign:W})(),ge=b||a.createElement(Bs,{title:d,className:Z.title});return a.createElement(a.Fragment,null,a.createElement(xe.m,{title:d}),a.createElement(G.A,{className:Z.container},a.createElement(G.A,{className:Z.leftItemsBox},ge,i&&a.createElement(u.A,{className:Z.description,variant:"body2"},i)),a.createElement(G.A,{className:Z.rightItemsBox},T)))}const Us=(0,C.A)(t=>({micDrop:{maxWidth:"60%",bottom:t.spacing(2),right:t.spacing(2),[t.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:t.spacing(10,"auto",4)}}}),{name:"BackstageErrorPageMicDrop"}),$s=()=>{const t=Us();return a.createElement("img",{src:be,className:t.micDrop,alt:"Girl dropping mic from her hands"})},Ws=(0,C.A)(t=>({title:{paddingBottom:t.spacing(5),[t.breakpoints.down("xs")]:{paddingBottom:t.spacing(4),fontSize:t.typography.h3.fontSize}}}),{name:"BackstageErrorPageStackDetails"});function ks(t){const{stack:i}=t,d=Ws(),[b,T]=(0,a.useState)(!1);return b?a.createElement(a.Fragment,null,a.createElement(u.A,{variant:"h6",className:d.title},a.createElement(ma,{to:"#",onClick:()=>T(!1)},"Show less details")),a.createElement(qa,{text:i,language:"text",showCopyCodeButton:!0,showLineNumbers:!0})):a.createElement(u.A,{variant:"h6",className:d.title},a.createElement(ma,{to:"#",onClick:()=>T(!0)},"Show more details"))}const Ns=(0,C.A)(t=>({container:{padding:t.spacing(8),[t.breakpoints.down("xs")]:{padding:t.spacing(2)}},title:{paddingBottom:t.spacing(5),[t.breakpoints.down("xs")]:{paddingBottom:t.spacing(4),fontSize:t.typography.h3.fontSize}},subtitle:{color:t.palette.textSubtle}}),{name:"BackstageErrorPage"});function Fs(t){const{status:i,statusMessage:d,additionalInfo:b,supportUrl:T,stack:W}=t,Z=Ns(),ge=(0,Q.Zp)(),Se=ci();return a.createElement(S.A,{container:!0,className:Z.container},a.createElement(S.A,{item:!0,xs:12,sm:8,md:4},a.createElement(u.A,{"data-testid":"error",variant:"body1",className:Z.subtitle},"ERROR ",i,": ",d),a.createElement(u.A,{variant:"body1",className:Z.subtitle},b),a.createElement(u.A,{variant:"h2",className:Z.title},"Looks like someone dropped the mic!"),a.createElement(u.A,{variant:"h6",className:Z.title},a.createElement(ma,{to:"#","data-testid":"go-back-link",onClick:()=>ge(-1)},"Go back"),"... or please"," ",a.createElement(ma,{to:T||Se.url},"contact support")," if you think this is a bug."),W&&a.createElement(ks,{stack:W})),a.createElement($s,null))}const Ks=(0,p.A)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(u.A),No=(0,p.A)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(G.A);function yi(t){const{children:i,...d}=t,[b,T]=a.useState(null),W=a.Children.toArray(i),[Z,ge,...Se]=W,Me=Se.length?Se.pop():W[W.length-1],ut=W.length>3,Et=vn=>{T(vn.currentTarget)},on=()=>{T(null)},Qt=!!b;return a.createElement(a.Fragment,null,a.createElement(Re.A,{"aria-label":"breadcrumb",...d},W.length>1&&a.createElement(No,{clone:!0},Z),W.length>2&&a.createElement(No,{clone:!0},ge),ut&&a.createElement(Ks,{onClick:Et},"..."),a.createElement(G.A,{style:{fontStyle:"italic"}},Me)),a.createElement(de.Ay,{open:Qt,anchorEl:b,onClose:on,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},a.createElement(gt.A,null,Se.map((vn,na)=>a.createElement(_t.A,{key:na,button:!0},a.createElement(No,{clone:!0},vn))))))}const Co=72,_i=24,Ai=18,Tr={drawerWidthClosed:Co,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:Co,iconSize:Co-_i*2,iconPadding:_i,selectedIndicatorWidth:3,userBadgePadding:Ai,userBadgeDiameter:Co-Ai*2,mobileSidebarHeight:56},zs=t=>({...Tr,...t,iconContainerWidth:Tr.drawerWidthClosed,iconSize:Tr.drawerWidthClosed-Tr.iconPadding*2,userBadgeDiameter:Tr.drawerWidthClosed-Tr.userBadgePadding*2}),bi={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:Tr.defaultOpenDelayMs+200},js=t=>({...bi,...t}),yc="@backstage/core/sidebar-intro-dismissed",Er=(0,a.createContext)({sidebarConfig:Tr,submenuConfig:bi}),Fo=(0,a.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),Ci={isOpen:!1,setOpen:()=>{}},Pi=(0,a.createContext)(Ci),Oi=(0,Jt.tK)("sidebar-open-state-context");function Ri(t){const{children:i,value:d}=t;return a.createElement(Pi.Provider,{value:d},a.createElement(Oi.Provider,{value:(0,Jt.Bl)({1:d})},i))}const Po=()=>{const t=(0,a.useContext)(Oi),i=(0,a.useContext)(Pi);if(t===void 0)return i||Ci;const d=t.atVersion(1);if(d===void 0)throw new Error("No context found for version 1.");return d},Si=(0,a.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),Ti={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},Di=(0,a.createContext)(Ti),wi=(0,Jt.tK)("sidebar-pin-state-context");function Hs(t){const{children:i,value:d}=t;return a.createElement(Di.Provider,{value:d},a.createElement(wi.Provider,{value:(0,Jt.Bl)({1:d})},i))}const Oo=()=>{const t=(0,a.useContext)(wi),i=(0,a.useContext)(Di);if(t===void 0)return i||Ti;const d=t.atVersion(1);if(d===void 0)throw new Error("No context found for version 1.");return d},Vs=(0,C.A)(t=>({root:{flexGrow:0,margin:t.spacing(0,2),color:t.palette.navigation.color},selected:i=>({color:`${t.palette.navigation.selectedColor}!important`,borderTop:`solid ${i.sidebarConfig.selectedIndicatorWidth}px ${t.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),Gs=t=>{const{to:i,label:d,icon:b,value:T}=t,{sidebarConfig:W}=(0,a.useContext)(Er),Z=Vs({sidebarConfig:W}),ge=(0,Q.zy)(),{selectedMenuItemIndex:Se,setSelectedMenuItemIndex:Me}=(0,a.useContext)(Si),ut=(on,Qt)=>{Me(Qt===Se?-1:Qt)},Et=T===Se&&Se>=0||T!==Se&&!(Se>=0)&&i===ge.pathname;return a.createElement(hn.A,{"aria-label":d,label:d,icon:b,component:ma,to:i||ge.pathname,onChange:ut,value:T,selected:Et,classes:Z})},Ko=t=>{const{children:i,to:d,label:b,icon:T,value:W}=t,{isMobile:Z}=Oo();return Z?a.createElement(Gs,{to:d,label:b,icon:T,value:W}):a.createElement(a.Fragment,null,i)},Ii=(0,C.A)(t=>({root:{position:"fixed",backgroundColor:t.palette.navigation.background,color:t.palette.navigation.color,bottom:0,left:0,right:0,zIndex:t.zIndex.snackbar,borderTop:"1px solid #383838","@media print":{display:"none"}},overlay:i=>({background:t.palette.navigation.background,width:"100%",bottom:`${i.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${i.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:t.palette.navigation.color,alignItems:"center",justifyContent:"space-between",padding:t.spacing(2,3)},overlayHeaderClose:{color:t.palette.navigation.color},marginMobileSidebar:i=>({marginBottom:`${i.sidebarConfig.mobileSidebarHeight}px`})})),Js=t=>(0,_e.orderBy)(t,({props:{priority:i}})=>Number.isInteger(i)?i:-1,"desc"),Ys=a.createElement(Ko).type,Qs=({children:t,label:i="Menu",open:d,onClose:b})=>{const{sidebarConfig:T}=(0,a.useContext)(Er),W=Ii({sidebarConfig:T});return a.createElement(Tt.Ay,{anchor:"bottom",open:d,onClose:b,ModalProps:{BackdropProps:{classes:{root:W.marginMobileSidebar}}},classes:{root:W.marginMobileSidebar,paperAnchorBottom:W.overlay}},a.createElement(G.A,{className:W.overlayHeader},a.createElement(u.A,{variant:"h3"},i),a.createElement(A.A,{onClick:b,classes:{root:W.overlayHeaderClose}},a.createElement(r.A,null))),a.createElement(G.A,{component:"nav"},t))},Zs=t=>{const{sidebarConfig:i}=(0,a.useContext)(Er),{children:d}=t,b=Ii({sidebarConfig:i}),T=(0,Q.zy)(),[W,Z]=(0,a.useState)(-1);(0,a.useEffect)(()=>{Z(-1)},[T.pathname]);let ge=(0,l.OJ)(d,Me=>Me.getElements().filter(ut=>ut.type===Ys));if(d)ge.length?ge=Js(ge):ge.push(a.createElement(Ko,{key:"default_menu",icon:a.createElement(Kt.A,null)},d));else return null;const Se=W>=0&&!ge[W].props.to;return a.createElement(Ri,{value:{isOpen:!0,setOpen:()=>{}}},a.createElement(Si.Provider,{value:{selectedMenuItemIndex:W,setSelectedMenuItemIndex:Z}},a.createElement(Qs,{label:ge[W]&&ge[W].props.label,open:Se,onClose:()=>Z(-1)},ge[W]&&ge[W].props.children),a.createElement(yt.A,{className:b.root,"data-testid":"mobile-sidebar-root",component:"nav"},ge)))},Mi={getSidebarPinState(){let t;try{t=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!t},setSidebarPinState(t){return window.localStorage.setItem("sidebarPinState",JSON.stringify(t))}},Xs=(0,C.A)(t=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[t.breakpoints.up("sm")]:{paddingLeft:i=>i.isPinned?i.sidebarConfig.drawerWidthOpen:i.sidebarConfig.drawerWidthClosed},[t.breakpoints.down("xs")]:{paddingBottom:i=>i.sidebarConfig.mobileSidebarHeight},"@media print":{padding:"0px !important"}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),Li=(0,a.createContext)({content:{contentRef:void 0}});function el(t){const[i,d]=(0,a.useState)(()=>Mi.getSidebarPinState()),{sidebarConfig:b}=(0,a.useContext)(Er),T=(0,a.useRef)(null),W=(0,a.useMemo)(()=>({content:{contentRef:T}}),[T]);(0,a.useEffect)(()=>{Mi.setSidebarPinState(i)},[i]);const Z=(0,Ge.A)(Me=>Me.breakpoints.down("xs"),{noSsr:!0}),ge=()=>d(!i),Se=Xs({isPinned:i,sidebarConfig:b});return a.createElement(Hs,{value:{isPinned:i,toggleSidebarPinState:ge,isMobile:Z}},a.createElement(Li.Provider,{value:W},a.createElement(G.A,{className:Se.root},t.children)))}function zo(){const{content:t}=(0,a.useContext)(Li);return{focusContent:(0,a.useCallback)(()=>{var d,b;(b=(d=t==null?void 0:t.contentRef)==null?void 0:d.current)==null||b.focus()},[t]),contentRef:t==null?void 0:t.contentRef}}const xi=(0,C.A)(t=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:t.zIndex.appBar,background:t.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"@media print":{display:"none"}},drawerWidth:i=>({width:i.sidebarConfig.drawerWidthClosed}),drawerOpen:i=>({width:i.sidebarConfig.drawerWidthOpen,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),tl=t=>{const{sidebarConfig:i}=(0,a.useContext)(Er),{openDelayMs:d=i.defaultOpenDelayMs,closeDelayMs:b=i.defaultCloseDelayMs,disableExpandOnHover:T,children:W}=t,Z=xi({sidebarConfig:i}),ge=(0,Ge.A)(sa=>sa.breakpoints.down("md"),{noSsr:!0}),[Se,Me]=(0,a.useState)(0),ut=(0,a.useRef)(),{isPinned:Et,toggleSidebarPinState:on}=Oo(),Qt=()=>{Et||T||(ut.current&&(clearTimeout(ut.current),ut.current=void 0),Se!==2&&!ge&&(ut.current=window.setTimeout(()=>{ut.current=void 0,Me(2)},d),Me(1)))},vn=()=>{Et||T||(ut.current&&(clearTimeout(ut.current),ut.current=void 0),Se===1?Me(0):Se===2&&(ut.current=window.setTimeout(()=>{ut.current=void 0,Me(0)},b)))},na=Se===2&&!ge||Et,zn=sa=>{sa?(Me(2),on()):(Me(0),on())};return a.createElement("nav",{style:{},"aria-label":"sidebar nav"},a.createElement(al,null),a.createElement(Ri,{value:{isOpen:na,setOpen:zn}},a.createElement(G.A,{className:Z.root,"data-testid":"sidebar-root",onMouseEnter:T?()=>{}:Qt,onFocus:T?()=>{}:Qt,onMouseLeave:T?()=>{}:vn,onBlur:T?()=>{}:vn},a.createElement(G.A,{className:se()(Z.drawer,Z.drawerWidth,{[Z.drawerOpen]:na})},W))))},nl=t=>{var i,d;const b=zs((i=t.sidebarOptions)!=null?i:{}),T=js((d=t.submenuOptions)!=null?d:{}),{children:W,disableExpandOnHover:Z,openDelayMs:ge,closeDelayMs:Se}=t,{isMobile:Me}=Oo();return Me?a.createElement(Zs,null,W):a.createElement(Er.Provider,{value:{sidebarConfig:b,submenuConfig:T}},a.createElement(tl,{openDelayMs:ge,closeDelayMs:Se,disableExpandOnHover:Z},W))};function al(){const{sidebarConfig:t}=(0,a.useContext)(Er),{focusContent:i,contentRef:d}=zo(),b=xi({sidebarConfig:t});return d!=null&&d.current?a.createElement(le.A,{onClick:i,variant:"contained",className:se()(b.visuallyHidden)},"Skip to content"):null}function Ro(t,i,d=!1){const b=new URLSearchParams(i.search).toString(),T=$().parse(b),W=new URLSearchParams(t.search).toString(),Z=$().parse(W),ge=d?_e.isEqual:_e.isMatch;return(0,_e.isEqual)(i.pathname,t.pathname)&&ge(Z,T)}const rl=(0,C.A)(t=>{var i,d;return{item:{height:48,width:"100%","&:hover":{background:((i=t.palette.navigation.navItem)==null?void 0:i.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:t.palette.navigation.color,padding:t.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:t.palette.common.white},label:{margin:t.spacing(1.75),marginLeft:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((d=t.palette.navigation.navItem)==null?void 0:d.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor}},textContent:{color:t.palette.navigation.color,paddingLeft:t.spacing(4),paddingRight:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),ol=t=>{const{title:i,subtitle:d,to:b,icon:T,dropdownItems:W,exact:Z}=t,ge=rl(),{setIsHoveredOn:Se}=(0,a.useContext)(Fo),Me=()=>{Se(!1)},ut=(0,Q.x$)(b!=null?b:""),Et=(0,Q.zy)();let on=Ro(Et,ut,Z);const[Qt,vn]=(0,a.useState)(!1),na=()=>{vn(!Qt)};return W!==void 0?(W.some(zn=>{const sa=(0,H.o1)(zn.to);return on=Ro(Et,sa,Z),on}),a.createElement(G.A,{className:ge.itemContainer},a.createElement(ot.Ay,{title:i,enterDelay:500,enterNextDelay:500},a.createElement(le.A,{role:"button",onClick:na,onTouchStart:zn=>zn.stopPropagation(),className:se()(ge.item,on?ge.selected:void 0)},T&&a.createElement(T,{fontSize:"small"}),a.createElement(u.A,{variant:"subtitle1",component:"span",className:ge.label},i,a.createElement("br",null),d&&a.createElement(u.A,{variant:"caption",component:"span",className:ge.subtitle},d)),Qt?a.createElement(he.A,{className:ge.dropdownArrow}):a.createElement(Dn.A,{className:ge.dropdownArrow}))),W&&Qt&&a.createElement(G.A,{className:ge.dropdown},W.map((zn,sa)=>a.createElement(ot.Ay,{key:sa,title:zn.title,enterDelay:500,enterNextDelay:500},a.createElement(ma,{to:zn.to,underline:"none",className:ge.dropdownItem,onClick:Me,onTouchStart:Fa=>Fa.stopPropagation()},a.createElement(u.A,{component:"span",className:ge.textContent},zn.title))))))):a.createElement(G.A,{className:ge.itemContainer},a.createElement(ot.Ay,{title:i,enterDelay:500,enterNextDelay:500},a.createElement(ma,{to:b,underline:"none",className:se()(ge.item,on?ge.selected:void 0),onClick:Me,onTouchStart:zn=>zn.stopPropagation()},T&&a.createElement(T,{fontSize:"small"}),a.createElement(u.A,{variant:"subtitle1",component:"span",className:ge.label},i,a.createElement("br",null),d&&a.createElement(u.A,{variant:"caption",component:"span",className:ge.subtitle},d)))))},il=(0,C.A)(t=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:t.spacing(7)+1},drawer:i=>{var d,b;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[t.breakpoints.up("sm")]:{marginLeft:i.left,transition:t.transitions.create("margin-left",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(b=(d=t.palette.navigation.submenu)==null?void 0:d.background)!=null?b:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:i.submenuConfig.drawerWidthClosed,transitionDelay:`${i.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:i=>({width:i.submenuConfig.drawerWidthOpen,[t.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:t.spacing(3),left:0,top:0}}),title:{fontSize:t.typography.h5.fontSize,fontWeight:t.typography.fontWeightMedium,color:t.palette.common.white,padding:t.spacing(2.5),[t.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),Bi=t=>{const{isOpen:i}=Po(),{sidebarConfig:d,submenuConfig:b}=(0,a.useContext)(Er),T=i?d.drawerWidthOpen:d.drawerWidthClosed,W=il({left:T,submenuConfig:b}),{isHoveredOn:Z}=(0,a.useContext)(Fo),[ge,Se]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{Se(Z)},[Z]),a.createElement(G.A,{className:se()(W.drawer,{[W.drawerOpen]:ge})},a.createElement(u.A,{variant:"h5",component:"span",className:W.title},t.title),t.children)},sl=(0,C.A)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),ll=()=>{const t=sl();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},cl=(0,C.A)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),ul=()=>{const t=cl();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},dl=t=>(0,C.A)(i=>{var d,b,T,W;return{root:{color:i.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:t.drawerWidthClosed,justifyContent:"center"},open:{[i.breakpoints.up("sm")]:{width:t.drawerWidthOpen}},highlightable:{"&:hover":{background:(b=(d=i.palette.navigation.navItem)==null?void 0:d.hoverBackground)!=null?b:"#404040"}},highlighted:{background:(W=(T=i.palette.navigation.navItem)==null?void 0:T.hoverBackground)!=null?W:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:t.iconContainerWidth,marginRight:-i.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:i.typography.fontWeightBold,fontSize:i.typography.fontSize},searchFieldHTMLInput:{padding:i.spacing(2,0,2)},searchContainer:{width:t.drawerWidthOpen-t.iconContainerWidth},secondaryAction:{width:i.spacing(6),textAlign:"center",marginRight:i.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:i.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${t.selectedIndicatorWidth}px ${i.palette.navigation.indicator}`,color:i.palette.navigation.selectedColor},"&$closed":{width:t.drawerWidthClosed},"& $closedItemIcon":{paddingRight:t.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-t.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function So(t){return(0,a.useMemo)(()=>dl(t),[t])()}const ml=(t,i)=>(0,l.OJ)(t.props.children,d=>{let b=!1;return d.getElements().forEach(({props:{to:T,dropdownItems:W}})=>{if(!b){if(W!=null&&W.length){W.forEach(({to:Z})=>b=b||Ro(i,(0,H.o1)(Z)));return}T&&(b=Ro(i,(0,H.o1)(T)))}}),b},[i.pathname]);function jo(t){return t.to===void 0}const pl=a.createElement(Bi).type,hl=a.forwardRef(function({to:i,end:d,style:b,className:T,activeStyle:W,caseSensitive:Z,activeClassName:ge="active","aria-current":Se="page",...Me},ut){let{pathname:Et}=(0,Q.zy)(),{pathname:on}=(0,Q.x$)(i);Z||(Et=Et.toLocaleLowerCase("en-US"),on=on.toLocaleLowerCase("en-US"));let Qt=Et===on;!Qt&&!d&&(Qt=Et.startsWith(`${on}/`));const vn=Qt?Se:void 0;return a.createElement(g.N_,{...Me,to:i,ref:ut,"aria-current":vn,style:{...b,...Qt?W:void 0},className:se()([typeof T!="function"?T:void 0,Qt?ge:void 0])})}),Ui=(0,a.forwardRef)((t,i)=>{const{icon:d,text:b,hasNotifications:T=!1,hasSubmenu:W=!1,disableHighlight:Z=!1,onClick:ge,noTrack:Se,children:Me,className:ut,...Et}=t,{sidebarConfig:on}=(0,a.useContext)(Er),Qt=So(on),{isOpen:vn}=Po(),na=!vn&&W?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},zn=a.createElement(G.A,{style:na},a.createElement(d,{fontSize:"small"}),!vn&&W?a.createElement(At.A,{fontSize:"small"}):a.createElement(a.Fragment,null)),sa=a.createElement(Ve.A,{color:"secondary",variant:"dot",overlap:"circular",invisible:!T,className:se()({[Qt.closedItemIcon]:!vn})},zn),Fa=a.createElement(a.Fragment,null,a.createElement(G.A,{"data-testid":"login-button",className:Qt.iconContainer},sa),b&&a.createElement(u.A,{variant:"subtitle2",component:"span",className:Qt.label},b),a.createElement("div",{className:Qt.secondaryAction},Me)),tr=vn?Fa:sa,Qn={onClick:ge,className:se()(ut,Qt.root,vn?Qt.open:Qt.closed,jo(t)&&Qt.buttonItem,{[Qt.highlightable]:!Z})},Ba=(0,l.st)(),{pathname:Ka}=(0,Q.x$)(!jo(t)&&t.to?t.to:""),nr=(0,a.useCallback)(Or=>{if(!Se){const qr="click",Dr=b!=null?b:"Sidebar Item",$r=Ka?{attributes:{to:Ka}}:void 0;Ba.captureEvent(qr,Dr,$r)}ge==null||ge(Or)},[Ba,b,Ka,Se,ge]);return jo(t)?a.createElement(le.A,{role:"button","aria-label":b,...Qn,ref:i,onClick:nr},tr):a.createElement(hl,{...Qn,activeClassName:Qt.selected,to:t.to?t.to:"",ref:i,"aria-label":b||t.to,...Et,onClick:nr},tr)}),gl=({children:t,...i})=>{const{sidebarConfig:d}=(0,a.useContext)(Er),b=So(d),[T,W]=(0,a.useState)(!1),Z=(0,Q.zy)(),ge=ml(t,Z),Se=(0,Ge.A)(on=>on.breakpoints.down("sm")),Me=()=>{W(!0)},ut=()=>{W(!1)},Et=()=>Se?T?a.createElement(he.A,{fontSize:"small",className:b.submenuArrow}):a.createElement(Dn.A,{fontSize:"small",className:b.submenuArrow}):!T&&a.createElement(At.A,{fontSize:"small",className:b.submenuArrow});return a.createElement(Fo.Provider,{value:{isHoveredOn:T,setIsHoveredOn:W}},a.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:ut,onTouchStart:T?ut:Me,onMouseEnter:Me,className:se()(T&&b.highlighted)},a.createElement(Ui,{hasSubmenu:!0,className:ge?b.selected:"",...i},Et()),T&&t))},$i=(0,a.forwardRef)((t,i)=>{const[d]=(0,l.OJ)(t.children,b=>b.getElements().filter(T=>T.type===pl));return d?a.createElement(gl,{...t},d):a.createElement(Ui,{...t,ref:i})});function _c(t){const{sidebarConfig:i}=useContext(Er),[d,b]=useState(""),T=So(i),W=t.icon?t.icon:SearchIcon,Z=()=>{t.onSearch(d),b("")},ge=Et=>{Et.key==="Enter"&&(Et.preventDefault(),Z())},Se=Et=>{b(Et.target.value)},Me=Et=>{Et.preventDefault(),Et.stopPropagation()},ut=Et=>{Z(),Et.preventDefault()};return React.createElement(Box,{className:T.searchRoot},React.createElement($i,{icon:W,to:t.to,onClick:ut,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:d,onClick:Me,onChange:Se,onKeyDown:ge,className:T.searchContainer,InputProps:{disableUnderline:!0,className:T.searchField},inputProps:{className:T.searchFieldHTMLInput}})))}const fl=(0,f.A)("div")({flex:1},{name:"BackstageSidebarSpace"}),Ac=(0,f.A)("div")({height:8},{name:"BackstageSidebarSpacer"}),El=(0,f.A)("hr")(({theme:t})=>({height:1,width:"100%",background:"#383838",border:"none",margin:t.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),vl=t=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:t.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:t.palette.text.secondary,borderRadius:"5px"}}),yl=(0,f.A)("div")(({theme:t})=>{const i=vl(t);return{flex:"0 1 auto",overflowX:"hidden",width:"calc(100% - 5px)",minHeight:"48px",overflowY:"hidden","@media (hover: none)":i,"&:hover":i}}),bc=()=>{const{sidebarConfig:t}=useContext(Er),i=So(t),{isOpen:d,setOpen:b}=Po();if(useMediaQuery(Z=>Z.breakpoints.down("md"),{noSsr:!0}))return null;const W=()=>{b(!d)};return React.createElement(Button$1,{role:"button",onClick:W,className:i.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:i.arrows},d?React.createElement(ll,null):React.createElement(ul,null)))},_l=(0,C.A)(t=>({header:{gridArea:"pageHeader",padding:t.spacing(3),width:"100%",boxShadow:t.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:t.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[t.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:t.page.fontColor,wordBreak:"break-word",fontSize:t.typography.h3.fontSize,marginBottom:0},subtitle:{color:t.page.fontColor,opacity:.8,display:"inline-block",marginTop:t.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:t.spacing(1),color:t.page.fontColor},breadcrumb:{color:t.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-t.spacing(.3),marginBottom:t.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-t.spacing(.3),marginBottom:t.spacing(.3)}}),{name:"BackstageHeader"}),Al=({type:t,typeLink:i,classes:d,pageTitle:b})=>t?i?a.createElement(yi,{className:d.breadcrumb},a.createElement(ma,{to:i},t),a.createElement(u.A,null,b)):a.createElement(u.A,{className:d.type},t):null,bl=({pageTitle:t,classes:i,tooltip:d})=>{const{contentRef:b}=zo(),T=a.createElement(u.A,{ref:b,tabIndex:-1,className:i.title,variant:"h1"},t);return d?a.createElement(ot.Ay,{title:d,placement:"top-start"},T):T},Cl=({classes:t,subtitle:i})=>i?typeof i!="string"?a.createElement(a.Fragment,null,i):a.createElement(u.A,{className:t.subtitle,variant:"subtitle2",component:"span"},i):null;function To(t){const{children:i,pageTitleOverride:d,style:b,subtitle:T,title:W,tooltip:Z,type:ge,typeLink:Se}=t,Me=_l(),Et=(0,o.u)(o.p).getOptionalString("app.title")||"Backstage",on=d||W,Qt=W||d,vn=`${on} | %s | ${Et}`,na=`${on} | ${Et}`;return a.createElement(a.Fragment,null,a.createElement(xe.m,{titleTemplate:vn,defaultTitle:na}),a.createElement("header",{style:b,className:Me.header},a.createElement(G.A,{className:Me.leftItemsBox},a.createElement(Al,{classes:Me,type:ge,typeLink:Se,pageTitle:Qt}),a.createElement(bl,{classes:Me,pageTitle:Qt,tooltip:Z}),a.createElement(Cl,{classes:Me,subtitle:T})),a.createElement(S.A,{container:!0,className:Me.rightItemsBox,spacing:4},i)))}const Pl=({label:t,secondaryLabel:i,icon:d,disabled:b=!1,onClick:T})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:b,button:!0,onClick:W=>{T&&T(W)}},d&&React.createElement(ListItemIcon,null,d),React.createElement(ListItemText,{primary:t,secondary:i})));function Cc(t){const{palette:{common:{white:i}}}=useTheme(),{actionItems:d}=t,[b,T]=React.useState(!1),W=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>T(!0),"data-testid":"header-action-menu",ref:W,style:{color:i,height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:b,anchorEl:W.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>T(!1)},React.createElement(List,null,d.map((Z,ge)=>React.createElement(Pl,{key:`header-action-menu-${ge}`,...Z})))))}const Ol=(0,C.A)(t=>({root:{textAlign:"left"},label:{color:t.page.fontColor,fontWeight:t.typography.fontWeightBold,letterSpacing:0,fontSize:t.typography.fontSize,marginBottom:t.spacing(1)/2,lineHeight:1},value:{color:(0,R.X4)(t.page.fontColor,.8),fontSize:t.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),Rl=({value:t,className:i,typographyRootComponent:d})=>a.createElement(u.A,{component:d!=null?d:typeof t=="string"?"p":"span",className:i},t);function Sl(t){const{label:i,value:d,url:b,contentTypograpyRootComponent:T}=t,W=Ol(),Z=a.createElement(Rl,{className:W.value,value:d||"<Unknown>",typographyRootComponent:T});return a.createElement(S.A,{item:!0},a.createElement(u.A,{component:"span",className:W.root},a.createElement(u.A,{className:W.label},i),b?a.createElement(ma,{to:b},Z):Z))}const Tl=t=>(0,w.A)({root:{color:t.palette.common.white,padding:t.spacing(2,2,3),backgroundImage:t.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),Dl=(0,C.A)(Tl,{name:"BackstageItemCardHeader"});function Wi(t){const{title:i,subtitle:d,children:b}=t,T=Dl(t);return a.createElement(G.A,{className:T.root},d&&a.createElement(u.A,{variant:"subtitle2",component:"h3"},d),i&&a.createElement(u.A,{variant:"h6",component:"h4"},i),b)}function Pc(t){const{description:i,tags:d,title:b,type:T,subtitle:W,label:Z,onClick:ge,href:Se}=t;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(Wi,{title:b,subtitle:W||T})),React.createElement(CardContent,null,d!=null&&d.length?React.createElement(Box,null,d.map((Me,ut)=>React.createElement(Chip,{size:"small",label:Me,key:ut}))):null,i),React.createElement(CardActions,null,!Se&&React.createElement(Za,{to:"#",onClick:ge,color:"primary"},Z),Se&&React.createElement(Za,{to:Se,color:"primary"},Z)))}const wl=t=>(0,w.A)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:t.spacing(2)}}),Il=(0,C.A)(wl,{name:"BackstageItemCardGrid"});function Ml(t){const{children:i,...d}=t,b=Il(d);return a.createElement(G.A,{className:b.root,...d},i)}const Ll=(0,C.A)(t=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[t.breakpoints.down("xs")]:{height:"100%"},"@media print":{display:"block",height:"auto",overflowY:"inherit"}}}),{name:"BackstagePage"});function Do(t){const{themeId:i,children:d}=t,b=Ll();return a.createElement(E.A,{theme:T=>({...T,page:T.getPageTheme({themeId:i})})},a.createElement("main",{className:b.root},d))}function xl(t){const{themeId:i,children:d,...b}=t;return a.createElement(Do,{themeId:i},a.createElement(To,{...b}),d)}const Bl=Pt.z.object({providerInfo:Pt.z.object({}).catchall(Pt.z.unknown()).optional(),profile:Pt.z.object({email:Pt.z.string().optional(),displayName:Pt.z.string().optional(),picture:Pt.z.string().optional()}),backstageIdentity:Pt.z.object({token:Pt.z.string(),identity:Pt.z.object({type:Pt.z.literal("user"),userEntityRef:Pt.z.string(),ownershipEntityRefs:Pt.z.array(Pt.z.string())})})});var Ul=Object.defineProperty,$l=(t,i,d)=>i in t?Ul(t,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):t[i]=d,Ho=(t,i,d)=>($l(t,typeof i!="symbol"?i+"":i,d),d);const ki={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function Wl(t){const i=new Date(Date.now()+ki.defaultTokenExpiryMillis);if(!t)return i;const[d,b,T]=t.split("."),W=JSON.parse(window.atob(b));return typeof W.exp!="number"?i:new Date(W.exp*1e3-ki.tokenExpiryMarginMillis)}class kl{constructor(i){Ho(this,"options"),Ho(this,"abortController"),Ho(this,"state"),this.options=i,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:i}=this.getSessionSync(),d=i.identity.userEntityRef,b=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(d);if(!b)throw new TypeError(`Invalid user entity reference "${d}"`);return b[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const i=this.state.type==="active"?this.state.session:void 0,d=this.fetchSession().then(b=>(this.state={type:"active",session:b,expiresAt:Wl(b.backstageIdentity.token)},b),b=>{throw this.state={type:"failed",error:b},b});return this.state={type:"fetching",promise:d,previous:i},d}async fetchSession(){const i=await this.options.discoveryApi.getBaseUrl("auth"),d=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,b=new Headers(d);b.set("X-Requested-With","XMLHttpRequest");const T=await fetch(`${i}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:b,credentials:"include"});if(!T.ok)throw await ResponseError.fromResponse(T);return Bl.parse(await T.json())}}const Oc=t=>{const i=useApi(discoveryApiRef),[{status:d,error:b},{execute:T}]=useAsync(async()=>{const W=new kl({provider:t.provider,discoveryApi:i,headers:t.headers});await W.start(),t.onSignInSuccess(W)});return useMountEffect(T),d==="loading"?React.createElement(Tn,null):b?React.createElement(ir,{title:"You do not appear to be signed in. Please try reloading the browser page.",error:b}):null};class Vo{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const i="user:default/guest";return{type:"user",userEntityRef:i,ownershipEntityRefs:[i]}}async getCredentials(){return{}}async signOut(){}}function Nl(t){const[i,d,b]=t.split(".");return JSON.parse(window.atob(d))}class Go{constructor(i){this.result=i}getUserId(){return this.result.userId}static fromResult(i){return new Go(i)}async getIdToken(){var i,d;return(d=(i=this.result).getIdToken)==null?void 0:d.call(i)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const i=await this.getIdToken();if(!i){const T=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:T,ownershipEntityRefs:[T]}}const{sub:d,ent:b}=Nl(i);return{type:"user",userEntityRef:d,ownershipEntityRefs:b!=null?b:[]}}async getCredentials(){var i,d;return{token:await((d=(i=this.result).getIdToken)==null?void 0:d.call(i))}}async signOut(){var i,d;return(d=(i=this.result).signOut)==null?void 0:d.call(i)}}var Fl=Object.defineProperty,Kl=(t,i,d)=>i in t?Fl(t,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):t[i]=d,zl=(t,i,d)=>(Kl(t,typeof i!="symbol"?i+"":i,d),d);class Zr{constructor(i,d,b){this.identity=i,this.authApi=d,this.profile=b,zl(this,"profilePromise")}static createGuest(){return new Vo}static fromLegacy(i){return Go.fromResult(i)}static create(i){return new Zr(i.identity,i.authApi,i.profile)}getUserId(){const i=this.identity.userEntityRef,d=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(i);if(!d)throw new TypeError(`Invalid user entity reference "${i}"`);return d[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(i){throw this.profilePromise=void 0,i}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const Jo=(0,C.A)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),wo=({children:t})=>{const i=Jo();return a.createElement(S.A,{component:"li",item:!0,classes:i},t)},jl={Component:({config:t,onSignInStarted:i,onSignInSuccess:d,onSignInFailure:b})=>{const{apiRef:T,title:W,message:Z}=t,ge=(0,o.u)(T),Se=(0,o.u)(o.r),Me=async()=>{try{i();const ut=await ge.getBackstageIdentity({instantPopup:!0});if(!ut)throw b(),new Error(`The ${W} provider is not configured to support sign-in`);const Et=await ge.getProfile();d(Zr.create({identity:ut.identity,profile:Et,authApi:ge}))}catch(ut){b(),Se.post(new jt.HK("Login failed",ut))}};return a.createElement(wo,null,a.createElement(ga,{variant:"fullHeight",title:W,actions:a.createElement(le.A,{color:"primary",variant:"outlined",onClick:Me},"Sign In")},a.createElement(u.A,{variant:"body1"},Z)))},loader:async(t,i)=>{const d=t.get(i),b=await d.getBackstageIdentity({optional:!0});if(!b)return;const T=await d.getProfile();return Zr.create({identity:b.identity,profile:T,authApi:d})}},Hl={Component:({onSignInStarted:t,onSignInSuccess:i})=>a.createElement(wo,null,a.createElement(ga,{title:"Guest",variant:"fullHeight",actions:a.createElement(le.A,{color:"primary",variant:"outlined",onClick:()=>{t(),i(new Vo)}},"Enter")},a.createElement(u.A,{variant:"body1"},"Enter as a Guest User.",a.createElement("br",null),"You will not have a verified identity,",a.createElement("br",null),"meaning some features might be unavailable."))),loader:async()=>new Vo},Vl=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,Gl=(0,C.A)(t=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:t.spacing(2)}}),{name:"BackstageCustomProvider"}),Ni=t=>{const{ref:i,...d}=t;return{inputRef:i,...d}},Jl={Component:({onSignInStarted:t,onSignInSuccess:i})=>{const d=Gl(),{register:b,handleSubmit:T,formState:W}=(0,tn.mN)({mode:"onChange"}),{errors:Z}=W,ge=({userId:Se,idToken:Me})=>{t(),i(Zr.fromLegacy({userId:Se,getIdToken:Me!==void 0?async()=>Me:void 0,profile:{email:`${Se}@example.com`}}))};return a.createElement(wo,null,a.createElement(ga,{title:"Custom User",variant:"fullHeight"},a.createElement(u.A,{variant:"body1"},"Enter your own User ID and credentials.",a.createElement("br",null),"This selection will not be stored."),a.createElement("form",{className:d.form,onSubmit:T(ge)},a.createElement(sn.A,null,a.createElement(Be.A,{...Ni(b("userId",{required:!0})),label:"User ID",margin:"normal",error:!!Z.userId}),Z.userId&&a.createElement(Ct.A,{error:!0},Z.userId.message)),a.createElement(sn.A,null,a.createElement(Be.A,{...Ni(b("idToken",{required:!1,validate:Se=>!Se||Vl.test(Se)||"Token is not a valid OpenID Connect JWT Token"})),label:"ID Token (optional)",margin:"normal",autoComplete:"off",error:!!Z.idToken}),Z.idToken&&a.createElement(Ct.A,{error:!0},Z.idToken.message)),a.createElement(le.A,{type:"submit",color:"primary",variant:"outlined",className:d.button,disabled:!(W!=null&&W.isDirty)||!gn()(Z)},"Continue"))))},loader:async()=>{}};class Yo{constructor(i){this.config=i}static from(i){return new Yo(i)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const Xr="@backstage/core:SignInPage:provider",Fi={guest:Hl,custom:Jl,common:jl};function Ki(t,i){if(t in i)throw new Error(`"${t}" ID is duplicated. IDs of identity providers have to be unique.`)}function Yl(t){return t.reduce((d,b)=>{if(typeof b=="string")return Ki(b,d),d[b]={components:Fi[b],id:b},d;const{id:T}=b;return Ki(T,d),d[T]={components:Fi.common,id:T,config:b},d},{})}const Ql=(t,i)=>{const d=useApi(errorApiRef),b=useApiHolder(),[T,W]=useState(!0),Z=useCallback(Se=>{i(Yo.from({identityApi:Se,signOut:async()=>{var Me;localStorage.removeItem(Xr),await((Me=Se.signOut)==null?void 0:Me.call(Se))}}))},[i]);useLayoutEffect(()=>{var Se;if(!T)return;const Me=localStorage.getItem(Xr);if(Me===null){W(!1);return}const ut=t[Me];if(!ut){W(!1);return}let Et=!1;return ut.components.loader(b,(Se=ut.config)==null?void 0:Se.apiRef).then(on=>{if(Et){localStorage.removeItem(Xr);return}on?Z(on):W(!1)}).catch(on=>{localStorage.removeItem(Xr),!Et&&(d.post(on),W(!1))}),()=>{Et=!0}},[T,d,i,b,t,Z]);const ge=useMemo(()=>Object.keys(t).map(Se=>{const Me=t[Se],{Component:ut}=Me.components,Et=vn=>{Z(vn)},on=()=>{var vn;localStorage.setItem(Xr,((vn=Me==null?void 0:Me.config)==null?void 0:vn.id)||Me.id)},Qt=()=>{localStorage.removeItem(Xr)};return React.createElement(ut,{key:Me.id,config:Me.config,onSignInStarted:on,onSignInSuccess:Et,onSignInFailure:Qt})}),[t,Z]);return[T,ge]},Zl=({onSignInSuccess:t,providers:i=[],title:d,align:b="left"})=>{const T=useApi(configApiRef),W=Jo(),Z=Yl(i),[ge,Se]=Ql(Z,t);return ge?React.createElement(Tn,null):React.createElement(Do,{themeId:"home"},React.createElement(To,{title:T.getString("app.title")}),React.createElement(bo,null,d&&React.createElement(vi,{title:d,textAlign:b}),React.createElement(Grid,{container:!0,justifyContent:b==="center"?b:"flex-start",spacing:2,component:"ul",classes:W},Se)))},Xl=({provider:t,auto:i,onSignInSuccess:d})=>{const b=Jo(),T=useApi(t.apiRef),W=useApi(configApiRef),[Z,ge]=useState(),[Se,Me]=useState(!1),ut=async({checkExisting:Et,showPopup:on})=>{try{let Qt;if(Et&&(Qt=await T.getBackstageIdentity({optional:!0})),!Qt&&(on||i)&&(Me(!0),Qt=await T.getBackstageIdentity({instantPopup:!0}),!Qt))throw new Error(`The ${t.title} provider is not configured to support sign-in`);if(!Qt){Me(!0);return}const vn=await T.getProfile();d(Zr.create({identity:Qt.identity,authApi:T,profile:vn}))}catch(Qt){ge(Qt),Me(!0)}};return useMountEffect(()=>ut({checkExisting:!0})),Se?React.createElement(Do,{themeId:"home"},React.createElement(To,{title:W.getString("app.title")}),React.createElement(bo,null,React.createElement(Grid,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:b},React.createElement(wo,null,React.createElement(ga,{variant:"fullHeight",title:t.title,actions:React.createElement(Button$1,{color:"primary",variant:"outlined",onClick:()=>{ut({showPopup:!0})}},"Sign In")},React.createElement(Typography,{variant:"body1"},t.message),Z&&Z.name!=="PopupRejectedError"&&React.createElement(Typography,{variant:"body1",color:"error"},Z.message)))))):React.createElement(Tn,null)};function Mc(t){return"provider"in t?React.createElement(Xl,{...t}):React.createElement(Zl,{...t})}const ql=(0,C.A)(t=>({root:{padding:t.spacing(0,2,0,2.5),minHeight:t.spacing(3)},indicator:{backgroundColor:t.palette.info.main,height:t.spacing(.3)}}),{name:"BackstageTabbedCard"}),ec=(0,p.A)(t=>({root:{padding:t.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:t.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(Dt.A);function tc(t){const{slackChannel:i,errorBoundaryProps:d,children:b,title:T,deepLink:W,value:Z,onChange:ge}=t,Se=ql(),[Me,ut]=(0,a.useState)(0),Et=ge||((vn,na)=>ut(na));let on;Z?a.Children.map(b,vn=>{a.isValidElement(vn)&&(vn==null?void 0:vn.props.value)===Z&&(on=vn==null?void 0:vn.props.children)}):a.Children.map(b,(vn,na)=>{a.isValidElement(vn)&&na===Me&&(on=vn==null?void 0:vn.props.children)});const Qt=d||(i?{slackChannel:i}:{});return a.createElement(lt.A,null,a.createElement(Kn,{...Qt},T&&a.createElement(ec,{title:T}),a.createElement(vt.A,{classes:Se,value:Z||Me,onChange:Et},b),a.createElement(xt.A,null),a.createElement(Vt.A,null,on),W&&a.createElement(ca,{...W})))}const nc=(0,C.A)(t=>({root:{minWidth:t.spacing(6),minHeight:t.spacing(3),margin:t.spacing(0,2,0,0),padding:t.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:t.palette.text.primary}},selected:{fontWeight:t.typography.fontWeightBold}}),{name:"BackstageCardTab"});function ac(t){const{children:i,...d}=t,b=nc();return a.createElement(ke.A,{disableRipple:!0,classes:b,...d})}},59294:(wn,wt,e)=>{"use strict";e.d(wt,{Jm:()=>C,h2:()=>Pe,ie:()=>p,pl:()=>ee});var o=e(14041),l=e(48821);function A(w){return{$$type:"@backstage/TranslationMessages",id:w.ref.id,full:!!w.full,messages:w.messages}}function B(w){return{$$type:"@backstage/TranslationResource",version:"v1",id:w.ref.id,resources:Object.entries(w.translations).map(([f,E])=>({language:f,loader:()=>E().then(F=>{const re=F.default;return{messages:(re==null?void 0:re.$$type)==="@backstage/TranslationMessages"?re.messages:re}})}))}}var u=Object.defineProperty,r=(w,f,E)=>f in w?u(w,f,{enumerable:!0,configurable:!0,writable:!0,value:E}):w[f]=E,Y=(w,f,E)=>(r(w,typeof f!="symbol"?f+"":f,E),E),ye=(w,f,E)=>{if(!f.has(w))throw TypeError("Cannot "+E)},ce=(w,f,E)=>(ye(w,f,"read from private field"),E?E.call(w):f.get(w)),a=(w,f,E)=>{if(f.has(w))throw TypeError("Cannot add the same private member more than once");f instanceof WeakSet?f.add(w):f.set(w,E)},fe=(w,f,E,F)=>(ye(w,f,"write to private field"),F?F.call(w,E):f.set(w,E),E),le,ie,oe;function ze(w){const f=new Array;function E(F,re){for(const[se,_e]of Object.entries(F))typeof _e=="string"?f.push([re+se,_e]):E(_e,`${re}${se}.`)}return E(w,""),Object.fromEntries(f)}class Le{constructor(f){a(this,le,void 0),a(this,ie,void 0),a(this,oe,void 0),Y(this,"$$type","@backstage/TranslationRef"),Y(this,"version","v1"),fe(this,le,f.id),fe(this,ie,ze(f.messages))}get id(){return ce(this,le)}get T(){throw new Error("Not implemented")}getDefaultMessages(){return ce(this,ie)}setDefaultResource(f){fe(this,oe,f)}getDefaultResource(){return ce(this,oe)}toString(){return`TranslationRef{id=${this.id}}`}}le=new WeakMap,ie=new WeakMap,oe=new WeakMap;function Pe(w){const f=new Le(w);return w.translations&&f.setDefaultResource(B({ref:f,translations:w.translations})),f}const C=(0,l.c)({id:"core.translation"}),ee=(0,l.c)({id:"core.applanguage"}),R=new WeakSet,p=w=>{const f=(0,l.u)(l.r),E=(0,l.u)(C),[F,re]=(0,o.useState)(()=>E.getTranslation(w)),se=(0,o.useMemo)(()=>E.translation$(w),[E,w]),_e=(0,o.useCallback)(g=>{if(!R.has(w)){const H=`Failed to load translation resource '${w.id}'; caused by ${g}`;console.error(H),f.post(new Error(H)),R.add(w)}},[f,w]);(0,o.useEffect)(()=>{const g=se.subscribe({next(H){H.ready&&re(H)},error(H){_e(H)}});return()=>{g.unsubscribe()}},[se,_e]);const Q=(0,o.useRef)(!0);if((0,o.useEffect)(()=>{Q.current?Q.current=!1:re(E.getTranslation(w))},[E,w]),!F.ready)throw new Promise(g=>{const H=se.subscribe({next(G){G.ready&&(H.unsubscribe(),g())},error(G){H.unsubscribe(),_e(G),g()}})});return{t:F.t}}},48821:(wn,wt,e)=>{"use strict";e.d(wt,{F:()=>re,S:()=>ce,a:()=>p,b:()=>B,c:()=>ye,d:()=>fe,e:()=>ie,f:()=>se,g:()=>a,h:()=>ze,i:()=>Le,j:()=>Pe,k:()=>C,l:()=>R,m:()=>oe,n:()=>w,o:()=>le,p:()=>f,q:()=>E,r:()=>F,s:()=>_e,t:()=>Q,u:()=>u,v:()=>ee,x:()=>g,y:()=>H});var o=e(14041),l=e(97388),A=e(3399);function B(){const G=(0,l.qO)("api-context");if(!G)throw new A.EH("API context is not available");const Oe=G.atVersion(1);if(!Oe)throw new A.EH("ApiContext v1 not available");return Oe}function u(G){const ue=B().get(G);if(!ue)throw new A.EH(`No implementation available for ${G}`);return ue}function r(G){return function(ue){const it=pt=>{const nt=B(),Ge={};for(const De in G)if(G.hasOwnProperty(De)){const Ae=G[De],Ne=nt.get(Ae);if(!Ne)throw new NotImplementedError(`No implementation available for ${Ae}`);Ge[De]=Ne}return React.createElement(ue,{...pt,...Ge})},ot=ue.displayName||ue.name||"Component";return it.displayName=`withApis(${ot})`,it}}class Y{constructor(Oe){if(this.config=Oe,!Oe.id.split(".").flatMap(it=>it.split("-")).every(it=>it.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${Oe.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function ye(G){return new Y(G)}var ce=(G=>(G.SignedIn="SignedIn",G.SignedOut="SignedOut",G))(ce||{});const a=ye({id:"core.auth.google"}),fe=ye({id:"core.auth.github"}),le=ye({id:"core.auth.okta"}),ie=ye({id:"core.auth.gitlab"}),oe=ye({id:"core.auth.microsoft"}),ze=ye({id:"core.auth.onelogin"}),Le=ye({id:"core.auth.bitbucket"}),Pe=ye({id:"core.auth.bitbucket-server"}),C=ye({id:"core.auth.atlassian"}),ee=ye({id:"core.auth.vmware-cloud"}),R=ye({id:"core.alert"}),p=ye({id:"core.analytics"}),w=ye({id:"core.apptheme"}),f=ye({id:"core.config"}),E=ye({id:"core.discovery"}),F=ye({id:"core.error"});var re=(G=>(G[G.None=0]="None",G[G.Active=1]="Active",G))(re||{});const se=ye({id:"core.featureflags"}),_e=ye({id:"core.fetch"}),Q=ye({id:"core.identity"}),g=ye({id:"core.oauthrequest"}),H=ye({id:"core.storage"})},11638:(wn,wt,e)=>{"use strict";e.d(wt,{E0:()=>C,HM:()=>F,Ig:()=>Y,Il:()=>nt,KS:()=>De,NC:()=>Ue,OJ:()=>Wt,QJ:()=>X,Sf:()=>Ge,Vb:()=>G,bW:()=>ye,h3:()=>Pe,i1:()=>It,nm:()=>oe,st:()=>ie,zZ:()=>te});var o=e(97388),l=e(14041),A=e(48821),B=e(18690);const u=(0,o.tK)("analytics-context"),r=()=>{const O=(0,l.useContext)(u);if(O===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const S=O.atVersion(1);if(S===void 0)throw new Error("No context found for version 1.");return S},Y=O=>{const{attributes:S,children:K}=O,We={...r(),...S},qe=(0,o.Bl)({1:We});return l.createElement(u.Provider,{value:qe},K)};function ye(O,S){return"id"in O?{api:O,deps:{},factory:()=>S}:O}const ce=(0,o.Q6)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),a="_ROUTABLE-EXTENSION-RENDERED";class fe{constructor(S,K={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=S,this.context=K,ce.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{ce.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...ce.mostRecentGatheredNavigation,...ce.mostRecentRoutableExtensionRender}),ce.mostRecentGatheredNavigation=void 0,ce.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),ce.beforeUnloadRegistered=!0)}setContext(S){this.context=S}captureEvent(S,K,{value:ae,attributes:We}={}){const{_routeNodeType:qe,...gt}=this.context;if(S===a){ce.mostRecentGatheredNavigation&&(ce.mostRecentRoutableExtensionRender={context:{...gt,extension:"App"}});return}if(ce.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...ce.mostRecentGatheredNavigation,...ce.mostRecentRoutableExtensionRender})}catch(_t){console.warn("Error during analytics event capture. %o",_t)}ce.mostRecentGatheredNavigation=void 0,ce.mostRecentRoutableExtensionRender=void 0}if(S==="navigate"&&qe==="gathered"&&gt.pluginId==="root"){ce.mostRecentGatheredNavigation={action:S,subject:K,value:ae,attributes:We,context:gt};return}try{this.analyticsApi.captureEvent({action:S,subject:K,value:ae,attributes:We,context:gt})}catch(_t){console.warn("Error during analytics event capture. %o",_t)}}}function le(){try{return(0,A.u)(A.a)}catch{return{captureEvent:()=>{}}}}function ie(){const O=(0,l.useRef)(null),S=r(),K=le();function ae(){return O.current===null&&(O.current=new fe(K)),O.current}const We=ae();return We.setContext(S),We}const oe=()=>{const O=(0,o.qO)("app-context");if(!O)throw new Error("App context is not available");const S=O.atVersion(1);if(!S)throw new Error("AppContext v1 not available");return S},ze=(0,o.Q6)("component-data-store",()=>new WeakMap),Le="__backstage_data";function Pe(O,S,K){var ae;const We=O;let qe=(ae=We[Le])!=null?ae:ze.get(O);if(qe||(qe={map:new Map},Object.defineProperty(We,Le,{enumerable:!1,configurable:!0,writable:!1,value:qe}),ze.set(O,qe)),qe.map.has(S)){const gt=O.displayName||O.name;throw new Error(`Attempted to attach duplicate data "${S}" to component "${gt}"`)}qe.map.set(S,K)}function C(O,S){var K;if(!O)return;const ae=O.type;if(!ae)return;const We=(K=ae[Le])!=null?K:ze.get(ae);if(We)return We.map.get(S)}const ee=(0,o.Q6)("route-ref-type",()=>Symbol("route-ref-type"));var R=Object.defineProperty,p=(O,S,K)=>S in O?R(O,S,{enumerable:!0,configurable:!0,writable:!0,value:K}):O[S]=K,w=(O,S,K)=>(p(O,typeof S!="symbol"?S+"":S,K),K),f;class E{constructor(S,K){this.id=S,this.params=K,w(this,f,"absolute")}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}f=ee;function F(O){var S;return new E(O.id,(S=O.params)!=null?S:[])}var re=Object.defineProperty,se=(O,S,K)=>S in O?re(O,S,{enumerable:!0,configurable:!0,writable:!0,value:K}):O[S]=K,_e=(O,S,K)=>(se(O,typeof S!="symbol"?S+"":S,K),K),Q;const g=/^\w+$/;class H{constructor(S,K,ae,We){this.id=S,this.path=K,this.parent=ae,this.params=We,_e(this,Q,"sub")}toString(){return`routeRef{type=sub,id=${this.id}}`}}Q=ee;function G(O){const{id:S,path:K,parent:ae}=O,We=K.split("/").filter(_t=>_t.startsWith(":")).map(_t=>_t.substring(1)),qe=[...ae.params,...We];if(ae.params.some(_t=>We.includes(_t)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!K.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${K}'`);if(K.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${K}'`);for(const _t of We)if(!g.test(_t))throw new Error(`SubRouteRef path has invalid param, got '${_t}'`);return new H(S,K,ae,qe)}var Oe=Object.defineProperty,ue=(O,S,K)=>S in O?Oe(O,S,{enumerable:!0,configurable:!0,writable:!0,value:K}):O[S]=K,it=(O,S,K)=>(ue(O,typeof S!="symbol"?S+"":S,K),K),ot;class pt{constructor(S,K,ae){this.id=S,this.params=K,this.optional=ae,it(this,ot,"external")}toString(){return`routeRef{type=external,id=${this.id}}`}}ot=ee;function nt(O){var S;return new pt(O.id,(S=O.params)!=null?S:[],!!O.optional)}function Ge(O){const{pathname:S}=(0,B.zy)(),K=(0,o.qO)("routing-context");if(!K)throw new Error("Routing context is not available");const ae=K.atVersion(1),We=(0,l.useMemo)(()=>ae&&ae.resolve(O,{pathname:S}),[ae,O,S]);if(!K)throw new Error("useRouteRef used outside of routing context");if(!ae)throw new Error("RoutingContext v1 not available");const qe="optional"in O&&O.optional;if(!We&&!qe)throw new Error(`No path for ${O}`);return We}function De(O){return(0,B.g)()}var Ae=Object.defineProperty,Ne=(O,S,K)=>S in O?Ae(O,S,{enumerable:!0,configurable:!0,writable:!0,value:K}):O[S]=K,ne=(O,S,K)=>(Ne(O,typeof S!="symbol"?S+"":S,K),K);class N extends l.Component{constructor(){super(...arguments),ne(this,"state",{error:void 0}),ne(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(S){return{error:S}}render(){const{error:S}=this.state,{app:K,plugin:ae}=this.props,{ErrorBoundaryFallback:We}=K.getComponents();return S?l.createElement(We,{error:S,resetError:this.handleErrorReset,plugin:ae}):this.props.children}}function X(O){const{component:S,mountPoint:K,name:ae}=O;return te({component:{lazy:()=>S().then(We=>{const qe=_t=>{const st=ie();try{Ge(K)}catch(Zt){if(typeof Zt=="object"&&Zt!==null){const{message:at}=Zt;if(typeof at=="string"&&at.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${K} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw Zt}return(0,l.useEffect)(()=>{st.captureEvent(a,"")},[st]),l.createElement(We,{..._t})},gt=ae||We.displayName||We.name||"LazyComponent";return qe.displayName=`RoutableExtension(${gt})`,qe},We=>gt=>{const _t=oe(),{BootErrorPage:st}=_t.getComponents();return l.createElement(st,{step:"load-chunk",error:We})})},data:{"core.mountPoint":K},name:ae})}function Ue(O){const{component:S,name:K}=O;return te({component:S,name:K})}function te(O){const{data:S={},name:K}=O;K||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let ae;if("lazy"in O.component){const qe=O.component.lazy;ae=(0,l.lazy)(()=>qe().then(gt=>({default:gt})))}else ae=O.component.sync;const We=K||ae.displayName||ae.name||"Component";return{expose(qe){const gt=_t=>{const st=oe(),{Progress:Zt}=st.getComponents(),at=S==null?void 0:S["core.mountPoint"];return l.createElement(l.Suspense,{fallback:l.createElement(Zt,null)},l.createElement(N,{app:st,plugin:qe},l.createElement(Y,{attributes:{pluginId:qe.getId(),...K&&{extension:K},...at&&{routeRef:at.id}}},l.createElement(ae,{..._t}))))};Pe(gt,"core.plugin",qe),Pe(gt,"core.extensionName",K);for(const[_t,st]of Object.entries(S))Pe(gt,_t,st);return gt.displayName=`Extension(${We})`,gt}}}function we(O,S,K,ae){return l.Children.toArray(O).flatMap(We=>{if(!(0,l.isValidElement)(We))return[];if(We.type===l.Fragment)return we(We.props.children,S,K,ae);if(C(We,"core.featureFlagged")){const qe=We.props;return("with"in qe?S.isActive(qe.with):!S.isActive(qe.without))?we(We.props.children,S,K,ae):[]}if(K===void 0||K(We))return[We];if(ae)throw new Error(ae);return we(We.props.children,S,K,ae)})}class ht{constructor(S,K){this.node=S,this.featureFlagsApi=K}selectByComponentData(S){const K=we(this.node,this.featureFlagsApi,ae=>C(ae,S.key)!==void 0,S.withStrictError);return new ht(K,this.featureFlagsApi)}findComponentData(S){return we(this.node,this.featureFlagsApi,ae=>C(ae,S.key)!==void 0).map(ae=>C(ae,S.key)).filter(ae=>ae!==void 0)}getElements(){return we(this.node,this.featureFlagsApi)}}function Wt(O,S,K=[]){const ae=(0,A.u)(A.f),We=new ht(O,ae);return(0,l.useMemo)(()=>S(We),[O,...K])}class bt{constructor(S){this.config=S}getId(){return this.config.id}getApis(){var S;return(S=this.config.apis)!=null?S:[]}getFeatureFlags(){var S,K;return(K=(S=this.config.featureFlags)==null?void 0:S.slice())!=null?K:[]}get routes(){var S;return(S=this.config.routes)!=null?S:{}}get externalRoutes(){var S;return(S=this.config.externalRoutes)!=null?S:{}}provide(S){return S.expose(this)}toString(){return`plugin{${this.config.id}}`}}function It(O){return new bt(O)}},3399:(wn,wt,e)=>{"use strict";e.d(wt,{EH:()=>p,HK:()=>f,bJ:()=>A,m_:()=>C,o3:()=>_e,tX:()=>B});var o=e(69655),l=e.n(o);function A(Q){if(typeof Q!="object"||Q===null||Array.isArray(Q))return!1;const g=Q;return!(typeof g.name!="string"||g.name===""||typeof g.message!="string")}function B(Q){if(typeof Q!="object"||Q===null||Array.isArray(Q))throw new Error(`Encountered invalid error, not an object, got '${Q}'`);const g=Q;if(typeof g.name!="string"||g.name==="")throw new Error(`Encountered error object without a name, got '${Q}'`);if(typeof g.message!="string")throw new Error(`Encountered error object without a message, got '${Q}'`)}function u(Q,g){const G={name:"Unknown",message:"<no reason given>",...serializeError$1(Q)};return g!=null&&g.includeStack||delete G.stack,G}function r(Q){const g=(0,o.deserializeError)(Q);return Q.stack||(g.stack=void 0),g}function Y(Q){if(A(Q)){const g=String(Q);return g!=="[object Object]"?g:`${Q.name}: ${Q.message}`}return`unknown error '${Q}'`}var ye=Object.defineProperty,ce=(Q,g,H)=>g in Q?ye(Q,g,{enumerable:!0,configurable:!0,writable:!0,value:H}):Q[g]=H,a=(Q,g,H)=>(ce(Q,typeof g!="symbol"?g+"":g,H),H);class fe extends Error{constructor(g,H){var G;let Oe=g;if(H!==void 0){const ue=Y(H);Oe?Oe+=`; caused by ${ue}`:Oe=`caused by ${ue}`}super(Oe),a(this,"cause"),(G=Error.captureStackTrace)==null||G.call(Error,this,this.constructor),(!this.name||this.name==="Error")&&this.constructor.name!=="Error"&&(this.name=this.constructor.name),this.cause=A(H)?H:void 0}}var le=Object.defineProperty,ie=(Q,g,H)=>g in Q?le(Q,g,{enumerable:!0,configurable:!0,writable:!0,value:H}):Q[g]=H,oe=(Q,g,H)=>(ie(Q,typeof g!="symbol"?g+"":g,H),H);class ze extends fe{constructor(){super(...arguments),oe(this,"name","InputError")}}class Le extends fe{constructor(){super(...arguments),oe(this,"name","AuthenticationError")}}class Pe extends fe{constructor(){super(...arguments),oe(this,"name","NotAllowedError")}}class C extends fe{constructor(){super(...arguments),oe(this,"name","NotFoundError")}}class ee extends fe{constructor(){super(...arguments),oe(this,"name","ConflictError")}}class R extends fe{constructor(){super(...arguments),oe(this,"name","NotModifiedError")}}class p extends fe{constructor(){super(...arguments),oe(this,"name","NotImplementedError")}}class w extends null{}class f extends fe{constructor(g,H){super(g,H),this.name=A(H)?H.name:"Error"}}async function E(Q){var g;try{const H=await Q.text();if(H){if((g=Q.headers.get("content-type"))!=null&&g.startsWith("application/json"))try{const G=JSON.parse(H);if(G.error&&G.response)return G}catch{}return{error:{name:"Error",message:`Request failed with status ${Q.status} ${Q.statusText}, ${H}`},response:{statusCode:Q.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${Q.status} ${Q.statusText}`},response:{statusCode:Q.status}}}var F=Object.defineProperty,re=(Q,g,H)=>g in Q?F(Q,g,{enumerable:!0,configurable:!0,writable:!0,value:H}):Q[g]=H,se=(Q,g,H)=>(re(Q,typeof g!="symbol"?g+"":g,H),H);class _e extends Error{constructor(g){super(g.message),se(this,"response"),se(this,"body"),se(this,"cause"),this.name="ResponseError",this.response=g.response,this.body=g.data,this.cause=g.cause}static async fromResponse(g){const H=await E(g),G=H.response.statusCode||g.status,Oe=H.error.name||g.statusText,ue=`Request failed with ${G} ${Oe}`,it=r(H.error);return new _e({message:ue,response:g,data:H,cause:it})}}},33478:(wn,wt,e)=>{"use strict";e.d(wt,{$J:()=>r,L7:()=>p,LS:()=>ee,YT:()=>R,gh:()=>C});var o=e(48821),l=e(11638),A=e(63188),B=e(13660),u=e(14041);const r=(0,o.c)({id:"core.scmauth"});var Y=(w,f,E)=>{if(!f.has(w))throw TypeError("Cannot "+E)},ye=(w,f,E)=>(Y(w,f,"read from private field"),E?E.call(w):f.get(w)),ce=(w,f,E)=>{if(f.has(w))throw TypeError("Cannot add the same private member more than once");f instanceof WeakSet?f.add(w):f.set(w,E)},a=(w,f,E,F)=>(Y(w,f,"write to private field"),F?F.call(w,E):f.set(w,E),E),fe,le,ie,oe,ze;class Le{constructor(f){ce(this,fe,void 0),a(this,fe,f)}async getCredentials(f){const E=new URL(f.url),F=ye(this,fe).find(re=>re.isUrlSupported(E));if(!F)throw new Error(`No auth provider available for '${f.url}', see https://backstage.io/link?scm-auth`);return F.getCredentials(f)}}fe=new WeakMap;const Pe=class br{constructor(f,E,F,re){ce(this,le,void 0),ce(this,ie,void 0),ce(this,oe,void 0),ce(this,ze,void 0),a(this,le,E),a(this,ie,F),a(this,oe,re),a(this,ze,f)}static createDefaultApiFactory(){return(0,l.bW)({api:r,deps:{github:o.d,gitlab:o.e,azure:o.m,bitbucket:o.i},factory:({github:f,gitlab:E,azure:F,bitbucket:re})=>br.merge(br.forGithub(f),br.forGitlab(E),br.forAzure(F),br.forBitbucket(re))})}static forAuthApi(f,E){return new br("generic",f,E.host,E.scopeMapping)}static forGithub(f,E){var F;const re=(F=E==null?void 0:E.host)!=null?F:"github.com";return new br("github",f,re,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(f,E){var F;const re=(F=E==null?void 0:E.host)!=null?F:"gitlab.com";return new br("gitlab",f,re,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(f,E){var F;const re=(F=E==null?void 0:E.host)!=null?F:"dev.azure.com";return new br("azure",f,re,{default:["vso.build","vso.code","vso.graph","vso.project","vso.profile"],repoWrite:["vso.code_manage"]})}static forBitbucket(f,E){var F;const re=(F=E==null?void 0:E.host)!=null?F:"bitbucket.org";return new br("bitbucket",f,re,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(...f){return new Le(f)}isUrlSupported(f){return f.host===ye(this,ie)}getAdditionalScopesForProvider(f){var E,F;return!(f!=null&&f.customScopes)||ye(this,ze)==="generic"?[]:(F=(E=f.customScopes)==null?void 0:E[ye(this,ze)])!=null?F:[]}async getCredentials(f){const{url:E,additionalScope:F,...re}=f,se=ye(this,oe).default.slice();F!=null&&F.repoWrite&&se.push(...ye(this,oe).repoWrite);const _e=this.getAdditionalScopesForProvider(F);_e.length&&se.push(..._e);const Q=[...new Set(se)],g=await ye(this,le).getAccessToken(Q,re);return{token:g,headers:{Authorization:`Bearer ${g}`}}}};le=new WeakMap,ie=new WeakMap,oe=new WeakMap,ze=new WeakMap;let C=Pe;class ee{static fromConfig(f){return A.b5.fromConfig(f)}}const R=(0,o.c)({id:"integration.scmintegrations"}),p=w=>{var f;const{type:E}=w,F=(0,l.nm)(),re=B.A,se=E&&(f=F.getSystemIcon(E))!=null?f:re;return u.createElement(se,null)}},63188:(wn,wt,e)=>{"use strict";e.d(wt,{B:()=>Ee,Fw:()=>ra,b5:()=>Ga,bm:()=>hn});var o=e(52536),l=e.n(o),A=e(45250),B=e.n(A),u=e(10288),r=e.n(u),Y=e(36142),ye=e(49863),ce=e(52950),a=e(1048).Buffer;function fe(v){const c=new URL("http://example.com");return c.host=v,c.host===v}function le(v){try{return new URL(v),!0}catch{return!1}}function ie(v,c){return{list(){return v},byUrl(P){try{const z=typeof P=="string"?new URL(P):P;return v.find(Te=>c(Te)===z.host)}catch{return}},byHost(P){return v.find(z=>c(z)===P)}}}function oe(v){const{url:c,base:P,lineNumber:z}=v;try{return new URL(c),c}catch{}let Te;if(c.startsWith("/")){const{filepath:He}=l()(P);Te=new URL(P);const Ht=(0,A.trimEnd)(Te.pathname.substring(0,Te.pathname.length-He.length),"/");Te.pathname=`${Ht}${c}`}else Te=new URL(c,P);return Te.search=new URL(P).search,z&&(Te.hash=`L${z}`),Te.toString()}const ze="amazonaws.com";function Le(v){var c,P;const z=v.getOptionalString("endpoint"),Te=(c=v.getOptionalBoolean("s3ForcePathStyle"))!=null?c:!1;let He,Ht;if(z){try{const ba=new URL(z);He=ba.host,Ht=ba.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${z}' is not a valid URL`)}if(Ht!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${z}'`)}else He=ze;const rn=v.getOptionalString("accessKeyId"),Mn=(P=v.getOptionalString("secretAccessKey"))==null?void 0:P.trim(),Sn=v.getOptionalString("roleArn"),Ea=v.getOptionalString("externalId");return{host:He,endpoint:z,s3ForcePathStyle:Te,accessKeyId:rn,secretAccessKey:Mn,roleArn:Sn,externalId:Ea}}function Pe(v){const c=v.map(Le);return c.some(P=>P.host===ze)||c.push({host:ze}),c}var C=Object.defineProperty,ee=(v,c,P)=>c in v?C(v,c,{enumerable:!0,configurable:!0,writable:!0,value:P}):v[c]=P,R=(v,c,P)=>(ee(v,typeof c!="symbol"?c+"":c,P),P);const p=class{constructor(c){this.integrationConfig=c}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){return oe(c)}resolveEditUrl(c){return c}};R(p,"factory",({config:v})=>{var c;const P=Pe((c=v.getOptionalConfigArray("integrations.awsS3"))!=null?c:[]);return ie(P.map(z=>new p(z)),z=>z.config.host)});let w=p;var f=(v,c,P)=>{if(!c.has(v))throw TypeError("Cannot "+P)},E=(v,c,P)=>(f(v,c,"read from private field"),P?P.call(v):c.get(v)),F=(v,c,P)=>{if(c.has(v))throw TypeError("Cannot add the same private member more than once");c instanceof WeakSet?c.add(v):c.set(v,P)},re=(v,c,P,z)=>(f(v,c,"write to private field"),z?z.call(v,P):c.set(v,P),P),se,_e,Q,g,H,G,Oe;const ue="GB",it=class Hi{constructor(c,P,z,Te,He,Ht){F(this,se,void 0),F(this,_e,void 0),F(this,Q,void 0),F(this,g,void 0),F(this,H,void 0),F(this,G,void 0),F(this,Oe,(...rn)=>{const Mn=new URL(E(this,se));return Mn.pathname=rn.map(Sn=>encodeURIComponent(Sn)).join("/"),Mn}),re(this,se,c),re(this,_e,P),re(this,Q,z),re(this,g,Te),re(this,H,He),re(this,G,Ht)}static fromRepoUrl(c){var P;const z=new URL(c);let Te,He,Ht;const rn=z.pathname.split("/").map(ba=>decodeURIComponent(ba));if(rn[2]==="_git"?(Te=rn[1],He=Ht=rn[3]):rn[3]==="_git"?(Te=rn[1],He=rn[2],Ht=rn[4]):rn[4]==="_git"&&(Te=`${rn[1]}/${rn[2]}`,He=rn[3],Ht=rn[5]),!Te||!He||!Ht)throw new Error("Azure URL must point to a git repository");const Mn=(P=z.searchParams.get("path"))!=null?P:void 0;let Sn;const Ea=z.searchParams.get("version");if(Ea){if(Ea.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");Sn=Ea.slice(2)}return new Hi(z.origin,Te,He,Ht,Mn,Sn)}toRepoUrl(){let c;return E(this,Q)===E(this,g)?c=E(this,Oe).call(this,E(this,_e),"_git",E(this,g)):c=E(this,Oe).call(this,E(this,_e),E(this,Q),"_git",E(this,g)),E(this,H)&&c.searchParams.set("path",E(this,H)),E(this,G)&&c.searchParams.set("version",ue+E(this,G)),c.toString()}toFileUrl(){if(!E(this,H))throw new Error("Azure URL must point to a specific path to be able to download a file");const c=E(this,Oe).call(this,E(this,_e),E(this,Q),"_apis","git","repositories",E(this,g),"items");return c.searchParams.set("api-version","6.0"),c.searchParams.set("path",E(this,H)),E(this,G)&&c.searchParams.set("version",E(this,G)),c.toString()}toArchiveUrl(){const c=E(this,Oe).call(this,E(this,_e),E(this,Q),"_apis","git","repositories",E(this,g),"items");return c.searchParams.set("recursionLevel","full"),c.searchParams.set("download","true"),c.searchParams.set("api-version","6.0"),E(this,H)&&c.searchParams.set("scopePath",E(this,H)),E(this,G)&&c.searchParams.set("version",E(this,G)),c.toString()}toCommitsUrl(){const c=E(this,Oe).call(this,E(this,_e),E(this,Q),"_apis","git","repositories",E(this,g),"commits");return c.searchParams.set("api-version","6.0"),E(this,G)&&c.searchParams.set("searchCriteria.itemVersion.version",E(this,G)),c.toString()}getOwner(){return E(this,_e)}getProject(){return E(this,Q)}getRepo(){return E(this,g)}getPath(){return E(this,H)}getRef(){return E(this,G)}};se=new WeakMap,_e=new WeakMap,Q=new WeakMap,g=new WeakMap,H=new WeakMap,G=new WeakMap,Oe=new WeakMap;let ot=it;const pt="dev.azure.com",nt=["clientId","clientSecret","tenantId","personalAccessToken"],Ge=new Map([["ClientSecret",["clientId","clientSecret","tenantId"]],["ManagedIdentity",["clientId"]],["PersonalAccessToken",["personalAccessToken"]]]);function De(v){for(const c of Ge.entries()){const[P,z]=c,Te=nt.filter(He=>!z.includes(He));if(z.every(He=>v[He]!==void 0)&&Te.every(He=>v[He]===void 0))return{kind:P,organizations:v.organizations,...z.reduce((He,Ht)=>(He[Ht]=v[Ht],He),{})}}throw new Error("is not a valid credential")}function Ae(v){var c,P,z,Te,He,Ht,rn;const Mn=(c=v.getOptionalString("host"))!=null?c:pt;let Sn=(P=v.getOptionalConfigArray("credentials"))==null?void 0:P.map(Ra=>{var ua,Ja;return{organizations:Ra.getOptionalStringArray("organizations"),personalAccessToken:(ua=Ra.getOptionalString("personalAccessToken"))==null?void 0:ua.trim(),tenantId:Ra.getOptionalString("tenantId"),clientId:Ra.getOptionalString("clientId"),clientSecret:(Ja=Ra.getOptionalString("clientSecret"))==null?void 0:Ja.trim()}});const Ea=(z=v.getOptionalString("token"))==null?void 0:z.trim();if(v.getOptional("credential")!==void 0&&v.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'credential' and 'credentials' cannot be used together. Use 'credentials' instead.");if(v.getOptional("token")!==void 0&&v.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'token' and 'credentials' cannot be used together. Use 'credentials' instead.");if(Ea!==void 0){const Ra=[{personalAccessToken:Ea}];Sn=(Te=Sn==null?void 0:Sn.concat(Ra))!=null?Te:Ra}if(v.getOptional("credential")!==void 0){const Ra=[{organizations:v.getOptionalStringArray("credential.organizations"),token:(He=v.getOptionalString("credential.token"))==null?void 0:He.trim(),tenantId:v.getOptionalString("credential.tenantId"),clientId:v.getOptionalString("credential.clientId"),clientSecret:(Ht=v.getOptionalString("credential.clientSecret"))==null?void 0:Ht.trim()}];Sn=(rn=Sn==null?void 0:Sn.concat(Ra))!=null?rn:Ra}if(!fe(Mn))throw new Error(`Invalid Azure integration config, '${Mn}' is not a valid host`);let ba;if(Sn!==void 0){const Ra=Sn==null?void 0:Sn.reduce((ua,Ja,er)=>{let hr;try{De(Ja)}catch(cr){hr=cr.message}return hr!==void 0&&ua.push(`credential at position ${er+1} ${hr}`),ua},Array.of()).concat(Object.entries(Sn.filter(ua=>ua.organizations!==void 0&&ua.organizations.length>0).reduce((ua,Ja,er)=>{var hr;return(hr=Ja.organizations)==null||hr.forEach(cr=>{ua[cr]||(ua[cr]=[]),ua[cr].push(er+1)}),ua},{})).filter(([ua,Ja])=>Ja.length>1).reduce((ua,[Ja,er])=>(ua.push(`organization ${Ja} is specified multiple times in credentials at positions ${er.slice(0,er.length-1).join(", ")} and ${er[er.length-1]}`),ua),Array.of()));if((Ra==null?void 0:Ra.length)>0)throw new Error(`Invalid Azure integration config for ${Mn}: ${Ra.join("; ")}`);if(ba=Sn.map(ua=>De(ua)),ba.some(ua=>ua.kind!=="PersonalAccessToken")&&Mn!==pt)throw new Error(`Invalid Azure integration config for ${Mn}, only personal access tokens can be used with hosts other than ${pt}`);if(ba.filter(ua=>ua.organizations===void 0||ua.organizations.length===0).length>1)throw new Error(`Invalid Azure integration config for ${Mn}, you cannot specify multiple credentials without organizations`)}return{host:Mn,credentials:ba}}function Ne(v){const c=v.map(Ae);return c.some(P=>P.host===pt)||c.push({host:pt}),c}var ne=Object.defineProperty,N=(v,c,P)=>c in v?ne(v,c,{enumerable:!0,configurable:!0,writable:!0,value:P}):v[c]=P,X=(v,c,P)=>(N(v,typeof c!="symbol"?c+"":c,P),P);const Ue=class{constructor(c){this.integrationConfig=c}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){var P;const{url:z,base:Te}=c;if(le(z))return z;try{const He=ot.fromRepoUrl(Te),Ht=new URL(Te),rn=new URL(`https://a.com${(P=He.getPath())!=null?P:""}`),Mn=new URL(z,rn).pathname;return Ht.searchParams.set("path",Mn),c.lineNumber&&(Ht.searchParams.set("line",String(c.lineNumber)),Ht.searchParams.set("lineEnd",String(c.lineNumber+1)),Ht.searchParams.set("lineStartColumn","1"),Ht.searchParams.set("lineEndColumn","1")),Ht.toString()}catch{return new URL(z,Te).toString()}}resolveEditUrl(c){return c}};X(Ue,"factory",({config:v})=>{var c;const P=Ne((c=v.getOptionalConfigArray("integrations.azure"))!=null?c:[]);return ie(P.map(z=>new Ue(z)),z=>z.config.host)});let te=Ue;function we(v){return ot.fromRepoUrl(v).toFileUrl()}function ht(v){return ot.fromRepoUrl(v).toArchiveUrl()}function Wt(v){return ot.fromRepoUrl(v).toCommitsUrl()}var bt=Object.defineProperty,It=(v,c,P)=>c in v?bt(v,c,{enumerable:!0,configurable:!0,writable:!0,value:P}):v[c]=P,O=(v,c,P)=>(It(v,typeof c!="symbol"?c+"":c,P),P);const S=null;class K{constructor(c){this.credential=c,O(this,"azureDevOpsScope","499b84ac-1321-427f-aa17-267ca6975798/.default"),O(this,"cached")}static fromAzureDevOpsCredential(c){switch(c.kind){case"PersonalAccessToken":return K.fromPersonalAccessTokenCredential(c);case"ClientSecret":return K.fromTokenCredential(new ClientSecretCredential(c.tenantId,c.clientId,c.clientSecret));case"ManagedIdentity":return K.fromTokenCredential(new ManagedIdentityCredential(c.clientId));default:throw new Error(`Credential kind '${c.kind}' not supported`)}}static fromTokenCredential(c){return new K(c)}static fromPersonalAccessTokenCredential(c){return new K(c.personalAccessToken)}async getCredentials(){if(this.cached===void 0||this.cached.expiresAt!==void 0&&Date.now()>this.cached.expiresAt)if(typeof this.credential=="string")this.cached={headers:{Authorization:`Basic ${btoa(`:${this.credential}`)}`},type:"pat",token:this.credential};else{const c=await this.credential.getToken(this.azureDevOpsScope);if(!c)throw new Error("Failed to retrieve access token");this.cached={expiresAt:c.expiresOnTimestamp-S,headers:{Authorization:`Bearer ${c.token}`},type:"bearer",token:c.token}}return this.cached}}class ae{constructor(c){this.providers=c}static fromIntegrations(c){const P=c.azure.list().reduce((z,Te)=>{var He;return(He=Te.config.credentials)==null||He.forEach(Ht=>{var rn;if(Ht.organizations===void 0||Ht.organizations.length===0)z.get(Te.config.host)===void 0&&z.set(Te.config.host,K.fromAzureDevOpsCredential(Ht));else{const Mn=K.fromAzureDevOpsCredential(Ht);(rn=Ht.organizations)==null||rn.forEach(Sn=>{z.set(`${Te.config.host}/${Sn}`,Mn)})}}),Te.config.host==="dev.azure.com"&&z.get(Te.config.host)===void 0&&z.set(Te.config.host,K.fromTokenCredential(new DefaultAzureCredential)),z},new Map);return new ae(P)}forAzureDevOpsServerOrganization(c){const P=c.pathname.split("/").filter(z=>z!=="");if(c.host!=="dev.azure.com"&&P.length>0){if(P[0]!=="tfs")return this.providers.get(`${c.host}/${P[0]}`);if(P[0]==="tfs"&&P.length>1)return this.providers.get(`${c.host}/${P[1]}`)}}forAzureDevOpsOrganization(c){const P=c.pathname.split("/").filter(z=>z!=="");if(c.host==="dev.azure.com"&&P.length>0)return this.providers.get(`${c.host}/${P[0]}`)}forHost(c){return this.providers.get(c.host)}async getCredentials(c){var P,z;const Te=new URL(c.url),He=(z=(P=this.forAzureDevOpsOrganization(Te))!=null?P:this.forAzureDevOpsServerOrganization(Te))!=null?z:this.forHost(Te);if(He!==void 0)return He.getCredentials(c)}}async function We(v,c){var P;const z=c?{...c}:{},Te=(P=v.credentials)==null?void 0:P.filter(He=>He.organizations===void 0||He.organizations.length===0)[0];if(Te){const Ht=await K.fromAzureDevOpsCredential(Te).getCredentials();return{headers:{...Ht==null?void 0:Ht.headers,...z}}}return{headers:z}}const qe="bitbucket.org",gt="https://api.bitbucket.org/2.0";function _t(v){var c,P,z;const Te=(c=v.getOptionalString("host"))!=null?c:qe;let He=v.getOptionalString("apiBaseUrl");const Ht=(P=v.getOptionalString("token"))==null?void 0:P.trim(),rn=v.getOptionalString("username"),Mn=(z=v.getOptionalString("appPassword"))==null?void 0:z.trim();if(!fe(Te))throw new Error(`Invalid Bitbucket integration config, '${Te}' is not a valid host`);return He?He=(0,A.trimEnd)(He,"/"):Te===qe?He=gt:He=`https://${Te}/rest/api/1.0`,{host:Te,apiBaseUrl:He,token:Ht,username:rn,appPassword:Mn}}function st(v){const c=v.map(_t);return c.some(P=>P.host===qe)||c.push({host:qe,apiBaseUrl:gt}),c}var Zt=Object.defineProperty,at=(v,c,P)=>c in v?Zt(v,c,{enumerable:!0,configurable:!0,writable:!0,value:P}):v[c]=P,mt=(v,c,P)=>(at(v,typeof c!="symbol"?c+"":c,P),P);const Qe=class{constructor(c){this.integrationConfig=c}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const P=oe(c);if(!c.lineNumber)return P;const z=new URL(P);return this.integrationConfig.host==="bitbucket.org"?z.hash=`lines-${c.lineNumber}`:z.hash=`${c.lineNumber}`,z.toString()}resolveEditUrl(c){const P=l()(c),z=new URL(c);return z.searchParams.set("mode","edit"),z.searchParams.set("spa","0"),z.searchParams.set("at",P.ref),z.toString()}};mt(Qe,"factory",({config:v})=>{var c,P,z;const Te=st((z=v.getOptionalConfigArray("integrations.bitbucket"))!=null?z:[...(c=v.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?c:[],...(P=v.getOptionalConfigArray("integrations.bitbucketServer"))!=null?P:[]]);return ie(Te.map(He=>new Qe(He)),He=>He.config.host)});let Lt=Qe;async function St(v,c){const{name:P,owner:z,resource:Te}=parseGitUrl(v),He=Te==="bitbucket.org";let Ht=He?`${c.apiBaseUrl}/repositories/${z}/${P}`:`${c.apiBaseUrl}/projects/${z}/repos/${P}/default-branch`,rn=await fetch(Ht,pe(c));if(rn.status===404&&!He&&(Ht=`${c.apiBaseUrl}/projects/${z}/repos/${P}/branches/default`,rn=await fetch(Ht,pe(c))),!rn.ok){const Sn=`Failed to retrieve default branch from ${Ht}, ${rn.status} ${rn.statusText}`;throw new Error(Sn)}let Mn;if(He)Mn=(await rn.json()).mainbranch.name;else{const{displayId:Sn}=await rn.json();Mn=Sn}if(!Mn)throw new Error(`Failed to read default branch from ${Ht}. Response ${rn.status} ${rn.json()}`);return Mn}async function en(v,c){const{name:P,owner:z,ref:Te,protocol:He,resource:Ht,filepath:rn}=parseGitUrl(v),Mn=Ht==="bitbucket.org";let Sn=Te;Sn||(Sn=await St(v,c));const Ea=rn?`&path=${encodeURIComponent(decodeURIComponent(rn))}`:"";return Mn?`${He}://${Ht}/${z}/${P}/get/${Sn}.tar.gz`:`${c.apiBaseUrl}/projects/${z}/repos/${P}/archive?format=tgz&at=${Sn}&prefix=${z}-${P}${Ea}`}function xt(v,c){try{const{owner:P,name:z,ref:Te,filepathtype:He,filepath:Ht}=parseGitUrl(v);if(!P||!z||He!=="browse"&&He!=="raw"&&He!=="src")throw new Error("Invalid Bitbucket URL or file path");const rn=Ht.replace(/^\//,"");if(c.host==="bitbucket.org"){if(!Te)throw new Error("Invalid Bitbucket URL or file path");return`${c.apiBaseUrl}/repositories/${P}/${z}/src/${Te}/${rn}`}return`${c.apiBaseUrl}/projects/${P}/repos/${z}/raw/${rn}?at=${Te}`}catch(P){throw new Error(`Incorrect URL: ${v}, ${P}`)}}function pe(v){const c={};if(v.token)c.Authorization=`Bearer ${v.token}`;else if(v.username&&v.appPassword){const P=a.from(`${v.username}:${v.appPassword}`,"utf8");c.Authorization=`Basic ${P.toString("base64")}`}return{headers:c}}const Fe="bitbucket.org",Mt="https://api.bitbucket.org/2.0";function Xt(v){var c;const P=Fe,z=Mt,Te=v.getString("username"),He=(c=v.getString("appPassword"))==null?void 0:c.trim();return{host:P,apiBaseUrl:z,username:Te,appPassword:He}}function Bt(v){const c=v.map(Xt);return c.length===0&&c.push({host:Fe,apiBaseUrl:Mt}),c}var jt=Object.defineProperty,Ln=(v,c,P)=>c in v?jt(v,c,{enumerable:!0,configurable:!0,writable:!0,value:P}):v[c]=P,pn=(v,c,P)=>(Ln(v,typeof c!="symbol"?c+"":c,P),P);const cn=class{constructor(c){this.integrationConfig=c}get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const P=oe(c);if(c.lineNumber){const z=new URL(P);return z.hash=`lines-${c.lineNumber}`,z.toString()}return P}resolveEditUrl(c){const P=l()(c),z=new URL(c);return z.searchParams.set("mode","edit"),z.searchParams.set("at",P.ref),z.toString()}};pn(cn,"factory",({config:v})=>{var c;const P=Bt((c=v.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?c:[]);return ie(P.map(z=>new cn(z)),z=>z.config.host)});let En=cn;async function lt(v,c){const{name:P,owner:z}=parseGitUrl(v),Te=`${c.apiBaseUrl}/repositories/${z}/${P}`,He=await fetch(Te,Dt(c));if(!He.ok){const Mn=`Failed to retrieve default branch from ${Te}, ${He.status} ${He.statusText}`;throw new Error(Mn)}const rn=(await He.json()).mainbranch.name;if(!rn)throw new Error(`Failed to read default branch from ${Te}. Response ${He.status} ${He.json()}`);return rn}async function Ot(v,c){const{name:P,owner:z,ref:Te,protocol:He,resource:Ht}=parseGitUrl(v);let rn=Te;return rn||(rn=await lt(v,c)),`${He}://${Ht}/${z}/${P}/get/${rn}.tar.gz`}function Vt(v,c){try{const{owner:P,name:z,ref:Te,filepathtype:He,filepath:Ht}=parseGitUrl(v);if(!P||!z||He!=="src"&&He!=="raw")throw new Error("Invalid Bitbucket Cloud URL or file path");const rn=Ht.replace(/^\//,"");if(!Te)throw new Error("Invalid Bitbucket Cloud URL or file path");return`${c.apiBaseUrl}/repositories/${P}/${z}/src/${Te}/${rn}`}catch(P){throw new Error(`Incorrect URL: ${v}, ${P}`)}}function Dt(v){const c={};if(v.username&&v.appPassword){const P=a.from(`${v.username}:${v.appPassword}`,"utf8");c.Authorization=`Basic ${P.toString("base64")}`}return{headers:c}}function ct(v){var c;const P=v.getString("host");let z=v.getOptionalString("apiBaseUrl");const Te=(c=v.getOptionalString("token"))==null?void 0:c.trim(),He=v.getOptionalString("username"),Ht=v.getOptionalString("password");if(!fe(P))throw new Error(`Invalid Bitbucket Server integration config, '${P}' is not a valid host`);return z?z=(0,A.trimEnd)(z,"/"):z=`https://${P}/rest/api/1.0`,{host:P,apiBaseUrl:z,token:Te,username:He,password:Ht}}function je(v){return v.map(ct)}var Yt=Object.defineProperty,Gt=(v,c,P)=>c in v?Yt(v,c,{enumerable:!0,configurable:!0,writable:!0,value:P}):v[c]=P,sn=(v,c,P)=>(Gt(v,typeof c!="symbol"?c+"":c,P),P);const bn=class{constructor(c){this.integrationConfig=c}get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const P=oe(c);if(c.lineNumber){const z=new URL(P);return z.hash=c.lineNumber.toString(),z.toString()}return P}resolveEditUrl(c){return c.includes("?")?c.substring(0,c.indexOf("?")):c}};sn(bn,"factory",({config:v})=>{var c;const P=je((c=v.getOptionalConfigArray("integrations.bitbucketServer"))!=null?c:[]);return ie(P.map(z=>new bn(z)),z=>z.config.host)});let In=bn;async function Pn(v,c){const{name:P,owner:z}=parseGitUrl(v);let Te=`${c.apiBaseUrl}/projects/${z}/repos/${P}/default-branch`,He=await fetch(Te,Nn(c));if(He.status===404&&(Te=`${c.apiBaseUrl}/projects/${z}/repos/${P}/branches/default`,He=await fetch(Te,Nn(c))),!He.ok){const Mn=`Failed to retrieve default branch from ${Te}, ${He.status} ${He.statusText}`;throw new Error(Mn)}const{displayId:Ht}=await He.json(),rn=Ht;if(!rn)throw new Error(`Failed to read default branch from ${Te}. Response ${He.status} ${He.json()}`);return rn}async function qn(v,c){const{name:P,owner:z,ref:Te,filepath:He}=parseGitUrl(v);let Ht=Te;Ht||(Ht=await Pn(v,c));const rn=He?`&path=${encodeURIComponent(decodeURIComponent(He))}`:"";return`${c.apiBaseUrl}/projects/${z}/repos/${P}/archive?format=tgz&at=${Ht}&prefix=${z}-${P}${rn}`}function Gn(v,c){try{const{owner:P,name:z,ref:Te,filepathtype:He,filepath:Ht}=parseGitUrl(v);if(!P||!z||He!=="browse"&&He!=="raw"&&He!=="src")throw new Error("Invalid Bitbucket Server URL or file path");const rn=Ht.replace(/^\//,"");return`${c.apiBaseUrl}/projects/${P}/repos/${z}/raw/${rn}?at=${Te}`}catch(P){throw new Error(`Incorrect URL: ${v}, ${P}`)}}function Nn(v){const c={};if(v.token)c.Authorization=`Bearer ${v.token}`;else if(v.username&&v.password){const P=a.from(`${v.username}:${v.password}`,"utf8");c.Authorization=`Basic ${P.toString("base64")}`}return{headers:c}}function On(v){var c;const P=v.getString("host");let z=v.getOptionalString("baseUrl"),Te=v.getOptionalString("cloneUrl"),He=v.getOptionalString("gitilesBaseUrl");const Ht=v.getOptionalString("username"),rn=(c=v.getOptionalString("password"))==null?void 0:c.trim();if(fe(P)){if(z&&!le(z))throw new Error(`Invalid Gerrit integration config, '${z}' is not a valid baseUrl`);if(Te&&!le(Te))throw new Error(`Invalid Gerrit integration config, '${Te}' is not a valid cloneUrl`);if(He&&!le(He))throw new Error(`Invalid Gerrit integration config, '${He}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${P}' is not a valid host`);return z?z=(0,A.trimEnd)(z,"/"):z=`https://${P}`,He?He=(0,A.trimEnd)(He,"/"):He=`https://${P}`,Te?Te=(0,A.trimEnd)(Te,"/"):Te=z,{host:P,baseUrl:z,cloneUrl:Te,gitilesBaseUrl:He,username:Ht,password:rn}}function Jn(v){return v.map(On)}const aa=")]}'";function ft(v,c){const P=new URL(v.gitilesBaseUrl),z=new URL(c),He=z.pathname.substring(z.pathname.startsWith("/a/")?2:0).replace(P.pathname,"").split("/").filter(ba=>!!ba),Ht=He.indexOf("+");if(Ht<=0)throw new Error(`Unable to parse project from url: ${c}`);const rn=(0,A.trimStart)(He.slice(0,Ht).join("/"),"/"),Mn=He.indexOf("heads");if(Mn<=0)throw new Error(`Unable to parse branch from url: ${c}`);const Sn=He[Mn+1],Ea=He.slice(Mn+2).join("/");return{branch:Sn,filePath:Ea===""?"/":Ea,project:rn}}function m(v,c,P,z){return`${v.gitilesBaseUrl}/${c}/+/refs/heads/${P}/${(0,A.trimStart)(z,"/")}`}function D(v,c,P,z){const Te=z==="/"||z===""?".tar.gz":`/${z}.tar.gz`;return`${de(v)}/${c}/+archive/refs/heads/${P}${Te}`}function j(v){return v.password?"/a/":"/"}function de(v){if(!v.baseUrl||!v.gitilesBaseUrl)throw new Error("Unexpected Gerrit config values. baseUrl or gitilesBaseUrl not set.");if(v.gitilesBaseUrl.startsWith(v.baseUrl))return v.gitilesBaseUrl.replace(v.baseUrl.concat("/"),v.baseUrl.concat(j(v)));if(v.password)throw new Error("Since the baseUrl (Gerrit) is not part of the gitilesBaseUrl, an authentication URL could not be constructed.");return v.gitilesBaseUrl}function x(v,c){const{branch:P,project:z}=ft(v,c);return`${v.baseUrl}${j(v)}projects/${encodeURIComponent(z)}/branches/${P}`}function $(v,c){const{project:P}=ft(v,c);return`${v.cloneUrl}${j(v)}${P}`}function q(v,c){const{branch:P,filePath:z,project:Te}=ft(v,c);return`${v.baseUrl}${j(v)}projects/${encodeURIComponent(Te)}/branches/${P}/files/${encodeURIComponent(z)}/content`}function xe(v){return`${v.baseUrl}${j(v)}projects/`}function ke(v){const c={};if(!v.password)return c;const P=a.from(`${v.username}:${v.password}`,"utf8");return c.Authorization=`Basic ${P.toString("base64")}`,{headers:c}}async function vt(v){const c=await v.text();if(c.startsWith(aa))try{return JSON.parse(c.slice(aa.length))}catch(P){throw new Error(`Invalid response from Gerrit: ${c.slice(0,10)} - ${P}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${c.slice(0,10)}`)}var kt=Object.defineProperty,V=(v,c,P)=>c in v?kt(v,c,{enumerable:!0,configurable:!0,writable:!0,value:P}):v[c]=P,ve=(v,c,P)=>(V(v,typeof c!="symbol"?c+"":c,P),P);const $e=class{constructor(c){this.integrationConfig=c}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const{url:P,base:z,lineNumber:Te}=c;let He;if(P.startsWith("/")){const{branch:Ht,project:rn}=ft(this.config,z);return m(this.config,rn,Ht,P)}return P?He=new URL(P,z):He=new URL(z),Te&&(He.hash=Te.toString()),He.toString()}resolveEditUrl(c){return c}};ve($e,"factory",({config:v})=>{var c;const P=Jn((c=v.getOptionalConfigArray("integrations.gerrit"))!=null?c:[]);return ie(P.map(z=>new $e(z)),z=>z.config.host)});let Ke=$e;function Je(v){var c;const P=v.getString("host");let z=v.getOptionalString("baseUrl");const Te=v.getOptionalString("username"),He=(c=v.getOptionalString("password"))==null?void 0:c.trim();if(fe(P)){if(z&&!le(z))throw new Error(`Invalid Gitea integration config, '${z}' is not a valid baseUrl`)}else throw new Error(`Invalid Gitea integration config, '${P}' is not a valid host`);return z?z=(0,A.trimEnd)(z,"/"):z=`https://${P}`,{host:P,baseUrl:z,username:Te,password:He}}function Ut(v,c){const P=mn(v,c);return`${P.url}/${P.owner}/${P.name}/_edit/${P.ref}/${P.path}`}function Rt(v,c){const P=mn(v,c);return`${P.url}/api/v1/repos/${P.owner}/${P.name}/contents/${P.path}?ref=${P.ref}`}function Nt(v,c){const P=mn(v,c);return`${P.url}/api/v1/repos/${P.owner}/${P.name}/archive/${P.ref}.tar.gz`}function _n(v,c){const P=mn(v,c);return`${P.url}/api/v1/repos/${P.owner}/${P.name}/git/commits/${P.ref}`}function An(v){const c={},{username:P,password:z}=v;return z?(P?c.Authorization=`basic ${a.from(`${P}:${z}`).toString("base64")}`:c.Authorization=`token ${z}`,{headers:c}):c}function mn(v,c){var P;const z=(P=v.baseUrl)!=null?P:`https://${v.host}`;try{const[Te,He,Ht,rn,Mn,Sn,...Ea]=c.replace(z,"").split("/"),ba=Ea.join("/").replace(/^\//,"");return{url:z,owner:He,name:Ht,ref:Sn,path:ba}}catch(Te){throw new Error(`Incorrect URL: ${c}, ${Te}`)}}var ln=Object.defineProperty,M=(v,c,P)=>c in v?ln(v,c,{enumerable:!0,configurable:!0,writable:!0,value:P}):v[c]=P,J=(v,c,P)=>(M(v,typeof c!="symbol"?c+"":c,P),P);const be=class{constructor(c){this.config=c}get type(){return"gitea"}get title(){return this.config.host}resolveUrl(c){return oe(c)}resolveEditUrl(c){return Ut(this.config,c)}};J(be,"factory",({config:v})=>{var c;const z=((c=v.getOptionalConfigArray("integrations.gitea"))!=null?c:[]).map(Te=>Je(Te));return ie(z.map(Te=>new be(Te)),Te=>Te.config.host)});let Re=be;const yt="github.com",Tt="https://api.github.com",Kt="https://raw.githubusercontent.com";function Jt(v){var c,P,z;const Te=(c=v.getOptionalString("host"))!=null?c:yt;let He=v.getOptionalString("apiBaseUrl"),Ht=v.getOptionalString("rawBaseUrl");const rn=(P=v.getOptionalString("token"))==null?void 0:P.trim(),Mn=(z=v.getOptionalConfigArray("apps"))==null?void 0:z.map(Sn=>({appId:Sn.getNumber("appId"),clientId:Sn.getString("clientId"),clientSecret:Sn.getString("clientSecret"),webhookSecret:Sn.getString("webhookSecret"),privateKey:Sn.getString("privateKey"),allowedInstallationOwners:Sn.getOptionalStringArray("allowedInstallationOwners")}));if(!fe(Te))throw new Error(`Invalid GitHub integration config, '${Te}' is not a valid host`);return He?He=(0,A.trimEnd)(He,"/"):Te===yt&&(He=Tt),Ht?Ht=(0,A.trimEnd)(Ht,"/"):Te===yt&&(Ht=Kt),{host:Te,apiBaseUrl:He,rawBaseUrl:Ht,token:rn,apps:Mn}}function hn(v){const c=v.map(Jt);return c.some(P=>P.host===yt)||c.push({host:yt,apiBaseUrl:Tt,rawBaseUrl:Kt}),c}function Dn(v,c,P){try{const{owner:z,name:Te,ref:He,filepathtype:Ht,filepath:rn}=parseGitUrl(v);if(!z||!Te||!He||Ht!=="blob"&&Ht!=="raw"&&Ht!=="tree")throw new Error("Invalid GitHub URL or file path");const Mn=rn.replace(/^\//,"");return Ve(c,P)==="api"?`${c.apiBaseUrl}/repos/${z}/${Te}/contents/${Mn}?ref=${He}`:`${c.rawBaseUrl}/${z}/${Te}/${He}/${Mn}`}catch(z){throw new Error(`Incorrect URL: ${v}, ${z}`)}}function he(v,c){const P={};return Ve(v,c)==="api"&&(P.Accept="application/vnd.github.v3.raw"),c.token&&(P.Authorization=`token ${c.token}`),{headers:P}}function Ve(v,c){return v.apiBaseUrl&&(c.token||!v.rawBaseUrl)?"api":"raw"}var Be=Object.defineProperty,At=(v,c,P)=>c in v?Be(v,c,{enumerable:!0,configurable:!0,writable:!0,value:P}):v[c]=P,Pt=(v,c,P)=>(At(v,typeof c!="symbol"?c+"":c,P),P);class tn{constructor(){Pt(this,"tokenCache",new Map),Pt(this,"isExpired",c=>ce.c9.local()>c)}async getOrCreateToken(c,P,z){let Te=this.tokenCache.get(c);if((!Te||this.isExpired(Te.expiresAt))&&(Te=await z(),Te.expiresAt=Te.expiresAt.minus({minutes:10}),this.tokenCache.set(c,Te)),!this.appliesToRepo(Te,P))throw new Error(`The Backstage GitHub application used in the ${c} organization does not have access to a repository with the name ${P}`);return{accessToken:Te.token}}appliesToRepo(c,P){return P===void 0?!0:c.repositories!==void 0?c.repositories.includes(P):!0}}const Ct={Accept:"application/vnd.github.machine-man-preview+json"};class Ft{constructor(c,P){Pt(this,"appClient"),Pt(this,"baseUrl"),Pt(this,"baseAuthConfig"),Pt(this,"cache",new tn),Pt(this,"allowedInstallationOwners"),this.allowedInstallationOwners=c.allowedInstallationOwners,this.baseUrl=P,this.baseAuthConfig={appId:c.appId,privateKey:c.privateKey.replace(/\\n/gm,`
`)},this.appClient=new ye.E({baseUrl:P,headers:Ct,authStrategy:Y.K,auth:this.baseAuthConfig})}async getInstallationCredentials(c,P){var z;return this.allowedInstallationOwners&&!((z=this.allowedInstallationOwners)!=null&&z.includes(c))?{accessToken:void 0}:this.cache.getOrCreateToken(c,P,async()=>{var Te;const{installationId:He,suspended:Ht}=await this.getInstallationData(c);if(Ht)throw new Error(`The GitHub application for ${c} is suspended`);const rn=await this.appClient.apps.createInstallationAccessToken({installation_id:He,headers:Ct});let Mn;if(rn.data.repository_selection==="selected"){const Sn=new ye.E({baseUrl:this.baseUrl,auth:rn.data.token}),Ea=await Sn.paginate(Sn.apps.listReposAccessibleToInstallation);Mn=((Te=Ea.repositories)!=null?Te:Ea).map(Ra=>Ra.name)}return{token:rn.data.token,expiresAt:ce.c9.fromISO(rn.data.expires_at),repositories:Mn}})}getInstallations(){return this.appClient.paginate(this.appClient.apps.listInstallations)}async getInstallationData(c){const z=(await this.getInstallations()).find(He=>{var Ht;return He.account&&"login"in He.account&&((Ht=He.account.login)==null?void 0:Ht.toLocaleLowerCase("en-US"))===c.toLocaleLowerCase("en-US")});if(z)return{installationId:z.id,suspended:!!z.suspended_by};const Te=new Error(`No app installation found for ${c} in ${this.baseAuthConfig.appId}`);throw Te.name="NotFoundError",Te}}class gn{constructor(c){Pt(this,"apps");var P,z;this.apps=(z=(P=c.apps)==null?void 0:P.map(Te=>new Ft(Te,c.apiBaseUrl)))!=null?z:[]}async getAllInstallations(){return this.apps.length?(await Promise.all(this.apps.map(P=>P.getInstallations()))).flat():[]}async getAppToken(c,P){if(this.apps.length===0)return;const z=await Promise.all(this.apps.map(rn=>rn.getInstallationCredentials(c,P).then(Mn=>({credentials:Mn,error:void 0}),Mn=>({credentials:void 0,error:Mn})))),Te=z.find(rn=>{var Mn;return(Mn=rn.credentials)==null?void 0:Mn.accessToken});if(Te)return Te.credentials.accessToken;const Ht=z.map(rn=>rn.error).find(rn=>(rn==null?void 0:rn.name)!=="NotFoundError");if(Ht)throw Ht}}const Cn=class{constructor(c,P){this.githubAppCredentialsMux=c,this.token=P}async getCredentials(c){const P=l()(c.url),z=P.owner||P.name,Te=P.owner?P.name:void 0;let He="app",Ht=await this.githubAppCredentialsMux.getAppToken(z,Te);return Ht||(He="token",Ht=this.token),{headers:Ht?{Authorization:`Bearer ${Ht}`}:void 0,token:Ht,type:He}}};Pt(Cn,"create",v=>new Cn(new gn(v),v.token));let an=null;class fn{constructor(c){this.providers=c}static fromIntegrations(c){const P=new Map;return c.github.list().forEach(z=>{const Te=an.create(z.config);P.set(z.config.host,Te)}),new fn(P)}async getCredentials(c){const P=new URL(c.url),z=this.providers.get(P.host);if(!z)throw new Error(`There is no GitHub integration that matches ${c.url}. Please add a configuration for an integration.`);return z.getCredentials(c)}}var Wn=Object.defineProperty,jn=(v,c,P)=>c in v?Wn(v,c,{enumerable:!0,configurable:!0,writable:!0,value:P}):v[c]=P,ea=(v,c,P)=>(jn(v,typeof c!="symbol"?c+"":c,P),P);const kn=class{constructor(c){this.integrationConfig=c}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){return ra(oe(c),"tree")}resolveEditUrl(c){return ra(c,"edit")}parseRateLimitInfo(c){return{isRateLimited:c.status===429||c.status===403&&c.headers.get("x-ratelimit-remaining")==="0"}}};ea(kn,"factory",({config:v})=>{var c;const P=hn((c=v.getOptionalConfigArray("integrations.github"))!=null?c:[]);return ie(P.map(z=>new kn(z)),z=>z.config.host)});let Fn=kn;function ra(v,c){return v.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(P,z,Te,He)=>`//${z}/${Te}/${He}/${c}/`)}var la=Object.defineProperty,Aa=(v,c,P)=>c in v?la(v,c,{enumerable:!0,configurable:!0,writable:!0,value:P}):v[c]=P,ya=(v,c,P)=>(Aa(v,typeof c!="symbol"?c+"":c,P),P);const Oa=null;class ia extends Fn{constructor(c){super(c)}get config(){return super.config}}ya(ia,"factory",Fn.factory);const Da=null,Ua=null,$a=null,Qa="gitlab.com",Na="https://gitlab.com/api/v4";function za(v){var c;const P=v.getString("host");let z=v.getOptionalString("apiBaseUrl");const Te=(c=v.getOptionalString("token"))==null?void 0:c.trim();let He=v.getOptionalString("baseUrl");if(z?z=(0,A.trimEnd)(z,"/"):P===Qa&&(z=Na),He?He=(0,A.trimEnd)(He,"/"):He=`https://${P}`,fe(P)){if(!z||!le(z))throw new Error(`Invalid GitLab integration config, '${z}' is not a valid apiBaseUrl`);if(!le(He))throw new Error(`Invalid GitLab integration config, '${He}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${P}' is not a valid host`);return{host:P,token:Te,apiBaseUrl:z,baseUrl:He}}function pr(v){const c=v.map(za);return c.some(P=>P.host===Qa)||c.push({host:Qa,apiBaseUrl:Na,baseUrl:`https://${Qa}`}),c}function ja(v){let c="";return v.host!==Qa&&(c=new URL(v.baseUrl).pathname),trimEnd(c,"/")}async function ar(v,c){const P=await Za(v,c);return rr(v,P,c).toString()}function ma(v){const{token:c=""}=v;return{headers:{"PRIVATE-TOKEN":c}}}function rr(v,c,P){try{const z=new URL(v),Te=z.pathname.split("/blob/").slice(1).join("/blob/"),[He,...Ht]=Te.split("/"),rn=ja(P);return z.pathname=[...rn?[rn]:[],"api/v4/projects",c,"repository/files",encodeURIComponent(decodeURIComponent(Ht.join("/"))),"raw"].join("/"),z.search=`?ref=${He}`,z}catch(z){throw new Error(`Incorrect url: ${v}, ${z}`)}}async function Za(v,c){const P=new URL(v);if(!P.pathname.includes("/blob/"))throw new Error("Please provide full path to yaml file from GitLab");try{let z=P.pathname.split("/-/blob/")[0].split("/blob/")[0];const Te=ja(c);Te&&(z=z.replace(Te,""));const He=new URL(`${P.origin}${Te}/api/v4/projects/${encodeURIComponent(z.replace(/^\//,""))}`),Ht=await fetch(He.toString(),ma(c)),rn=await Ht.json();if(!Ht.ok)throw new Error(`GitLab Error '${rn.error}', ${rn.error_description}`);return Number(rn.id)}catch(z){throw new Error(`Could not get GitLab project ID for: ${v}, ${z}`)}}var lr=Object.defineProperty,La=(v,c,P)=>c in v?lr(v,c,{enumerable:!0,configurable:!0,writable:!0,value:P}):v[c]=P,qa=(v,c,P)=>(La(v,typeof c!="symbol"?c+"":c,P),P);const or=class{constructor(c){this.integrationConfig=c}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){return oe(c)}resolveEditUrl(c){return Ee(c,"edit")}};qa(or,"factory",({config:v})=>{var c;const P=pr((c=v.getOptionalConfigArray("integrations.gitlab"))!=null?c:[]);return ie(P.map(z=>new or(z)),z=>z.config.host)});let et=or;function Ee(v,c){return v.replace(/\/\-\/(blob|tree|edit)\//,`/-/${c}/`)}var rt=Object.defineProperty,un=(v,c,P)=>c in v?rt(v,c,{enumerable:!0,configurable:!0,writable:!0,value:P}):v[c]=P,Un=(v,c,P)=>(un(v,typeof c!="symbol"?c+"":c,P),P);const Zn=class{constructor(c){this.token=c}async getCredentials(c){return this.token?{headers:{Authorization:`Bearer ${this.token}`},token:this.token}:{}}};Un(Zn,"create",v=>new Zn(v.token));let pa=null;class xa{constructor(c){this.providers=c}static fromIntegrations(c){const P=new Map;return c.gitlab.list().forEach(z=>{const Te=pa.create(z.config);P.set(z.config.host,Te)}),new xa(P)}async getCredentials(c){const P=new URL(c.url),z=this.providers.get(P.host);if(!z)throw new Error(`There is no GitLab integration that matches ${c.url}. Please add a configuration for an integration.`);return z.getCredentials(c)}}function Ha(v){if(!v)return{};if(!v.has("clientEmail")&&!v.has("privateKey"))return{};const c=v.getString("privateKey").split("\\n").join(`
`);return{clientEmail:v.getString("clientEmail"),privateKey:c}}var wa=Object.defineProperty,Va=(v,c,P)=>c in v?wa(v,c,{enumerable:!0,configurable:!0,writable:!0,value:P}):v[c]=P,Ia=(v,c,P)=>(Va(v,typeof c!="symbol"?c+"":c,P),P);class Ga{constructor(c){Ia(this,"byType"),this.byType=c}static fromConfig(c){return new Ga({awsS3:w.factory({config:c}),azure:te.factory({config:c}),bitbucket:Lt.factory({config:c}),bitbucketCloud:En.factory({config:c}),bitbucketServer:In.factory({config:c}),gerrit:Ke.factory({config:c}),github:Fn.factory({config:c}),gitlab:et.factory({config:c}),gitea:Re.factory({config:c})})}get awsS3(){return this.byType.awsS3}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}list(){return Object.values(this.byType).flatMap(c=>c.list())}byUrl(c){let P=Object.values(this.byType).map(z=>z.byUrl(c)).filter(Boolean);if(P.length>1){const z=P.filter(Te=>!(Te instanceof Lt));z.length!==0&&(P=z)}return P[0]}byHost(c){return Object.values(this.byType).map(P=>P.byHost(c)).find(Boolean)}resolveUrl(c){const P=this.byUrl(c.base);return P?P.resolveUrl(c):oe(c)}resolveEditUrl(c){const P=this.byUrl(c);return P?P.resolveEditUrl(c):c}}},56981:(wn,wt,e)=>{"use strict";e.d(wt,{a:()=>ye,b:()=>Y,d:()=>Pe,r:()=>r});var o=e(11638),l=e(48821),A=e(14041),B=e(23180),u=e(54917);const r=(0,o.HM)({id:"api-docs"}),Y=(0,o.Il)({id:"register-component",optional:!0}),ye=(0,l.c)({id:"plugin.api-docs.config"}),ce=A.lazy(()=>Promise.all([e.e(1072),e.e(2216),e.e(2589),e.e(802)]).then(e.bind(e,30802)).then(C=>({default:C.AsyncApiDefinition}))),a=C=>A.createElement(A.Suspense,{fallback:A.createElement(B.ke,null)},A.createElement(ce,{...C})),fe=A.lazy(()=>e.e(7808).then(e.bind(e,17808)).then(C=>({default:C.GraphQlDefinition}))),le=C=>A.createElement(A.Suspense,{fallback:A.createElement(B.ke,null)},A.createElement(fe,{...C})),ie=A.lazy(()=>Promise.all([e.e(1072),e.e(2216),e.e(841)]).then(e.bind(e,80841)).then(C=>({default:C.OpenApiDefinition}))),oe=C=>{var ee;const R=(ee=C.supportedSubmitMethods)==null?void 0:ee.map(p=>p.toLocaleLowerCase());return A.createElement(A.Suspense,{fallback:A.createElement(B.ke,null)},A.createElement(ie,{...C,supportedSubmitMethods:R}))},ze=C=>{const ee=(0,u.A)();return A.createElement(B.z7,{customStyle:{backgroundColor:ee.palette.background.default},text:C.definition,language:"protobuf",showCopyCodeButton:!0})},Le=C=>{const{definition:ee}=C,R=(0,u.A)();return A.createElement(B.z7,{customStyle:{backgroundColor:R.palette.background.default},text:ee,language:"typescript",showCopyCodeButton:!0})};function Pe(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:C=>A.createElement(oe,{definition:C})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:C=>A.createElement(a,{definition:C})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:C=>A.createElement(le,{definition:C})},{type:"grpc",title:"gRPC",component:C=>A.createElement(ze,{definition:C})},{type:"trpc",title:"tRPC",component:C=>A.createElement(Le,{definition:C})}]}},20440:(wn,wt,e)=>{"use strict";e.d(wt,{Br:()=>Y,Io:()=>a,Rf:()=>u,Vw:()=>r,aR:()=>ce,hR:()=>B,l:()=>fe,pW:()=>ye});var o=e(56981),l=e(14041),A=e(11638);const B=(0,A.i1)({id:"api-docs",routes:{root:o.r},apis:[(0,A.bW)({api:o.a,deps:{},factory:()=>{const le=(0,o.d)();return{getApiDefinitionWidget:ie=>le.find(oe=>oe.type===ie.spec.type)}}})],externalRoutes:{registerApi:o.b}}),u=B.provide((0,A.QJ)({name:"ApiExplorerPage",component:()=>e.e(4889).then(e.bind(e,94889)).then(le=>le.ApiExplorerIndexPage),mountPoint:o.r})),r=B.provide((0,A.NC)({name:"EntityApiDefinitionCard",component:{lazy:()=>e.e(5857).then(e.bind(e,98238)).then(le=>le.ApiDefinitionCard)}})),Y=B.provide((0,A.NC)({name:"EntityConsumedApisCard",component:{lazy:()=>e.e(6169).then(e.bind(e,16169)).then(le=>le.ConsumedApisCard)}})),ye=B.provide((0,A.NC)({name:"EntityConsumingComponentsCard",component:{lazy:()=>e.e(4156).then(e.bind(e,54156)).then(le=>le.ConsumingComponentsCard)}})),ce=B.provide((0,A.NC)({name:"EntityProvidedApisCard",component:{lazy:()=>e.e(6169).then(e.bind(e,16169)).then(le=>le.ProvidedApisCard)}})),a=B.provide((0,A.NC)({name:"EntityProvidingComponentsCard",component:{lazy:()=>e.e(4156).then(e.bind(e,54156)).then(le=>le.ProvidingComponentsCard)}})),fe=B.provide((0,A.NC)({name:"EntityHasApisCard",component:{lazy:()=>e.e(6169).then(e.bind(e,16169)).then(le=>le.HasApisCard)}}))},41641:(wn,wt,e)=>{"use strict";e.d(wt,{DZ:()=>We,JV:()=>x,Jk:()=>_t,LO:()=>D,uG:()=>kt});var o=e(11638),l=e(48821),A=e(29835),B=e(3399),u=e(14041),r=e(23180),Y=e(16249),ye=e(29365),ce=e(58837),a=e(72501),fe=e(76891),le=e(64947),ie=e(42899),oe=e(40703),ze=e(48653),Le=e(46805),Pe=e(93453),C=e(45685),ee=e(37197),R=e(67349),p=e(77125),w=e(60083),f=e(95061),E=e(81215),F=e(26343),re=e(52950),se=e(75625),_e=e(39347),Q=e(15029),g=e(92140),H=e(63309),G=e(32881),Oe=e(10044),ue=e(4832),it=e(80824),ot=e(48543),pt=e(20470),nt=e(96768),Ge=e(49616),De=e(64704),Ae=e(61477),Ne=e(99703),ne=e(7031),N=e(64765),X=e(20577),Ue=e(74219),te=e(5030),we=e(92651),ht=e(58054),Wt=e(26901),bt=e(89103);const It=(0,o.HM)({id:"bazaar"});var O=Object.defineProperty,S=(V,ve,$e)=>ve in V?O(V,ve,{enumerable:!0,configurable:!0,writable:!0,value:$e}):V[ve]=$e,K=(V,ve,$e)=>(S(V,typeof ve!="symbol"?ve+"":ve,$e),$e);const ae=(0,l.c)({id:"bazaar"}),We=async(V,ve)=>{const $e=ve.apis.get(ae);if($e===void 0)return!1;const Ke=(0,A.U2)({kind:V.kind,name:V.metadata.name,namespace:V.metadata.namespace});return(await(await $e.getProjectByRef(Ke)).json()).data.length>0};class qe{constructor(ve){K(this,"identityApi"),K(this,"discoveryApi"),K(this,"fetchApi"),this.identityApi=ve.identityApi,this.discoveryApi=ve.discoveryApi,this.fetchApi=ve.fetchApi}async updateProject(ve){const $e=await this.discoveryApi.getBaseUrl("bazaar");return await this.fetchApi.fetch(`${$e}/projects`,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(ve)}).then(Ke=>Ke.json())}async addProject(ve){const $e=await this.discoveryApi.getBaseUrl("bazaar");return await this.fetchApi.fetch(`${$e}/projects`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(ve)}).then(Ke=>Ke.json())}async getProjectById(ve){const $e=await this.discoveryApi.getBaseUrl("bazaar"),Ke=await this.fetchApi.fetch(`${$e}/projects/${encodeURIComponent(ve)}`);return Ke.ok?Ke:null}async getProjectByRef(ve){const $e=await this.discoveryApi.getBaseUrl("bazaar"),Ke=await this.fetchApi.fetch(`${$e}/projects/${encodeURIComponent(ve)}`);return Ke.ok?Ke:null}async getMembers(ve){const $e=await this.discoveryApi.getBaseUrl("bazaar");return await this.fetchApi.fetch(`${$e}/projects/${encodeURIComponent(ve)}/members`).then(Ke=>Ke.json())}async addMember(ve,$e){const Ke=await this.discoveryApi.getBaseUrl("bazaar"),{picture:Je}=await this.identityApi.getProfileInfo();await this.fetchApi.fetch(`${Ke}/projects/${encodeURIComponent(ve)}/member/${encodeURIComponent($e)}`,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({picture:Je})})}async deleteMember(ve,$e){const Ke=await this.discoveryApi.getBaseUrl("bazaar");await this.fetchApi.fetch(`${Ke}/projects/${encodeURIComponent(ve)}/member/${encodeURIComponent($e)}`,{method:"DELETE"})}async getProjects(ve,$e){const Ke=await this.discoveryApi.getBaseUrl("bazaar"),Je={...ve?{limit:ve.toString()}:{},...$e?{order:$e}:{}},Rt=`projects?${new URLSearchParams(Je).toString()}`,Nt=await this.fetchApi.fetch(`${Ke}/${Rt}`);if(!Nt.ok)throw await B.o3.fromResponse(Nt);return Nt.json()}async deleteProject(ve){const $e=await this.discoveryApi.getBaseUrl("bazaar");await this.fetchApi.fetch(`${$e}/projects/${encodeURIComponent(ve)}`,{method:"DELETE"})}}const gt=(0,o.i1)({id:"bazaar",routes:{root:It},apis:[(0,o.bW)({api:ae,deps:{identityApi:l.t,discoveryApi:l.q,fetchApi:l.s},factory:({identityApi:V,discoveryApi:ve,fetchApi:$e})=>new qe({identityApi:V,discoveryApi:ve,fetchApi:$e})})]}),_t=gt.provide((0,o.QJ)({name:"BazaarPage",component:()=>e.e(3697).then(e.bind(e,93697)).then(V=>V.HomePage),mountPoint:It})),st={proposed:u.createElement(r.EV,null,"proposed"),ongoing:u.createElement(r.So,null,"ongoing")},Zt=({status:V,styles:ve})=>u.createElement("div",{className:ve},st[V]),at=({inputType:V,error:ve,control:$e,helperText:Ke,placeholder:Je,rules:Ut})=>{const Rt=V.charAt(0).toLocaleUpperCase("en-US")+V.slice(1);return u.createElement(it.xI,{name:V,control:$e,rules:Ut,render:({field:Nt})=>u.createElement(Y.A,{...Nt,required:Ut==null?void 0:Ut.required,margin:"dense",multiline:!0,id:"title",type:"text",fullWidth:!0,label:Rt,placeholder:Je,error:!!ve,helperText:ve&&Ke})})},mt=({name:V,options:ve,control:$e,error:Ke})=>{const Je=V.charAt(0).toLocaleUpperCase("en-US")+V.slice(1);return u.createElement(it.xI,{name:V,control:$e,rules:{required:!0},render:({field:Ut})=>u.createElement(f.A,{fullWidth:!0},u.createElement(ot.A,{required:!0,htmlFor:"demo-simple-select-outlined",id:"demo-simple-select-outlined-label",style:{marginTop:"0.25rem"}},Je),u.createElement(E.A,{...Ut,labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",label:Je,error:!!Ke},ve.map(Rt=>u.createElement(F.A,{key:Rt,value:Rt},Rt))))})},Qe=({name:V,control:ve,setValue:$e})=>{const Ke=`${V.charAt(0).toLocaleUpperCase("en-US")+V.slice(1,V.indexOf("D"))} date`;return u.createElement(it.xI,{name:V,control:ve,render:({field:Je})=>u.createElement(f.A,null,u.createElement(pt.M,{utils:Ge.A},u.createElement(nt.s,{disableToolbar:!0,format:"dd-MM-yyyy",label:Ke,value:Je.value,onChange:Ut=>{$e(V,Ut==null?void 0:Ut.toISO())},InputProps:{endAdornment:u.createElement(ye.A,{onClick:()=>$e(V,null)},u.createElement(De.default,null))},InputAdornmentProps:{position:"start"}})))})},Lt=(0,ce.A)({container:{marginTop:"0.25rem",textAlign:"center",display:"flex",flexDirection:"row",justifyContent:"space-between"},startDate:{float:"left"},endDate:{float:"right"},dash:{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"1.5rem",margin:"0 1rem"}}),St=({control:V,setValue:ve})=>{const $e=Lt();return u.createElement("div",{className:$e.container},u.createElement("div",{className:$e.startDate},u.createElement(Qe,{name:"startDate",control:V,setValue:ve})),u.createElement(a.A,{className:$e.dash},"-"),u.createElement("div",{className:$e.endDate},u.createElement(Qe,{name:"endDate",control:V,setValue:ve})))},en=V=>(0,Ne.A)({root:{margin:0,padding:V.spacing(2)},closeButton:{position:"absolute",right:V.spacing(1),top:V.spacing(1),color:V.palette.grey[500]}}),xt=(0,ne.A)(V=>({root:{padding:V.spacing(2)}}))(Le.A),pe=(0,ne.A)(V=>({root:{margin:0,padding:V.spacing(1)}}))(Pe.A),Fe=(0,ne.A)(en)(V=>{const{children:ve,classes:$e,onClose:Ke,...Je}=V;return u.createElement(Ae.A,{disableTypography:!0,className:$e.root,...Je},u.createElement(a.A,{variant:"h6"},ve),Ke?u.createElement(ye.A,{"aria-label":"close",className:$e.closeButton,onClick:Ke},u.createElement(G.A,null)):null)}),Mt=({handleSave:V,isAddForm:ve,title:$e,defaultValues:Ke,open:Je,projectSelector:Ut,deleteButton:Rt,handleClose:Nt})=>{const{handleSubmit:_n,reset:An,control:mn,getValues:ln,formState:{errors:M},setValue:J}=(0,it.mN)({mode:"onChange",defaultValues:Ke}),be=()=>{V(ln,An)},Re=()=>{Nt(),An(Ke)};return u.createElement("div",null,u.createElement(fe.A,{fullWidth:!0,maxWidth:"xs",onClose:Re,"aria-labelledby":"customized-dialog-title",open:Je},u.createElement(Fe,{id:"customized-dialog-title",onClose:Re},$e),u.createElement(xt,{style:{padding:"1rem",paddingTop:"0rem"},dividers:!0},u.createElement(at,{error:M.title,control:mn,rules:{required:!0},inputType:"title",helperText:"Please enter a title for your project"}),u.createElement(at,{error:M.description,control:mn,rules:{required:!0},inputType:"description",helperText:"Please enter a description"}),u.createElement(mt,{control:mn,name:"status",options:["proposed","ongoing"]}),u.createElement(mt,{control:mn,name:"size",options:["small","medium","large"]}),u.createElement(at,{error:M.responsible,control:mn,rules:{required:!0},inputType:"responsible",helperText:"Please enter a contact person",placeholder:"Contact person of the project"}),ve&&Ut,u.createElement(at,{error:M.community,control:mn,rules:{required:!1,pattern:RegExp("^(https?)://")},inputType:"community",helperText:"Please enter a link starting with http/https",placeholder:"Community link to e.g. Teams or Discord"}),u.createElement(at,{error:M.docs,control:mn,rules:{required:!1,pattern:RegExp("^(https?)://")},inputType:"docs",helperText:"Please enter a link starting with http/https",placeholder:"Project docs link"}),u.createElement(St,{setValue:J,control:mn})),u.createElement(pe,null,!ve&&Rt,u.createElement(le.A,{onClick:_n(be),color:"primary",type:"submit"},"Submit"))))},Xt=({open:V,handleClose:ve,message:$e,type:Ke,handleSubmit:Je})=>u.createElement(fe.A,{fullWidth:!0,maxWidth:"xs",onClose:ve,"aria-labelledby":"customized-dialog-title",open:V},u.createElement(Fe,{id:"customized-dialog-title",onClose:ve},Ke.charAt(0).toLocaleUpperCase("en-US")+Ke.slice(1)," project"),u.createElement(xt,{dividers:!0},$e),u.createElement(pe,null,u.createElement(le.A,{onClick:Je,color:"primary",type:"submit"},Ke))),Bt=(0,ce.A)({button:{marginLeft:"0",marginRight:"auto"},wordBreak:{wordBreak:"break-all",whiteSpace:"normal",margin:"-0.25rem 0"}}),jt=({bazaarProject:V,openEdit:ve,handleEditClose:$e,handleCardClose:Ke,fetchBazaarProject:Je})=>{var Ut,Rt;const Nt=Bt(),_n=(0,l.u)(ae),An=(0,l.u)(l.l),[mn,ln]=(0,u.useState)(!1),[M,J]=(0,u.useState)({...V,startDate:(Ut=V.startDate)!=null?Ut:null,endDate:(Rt=V.endDate)!=null?Rt:null}),be=()=>{ln(!1),$e(),Ke&&Ke()},Re=async()=>{await _n.deleteProject(V.id),be(),Je(),An.post({message:`Deleted project '${V.title}' from the Bazaar list`,severity:"success",display:"transient"})};(0,u.useEffect)(()=>{var Tt,Kt;J({...V,startDate:(Tt=V.startDate)!=null?Tt:null,endDate:(Kt=V.endDate)!=null?Kt:null})},[V]);const yt=async Tt=>{var Kt,Jt;const hn=Tt();(await _n.updateProject({...hn,id:V.id,entityRef:V.entityRef,membersCount:V.membersCount,startDate:(Kt=hn==null?void 0:hn.startDate)!=null?Kt:null,endDate:(Jt=hn==null?void 0:hn.endDate)!=null?Jt:null})).status==="ok"&&Je(),$e(),An.post({message:`Updated project '${hn.title}' in the Bazaar list`,severity:"success",display:"transient"})};return u.createElement("div",null,u.createElement(Xt,{open:mn,handleClose:be,message:["Are you sure you want to delete ",u.createElement("b",{key:V.id,className:Nt.wordBreak},V.title)," from the Bazaar?"],type:"delete",handleSubmit:Re}),u.createElement(Mt,{title:"Edit project",handleSave:yt,isAddForm:!1,defaultValues:M,open:ve,handleClose:$e,deleteButton:u.createElement(le.A,{color:"primary",type:"submit",className:Nt.button,onClick:()=>{ln(!0)}},"Delete project")}))},Ln=(0,ce.A)(V=>({value:{fontWeight:"bold",overflow:"hidden",lineHeight:"24px",wordBreak:"break-word"},label:{color:V.palette.text.secondary,textTransform:"uppercase",fontSize:"10px",fontWeight:"bold",letterSpacing:.5,overflow:"hidden",whiteSpace:"nowrap"}}));function pn(V){const{label:ve,value:$e,gridSizes:Ke,children:Je}=V,Ut=Ln(),Rt=(0,o.OJ)(Je,_n=>_n.getElements()),Nt=Rt.length>0?Rt:u.createElement(a.A,{variant:"body2",className:Ut.value},$e||"unknown");return u.createElement(ie.A,{item:!0,...Ke},u.createElement(a.A,{variant:"h2",className:Ut.label},ve),Nt)}const cn=({bazaarProject:V,members:ve,descriptionSize:$e,membersSize:Ke})=>{var Je,Ut;const Rt=(0,o.Sf)(we.sF);return u.createElement("div",null,u.createElement(oe.A,null,u.createElement(ze.A,null,u.createElement(ie.A,{container:!0},u.createElement(ie.A,{item:!0,xs:$e},u.createElement(pn,{label:"Description"},V.description.split(`
`).map((Nt,_n)=>u.createElement(a.A,{key:_n,variant:"body2",paragraph:!0},Nt)))),u.createElement(ie.A,{style:{display:"flex",justifyContent:"flex-end"},item:!0,xs:Ke},u.createElement(pn,{label:"Latest members"},ve.length?ve.slice(0,7).map(Nt=>u.createElement("div",{style:{textAlign:"left",backgroundColor:"",marginBottom:"0.3rem",marginTop:"0.3rem",display:"block"},key:Nt.userId},u.createElement(r.eu,{displayName:Nt.userId,customStyles:{width:"19px",height:"19px",fontSize:"8px",float:"left",marginRight:"0.3rem",marginTop:"0rem",marginBottom:"0rem",alignItems:"left",textAlign:"left"},picture:Nt.picture}),u.createElement(r.N_,{target:"_blank",to:Nt.userRef?`${Rt((0,A.KU)(Nt.userRef))}`:`http://github.com/${Nt.userId}`},Nt==null?void 0:Nt.userId))):u.createElement("div",null))),u.createElement(ie.A,{item:!0,xs:2},u.createElement(pn,{label:"Status"},u.createElement(Zt,{status:V.status}))),u.createElement(ie.A,{item:!0,xs:2},u.createElement(pn,{label:"size"},u.createElement(a.A,{variant:"body2"},V.size))),u.createElement(ie.A,{item:!0,xs:2},u.createElement(pn,{label:"Start date"},u.createElement(a.A,{variant:"body2"},((Je=V.startDate)==null?void 0:Je.substring(0,10))||""))),u.createElement(ie.A,{item:!0,xs:2},u.createElement(pn,{label:"End date"},u.createElement(a.A,{variant:"body2"},((Ut=V.endDate)==null?void 0:Ut.substring(0,10))||""))),u.createElement(ie.A,{item:!0,xs:4},u.createElement(pn,{label:"Responsible"},u.createElement(a.A,{variant:"body2"},V.responsible||"")))))))},En=(0,ce.A)({container:{width:"100%",minWidth:"22rem"},autocomplete:{overflow:"hidden"}}),lt=({catalogEntities:V,onChange:ve,disableClearable:$e,defaultValue:Ke,label:Je})=>{const Ut=En();return u.createElement("div",{className:Ut.container},u.createElement(X.Ay,{className:Ut.autocomplete,fullWidth:!0,disableClearable:$e,defaultValue:Ke,options:V,getOptionLabel:Rt=>{var Nt;return(Nt=Rt==null?void 0:Rt.metadata)==null?void 0:Nt.name},renderOption:Rt=>{var Nt;return u.createElement(a.A,{component:"span"},(Nt=Rt==null?void 0:Rt.metadata)==null?void 0:Nt.name)},renderInput:Rt=>u.createElement(Y.A,{...Rt,label:Je}),onChange:(Rt,Nt)=>{ve(Nt)}}))},Ot=(0,ce.A)({content:{padding:"0 1rem"}}),Vt=({openProjectSelector:V,handleProjectSelectorClose:ve,catalogEntities:$e,bazaarProject:Ke,fetchBazaarProject:Je,initEntity:Ut})=>{const Rt=Ot(),Nt=(0,l.u)(ae),_n=(0,l.u)(l.l),[An,mn]=(0,u.useState)(Ut),[ln,M]=(0,u.useState)(""),J=Re=>{mn(Re),M(Re.metadata.name)},be=async()=>{ve(),(await Nt.updateProject({...Ke,entityRef:(0,A.U2)(An)})).status==="ok"&&(Je(),_n.post({message:`linked entity '${ln}' to the project ${Ke.title}`,severity:"success",display:"transient"}))};return u.createElement(fe.A,{onClose:ve,open:V},u.createElement(Fe,{id:"customized-dialog-title",onClose:ve},"Select entity"),u.createElement(Le.A,{className:Rt.content,dividers:!0},u.createElement(lt,{label:"",onChange:J,catalogEntities:$e||[],disableClearable:!0,defaultValue:$e[0]||null})),u.createElement(Pe.A,null,u.createElement(le.A,{onClick:be,color:"primary",type:"submit"},"OK")))},Dt=(V,ve)=>new Date(ve.joinDate).getTime()-new Date(V.joinDate).getTime(),ct=(V,ve)=>{const $e=new Date(V.updatedAt).getTime();return new Date(ve.updatedAt).getTime()-$e},je=(V,ve)=>V.title.localeCompare(ve.title),Yt=(V,ve)=>ve.title.localeCompare(V.title),Gt=(V,ve)=>ve.membersCount-V.membersCount,sn=V=>({id:V.id,entityRef:V.entity_ref,title:V.title,community:V.community,description:V.description,status:V.status,updatedAt:V.updated_at,membersCount:V.members_count,size:V.size,startDate:V.start_date,endDate:V.end_date,responsible:V.responsible,docs:V.docs}),bn=V=>({itemId:V.item_id,userId:V.user_id,userRef:V.user_ref,joinDate:V.join_date,picture:V.picture}),In=async V=>{if(V){const ve=await V.json().then($e=>$e.data[0]);if(ve)return sn(ve)}return null},Pn=async(V,ve)=>{const $e=await V.getMembers(ve.id);if($e.data.length>0){const Ke=$e.data.map(Je=>bn(Je));return Ke.sort(Dt),Ke}return[]},qn=async V=>(await V.getEntities({filter:{kind:["Component","Resource"]},fields:["kind","metadata.name","metadata.namespace"]})).items,Gn=(0,ce.A)({wordBreak:{wordBreak:"break-all",whiteSpace:"normal",margin:"-0.25rem 0"}}),Nn=({initProject:V,handleClose:ve,initEntity:$e})=>{var Ke,Je,Ut,Rt,Nt,_n,An,mn,ln,M,J,be,Re,yt;const Tt=Gn(),Kt=(0,o.Sf)(we.sF),Jt=(0,l.u)(ae),hn=(0,l.u)(l.t),Dn=(0,l.u)(l.l),he=(0,l.u)(we.vp),[Ve,Be]=(0,u.useState)(!1),[At,Pt]=(0,u.useState)(!1),[tn,Ct]=(0,u.useState)(!1),[Ft,gn]=(0,u.useState)(!1),[Cn,an]=(0,te.default)(async()=>{const ia=await qn(he),Ua=(await Jt.getProjects()).data.filter($a=>$a.entity_ref!==null).map($a=>$a.entity_ref);return ia.filter($a=>!Ua.includes((0,A.U2)($a)))}),[fn,Wn]=(0,te.default)(async()=>{const ia=await Jt.getProjectById(V.id);return await In(ia)}),[jn,ea]=(0,te.default)(async()=>{var ia;return Pn(Jt,(ia=fn.value)!=null?ia:V)}),[kn,Fn]=(0,te.default)(async()=>await(await hn.getProfileInfo()).displayName);(0,u.useEffect)(()=>{ea(),Wn(),an(),Fn()},[ea,Wn,an,Fn]),(0,u.useEffect)(()=>{var ia;jn.value&&kn.value&&gn(((ia=jn.value)==null?void 0:ia.map(Da=>Da.userId).indexOf(kn.value))>=0)},[fn.value,jn,hn,kn.value]);const ra=async()=>{kn.value&&(Ft?await Jt.deleteMember(fn.value.id,kn.value):await Jt.addMember(fn.value.id,kn.value),gn(!Ft),ea())},la=()=>{var ia;if((ia=fn==null?void 0:fn.value)!=null&&ia.entityRef){const{name:Da,kind:Ua,namespace:$a}=(0,A.KU)(fn.value.entityRef);return Kt({kind:Ua,namespace:$a,name:Da})}return""},Aa=()=>{var ia;(ia=fn.value)!=null&&ia.entityRef?Ct(!0):(an(),Pt(!0))},ya=[{label:"Entity page",icon:u.createElement(H.A,null),href:(Ke=fn.value)!=null&&Ke.entityRef?la():"",disabled:((Je=fn.value)==null?void 0:Je.entityRef)===null},{label:(Ut=fn.value)!=null&&Ut.entityRef?"Unlink project":"Link project",icon:(Rt=fn.value)!=null&&Rt.entityRef?u.createElement(Oe.A,null):u.createElement(g.A,null),onClick:Aa},{label:Ft?"Leave":"Join",icon:Ft?u.createElement(N.A,null):u.createElement(Q.A,null),href:"",onClick:async()=>{ra()}},{label:"Community",icon:u.createElement(_e.A,null),href:(Nt=fn.value)==null?void 0:Nt.community,disabled:!((_n=fn.value)!=null&&_n.community)||!Ft},{label:"Docs",icon:u.createElement(ue.A,null),href:(An=fn.value)==null?void 0:An.docs,disabled:((mn=fn.value)==null?void 0:mn.docs)===null||((ln=fn.value)==null?void 0:ln.docs)===""}],Oa=async()=>{var ia,Da;(await Jt.updateProject({...fn.value,entityRef:null})).status==="ok"&&(Ct(!1),Wn(),Dn.post({message:`Unlinked entity '${(0,A.KU)((ia=fn.value)==null?void 0:ia.entityRef).name}' from the project ${(Da=fn.value)==null?void 0:Da.title}`,severity:"success",display:"transient"}))};return fn.error?u.createElement(Ue.A,{severity:"error"},(M=fn==null?void 0:fn.error)==null?void 0:M.message):jn.error?u.createElement(Ue.A,{severity:"error"},(J=jn==null?void 0:jn.error)==null?void 0:J.message):u.createElement("div",null,u.createElement(Vt,{openProjectSelector:At,handleProjectSelectorClose:()=>Pt(!1),catalogEntities:Cn.value||[],bazaarProject:fn.value||V,fetchBazaarProject:Wn,initEntity:$e}),tn&&u.createElement(Xt,{open:tn,handleClose:()=>Ct(!1),message:["Are you sure you want to unlink ",u.createElement("b",{className:Tt.wordBreak},(0,A.KU)((be=fn.value)==null?void 0:be.entityRef).name)," from ",u.createElement("b",{className:Tt.wordBreak},(Re=fn.value)==null?void 0:Re.title)," ?"],type:"unlink",handleSubmit:Oa}),u.createElement(oe.A,null,u.createElement(jt,{bazaarProject:fn.value||V,openEdit:Ve,handleEditClose:()=>Be(!1),handleCardClose:ve,fetchBazaarProject:Wn}),u.createElement(C.A,{title:u.createElement(a.A,{paragraph:!0,className:Tt.wordBreak},((yt=fn.value)==null?void 0:yt.title)||V.title),action:u.createElement("div",null,u.createElement(ye.A,{onClick:()=>Be(!0)},u.createElement(se.A,null)),u.createElement(ye.A,{onClick:ve},u.createElement(G.A,null))),subheader:u.createElement(r.Pu,{links:ya})}),u.createElement(ee.A,null),u.createElement(cn,{bazaarProject:fn.value||V,members:jn.value||[],descriptionSize:9,membersSize:3})))},On=(0,ce.A)(V=>({description:ve=>({height:ve.height==="large"?"10rem":"4rem",WebkitBackgroundClip:"text",backgroundImage:`linear-gradient(180deg, ${V.palette.textContrast} 0%, ${V.palette.textContrast} 60%, transparent 100%)`,color:"transparent"}),statusTag:{display:"inline-block",whiteSpace:"nowrap",marginBottom:"0.8rem"},memberCount:{float:"right"},header:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",height:"5rem"}})),Jn=({project:V,fetchBazaarProjects:ve,catalogEntities:$e,height:Ke})=>{const Je=On({height:Ke}),[Ut,Rt]=(0,u.useState)(!1),{id:Nt,title:_n,status:An,updatedAt:mn,description:ln,membersCount:M}=V,J=()=>{Rt(!1),ve()};return u.createElement("div",null,u.createElement(fe.A,{fullWidth:!0,onClose:J,open:Ut},u.createElement(Nn,{initProject:V,handleClose:J,initEntity:$e[0]||null})),u.createElement(oe.A,{key:Nt},u.createElement(R.A,{onClick:()=>Rt(!0)},u.createElement(r.f1,{classes:{root:Je.header},title:_n,subtitle:`updated ${re.c9.fromISO(new Date(mn).toISOString()).toRelative({base:re.c9.now()})}`}),u.createElement(ze.A,null,u.createElement(Zt,{styles:Je.statusTag,status:An}),u.createElement(a.A,{variant:"body2",className:Je.memberCount},Number(M)===1?`${M} member`:`${M} members`),u.createElement(a.A,{variant:"body2",className:Je.description},ln)))))},aa=(0,ce.A)({content:{width:"100%",display:"flex",flexWrap:"wrap",alignItems:"center"},empty:{height:"10rem",textAlign:"center",verticalAlign:"middle",lineHeight:"10rem"},pagination:{marginTop:"1rem",marginLeft:"auto",marginRight:"0"}}),ft=({bazaarProjects:V,fetchBazaarProjects:ve,catalogEntities:$e,useTablePagination:Ke=!0,gridSize:Je=2,height:Ut="large"})=>{const Rt=aa(),[Nt,_n]=(0,u.useState)(1),[An,mn]=(0,u.useState)(12),ln=(J,be)=>{_n(be+1)},M=J=>{mn(parseInt(J.target.value,10)),_n(1)};return V.length?u.createElement(p.A,{className:Rt.content},u.createElement(ie.A,{wrap:"wrap",container:!0,spacing:3},V.slice((Nt-1)*An,An*Nt).map((J,be)=>u.createElement(ie.A,{key:be,item:!0,xs:Je},u.createElement(Jn,{project:J,key:be,fetchBazaarProjects:ve,catalogEntities:$e,height:Ut})))),Ke&&u.createElement(w.A,{component:"div",className:Rt.pagination,rowsPerPageOptions:[12,24,48,96],count:V==null?void 0:V.length,page:Nt-1,onPageChange:ln,rowsPerPage:An,onRowsPerPageChange:M,backIconButtonProps:{disabled:Nt===1},nextIconButtonProps:{disabled:An*Nt>=V.length}})):u.createElement("div",{className:Rt.empty},"Please add projects to the Bazaar.")},m=(V,ve)=>{const $e=V.map(Ke=>Ke.entityRef);return ve.filter(Ke=>!($e!=null&&$e.includes((0,A.U2)(Ke))))},D=V=>{var ve;const{title:$e,order:Ke,fullWidth:Je=!1,fullHeight:Ut=!1}=V,Rt=(0,l.u)(ae),Nt=(0,l.u)(we.vp),_n=(0,o.Sf)(gt.routes.root),An=Ke==="latest"?"Bazaar Latest Projects":"Bazaar Random Projects",mn={title:"Go to Bazaar",link:`${_n()}`},[ln,M]=(0,u.useState)(),[J,be]=(0,te.default)(async()=>await qn(Nt)),[Re,yt]=(0,te.default)(async()=>{const Kt=Je?6:3;return(await Rt.getProjects(Kt,Ke)).data.map(sn)}),Tt=(ve=J.value)==null?void 0:ve.map(Kt=>(0,A.U2)(Kt));return(0,u.useEffect)(()=>{(()=>{var Jt;Tt&&((Jt=Re.value)==null||Jt.forEach(async hn=>{hn.entityRef&&(Tt!=null&&Tt.includes(hn.entityRef)||await Rt.updateProject({...hn,entityRef:null}))}))})()},[Rt,Re.value,Tt,J.value]),(0,u.useEffect)(()=>{be(),yt()},[yt,be]),(0,u.useEffect)(()=>{const Kt=m(Re.value||[],J.value||[]);Kt&&M(Kt)},[Re,J]),J.error?u.createElement(r.bJ,{error:J.error}):Re.error?u.createElement(r.bJ,{error:Re.error}):u.createElement(r.nO,{title:$e!=null?$e:An,action:u.createElement(ye.A,null,u.createElement(r.N_,{to:mn.link,title:mn.title},u.createElement(Wt.A,null)))},u.createElement(ft,{bazaarProjects:Re.value||[],fetchBazaarProjects:yt,catalogEntities:ln||[],useTablePagination:!1,gridSize:Je?2:4,height:Ut?"large":"small"}))},j=(0,ce.A)({wordBreak:{wordBreak:"break-all",whiteSpace:"normal",margin:"-0.25rem 0"}}),de=({bazaarProject:V,fetchBazaarProject:ve})=>{var $e;const Ke=j(),Je=(0,l.u)(ae),Ut=(0,l.u)(l.t),[Rt,Nt]=(0,u.useState)(!1),[_n,An]=(0,u.useState)(!1),[mn,ln]=(0,u.useState)(!1),[M,J]=(0,te.default)(async()=>V?await Pn(Je,V):[]),[be,Re]=(0,te.default)(async()=>await(await Ut.getProfileInfo()).displayName);(0,u.useEffect)(()=>{J(),Re()},[J,Re]),(0,u.useEffect)(()=>{var Dn;M.value&&be.value&&An(((Dn=M.value)==null?void 0:Dn.map(he=>he.userId).indexOf(be.value))>=0)},[V,M,Ut,be.value]);const yt=async()=>{be.value&&(_n?await Je.deleteMember(V.id,be.value):await Je.addMember(V==null?void 0:V.id,be.value),An(!_n),J())},Tt=[{label:"Entity page",icon:u.createElement(H.A,null),disabled:!0},{label:"Unlink project",icon:u.createElement(Oe.A,null),disabled:!1,onClick:()=>{ln(!0)}},{label:_n?"Leave":"Join",icon:_n?u.createElement(N.A,null):u.createElement(Q.A,null),href:"",onClick:async()=>{yt()}},{label:"Community",icon:u.createElement(_e.A,null),href:V==null?void 0:V.community,disabled:(V==null?void 0:V.community)===""||!_n},{label:"Docs",icon:u.createElement(ue.A,null),href:V==null?void 0:V.docs,disabled:(V==null?void 0:V.docs)===null||(V==null?void 0:V.docs)===""}],Kt=()=>{Nt(!1)},Jt=()=>{ln(!1)},hn=async()=>{(await Je.updateProject({...V,entityRef:null})).status==="ok"&&(Jt(),ve())};return M.error?u.createElement(Ue.A,{severity:"error"},($e=M==null?void 0:M.error)==null?void 0:$e.message):V?u.createElement("div",null,u.createElement(jt,{bazaarProject:V,openEdit:Rt,handleEditClose:Kt,fetchBazaarProject:ve}),mn&&u.createElement(Xt,{open:mn,handleClose:Jt,message:["Are you sure you want to unlink ",u.createElement("b",{className:Ke.wordBreak},(0,A.KU)(V.entityRef).name)," from ",u.createElement("b",{className:Ke.wordBreak},V.title)," ?"],type:"unlink",handleSubmit:hn}),u.createElement(C.A,{title:u.createElement(a.A,{paragraph:!0,className:Ke.wordBreak},V==null?void 0:V.title),action:u.createElement("div",null,u.createElement(ye.A,{onClick:()=>{Nt(!0)}},u.createElement(se.A,null))),subheader:u.createElement(r.Pu,{links:Tt})}),u.createElement(ee.A,null),u.createElement(cn,{bazaarProject:V,members:M.value||[],descriptionSize:10,membersSize:2})):null},x=()=>{var V;const{entity:ve}=(0,ht.u)(),$e=(0,l.u)(ae),[Ke,Je]=(0,te.default)(async()=>{const Nt=await $e.getProjectByRef((0,A.U2)(ve));return await In(Nt)}),[Ut,Rt]=(0,u.useState)((V=Ke.value)!=null?V:!1);return(0,u.useEffect)(()=>{Je()},[Je]),(0,u.useEffect)(()=>{const Nt=Ke.value!==void 0;Rt(Nt)},[Ke.value]),Ut?u.createElement(oe.A,null,u.createElement(de,{bazaarProject:Ke.value,fetchBazaarProject:Je})):null},$=({catalogEntities:V,open:ve,handleClose:$e,fetchBazaarProjects:Ke,fetchCatalogEntities:Je})=>{const Ut=(0,l.u)(ae),Rt=(0,l.u)(l.l),[Nt,_n]=(0,u.useState)(null),An={title:"",community:"",description:"",docs:"",status:"proposed",size:"medium",responsible:"",startDate:null,endDate:null},mn=M=>{_n(M)},ln=async(M,J)=>{var be,Re;const yt=M();(await Ut.addProject({...yt,entityRef:Nt?(0,A.U2)(Nt):null,startDate:(be=yt.startDate)!=null?be:null,endDate:(Re=yt.endDate)!=null?Re:null})).status==="ok"&&(Ke(),Je(),Rt.post({message:`Added project '${yt.title}' to the Bazaar list`,severity:"success",display:"transient"})),$e(),J(An)};return u.createElement(Mt,{handleSave:ln,title:"Add project",isAddForm:!0,defaultValues:An,open:ve,projectSelector:u.createElement(lt,{onChange:mn,catalogEntities:V||[],disableClearable:!1,defaultValue:null,label:"Select a project"}),handleClose:$e})},q=(0,ce.A)({select:{fontSize:"xx-large",fontWeight:"bold",width:"16rem"}}),xe=({sortMethodNbr:V,handleSortMethodChange:ve})=>{const $e=q();return u.createElement(f.A,{fullWidth:!0},u.createElement(E.A,{className:$e.select,disableUnderline:!0,value:V,onChange:ve},u.createElement(F.A,{value:0},"Latest updated"),u.createElement(F.A,{value:1},"A-Z"),u.createElement(F.A,{value:2},"Z-A"),u.createElement(F.A,{value:3},"Most members")))},ke=(0,ce.A)({button:{minWidth:"11rem"},container:{marginTop:"2rem"},header:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",margin:"0 auto",marginBottom:"1.2rem"},search:{marginRight:"1rem",height:"2.5rem",width:"35rem"}}),vt=(V,ve)=>{const $e=V.map(Ke=>Ke.entityRef);return ve.filter(Ke=>!($e!=null&&$e.includes((0,A.U2)(Ke))))},kt=V=>{var ve;const{fullWidth:$e=!0,fullHeight:Ke=!0}=V,Je=(0,l.u)(ae),Ut=(0,l.u)(we.vp),Rt=ke(),Nt=[ct,je,Yt,Gt],[_n,An]=(0,u.useState)(0),[mn,ln]=(0,u.useState)(!1),[M,J]=(0,u.useState)(""),[be,Re]=(0,u.useState)(),[yt,Tt]=(0,te.default)(async()=>await qn(Ut)),[Kt,Jt]=(0,te.default)(async()=>{const Ve=await Je.getProjects(),Be=[];return Ve.data.forEach(At=>{Be.push(sn(At))}),Be}),hn=(ve=yt.value)==null?void 0:ve.map(Ve=>(0,A.U2)(Ve)),Dn=()=>{var Ve;return(Ve=Kt.value)==null?void 0:Ve.filter(Be=>Be.title.includes(M)).sort(Nt[_n])};(0,u.useEffect)(()=>{(()=>{var Be;hn&&((Be=Kt.value)==null||Be.forEach(async At=>{At.entityRef&&(hn!=null&&hn.includes(At.entityRef)||await Je.updateProject({...At,entityRef:null}))}))})()},[Je,Kt.value,hn,yt.value]),(0,u.useEffect)(()=>{Tt(),Jt()},[Jt,Tt]),(0,u.useEffect)(()=>{const Ve=vt(Kt.value||[],yt.value||[]);Ve&&Re(Ve)},[Kt,yt]);const he=Ve=>{An(typeof Ve.target.value=="number"?Ve.target.value:0)};return yt.error?u.createElement(Ue.A,{severity:"error"},yt.error.message):Kt.error?u.createElement(Ue.A,{severity:"error"},Kt.error.message):u.createElement(r.UC,{noPadding:!0},u.createElement("div",{className:Rt.header},u.createElement(xe,{sortMethodNbr:_n,handleSortMethodChange:he}),u.createElement(bt.A,{className:Rt.search,value:M,onChange:Ve=>{J(Ve)},onCancelSearch:()=>{J("")}}),u.createElement(le.A,{className:Rt.button,variant:"contained",color:"primary",onClick:()=>{ln(!0)}},"Add project"),u.createElement($,{catalogEntities:be||[],handleClose:()=>{ln(!1)},open:mn,fetchBazaarProjects:Jt,fetchCatalogEntities:Tt}),u.createElement(r.Yl,null)),u.createElement(ft,{bazaarProjects:Dn()||[],fetchBazaarProjects:Jt,catalogEntities:be||[],gridSize:$e?2:4,height:Ke?"large":"small"}),u.createElement(r.UC,{noPadding:!0,className:Rt.container}))}},99993:(wn,wt,e)=>{"use strict";e.d(wt,{C4:()=>B,Nf:()=>u,tS:()=>r});var o=e(50585);const l="catalog-entity",A=(0,o.iP)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:l}),B=(0,o.iP)({name:"catalog.entity.create",attributes:{action:"create"}}),u=(0,o.iP)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:l}),r=(0,o.iP)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:l}),Y=(0,o.iP)({name:"catalog.location.read",attributes:{action:"read"}}),ye=(0,o.iP)({name:"catalog.location.create",attributes:{action:"create"}}),ce=(0,o.iP)({name:"catalog.location.delete",attributes:{action:"delete"}}),a=[A,B,u,r,Y,ye,ce]},96900:(wn,wt,e)=>{"use strict";e.d(wt,{A:()=>p,D:()=>w,E:()=>se,a:()=>Q,c:()=>_e});var o=e(29835),l=e(23180),A=e(11638),B=e(48821),u=e(58837),r=e(54917),Y=e(78467),ye=e(53373),ce=e.n(ye),a=e(14041),fe=e(22249),le=e(92651),ie=e(10437),oe=e(16983),ze=e(5030);const Le=(0,fe.A)(g=>({text:{fill:g.palette.textContrast},secondary:{fill:g.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function Pe({edge:{relations:g}}){const H=Le();return a.createElement("text",{className:H.text,textAnchor:"middle"},g.map((G,Oe)=>a.createElement("tspan",{key:G,className:ce()(Oe>0&&H.secondary)},Oe>0&&a.createElement("tspan",null," / "),G)))}function C({kind:g,...H}){var G;const ue=(G=(0,A.nm)().getSystemIcon(`kind:${g.toLocaleLowerCase("en-US")}`))!=null?G:ie.A;return a.createElement(ue,{...H})}const ee=(0,u.A)(g=>({node:{fill:g.palette.grey[300],stroke:g.palette.grey[300],"&.primary":{fill:g.palette.primary.light,stroke:g.palette.primary.light},"&.secondary":{fill:g.palette.secondary.light,stroke:g.palette.secondary.light}},text:{fill:g.palette.getContrastText(g.palette.grey[300]),"&.primary":{fill:g.palette.primary.contrastText},"&.secondary":{fill:g.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function R({node:{id:g,entity:H,color:G="default",focused:Oe,onClick:ue}}){const it=ee(),[ot,pt]=(0,a.useState)(0),[nt,Ge]=(0,a.useState)(0),De=(0,A.nm)(),Ae=(0,a.useRef)(null);(0,a.useLayoutEffect)(()=>{if(Ae.current){let{height:O,width:S}=Ae.current.getBBox();O=Math.round(O),S=Math.round(S),(O!==nt||S!==ot)&&(pt(S),Ge(O))}},[ot,nt]);const{kind:Ne,metadata:{name:ne,namespace:N=o.oQ,title:X}}=H,Ue=De.getSystemIcon(`kind:${Ne.toLocaleLowerCase("en-US")}`),te=10,we=nt,ht=Ue?we+te:0,Wt=ht+ot+te*2,bt=nt+te*2,It=X!=null?X:Ne&&ne&&N?(0,le.SE)({kind:Ne,name:ne,namespace:N}):g;return a.createElement("g",{onClick:ue,className:ce()(ue&&it.clickable)},a.createElement("rect",{className:ce()(it.node,G==="primary"&&"primary",G==="secondary"&&"secondary"),width:Wt,height:bt,rx:10}),Ue&&a.createElement(C,{kind:Ne,y:te,x:te,width:we,height:we,className:ce()(it.text,Oe&&"focused",G==="primary"&&"primary",G==="secondary"&&"secondary")}),a.createElement("text",{ref:Ae,className:ce()(it.text,Oe&&"focused",G==="primary"&&"primary",G==="secondary"&&"secondary"),y:bt/2,x:ht+(ot+te*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},It))}const p=[[o.L8,o.vv],[o.Ey,o.fO],[o.IB,o.ZD],[o.sA,o.jn],[o.Kx,o.Qz],[o.zj,o.u0],[o.nC,o.fT]];var w=(g=>(g.TOP_BOTTOM="TB",g.BOTTOM_TOP="BT",g.LEFT_RIGHT="LR",g.RIGHT_LEFT="RL",g))(w||{});function f(){const g=(0,B.u)(le.vp),H=(0,a.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[G,Oe]=(0,a.useState)({}),ue=(0,a.useCallback)(()=>{const{cachedEntities:De,requestedEntities:Ae}=H.current,Ne={};Ae.forEach(ne=>{const N=De.get(ne);N&&(Ne[ne]=N)}),Oe(Ne)},[H,Oe]),[it,ot]=(0,ze.default)(async()=>{const{requestedEntities:De,cachedEntities:Ae}=H.current,Ne=Array.from(De).filter(N=>!Ae.has(N));if(Ne.length===0){ue();return}const{items:ne}=await g.getEntitiesByRefs({entityRefs:Ne});ne.forEach(N=>{if(N){const X=(0,o.U2)(N);Ae.set(X,N)}}),ue()},[H,ue]),{loading:pt,error:nt}=it,Ge=(0,a.useCallback)(De=>{const Ae=new Set(De),{requestedEntities:Ne}=H.current;(Ae.size!==Ne.size||Array.from(Ae).some(ne=>!Ne.has(ne)))&&(H.current.requestedEntities=Ae,ot(),ue())},[H,ot,ue]);return{entities:G,loading:pt,error:nt,requestEntities:Ge}}function E({rootEntityRefs:g,filter:{maxDepth:H=Number.POSITIVE_INFINITY,relations:G,kinds:Oe}={}}){const{entities:ue,loading:it,error:ot,requestEntities:pt}=f();return(0,a.useEffect)(()=>{const nt=new Set([...g]),Ge=new Set;let De=[...g],Ae=0;for(;De.length>0&&(!isFinite(H)||Ae<H);){const Ne=De;for(De=[];Ne.length>0;){const ne=Ne.shift(),N=ue[ne];if(Ge.add(ne),N&&N.relations)for(const X of N.relations)(!G||G.includes(X.type))&&(!Oe||Oe.some(Ue=>X.targetRef.startsWith(`${Ue.toLocaleLowerCase("en-US")}:`)))&&(Ge.has(X.targetRef)||(De.push(X.targetRef),nt.add(X.targetRef)))}++Ae}pt([...nt])},[ue,g,H,G,Oe,pt]),{entities:ue,loading:it,error:ot}}function F({rootEntityRefs:g,maxDepth:H=Number.POSITIVE_INFINITY,unidirectional:G=!0,mergeRelations:Oe=!0,kinds:ue,relations:it,onNodeClick:ot,relationPairs:pt=p}){const[nt,Ge]=(0,a.useState)({}),{entities:De,loading:Ae,error:Ne}=E({rootEntityRefs:g,filter:{maxDepth:H,kinds:ue,relations:it}});return(0,oe.A)(()=>{var ne;if(!De||Object.keys(De).length===0){Ge({});return}const N=Object.entries(De).map(([we,ht])=>{const Wt=g.includes(we),bt={id:we,entity:ht,focused:Wt,color:Wt?"secondary":"primary",kind:ht.kind,name:ht.metadata.name,namespace:ht.metadata.namespace||o.oQ,title:ht.metadata.title,spec:ht.spec};return ot&&(bt.onClick=It=>ot(bt,It)),bt}),X=[],Ue=new Set,te=[...g];for(;te.length>0;){const we=te.pop(),ht=De[we];Ue.add(we),ht&&((ne=ht==null?void 0:ht.relations)==null||ne.forEach(Wt=>{var bt;if(De[Wt.targetRef]&&!(it&&!it.includes(Wt.type))&&!(ue&&!ue.some(It=>Wt.targetRef.startsWith(`${It.toLocaleLowerCase("en-US")}:`)))){if(!G||!Ue.has(Wt.targetRef))if(Oe){const It=(bt=pt.find(([S,K])=>S===Wt.type||K===Wt.type))!=null?bt:[Wt.type],[O]=It;X.push({from:O===Wt.type?we:Wt.targetRef,to:O===Wt.type?Wt.targetRef:we,relations:It,label:"visible"})}else X.push({from:we,to:Wt.targetRef,relations:[Wt.type],label:"visible"});Ue.has(Wt.targetRef)||(te.push(Wt.targetRef),Ue.add(Wt.targetRef))}}))}Ge({nodes:N,edges:X})},100,[De,g,ue,it,G,Oe,ot,pt]),{loading:Ae,error:Ne,...nt}}const re=(0,u.A)(g=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${g.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),se=g=>{const{rootEntityNames:H,maxDepth:G=2,unidirectional:Oe=!0,mergeRelations:ue=!0,kinds:it,relations:ot,direction:pt=w.LEFT_RIGHT,onNodeClick:nt,relationPairs:Ge=p,className:De,zoom:Ae="enabled",renderNode:Ne,renderLabel:ne,curve:N,showArrowHeads:X}=g,Ue=(0,r.A)(),te=re(),we=(0,a.useMemo)(()=>(Array.isArray(H)?H:[H]).map(S=>(0,o.U2)(S)),[H]),ht=(0,B.u)(B.r),{loading:Wt,error:bt,nodes:It,edges:O}=F({rootEntityRefs:we,maxDepth:G,unidirectional:Oe,mergeRelations:ue,kinds:it,relations:ot,onNodeClick:nt,relationPairs:Ge});return(0,a.useEffect)(()=>{bt&&ht.post(bt)},[ht,bt]),a.createElement("div",{className:ce()(te.container,De)},Wt&&a.createElement(Y.A,{className:te.progress}),It&&O&&a.createElement(l.wB,{nodes:It,edges:O,renderNode:Ne||R,renderLabel:ne||Pe,direction:pt,className:te.graph,paddingX:Ue.spacing(4),paddingY:Ue.spacing(4),labelPosition:l.DT.LabelPosition.RIGHT,labelOffset:Ue.spacing(1),zoom:Ae,curve:N,showArrowHeads:X}))},_e=(0,A.HM)({id:"catalog-graph"}),Q=(0,A.Il)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0})},18638:(wn,wt,e)=>{"use strict";e.d(wt,{N9:()=>ye,NW:()=>Y});var o=e(96900),l=e(11638),A=e(53373),B=e.n(A),u=e(14041);const r=(0,l.i1)({id:"catalog-graph",routes:{catalogGraph:o.c},externalRoutes:{catalogEntity:o.a}}),Y=r.provide((0,l.NC)({name:"EntityCatalogGraphCard",component:{lazy:()=>e.e(1003).then(e.bind(e,63384)).then(ce=>ce.CatalogGraphCard)}})),ye=r.provide((0,l.QJ)({name:"CatalogGraphPage",component:()=>e.e(7168).then(e.bind(e,17168)).then(ce=>ce.CatalogGraphPage),mountPoint:o.c}))},73929:(wn,wt,e)=>{"use strict";e.d(wt,{C:()=>p,a:()=>ce,c:()=>R,d:()=>fe,g:()=>le});var o=e(48821),l=e(11638),A=e(33478),B=e(92651),u=e(49863),r=e(93584),Y=e(52536),ye=e.n(Y);const ce=(0,o.c)({id:"plugin.catalog-import.service"}),a=(w,f)=>{const E=w.github.byUrl(f);if(!E)return;const{name:F,owner:re}=ye()(f);return{repo:F,owner:re,githubIntegrationConfig:E.config}};function fe(w){const{ref:f,...E}=w;return{inputRef:f,...E}}function le(w){var f;return(f=w.getOptionalString("catalog.import.entityFilename"))!=null?f:"catalog-info.yaml"}function ie(w){var f;return(f=w.getOptionalString("catalog.import.pullRequestBranchName"))!=null?f:"backstage-integration"}var oe=Object.defineProperty,ze=(w,f,E)=>f in w?oe(w,f,{enumerable:!0,configurable:!0,writable:!0,value:E}):w[f]=E,Le=(w,f,E)=>(ze(w,typeof f!="symbol"?f+"":f,E),E);class Pe{constructor(f){Le(this,"discoveryApi"),Le(this,"identityApi"),Le(this,"scmAuthApi"),Le(this,"scmIntegrationsApi"),Le(this,"catalogApi"),Le(this,"configApi"),this.discoveryApi=f.discoveryApi,this.scmAuthApi=f.scmAuthApi,this.identityApi=f.identityApi,this.scmIntegrationsApi=f.scmIntegrationsApi,this.catalogApi=f.catalogApi,this.configApi=f.configApi}async analyzeUrl(f){var E;if(new URL(f).pathname.match(/\.ya?ml$/)||(E=new URL(f).searchParams.get("path"))!=null&&E.match(/.ya?ml$/)){const se=await this.catalogApi.addLocation({type:"url",target:f,dryRun:!0});return{type:"locations",locations:[{exists:se.exists,target:se.location.target,entities:se.entities.map(_e=>{var Q;return{kind:_e.kind,namespace:(Q=_e.metadata.namespace)!=null?Q:"default",name:_e.metadata.name}})}]}}if(!a(this.scmIntegrationsApi,f)){const se=this.scmIntegrationsApi.byUrl(f),_e=le(this.configApi);throw se?new Error(`The ${se.title} integration only supports full URLs to ${_e} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${_e} file instead.`)}const re=await this.analyzeLocation({repo:f});if(re.existingEntityFiles.length>0){const se=re.existingEntityFiles.reduce((_e,Q)=>{var g;return _e[Q.location.target]={target:Q.location.target,exists:Q.isRegistered,entities:[...Q.location.target in _e?_e[Q.location.target].entities:[],{name:Q.entity.metadata.name,namespace:(g=Q.entity.metadata.namespace)!=null?g:"default",kind:Q.entity.kind}]},_e},{});return{type:"locations",locations:Object.values(se)}}return{type:"repository",integrationType:"github",url:f,generatedEntities:re.generateEntities.map(se=>se.entity)}}async preparePullRequest(){var f;const E=(f=this.configApi.getOptionalString("app.title"))!=null?f:"Backstage",F=this.configApi.getString("app.baseUrl");return{title:`Add ${le(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${E} software catalog](${F}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`}}async submitPullRequest(f){const{repositoryUrl:E,fileContent:F,title:re,body:se}=f,_e=a(this.scmIntegrationsApi,E);if(_e)return await this.submitGitHubPrToRepo({..._e,repositoryUrl:E,fileContent:F,title:re,body:se});throw new Error("unimplemented!")}async analyzeLocation(f){const{token:E}=await this.identityApi.getCredentials(),F=await fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json",...E&&{Authorization:`Bearer ${E}`}},method:"POST",body:JSON.stringify({location:{type:"url",target:f.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(se=>{throw new Error(`Failed to generate entity definitions, ${se.message}`)});if(!F.ok)throw new Error(`Failed to generate entity definitions. Received http response ${F.status}: ${F.statusText}`);return await F.json()}async submitGitHubPrToRepo(f){const{owner:E,repo:F,title:re,body:se,fileContent:_e,repositoryUrl:Q,githubIntegrationConfig:g}=f,{token:H}=await this.scmAuthApi.getCredentials({url:Q,additionalScope:{repoWrite:!0}}),G=new u.E({auth:H,baseUrl:g.apiBaseUrl}),Oe=ie(this.configApi),ue=le(this.configApi),it=await G.repos.get({owner:E,repo:F}).catch(nt=>{throw new Error(C("Couldn't fetch repo data",nt))}),ot=await G.git.getRef({owner:E,repo:F,ref:`heads/${it.data.default_branch}`}).catch(nt=>{throw new Error(C("Couldn't fetch default branch data",nt))});return await G.git.createRef({owner:E,repo:F,ref:`refs/heads/${Oe}`,sha:ot.data.object.sha}).catch(nt=>{throw new Error(C(`Couldn't create a new branch with name '${Oe}'`,nt))}),await G.repos.createOrUpdateFileContents({owner:E,repo:F,path:ue,message:re,content:r.o4.encode(_e),branch:Oe}).catch(nt=>{throw new Error(C(`Couldn't create a commit with ${ue} file added`,nt))}),{link:(await G.pulls.create({owner:E,repo:F,title:re,head:Oe,body:se,base:it.data.default_branch}).catch(nt=>{throw new Error(C(`Couldn't create a pull request for ${Oe} branch`,nt))})).data.html_url,location:`https://${g.host}/${E}/${F}/blob/${it.data.default_branch}/${ue}`}}}function C(w,f){return`${w}, received http response status code ${f.status}: ${f.message}`}const ee=(0,l.HM)({id:"catalog-import"}),R=(0,l.i1)({id:"catalog-import",apis:[(0,l.bW)({api:ce,deps:{discoveryApi:o.q,scmAuthApi:A.$J,identityApi:o.t,scmIntegrationsApi:A.YT,catalogApi:B.vp,configApi:o.p},factory:({discoveryApi:w,scmAuthApi:f,identityApi:E,scmIntegrationsApi:F,catalogApi:re,configApi:se})=>new Pe({discoveryApi:w,scmAuthApi:f,scmIntegrationsApi:F,identityApi:E,catalogApi:re,configApi:se})})],routes:{importPage:ee}}),p=R.provide((0,l.QJ)({name:"CatalogImportPage",component:()=>e.e(1661).then(e.bind(e,31661)).then(w=>w.ImportPage),mountPoint:ee}))},90749:(wn,wt,e)=>{"use strict";e.d(wt,{Az:()=>Nn});var o=e(97388),l=e(14041),A=e(48821),B=e(11638),u=e(46195),r=e(63177);const Y=(0,o.tK)("analytics-context"),ye=()=>{const m=useContext(Y);if(m===void 0)return{pluginId:"app",extensionId:"app"};const D=m.atVersion(1);if(D===void 0)throw new Error("No context found for version 1.");return D},ce=m=>{const{attributes:D,children:j}=m,x={...ye(),...D},$=createVersionedValueMap({1:x});return React.createElement(Y.Provider,{value:$},j)},a=(0,A.c)({id:"core.app-tree"}),fe=(0,A.c)({id:"core.components"});function le(m){return(0,A.u)(fe).getComponent(m)}const ie=(0,A.c)({id:"core.icons"}),oe=(0,A.c)({id:"core.route-resolution"}),ze=(0,A.c)({id:"core.analytics"}),Le=(0,o.Q6)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),Pe="_ROUTABLE-EXTENSION-RENDERED";class C{constructor(D,j={pluginId:"root",extensionId:"App"}){this.analyticsApi=D,this.context=j,Le.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{Le.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...Le.mostRecentGatheredNavigation,...Le.mostRecentRoutableExtensionRender}),Le.mostRecentGatheredNavigation=void 0,Le.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),Le.beforeUnloadRegistered=!0)}setContext(D){this.context=D}captureEvent(D,j,{value:de,attributes:x}={}){const $=this.context;if(D===Pe){Le.mostRecentGatheredNavigation&&(Le.mostRecentRoutableExtensionRender={context:{...$,extensionId:"App"}});return}if(Le.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...Le.mostRecentGatheredNavigation,...Le.mostRecentRoutableExtensionRender})}catch(q){console.warn("Error during analytics event capture. %o",q)}Le.mostRecentGatheredNavigation=void 0,Le.mostRecentRoutableExtensionRender=void 0}if(D==="navigate"&&$.pluginId==="root"){Le.mostRecentGatheredNavigation={action:D,subject:j,value:de,attributes:x,context:$};return}try{this.analyticsApi.captureEvent({action:D,subject:j,value:de,attributes:x,context:$})}catch(q){console.warn("Error during analytics event capture. %o",q)}}}function ee(){try{return useApi(ze)}catch(m){if(m.name==="NotImplementedError")return{captureEvent:()=>{}};throw m}}function R(){const m=useRef(null),D=ye(),j=ee();function de(){return m.current===null&&(m.current=new C(j)),m.current}const x=de();return x.setContext(D),x}var p=Object.defineProperty,w=(m,D,j)=>D in m?p(m,D,{enumerable:!0,configurable:!0,writable:!0,value:j}):m[D]=j,f=(m,D,j)=>(w(m,typeof D!="symbol"?D+"":D,j),j);class E extends l.Component{constructor(){super(...arguments),f(this,"state",{error:void 0}),f(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(D){return{error:D}}render(){const{error:D}=this.state,{plugin:j,children:de,Fallback:x}=this.props;return D?l.createElement(x,{plugin:j,error:D,resetError:this.handleErrorReset}):de}}(0,o.Q6)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1}));const F="_ROUTABLE-EXTENSION-RENDERED";function re(m){const{id:D}=m;return{id:D,toString(){return`ComponentRef{id=${D}}`}}}const se=re({id:"core.components.progress"}),_e=re({id:"core.components.notFoundErrorPage"}),Q=re({id:"core.components.errorBoundaryFallback"}),g={progress:se,notFoundErrorPage:_e,errorBoundaryFallback:Q},H=m=>{const{disableTracking:D,children:j}=m,de=(0,B.st)();return(0,l.useEffect)(()=>{D||de.captureEvent(F,"")},[de,D]),l.createElement(l.Fragment,null,j)};function G(m){var D,j;const{node:de,routable:x,children:$}=m,q=de.spec.source,xe=le(g.progress),ke=le(g.errorBoundaryFallback),vt={extensionId:de.spec.id,pluginId:(j=(D=de.spec.source)==null?void 0:D.id)!=null?j:"app"};return l.createElement(l.Suspense,{fallback:l.createElement(xe,null)},l.createElement(E,{plugin:q,Fallback:ke},l.createElement(B.Ig,{attributes:vt},l.createElement(H,{disableTracking:!x},$))))}function Oe(m){return{id:m,$$type:"@backstage/ExtensionDataRef",config:{},optional(){return{...this,config:{...this.config,optional:!0}}},toString(){const D=!!this.config.optional;return`ExtensionDataRef{id=${m},optional=${D}}`}}}const ue={reactElement:Oe("core.reactElement"),routePath:Oe("core.routing.path"),routeRef:Oe("core.routing.ref")};function it(m){const D=m;if(D.$$type!=="@backstage/ExtensionDefinition")throw new Error(`Invalid extension definition instance, bad type '${D.$$type}'`);if(D.version!=="v1")throw new Error(`Invalid extension definition instance, bad version '${D.version}'`);return D}function ot(m){var D,j;return{$$type:"@backstage/ExtensionDefinition",version:"v1",kind:m.kind,namespace:m.namespace,name:m.name,attachTo:m.attachTo,disabled:(D=m.disabled)!=null?D:!1,inputs:(j=m.inputs)!=null?j:{},output:m.output,configSchema:m.configSchema,factory({inputs:de,...x}){return m.factory({inputs:de,...x})},toString(){const de=[];return m.kind&&de.push(`kind=${m.kind}`),m.namespace&&de.push(`namespace=${m.namespace}`),m.name&&de.push(`name=${m.name}`),de.push(`attachTo=${m.attachTo.id}@${m.attachTo.input}`),`ExtensionDefinition{${de.join(",")}}`}}}function pt(m,D){return{$$type:"@backstage/ExtensionInput",extensionData:m,config:{singleton:!!(D!=null&&D.singleton),optional:!!(D!=null&&D.optional)}}}function nt(m,D){var j;const de=it(m),{name:x,kind:$,namespace:q,...xe}=de,ke=(j=de.namespace)!=null?j:D==null?void 0:D.namespace,vt=x&&ke?`${ke}/${x}`:ke||x;if(!vt)throw new Error(`Extension must declare an explicit namespace or name as it could not be resolved from context, kind=${$} namespace=${ke} name=${x}`);const kt=$?`${$}:${vt}`:vt;return{...xe,$$type:"@backstage/Extension",version:"v1",id:kt,toString(){return`Extension{id=${kt}}`}}}function Ge(m){var D,j,de,x;const $=((D=m.extensions)!=null?D:[]).map(xe=>nt(xe,{namespace:m.id})),q=$.map(xe=>xe.id);if(q.length!==new Set(q).size){const xe=Array.from(new Set(q.filter((ke,vt)=>q.indexOf(ke)!==vt)));throw new Error(`Plugin '${m.id}' provided duplicate extensions: ${xe.join(", ")}`)}return{$$type:"@backstage/BackstagePlugin",version:"v1",id:m.id,routes:(j=m.routes)!=null?j:{},externalRoutes:(de=m.externalRoutes)!=null?de:{},featureFlags:(x=m.featureFlags)!=null?x:[],extensions:$,toString(){return`Plugin{id=${m.id}}`}}}function De(m){var D;const j=m.extensions.map(x=>nt(x)),de=(D=m.featureFlags)!=null?D:[];return{$$type:"@backstage/ExtensionOverrides",version:"v1",extensions:j,featureFlags:de,toString(){const x=j.map(String).join(","),$=de.map(q=>q.name).join(",");return`ExtensionOverrides{extensions=[${x}],featureFlags=[${$}]}`}}}function Ae(m){const{factory:D,configSchema:j,inputs:de}=m,x="api"in m?m.api:D.api;return ot({kind:"api",namespace:x.id,attachTo:{id:"app",input:"apis"},inputs:de,configSchema:j,output:{api:Ae.factoryDataRef},factory({config:$,inputs:q}){return typeof D=="function"?{api:D({config:$,inputs:q})}:{api:D}}})}(m=>{m.factoryDataRef=Oe("core.api.factory")})(Ae||(Ae={}));function Ne(m){var D;return ot({kind:"app-root-element",namespace:m.namespace,name:m.name,attachTo:(D=m.attachTo)!=null?D:{id:"app/root",input:"elements"},configSchema:m.configSchema,disabled:m.disabled,inputs:m.inputs,output:{element:ue.reactElement},factory({inputs:j,config:de}){return{element:typeof m.element=="function"?m.element({inputs:j,config:de}):m.element}}})}function ne(m){var D;return ot({kind:"app-root-wrapper",namespace:m.namespace,name:m.name,attachTo:(D=m.attachTo)!=null?D:{id:"app/root",input:"wrappers"},configSchema:m.configSchema,disabled:m.disabled,inputs:m.inputs,output:{component:ne.componentDataRef},factory({inputs:j,config:de}){return{component:$=>l.createElement(m.Component,{inputs:j,config:de},$.children)}}})}(m=>{m.componentDataRef=Oe("app.root.wrapper")})(ne||(ne={}));function N(m){var D;return ot({kind:"app-router-component",namespace:m.namespace,name:m.name,attachTo:(D=m.attachTo)!=null?D:{id:"app/root",input:"router"},configSchema:m.configSchema,disabled:m.disabled,inputs:m.inputs,output:{component:N.componentDataRef},factory({inputs:j,config:de}){return{component:$=>l.createElement(m.Component,{inputs:j,config:de},$.children)}}})}(m=>{m.componentDataRef=Oe("app.router.wrapper")})(N||(N={}));function X(m){const D=m(u.z);return{parse:j=>{const de=D.safeParse(j);if(de.success)return de.data;throw new Error(de.error.issues.map(Ue).join("; "))},schema:(0,r.Ay)(D)}}function Ue(m){if(m.code==="invalid_union")return Ue(m.unionErrors[0].issues[0]);let D=m.message;return D==="Required"&&(D="Missing required value"),m.path.length&&(D+=` at '${m.path.join(".")}'`),D}function te(m){var D;const j="configSchema"in m?m.configSchema:X(de=>de.object({path:de.string().default(m.defaultPath)}));return ot({kind:"page",namespace:m.namespace,name:m.name,attachTo:(D=m.attachTo)!=null?D:{id:"app/routes",input:"routes"},configSchema:j,inputs:m.inputs,disabled:m.disabled,output:{element:ue.reactElement,path:ue.routePath,routeRef:ue.routeRef.optional()},factory({config:de,inputs:x,node:$}){const q=lazy(()=>m.loader({config:de,inputs:x}).then(xe=>({default:()=>xe})));return{path:de.path,routeRef:m.routeRef,element:React.createElement(G,{node:$,routable:!0},React.createElement(q,null))}}})}function we(m){const{routeRef:D,title:j,icon:de,namespace:x,name:$}=m;return ot({namespace:x,name:$,kind:"nav-item",attachTo:{id:"app/nav",input:"items"},configSchema:X(q=>q.object({title:q.string().default(j)})),output:{navTarget:we.targetDataRef},factory:({config:q})=>({navTarget:{title:q.title,icon:de,routeRef:D}})})}(m=>{m.targetDataRef=Oe("core.nav-item.target")})(we||(we={}));function ht(m){const{logoIcon:D,logoFull:j}=m;return ot({kind:"nav-logo",name:m==null?void 0:m.name,namespace:m==null?void 0:m.namespace,attachTo:{id:"app/nav",input:"logos"},output:{logos:ht.logoElementsDataRef},factory:()=>({logos:{logoIcon:D,logoFull:j}})})}(m=>{m.logoElementsDataRef=Oe("core.nav-logo.logo-elements")})(ht||(ht={}));function Wt(m){var D;return ot({kind:"sign-in-page",namespace:m==null?void 0:m.namespace,name:m==null?void 0:m.name,attachTo:(D=m.attachTo)!=null?D:{id:"app/root",input:"signInPage"},configSchema:m.configSchema,inputs:m.inputs,disabled:m.disabled,output:{component:Wt.componentDataRef},factory({config:j,inputs:de,node:x}){const $=(0,l.lazy)(()=>m.loader({config:j,inputs:de}).then(q=>({default:q})));return{component:q=>l.createElement(G,{node:x,routable:!0},l.createElement($,{...q}))}}})}(m=>{m.componentDataRef=Oe("core.sign-in-page.component")})(Wt||(Wt={}));function bt(m){return ot({kind:"theme",namespace:"app",name:m.id,attachTo:{id:"app",input:"themes"},output:{theme:bt.themeDataRef},factory:()=>({theme:m})})}(m=>{m.themeDataRef=Oe("core.theme.theme")})(bt||(bt={}));function It(m){return ot({kind:"component",namespace:m.ref.id,name:m.name,attachTo:{id:"app",input:"components"},inputs:m.inputs,disabled:m.disabled,configSchema:m.configSchema,output:{component:It.componentDataRef},factory({config:D,inputs:j}){if("sync"in m.loader)return{component:{ref:m.ref,impl:m.loader.sync({config:D,inputs:j})}};const de=m.loader.lazy,x=(0,l.lazy)(()=>de({config:D,inputs:j}).then($=>({default:$})));return{component:{ref:m.ref,impl:x}}}})}(m=>{m.componentDataRef=Oe("core.component.component")})(It||(It={}));function O(m){return ot({kind:"translation",namespace:m.resource.id,name:m.name,attachTo:{id:"app",input:"translations"},output:{resource:O.translationDataRef},factory:()=>({resource:m.resource})})}(m=>{m.translationDataRef=Oe("core.translation.translation")})(O||(O={}));const S="eHgtF5hmbrXyiEvo";function K(m=Error){const{stack:D}=new m(S);if(!D)return"<unknown>";const j=D.includes(S)?D.indexOf(`
`)+1:0,de=D.indexOf(`
`,D.indexOf(`
`,j)+1)+1,x=D.indexOf(`
`,de),$=D.substring(de,x).trim();return $?$.includes("(")?$.substring($.indexOf("(")+1,$.indexOf(")")):$.includes("@")?$.substring($.indexOf("@")+1):$:"unknown"}var ae=Object.defineProperty,We=(m,D,j)=>D in m?ae(m,D,{enumerable:!0,configurable:!0,writable:!0,value:j}):m[D]=j,qe=(m,D,j)=>(We(m,typeof D!="symbol"?D+"":D,j),j),gt=(m,D,j)=>{if(!D.has(m))throw TypeError("Cannot "+j)},_t=(m,D,j)=>(gt(m,D,"read from private field"),j?j.call(m):D.get(m)),st=(m,D,j)=>{if(D.has(m))throw TypeError("Cannot add the same private member more than once");D instanceof WeakSet?D.add(m):D.set(m,j)},Zt=(m,D,j,de)=>(gt(m,D,"write to private field"),de?de.call(m,j):D.set(m,j),j),at,mt,Qe,Lt,St;function en(m){const D=m;if(D.$$type!=="@backstage/RouteRef")throw new Error(`Invalid RouteRef, bad type '${D.$$type}'`);return D}class xt{constructor(D=[],j){this.params=D,st(this,Lt),qe(this,"$$type","@backstage/RouteRef"),qe(this,"version","v1"),st(this,at,void 0),st(this,mt,void 0),st(this,Qe,void 0),Zt(this,mt,D),Zt(this,Qe,j)}getParams(){return _t(this,mt)}getDescription(){return _t(this,at)?_t(this,at):`created at '${_t(this,Qe)}'`}setId(D){if(!D)throw new Error(`${_t(this,Lt,St)} id must be a non-empty string`);if(_t(this,at))throw new Error(`${_t(this,Lt,St)} was referenced twice as both '${_t(this,at)}' and '${D}'`);Zt(this,at,D)}toString(){return`${_t(this,Lt,St)}{${this.getDescription()}}`}}at=new WeakMap,mt=new WeakMap,Qe=new WeakMap,Lt=new WeakSet,St=function(){return this.$$type.slice(11)};function pe(m){return new xt(m==null?void 0:m.params,K())}var Fe=Object.defineProperty,Mt=(m,D,j)=>D in m?Fe(m,D,{enumerable:!0,configurable:!0,writable:!0,value:j}):m[D]=j,Xt=(m,D,j)=>(Mt(m,typeof D!="symbol"?D+"":D,j),j),Bt=(m,D,j)=>{if(!D.has(m))throw TypeError("Cannot "+j)},jt=(m,D,j)=>(Bt(m,D,"read from private field"),j?j.call(m):D.get(m)),Ln=(m,D,j)=>{if(D.has(m))throw TypeError("Cannot add the same private member more than once");D instanceof WeakSet?D.add(m):D.set(m,j)},pn=(m,D,j,de)=>(Bt(m,D,"write to private field"),de?de.call(m,j):D.set(m,j),j),cn,En;const lt=/^\w+$/;class Ot{constructor(D,j,de){this.path=D,Xt(this,"$$type","@backstage/SubRouteRef"),Xt(this,"version","v1"),Ln(this,cn,void 0),Ln(this,En,void 0),pn(this,cn,j),pn(this,En,de)}getParams(){return jt(this,cn)}getParent(){return jt(this,En)}getDescription(){const D=en(jt(this,En));return`at ${this.path} with parent ${D.getDescription()}`}toString(){return`SubRouteRef{${this.getDescription()}}`}}cn=new WeakMap,En=new WeakMap;function Vt(m){const{path:D,parent:j}=m,x=en(j).getParams(),$=D.split("/").filter(ke=>ke.startsWith(":")).map(ke=>ke.substring(1)),q=[...x,...$];if(x.some(ke=>$.includes(ke)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!D.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${D}'`);if(D.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${D}'`);for(const ke of $)if(!lt.test(ke))throw new Error(`SubRouteRef path has invalid param, got '${ke}'`);return new Ot(D,q,j)}var Dt=Object.defineProperty,ct=(m,D,j)=>D in m?Dt(m,D,{enumerable:!0,configurable:!0,writable:!0,value:j}):m[D]=j,je=(m,D,j)=>(ct(m,typeof D!="symbol"?D+"":D,j),j);class Yt extends xt{constructor(D,j=[],de,x){super(j,x),this.optional=D,this.params=j,this.defaultTarget=de,je(this,"$$type","@backstage/ExternalRouteRef")}getDefaultTarget(){return this.defaultTarget}}function Gt(m){return new Yt(!!(m!=null&&m.optional),m==null?void 0:m.params,m==null?void 0:m.defaultTarget,K())}function sn(m){const{pathname:D}=useLocation(),j=useApi(oe),de=useMemo(()=>j.resolve(m,{sourcePath:D}),[j,m,D]),x="optional"in m&&m.optional;if(!de&&!x)throw new Error(`No path for ${m}`);return de}function bn(m){return useParams()}var In=e(29835),Pn=e(17899),qn=e(58054);function Gn(m,D){const j=new Set([...getEntityRelations(m,RELATION_MEMBER_OF,{kind:"group"}),...m?[getCompoundEntityRef(m)]:[]].map(stringifyEntityRef)),de=getEntityRelations(D,RELATION_OWNED_BY).map(stringifyEntityRef);for(const x of de)if(j.has(x))return!0;return!1}function Nn(m){const{entity:D,loading:j,error:de}=(0,qn.a)(),{allowed:x,loading:$,error:q}=(0,Pn.JT)({permission:m,resourceRef:D?(0,In.U2)(D):void 0});return j||$?{loading:!0,allowed:!1}:de?{loading:!1,allowed:!1,error:de}:{loading:!1,allowed:x,error:q}}const On={entityContentTitle:Oe("catalog.entity-content-title"),entityFilterFunction:Oe("catalog.entity-filter-function"),entityFilterExpression:Oe("catalog.entity-filter-expression")};function Jn(m){var D,j;const de="configSchema"in m?m.configSchema:createSchemaFromZod(x=>x.object({filter:x.string().optional()}));return createExtension({kind:"entity-card",namespace:m.namespace,name:m.name,attachTo:(D=m.attachTo)!=null?D:{id:"entity-content:catalog/overview",input:"cards"},disabled:(j=m.disabled)!=null?j:!0,output:{element:coreExtensionData.reactElement,filterFunction:On.entityFilterFunction.optional(),filterExpression:On.entityFilterExpression.optional()},inputs:m.inputs,configSchema:de,factory({config:x,inputs:$,node:q}){const xe=lazy(()=>m.loader({inputs:$,config:x}).then(ke=>({default:()=>ke})));return{element:React.createElement(ExtensionBoundary,{node:q},React.createElement(xe,null)),...ft({config:x,options:m})}}})}function aa(m){var D,j;return createExtension({kind:"entity-content",namespace:m.namespace,name:m.name,attachTo:(D=m.attachTo)!=null?D:{id:"page:catalog/entity",input:"contents"},disabled:(j=m.disabled)!=null?j:!0,output:{element:coreExtensionData.reactElement,path:coreExtensionData.routePath,routeRef:coreExtensionData.routeRef.optional(),title:On.entityContentTitle,filterFunction:On.entityFilterFunction.optional(),filterExpression:On.entityFilterExpression.optional()},inputs:m.inputs,configSchema:createSchemaFromZod(de=>de.object({path:de.string().default(m.defaultPath),title:de.string().default(m.defaultTitle),filter:de.string().optional()})),factory({config:de,inputs:x,node:$}){const q=lazy(()=>m.loader({inputs:x}).then(xe=>({default:()=>xe})));return{path:de.path,title:de.title,routeRef:m.routeRef,element:React.createElement(ExtensionBoundary,{node:$,routable:!0},React.createElement(q,null)),...ft({config:de,options:m})}}})}function ft(m){const{options:D,config:j}=m;return j.filter?{filterExpression:j.filter}:typeof D.filter=="string"?{filterExpression:D.filter}:typeof D.filter=="function"?{filterFunction:D.filter}:{}}},58054:(wn,wt,e)=>{"use strict";e.d(wt,{A:()=>Y,a:()=>a,g:()=>u,u:()=>ce});var o=e(29835),l=e(11638),A=e(97388),B=e(14041);function u(fe,le,ie){var oe;let ze=((oe=fe==null?void 0:fe.relations)==null?void 0:oe.filter(Le=>Le.type===le).map(Le=>(0,o.KU)(Le.targetRef)))||[];return ie!=null&&ie.kind&&(ze=ze.filter(Le=>Le.kind.toLocaleLowerCase("en-US")===ie.kind.toLocaleLowerCase("en-US"))),ze}const r=(0,A.tK)("entity-context"),Y=fe=>{const{children:le,entity:ie,loading:oe,error:ze,refresh:Le}=fe,Pe={entity:ie,loading:oe,error:ze,refresh:Le};return B.createElement(r.Provider,{value:(0,A.Bl)({1:Pe})},B.createElement(l.Ig,{attributes:{...ie?{entityRef:(0,o.U2)(ie)}:void 0}},le))},ye=fe=>React.createElement(Y,{entity:fe.entity,loading:!fe.entity,error:void 0,refresh:void 0,children:fe.children});function ce(){const fe=(0,A.qO)("entity-context");if(!fe)throw new Error("Entity context is not available");const le=fe.atVersion(1);if(!le)throw new Error("EntityContext v1 not available");if(!le.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:le.entity}}function a(){const fe=(0,A.qO)("entity-context");if(!fe)throw new Error("Entity context is not available");const le=fe.atVersion(1);if(!le)throw new Error("EntityContext v1 not available");const{entity:ie,loading:oe,error:ze,refresh:Le}=le;return{entity:ie,loading:oe,error:ze,refresh:Le}}},92651:(wn,wt,e)=>{"use strict";e.d(wt,{$D:()=>pr,B9:()=>mn,Cr:()=>$,EH:()=>J,GI:()=>m,IT:()=>Re,Id:()=>io,QD:()=>Va,SE:()=>an,Tj:()=>Gt,V3:()=>ve,VF:()=>vo,WI:()=>Cn,ah:()=>qn,d5:()=>Na,iI:()=>ma,jF:()=>M,lD:()=>rt,mM:()=>Kt,mb:()=>he,mo:()=>wa,n5:()=>Sr,nK:()=>ln,nQ:()=>Yt,o9:()=>zr,qq:()=>ao,s8:()=>xa,sF:()=>za,t3:()=>$a,uR:()=>Ga,vp:()=>je,y2:()=>Br,zI:()=>ja});var o=e(48821),l=e(11638),A=e(29835),B=e(46123),u=e.n(B),r=e(14041),Y=e(96403),ye=e.n(Y),ce=e(5893),a=e(54917),fe=e(64947),le=e(73845),ie=e(77125),oe=e(72501),ze=e(42899),Le=e(69076),Pe=e(86901),C=e(58837),ee=e(16249),R=e(71677),p=e(75173),w=e(95061),f=e(63301),E=e(34839),F=e(29365),re=e(7031),se=e(59461),_e=e(5951),Q=e(62261),g=e(40703),H=e(48653),G=e(8109),Oe=e(46423),ue=e(58007),it=e(65569),ot=e(76891),pt=e(61477),nt=e(46805),Ge=e(31653),De=e(38605),Ae=e(93453),Ne=e(37197),ne=e(26343),N=e(65859),X=e(23180),Ue=e(58054),te=e(45250),we=e.n(te),ht=e(45810),Wt=e.n(ht),bt=e(18690),It=e(5030),O=e(16983),S=e(10009),K=e(91638),ae=e(46343),We=e.n(ae),qe=e(40074),gt=e.n(qe),_t=e(45145),st=e(6924),Zt=e(20577),at=e(74219),mt=e(44148),Qe=e(41260),Lt=e(53373),St=e.n(Lt),en=e(76842),xt=e(92367),pe=e(48108),Fe=e(47966),Mt=e(97388),Xt=e(64704),Bt=e(45917),jt=e(80109),Ln=e(15303),pn=e(10437),cn=e(97262),En=e(87809),lt=e.n(En),Ot=e(51419),Vt=e(3399),Dt=e(9684),ct=e(71910);const je=(0,o.c)({id:"plugin.catalog.service"}),Yt=(0,o.c)({id:"plugin.catalog.entity-presentation"});function Gt(_,I){const{kind:U,namespace:k,name:me,title:Ie,description:Ye,displayName:Xe,type:dt}=sn(_),qt=(0,A.U2)({kind:U||"unknown",namespace:k||A.oQ,name:me||"unknown"}),zt=bn({kind:U,namespace:k,name:me,context:I}),dn=[Xe,Ie,zt].find(yn=>yn&&typeof yn=="string"),Rn=[dn!==qt?qt:void 0,dt,Ye].filter(yn=>yn&&typeof yn=="string").join(" | ");return{entityRef:qt,primaryTitle:dn,secondaryTitle:Rn||void 0,Icon:void 0}}function sn(_){if(typeof _=="string"){let I=_.indexOf(":");const U=_.indexOf("/");U!==-1&&U<I&&(I=-1);const k=I===-1?void 0:_.slice(0,I),me=U===-1?void 0:_.slice(I+1,U),Ie=_.slice(Math.max(I+1,U+1));return{kind:k,namespace:me,name:Ie}}if(typeof _=="object"&&_!==null){const I=[u()(_,"kind")].find(dt=>dt&&typeof dt=="string"),U=[u()(_,"metadata.namespace"),u()(_,"namespace")].find(dt=>dt&&typeof dt=="string"),k=[u()(_,"metadata.name"),u()(_,"name")].find(dt=>dt&&typeof dt=="string"),me=[u()(_,"metadata.title")].find(dt=>dt&&typeof dt=="string"),Ie=[u()(_,"metadata.description")].find(dt=>dt&&typeof dt=="string"),Ye=[u()(_,"spec.profile.displayName")].find(dt=>dt&&typeof dt=="string"),Xe=[u()(_,"spec.type")].find(dt=>dt&&typeof dt=="string");return{kind:I,namespace:U,name:k,title:me,description:Ie,displayName:Ye,type:Xe}}return{}}function bn(_){var I,U,k,me,Ie;const Ye=((I=_.kind)==null?void 0:I.toLocaleLowerCase("en-US"))||"unknown",Xe=_.namespace||A.oQ,dt=_.name||"unknown",qt=(k=(U=_.context)==null?void 0:U.defaultKind)==null?void 0:k.toLocaleLowerCase("en-US"),zt=(Ie=(me=_.context)==null?void 0:me.defaultNamespace)==null?void 0:Ie.toLocaleLowerCase("en-US");let dn=dt;return(zt&&Xe.toLocaleLowerCase("en-US")!==zt||Xe!==A.oQ)&&(dn=`${Xe}/${dn}`),qt&&Ye.toLocaleLowerCase("en-US")!==qt&&(dn=`${Ye}:${dn}`),dn}function In(_,I,U){const[k,me]=(0,r.useState)(_);return(0,r.useEffect)(()=>{me(_);const Ie=I==null?void 0:I.subscribe({next:Ye=>{me(Ye)},complete:()=>{Ie==null||Ie.unsubscribe()}});return()=>{Ie==null||Ie.unsubscribe()}},U),k}function Pn(_,I){const k=(0,o.b)().get(Yt),me=[k,JSON.stringify(_),JSON.stringify(I||null)],Ie=(0,r.useMemo)(()=>k?k.forEntity(typeof _=="string"||"metadata"in _?_:(0,A.U2)(_),I):{snapshot:Gt(_,I)},me);return In(Ie.snapshot,Ie.update$,[Ie])}const qn=(0,o.c)({id:"catalog-react.starred-entities"});var Gn=Object.defineProperty,Nn=(_,I,U)=>I in _?Gn(_,I,{enumerable:!0,configurable:!0,writable:!0,value:U}):_[I]=U,On=(_,I,U)=>(Nn(_,typeof I!="symbol"?I+"":I,U),U);class Jn{constructor(){On(this,"starredEntities",new Set),On(this,"subscribers",new Set),On(this,"observable",new ObservableImpl(I=>(I.next(new Set(this.starredEntities)),this.subscribers.add(I),()=>{this.subscribers.delete(I)})))}async toggleStarred(I){this.starredEntities.delete(I)||this.starredEntities.add(I);for(const U of this.subscribers)U.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const aa=_=>{var I,U;const k=(0,ce.A)(Xe=>{var dt,qt;return Xe.breakpoints.down((qt=(dt=_.options)==null?void 0:dt.drawerBreakpoint)!=null?qt:"md")}),me=(0,a.A)(),[Ie,Ye]=(0,r.useState)(!1);return k?r.createElement(r.Fragment,null,r.createElement(fe.A,{style:{marginTop:me.spacing(1),marginLeft:me.spacing(1)},onClick:()=>Ye(!0),startIcon:r.createElement(N.A,null)},"Filters"),r.createElement(le.Ay,{open:Ie,onClose:()=>Ye(!1),anchor:(U=(I=_.options)==null?void 0:I.drawerAnchor)!=null?U:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},r.createElement(ie.A,{m:2},r.createElement(oe.A,{variant:"h6",component:"h2",style:{marginBottom:me.spacing(1)}},"Filters"),_.children))):r.createElement(ze.A,{item:!0,lg:2},_.children)},ft=_=>r.createElement(ze.A,{item:!0,xs:12,lg:10},_.children),m=_=>r.createElement(ze.A,{container:!0,style:{position:"relative"}},_.children);m.Filters=aa,m.Content=ft;function D(_){return!!_.getFullTextFilters}function j(_){var I;const U=_.reduce((me,Ie)=>({...me,...Ie.getCatalogFilters?Ie.getCatalogFilters():{}}),{}),k=(I=_.find(D))==null?void 0:I.getFullTextFilters();return{filter:U,fullTextFilter:k}}function de(_){const I={};return _.forEach(U=>{var k;U instanceof V||U instanceof $e||U instanceof Ke||U instanceof Je||U instanceof Ut||U instanceof Nt||U instanceof ve||U instanceof Rt||Object.assign(I,((k=U.getCatalogFilters)==null?void 0:k.call(U))||{})}),I}function x(_){return I=>_.every(U=>!U.filterEntity||U.filterEntity(I))}function $(_,I){var U;const k=(U=_.metadata.annotations)==null?void 0:U[A.I4];if(k)try{const me=(0,A.aY)(k),Ie=I.byUrl(me.target);return{locationTargetUrl:me.target,integrationType:Ie==null?void 0:Ie.type}}catch{return}}var q=Object.defineProperty,xe=(_,I,U)=>I in _?q(_,I,{enumerable:!0,configurable:!0,writable:!0,value:U}):_[I]=U,ke=(_,I,U)=>(xe(_,typeof I!="symbol"?I+"":I,U),U);class vt{constructor(I){this.value=I}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class kt{constructor(I){this.value=I}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class V{constructor(I){this.values=I}filterEntity(I){return this.values.every(U=>{var k;return((k=I.metadata.tags)!=null?k:[]).includes(U)})}getCatalogFilters(){return{"metadata.tags":this.values}}toQueryValue(){return this.values}}class ve{constructor(I){this.value=I}filterEntity(I){const U=this.toUpperArray(this.value.split(/\s/)),k=this.toUpperArray([I.metadata.tags]),me=this.toUpperArray([I.metadata.name,I.metadata.title]);for(const Ie of U)if(k.every(Ye=>Ye!==Ie)&&me.every(Ye=>!Ye.includes(Ie)))return!1;return!0}getFullTextFilters(){return{term:this.value,fields:["metadata.name","metadata.title","spec.profile.displayName"]}}toUpperArray(I){return I.flat().filter(U=>!!U).map(U=>U.toLocaleUpperCase("en-US"))}}class $e{constructor(I){ke(this,"values"),this.values=I.reduce((U,k)=>{try{return U.push((0,A.U2)((0,A.KU)(k,{defaultKind:"Group"}))),U}catch{return U}},[])}getCatalogFilters(){return{"relations.ownedBy":this.values}}filterEntity(I){return this.values.some(U=>(0,Ue.g)(I,A.vv).some(k=>(0,A.U2)(k)===U))}toQueryValue(){return this.values}}class Ke{constructor(I){this.values=I}getCatalogFilters(){return{"spec.lifecycle":this.values}}filterEntity(I){return this.values.some(U=>{var k;return((k=I.spec)==null?void 0:k.lifecycle)===U})}toQueryValue(){return this.values}}class Je{constructor(I){this.values=I}getCatalogFilters(){return{"metadata.namespace":this.values}}filterEntity(I){return this.values.some(U=>I.metadata.namespace===U)}toQueryValue(){return this.values}}class Ut{constructor(I,U){this.value=I,this.refs=U}static owned(I){return new Ut("owned",I)}static all(){return new Ut("all")}static starred(I){return new Ut("starred",I)}getCatalogFilters(){var I,U,k;return this.value==="owned"?{"relations.ownedBy":(I=this.refs)!=null?I:[]}:this.value==="starred"?{"metadata.name":(k=(U=this.refs)==null?void 0:U.map(me=>(0,A.KU)(me).name))!=null?k:[]}:{}}filterEntity(I){var U,k,me,Ie;if(this.value==="starred")return(k=(U=this.refs)==null?void 0:U.includes((0,A.U2)(I)))!=null?k:!0;if(this.value==="owned"){const Ye=(0,Ue.g)(I,A.vv);return(Ie=(me=this.refs)==null?void 0:me.some(Xe=>Ye.some(dt=>(0,A.U2)(dt)===Xe)))!=null?Ie:!1}return!0}toQueryValue(){return this.value}}class Rt{constructor(I,U,k){this.value=I,this.isOwnedEntity=U,this.isStarredEntity=k}filterEntity(I){switch(this.value){case"owned":return this.isOwnedEntity(I);case"starred":return this.isStarredEntity(I);default:return!0}}toQueryValue(){return this.value}}class Nt{constructor(I){this.value=I}getCatalogFilters(){return this.value?{"metadata.annotations.backstage.io/orphan":String(this.value)}:{}}filterEntity(I){var U;const k=(U=I.metadata.annotations)==null?void 0:U["backstage.io/orphan"];return k!==void 0&&this.value.toString()===k}}class _n{constructor(I){this.value=I}filterEntity(I){var U,k;const me=((k=(U=I==null?void 0:I.status)==null?void 0:U.items)==null?void 0:k.length)>0;return me!==void 0&&this.value===me}}const An=(0,r.createContext)(void 0),mn=_=>{const I=(0,S.default)(),U=(0,o.u)(je),[k,me]=(0,r.useState)({}),Ie=(0,bt.zy)(),Ye=_.pagination===!0||typeof _.pagination=="object",Xe=_.pagination&&typeof _.pagination=="object"&&typeof _.pagination.limit=="number"?_.pagination.limit:20,{queryParameters:dt,cursor:qt}=(0,r.useMemo)(()=>{var Kn;const Xn=Wt().parse(Ie.search,{ignoreQueryPrefix:!0});return{queryParameters:(Kn=Xn.filters)!=null?Kn:{},cursor:typeof Xn.cursor=="string"?Xn.cursor:void 0}},[Ie]),[zt,dn]=(0,r.useState)(qt),[Rn,yn]=(0,r.useState)(()=>({appliedFilters:{},entities:[],backendEntities:[],pageInfo:Ye?{}:void 0})),[{loading:$n,error:Vn},Tn]=(0,It.default)(async()=>{var Kn;const Xn=(0,te.compact)(Object.values(k)),Sa=Object.keys(k).reduce((_a,ga)=>{const Ca=k[ga];return Ca!=null&&Ca.toQueryValue&&(_a[ga]=Ca.toQueryValue()),_a},{});if(Ye)if(zt){if(zt!==Rn.appliedCursor){const _a=x(Xn),ga=await U.queryEntities({cursor:zt,limit:Xe});yn({appliedFilters:k,appliedCursor:zt,backendEntities:ga.items,entities:ga.items.filter(_a),pageInfo:ga.pageInfo})}}else{const _a=x(Xn),ga=j(Xn),Ca=j((0,te.compact)(Object.values(Rn.appliedFilters)));if(!(0,te.isEqual)(Ca,ga)){const Ta=await U.queryEntities({...ga,limit:Xe,orderFields:[{field:"metadata.name",order:"asc"}]});yn({appliedFilters:k,backendEntities:Ta.items,entities:Ta.items.filter(_a),pageInfo:Ta.pageInfo})}}else{const _a=x(Xn),ga=de(Xn),Ca=de((0,te.compact)(Object.values(Rn.appliedFilters)));if((0,te.isEqual)(Ca,ga))yn({appliedFilters:k,backendEntities:Rn.backendEntities,entities:Rn.backendEntities.filter(_a)});else{const Ta=await U.getEntities({filter:ga});yn({appliedFilters:k,backendEntities:Ta.items,entities:Ta.items.filter(_a)})}}if(I()){const _a=Wt().parse(Ie.search,{ignoreQueryPrefix:!0}),ga=Wt().stringify({..._a,filters:Sa,cursor:zt},{addQueryPrefix:!0,arrayFormat:"repeat"}),Ca=`${window.location.pathname}${ga}`;(Kn=window.history)==null||Kn.replaceState(null,document.title,Ca)}},[U,dt,k,Rn,zt,Ye],{loading:!0});(0,O.A)(Tn,10,[k,zt]);const oa=(0,r.useCallback)(Kn=>{dn(void 0),me(Xn=>{const Sa=typeof Kn=="function"?Kn(Xn):Kn;return{...Xn,...Sa}})},[]),ca=(0,r.useMemo)(()=>{var Kn,Xn;if(!Ye)return;const Sa=(Kn=Rn.pageInfo)==null?void 0:Kn.prevCursor,_a=(Xn=Rn.pageInfo)==null?void 0:Xn.nextCursor;return{prev:Sa?()=>dn(Sa):void 0,next:_a?()=>dn(_a):void 0}},[Ye,Rn.pageInfo]),Hn=(0,r.useMemo)(()=>({filters:Rn.appliedFilters,entities:Rn.entities,backendEntities:Rn.backendEntities,updateFilters:oa,queryParameters:dt,loading:$n,error:Vn,pageInfo:ca}),[Rn,oa,dt,$n,Vn,ca]);return r.createElement(An.Provider,{value:Hn},_.children)};function ln(){const _=(0,r.useContext)(An);if(!_)throw new Error("useEntityList must be used within EntityListProvider");return _}function M(){var _;const I=(0,o.u)(je),{filters:{kind:U,type:k},queryParameters:{type:me},updateFilters:Ie}=ln(),Ye=(0,r.useMemo)(()=>[me].flat().filter(Boolean),[me]),[Xe,dt]=(0,r.useState)(Ye.length?Ye:(_=k==null?void 0:k.getTypes())!=null?_:[]);(0,r.useEffect)(()=>{Ye.length&&dt(Ye)},[Ye]);const[qt,zt]=(0,r.useState)([]),dn=(0,r.useMemo)(()=>U==null?void 0:U.value,[U]),{error:Rn,loading:yn,value:$n}=(0,K.default)(async()=>dn?await I.getEntityFacets({filter:{kind:dn},facets:["spec.type"]}).then(oa=>oa.facets["spec.type"]||[]):[],[dn,I]),Vn=(0,r.useRef)($n);return(0,r.useEffect)(()=>{const Tn=Vn.current;if(Vn.current=$n,yn||!dn||Tn===$n||!$n)return;const oa=[...new Set(gt()($n,Hn=>-Hn.count).map(Hn=>Hn.value.toLocaleLowerCase("en-US")))];zt(oa);const ca=Xe.filter(Hn=>oa.includes(Hn));We()(Xe,ca)||dt(ca)},[yn,dn,Xe,dt,$n]),(0,r.useEffect)(()=>{Ie({type:Xe.length?new kt(Xe):void 0})},[Xe,Ie]),{loading:yn,error:Rn,availableTypes:qt,selectedTypes:Xe,setSelectedTypes:dt}}function J(_,I){var U,k;const me=(U=I==null?void 0:I.type)==null?void 0:U.toLocaleLowerCase("en-US"),Ie=(k=I==null?void 0:I.kind)==null?void 0:k.toLocaleLowerCase("en-US"),Ye=(0,o.u)(je),{loading:Xe,value:dt,error:qt}=(0,K.default)(async()=>{var zt;const dn=(zt=_.relations)==null?void 0:zt.filter(yn=>(!me||yn.type.toLocaleLowerCase("en-US")===me)&&(!Ie||(0,A.KU)(yn.targetRef).kind===Ie));if(!(dn!=null&&dn.length))return[];const{items:Rn}=await Ye.getEntitiesByRefs({entityRefs:dn.map(yn=>yn.targetRef)});return Rn.filter(yn=>!!yn)},[_,me,Ie]);return{entities:dt,loading:Xe,error:qt}}function be(_){return typeof _=="string"?_:(0,A.U2)(_)}function Re(){const _=(0,o.u)(qn),I=(0,_t.A)((0,r.useMemo)(()=>_.starredEntitie$(),[_]),new Set),U=(0,r.useCallback)(me=>I.has(be(me)),[I]),k=(0,r.useCallback)(me=>_.toggleStarred(be(me)).then(),[_]);return{starredEntities:I,toggleStarredEntity:k,isStarredEntity:U}}function yt(_){return typeof _=="string"?_:(0,A.U2)(_)}function Tt(_){const I=(0,o.u)(qn),[U,k]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{const Ie=I.starredEntitie$().subscribe({next(Ye){k(Ye.has(yt(_)))}});return()=>{Ie.unsubscribe()}},[_,I]),{toggleStarredEntity:(0,r.useCallback)(()=>I.toggleStarred(yt(_)).then(),[_,I]),isStarredEntity:U}}function Kt(){const _=(0,o.u)(o.t),{loading:I,value:U}=(0,K.default)(async()=>{const{ownershipEntityRefs:me}=await _.getBackstageIdentity();return me},[]),k=(0,r.useMemo)(()=>{const me=new Set(U!=null?U:[]);return Ie=>{const Ye=(0,Ue.g)(Ie,A.vv).map(A.U2);for(const Xe of Ye)if(me.has(Xe))return!0;return!1}},[U]);return{loading:I,isOwnedEntity:k}}function Jt(){const _=(0,o.u)(je),{error:I,loading:U,value:k}=(0,K.default)(async()=>await _.getEntityFacets({facets:["kind"]}).then(Ie=>{var Ye;return((Ye=Ie.facets.kind)==null?void 0:Ye.map(Xe=>Xe.value).sort())||[]}),[_]);return{loading:U,error:I,allKinds:k!=null?k:[]}}function hn(_,I,U){let k=_;return I&&(k=k.filter(Ie=>I.some(Ye=>Ye.toLocaleLowerCase("en-US")===Ie.toLocaleLowerCase("en-US")))),U&&!_.some(Ie=>Ie.toLocaleLowerCase("en-US")===U.toLocaleLowerCase("en-US"))&&(k=k.concat([U])),k.sort().reduce((Ie,Ye)=>(Ie[Ye.toLocaleLowerCase("en-US")]=Ye,Ie),{})}function Dn(_){var I,U;const{filters:k,queryParameters:{kind:me},updateFilters:Ie}=ln(),Ye=(0,r.useMemo)(()=>[me].flat()[0],[me]),[Xe,dt]=(0,r.useState)((U=Ye!=null?Ye:(I=k.kind)==null?void 0:I.value)!=null?U:_.initialFilter);(0,r.useEffect)(()=>{Ye&&dt(Ye)},[Ye]),(0,r.useEffect)(()=>{var Rn,yn;(Rn=k.kind)!=null&&Rn.value&&dt((yn=k.kind)==null?void 0:yn.value)},[k.kind]),(0,r.useEffect)(()=>{Ie({kind:Xe?new vt(Xe):void 0})},[Xe,Ie]);const{allKinds:qt,loading:zt,error:dn}=Jt();return{loading:zt,error:dn,allKinds:qt!=null?qt:[],selectedKind:Xe,setSelectedKind:dt}}const he=_=>{const{allowedKinds:I,hidden:U,initialFilter:k="component"}=_,me=(0,o.u)(o.l),{error:Ie,allKinds:Ye,selectedKind:Xe,setSelectedKind:dt}=Dn({initialFilter:k});if((0,r.useEffect)(()=>{Ie&&me.post({message:"Failed to load entity kinds",severity:"error"})},[Ie,me]),Ie)return null;const qt=hn(Ye,I,Xe),zt=Object.keys(qt).map(dn=>({value:dn,label:qt[dn]}));return U?null:r.createElement(ie.A,{pb:1,pt:1},r.createElement(X.l6,{label:"Kind",items:zt,selected:Xe.toLocaleLowerCase("en-US"),onChange:dn=>dt(String(dn))}))},Ve=r.createElement(Qe.A,{fontSize:"small"}),Be=r.createElement(mt.A,{fontSize:"small"});function At({selected:_}){return r.createElement(Le.A,{icon:Ve,checkedIcon:Be,checked:_})}const Pt=(0,r.memo)(_=>{const{selected:I,value:U,availableOptions:k,showCounts:me}=_,Ie=me?`${U} (${k==null?void 0:k[U]})`:U;return r.createElement(Pe.A,{control:r.createElement(At,{selected:I}),label:Ie,onClick:Ye=>Ye.preventDefault()})}),tn=(0,C.A)({input:{}},{name:"CatalogReactEntityAutocompletePickerInput"});function Ct(_){const I=tn();return r.createElement(ee.A,{variant:"outlined",..._,className:St()(I.input,_.className)})}function Ft(_){var I,U;const{label:k,name:me,path:Ie,showCounts:Ye,Filter:Xe,InputProps:dt,initialSelectedOptions:qt=[]}=_,{updateFilters:zt,filters:dn,queryParameters:{[me]:Rn}}=ln(),yn=(0,o.u)(je),{value:$n}=(0,K.default)(async()=>{var Xn;const Sa=Ie,{facets:_a}=await yn.getEntityFacets({facets:[Sa],filter:(Xn=dn.kind)==null?void 0:Xn.getCatalogFilters()});return Object.fromEntries(_a[Sa].map(({value:ga,count:Ca})=>[ga,Ca]))},[dn.kind]),Vn=(0,r.useMemo)(()=>[Rn].flat().filter(Boolean),[Rn]),[Tn,oa]=(0,r.useState)(Vn.length?Vn:(U=(I=dn[me])==null?void 0:I.values)!=null?U:qt);(0,r.useEffect)(()=>{Vn.length&&oa(Vn)},[Vn]);const ca=Object.keys($n!=null?$n:{}),Hn=Tn.length&&ca.length;(0,r.useEffect)(()=>{zt({[me]:Hn?new Xe(Tn):void 0})},[me,Hn,Tn,Xe,zt]);const Kn=dn[me];return Kn&&typeof Kn=="object"&&!("values"in Kn)||!ca.length||ca.length<=1?null:r.createElement(ie.A,{pb:1,pt:1},r.createElement(oe.A,{variant:"button",component:"label"},k,r.createElement(Zt.Ay,{multiple:!0,disableCloseOnSelect:!0,options:ca,value:Tn,onChange:(Xn,Sa)=>oa(Sa),renderOption:(Xn,{selected:Sa})=>r.createElement(Pt,{selected:Sa,value:Xn,availableOptions:$n,showCounts:!!Ye}),size:"small",popupIcon:r.createElement(st.A,{"data-testid":`${String(me)}-picker-expand`}),renderInput:Xn=>r.createElement(Ct,{...Xn,...dt})})))}const gn=(0,C.A)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),Cn=_=>{const{initialFilter:I=[]}=_,U=gn();return r.createElement(Ft,{label:"Lifecycle",name:"lifecycles",path:"spec.lifecycle",Filter:Ke,InputProps:{className:U.input},initialSelectedOptions:I})};function an(_,I){const U=I==null?void 0:I.defaultKind;let k,me,Ie;return"metadata"in _?(k=_.kind,me=_.metadata.namespace,Ie=_.metadata.name):(k=_.kind,me=_.namespace,Ie=_.name),(me===void 0||me==="")&&(me=A.oQ),(I==null?void 0:I.defaultNamespace)!==void 0?(I==null?void 0:I.defaultNamespace)===me&&(me=void 0):me===A.oQ&&(me=void 0),k=k.toLocaleLowerCase("en-US"),k=U&&U.toLocaleLowerCase("en-US")===k?void 0:k,`${k?`${k}:`:""}${me?`${me}/`:""}${Ie}`}function fn(_,I){for(const U of["spec.profile.displayName","metadata.title"]){const k=u()(_,U);if(k&&typeof k=="string")return k}return I}function Wn({enabled:_}){const I=(0,o.u)(je),[U]=(0,r.useState)(async()=>{if(!_)return[];const k="relations.ownedBy";return I.getEntityFacets({facets:[k]}).then(me=>me.facets[k].map(Ie=>Ie.value).map(Ie=>{const{kind:Ye,name:Xe,namespace:dt}=(0,A.KU)(Ie);return{apiVersion:"backstage.io/v1beta1",kind:Ye,metadata:{name:Xe,namespace:dt}}}).sort((Ie,Ye)=>(Ie.metadata.namespace||"").localeCompare(Ye.metadata.namespace||"","en-US")||Ie.metadata.name.localeCompare(Ye.metadata.name,"en-US")||Ie.kind.localeCompare(Ye.kind,"en-US"))).catch(()=>[])});return(0,It.default)(async(k,me)=>{var Ie;const Ye=await U;if(!Ye)return{items:[]};const Xe=(Ie=me==null?void 0:me.limit)!=null?Ie:20,{text:dt,start:qt}=jn(k),zt=Ye.filter(Rn=>Fn(dt,Rn)),dn=qt+Xe;return{items:zt.slice(0,dn),...kn({entities:zt,limit:dn,payload:{text:dt,start:dn}})}},[U],{loading:!0,value:{items:[]}})}function jn(_){return ea(_)&&_.cursor?JSON.parse(atob(_.cursor)):{text:_.text||"",start:0}}function ea(_){return!!_.cursor}function kn({entities:_,limit:I,payload:U}){return _.length>I?{cursor:btoa(JSON.stringify(U))}:{}}function Fn(_,I){var U;const k=_.trim();return I.kind.includes(k)||((U=I.metadata.namespace)==null?void 0:U.includes(k))||I.metadata.name.includes(k)}function ra(){const _=(0,o.u)(je);return(0,It.default)(async(I,U)=>{var k;const me=I,Ie=I,Ye=(k=U==null?void 0:U.limit)!=null?k:20;if(Ie.cursor){const dt=await _.queryEntities({cursor:Ie.cursor,limit:Ye});return{cursor:dt.pageInfo.nextCursor,items:[...Ie.items,...dt.items]}}const Xe=await _.queryEntities({fullTextFilter:{term:me.text||"",fields:["metadata.name","kind","spec.profile.displayname","metadata.title"]},filter:{kind:["User","Group"]},orderFields:[{field:"metadata.name",order:"asc"}],limit:Ye});return{cursor:Xe.pageInfo.nextCursor,items:Xe.items}},[],{loading:!0})}function la({mode:_,initialSelectedOwnersRefs:I}){const U=_==="owners-only",k=ra(),me=Wn({enabled:U}),[Ie,Ye]=U?me:k;return[Ie,Ye,Aa({enabled:!U,initialSelectedOwnersRefs:I})]}function Aa({enabled:_,initialSelectedOwnersRefs:I}){const U=(0,r.useRef)({}),k=(0,o.u)(je),[,me]=(0,It.default)(async()=>{(await k.getEntitiesByRefs({entityRefs:I})).items.forEach(Ye=>{Ye&&(U.current[(0,A.U2)(Ye)]=Ye)})},[]);return(0,en.u)(()=>{_&&I.length>0&&me()}),{getEntity:Ie=>U.current[Ie],setEntity:Ie=>{U.current[(0,A.U2)(Ie)]=Ie}}}const ya=(0,C.A)({input:{},fullWidth:{width:"100%"},boxLabel:{width:"100%",textOverflow:"ellipsis",overflow:"hidden"}},{name:"CatalogReactEntityOwnerPicker"}),Oa=(0,re.A)(_=>({label:{width:"100%"},root:{width:"90%"}}),{name:"FixedWidthFormControlLabel"})(Pe.A),ia=r.createElement(Qe.A,{fontSize:"small"}),Da=r.createElement(mt.A,{fontSize:"small"});function Ua(_){const I=ya(),U=_.entity.kind.toLocaleLowerCase("en-US")==="group",{primaryTitle:k}=Pn(_.entity);return r.createElement(ie.A,{className:I.fullWidth},r.createElement(Oa,{className:I.fullWidth,control:r.createElement(Le.A,{icon:ia,checkedIcon:Da,checked:_.isSelected}),onClick:me=>me.preventDefault(),label:r.createElement(R.Ay,{title:k},r.createElement(ie.A,{display:"flex",alignItems:"center"},U?r.createElement(Fe.A,{fontSize:"small"}):r.createElement(pe.A,{fontSize:"small"}),"\xA0",r.createElement(ie.A,{className:I.boxLabel},r.createElement(oe.A,{noWrap:!0},k))))}))}const $a=_=>{var I,U,k;const me=ya(),{mode:Ie="owners-only"}=_||{},{updateFilters:Ye,filters:Xe,queryParameters:{owners:dt}}=ln(),[qt,zt]=(0,r.useState)(""),dn=(0,r.useMemo)(()=>[dt].flat().filter(Boolean),[dt]),[Rn,yn]=(0,r.useState)(dn.length?dn:(U=(I=Xe.owners)==null?void 0:I.values)!=null?U:[]),[{value:$n,loading:Vn},Tn,oa]=la({mode:Ie,initialSelectedOwnersRefs:Rn});(0,xt.s)(()=>Tn({text:qt}),[qt,Tn],250);const ca=($n==null?void 0:$n.items)||[];return(0,r.useEffect)(()=>{if(dn.length){const Hn=new $e(dn);yn(Hn.values)}},[dn]),(0,r.useEffect)(()=>{Ye({owners:Rn.length?new $e(Rn):void 0})},[Rn,Ye]),["user","group"].includes(((k=Xe.kind)==null?void 0:k.value.toLocaleLowerCase("en-US"))||"")?null:r.createElement(ie.A,{pb:1,pt:1},r.createElement(oe.A,{variant:"button",component:"label"},"Owner",r.createElement(Zt.Ay,{multiple:!0,disableCloseOnSelect:!0,loading:Vn,options:ca,value:Rn,getOptionSelected:(Hn,Kn)=>typeof Kn=="string"?(0,A.U2)(Hn)===Kn:Hn===Kn,getOptionLabel:Hn=>{const Kn=typeof Hn=="string"?oa.getEntity(Hn)||(0,A.KU)(Hn,{defaultKind:"group",defaultNamespace:"default"}):Hn;return fn(Kn,an(Kn))},onChange:(Hn,Kn)=>{zt(""),yn(Kn.map(Xn=>{const Sa=typeof Xn=="string"?Xn:(0,A.U2)(Xn);return typeof Xn!="string"&&oa.setEntity(Xn),Sa}))},filterOptions:Hn=>Hn,renderOption:(Hn,{selected:Kn})=>r.createElement(Ua,{entity:Hn,isSelected:Kn}),size:"small",popupIcon:r.createElement(st.A,{"data-testid":"owner-picker-expand"}),renderInput:Hn=>r.createElement(ee.A,{...Hn,className:me.input,onChange:Kn=>{zt(Kn.currentTarget.value)},variant:"outlined"}),ListboxProps:{onScroll:Hn=>{const Kn=Hn.currentTarget;Math.abs(Kn.scrollHeight-Kn.clientHeight-Kn.scrollTop)<1&&($n!=null&&$n.cursor)&&Tn({items:$n.items,cursor:$n.cursor})},"data-testid":"owner-picker-listbox"}})))},Qa=(0,C.A)(_=>({root:{display:"inline-flex",alignItems:"center"},icon:{marginRight:_.spacing(.5),color:_.palette.text.secondary,lineHeight:0}}),{name:"CatalogReactEntityDisplayName"}),Na=_=>{const{entityRef:I,hideIcon:U,disableTooltip:k,defaultKind:me,defaultNamespace:Ie}=_,Ye=Qa(),{primaryTitle:Xe,secondaryTitle:dt,Icon:qt}=Pn(I,{defaultKind:me,defaultNamespace:Ie});let zt=r.createElement(r.Fragment,null,Xe);return zt=r.createElement(ie.A,{component:"span",className:Ye.root},qt&&!U?r.createElement(ie.A,{component:"span",className:Ye.icon},r.createElement(qt,{fontSize:"inherit"})):null,zt),dt&&!k&&(zt=r.createElement(R.Ay,{enterDelay:1500,title:dt},zt)),zt},za=(0,Mt.Q6)("catalog:entity-route-ref",()=>(0,l.HM)({id:"catalog:entity",params:["namespace","kind","name"]}));function pr(_){var I,U;return{kind:_.kind.toLocaleLowerCase("en-US"),namespace:(U=(I=_.metadata.namespace)==null?void 0:I.toLocaleLowerCase("en-US"))!=null?U:A.oQ,name:_.metadata.name}}const ja=(0,r.forwardRef)((_,I)=>{var U;const{entityRef:k,defaultKind:me,defaultNamespace:Ie,title:Ye,children:Xe,hideIcon:dt,...qt}=_,zt=ar(_.entityRef),dn=(U=Xe!=null?Xe:Ye)!=null?U:r.createElement(Na,{entityRef:k,defaultKind:me,defaultNamespace:Ie,hideIcon:dt});return r.createElement(X.N_,{...qt,ref:I,to:zt},dn)});function ar(_){var I;const U=(0,l.Sf)(za);let k,me,Ie;if(typeof _=="string"){const Xe=(0,A.KU)(_);k=Xe.kind,me=Xe.namespace,Ie=Xe.name}else"metadata"in _?(k=_.kind,me=_.metadata.namespace,Ie=_.metadata.name):(k=_.kind,me=_.namespace,Ie=_.name);k=k.toLocaleLowerCase("en-US"),me=(I=me==null?void 0:me.toLocaleLowerCase("en-US"))!=null?I:A.oQ;const Ye={kind:encodeURIComponent(k),namespace:encodeURIComponent(me),name:encodeURIComponent(Ie)};return U(Ye)}function ma(_){const{entityRefs:I,hideIcons:U,...k}=_;return r.createElement(r.Fragment,null,I.map((me,Ie)=>{const Ye=typeof me=="string"?me:(0,A.U2)(me);return r.createElement(r.Fragment,{key:`${Ie}.${Ye}`},Ie>0&&", ",r.createElement(ja,{...k,entityRef:me,hideIcon:U}))}))}const rr=_=>{const I=useRouteRef(za);return React.createElement(IconButton,{component:Link,"aria-label":"Show",title:"Show details",to:I(getCompoundEntityRef(_.entity))},React.createElement(InfoIcon,null))},Za=_=>React.createElement(IconButton,{component:Link,"aria-label":"Email",title:`Email ${_.email}`,to:`mailto:${_.email}`},React.createElement(EmailIcon,null)),lr=_=>{var I;const U=(I=_.entity.spec.profile)==null?void 0:I.email;return U?React.createElement(Za,{email:U}):null},La=_=>{var I;const U=(I=_.entity.spec.profile)==null?void 0:I.email;return U?React.createElement(Za,{email:U}):null},qa=(0,C.A)(()=>({popoverPaper:{width:"30em"},descriptionTypography:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}})),or=4,et=_=>{var I,U,k,me;const{entityRef:Ie,children:Ye,delayTime:Xe=500}=_,dt=qa(),qt=useApiHolder(),zt=usePopupState({variant:"popover",popupId:"entity-peek-ahead"}),[dn,Rn]=useState(!1),yn=useMemo(()=>debounce(()=>Rn(!0),Xe),[Xe]),[{loading:$n,error:Vn,value:Tn},oa]=useAsyncFn(async()=>{const Hn=qt.get(je);if(Hn){const Kn=await Hn.getEntityByRef(Ie);if(!Kn)throw new Error(`${Ie} not found`);return Kn}},[qt,Ie]),ca=()=>{Rn(!1),yn.cancel()};return useEffect(()=>{zt.isOpen&&!Tn&&!Vn&&!$n&&oa()},[zt.isOpen,oa,Tn,Vn,$n]),React.createElement(React.Fragment,null,React.createElement(Typography,{component:"span",onMouseEnter:yn},React.createElement(Typography,{component:"span","data-testid":"trigger",...bindHover(zt)},Ye)),dn&&React.createElement(HoverPopover,{PaperProps:{className:dt.popoverPaper},...bindPopover(zt),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onMouseLeave:ca},React.createElement(Card,null,React.createElement(CardContent,null,Vn&&React.createElement(ResponseErrorPanel,{error:Vn}),$n&&React.createElement(Progress,null),Tn&&React.createElement(React.Fragment,null,React.createElement(Typography,{color:"textSecondary"},Tn.metadata.namespace),React.createElement(Typography,{variant:"h5",component:"div"},Tn.metadata.name),React.createElement(Typography,{color:"textSecondary",gutterBottom:!0},Tn.kind),Tn.metadata.description&&React.createElement(Typography,{className:dt.descriptionTypography,paragraph:!0},Tn.metadata.description),React.createElement(Typography,null,(U=(I=Tn.spec)==null?void 0:I.type)==null?void 0:U.toString()),React.createElement(Box,{marginTop:"0.5em"},(Tn.metadata.tags||[]).slice(0,or).map(Hn=>React.createElement(Chip,{key:Hn,size:"small",label:Hn})),((k=Tn.metadata.tags)==null?void 0:k.length)&&((me=Tn.metadata.tags)==null?void 0:me.length)>or&&React.createElement(Tooltip,{title:"Drill into the entity to see all of the tags."},React.createElement(Chip,{key:"other-tags",size:"small",label:"..."}))))),!Vn&&Tn&&React.createElement(CardActions,null,React.createElement(React.Fragment,null,isUserEntity(Tn)&&React.createElement(La,{entity:Tn}),isGroupEntity(Tn)&&React.createElement(lr,{entity:Tn}),React.createElement(rr,{entity:Tn}))))))},Ee=(0,C.A)(_=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),rt=()=>{var _,I;const U=Ee(),{filters:k,updateFilters:me}=ln(),[Ie,Ye]=(0,r.useState)((I=(_=k.text)==null?void 0:_.value)!=null?I:"");return(0,O.A)(()=>{me({text:Ie.length?new ve(Ie):void 0})},250,[Ie,me]),r.createElement(p.A,{className:U.searchToolbar},r.createElement(w.A,null,r.createElement(f.A,{"aria-label":"search",id:"input-with-icon-adornment",className:U.input,placeholder:"Search",autoComplete:"off",onChange:Xe=>Ye(Xe.target.value),value:Ie,startAdornment:r.createElement(E.A,{position:"start"},r.createElement(Bt.default,null)),endAdornment:r.createElement(E.A,{position:"end"},r.createElement(F.A,{"aria-label":"clear search",onClick:()=>Ye(""),edge:"end",disabled:Ie.length===0},r.createElement(Xt.default,null)))})))},un=Object.freeze({createEntityRefColumn(_){const{defaultKind:I}=_;function U(k){var me;return((me=k.metadata)==null?void 0:me.title)||an(k,{defaultKind:I})}return{title:"Name",highlight:!0,customFilterAndSearch(k,me){return U(me).includes(k)},customSort(k,me){return U(k).localeCompare(U(me))},render:k=>{var me;return r.createElement(ja,{entityRef:k,defaultKind:I,title:(me=k.metadata)==null?void 0:me.title})}}},createEntityRelationColumn(_){const{title:I,relation:U,defaultKind:k,filter:me}=_;function Ie(Xe){return(0,Ue.g)(Xe,U,me)}function Ye(Xe){return Ie(Xe).map(dt=>an(dt,{defaultKind:k})).join(", ")}return{title:I,customFilterAndSearch(Xe,dt){return Ye(dt).includes(Xe)},customSort(Xe,dt){return Ye(Xe).localeCompare(Ye(dt))},render:Xe=>r.createElement(ma,{entityRefs:Ie(Xe),defaultKind:k})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:A.vv,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:A.jn,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:A.jn,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:_=>r.createElement(X.Mm,{text:_.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),Un=[un.createEntityRefColumn({defaultKind:"system"}),un.createDomainColumn(),un.createOwnerColumn(),un.createMetadataDescriptionColumn()],Zn=[un.createEntityRefColumn({defaultKind:"component"}),un.createSystemColumn(),un.createOwnerColumn(),un.createSpecTypeColumn(),un.createSpecLifecycleColumn(),un.createMetadataDescriptionColumn()],pa=(0,C.A)(_=>({empty:{padding:_.spacing(2),display:"flex",justifyContent:"center"}})),xa=_=>{const{entities:I,title:U,emptyContent:k,variant:me="gridItem",columns:Ie,tableOptions:Ye={}}=_,Xe=pa(),dt={minWidth:"0",width:"100%"};return me==="gridItem"&&(dt.height="calc(100% - 10px)"),r.createElement(X.XI,{columns:Ie,title:U,style:dt,emptyContent:k&&r.createElement("div",{className:Xe.empty},k),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1,...Ye},data:I})};xa.columns=un,xa.systemEntityColumns=Un,xa.componentEntityColumns=Zn;const Ha=(0,C.A)({input:{}},{name:"CatalogReactEntityTagPicker"}),wa=_=>{const I=Ha();return r.createElement(Ft,{label:"Tags",name:"tags",path:"metadata.tags",Filter:V,showCounts:_.showCounts,InputProps:{className:I.input}})},Va=_=>{var I;const{hidden:U,initialFilter:k}=_,me=(0,o.u)(o.l),{error:Ie,availableTypes:Ye,selectedTypes:Xe,setSelectedTypes:dt}=M();if((0,r.useEffect)(()=>{Ie&&me.post({message:"Failed to load entity types",severity:"error"}),k&&dt([k])},[Ie,me,k,dt]),Ye.length===0||Ie)return null;const qt=[{value:"all",label:"all"},...Ye.map(zt=>({value:zt,label:zt}))];return U?null:r.createElement(ie.A,{pb:1,pt:1},r.createElement(X.l6,{label:"Type",items:qt,selected:(I=qt.length>1?Xe[0]:void 0)!=null?I:"all",onChange:zt=>dt(zt==="all"?[]:[String(zt)])}))},Ia=(0,re.A)({root:{color:"#f3ba37"}})(jt.A),Ga=_=>{const{toggleStarredEntity:I,isStarredEntity:U}=Tt(_.entity);return r.createElement(F.A,{"aria-label":"favorite",color:"inherit",..._,onClick:()=>I()},r.createElement(R.Ay,{title:U?"Remove from favorites":"Add to favorites"},U?r.createElement(Ia,null):r.createElement(Ln.A,null)))},v=pn.A;function c(_,I){if(_)return _.toLocaleLowerCase("en-US");if(I)try{return(0,A.KU)(I).kind.toLocaleLowerCase("en-US")}catch{return}}function P(_,I){const U=(0,l.nm)(),k=c(_,I);return k&&U.getSystemIcon(`kind:${k}`)||v}function z(_){const{kind:I,entityRef:U,...k}=_,me=P(I,U);return r.createElement(me,{...k})}const Te=(0,C.A)(_=>({node:{fill:_.palette.grey[300],stroke:_.palette.grey[300],"&.primary":{fill:_.palette.primary.light,stroke:_.palette.primary.light},"&.secondary":{fill:_.palette.secondary.light,stroke:_.palette.secondary.light}},text:{fill:_.palette.getContrastText(_.palette.grey[300]),"&.primary":{fill:_.palette.primary.contrastText},"&.secondary":{fill:_.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function He(_){const I=(0,o.u)(je),U=(0,A.U2)(_),{loading:k,error:me,value:Ie}=(0,K.default)(async()=>{const Ye=await I.getEntityAncestors({entityRef:U}),Xe=new Array,dt=new Array;for(const qt of Ye.items){const zt=(0,A.U2)(qt.entity),dn=zt===Ye.rootEntityRef;Xe.push({id:zt,root:dn,...qt.entity});for(const Rn of qt.parentEntityRefs)dt.push({from:zt,to:Rn})}return{nodes:Xe,edges:dt}},[U]);return{loading:k,error:me,nodes:(Ie==null?void 0:Ie.nodes)||[],edges:(Ie==null?void 0:Ie.edges)||[]}}function Ht({node:_}){const I=Te(),U=(0,bt.Zp)(),k=(0,l.Sf)(za),[me,Ie]=(0,r.useState)(0),[Ye,Xe]=(0,r.useState)(0),dt=(0,l.nm)(),qt=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{if(qt.current){let{height:ca,width:Hn}=qt.current.getBBox();ca=Math.round(ca),Hn=Math.round(Hn),(ca!==Ye||Hn!==me)&&(Ie(Hn),Xe(ca))}},[me,Ye]);const zt=dt.getSystemIcon(`kind:${_.kind.toLocaleLowerCase("en-US")}`),dn=10,Rn=Ye,yn=zt?Rn+dn:0,$n=yn+me+dn*2,Vn=Ye+dn*2,Tn=_.metadata.title||(_.kind&&_.metadata.name&&_.metadata.namespace?an({kind:_.kind,name:_.metadata.name,namespace:_.metadata.namespace||""}):_.id),oa=()=>{U(k({kind:_.kind,namespace:_.metadata.namespace||A.oQ,name:_.metadata.name}))};return r.createElement("g",{onClick:oa,className:I.clickable},r.createElement("rect",{className:St()(I.node,_.root?"secondary":"primary"),width:$n,height:Vn,rx:10}),zt&&r.createElement(z,{kind:_.kind,y:dn,x:dn,width:Rn,height:Rn,className:St()(I.text,_.root?"secondary":"primary")}),r.createElement("text",{ref:qt,className:St()(I.text,_.root?"secondary":"primary"),y:Vn/2,x:yn+(me+dn*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},Tn))}function rn(_){const{loading:I,error:U,nodes:k,edges:me}=He(_.entity);return I?r.createElement(X.ke,null):U?r.createElement(X._1,{error:U}):r.createElement(r.Fragment,null,r.createElement(se.A,{variant:"h2"},"Ancestry"),r.createElement(se.A,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",r.createElement(X.N_,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),r.createElement(ie.A,{mt:4},r.createElement(X.wB,{nodes:k,edges:me,renderNode:Ht,direction:X.DT.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const Mn=(0,C.A)(_=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:_.spacing(2)},helpIcon:{marginLeft:_.spacing(1),color:_.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function Sn(_){const I=Mn();return r.createElement(_e.A,{..._,primaryTypographyProps:{className:I.monospace},secondaryTypographyProps:{className:I.monospace}})}function Ea(_){const I=Mn();return r.createElement(Q.A,{className:I.monospace},_.children)}function ba(_){return r.createElement(ie.A,{mt:2},r.createElement(g.A,{variant:"outlined"},r.createElement(H.A,null,r.createElement(oe.A,{variant:"h6",gutterBottom:!0},_.title,_.helpLink&&r.createElement(Ja,{to:_.helpLink})),_.children)))}function Ra(_){if(_.match(/^url:https?:\/\//))return _.slice(4);if(_.match(/^https?:\/\//))return _}function ua(_){const[I,U]=_.entry,k=Ra(U);return r.createElement(G.A,null,_.indent&&r.createElement(Oe.A,null),r.createElement(Sn,{primary:I,secondary:k?r.createElement(X.N_,{to:k},U):U}))}function Ja(_){const I=Mn();return r.createElement(X.N_,{to:_.to,className:I.helpIcon},r.createElement(cn.A,{fontSize:"inherit"}))}const er=(0,C.A)({root:{display:"flex",flexDirection:"column"}});function hr(_){var I,U;const k=(0,o.u)(je),me=(0,A.U2)(_),Ie=(I=_.metadata.annotations)==null?void 0:I[A.Eo],Ye=(U=_.metadata.annotations)==null?void 0:U[A.r2],{loading:Xe,error:dt,value:qt}=(0,K.default)(async()=>!Ie&&!Ye?[]:(await k.getEntities({filter:[...Ie?[{[`metadata.annotations.${A.Eo}`]:Ie}]:[],...Ye?[{[`metadata.annotations.${A.r2}`]:Ye}]:[]]})).items,[Ie,Ye]);return{loading:Xe,error:dt,location:Ie,originLocation:Ye,colocatedEntities:qt==null?void 0:qt.filter(zt=>(0,A.U2)(zt)!==me)}}function cr(_){return r.createElement(ue.A,{dense:!0},_.header&&r.createElement(ua,{key:"header",entry:_.header}),_.entities.map(I=>r.createElement(G.A,{key:(0,A.U2)(I)},r.createElement(Sn,{primary:r.createElement(ja,{entityRef:I})}))))}function Eo(_){const{entity:I}=_,{loading:U,error:k,location:me,originLocation:Ie,colocatedEntities:Ye}=hr(I);if(U)return r.createElement(X.ke,null);if(k)return r.createElement(X._1,{error:k});if(!me&&!Ie)return r.createElement(at.A,{severity:"warning"},"Entity had no location information.");if(!(Ye!=null&&Ye.length))return r.createElement(at.A,{severity:"info"},"There were no other entities on this location.");if(me===Ie)return r.createElement(cr,{entities:Ye});const Xe=Ye.filter(qt=>{var zt;return((zt=qt.metadata.annotations)==null?void 0:zt[A.Eo])===me}),dt=Ye.filter(qt=>{var zt;return((zt=qt.metadata.annotations)==null?void 0:zt[A.r2])===Ie});return r.createElement(r.Fragment,null,Xe.length>0&&r.createElement(cr,{entities:Xe,header:["At the same location",me]}),dt.length>0&&r.createElement(cr,{entities:dt,header:["At the same origin",Ie]}))}function no(_){const I=er();return r.createElement(r.Fragment,null,r.createElement(se.A,{variant:"h2"},"Colocated"),r.createElement(se.A,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),r.createElement("div",{className:I.root},r.createElement(Eo,{entity:_.entity})))}function Nr(_){return Object.fromEntries([...Object.entries(_)].sort((I,U)=>I[0]<U[0]?-1:1))}function ur(_){return r.createElement(r.Fragment,null,r.createElement(se.A,{variant:"h2"},"Entity as JSON"),r.createElement(se.A,null,"This is the raw entity data as received from the catalog, on JSON form."),r.createElement(se.A,null,r.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},r.createElement(X.z7,{text:JSON.stringify(Nr(_.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const Vr=(0,C.A)({root:{display:"flex",flexDirection:"column"}});function Lr(_){var I,U,k;const me=Vr(),{apiVersion:Ie,kind:Ye,metadata:Xe,spec:dt,relations:qt=[],status:zt={}}=_.entity,dn=lt()(gt()(qt,yn=>yn.targetRef),"type"),Rn=(0,A.U2)(_.entity);return r.createElement(r.Fragment,null,r.createElement(se.A,{variant:"h2"},"Overview"),r.createElement("div",{className:me.root},r.createElement(ba,{title:"Identity"},r.createElement(ue.A,{dense:!0},r.createElement(G.A,null,r.createElement(Sn,{primary:"apiVersion",secondary:Ie})),r.createElement(G.A,null,r.createElement(Sn,{primary:"kind",secondary:Ye})),(dt==null?void 0:dt.type)&&r.createElement(G.A,null,r.createElement(Sn,{primary:"spec.type",secondary:(I=dt.type)==null?void 0:I.toString()})),Xe.uid&&r.createElement(G.A,null,r.createElement(Sn,{primary:"uid",secondary:Xe.uid}),r.createElement(it.A,null,r.createElement(X.lz,{text:Xe.uid}))),Xe.etag&&r.createElement(G.A,null,r.createElement(Sn,{primary:"etag",secondary:Xe.etag}),r.createElement(it.A,null,r.createElement(X.lz,{text:Xe.etag}))),r.createElement(G.A,null,r.createElement(Sn,{primary:"entityRef",secondary:Rn}),r.createElement(it.A,null,r.createElement(X.lz,{text:Rn}))))),r.createElement(ba,{title:"Metadata"},!!Object.keys(Xe.annotations||{}).length&&r.createElement(ue.A,{dense:!0,subheader:r.createElement(Ea,null,"Annotations",r.createElement(Ja,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(Xe.annotations).map(yn=>r.createElement(ua,{key:yn[0],indent:!0,entry:yn}))),!!Object.keys(Xe.labels||{}).length&&r.createElement(ue.A,{dense:!0,subheader:r.createElement(Ea,null,"Labels")},Object.entries(Xe.labels).map(yn=>r.createElement(ua,{key:yn[0],indent:!0,entry:yn}))),!!((U=Xe.tags)!=null&&U.length)&&r.createElement(ue.A,{dense:!0,subheader:r.createElement(Ea,null,"Tags")},Xe.tags.map((yn,$n)=>r.createElement(G.A,{key:`${yn}-${$n}`},r.createElement(Oe.A,null),r.createElement(Sn,{primary:yn}))))),!!qt.length&&r.createElement(ba,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(dn).map(([yn,$n],Vn)=>r.createElement("div",{key:Vn},r.createElement(ue.A,{dense:!0,subheader:r.createElement(Ea,null,yn)},$n.map(Tn=>r.createElement(G.A,{key:Tn.targetRef},r.createElement(Sn,{primary:r.createElement(ja,{entityRef:Tn.targetRef})}))))))),!!((k=zt.items)!=null&&k.length)&&r.createElement(ba,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},zt.items.map((yn,$n)=>r.createElement("div",{key:$n},r.createElement(oe.A,null,yn.level,": ",yn.type),r.createElement(ie.A,{ml:2},yn.message))))))}function xr(_){return r.createElement(r.Fragment,null,r.createElement(se.A,{variant:"h2"},"Entity as YAML"),r.createElement(se.A,null,"This is the raw entity data as received from the catalog, on YAML form."),r.createElement(se.A,null,r.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},r.createElement(X.z7,{text:Ot.Ay.stringify(Nr(_.entity)),language:"yaml",showCopyCodeButton:!0}))))}const Fr=(0,C.A)(_=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:_.palette.background.paper},tabs:{borderRight:`1px solid ${_.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function Cr(_){const{children:I,value:U,index:k,...me}=_,Ie=Fr();return r.createElement("div",{role:"tabpanel",hidden:U!==k,id:`vertical-tabpanel-${k}`,"aria-labelledby":`vertical-tab-${k}`,className:Ie.tabContents,...me},U===k&&r.createElement(ie.A,{pl:3,pr:3},I))}function Pr(_){return{id:`vertical-tab-${_}`,"aria-controls":`vertical-tabpanel-${_}`}}function ao(_){const I=Fr(),[U,k]=r.useState(0);return(0,r.useEffect)(()=>{k(0)},[_.open]),_.entity?r.createElement(ot.A,{fullWidth:!0,maxWidth:"xl",open:_.open,onClose:_.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:I.fullHeightDialog}},r.createElement(pt.A,{id:"entity-inspector-dialog-title"},"Entity Inspector"),r.createElement(nt.A,{dividers:!0},r.createElement("div",{className:I.root},r.createElement(Ge.A,{orientation:"vertical",variant:"scrollable",value:U,onChange:(me,Ie)=>k(Ie),"aria-label":"Inspector options",className:I.tabs},r.createElement(De.A,{label:"Overview",...Pr(0)}),r.createElement(De.A,{label:"Ancestry",...Pr(1)}),r.createElement(De.A,{label:"Colocated",...Pr(2)}),r.createElement(De.A,{label:"Raw JSON",...Pr(3)}),r.createElement(De.A,{label:"Raw YAML",...Pr(4)})),r.createElement(Cr,{value:U,index:0},r.createElement(Lr,{entity:_.entity})),r.createElement(Cr,{value:U,index:1},r.createElement(rn,{entity:_.entity})),r.createElement(Cr,{value:U,index:2},r.createElement(no,{entity:_.entity})),r.createElement(Cr,{value:U,index:3},r.createElement(ur,{entity:_.entity})),r.createElement(Cr,{value:U,index:4},r.createElement(xr,{entity:_.entity})))),r.createElement(Ae.A,null,r.createElement(fe.A,{onClick:_.onClose,color:"primary"},"Close"))):null}function ro(_){var I;const U=(0,o.u)(je),k=(I=_.metadata.annotations)==null?void 0:I[A.r2],me=_.metadata.uid,Ie=k==="bootstrap:bootstrap",Ye=(0,K.default)(async()=>{const $n=U.getLocationByRef(k);let Vn;if(!k)Vn=Promise.resolve([]);else{const Tn=`metadata.annotations.${A.r2}`;Vn=U.getEntities({filter:{[Tn]:k},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(oa=>oa.items)}return Promise.all([$n,Vn]).then(([Tn,oa])=>({location:Tn,colocatedEntities:oa}))},[U,_]),Xe=(0,r.useCallback)(async function(){const{location:Vn}=Ye.value;await U.removeLocationById(Vn.id)},[U,Ye]),dt=(0,r.useCallback)(async function(){await U.removeEntityByUid(me)},[U,me]);if(Ie)return{type:"bootstrap",location:k,deleteEntity:dt};const{loading:qt,error:zt,value:dn}=Ye;if(qt)return{type:"loading"};if(zt)return{type:"error",error:zt};const{location:Rn,colocatedEntities:yn}=dn;return Rn?{type:"unregister",location:k,colocatedEntities:yn.map(A.sM),unregisterLocation:Xe,deleteEntity:dt}:{type:"only-delete",deleteEntity:dt}}const oo=(0,C.A)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),Gr=({entity:_,onConfirm:I,onClose:U})=>{var k;const me=(0,o.u)(o.l),Ie=(0,o.u)(o.p),Ye=oo(),Xe=ro(_),[dt,qt]=(0,r.useState)(!1),[zt,dn]=(0,r.useState)(!1),Rn=(k=Ie.getOptionalString("app.title"))!=null?k:"Backstage",yn=(0,r.useCallback)(async function(){if("unregisterLocation"in Xe){dn(!0);try{await Xe.unregisterLocation(),I()}catch(oa){(0,Vt.tX)(oa),me.post({message:oa.message})}finally{dn(!1)}}},[me,I,Xe]),$n=(0,r.useCallback)(async function(){var oa;if("deleteEntity"in Xe){dn(!0);try{await Xe.deleteEntity();const ca=(oa=_.metadata.title)!=null?oa:_.metadata.name;I(),me.post({message:`Removed entity ${ca}`,severity:"success",display:"transient"})}catch(ca){(0,Vt.tX)(ca),me.post({message:ca.message})}finally{dn(!1)}}},[me,I,Xe,_]),Vn=()=>r.createElement(Ae.A,{className:Ye.dialogActions},r.createElement(fe.A,{onClick:U,color:"primary"},"Cancel"));return Xe.type==="loading"?r.createElement(X.ke,null):Xe.type==="error"?r.createElement(X._1,{error:Xe.error}):Xe.type==="bootstrap"?r.createElement(r.Fragment,null,r.createElement(at.A,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',Xe.location,'"). If you believe this is in error, please contact the ',Rn," ","integrator."),r.createElement(ie.A,{marginTop:2},!dt&&r.createElement(r.Fragment,null,r.createElement(fe.A,{variant:"text",size:"small",color:"primary",className:Ye.advancedButton,onClick:()=>qt(!0)},"Advanced Options"),r.createElement(Vn,null)),dt&&r.createElement(r.Fragment,null,r.createElement(se.A,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),r.createElement(fe.A,{variant:"contained",color:"secondary",disabled:zt,onClick:$n},"Delete Entity"),r.createElement(Vn,null)))):Xe.type==="only-delete"?r.createElement(r.Fragment,null,r.createElement(se.A,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),r.createElement(fe.A,{variant:"contained",color:"secondary",disabled:zt,onClick:$n},"Delete Entity"),r.createElement(Vn,null)):Xe.type==="unregister"?r.createElement(r.Fragment,null,r.createElement(se.A,null,"This action will unregister the following entities:"),r.createElement(se.A,{component:"ul"},Xe.colocatedEntities.map(Tn=>r.createElement("li",{key:`${Tn.kind}:${Tn.namespace}/${Tn.name}`},r.createElement(ja,{entityRef:Tn})))),r.createElement(se.A,null,"Located at the following location:"),r.createElement(se.A,{component:"ul"},r.createElement("li",null,Xe.location)),r.createElement(se.A,null,"To undo, just re-register the entity in ",Rn,"."),r.createElement(ie.A,{marginTop:2},r.createElement(fe.A,{variant:"contained",color:"secondary",disabled:zt,onClick:yn},"Unregister Location"),!dt&&r.createElement(ie.A,{component:"span",marginLeft:2},r.createElement(fe.A,{variant:"text",size:"small",color:"primary",className:Ye.advancedButton,onClick:()=>qt(!0)},"Advanced Options"))),dt&&r.createElement(r.Fragment,null,r.createElement(ie.A,{paddingTop:4,paddingBottom:4},r.createElement(Ne.A,null)),r.createElement(se.A,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),r.createElement(fe.A,{variant:"contained",color:"secondary",disabled:zt,onClick:$n},"Delete Entity"))):r.createElement(at.A,{severity:"error"},"Internal error: Unknown state")},io=_=>{const{open:I,onConfirm:U,onClose:k,entity:me}=_;return r.createElement(ot.A,{open:I,onClose:k},r.createElement(pt.A,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),r.createElement(nt.A,null,r.createElement(Gr,{entity:me,onConfirm:U,onClose:k})))};function so(){const _=(0,o.u)(o.t),I=(0,o.u)(je),{filters:U}=ln(),{value:k,loading:me}=(0,K.default)(async()=>(await _.getBackstageIdentity()).ownershipEntityRefs,[]),{user:Ie,owners:Ye,...Xe}=U,dt=j((0,te.compact)(Object.values(Xe))),[{value:qt,loading:zt},dn]=(0,It.default)(async yn=>{const $n=ir(yn.owners,yn.ownershipEntityRefs);if($n===void 0)return 0;const{["metadata.name"]:Vn,...Tn}=yn.filter.filter,{totalItems:oa}=await I.queryEntities({...yn.filter,filter:{...Tn,"relations.ownedBy":$n},limit:0});return oa},[],{loading:!0});return(0,ct.A)(()=>{Object.keys(dt.filter).length!==0&&k!==void 0&&dn({ownershipEntityRefs:k,owners:Ye,filter:dt})},[k,Ye,dt]),{count:qt,loading:me||zt,filter:(0,r.useMemo)(()=>Ut.owned(k!=null?k:[]),[k]),ownershipEntityRefs:k}}function ir(_,I){var U;if(I===void 0)return;const k=(U=_==null?void 0:_.values)!=null?U:[];if(k.length){const me=(0,te.intersection)(k,I);return me.length===0?void 0:me}return I}function lo(){const _=(0,o.u)(je),{filters:I}=ln(),U=(0,r.useRef)(),k=(0,r.useMemo)(()=>{const{user:Ye,...Xe}=I,dt=(0,te.compact)(Object.values(Xe)),qt=j(dt),zt={...qt,limit:0};return Object.keys(qt.filter).length===0?(U.current=void 0,U.current):(0,te.isEqual)(zt,U.current)?U.current:(U.current=zt,zt)},[I]),{value:me,loading:Ie}=(0,K.default)(async()=>{if(k===void 0)return 0;const{totalItems:Ye}=await _.queryEntities(k);return Ye},[k]);return{count:me,loading:Ie}}function Jr(){const _=(0,o.u)(je),{filters:I}=ln(),{starredEntities:U}=Re(),k=(0,r.useRef)(),me=(0,r.useMemo)(()=>{const{user:dt,...qt}=I,zt=(0,te.compact)(Object.values(qt)),dn=j(zt),yn={...dn,filter:{...dn.filter,["metadata.name"]:Array.from(U).map($n=>(0,A.KU)($n).name)},limit:1e3};return(0,te.isEqual)(yn,k.current)?k.current:(k.current=yn,yn)},[I,U]),{value:Ie,loading:Ye}=(0,K.default)(async()=>U.size?(await _.queryEntities(me)).items.map(qt=>(0,A.U2)({kind:qt.kind,namespace:qt.metadata.namespace,name:qt.metadata.name})).filter(qt=>U.has(qt)).length:0,[me,U]),Xe=(0,r.useMemo)(()=>Ut.starred(Array.from(U)),[U]);return{count:Ie,loading:Ye,filter:Xe}}const gr=(0,C.A)(_=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:_.spacing(1,0,1,0)},title:{margin:_.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:_.palette.text.primary},menuItem:{minHeight:_.spacing(6)},groupWrapper:{margin:_.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function Kr(_){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:Dt.A},{id:"starred",label:"Starred",icon:jt.A}]},{name:_!=null?_:"Company",items:[{id:"all",label:"All"}]}]}const Br=_=>{var I;const{initialFilter:U,availableFilters:k}=_,me=gr(),Ye=(I=(0,o.u)(o.p).getOptionalString("organization.name"))!=null?I:"Company",{filters:Xe,updateFilters:dt,queryParameters:{kind:qt,user:zt}}=ln(),dn=["starred","all"],Rn=Kr(Ye).map(Ca=>({...Ca,items:Ca.items.filter(({id:Ta})=>["group","user"].some(Ma=>Ma===qt)?dn.includes(Ta):!k||k.includes(Ta))})).filter(({items:Ca})=>!!Ca.length),{count:yn,loading:$n,filter:Vn}=so(),{count:Tn}=lo(),{count:oa,filter:ca,loading:Hn}=Jr(),Kn=(0,r.useMemo)(()=>[zt].flat()[0],[zt]),[Xn,Sa]=(0,r.useState)(Kn!=null?Kn:U),_a=(0,r.useMemo)(()=>({all:Tn,starred:oa,owned:yn}),[oa,yn,Tn]);(0,r.useEffect)(()=>{Kn&&Sa(Kn)},[Kn]);const ga=$n||Hn;return(0,r.useEffect)(()=>{!ga&&Xn&&Xn!=="all"&&_a[Xn]===0&&Sa("all")},[ga,_a,Xn,Sa]),(0,r.useEffect)(()=>{if(!Xn||ga)return;dt({user:Xn==="owned"?Vn:Xn==="starred"?ca:Ut.all()})},[Xn,ca,Vn,dt,ga]),r.createElement(g.A,{className:me.root},Rn.map(Ca=>r.createElement(r.Fragment,{key:Ca.name},r.createElement(oe.A,{variant:"subtitle2",component:"span",className:me.title},Ca.name),r.createElement(g.A,{className:me.groupWrapper},r.createElement(ue.A,{disablePadding:!0,dense:!0,role:"menu","aria-label":Ca.name},Ca.items.map(Ta=>{var Ma,jr;return r.createElement(ne.A,{role:"none presentation",key:Ta.id,divider:!0,onClick:()=>Sa(Ta.id),selected:Ta.id===((Ma=Xe.user)==null?void 0:Ma.value),className:me.menuItem,disabled:_a[Ta.id]===0,"data-testid":`user-picker-${Ta.id}`,tabIndex:0,ContainerProps:{role:"menuitem"}},Ta.icon&&r.createElement(Oe.A,{className:me.listIcon},r.createElement(Ta.icon,{fontSize:"small"})),r.createElement(_e.A,null,r.createElement(oe.A,{variant:"body1"},Ta.label," ")),r.createElement(it.A,null,(jr=_a[Ta.id])!=null?jr:"-"))}))))))},fr=(0,C.A)({input:{}},{name:"CatalogReactEntityProcessingStatusPickerPicker"}),vr=r.createElement(Qe.A,{fontSize:"small"}),Rr=r.createElement(mt.A,{fontSize:"small"}),Sr=()=>{const _=fr(),{updateFilters:I}=ln(),[U,k]=(0,r.useState)([]);function me(Xe){I({orphan:Xe?new Nt(Xe):void 0})}function Ie(Xe){I({error:Xe?new _n(Xe):void 0})}const Ye=["Is Orphan","Has Error"];return r.createElement(ie.A,{pb:1,pt:1},r.createElement(oe.A,{variant:"button",component:"label"},"Processing Status",r.createElement(Zt.Ay,{multiple:!0,disableCloseOnSelect:!0,options:Ye,value:U,onChange:(Xe,dt)=>{k(dt),me(dt.includes("Is Orphan")),Ie(dt.includes("Has Error"))},renderOption:(Xe,{selected:dt})=>r.createElement(Pe.A,{control:r.createElement(Le.A,{icon:vr,checkedIcon:Rr,checked:dt}),onClick:qt=>qt.preventDefault(),label:Xe}),size:"small",popupIcon:r.createElement(st.A,{"data-testid":"processing-status-picker-expand"}),renderInput:Xe=>r.createElement(ee.A,{...Xe,className:_.input,variant:"outlined"})})))},dr=(0,C.A)({input:{}},{name:"CatalogReactEntityNamespacePicker"}),vo=()=>{const _=dr();return r.createElement(Ft,{label:"Namespace",name:"namespace",path:"metadata.namespace",Filter:Je,InputProps:{className:_.input}})},co=(0,C.A)(_=>({code:{borderRadius:6,margin:_.spacing(2,0),background:_.palette.type==="dark"?"#444":_.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function uo(_,I){var U,k;const me=(I==null?void 0:I.kind)||"Component",Ie=(I==null?void 0:I.metadata.name)||"example",Ye=((U=I==null?void 0:I.spec)==null?void 0:U.type)||"website",Xe=((k=I==null?void 0:I.spec)==null?void 0:k.owner)||"user:default/guest",dt=`apiVersion: backstage.io/v1alpha1
kind: ${me}
metadata:
  name: ${Ie}
  annotations:${_.map(dn=>`
    ${dn}: value`).join("")}
spec:
  type: ${Ye}
  owner: ${Xe}`;let qt=6;const zt=[];return _.forEach(()=>{zt.push(qt),qt++}),{yamlText:dt,lineNumbers:zt}}function Yr(_,I="Component"){const U=_.length<=1;return r.createElement(r.Fragment,null,"The ",U?"annotation":"annotations"," ",_.map(k=>r.createElement("code",null,k)).reduce((k,me)=>r.createElement(r.Fragment,null,k,", ",me))," ",U?"is":"are"," missing. You need to add the"," ",U?"annotation":"annotations"," to your ",I," if you want to enable this tool.")}function zr(_){let I;try{I=(0,Ue.u)().entity}catch{}const{annotation:U,readMoreUrl:k}=_,me=Array.isArray(U)?U:[U],Ie=k||"https://backstage.io/docs/features/software-catalog/well-known-annotations",Ye=co(),Xe=(I==null?void 0:I.kind)||"Component",{yamlText:dt,lineNumbers:qt}=uo(me,I);return r.createElement(X.pp,{missing:"field",title:"Missing Annotation",description:Yr(me,Xe),action:r.createElement(r.Fragment,null,r.createElement(oe.A,{variant:"body1"},"Add the annotation to your ",Xe," YAML as shown in the highlighted example below:"),r.createElement(ie.A,{className:Ye.code},r.createElement(X.z7,{text:dt,language:"yaml",showLineNumbers:!0,highlightedNumbers:qt,customStyle:{background:"inherit",fontSize:"115%"}})),r.createElement(fe.A,{color:"primary",component:X.N_,to:Ie},"Read more"))})}function ha(_){var I;const{children:U,value:k}=_,[me,Ie]=useState((I=k==null?void 0:k.filters)!=null?I:{}),Ye=useCallback(qt=>{Ie(zt=>{const dn=typeof qt=="function"?qt(zt):qt;return{...zt,...dn}})},[]),Xe=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),dt=useMemo(()=>{var qt,zt,dn,Rn,yn;return{entities:(qt=k==null?void 0:k.entities)!=null?qt:Xe.entities,backendEntities:(zt=k==null?void 0:k.backendEntities)!=null?zt:Xe.backendEntities,updateFilters:(dn=k==null?void 0:k.updateFilters)!=null?dn:Ye,filters:me,loading:(Rn=k==null?void 0:k.loading)!=null?Rn:!1,queryParameters:(yn=k==null?void 0:k.queryParameters)!=null?yn:Xe.queryParameters,error:k==null?void 0:k.error}},[k,Xe,me,Ye]);return React.createElement(An.Provider,{value:dt},U)}},70387:(wn,wt,e)=>{"use strict";e.d(wt,{E:()=>ot});var o=e(29835),l=e(23180),A=e(48821),B=e(11638),u=e(92651),r=e(58054),Y=e(26343),ye=e(46423),ce=e(5951),a=e(37197),fe=e(71677),le=e(29365),ie=e(55197),oe=e(28233),ze=e(77125),Le=e(74219),Pe=e(14041),C=e(18690),ee=e(58837),R=e(85005),p=e(71407),w=e(26314),f=e(90749),E=e(99993),F=e(92399),re=e(51100),se=e(41241);function _e(pt){var nt;const{unregisterEntityOptions:Ge,isUnregisterAllowed:De,onUnregisterEntity:Ae,onClose:Ne}=pt,ne=typeof(Ge==null?void 0:Ge.disableUnregister)=="boolean",N=(nt=!De||(ne?!!(Ge!=null&&Ge.disableUnregister):(Ge==null?void 0:Ge.disableUnregister)==="disable"))!=null?nt:!1;let X=Pe.createElement(Pe.Fragment,null);return(Ge==null?void 0:Ge.disableUnregister)!=="hidden"&&(X=Pe.createElement(Y.A,{onClick:()=>{Ne(),Ae()},disabled:N},Pe.createElement(ye.A,null,Pe.createElement(F.A,{fontSize:"small"})),Pe.createElement(ce.A,{primary:"Unregister entity"}))),Pe.createElement(Pe.Fragment,null,X)}const Q=(0,ee.A)(pt=>({button:{color:pt.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function g(pt){const{UNSTABLE_extraContextMenuItems:nt,UNSTABLE_contextMenuOptions:Ge,onUnregisterEntity:De,onInspectEntity:Ae}=pt,[Ne,ne]=(0,Pe.useState)(),N=Q(),Ue=(0,f.Az)(E.Nf).allowed,te=O=>{ne(O.currentTarget)},we=()=>{ne(void 0)},ht=(0,A.u)(A.l),[Wt,bt]=(0,re.A)();(0,Pe.useEffect)(()=>{!Wt.error&&Wt.value&&ht.post({message:"Copied!",severity:"info",display:"transient"})},[Wt,ht]);const It=nt&&[...nt.map(O=>Pe.createElement(Y.A,{key:O.title,onClick:()=>{we(),O.onClick()}},Pe.createElement(ye.A,null,Pe.createElement(O.Icon,{fontSize:"small"})),Pe.createElement(ce.A,{primary:O.title}))),Pe.createElement(a.A,{key:"the divider is here!"})];return Pe.createElement(Pe.Fragment,null,Pe.createElement(fe.Ay,{title:"More",arrow:!0},Pe.createElement(le.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!Ne,role:"button",onClick:te,"data-testid":"menu-button",className:N.button,id:"long-menu"},Pe.createElement(p.A,null))),Pe.createElement(ie.Ay,{open:!!Ne,onClose:we,anchorEl:Ne,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu"},Pe.createElement(oe.A,{autoFocusItem:!!Ne},It,Pe.createElement(_e,{unregisterEntityOptions:Ge,isUnregisterAllowed:Ue,onUnregisterEntity:De,onClose:we}),Pe.createElement(Y.A,{onClick:()=>{we(),Ae()}},Pe.createElement(ye.A,null,Pe.createElement(R.A,{fontSize:"small"})),Pe.createElement(ce.A,{primary:"Inspect entity"})),Pe.createElement(Y.A,{onClick:()=>{we(),bt(window.location.toString())}},Pe.createElement(ye.A,null,Pe.createElement(w.A,{fontSize:"small"})),Pe.createElement(ce.A,{primary:"Copy entity URL"})))))}const H="plugin.catalog.entityLayoutRoute",G=()=>null;(0,B.h3)(G,H,!0),(0,B.h3)(G,"core.gatherMountPoints",!0);function Oe(pt){const{entity:nt,title:Ge}=pt;return Pe.createElement(ze.A,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},Pe.createElement(ze.A,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},nt?Pe.createElement(u.d5,{entityRef:nt,hideIcon:!0}):Ge),nt&&Pe.createElement(u.uR,{entity:nt}))}function ue(pt,nt,Ge,De){var Ae,Ne,ne,N,X;const Ue=(Ae=pt!=null?pt:De==null?void 0:De.kind)!=null?Ae:"",te=(Ne=nt!=null?nt:De==null?void 0:De.metadata.namespace)!=null?Ne:"";return{headerTitle:`${(X=(N=(ne=De==null?void 0:De.metadata.title)!=null?ne:Ge)!=null?N:De==null?void 0:De.metadata.name)!=null?X:""}${te&&te!==o.oQ?` in ${te}`:""}`,headerType:(()=>{let ht=Ue.toLocaleLowerCase("en-US");return De&&De.spec&&"type"in De.spec&&(ht+=" \u2014 ",ht+=De.spec.type.toLocaleLowerCase("en-US")),ht})()}}function it(pt){var nt,Ge;const{entity:De}=pt,Ae=(0,r.g)(De,o.vv);return Pe.createElement(Pe.Fragment,null,Ae.length>0&&Pe.createElement(l.ST,{label:"Owner",contentTypograpyRootComponent:"p",value:Pe.createElement(u.iI,{entityRefs:Ae,defaultKind:"Group",color:"inherit"})}),((nt=De.spec)==null?void 0:nt.lifecycle)&&Pe.createElement(l.ST,{label:"Lifecycle",value:(Ge=De.spec.lifecycle)==null?void 0:Ge.toString()}))}const ot=pt=>{var nt,Ge,De;const{UNSTABLE_extraContextMenuItems:Ae,UNSTABLE_contextMenuOptions:Ne,children:ne,NotFoundComponent:N}=pt,{kind:X,namespace:Ue,name:te}=(0,B.KS)(u.sF),{entity:we,loading:ht,error:Wt}=(0,r.a)(),bt=(0,C.zy)(),It=(0,B.OJ)(ne,at=>at.selectByComponentData({key:H,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:mt})=>{if(we){if(mt.if&&!mt.if(we))return[]}else return[];return[{path:mt.path,title:mt.title,children:mt.children,tabProps:mt.tabProps}]}),[we]),{headerTitle:O,headerType:S}=ue(X,Ue,te,we),[K,ae]=(0,Pe.useState)(!1),[We,qe]=(0,Pe.useState)(!1),gt=(0,C.Zp)(),_t=(0,B.Sf)(se.r),st=(0,B.Sf)(se.u),Zt=async()=>{ae(!1),qe(!1),gt(st?st():_t())};return(0,Pe.useEffect)(()=>{ae(!1),qe(!1)},[bt.pathname]),Pe.createElement(l.YW,{themeId:(De=(Ge=(nt=we==null?void 0:we.spec)==null?void 0:nt.type)==null?void 0:Ge.toString())!=null?De:"home"},Pe.createElement(l.Y9,{title:Pe.createElement(Oe,{title:O,entity:we}),pageTitleOverride:O,type:S},we&&Pe.createElement(Pe.Fragment,null,Pe.createElement(it,{entity:we}),Pe.createElement(g,{UNSTABLE_extraContextMenuItems:Ae,UNSTABLE_contextMenuOptions:Ne,onUnregisterEntity:()=>ae(!0),onInspectEntity:()=>qe(!0)}))),ht&&Pe.createElement(l.ke,null),we&&Pe.createElement(l.kE,{routes:It}),Wt&&Pe.createElement(l.UC,null,Pe.createElement(Le.A,{severity:"error"},Wt.toString())),!ht&&!Wt&&!we&&Pe.createElement(l.UC,null,N||Pe.createElement(l.Bp,{title:"Entity not found"},"There is no ",X," with the requested"," ",Pe.createElement(l.N_,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),Pe.createElement(u.Id,{open:K,entity:we,onConfirm:Zt,onClose:()=>ae(!1)}),Pe.createElement(u.qq,{open:We,entity:we,onClose:()=>qe(!1)}))};ot.Route=G},65294:(wn,wt,e)=>{"use strict";e.d(wt,{E:()=>p,a:()=>E,b:()=>_e,c:()=>se,d:()=>H,h:()=>f,i:()=>R});var o=e(92651),l=e(58054),A=e(74219),B=e(14041),u=e(18690),r=e(76891),Y=e(61477),ye=e(93453),ce=e(64947),a=e(77125),fe=e(48821),le=e(11638),ie=e(3399),oe=e(41241),ze=e(91638),Le=e(23180),Pe=e(29835),C=e(75757);function ee(ue){const{open:it,onClose:ot,onConfirm:pt,entity:nt}=ue,[Ge,De]=(0,B.useState)(!1),Ae=(0,fe.u)(o.vp),Ne=(0,fe.u)(fe.l),ne=async()=>{De(!0);try{const N=nt.metadata.uid;await Ae.removeEntityByUid(N),pt()}catch(N){(0,ie.tX)(N),Ne.post({message:N.message})}finally{De(!1)}};return B.createElement(r.A,{open:it,onClose:ot},B.createElement(Y.A,{id:"responsive-dialog-title"},"Are you sure you want to delete this entity?"),B.createElement(ye.A,null,B.createElement(ce.A,{variant:"contained",color:"secondary",disabled:Ge,onClick:ne},"Delete"),B.createElement(ce.A,{onClick:ot,color:"primary"},"Cancel")))}function R(ue){var it,ot;return((ot=(it=ue==null?void 0:ue.metadata)==null?void 0:it.annotations)==null?void 0:ot["backstage.io/orphan"])==="true"}function p(){const ue=(0,u.Zp)(),it=(0,le.Sf)(oe.r),[ot,pt]=(0,B.useState)(!1),{entity:nt}=(0,l.u)(),Ge=async()=>{pt(!1),ue(it())};return B.createElement(B.Fragment,null,B.createElement(A.A,{severity:"warning",onClick:()=>pt(!0)},"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."),B.createElement(ee,{open:ot,entity:nt,onConfirm:Ge,onClose:()=>pt(!1)}))}async function w(ue,it){var ot;const pt=(ot=ue.relations)==null?void 0:ot.map(Ge=>Ge.targetRef);if(!pt||(pt==null?void 0:pt.length)<1||pt.length>1e3)return[];const nt=await it.getEntitiesByRefs({entityRefs:pt,fields:["kind","metadata.name","metadata.namespace"]});return pt.filter((Ge,De)=>nt.items[De]===void 0)}async function f(ue,it){const ot=it.apis.get(o.vp);if(!ot)throw new Error(`No implementation available for ${o.vp}`);return(await w(ue,ot)).length>0}function E(){const{entity:ue}=(0,l.u)(),it=(0,fe.u)(o.vp),{loading:ot,error:pt,value:nt}=(0,ze.default)(async()=>w(ue,it),[ue,it]);return pt?B.createElement(a.A,{mb:1},B.createElement(Le._1,{error:pt})):ot||!nt||nt.length===0?null:B.createElement(B.Fragment,null,B.createElement(A.A,{severity:"warning"},"This entity has relations to other entities, which can't be found in the catalog. ",B.createElement("br",null),"Entities not found are: ",nt.join(", ")))}const F=ue=>ue.error&&ue.level==="error"&&ue.type===C.K3;async function re(ue,it){return{items:(await it.getEntityAncestors({entityRef:ue})).items.map(nt=>{var Ge,De;return{errors:((De=(Ge=nt.entity.status)==null?void 0:Ge.items)!=null?De:[]).filter(F).map(ne=>ne.error).filter(ne=>!!ne),entity:nt.entity}}).filter(nt=>nt.errors.length>0)}}async function se(ue,it){const ot=it.apis.get(o.vp);if(!ot)throw new Error(`No implementation available for ${o.vp}`);return(await re((0,Pe.U2)(ue),ot)).items.length>0}function _e(){const{entity:ue}=(0,l.u)(),it=(0,Pe.U2)(ue),ot=(0,fe.u)(o.vp),{loading:pt,error:nt,value:Ge}=(0,ze.default)(async()=>re(it,ot),[it,ot]);return nt?B.createElement(a.A,{mb:1},B.createElement(Le._1,{error:nt})):pt||!Ge?null:B.createElement(B.Fragment,null,Ge.items.map((De,Ae)=>B.createElement(a.A,{key:Ae,mb:1},(0,Pe.U2)(ue)!==(0,Pe.U2)(De.entity)&&B.createElement(a.A,{p:1},"The error below originates from"," ",B.createElement(o.zI,{entityRef:De.entity})),De.errors.map((Ne,ne)=>B.createElement(Le._1,{key:ne,error:Ne})))))}const Q="core.backstage.entitySwitch",g=ue=>null;(0,le.h3)(g,Q,!0);const H=ue=>{var it,ot;const{entity:pt,loading:nt}=(0,l.a)(),Ge=(0,fe.b)(),De=(0,le.OJ)(ue.children,Ne=>Ne.selectByComponentData({key:Q,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(ne=>{if(nt&&!pt)return[];const{if:N,children:X}=ne.props;return pt?[{if:N==null?void 0:N(pt,{apis:Ge}),children:X}]:[{if:N===void 0,children:X}]}),[Ge,pt,nt]);if(De.some(Ne=>typeof Ne.if=="object"&&"then"in Ne.if))return B.createElement(G,{results:De,renderMultipleMatches:ue.renderMultipleMatches});if(ue.renderMultipleMatches==="all"){const Ne=De.filter(ne=>ne.if).map(ne=>ne.children);return Ne.length===0?Oe(De):B.createElement(B.Fragment,null,Ne)}return(ot=(it=De.find(Ne=>Ne.if))==null?void 0:it.children)!=null?ot:Oe(De)};function G({results:ue,renderMultipleMatches:it}){const{loading:ot,value:pt}=(0,ze.default)(async()=>{var nt;const Ge=ue.map(async({if:De,children:Ae})=>{try{if(await De)return Ae}catch{}return null});if(it==="all"){const De=(await Promise.all(Ge)).filter(Boolean);return De.length===0?Oe(ue):B.createElement(B.Fragment,null,De)}return(nt=(await Promise.all(Ge)).find(Boolean))!=null?nt:Oe(ue)},[ue]);return ot||!pt?null:pt}function Oe(ue){var it,ot;return(ot=(it=ue.filter(pt=>pt.if===void 0)[0])==null?void 0:it.children)!=null?ot:null}H.Case=g},41241:(wn,wt,e)=>{"use strict";e.d(wt,{D:()=>te,a:()=>Ne,b:()=>Wt,c:()=>we,r:()=>It,u:()=>bt,v:()=>ht});var o=e(29835);function l(O){const{years:S=0,months:K=0,weeks:ae=0,days:We=0,hours:qe=0,minutes:gt=0,seconds:_t=0,milliseconds:st=0}=O;return((((S*365+K*30+ae*7+We)*24+qe)*60+gt)*60+_t)*1e3+st}var A=e(25033),B=e.n(A),u=e(25295),r=e.n(u),Y=e(96403),ye=e.n(Y),ce=e(92651),a=e(14451),fe=e(94389),le=e(17400),ie=e(71865),oe=e(52755),ze=e(89350),Le=e(33602),Pe=e(48108),C=e(55700),ee=e(45250),R=e(11638);const p={seconds:10},w={milliseconds:50},f={api:le.A,component:ze.A,system:fe.A,resource:C.A,domain:a.A,location:oe.A,user:Pe.A,group:Le.A,template:ie.A};function E(O){return{async:O.async,render:({entityRef:S,entity:K,context:ae})=>({snapshot:(0,ce.Tj)(K||S,ae),loadEntity:O.async})}}var F=(O,S,K)=>{if(!S.has(O))throw TypeError("Cannot "+K)},re=(O,S,K)=>(F(O,S,"read from private field"),K?K.call(O):S.get(O)),se=(O,S,K)=>{if(S.has(O))throw TypeError("Cannot add the same private member more than once");S instanceof WeakSet?S.add(O):S.set(O,K)},_e=(O,S,K,ae)=>(F(O,S,"write to private field"),ae?ae.call(O,K):S.set(O,K),K),Q=(O,S,K)=>(F(O,S,"access private method"),K),g,H,G,Oe,ue,it,ot,pt,nt,Ge,De;const Ae=class qo{constructor(S){se(this,it),se(this,pt),se(this,Ge),se(this,g,void 0),se(this,H,void 0),se(this,G,void 0),se(this,Oe,void 0),se(this,ue,void 0);var K,ae,We,qe;const gt=(K=S.cacheTtl)!=null?K:p,_t=(ae=S.batchDelay)!=null?ae:w,st=(We=S.renderer)!=null?We:E({async:!0}),Zt={};if(Object.entries(f).forEach(([at,mt])=>{Zt[at.toLocaleLowerCase("en-US")]=mt}),Object.entries((qe=S.kindIcons)!=null?qe:{}).forEach(([at,mt])=>{Zt[at.toLocaleLowerCase("en-US")]=mt}),st.async){if(!S.catalogApi)throw new TypeError("Asynchronous rendering requires a catalog API");_e(this,G,Q(this,pt,nt).call(this,{cacheTtl:gt,batchDelay:_t,renderer:st,catalogApi:S.catalogApi}))}_e(this,H,l(gt)),_e(this,g,new Map),_e(this,Oe,Zt),_e(this,ue,st)}static createLocal(){return new qo({renderer:E({async:!1})})}static create(S){return new qo(S)}forEntity(S,K){const{entityRef:ae,kind:We,entity:qe,needsLoad:gt}=Q(this,it,ot).call(this,S),_t=at=>{const{snapshot:mt}=re(this,ue).render({entityRef:ae,loading:at.loading,entity:at.entity,context:K||{}});return{...mt,entityRef:ae,Icon:Q(this,Ge,De).call(this,mt.Icon,We)}};let st;try{st=_t({loading:gt,entity:qe})}catch{st={primaryTitle:ae,entityRef:ae}}const Zt=gt?new(ye())(at=>{let mt=!1;return Promise.resolve().then(()=>{var Qe;return(Qe=re(this,G))==null?void 0:Qe.load(ae)}).then(Qe=>{if(!mt&&Qe&&Qe.metadata.etag!==(qe==null?void 0:qe.metadata.etag)){const Lt=_t({loading:!1,entity:Qe});at.next(Lt)}}).catch(()=>{}).finally(()=>{mt||at.complete()}),()=>{mt=!0}}):void 0;return{snapshot:st,update$:Zt}}};g=new WeakMap,H=new WeakMap,G=new WeakMap,Oe=new WeakMap,ue=new WeakMap,it=new WeakSet,ot=function(O){if(typeof O!="string")return{entity:O,kind:O.kind,entityRef:(0,o.U2)(O),needsLoad:!1};const S=re(this,g).get(O),K=S==null?void 0:S.entity,We=(!S||Date.now()-S.updatedAt>re(this,H))&&re(this,ue).async!==!1&&re(this,G)!==void 0;return{entity:K,kind:(0,o.KU)(O).kind,entityRef:O,needsLoad:We}},pt=new WeakSet,nt=function(O){const S=l(O.cacheTtl),K=l(O.batchDelay);return new(B())(async ae=>{const{items:We}=await O.catalogApi.getEntitiesByRefs({entityRefs:ae}),qe=Date.now();return ae.forEach((gt,_t)=>{re(this,g).set(gt,{updatedAt:qe,entity:We[_t]})}),We},{name:"DefaultEntityPresentationApi",cacheMap:new(r())(S),maxBatchSize:100,batchScheduleFn:K?ae=>setTimeout(ae,K):void 0})},Ge=new WeakSet,De=function(O,S){return O||(O===!1?!1:re(this,Oe)[S.toLocaleLowerCase("en-US")])};let Ne=Ae;async function ne({storageApi:O}){var S;const K=O.forBucket("settings"),ae=O.forBucket("starredEntities"),We=K.snapshot("starredEntities").value;if(!(0,ee.isArray)(We))return;const qe=new Set((S=ae.snapshot("entityRefs").value)!=null?S:[]);We.filter(ee.isString).map(gt=>gt.split(":")).filter(gt=>gt.length===4&&gt[0]==="entity").map(([gt,_t,st,Zt])=>(0,o.U2)({kind:_t,namespace:st,name:Zt})).forEach(gt=>qe.add(gt)),await ae.set("entityRefs",Array.from(qe)),await K.remove("starredEntities")}var N=Object.defineProperty,X=(O,S,K)=>S in O?N(O,S,{enumerable:!0,configurable:!0,writable:!0,value:K}):O[S]=K,Ue=(O,S,K)=>(X(O,typeof S!="symbol"?S+"":S,K),K);class te{constructor(S){Ue(this,"settingsStore"),Ue(this,"starredEntities"),Ue(this,"subscribers",new Set),Ue(this,"observable",new(ye())(ae=>(ae.next(new Set(this.starredEntities)),this.subscribers.add(ae),()=>{this.subscribers.delete(ae)})));var K;ne(S).then(),this.settingsStore=S.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((K=this.settingsStore.snapshot("entityRefs").value)!=null?K:[]),this.settingsStore.observe$("entityRefs").subscribe({next:ae=>{var We;this.starredEntities=new Set((We=ae.value)!=null?We:[]),this.notifyChanges()}})}async toggleStarred(S){this.starredEntities.has(S)?this.starredEntities.delete(S):this.starredEntities.add(S),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const S of this.subscribers)S.next(new Set(this.starredEntities))}}const we=(0,R.Il)({id:"create-component",optional:!0}),ht=(0,R.Il)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),Wt=(0,R.Il)({id:"create-from-template",optional:!0,params:["namespace","templateName"]}),bt=(0,R.Il)({id:"catalog:unregister-redirect",optional:!0}),It=(0,R.HM)({id:"catalog"})},22073:(wn,wt,e)=>{"use strict";e.d(wt,{E:()=>Ne,JF:()=>N,N8:()=>ot,Sz:()=>nt,TZ:()=>it,VF:()=>E,Wm:()=>F,XQ:()=>Oe,Z9:()=>G,bb:()=>Ae,sU:()=>Ue,yE:()=>Ge,yP:()=>De,yW:()=>ue});var o=e(41241),l=e(14041),A=e(58837),B=e(99703),u=e(92651),r=e(65398),Y=e.n(r),ye=e(11638),ce=e(48821),a=e(75757),fe=e(92805),le=e(25033),ie=e.n(le),oe=e(96403),ze=e.n(oe),Le=e(45250),Pe=e.n(Le);function C(){const te=useApi(catalogApiRef),{error:we,loading:ht,value:Wt}=useAsync(async()=>await te.getEntityFacets({facets:["kind"]}).then(It=>{var O;return((O=It.facets.kind)==null?void 0:O.map(S=>S.value).sort())||[]}),[te]);return{loading:ht,error:we,allKinds:Wt!=null?Wt:[]}}function ee(te,we,ht){let Wt=te;return we&&(Wt=Wt.filter(It=>we.some(O=>O.toLocaleLowerCase("en-US")===It.toLocaleLowerCase("en-US")))),ht&&!te.some(It=>It.toLocaleLowerCase("en-US")===ht.toLocaleLowerCase("en-US"))&&(Wt=Wt.concat([ht])),Wt.sort().reduce((It,O)=>(It[O.toLocaleLowerCase("en-US")]=O,It),{})}const R=(0,A.A)(te=>(0,B.A)({root:{...te.typography.h4}}));function p(te){var we,ht;const{initialFilter:Wt="component",allowedKinds:bt}=te,It=R(),{allKinds:O}=C(),{filters:S,updateFilters:K,queryParameters:{kind:ae}}=useEntityList(),We=useMemo(()=>[ae].flat()[0],[ae]),[qe,gt]=useState((ht=We!=null?We:(we=S.kind)==null?void 0:we.value)!=null?ht:Wt);useEffect(()=>{We&&gt(We)},[We]),useEffect(()=>{var st,Zt;(st=S.kind)!=null&&st.value&&gt((Zt=S.kind)==null?void 0:Zt.value)},[S.kind]),useEffect(()=>{K({kind:qe?new EntityKindFilter(qe):void 0})},[qe,K]);const _t=ee(O,bt,qe);return React.createElement(Select,{input:React.createElement(InputBase,null),value:qe.toLocaleLowerCase("en-US"),onChange:st=>gt(st.target.value),classes:It},Object.keys(_t).map(st=>React.createElement(MenuItem,{value:st,key:st},`${pluralize(_t[st])}`)))}function w(te,we){return!!(te&&typeof te=="string"&&(te==null?void 0:te.toLocaleLowerCase("en-US"))===(we==null?void 0:we.toLocaleLowerCase("en-US")))}function f(te,we){return typeof we=="string"?w(te,we):we.length===0||we.some(ht=>w(te,ht))}function E(te){return se({kind:te})}function F(te){return se({kind:"component",type:te})}function re(te){return se({kind:"resource",type:te})}function se(te){return we=>{var ht;return!(te.kind&&!f(we.kind,te.kind)||te.type&&!f((ht=we.spec)==null?void 0:ht.type,te.type))}}function _e(te){return we=>{var ht;return f((ht=we.metadata)==null?void 0:ht.namespace,te)}}const Q=null,g=u.GI.Filters,H=u.GI.Content,G=(0,ye.i1)({id:"catalog",apis:[(0,ye.bW)({api:u.vp,deps:{discoveryApi:ce.q,fetchApi:ce.s},factory:({discoveryApi:te,fetchApi:we})=>new a.dJ({discoveryApi:te,fetchApi:we})}),(0,ye.bW)({api:u.ah,deps:{storageApi:ce.y},factory:({storageApi:te})=>new o.D({storageApi:te})}),(0,ye.bW)({api:u.nQ,deps:{catalogApi:u.vp},factory:({catalogApi:te})=>o.a.create({catalogApi:te})})],routes:{catalogIndex:o.r,catalogEntity:u.sF},externalRoutes:{createComponent:o.c,viewTechDoc:o.v,createFromTemplate:o.b,unregisterRedirect:o.u}}),Oe=G.provide((0,ye.QJ)({name:"CatalogIndexPage",component:()=>e.e(9521).then(e.bind(e,99521)).then(te=>te.CatalogPage),mountPoint:o.r})),ue=G.provide((0,ye.QJ)({name:"CatalogEntityPage",component:()=>e.e(7455).then(e.bind(e,7455)).then(te=>te.CatalogEntityPage),mountPoint:u.sF})),it=G.provide((0,ye.NC)({name:"EntityAboutCard",component:{lazy:()=>e.e(6552).then(e.bind(e,66552)).then(te=>te.AboutCard)}})),ot=G.provide((0,ye.NC)({name:"EntityLinksCard",component:{lazy:()=>e.e(5160).then(e.bind(e,85160)).then(te=>te.EntityLinksCard)}})),pt=G.provide((0,ye.NC)({name:"EntityLabelsCard",component:{lazy:()=>e.e(2977).then(e.bind(e,12977)).then(te=>te.EntityLabelsCard)}})),nt=G.provide((0,ye.NC)({name:"EntityHasSystemsCard",component:{lazy:()=>e.e(3222).then(e.bind(e,841)).then(te=>te.HasSystemsCard)}})),Ge=G.provide((0,ye.NC)({name:"EntityHasComponentsCard",component:{lazy:()=>e.e(8881).then(e.bind(e,48881)).then(te=>te.HasComponentsCard)}})),De=G.provide((0,ye.NC)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>e.e(6558).then(e.bind(e,46558)).then(te=>te.HasSubcomponentsCard)}})),Ae=G.provide((0,ye.NC)({name:"EntityHasResourcesCard",component:{lazy:()=>e.e(3662).then(e.bind(e,43662)).then(te=>te.HasResourcesCard)}})),Ne=G.provide((0,ye.NC)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>e.e(6912).then(e.bind(e,26912)).then(te=>te.DependsOnComponentsCard)}})),ne=G.provide((0,ye.NC)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>e.e(5339).then(e.bind(e,65339)).then(te=>te.DependencyOfComponentsCard)}})),N=G.provide((0,ye.NC)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>e.e(3223).then(e.bind(e,93223)).then(te=>te.DependsOnResourcesCard)}})),X=G.provide((0,ye.NC)({name:"RelatedEntitiesCard",component:{lazy:()=>e.e(9260).then(e.bind(e,79260)).then(te=>te.RelatedEntitiesCard)}})),Ue=G.provide((0,fe.c)({name:"CatalogSearchResultListItem",component:()=>e.e(8326).then(e.bind(e,68326)).then(te=>te.CatalogSearchResultListItem),predicate:te=>te.type==="software-catalog"}))},79367:(wn,wt,e)=>{"use strict";e.d(wt,{MM:()=>m,P4:()=>de,XT:()=>at,Zg:()=>D,ee:()=>Nn});var o=e(48821),l=e(11638),A=e(63188),B=e(49863),u=e(33478),r=e(14041),Y=e(58054),ye=e(92651),ce=e(73657),a=e(18690),fe=e(58837),le=e(8973),ie=e(29655),oe=e(72501),ze=e(78467),Le=e(71677),Pe=e(43669),C=e(4313),ee=e(18171),R=e(9719),p=e(54801),w=e(5951),f=e(91567),E=e(10985),F=e(61009),re=e(77125),se=e(88951),_e=e(4321),Q=e(13677),g=e(99703),H=e(42899),G=e(67720),Oe=e(91413),ue=e(29365),it=e(60083),ot=e(16249),pt=e(64947),nt=e(81215),Ge=e(26343),De=e(6924),Ae=e(21718),Ne=e(52950),ne=e(23180),N=e(91638),X=e(4832),Ue=e(29835),te=e(52536),we=e.n(te),ht=e(42226),Wt=e(64118),bt=e(77714),It=e(38282),O=e(74219);const S=(0,o.c)({id:"plugin.githubactions.service"});var K=Object.defineProperty,ae=(x,$,q)=>$ in x?K(x,$,{enumerable:!0,configurable:!0,writable:!0,value:q}):x[$]=q,We=(x,$,q)=>(ae(x,typeof $!="symbol"?$+"":$,q),q);class qe{constructor($){We(this,"configApi"),We(this,"scmAuthApi"),this.configApi=$.configApi,this.scmAuthApi=$.scmAuthApi}async getOctokit($="github.com"){var q;const{token:xe}=await this.scmAuthApi.getCredentials({url:`https://${$}/`,additionalScope:{customScopes:{github:["repo"]}}}),vt=(0,A.bm)((q=this.configApi.getOptionalConfigArray("integrations.github"))!=null?q:[]).find(V=>V.host===$),kt=vt==null?void 0:vt.apiBaseUrl;return new B.E({auth:xe,baseUrl:kt})}async reRunWorkflow($){const{hostname:q,owner:xe,repo:ke,runId:vt}=$;return(await this.getOctokit(q)).actions.reRunWorkflow({owner:xe,repo:ke,run_id:vt})}async listWorkflowRuns($){const{hostname:q,owner:xe,repo:ke,pageSize:vt=100,page:kt=0,branch:V}=$;return(await(await this.getOctokit(q)).actions.listWorkflowRunsForRepo({owner:xe,repo:ke,per_page:vt,page:kt,...V?{branch:V}:{}})).data}async getWorkflow($){const{hostname:q,owner:xe,repo:ke,id:vt}=$;return(await(await this.getOctokit(q)).actions.getWorkflow({owner:xe,repo:ke,workflow_id:vt})).data}async getWorkflowRun($){const{hostname:q,owner:xe,repo:ke,id:vt}=$;return(await(await this.getOctokit(q)).actions.getWorkflowRun({owner:xe,repo:ke,run_id:vt})).data}async listJobsForWorkflowRun($){const{hostname:q,owner:xe,repo:ke,id:vt,pageSize:kt=100,page:V=0}=$;return(await(await this.getOctokit(q)).actions.listJobsForWorkflowRun({owner:xe,repo:ke,run_id:vt,per_page:kt,page:V})).data}async downloadJobLogsForWorkflowRun($){const{hostname:q,owner:xe,repo:ke,runId:vt}=$;return(await(await this.getOctokit(q)).actions.downloadJobLogsForWorkflowRun({owner:xe,repo:ke,job_id:vt})).data}async listBranches($){const{hostname:q,owner:xe,repo:ke,page:vt=0}=$;return(await(await this.getOctokit(q)).rest.repos.listBranches({owner:xe,repo:ke,per_page:100,page:vt})).data}async getDefaultBranch($){const{hostname:q,owner:xe,repo:ke}=$;return(await(await this.getOctokit(q)).rest.repos.get({owner:xe,repo:ke})).data.default_branch}}var gt=(x=>(x[x.success=0]="success",x[x.failure=1]="failure",x[x.pending=2]="pending",x[x.running=3]="running",x))(gt||{});const _t=(0,l.HM)({id:"github-actions"}),st=(0,l.Vb)({id:"github-actions/build",path:"/:id",parent:_t}),Zt=(0,l.i1)({id:"github-actions",apis:[(0,l.bW)({api:S,deps:{configApi:o.p,scmAuthApi:u.$J},factory:({configApi:x,scmAuthApi:$})=>new qe({configApi:x,scmAuthApi:$})})],routes:{entityContent:_t}}),at=Zt.provide((0,l.QJ)({name:"EntityGithubActionsContent",component:()=>Promise.resolve().then(function(){return Jn}).then(x=>x.Router),mountPoint:_t})),mt=Zt.provide((0,l.NC)({name:"EntityLatestGithubActionRunCard",component:{lazy:()=>e.e(1729).then(e.bind(e,14110)).then(x=>x.LatestWorkflowRunCard)}})),Qe=Zt.provide((0,l.NC)({name:"EntityLatestGithubActionsForBranchCard",component:{lazy:()=>e.e(1729).then(e.bind(e,14110)).then(x=>x.LatestWorkflowsForBranchCard)}})),Lt=Zt.provide((0,l.NC)({name:"EntityRecentGithubActionsRunsCard",component:{lazy:()=>e.e(1729).then(e.bind(e,14110)).then(x=>x.RecentWorkflowRunsCard)}})),St="github.com/project-slug",en=x=>{var $,q;return(q=($=x==null?void 0:x.metadata.annotations)==null?void 0:$[St])!=null?q:""},xt=x=>r.createElement(r.Fragment,null,r.createElement(pe,{...x}),Fe(x));function pe({status:x,conclusion:$}){if(x===void 0)return null;switch(x.toLocaleLowerCase("en-US")){case"queued":return r.createElement(ne.Ek,null);case"in_progress":return r.createElement(ne.W$,null);case"completed":switch($==null?void 0:$.toLocaleLowerCase("en-US")){case"skipped":return r.createElement(ne.c_,null);case"timed_out":return r.createElement(ne.EV,null);case"failure":return r.createElement(ne.Xs,null);default:return r.createElement(ne.So,null)}default:return r.createElement(ne.Ek,null)}}function Fe({status:x,conclusion:$}){if(x===void 0)return"";switch(x.toLocaleLowerCase("en-US")){case"queued":return"Queued";case"in_progress":return"In progress";case"completed":switch($==null?void 0:$.toLocaleLowerCase("en-US")){case"skipped":return"Aborted";case"timed_out":return"Timed out";case"failure":return"Error";default:return"Completed"}default:return"Pending"}}const Mt=({hostname:x,owner:$,repo:q})=>{const xe=(0,o.u)(S),{id:ke}=(0,l.KS)(st);return(0,N.default)(async()=>{if(!q||!$)throw new Error("No repo/owner provided");const vt=await xe.listJobsForWorkflowRun({hostname:x,owner:$,repo:q,id:parseInt(ke,10)});return{total_count:vt.total_count,jobs:vt.jobs.map(kt=>{var V,ve,$e,Ke;return{html_url:(V=kt.html_url)!=null?V:void 0,status:kt.status,conclusion:(ve=kt.conclusion)!=null?ve:void 0,started_at:kt.started_at,completed_at:($e=kt.completed_at)!=null?$e:void 0,id:kt.id,name:kt.name,steps:(Ke=kt.steps)==null?void 0:Ke.map(Je=>{var Ut,Rt,Nt;return{name:Je.name,status:Je.status,conclusion:(Ut=Je.conclusion)!=null?Ut:void 0,number:Je.number,started_at:(Rt=Je.started_at)!=null?Rt:void 0,completed_at:(Nt=Je.completed_at)!=null?Nt:void 0}})}})}},[q,$,ke])},Xt=({hostname:x,owner:$,repo:q})=>{const xe=(0,o.u)(S),{id:ke}=(0,l.KS)(st);return(0,N.default)(async()=>q&&$?xe.getWorkflowRun({hostname:x,owner:$,repo:q,id:parseInt(ke,10)}):Promise.reject(new Error("No repo/owner provided")),[q,$,ke])},Bt=({hostname:x,owner:$,repo:q,id:xe})=>{const ke=(0,o.u)(S);return(0,N.default)(async()=>q&&$?ke.downloadJobLogsForWorkflowRun({hostname:x,owner:$,repo:q,runId:xe}):Promise.reject("No repo/owner provided"),[q,$,xe])},jt=x=>{var $,q,xe;const ke=(xe=($=x==null?void 0:x.metadata.annotations)==null?void 0:$[Ue.I4])!=null?xe:(q=x==null?void 0:x.metadata.annotations)==null?void 0:q[Ue.Eo];return ke!=null&&ke.startsWith("url:")?we()(ke.slice(4)).resource:void 0},Ln=(0,fe.A)(x=>({button:{order:-1,marginRight:0,marginLeft:"-20px"},modal:{display:"flex",alignItems:"center",width:"85%",height:"85%",justifyContent:"center",margin:"auto"},normalLogContainer:{height:"75vh",width:"100%"},modalLogContainer:{height:"100%",width:"100%"},log:{background:x.palette.background.default}})),pn=({entity:x,runId:$,inProgress:q})=>{const xe=Ln(),ke=en(x),vt=jt(x),[kt,V]=ke&&ke.split("/")||[],ve=Bt({hostname:vt,owner:kt,repo:V,id:$}),$e=ve.value?String(ve.value):void 0,[Ke,Je]=r.useState(!1),Ut=()=>{Je(!0)},Rt=()=>{Je(!1)};return r.createElement(le.A,{TransitionProps:{unmountOnExit:!0},disabled:q},r.createElement(ie.A,{expandIcon:r.createElement(De.A,null),IconButtonProps:{className:xe.button}},r.createElement(oe.A,{variant:"button"},ve.loading?r.createElement(ze.A,null):"Job Log"),r.createElement(Le.Ay,{title:"Open Log",TransitionComponent:Pe.A,arrow:!0},r.createElement(X.A,{onClick:Nt=>{Nt.stopPropagation(),Ut()},style:{marginLeft:"auto"}})),r.createElement(C.A,{className:xe.modal,onClick:Nt=>Nt.stopPropagation(),open:Ke,onClose:Rt},r.createElement(ee.A,{in:Ke},r.createElement("div",{className:xe.modalLogContainer},r.createElement(ne.rW,{text:$e!=null?$e:"No Values Found",classes:{root:xe.log}}))))),$e&&r.createElement("div",{className:xe.normalLogContainer},r.createElement(ne.rW,{text:$e,classes:{root:xe.log}})))},cn=(0,fe.A)(x=>({root:{maxWidth:720,margin:x.spacing(2)},title:{padding:x.spacing(1,0,2,0)},table:{padding:x.spacing(1)},accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),En=(x,$)=>{if(!x||!$)return"";const q=Ne.c9.fromISO(x);return($?Ne.c9.fromISO($):Ne.c9.now()).diff(q).toFormat("m 'minutes' s 'seconds'")},lt=({step:x})=>{var $;return r.createElement(R.A,null,r.createElement(p.A,null,r.createElement(w.A,{primary:x.name,secondary:En(x.started_at,x.completed_at)})),r.createElement(p.A,null,r.createElement(xt,{status:x.status.toLocaleUpperCase("en-US"),conclusion:($=x.conclusion)==null?void 0:$.toLocaleUpperCase("en-US")})))},Ot=({job:x,className:$,entity:q})=>{var xe;const ke=cn();return r.createElement(le.A,{TransitionProps:{unmountOnExit:!0},className:$},r.createElement(ie.A,{expandIcon:r.createElement(De.A,null),IconButtonProps:{className:ke.button}},r.createElement(oe.A,{variant:"button"},x.name," (",En(x.started_at,x.completed_at),")")),r.createElement(f.A,{className:ke.accordionDetails},r.createElement(E.A,null,r.createElement(F.A,null,(xe=x.steps)==null?void 0:xe.map(vt=>r.createElement(lt,{key:vt.number,step:vt}))))),x.status==="queued"||x.status==="in_progress"?r.createElement(pn,{runId:x.id,inProgress:!0,entity:q}):r.createElement(pn,{runId:x.id,inProgress:!1,entity:q}))},Vt=({jobs:x,entity:$})=>{const q=cn();return r.createElement(re.A,null,x&&x.total_count>0&&x.jobs.map(xe=>r.createElement(Ot,{key:xe.id,job:xe,className:xe.status!=="success"?q.failed:q.success,entity:$})))},Dt=({entity:x})=>{var $,q,xe,ke,vt,kt,V,ve,$e,Ke,Je,Ut,Rt,Nt,_n;const An=en(x),mn=jt(x),[ln,M]=An&&An.split("/")||[],J=Xt({hostname:mn,owner:ln,repo:M}),be=Mt({hostname:mn,owner:ln,repo:M}),Re=cn();return J.error&&J.error.message?r.createElement(oe.A,{variant:"h6",color:"error"},"Failed to load build, ",J.error.message):J.loading?r.createElement(se.A,null):r.createElement("div",{className:Re.root},r.createElement(re.A,{mb:3},r.createElement(ne.BI,{"aria-label":"breadcrumb"},r.createElement(ne.N_,{to:".."},"Workflow runs"),r.createElement(oe.A,null,"Workflow run details"))),r.createElement(E.A,{component:_e.A,className:Re.table},r.createElement(F.A,null,r.createElement(Q.A,null,r.createElement(R.A,null,r.createElement(p.A,null,r.createElement(oe.A,{noWrap:!0},"Branch")),r.createElement(p.A,null,($=J.value)==null?void 0:$.head_branch)),r.createElement(R.A,null,r.createElement(p.A,null,r.createElement(oe.A,{noWrap:!0},"Message")),r.createElement(p.A,null,(xe=(q=J.value)==null?void 0:q.head_commit)==null?void 0:xe.message)),r.createElement(R.A,null,r.createElement(p.A,null,r.createElement(oe.A,{noWrap:!0},"Commit ID")),r.createElement(p.A,null,(vt=(ke=J.value)==null?void 0:ke.head_commit)==null?void 0:vt.id)),r.createElement(R.A,null,r.createElement(p.A,null,r.createElement(oe.A,{noWrap:!0},"Workflow")),r.createElement(p.A,null,(kt=J.value)==null?void 0:kt.name)),r.createElement(R.A,null,r.createElement(p.A,null,r.createElement(oe.A,{noWrap:!0},"Status")),r.createElement(p.A,null,r.createElement(xt,{status:((V=J.value)==null?void 0:V.status)||void 0,conclusion:((ve=J.value)==null?void 0:ve.conclusion)||void 0}))),r.createElement(R.A,null,r.createElement(p.A,null,r.createElement(oe.A,{noWrap:!0},"Author")),r.createElement(p.A,null,`${(Je=(Ke=($e=J.value)==null?void 0:$e.head_commit)==null?void 0:Ke.author)==null?void 0:Je.name} (${(Nt=(Rt=(Ut=J.value)==null?void 0:Ut.head_commit)==null?void 0:Rt.author)==null?void 0:Nt.email})`)),r.createElement(R.A,null,r.createElement(p.A,null,r.createElement(oe.A,{noWrap:!0},"Links")),r.createElement(p.A,null,((_n=J.value)==null?void 0:_n.html_url)&&r.createElement(ne.N_,{to:J.value.html_url},"Workflow runs on GitHub"," ",r.createElement(Ae.A,{className:Re.externalLinkIcon})))),r.createElement(R.A,null,r.createElement(p.A,{colSpan:2},r.createElement(oe.A,{noWrap:!0},"Jobs"),be.loading?r.createElement(ze.A,null):r.createElement(Vt,{jobs:be.value,entity:x})))))))};function ct({hostname:x,owner:$,repo:q,branch:xe,initialPageSize:ke=6}){const vt=(0,o.u)(S),kt=(0,o.u)(o.r),[V,ve]=(0,r.useState)(0),[$e,Ke]=(0,r.useState)(0),[Je,Ut]=(0,r.useState)(ke),[Rt,Nt]=(0,r.useState)([]),[_n,An]=(0,r.useState)(""),{loading:mn,value:ln,retry:M,error:J}=(0,It.A)(async()=>{const be=await vt.getDefaultBranch({hostname:x,owner:$,repo:q});An(be);let Re=xe;xe==="default"&&(Re=be);const Tt=await(async()=>{let Jt=!0,hn=0;const Dn=[];for(;Jt;){const he=await vt.listBranches({hostname:x,owner:$,repo:q,page:hn});he.length===0&&(Jt=!1),hn++,Dn.push(...he)}return Dn})();Nt(Tt);const Kt=await vt.listWorkflowRuns({hostname:x,owner:$,repo:q,pageSize:Je,page:$e+1,branch:Re});return ve(Kt.total_count),Kt.workflow_runs.map(Jt=>{var hn,Dn,he,Ve,Be,At,Pt,tn,Ct;return{workflowName:(hn=Jt.name)!=null?hn:void 0,message:(Dn=Jt.head_commit)==null?void 0:Dn.message,id:`${Jt.id}`,onReRunClick:async()=>{try{await vt.reRunWorkflow({hostname:x,owner:$,repo:q,runId:Jt.id})}catch(Ft){kt.post(new Error(`Failed to rerun the workflow: ${Ft.message}`))}},source:{branchName:(he=Jt.head_branch)!=null?he:void 0,commit:{hash:(Ve=Jt.head_commit)==null?void 0:Ve.id,url:(Pt=(Be=Jt.head_repository)==null?void 0:Be.branches_url)==null?void 0:Pt.replace("{/branch}",(At=Jt.head_branch)!=null?At:"")}},status:(tn=Jt.status)!=null?tn:void 0,conclusion:(Ct=Jt.conclusion)!=null?Ct:void 0,url:Jt.url,githubUrl:Jt.html_url}})},[$e,Je,q,$]);return[{page:$e,pageSize:Je,loading:mn,runs:ln,branches:Rt,defaultBranch:_n,projectName:`${$}/${q}`,total:V,error:J},{runs:ln,setPage:Ke,setPageSize:Ut,retry:M}]}const je=(0,fe.A)(x=>(0,g.A)({card:{border:`1px solid ${x.palette.divider}`,boxShadow:x.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:x.spacing(4,1,1),flex:"1",minWidth:"0px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"middle"},bottomline:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"-5px"},pagination:{width:"100%"}})),Yt={skipped:"warning",canceled:"info",timed_out:"error",failure:"error",success:"success"},Gt=(x,$)=>{var q,xe,ke,vt;const kt=$.toLocaleLowerCase();return((q=x.workflowName)==null?void 0:q.toLocaleLowerCase().includes(kt))||((xe=x.source.branchName)==null?void 0:xe.toLocaleLowerCase().includes(kt))||((ke=x.status)==null?void 0:ke.toLocaleLowerCase().includes(kt))||((vt=x.id)==null?void 0:vt.toLocaleLowerCase().includes(kt))},sn=({runs:x,searchTerm:$,loading:q,onChangePageSize:xe,onChangePage:ke,page:vt,total:kt,pageSize:V})=>{const ve=je(),$e=(0,l.Sf)(st),Ke=x==null?void 0:x.filter(Je=>Gt(Je,$));return r.createElement(H.A,{container:!0,spacing:3},Ke&&(x==null?void 0:x.length)!==0?Ke.map(Je=>{var Ut,Rt;return r.createElement(H.A,{key:Je.id,item:!0,container:!0,xs:12,sm:4,md:4,xl:4},r.createElement(re.A,{className:ve.card},r.createElement(re.A,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},r.createElement(re.A,{pt:2,sx:{width:"100%"},textAlign:"center"},r.createElement(Le.Ay,{title:(Ut=Je.status)!=null?Ut:"No Status",placement:"top-start"},r.createElement(O.A,{variant:"outlined",severity:Yt[Je.conclusion],style:{alignItems:"center"}},r.createElement(oe.A,{variant:"h6"},r.createElement(ne.N_,{to:$e({id:Je.id})},r.createElement(oe.A,{color:"primary",variant:"h6"},Je.workflowName))))),r.createElement(Le.Ay,{title:(Rt=Je.message)!=null?Rt:"No run message"},r.createElement(oe.A,{variant:"body2",component:"span",style:{fontSize:"smaller"}},r.createElement(ne.h2,{content:`Commit ID : ${Je.source.commit.hash}`}))),Je.source.branchName&&r.createElement(ne.h2,{content:`Branch : ${Je.source.branchName}`}),r.createElement(G.A,{key:Je.id,size:"small",label:`Workflow ID : ${Je.id}`}),r.createElement(G.A,{size:"small",label:r.createElement(re.A,{display:"flex",alignItems:"center"},r.createElement(xt,{status:Je.status,conclusion:Je.conclusion}))}),r.createElement("div",{className:ve.bottomline},Je.githubUrl&&r.createElement(ne.N_,{to:Je.githubUrl},"Workflow runs on GitHub"," ",r.createElement(Ae.A,{className:ve.externalLinkIcon})),r.createElement(Oe.A,null,r.createElement(Le.Ay,{title:"Rerun workflow"},r.createElement(ue.A,{onClick:Je.onReRunClick,style:{fontSize:"12px"}},r.createElement(Wt.A,null)))))))))}):r.createElement(re.A,{p:2},q?r.createElement(ze.A,null):"No matching runs found."),r.createElement("div",{className:ve.pagination},r.createElement(it.A,{component:"div",count:kt,page:vt,rowsPerPage:V,onPageChange:(Je,Ut)=>ke(Ut),onRowsPerPageChange:Je=>xe(parseInt(Je.target.value,6)),labelRowsPerPage:"Workflows per page",rowsPerPageOptions:[6,12,18,{label:"All",value:-1}]})))},bn=({searchTerm:x,handleSearch:$,retry:q})=>r.createElement(r.Fragment,null,r.createElement(re.A,{flexGrow:1}),r.createElement(ot.A,{type:"search",label:"Search",value:x,onChange:$,"data-testid":"search-control",style:{marginRight:"20px"}}),r.createElement(Oe.A,null,r.createElement(Le.Ay,{title:"Reload workflow runs"},r.createElement(ue.A,{onClick:q},r.createElement(bt.A,null))))),In=({entity:x})=>{const $=en(x),q=jt(x),[xe,ke]=($!=null?$:"/").split("/"),[vt,kt]=(0,r.useState)("default"),[V,ve]=(0,r.useState)([]),[$e,Ke]=(0,r.useState)(""),Je=Re=>{Ke(Re.target.value)},[{runs:Ut,branches:Rt,defaultBranch:Nt,..._n},{retry:An,setPage:mn,setPageSize:ln}]=ct({hostname:q,owner:xe,repo:ke,branch:vt==="all"?void 0:vt}),M=q||"github.com",J=!_n.loading&&!Ut,be=Re=>{const yt=Re.target.value;kt(yt),mn(0),An()};return(0,r.useEffect)(()=>{ve(Ut)},[Ut,vt]),(0,r.useEffect)(()=>{kt(Nt)},[Nt]),r.createElement(H.A,{item:!0},J?r.createElement(ne.pp,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:r.createElement(pt.A,{variant:"contained",color:"primary",href:`https://${M}/${$}/actions/new`},"Create new Workflow")}):r.createElement(ne.nO,{title:r.createElement(re.A,{display:"flex",alignItems:"center"},r.createElement(ht.A,null),r.createElement(re.A,{mr:1}),r.createElement(oe.A,{variant:"h6"},$),r.createElement(nt.A,{value:vt,key:vt,label:"Branch",onChange:be,"data-testid":"menu-control",style:{marginLeft:"30px",marginRight:"20px",width:"230px"}},Rt.map(Re=>r.createElement(Ge.A,{key:Re.name,value:Re.name},Re.name===Nt?r.createElement(oe.A,{variant:"body2",component:"span"},Re.name," ",r.createElement(oe.A,{variant:"body2",component:"span",style:{color:"lightgray",fontSize:"x-small"}},"(default)")):Re.name)),r.createElement(Ge.A,{value:"all",key:"all",style:{color:"lightGrey",fontSize:"small"}},"select all branches")),r.createElement(bn,{searchTerm:$e,handleSearch:Je,retry:An}))},r.createElement(sn,{runs:V,loading:_n.loading,onChangePageSize:ln,onChangePage:mn,page:_n.page,total:_n.total,pageSize:_n.pageSize,searchTerm:$e,projectName:$})))},Pn=[{title:"ID",field:"id",type:"numeric",width:"150px"},{title:"Message",field:"message",highlight:!0,render:x=>{const $=()=>{const q=(0,l.Sf)(st);return r.createElement(ne.N_,{component:ce.N_,to:q({id:x.id})},x.message)};return r.createElement($,null)}},{title:"Source",render:x=>{var $,q;return r.createElement(oe.A,{variant:"body2",noWrap:!0},r.createElement(oe.A,{paragraph:!0,variant:"body2"},($=x.source)==null?void 0:$.branchName),r.createElement(oe.A,{paragraph:!0,variant:"body2"},(q=x.source)==null?void 0:q.commit.hash))}},{title:"Workflow",field:"workflowName"},{title:"Status",customSort:(x,$)=>Fe(x).localeCompare(Fe($)),render:x=>r.createElement(re.A,{display:"flex",alignItems:"center"},r.createElement(xt,{status:x.status,conclusion:x.conclusion}))},{title:"Actions",render:x=>r.createElement(Le.Ay,{title:"Rerun workflow"},r.createElement(ue.A,{onClick:x.onReRunClick},r.createElement(Wt.A,null))),width:"10%"}],qn=({projectName:x,loading:$,pageSize:q,page:xe,retry:ke,runs:vt,onChangePage:kt,onChangePageSize:V,total:ve})=>r.createElement(ne.XI,{isLoading:$,options:{paging:!0,pageSize:q,padding:"dense"},totalCount:ve,page:xe,actions:[{icon:()=>r.createElement(bt.A,null),tooltip:"Reload workflow runs",isFreeAction:!0,onClick:()=>ke()}],data:vt!=null?vt:[],onPageChange:kt,onRowsPerPageChange:V,style:{width:"100%"},title:r.createElement(re.A,{display:"flex",alignItems:"center"},r.createElement(ht.A,null),r.createElement(re.A,{mr:1}),r.createElement(oe.A,{variant:"h6"},x)),columns:Pn}),Gn=({entity:x,branch:$})=>{const q=en(x),xe=jt(x),[ke,vt]=(q!=null?q:"/").split("/"),[{runs:kt,...V},{retry:ve,setPage:$e,setPageSize:Ke}]=ct({hostname:xe,owner:ke,repo:vt,branch:$}),Je=xe||"github.com";return!V.loading&&!kt?r.createElement(ne.pp,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:r.createElement(pt.A,{variant:"contained",color:"primary",href:`https://${Je}/${q}/actions/new`},"Create new Workflow")}):r.createElement(qn,{...V,runs:kt,loading:V.loading,retry:ve,onChangePageSize:Ke,onChangePage:$e})},Nn=x=>{var $;return!!(($=x.metadata.annotations)!=null&&$[St])};var Jn=Object.freeze({__proto__:null,isGithubActionsAvailable:Nn,Router:x=>{const{view:$="table"}=x,{entity:q}=(0,Y.u)();if(!Nn(q))return r.createElement(ye.o9,{annotation:St});const xe=$==="cards"?r.createElement(In,{entity:q}):r.createElement(Gn,{entity:q});return r.createElement(a.BV,null,r.createElement(a.qh,{path:"/",element:xe}),r.createElement(a.qh,{path:`${st.path}`,element:r.createElement(Dt,{entity:q})}))}});const aa=(0,fe.A)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),ft=x=>{var $;const{error:q,loading:xe,lastRun:ke,branch:vt}=x,kt=aa();return q?r.createElement(oe.A,null,"Couldn't fetch latest ",vt," run"):xe?r.createElement(se.A,null):r.createElement(ne.tA,{metadata:{status:r.createElement(r.Fragment,null,r.createElement(xt,{status:ke.status,conclusion:ke.conclusion})),message:ke.message,url:r.createElement(ne.N_,{to:($=ke.githubUrl)!=null?$:""},"See more on GitHub"," ",r.createElement(Ae.A,{className:kt.externalLinkIcon}))}})},m=x=>{var $,q,xe;const{branch:ke="master",variant:vt}=x,{entity:kt}=(0,Y.u)(),V=(0,o.u)(o.r),ve=jt(kt),[$e,Ke]=((q=($=kt==null?void 0:kt.metadata.annotations)==null?void 0:$[St])!=null?q:"/").split("/"),[{runs:Je,loading:Ut,error:Rt}]=ct({hostname:ve,owner:$e,repo:Ke,branch:ke}),Nt=(xe=Je==null?void 0:Je[0])!=null?xe:{};return(0,r.useEffect)(()=>{Rt&&V.post(Rt)},[Rt,V]),r.createElement(ne.nO,{title:`Last ${ke} build`,variant:vt},r.createElement(ft,{error:Rt,loading:Ut,branch:ke,lastRun:Nt}))},D=x=>{const{branch:$="master",variant:q}=x,{entity:xe}=(0,Y.u)();return r.createElement(ne.nO,{title:`Last ${$} build`,variant:q},r.createElement(Gn,{branch:$,entity:xe}))},j=x=>x.split(`
`)[0],de=x=>{var $,q;const{branch:xe,dense:ke=!1,limit:vt=5,variant:kt}=x,{entity:V}=(0,Y.u)(),ve=(0,o.u)(o.r),$e=jt(V),[Ke,Je]=((q=($=V==null?void 0:V.metadata.annotations)==null?void 0:$[St])!=null?q:"/").split("/"),[{runs:Ut=[],loading:Rt,error:Nt}]=ct({hostname:$e,owner:Ke,repo:Je,branch:xe,initialPageSize:vt});(0,r.useEffect)(()=>{Nt&&ve.post(Nt)},[Nt,ve]);const _n=$e||"github.com",An=(0,l.Sf)(st);return Nt?r.createElement(ne.bJ,{title:Nt.message,error:Nt}):r.createElement(ne.nO,{title:"Recent Workflow Runs",subheader:xe?`Branch: ${xe}`:"All Branches",noPadding:!0,variant:kt},Ut.length?r.createElement(ne.XI,{isLoading:Rt,options:{search:!1,paging:!1,padding:ke?"dense":"default",toolbar:!1},columns:[{title:"Commit Message",field:"message",render:mn=>{var ln;return r.createElement(ne.N_,{component:ce.N_,to:An({id:mn.id})},j((ln=mn.message)!=null?ln:""))}},{title:"Branch",field:"source.branchName"},{title:"Status",field:"status",render:xt}],data:Ut}):r.createElement("div",{style:{textAlign:"center"}},r.createElement(oe.A,{variant:"body1"},"This component has GitHub Actions enabled, but no workflows were found."),r.createElement(oe.A,{variant:"body2"},r.createElement(ne.N_,{to:`https://${_n}/${Ke}/${Je}/actions/new`},"Create a new workflow"))))}},52723:(wn,wt,e)=>{"use strict";e.d(wt,{b:()=>fe,e:()=>le});var o=e(14041),l=e(76891),A=e(61477),B=e(46805),u=e(93453),r=e(64947),Y=e(29365),ye=e(9684),ce=e(23180),a=e(11638);const fe=oe=>{const{open:ze,close:Le,componentName:Pe,children:C}=oe;return o.createElement(l.A,{open:ze,onClose:()=>Le()},o.createElement(A.A,null,Pe?`Settings - ${Pe}`:"Settings"),o.createElement(B.A,null,C),o.createElement(u.A,null,o.createElement(r.A,{onClick:()=>Le(),color:"primary",variant:"contained"},"Close")))};function le(oe){const{title:ze,components:Le,name:Pe,description:C,layout:ee,settings:R}=oe,p=(R==null?void 0:R.schema)!==void 0;return(0,a.zZ)({name:Pe,data:{title:ze,description:C,"home.widget.config":{layout:ee,settings:R}},component:{lazy:()=>Le().then(w=>f=>o.createElement(ie,{...f,...w,title:f.title||ze,isCustomizable:p}))}})}function ie(oe){const{Renderer:ze,Content:Le,Settings:Pe,Actions:C,ContextProvider:ee,isCustomizable:R,title:p,...w}=oe,f=(0,a.nm)(),{Progress:E}=f.getComponents(),[F,re]=o.useState(!1);if(ze)return o.createElement(o.Suspense,{fallback:o.createElement(E,null)},o.createElement(ze,{...p&&{title:p},Content:Le,...C?{Actions:C}:{},...Pe&&!R?{Settings:Pe}:{},...ee?{ContextProvider:ee}:{},...w}));const se={...p&&{title:p},...Pe&&!R?{action:o.createElement(Y.A,{onClick:()=>re(!0)},o.createElement(ye.A,null,"Settings"))}:{},...C?{actions:o.createElement(C,null)}:{}},_e=o.createElement(ce.nO,{...se},Pe&&!R&&o.createElement(fe,{open:F,componentName:p,close:()=>re(!1)},o.createElement(Pe,null)),o.createElement(Le,{...w}));return o.createElement(o.Suspense,{fallback:o.createElement(E,null)},ee?o.createElement(ee,{...w},_e):_e)}},6365:(wn,wt,e)=>{"use strict";e.d(wt,{C:()=>gt,V:()=>Zt,i:()=>pt,v:()=>nt});var o=e(14041),l=e(45833),A=e.n(l),B=e(48821),u=e(11638),r=e(58837),Y=e(99703),ye=e(76891),ce=e(46805),a=e(42899),fe=e(71677),le=e(61477),ie=e(91467),oe=e(54917),ze=e(45250),Le=e.n(ze),Pe=e(45145),C=e(23180),ee=e(72501),R=e(29365),p=e(9684),w=e(39590),f=e(43157),E=e(94384),F=e(94403),re=e(58007),se=e(8109),_e=e(18466),Q=e(5951),g=e(64947),H=e(71108),G=e(75625),Oe=e(92399),ue=e(46195),it=e(18690),ot=e(29835);const pt=at=>["<","<=","==","!=",">",">=","contains"].includes(at),nt=(0,B.c)({id:"homepage.visits"}),Ge=(0,f.SL)(E.Sx),De=(0,r.A)(at=>(0,Y.A)({iconGrid:{height:"100%","& *":{padding:0}},settingsOverlay:{position:"absolute",backgroundColor:"rgba(40, 40, 40, 0.93)",width:"100%",height:"100%",top:0,left:0,padding:at.spacing(2),color:"white"}})),Ae=at=>{const{id:mt,widget:Qe,settings:Lt,handleRemove:St,handleSettingsSave:en,deletable:xt}=at,[pe,Fe]=o.useState(!1),Mt=De();return o.createElement("div",{className:Mt.settingsOverlay},Qe.settingsSchema&&o.createElement(ye.A,{open:pe,className:"widgetSettingsDialog",onClose:()=>Fe(!1)},o.createElement(ce.A,null,o.createElement(Ge,{validator:F.Ay,showErrorList:!1,schema:Qe.settingsSchema,uiSchema:Qe.uiSchema,noHtml5Validate:!0,formData:Lt,formContext:{settings:Lt},onSubmit:({formData:Xt,errors:Bt})=>{Bt.length===0&&(en(mt,Xt),Fe(!1))},experimental_defaultFormStateBehavior:{allOf:"populateDefaults"}}))),o.createElement(a.A,{container:!0,className:Mt.iconGrid,alignItems:"center",justifyContent:"center"},Qe.settingsSchema&&o.createElement(a.A,{item:!0,className:"overlayGridItem"},o.createElement(fe.Ay,{title:"Edit settings"},o.createElement(R.A,{color:"primary",onClick:()=>Fe(!0)},o.createElement(p.A,{fontSize:"large"})))),xt!==!1&&o.createElement(a.A,{item:!0,className:"overlayGridItem"},o.createElement(fe.Ay,{title:"Delete widget"},o.createElement(R.A,{color:"secondary",onClick:()=>St(mt)},o.createElement(w.A,{fontSize:"large"}))))))},Ne=at=>at.title||at.name,ne=at=>{const{widgets:mt,handleAdd:Qe}=at;return o.createElement(o.Fragment,null,o.createElement(le.A,null,"Add new widget to dashboard"),o.createElement(ce.A,null,o.createElement(re.A,{dense:!0},mt.map(Lt=>o.createElement(se.A,{key:Lt.name,button:!0,onClick:()=>Qe(Lt)},o.createElement(ie.A,null,o.createElement(_e.A,null)),o.createElement(Q.A,{secondary:Lt.description&&o.createElement(ee.A,{component:"span",variant:"caption",color:"textPrimary"},Lt.description),primary:o.createElement(ee.A,{variant:"body1",color:"textPrimary"},Ne(Lt))}))))))},N=(0,r.A)(at=>(0,Y.A)({contentHeaderBtn:{marginLeft:at.spacing(2)},widgetWrapper:{"& > *:first-child":{width:"100%",height:"100%"}}})),X=at=>{const{editMode:mt,numWidgets:Qe,clearLayout:Lt,setAddWidgetDialogOpen:St,changeEditMode:en,defaultConfigAvailable:xt,restoreDefault:pe}=at,Fe=N();return o.createElement(o.Fragment,null,!mt&&Qe>0?o.createElement(g.A,{variant:"contained",color:"primary",onClick:()=>en(!0),size:"small",startIcon:o.createElement(G.A,null)},"Edit"):o.createElement(o.Fragment,null,xt&&o.createElement(g.A,{variant:"contained",className:Fe.contentHeaderBtn,onClick:pe,size:"small",startIcon:o.createElement(Oe.A,null)},"Restore defaults"),Qe>0&&o.createElement(g.A,{variant:"contained",color:"secondary",className:Fe.contentHeaderBtn,onClick:Lt,size:"small",startIcon:o.createElement(w.A,null)},"Clear all"),o.createElement(g.A,{variant:"contained",className:Fe.contentHeaderBtn,onClick:()=>St(!0),size:"small",startIcon:o.createElement(_e.A,null)},"Add widget"),Qe>0&&o.createElement(g.A,{className:Fe.contentHeaderBtn,variant:"contained",color:"primary",onClick:()=>en(!1),size:"small",startIcon:o.createElement(H.A,null)},"Save")))},Ue=ue.z.any(),te=ue.z.any(),we=ue.z.any(),ht=ue.z.any(),Wt=ue.z.object({component:we,x:ue.z.number().nonnegative("x must be positive number"),y:ue.z.number().nonnegative("y must be positive number"),width:ue.z.number().positive("width must be positive number"),height:ue.z.number().positive("height must be positive number"),movable:ue.z.boolean().optional(),deletable:ue.z.boolean().optional(),resizable:ue.z.boolean().optional()}),bt=ue.z.object({name:ue.z.string(),title:ue.z.string().optional(),description:ue.z.string().optional(),component:we,width:ue.z.number().positive("width must be positive number").optional(),height:ue.z.number().positive("height must be positive number").optional(),minWidth:ue.z.number().positive("minWidth must be positive number").optional(),maxWidth:ue.z.number().positive("maxWidth must be positive number").optional(),minHeight:ue.z.number().positive("minHeight must be positive number").optional(),maxHeight:ue.z.number().positive("maxHeight must be positive number").optional(),settingsSchema:Ue.optional(),uiSchema:te.optional(),movable:ue.z.boolean().optional(),deletable:ue.z.boolean().optional(),resizable:ue.z.boolean().optional()}),It=ue.z.object({id:ue.z.string(),layout:ht,settings:ue.z.record(ue.z.string(),ue.z.any()),movable:ue.z.boolean().optional(),deletable:ue.z.boolean().optional(),resizable:ue.z.boolean().optional()}),O=ue.z.object({version:ue.z.literal(1),pages:ue.z.record(ue.z.string(),ue.z.array(It))}),S=(0,l.WidthProvider)(l.Responsive),K=(0,r.A)(at=>(0,Y.A)({responsiveGrid:{"& .react-grid-item > .react-resizable-handle:after":{position:"absolute",content:'""',borderStyle:"solid",borderWidth:"0 0 20px 20px",borderColor:`transparent transparent ${at.palette.primary.light} transparent`}},contentHeaderBtn:{marginLeft:at.spacing(2)},widgetWrapper:{'& > div[class*="MuiCard-root"]':{width:"100%",height:"100%"},'& div[class*="MuiCardContent-root"]':{overflow:"auto"},"& + .react-grid-placeholder":{backgroundColor:at.palette.primary.light},"&.edit > :active":{cursor:"move"}}}));function ae(at){const mt="home",Qe=(0,B.u)(B.y).forBucket("home.customHomepage"),Lt=(0,o.useCallback)(xt=>{const pe={version:1,pages:{default:xt}};Qe.set(mt,JSON.stringify(pe))},[mt,Qe]),St=(0,Pe.A)(Qe.observe$(mt),Qe.snapshot(mt));return[(0,o.useMemo)(()=>{if(St.presence==="absent")return at;try{const xt=JSON.parse(St.value);return O.parse(xt).pages.default}catch{return at}},[St,at]),Lt]}const We=(at,mt)=>{const Qe=at.map((Lt,St)=>{var en,xt;const pe=Wt.parse(Lt),Fe=o.isValidElement(pe.component)?(0,u.E0)(pe.component,"core.extensionName"):pe.component;if(!Fe)return null;const Mt=mt.find(Bt=>Bt.name===Fe);if(!Mt)return null;const Xt=`${Mt.name}__${St}${Math.random().toString(36).slice(2)}`;return{id:Xt,layout:{i:Xt,x:pe.x,y:pe.y,w:Math.min((en=Mt.maxWidth)!=null?en:Number.MAX_VALUE,pe.width),h:Math.min((xt=Mt.maxHeight)!=null?xt:Number.MAX_VALUE,pe.height),minW:Mt.minWidth,maxW:Mt.maxWidth,minH:Mt.minHeight,maxH:Mt.maxHeight,isDraggable:!1,isResizable:!1},settings:{},movable:Lt.movable,deletable:Lt.deletable,resizable:Lt.resizable}});return(0,ze.compact)(Qe)},qe=at=>at.selectByComponentData({key:"core.extensionName"}).getElements().flatMap(mt=>{var Qe,Lt,St,en,xt,pe,Fe,Mt,Xt,Bt,jt,Ln,pn,cn;const En=(0,u.E0)(mt,"home.widget.config");return[bt.parse({component:mt,name:(0,u.E0)(mt,"core.extensionName"),title:(0,u.E0)(mt,"title"),description:(0,u.E0)(mt,"description"),settingsSchema:(Qe=En==null?void 0:En.settings)==null?void 0:Qe.schema,uiSchema:(Lt=En==null?void 0:En.settings)==null?void 0:Lt.uiSchema,width:(en=(St=En==null?void 0:En.layout)==null?void 0:St.width)==null?void 0:en.defaultColumns,minWidth:(pe=(xt=En==null?void 0:En.layout)==null?void 0:xt.width)==null?void 0:pe.minColumns,maxWidth:(Mt=(Fe=En==null?void 0:En.layout)==null?void 0:Fe.width)==null?void 0:Mt.maxColumns,height:(Bt=(Xt=En==null?void 0:En.layout)==null?void 0:Xt.height)==null?void 0:Bt.defaultRows,minHeight:(Ln=(jt=En==null?void 0:En.layout)==null?void 0:jt.height)==null?void 0:Ln.minRows,maxHeight:(cn=(pn=En==null?void 0:En.layout)==null?void 0:pn.height)==null?void 0:cn.maxRows})]}),gt=at=>{var mt;const Qe=K(),Lt=(0,oe.A)(),St=(0,u.OJ)(at.children,qe,[at]),en=(0,o.useMemo)(()=>at.config?We(at.config,St):[],[at.config,St]),[xt,pe]=ae(en),[Fe,Mt]=o.useState(!1),Xt=xt.find(je=>je.layout.isResizable)!==void 0,[Bt,jt]=o.useState(Xt),Ln=je=>St.find(Yt=>Yt.name===je),pn=je=>je.split("__")[0],cn=je=>{var Yt,Gt,sn,bn;const In=`${je.name}__${xt.length+1}${Math.random().toString(36).slice(2)}`;pe([...xt,{id:In,layout:{i:In,x:0,y:Math.max(...xt.map(Pn=>Pn.layout.y+Pn.layout.h))+1,w:Math.min((Yt=je.maxWidth)!=null?Yt:Number.MAX_VALUE,(Gt=je.width)!=null?Gt:12),h:Math.min((sn=je.maxHeight)!=null?sn:Number.MAX_VALUE,(bn=je.height)!=null?bn:4),minW:je.minWidth,maxW:je.maxWidth,minH:je.minHeight,maxH:je.maxHeight,isResizable:Bt,isDraggable:Bt},settings:{},movable:je.movable,deletable:je.deletable,resizable:je.resizable}]),Mt(!1)},En=je=>{pe(xt.filter(Yt=>Yt.id!==je))},lt=(je,Yt)=>{const Gt=xt.findIndex(sn=>sn.id===je);if(Gt>=0){const sn=xt[Gt];sn.settings=Yt,xt[Gt]=sn,pe(xt)}},Ot=()=>{pe([])},Vt=je=>{jt(je),pe(xt.map(Yt=>{const Gt=Yt.resizable===!1?!1:je,sn=Yt.movable===!1?!1:je;return{...Yt,layout:{...Yt.layout,isDraggable:sn,isResizable:Gt}}}))},Dt=(je,Yt)=>{if(Bt){const Gt=je.map(sn=>({...xt.find(In=>In.id===sn.i),layout:sn}));pe(Gt)}},ct=()=>{pe(en.map(je=>{const Yt=je.resizable===!1?!1:Bt,Gt=je.movable===!1?!1:Bt;return{...je,layout:{...je.layout,isDraggable:Gt,isResizable:Yt}}}))};return o.createElement(o.Fragment,null,o.createElement(C.dv,{title:""},o.createElement(X,{editMode:Bt,numWidgets:xt.length,clearLayout:Ot,setAddWidgetDialogOpen:Mt,changeEditMode:Vt,defaultConfigAvailable:at.config!==void 0,restoreDefault:ct})),o.createElement(ye.A,{open:Fe,onClose:()=>Mt(!1)},o.createElement(ne,{widgets:St,handleAdd:cn})),!Bt&&xt.length===0&&o.createElement(ee.A,{variant:"h5",align:"center"},"No widgets added. Start by clicking the 'Add widget' button."),o.createElement(S,{className:Qe.responsiveGrid,measureBeforeMount:!0,compactType:at.compactType,style:at.style,allowOverlap:at.allowOverlap,preventCollision:at.preventCollision,draggableCancel:".overlayGridItem,.widgetSettingsDialog,.disabled",containerPadding:at.containerPadding,margin:at.containerMargin,breakpoints:at.breakpoints?at.breakpoints:Lt.breakpoints.values,cols:at.cols?at.cols:{xl:12,lg:12,md:10,sm:6,xs:4,xxs:2},rowHeight:(mt=at.rowHeight)!=null?mt:60,onLayoutChange:Dt,layouts:{xl:xt.map(je=>je.layout)}},xt.map(je=>{var Yt;const Gt=je.layout,sn=pn(Gt.i),bn=Ln(sn);if(!bn||!bn.component)return null;const In={...bn.component.props,...(Yt=je.settings)!=null?Yt:{}};return o.createElement("div",{key:Gt.i,className:`${Qe.widgetWrapper} ${Bt&&"edit"} ${je.movable===!1&&"disabled"}`},o.createElement(C.tH,null,o.createElement(bn.component.type,{...In})),Bt&&o.createElement(Ae,{id:Gt.i,widget:bn,handleRemove:En,handleSettingsSave:lt,settings:je.settings,deletable:je.deletable}))})))},_t=({rootPath:at="catalog",stringifyEntityRefImpl:mt=ot.U2}={})=>({pathname:Qe})=>{const St=new RegExp(`^/${at}/(?<namespace>[^/]+)/(?<kind>[^/]+)/(?<name>[^/]+)`).exec(Qe);if(!St||!(St!=null&&St.groups))return;const en={namespace:St.groups.namespace,kind:St.groups.kind,name:St.groups.name};return mt(en)},st=({rootPath:at="catalog",document:mt=e.g.document}={})=>({pathname:Qe})=>{let St=new RegExp(`^/${at}/(?<namespace>[^/]+)/(?<kind>[^/]+)/(?<name>[^/]+)`).exec(Qe);return St&&(St!=null&&St.groups)||(St=/^\/(?<name>[^\/]+)$/.exec(Qe),St&&(St!=null&&St.groups))?St.groups.name:mt.title},Zt=({children:at,toEntityRef:mt,visitName:Qe})=>{const Lt=(0,B.u)(nt),{pathname:St}=(0,it.zy)(),en=mt!=null?mt:_t(),xt=Qe!=null?Qe:st();return(0,o.useEffect)(()=>{const pe=requestAnimationFrame(()=>{Lt.save({visit:{name:xt({pathname:St}),pathname:St,entityRef:en({pathname:St})}})});return()=>cancelAnimationFrame(pe)},[Lt,St,en,xt]),o.createElement(o.Fragment,null,at)}},91729:(wn,wt,e)=>{"use strict";e.d(wt,{XZ:()=>p,rC:()=>re});var o=e(11638),l=e(48821),A=e(52723),B=e(6365),u=e(14041),r=e(58837),Y=e(45833),ye=e.n(Y),ce=e(45250),a=e.n(ce),fe=e(43157),le=e(94384),ie=e(94403);const oe=(0,o.HM)({id:"home"});var ze=Object.defineProperty,Le=(Ge,De,Ae)=>De in Ge?ze(Ge,De,{enumerable:!0,configurable:!0,writable:!0,value:Ae}):Ge[De]=Ae,Pe=(Ge,De,Ae)=>(Le(Ge,typeof De!="symbol"?De+"":De,Ae),Ae);class C{constructor(De){Pe(this,"limit"),Pe(this,"storageApi"),Pe(this,"storageKeyPrefix","@backstage/plugin-home:visits"),Pe(this,"identityApi");var Ae;this.limit=Math.abs((Ae=De.limit)!=null?Ae:100),this.storageApi=De.storageApi,this.identityApi=De.identityApi}static create(De){return new C(De)}async list(De){var Ae,Ne;let ne=[...await this.retrieveAll()];return((Ae=De==null?void 0:De.orderBy)!=null?Ae:[]).reverse().forEach(N=>{N.direction==="asc"?ne.sort((X,Ue)=>this.compare(N,X,Ue)):ne.sort((X,Ue)=>this.compare(N,Ue,X))}),((Ne=De==null?void 0:De.filterBy)!=null?Ne:[]).reverse().forEach(N=>{ne=ne.filter(X=>{const Ue=X[N.field];return N.operator===">"?Ue>N.value:N.operator===">="?Ue>=N.value:N.operator==="<"?Ue<N.value:N.operator==="<="?Ue<=N.value:N.operator==="=="?Ue===N.value:N.operator==="!="?Ue!==N.value:N.operator==="contains"?`${Ue}`.includes(`${N.value}`):!1})}),ne}async save(De){const Ae=[...await this.retrieveAll()],Ne={...De.visit,id:window.crypto.randomUUID(),hits:1,timestamp:Date.now()},ne=Ae.findIndex(N=>N.pathname===Ne.pathname);return ne>=0?(Ne.id=Ae[ne].id,Ne.hits=Ae[ne].hits+1,Ae[ne]=Ne):Ae.push(Ne),Ae.sort((N,X)=>X.timestamp-N.timestamp),await this.persistAll(Ae.splice(0,this.limit)),Ne}async persistAll(De){const Ae=await this.getStorageKey();return this.storageApi.set(Ae,De)}async retrieveAll(){var De;const Ae=await this.getStorageKey(),Ne=this.storageApi.snapshot(Ae);return(Ne==null?void 0:Ne.presence)!=="unknown"?(De=Ne==null?void 0:Ne.value)!=null?De:[]:new Promise((ne,N)=>{const X=this.storageApi.observe$(Ae).subscribe({next:Ue=>{var te;const we=(te=Ue.value)!=null?te:[];X.unsubscribe(),ne(we)},error:Ue=>{X.unsubscribe(),N(Ue)}})})}async getStorageKey(){const{userEntityRef:De}=await this.identityApi.getBackstageIdentity();return`${this.storageKeyPrefix}:${De}`}compare(De,Ae,Ne){return typeof Ae[De.field]=="number"?Ae[De.field]-Ne[De.field]:`${Ae[De.field]}`.localeCompare(`${Ne[De.field]}`)}}class ee{static create(De){return C.create({limit:De.limit,identityApi:De.identityApi,storageApi:WebStorage.create({errorApi:De.errorApi})})}}const R=(0,o.i1)({id:"home",apis:[(0,o.bW)({api:B.v,deps:{storageApi:l.y,identityApi:l.t},factory:({storageApi:Ge,identityApi:De})=>C.create({storageApi:Ge,identityApi:De})})],routes:{root:oe}}),p=R.provide((0,o.QJ)({name:"HomepageCompositionRoot",component:()=>e.e(4754).then(e.bind(e,24754)).then(Ge=>Ge.HomepageCompositionRoot),mountPoint:oe})),w=R.provide((0,o.NC)({name:"ComponentAccordion",component:{lazy:()=>e.e(890).then(e.bind(e,80890)).then(Ge=>Ge.ComponentAccordion)}})),f=R.provide((0,o.NC)({name:"ComponentTabs",component:{lazy:()=>e.e(890).then(e.bind(e,80890)).then(Ge=>Ge.ComponentTabs)}})),E=R.provide((0,o.NC)({name:"ComponentTab",component:{lazy:()=>e.e(890).then(e.bind(e,80890)).then(Ge=>Ge.ComponentTab)}})),F=R.provide((0,o.NC)({name:"WelcomeTitle",component:{lazy:()=>e.e(6627).then(e.bind(e,16627)).then(Ge=>Ge.WelcomeTitle)}})),re=R.provide((0,o.NC)({name:"CompanyLogo",component:{lazy:()=>e.e(3959).then(e.bind(e,63959)).then(Ge=>Ge.CompanyLogo)}})),se=R.provide((0,A.e)({name:"HomePageRandomJoke",title:"Random Joke",components:()=>e.e(7228).then(e.bind(e,37228)),description:"Shows a random joke about optional category",layout:{height:{minRows:4},width:{minColumns:3}},settings:{schema:{title:"Random Joke settings",type:"object",properties:{defaultCategory:{title:"Category",type:"string",enum:["any","programming","dad"],default:"any"}}}}})),_e=R.provide((0,A.e)({name:"HomePageToolkit",title:"Toolkit",components:()=>e.e(1771).then(e.bind(e,61771))})),Q=R.provide((0,A.e)({name:"HomePageStarredEntities",title:"Your Starred Entities",components:()=>e.e(9557).then(e.bind(e,19557))})),g=R.provide((0,o.NC)({name:"HeaderWorldClock",component:{lazy:()=>e.e(9314).then(e.bind(e,59314)).then(Ge=>Ge.HeaderWorldClock)}})),H=R.provide((0,A.e)({name:"HomePageTopVisited",components:()=>e.e(7385).then(e.bind(e,57385))})),G=R.provide((0,A.e)({name:"HomePageRecentlyVisited",components:()=>e.e(4858).then(e.bind(e,24858))})),Oe=R.provide((0,A.e)({name:"FeaturedDocsCard",title:"Featured Docs",components:()=>e.e(6712).then(e.bind(e,36712))})),ue=Ge=>React.createElement("svg",{className:Ge.classes.svg,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2079.95 456.05"},React.createElement("path",{className:Ge.classes.path,d:"M302.9,180a80.62,80.62,0,0,0,13.44-10.37c.8-.77,1.55-1.54,2.31-2.31a81.89,81.89,0,0,0,7.92-9.37,62.37,62.37,0,0,0,6.27-10.77,48.6,48.6,0,0,0,4.36-16.4c1.49-19.39-10-38.67-35.62-54.22L198.42,14,78.16,129.22l-78.29,75,108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.69,49.69,0,0,0-6.8-8.87,89.78,89.78,0,0,0,19.28,2.15H259a85.09,85.09,0,0,0,31-5.79A80.88,80.88,0,0,0,302.9,180Zm-100.59,59.8c-19.32,18.51-50.4,21.24-75.7,5.9l-75.13-45.6,67.44-64.65,76.42,46.39C222.88,198.57,221.36,221.6,202.31,239.84Zm8.94-82.21L140.6,114.74,205,53l69.37,42.11c25.94,15.73,29.31,37.05,10.55,55A60.71,60.71,0,0,1,211.25,157.63Zm29.86,190c-19.57,18.75-46.17,29.08-74.88,29.08a123.84,123.84,0,0,1-64.11-18.19L-.13,296.51v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.85,87.85,0,0,1,241.11,347.67Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,257.52V282.2l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.79A86.86,86.86,0,0,1,241.11,308.68Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,218.54v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.12,19.68-41.49v-1.82A87.14,87.14,0,0,1,241.11,269.7Zm83.69,25.74a94.16,94.16,0,0,1-60.19,25.86h0V348a81.6,81.6,0,0,0,51.73-22.37c14-13.38,21.15-28.11,21-42.64v-2.2A95.14,95.14,0,0,1,324.8,295.44Zm-83.69,91.21c-19.57,18.75-46.17,29.09-74.88,29.09a123.76,123.76,0,0,1-64.11-18.2L-.13,335.49v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.35,87.35,0,0,1,241.11,386.65Zm85.75-210.21c-.68.69-1.35,1.38-2.06,2.05a99.19,99.19,0,0,1-22.23,15.69,94.53,94.53,0,0,1-26.24,8.71,97.84,97.84,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a52.7,52.7,0,0,1,1.13,12V231h.05A84.48,84.48,0,0,0,290,225.47a80.83,80.83,0,0,0,26.38-16.82c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,62.85,62.85,0,0,0,6.29-10.78,48.5,48.5,0,0,0,4.32-16.44c.09-1.23.2-2.47.19-3.7v-2c-.72,1-1.48,2.06-2.26,3.09A98,98,0,0,1,326.86,176.44Zm0,77.92c-.68.7-1.3,1.41-2,2.1a94.09,94.09,0,0,1-60.19,25.85h0V309h0a81.65,81.65,0,0,0,51.73-22.37,73.51,73.51,0,0,0,16.48-22.49,48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A95.81,95.81,0,0,1,326.82,254.36Zm0-39c-.68.7-1.3,1.41-2,2.1a92.22,92.22,0,0,1-10.62,8.65,93.53,93.53,0,0,1-11.63,7,95.63,95.63,0,0,1-37.94,10.18h-.05l0,26.67h0a81.63,81.63,0,0,0,51.73-22.37c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,63.16,63.16,0,0,0,6.29-10.77,48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A98.19,98.19,0,0,1,326.82,215.38Zm241-88.84q7.94,0,17.09.17t18.12,1a139.3,139.3,0,0,1,16.74,2.57,42.78,42.78,0,0,1,13.3,5.14,64.27,64.27,0,0,1,20.54,19.89Q662,168,662,186.54q0,19.54-9.49,33.78t-27.1,21.09v.68q22.78,4.82,34.87,20.58t12.08,38.4a72.62,72.62,0,0,1-4.83,26.06,65.29,65.29,0,0,1-14.33,22.46,71.57,71.57,0,0,1-23.47,15.78q-14,6-32.28,6H478.38V126.54Zm9,105.27q28,0,40.21-9.78t12.26-29.31q0-13-4.14-20.58a29.47,29.47,0,0,0-11.4-11.66A45,45,0,0,0,597,155.17a161.2,161.2,0,0,0-20.19-1.2h-65.6v77.84Zm16.57,112.13q21.74,0,34-11.66T639.59,300q0-12-4.48-19.88a34.85,34.85,0,0,0-11.91-12.52,50.14,50.14,0,0,0-17.09-6.52,105,105,0,0,0-20-1.88H511.17v84.7Zm274.79,26.74q-7.61,4.45-21.06,4.46-11.4,0-18.12-6.34t-6.74-20.75a70.17,70.17,0,0,1-28.13,20.75,97.87,97.87,0,0,1-57.65,3.6,53.51,53.51,0,0,1-18.82-8.58A41.19,41.19,0,0,1,705,348.56q-4.65-9.42-4.66-22.8,0-15.09,5.18-24.69a44.92,44.92,0,0,1,13.64-15.6,62.63,62.63,0,0,1,19.33-9.09q10.88-3.08,22.27-5.14,12.08-2.4,23-3.6a128,128,0,0,0,19.16-3.43c5.53-1.48,9.89-3.65,13.12-6.51s4.83-7,4.83-12.52q0-9.6-3.62-15.43a24.94,24.94,0,0,0-9.32-8.92,38.38,38.38,0,0,0-12.78-4.11,96.54,96.54,0,0,0-14-1q-18.63,0-31.07,7T736.6,249.29H707.26q.69-16.46,6.9-27.77a52.21,52.21,0,0,1,16.57-18.35,70,70,0,0,1,23.65-10.11A125.51,125.51,0,0,1,782.86,190a168.63,168.63,0,0,1,24,1.72,63.26,63.26,0,0,1,21.58,7A41.23,41.23,0,0,1,844,213.59q5.87,9.57,5.87,25v91q0,10.26,1.21,15.05t8.11,4.79a35.57,35.57,0,0,0,9-1.37Zm-47.64-90.87c-3.69,2.74-8.52,4.72-14.5,6s-12.26,2.27-18.82,3.07-13.17,1.71-19.85,2.73a73.7,73.7,0,0,0-18,4.94,32.62,32.62,0,0,0-12.94,9.73q-5,6.32-5,17.23a23.31,23.31,0,0,0,2.94,12.11,24.11,24.11,0,0,0,7.59,8,32,32,0,0,0,10.88,4.44,60.94,60.94,0,0,0,13.11,1.36q14.5,0,24.86-3.92a52.49,52.49,0,0,0,16.91-9.9,39.1,39.1,0,0,0,9.67-13,32.53,32.53,0,0,0,3.11-13.14ZM1002.07,225q-11.05-9.25-29.69-9.26-15.89,0-26.58,5.83A47.29,47.29,0,0,0,928.71,237a64.66,64.66,0,0,0-9.15,22.12A119.83,119.83,0,0,0,916.8,285a98.22,98.22,0,0,0,2.93,24,64.18,64.18,0,0,0,9.15,20.74,46.2,46.2,0,0,0,16.23,14.58q10,5.49,23.82,5.48,21.75,0,34-11.31t15-31.89h30q-4.83,32.91-24.68,50.75t-54,17.83q-20.37,0-36.07-6.52A69.86,69.86,0,0,1,907,350.11a79.92,79.92,0,0,1-15.88-28.63A118.64,118.64,0,0,1,885.73,285a129.41,129.41,0,0,1,5.18-37.21,85.63,85.63,0,0,1,15.71-30.17A73.46,73.46,0,0,1,933,197.35Q948.91,190,970,190a108.54,108.54,0,0,1,28.48,3.6,69.59,69.59,0,0,1,23.48,11.15,61,61,0,0,1,16.74,19q6.55,11.49,8.29,27.26h-30.38Q1013.11,234.21,1002.07,225Zm109.77-98.41v145l81.47-77.49h39.36l-70.77,64.46,75.95,112.82h-37.29l-61.1-92.59-27.62,25.38v67.21H1082.5V126.54Zm170.54,205.22a31.07,31.07,0,0,0,10.87,10.63,49,49,0,0,0,15.19,5.66,87.06,87.06,0,0,0,17.44,1.71,109.18,109.18,0,0,0,14.5-1,53.22,53.22,0,0,0,14-3.78,26.27,26.27,0,0,0,10.53-8q4.14-5.32,4.14-13.55,0-11.31-8.63-17.14a73.69,73.69,0,0,0-21.58-9.43q-12.94-3.6-28.13-6.52a146,146,0,0,1-28.14-8.23A58.16,58.16,0,0,1,1261,267.13q-8.64-9.6-8.63-26.75,0-13.38,6-23a49.26,49.26,0,0,1,15.53-15.61,71.76,71.76,0,0,1,21.4-8.91A99.41,99.41,0,0,1,1319,190a141.31,141.31,0,0,1,28,2.58,64.85,64.85,0,0,1,22.62,8.91,46.16,46.16,0,0,1,15.7,17.15q5.87,10.8,6.91,26.91h-29.35q-.69-8.57-4.48-14.23a29.36,29.36,0,0,0-9.67-9.08,44.16,44.16,0,0,0-12.94-5,67.68,67.68,0,0,0-14.33-1.54,87.29,87.29,0,0,0-13.29,1,45.28,45.28,0,0,0-12.26,3.6,24.49,24.49,0,0,0-9,6.86q-3.46,4.29-3.46,11.14a16.32,16.32,0,0,0,5.36,12.52,42.75,42.75,0,0,0,13.63,8.23,120,120,0,0,0,18.64,5.48q10.37,2.24,20.72,4.63,11,2.4,21.57,5.83A70.74,70.74,0,0,1,1382,284.1a44.55,44.55,0,0,1,13.12,14.23q5,8.58,5,21.26,0,16.13-6.73,26.75a52.5,52.5,0,0,1-17.61,17.14,73.89,73.89,0,0,1-24.51,9.09,146.3,146.3,0,0,1-27.1,2.57,126.24,126.24,0,0,1-28.31-3.09A69.56,69.56,0,0,1,1272,361.94a51.74,51.74,0,0,1-16.57-18.52q-6.21-11.49-6.9-27.95h29.34A32.65,32.65,0,0,0,1282.38,331.76Zm226.46-137.67v25.72h-35.56V329.88a31.37,31.37,0,0,0,.87,8.23,8.42,8.42,0,0,0,3.28,4.8,14.61,14.61,0,0,0,6.73,2.23,99.19,99.19,0,0,0,11.22.51h13.46v25.72H1486.4a105.8,105.8,0,0,1-19.5-1.55,28.65,28.65,0,0,1-13.12-5.65,24.09,24.09,0,0,1-7.42-11.66q-2.43-7.54-2.42-19.89V219.81h-30.38V194.09h30.38V140.94h29.34v53.15ZM1699.4,370.68q-7.61,4.45-21.06,4.46-11.4,0-18.12-6.34t-6.74-20.75a70.17,70.17,0,0,1-28.13,20.75,97.87,97.87,0,0,1-57.65,3.6,53.51,53.51,0,0,1-18.82-8.58,41.19,41.19,0,0,1-12.6-15.26q-4.65-9.42-4.66-22.8,0-15.09,5.18-24.69a44.92,44.92,0,0,1,13.64-15.6,62.63,62.63,0,0,1,19.33-9.09q10.88-3.08,22.27-5.14,12.07-2.4,23-3.6a128,128,0,0,0,19.16-3.43c5.53-1.48,9.89-3.65,13.12-6.51s4.83-7,4.83-12.52q0-9.6-3.62-15.43a24.94,24.94,0,0,0-9.32-8.92,38.38,38.38,0,0,0-12.78-4.11,96.54,96.54,0,0,0-14-1q-18.63,0-31.07,7t-13.46,26.57h-29.34q.67-16.46,6.9-27.77A52.21,52.21,0,0,1,1562,203.17a70,70,0,0,1,23.65-10.11,125.51,125.51,0,0,1,28.48-3.09,168.63,168.63,0,0,1,24,1.72,63.26,63.26,0,0,1,21.58,7,41.23,41.23,0,0,1,15.53,14.89q5.87,9.57,5.87,25v91q0,10.26,1.21,15.05t8.11,4.79a35.57,35.57,0,0,0,9-1.37Zm-47.64-90.87c-3.69,2.74-8.52,4.72-14.5,6s-12.26,2.27-18.82,3.07-13.17,1.71-19.85,2.73a73.7,73.7,0,0,0-17.95,4.94,32.62,32.62,0,0,0-12.94,9.73q-5,6.32-5,17.23a23.31,23.31,0,0,0,2.94,12.11,24.11,24.11,0,0,0,7.59,8,32,32,0,0,0,10.88,4.44,60.94,60.94,0,0,0,13.11,1.36q14.51,0,24.86-3.92a52.49,52.49,0,0,0,16.91-9.9,39.1,39.1,0,0,0,9.67-13,32.53,32.53,0,0,0,3.11-13.14Zm208.85,141.62q-20,21.6-62.83,21.6a122.11,122.11,0,0,1-25.37-2.74,78,78,0,0,1-23.48-8.92,54.41,54.41,0,0,1-17.43-16.11q-6.91-10-7.6-24.35h29.35a21.47,21.47,0,0,0,5,13.38,36.67,36.67,0,0,0,11.4,8.91,55.52,55.52,0,0,0,14.67,5,79.51,79.51,0,0,0,15.19,1.55q14.49,0,24.51-5A46,46,0,0,0,1840.59,401a56.53,56.53,0,0,0,9.49-21.09,117.46,117.46,0,0,0,2.94-27.09V341.19h-.7q-7.59,16.46-23,24.18a71.8,71.8,0,0,1-32.63,7.71q-20,0-34.86-7.2A72.88,72.88,0,0,1,1737,346.51a82.13,82.13,0,0,1-15-28.46,116.62,116.62,0,0,1-5-34.47,133.92,133.92,0,0,1,4.14-32.4A88.17,88.17,0,0,1,1735,221a75.49,75.49,0,0,1,25.55-22.29q15.87-8.75,39-8.75a66.21,66.21,0,0,1,31.07,7.38,52.13,52.13,0,0,1,22.09,22.11h.35V194.09h27.61V356.28Q1880.63,399.83,1860.61,421.43Zm-37.46-79.72a47.94,47.94,0,0,0,16.4-15.78,71.89,71.89,0,0,0,9.15-22.11,106.77,106.77,0,0,0,2.93-24.69,96.71,96.71,0,0,0-2.76-23,64,64,0,0,0-8.8-20.4,45.76,45.76,0,0,0-15.71-14.57q-9.66-5.49-23.47-5.49-14.16,0-24.17,5.32a46.77,46.77,0,0,0-16.4,14.23,60.14,60.14,0,0,0-9.32,20.57,99.69,99.69,0,0,0-2.93,24.35,120.63,120.63,0,0,0,2.42,24,67.5,67.5,0,0,0,8.28,21.77,46.37,46.37,0,0,0,15.54,15.78q9.66,6,24.16,6T1823.15,341.71Zm228,18.34q-20,15.09-50.41,15.09-21.4,0-37.11-6.86a73.16,73.16,0,0,1-26.41-19.2,81.52,81.52,0,0,1-16-29.49,141.12,141.12,0,0,1-6-37.38,106.1,106.1,0,0,1,6.21-37A88.56,88.56,0,0,1,1938.8,216a79.09,79.09,0,0,1,26.58-19.2A81.66,81.66,0,0,1,1999,190q23.82,0,39.53,9.78a78,78,0,0,1,25.2,24.86,98.18,98.18,0,0,1,13.12,32.91,140.6,140.6,0,0,1,2.93,34h-133.6a70,70,0,0,0,2.76,22.12,49.9,49.9,0,0,0,10,18.51A49.1,49.1,0,0,0,1976.6,345q10.7,4.82,25.2,4.8,18.65,0,30.55-8.57t15.71-26.06h29Q2071.18,345,2051.17,360.05Zm-7.08-113.84a50,50,0,0,0-10.7-16,53.1,53.1,0,0,0-56.62-10.63,47.48,47.48,0,0,0-15.71,10.81,51.69,51.69,0,0,0-10.35,15.94,60.18,60.18,0,0,0-4.49,19.37h102.53A59.47,59.47,0,0,0,2044.09,246.21ZM302.9,180a80.62,80.62,0,0,0,13.44-10.37c.8-.77,1.55-1.54,2.31-2.31a81.89,81.89,0,0,0,7.92-9.37,62.37,62.37,0,0,0,6.27-10.77,48.6,48.6,0,0,0,4.36-16.4c1.49-19.39-10-38.67-35.62-54.22L198.42,14,78.16,129.22l-78.29,75,108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.69,49.69,0,0,0-6.8-8.87,89.78,89.78,0,0,0,19.28,2.15H259a85.09,85.09,0,0,0,31-5.79A80.88,80.88,0,0,0,302.9,180Zm-100.59,59.8c-19.32,18.51-50.4,21.24-75.7,5.9l-75.13-45.6,67.44-64.65,76.42,46.39C222.88,198.57,221.36,221.6,202.31,239.84Zm8.94-82.21L140.6,114.74,205,53l69.37,42.11c25.94,15.73,29.31,37.05,10.55,55A60.71,60.71,0,0,1,211.25,157.63Zm29.86,190c-19.57,18.75-46.17,29.08-74.88,29.08a123.84,123.84,0,0,1-64.11-18.19L-.13,296.51v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.85,87.85,0,0,1,241.11,347.67Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,257.52V282.2l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.79A86.86,86.86,0,0,1,241.11,308.68Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,218.54v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.12,19.68-41.49v-1.82A87.14,87.14,0,0,1,241.11,269.7Zm83.69,25.74a94.16,94.16,0,0,1-60.19,25.86h0V348a81.6,81.6,0,0,0,51.73-22.37c14-13.38,21.15-28.11,21-42.64v-2.2A95.14,95.14,0,0,1,324.8,295.44Zm-83.69,91.21c-19.57,18.75-46.17,29.09-74.88,29.09a123.76,123.76,0,0,1-64.11-18.2L-.13,335.49v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.35,87.35,0,0,1,241.11,386.65Zm85.75-210.21c-.68.69-1.35,1.38-2.06,2.05a99.19,99.19,0,0,1-22.23,15.69,94.53,94.53,0,0,1-26.24,8.71,97.84,97.84,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a52.7,52.7,0,0,1,1.13,12V231h.05A84.48,84.48,0,0,0,290,225.47a80.83,80.83,0,0,0,26.38-16.82c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,62.85,62.85,0,0,0,6.29-10.78,48.5,48.5,0,0,0,4.32-16.44c.09-1.23.2-2.47.19-3.7v-2c-.72,1-1.48,2.06-2.26,3.09A98,98,0,0,1,326.86,176.44Zm0,77.92c-.68.7-1.3,1.41-2,2.1a94.09,94.09,0,0,1-60.19,25.85h0V309h0a81.65,81.65,0,0,0,51.73-22.37,73.51,73.51,0,0,0,16.48-22.49,48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A95.81,95.81,0,0,1,326.82,254.36Zm0-39c-.68.7-1.3,1.41-2,2.1a92.22,92.22,0,0,1-10.62,8.65,93.53,93.53,0,0,1-11.63,7,95.63,95.63,0,0,1-37.94,10.18h-.05l0,26.67h0a81.63,81.63,0,0,0,51.73-22.37c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,63.16,63.16,0,0,0,6.29-10.77,48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A98.19,98.19,0,0,1,326.82,215.38Z"})),it=(0,r.A)({svg:{width:"auto",height:28},path:{fill:"#7df3e1"}}),ot=()=>{const Ge=it();return React.createElement("svg",{className:Ge.svg,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 337.46 428.5"},React.createElement("path",{className:Ge.path,d:"M303,166.05a80.69,80.69,0,0,0,13.45-10.37c.79-.77,1.55-1.53,2.3-2.3a83.12,83.12,0,0,0,7.93-9.38A63.69,63.69,0,0,0,333,133.23a48.58,48.58,0,0,0,4.35-16.4c1.49-19.39-10-38.67-35.62-54.22L198.56,0,78.3,115.23,0,190.25l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.22,49.22,0,0,0-6.8-8.87A89.17,89.17,0,0,0,259,178.29h.15a85.08,85.08,0,0,0,31-5.79A80.88,80.88,0,0,0,303,166.05ZM202.45,225.86c-19.32,18.51-50.4,21.23-75.7,5.9L51.61,186.15l67.45-64.64,76.41,46.38C223,184.58,221.49,207.61,202.45,225.86Zm8.93-82.22-70.65-42.89L205.14,39,274.51,81.1c25.94,15.72,29.31,37,10.55,55A60.69,60.69,0,0,1,211.38,143.64Zm29.86,190c-19.57,18.75-46.17,29.09-74.88,29.09a123.73,123.73,0,0,1-64.1-18.2L0,282.52v24.67L108.6,373.1a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.27,87.27,0,0,1,241.24,333.68Zm0-39c-19.57,18.75-46.17,29.08-74.88,29.08a123.81,123.81,0,0,1-64.1-18.19L0,243.53v24.68l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.5v-1.78A87.27,87.27,0,0,1,241.24,294.7Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.81,123.81,0,0,1-64.1-18.19L0,204.55v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.82A86.09,86.09,0,0,1,241.24,255.71Zm83.7,25.74a94.15,94.15,0,0,1-60.2,25.86h0V334a81.6,81.6,0,0,0,51.74-22.37c14-13.38,21.14-28.11,21-42.64v-2.19A94.92,94.92,0,0,1,324.94,281.45Zm-83.7,91.21c-19.57,18.76-46.17,29.09-74.88,29.09a123.73,123.73,0,0,1-64.1-18.2L0,321.5v24.68l108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A86.29,86.29,0,0,1,241.24,372.66ZM327,162.45c-.68.69-1.35,1.38-2.05,2.06a94.37,94.37,0,0,1-10.64,8.65,91.35,91.35,0,0,1-11.6,7,94.53,94.53,0,0,1-26.24,8.71,97.69,97.69,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a53.27,53.27,0,0,1,1.14,12V217h.05a84.41,84.41,0,0,0,25.35-5.55,81,81,0,0,0,26.39-16.82c.8-.77,1.5-1.56,2.26-2.34a82.08,82.08,0,0,0,7.93-9.38A63.76,63.76,0,0,0,333,172.17a48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7V150q-1.08,1.54-2.25,3.09A96.73,96.73,0,0,1,327,162.45Zm0,77.92c-.69.7-1.31,1.41-2,2.1a94.2,94.2,0,0,1-60.2,25.86h0l0,26.67h0a81.6,81.6,0,0,0,51.74-22.37A73.51,73.51,0,0,0,333,250.13a48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.47.19-3.71v-2.19c-.74,1.07-1.46,2.15-2.27,3.21A95.68,95.68,0,0,1,327,240.37Zm0-39c-.69.7-1.31,1.41-2,2.1a93.18,93.18,0,0,1-10.63,8.65,91.63,91.63,0,0,1-11.63,7,95.47,95.47,0,0,1-37.94,10.18h0V256h0a81.65,81.65,0,0,0,51.74-22.37c.8-.77,1.5-1.56,2.26-2.34a82.08,82.08,0,0,0,7.93-9.38A63.76,63.76,0,0,0,333,211.15a48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.46,2.16-2.27,3.22A95.68,95.68,0,0,1,327,201.39Z"}))},pt=null,nt=null},6077:(wn,wt,e)=>{"use strict";e.d(wt,{c:()=>l});var o=e(11638);const l=(0,o.Il)({id:"catalog-index"})},78190:(wn,wt,e)=>{"use strict";e.d(wt,{O2:()=>ee,VA:()=>C,iU:()=>Le,k8:()=>R,lD:()=>Pe,yJ:()=>ze});var o=e(11638),l=e(48821),A=e(6077),B=e(14041),u=e(29835),r=e(23180),Y=e(91638),ye=e(92651),ce=e(65398),a=e.n(ce),fe=e(50308),le=e.n(fe),ie=e(45250),oe=e.n(ie);const ze=(0,o.i1)({id:"org",externalRoutes:{catalogIndex:A.c}}),Le=ze.provide((0,o.NC)({name:"EntityGroupProfileCard",component:{lazy:()=>e.e(8936).then(e.bind(e,56555)).then(p=>p.GroupProfileCard)}})),Pe=ze.provide((0,o.NC)({name:"EntityMembersListCard",component:{lazy:()=>e.e(8936).then(e.bind(e,56555)).then(p=>p.MembersListCard)}})),C=ze.provide((0,o.NC)({name:"EntityOwnershipCard",component:{lazy:()=>e.e(8936).then(e.bind(e,56555)).then(p=>p.OwnershipCard)}})),ee=ze.provide((0,o.NC)({name:"EntityUserProfileCard",component:{lazy:()=>e.e(8936).then(e.bind(e,56555)).then(p=>p.UserProfileCard)}})),R=p=>{const{singularTitle:w,pluralTitle:f,icon:E,filter:F}=p,re=(0,l.u)(l.t),se=(0,l.u)(ye.vp),_e=(0,o.Sf)(ye.sF),{value:Q}=(0,Y.default)(async()=>{const g=await re.getBackstageIdentity();return(await se.getEntities({filter:[{kind:"group","relations.hasMember":g.userEntityRef,...F!=null?F:{}}],fields:["metadata","kind"]})).items},[]);if(!(Q!=null&&Q.length))return null;if(Q.length===1){const g=Q[0];return B.createElement(r.uk,{text:w,to:_e((0,u.sM)(g)),icon:E})}return B.createElement(r.uk,{icon:E,text:f},B.createElement(r.O6,{title:f},Q==null?void 0:Q.map(function(H){return B.createElement(r.hl,{title:H.metadata.title||H.metadata.name,subtitle:H.metadata.namespace!==u.oQ?H.metadata.namespace:void 0,to:_e((0,u.sM)(H)),icon:E,key:(0,u.U2)(H)})})))}},50585:(wn,wt,e)=>{"use strict";e.d(wt,{$D:()=>w,OL:()=>ye,bh:()=>r,iP:()=>oe});var o=e(3399),l=e(10288),A=e.n(l),B=e(12106),u=e(46195),r=(f=>(f.DENY="DENY",f.ALLOW="ALLOW",f.CONDITIONAL="CONDITIONAL",f))(r||{});function Y(f,E){return f.name===E.name}function ye(f,E){return"resourceType"in f?!E||f.resourceType===E:!1}function ce(f){return f.attributes.action==="create"}function a(f){return f.attributes.action==="read"}function fe(f){return f.attributes.action==="update"}function le(f){return f.attributes.action==="delete"}function ie(f){return{authorize:async(E,F)=>await f.authorize(E,F),authorizeConditional(E,F){const re=E;return f.authorize(re,F)}}}function oe({name:f,attributes:E,resourceType:F}){return F?{type:"resource",name:f,attributes:E,resourceType:F}:{type:"basic",name:f,attributes:E}}var ze=Object.defineProperty,Le=(f,E,F)=>E in f?ze(f,E,{enumerable:!0,configurable:!0,writable:!0,value:F}):f[E]=F,Pe=(f,E,F)=>(Le(f,typeof E!="symbol"?E+"":E,F),F);const C=u.z.lazy(()=>u.z.object({rule:u.z.string(),resourceType:u.z.string(),params:u.z.record(u.z.any()).optional()}).or(u.z.object({anyOf:u.z.array(C).nonempty()})).or(u.z.object({allOf:u.z.array(C).nonempty()})).or(u.z.object({not:C}))),ee=u.z.object({result:u.z.literal(r.ALLOW).or(u.z.literal(r.DENY))}),R=u.z.union([u.z.object({result:u.z.literal(r.ALLOW).or(u.z.literal(r.DENY))}),u.z.object({result:u.z.literal(r.CONDITIONAL),pluginId:u.z.string(),resourceType:u.z.string(),conditions:C})]),p=(f,E)=>u.z.object({items:u.z.array(u.z.intersection(u.z.object({id:u.z.string()}),f)).refine(F=>F.length===E.size&&F.every(({id:re})=>E.has(re)),{message:"Items in response do not match request"})});class w{constructor(E){Pe(this,"enabled"),Pe(this,"discovery");var F;this.discovery=E.discovery,this.enabled=(F=E.config.getOptionalBoolean("permission.enabled"))!=null?F:!1}async authorize(E,F){return this.makeRequest(E,ee,F)}async authorizeConditional(E,F){return this.makeRequest(E,R,F)}async makeRequest(E,F,re){if(!this.enabled)return E.map(Oe=>({result:r.ALLOW}));const se={items:E.map(Oe=>({id:B.A(),...Oe}))},_e=await this.discovery.getBaseUrl("permission"),Q=await A()(`${_e}/authorize`,{method:"POST",body:JSON.stringify(se),headers:{...this.getAuthorizationHeader(re==null?void 0:re.token),"content-type":"application/json"}});if(!Q.ok)throw await o.o3.fromResponse(Q);const g=await Q.json(),G=p(F,new Set(se.items.map(({id:Oe})=>Oe))).parse(g).items.reduce((Oe,ue)=>(Oe[ue.id]=ue,Oe),{});return se.items.map(Oe=>G[Oe.id])}getAuthorizationHeader(E){return E?{Authorization:`Bearer ${E}`}:{}}}},17899:(wn,wt,e)=>{"use strict";e.d(wt,{JT:()=>ye,Tw:()=>a,ak:()=>Y,x9:()=>r});var o=e(14041),l=e(48821),A=e(11638),B=e(50585),u=e(68721);const r=(0,l.c)({id:"plugin.permission.api"});class Y{constructor(le,ie){this.permissionClient=le,this.identityApi=ie}static create(le){const{config:ie,discovery:oe,identity:ze}=le,Le=new B.$D({discovery:oe,config:ie});return new Y(Le,ze)}async authorize(le){return(await this.permissionClient.authorize([le],await this.identityApi.getCredentials()))[0]}}function ye(fe){const le=(0,l.u)(r),{data:ie,error:oe}=(0,u.Ay)(fe,async ze=>{if((0,B.OL)(ze.permission)&&!ze.resourceRef)return B.bh.DENY;const{result:Le}=await le.authorize(ze);return Le});return oe?{error:oe,loading:!1,allowed:!1}:ie===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:ie===B.bh.ALLOW}}const ce=fe=>{const{permission:le,resourceRef:ie,errorComponent:oe,...ze}=fe,Le=ye(isResourcePermission(le)?{permission:le,resourceRef:ie}:{permission:le}),Pe=useApp(),{NotFoundErrorPage:C}=Pe.getComponents();let ee=oe===void 0?React.createElement(C,null):oe;return Le.loading?ee=null:Le.allowed&&(ee=fe.element),React.createElement(Route,{...ze,element:ee})};function a(fe){const{permission:le,resourceRef:ie}=fe,oe=ye((0,B.OL)(le)?{permission:le,resourceRef:ie}:{permission:le}),ze=(0,A.nm)();if(oe.loading)return null;if(oe.allowed)return o.createElement(o.Fragment,null,fe.children);if(fe.errorPage)return o.createElement(o.Fragment,null,fe.errorPage);const{NotFoundErrorPage:Le}=ze.getComponents();return o.createElement(Le,null)}},10015:(wn,wt,e)=>{"use strict";e.d(wt,{c:()=>a});var o=e(29835),l="http://json-schema.org/draft-07/schema",A="TemplateV1beta3",B="A Template describes a scaffolding task for use with the Scaffolder. It describes the required parameters as well as a series of steps that will be taken to execute the scaffolding task.",u=[{apiVersion:"scaffolder.backstage.io/v1beta3",kind:"Template",metadata:{name:"react-ssr-template",title:"React SSR Template",description:"Next.js application skeleton for creating isomorphic web applications.",tags:["recommended","react"]},spec:{owner:"artist-relations-team",type:"website",parameters:{required:["name","description","repoUrl"],"backstage:permissions":{tags:["one","two"]},properties:{name:{title:"Name",type:"string",description:"Unique name of the component"},description:{title:"Description",type:"string",description:"Description of the component"},repoUrl:{title:"Pick a repository",type:"string","ui:field":"RepoUrlPicker"}}},steps:[{id:"fetch",name:"Fetch",action:"fetch:plain",parameters:{url:"./template"},"backstage:permissions":{tags:["one","two"]}},{id:"publish",name:"Publish to GitHub",action:"publish:github",parameters:{repoUrl:"${{ parameters.repoUrl }}"},if:"${{ parameters.repoUrl }}"}],output:{catalogInfoUrl:"${{ steps.publish.output.catalogInfoUrl }}"}}}],r=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["scaffolder.backstage.io/v1beta3"]},kind:{enum:["Template"]},spec:{type:"object",required:["type","steps"],properties:{type:{type:"string",description:"The type of component created by the template. The software catalog accepts any type value, but an organization should take great care to establish a proper taxonomy for these. Tools including Backstage itself may read this field and behave differently depending on its value. For example, a website type component may present tooling in the Backstage interface that is specific to just websites.",examples:["service","website","library"],minLength:1},owner:{type:"string",description:"The user (or group) owner of the template",minLength:1},parameters:{oneOf:[{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}},{type:"array",description:"A list of separate forms to collect parameters.",items:{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}}}]},presentation:{type:"object",description:"A way to redefine the labels for actionable buttons.",properties:{backButtonText:{type:"string",description:"A button which return the user to one step back."},createButtonText:{type:"string",description:"A button which start the execution of the template."},reviewButtonText:{type:"string",description:"A button which open the review step to verify the input prior to start the execution."}}},EXPERIMENTAL_recovery:{type:"object",description:"A task recovery section.",properties:{EXPERIMENTAL_strategy:{type:"string",description:"Recovery strategy for your task (none or startOver). By default none"}}},steps:{type:"array",description:"A list of steps to execute.",items:{type:"object",description:"A description of the step to execute.",required:["action"],properties:{id:{type:"string",description:"The ID of the step, which can be used to refer to its outputs."},name:{type:"string",description:"The name of the step, which will be displayed in the UI during the scaffolding process."},action:{type:"string",description:"The name of the action to execute."},input:{type:"object",description:"A templated object describing the inputs to the action."},if:{type:["string","boolean"],description:'A templated condition that skips the step when evaluated to false. If the condition is true or not defined, the step is executed. The condition is true, if the input is not `false`, `undefined`, `null`, `""`, `0`, or `[]`.'},"backstage:permissions":{type:"object",description:"Object used for authorizing the step",properties:{tags:{type:"array",items:{type:"string"}}}}}}},output:{type:"object",description:"A templated object describing the outputs of the scaffolding task.",properties:{links:{type:"array",description:"A list of external hyperlinks, typically pointing to resources created or updated by the template",items:{type:"object",required:[],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://github.com/my-org/my-new-repo"],minLength:1},entityRef:{type:"string",description:"An entity reference to an entity in the catalog.",examples:["Component:default/my-app"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["View new repo"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1}}}},text:{type:"array",description:"A list of Markdown text blobs, like output data from the template.",items:{type:"object",required:[],properties:{title:{type:"string",description:"A user friendly display name for the text.",examples:["Output Content"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},content:{type:"string",description:"The text blob to display in the UI, rendered as Markdown.",examples:["**hey** _I'm_ Markdown"]}}}}},additionalProperties:{type:"string"}}}}}}],Y={$schema:l,$id:A,description:B,examples:u,allOf:r};const ye=(0,o.zu)(Y),ce={async check(fe){return ye(fe)===fe}},a=fe=>fe.apiVersion==="scaffolder.backstage.io/v1beta3"&&fe.kind==="Template"},97093:(wn,wt,e)=>{"use strict";e.d(wt,{C1:()=>x,KE:()=>ct,KV:()=>_n,RO:()=>Dn,Wu:()=>Ke,gZ:()=>Nn,g_:()=>yt,hJ:()=>ve,he:()=>Jt,lN:()=>be,lV:()=>m});var o=e(48821),l=e(11638),A=e(58837),B=e(95061),u=e(72501),r=e(99703),Y=e(4321),ye=e(58007),ce=e(8109),a=e(46423),fe=e(5951),le=e(88951),ie=e(78733),oe=e(21619),ze=e(37877),Le=e(64947),Pe=e(54917),C=e(40703),ee=e(48653),R=e(42899),p=e(77125),w=e(37197),f=e(67720),E=e(59469),F=e(78467),re=e(54819),se=e(86901),_e=e(69076),Q=e(16249),g=e(14041),H=e(42378),G=e(72937),Oe=e(23180),ue=e(94403),it=e(45810),ot=e.n(it),pt=e(91638),nt=e(56362),Ge=e(46108),De=e.n(Ge),Ae=e(43157),Ne=e(9651),ne=e(94384),N=e(7147),X=e(29835),Ue=e(92651),te=e(58054),we=e(23127),ht=e(10015),Wt=e(86613),bt=e(4832),It=e(51767),O=e(25711),S=e(53373),K=e.n(S),ae=e(7707),We=e(9181),qe=e(39221),gt=e(52950),_t=e(4794),st=e.n(_t),Zt=e(76842),at=e(56005),mt=e.n(at),Qe=e(44148),Lt=e(41260),St=e(6924),en=e(20577),xt=e(29365),pe=e(26343),Fe=e(28233),Mt=e(55197),Xt=e(25534),Bt=e(75625),jt=e(20353),Ln=e(71407);function pn(he){return typeof he=="object"&&he!==null&&!Array.isArray(he)}function cn(he,Ve){if(!pn(he))return;const{properties:Be,items:At,anyOf:Pt,oneOf:tn,allOf:Ct,dependencies:Ft,then:gn,else:Cn}=he;for(const an in he)he.hasOwnProperty(an)&&an.startsWith("ui:")&&(Ve[an]=he[an],delete he[an]);if(pn(Be))for(const an in Be){if(!Be.hasOwnProperty(an))continue;const fn=Be[an];if(pn(fn)){if(!pn(Ve[an])){const Wn={};Ve[an]=Wn}cn(fn,Ve[an])}}if(pn(At)){const an={};Ve.items=an,cn(At,an)}if(Array.isArray(Pt))for(const an of Pt)pn(an)&&cn(an,Ve);if(Array.isArray(tn))for(const an of tn)pn(an)&&cn(an,Ve);if(Array.isArray(Ct))for(const an of Ct)pn(an)&&cn(an,Ve);if(pn(Ft))for(const an of Object.keys(Ft)){const fn=Ft[an];pn(fn)&&cn(fn,Ve)}pn(gn)&&cn(gn,Ve),pn(Cn)&&cn(Cn,Ve)}const En=he=>{const Ve={},Be=(0,G.qg)((0,G.As)(he));return cn(Be,Ve),{uiSchema:Ve,schema:Be}},lt=()=>{const he={__errors:[],addError:Ve=>{var Be;(Be=he.__errors)==null||Be.push(Ve)}};return he};function Ot(he){return!!he&&"__errors"in he}function Vt(he){var Ve;if(!he)return!1;for(const Be of Object.values(he)){if(Ot(Be)){if(((Ve=Be.__errors)!=null?Ve:[]).length>0)return!0;continue}if(Vt(Be))return!0}return!1}function Dt(he){return typeof he=="object"&&he!==null&&!Array.isArray(he)}const ct=(he,Ve,Be)=>{async function At(Pt,tn="#",Ct=Pt){var Ft,gn;const Cn=new H.t0(he),an={},fn=async(Wn,jn,ea,kn,Fn)=>{const ra=Ve[Wn];if(ra){const la=lt();try{await ra(ea,la,{...Be,formData:Pt,schema:kn,uiSchema:Fn})}catch(Aa){la.addError(Aa.message)}an[jn]=la}};for(const[Wn,jn]of Object.entries(Ct)){const ea=`${tn}/${Wn}`,kn=Cn.getSchema(ea,Pt),{schema:Fn,uiSchema:ra}=En(kn),la=kn&&kn.items,Aa=async(Oa,ia,Da)=>{await fn(Oa["ui:field"],Wn,jn,ia,Da)},ya=async Oa=>{if("ui:field"in Oa){const{schema:ia,uiSchema:Da}=En(kn.items);await Aa(Oa,ia,Da)}};if(kn&&"ui:field"in kn)await Aa(kn,Fn,ra);else if(la&&"ui:field"in kn.items)await ya(kn.items);else if(la&&kn.items.type==="object"){const Oa=(gn=(Ft=kn.items)==null?void 0:Ft.properties)!=null?gn:[];for(const[,ia]of Object.entries(Oa))await ya(ia)}else Dt(jn)&&(an[Wn]=await At(Pt,ea,jn))}return an}return async Pt=>await At(Pt)},je=he=>{const Ve=Object.fromEntries(Object.entries(he.formState).map(([Be,At])=>{var Pt;for(const tn of he.schemas){const Ft=new H.t0(tn.mergedSchema).getSchema(`#/${Be}`,he.formState);if(Ft){const gn=(Pt=Ft["ui:backstage"])==null?void 0:Pt.review;if(gn){if(gn.mask)return[Be,gn.mask];if(gn.show===!1)return[]}if(Ft["ui:widget"]==="password")return[Be,"******"];if(Ft.enum&&Ft.enumNames)return[Be,Ft.enumNames[Ft.enum.indexOf(At)]||At]}}return[Be,At]}).filter(Be=>Be.length>0));return g.createElement(Oe.tA,{metadata:Ve})},Yt=he=>{const Ve=(0,o.u)(o.f),At=he.steps.map(({title:Pt,description:tn,schema:Ct})=>({title:Pt,description:tn,mergedSchema:Ct,...En(Ct)})).filter(Pt=>{var tn;const Ct=(tn=Pt.uiSchema["ui:backstage"])==null?void 0:tn.featureFlag;return Ct?Ve.isActive(Ct):!0}).map(Pt=>{var tn,Ct,Ft,gn;const Cn={...Pt,schema:{...Pt.schema,title:void 0}};return((tn=Pt.schema)!=null&&tn.properties||!((Ct=Pt.schema)!=null&&Ct.dependencies))&&(Cn.schema.properties=Object.fromEntries(Object.entries((gn=(Ft=Pt.schema)==null?void 0:Ft.properties)!=null?gn:{}).filter(([an])=>{var fn,Wn;const jn=(Wn=(fn=Pt.uiSchema[an])==null?void 0:fn["ui:backstage"])==null?void 0:Wn.featureFlag;return jn?Ve.isActive(jn):!0}))),Cn});return{presentation:he.presentation,steps:At}},Gt=he=>(0,g.useState)(()=>{if(he)return he;const Ve=ot().parse(window.location.search,{ignoreQueryPrefix:!0});try{return JSON.parse(Ve.formData)}catch{return{}}}),sn=he=>{const Ve=(0,o.u)(nt.s),{value:Be,loading:At,error:Pt}=(0,pt.default)(()=>Ve.getTemplateParameterSchema(he),[Ve,he]);return{manifest:Be,loading:At,error:Pt}},bn=he=>{const Ve="backstage:featureFlag",Be=(0,o.u)(o.f);if(!he)return;const At=he==null?void 0:he.steps.filter(Pt=>{const tn=Pt.schema[Ve];return typeof tn!="string"||Be.isActive(tn)}).map(Pt=>{var tn;const Ct=De()(Pt),Ft=[];return Ct.schema.properties&&(Ct.schema.properties=Object.fromEntries(Object.entries(Ct.schema.properties).filter(([gn,Cn])=>Cn[Ve]?Be.isActive(Cn[Ve])?!0:(Ft.push(gn),!1):!0)),Ct.schema.required=Array.isArray(Ct.schema.required)?(tn=Ct.schema.required)==null?void 0:tn.filter(gn=>!Ft.includes(gn)):Ct.schema.required),Ct});return{...he,steps:At}},In=(he,Ve={})=>{var Be;const{layouts:At=[]}=Ve,Pt=he==null?void 0:he.uiSchema["ui:ObjectFieldTemplate"];if(typeof Pt!="string")return he;const tn=(Be=At.find(Ct=>Ct.name===Pt))==null?void 0:Be.component;return tn?{...he,uiSchema:{...he.uiSchema,"ui:ObjectFieldTemplate":tn}}:he};var qn=Object.freeze({__proto__:null,DescriptionField:({description:he})=>he&&g.createElement(Oe.h2,{content:he,linkTarget:"_blank"})});const Gn=(0,A.A)(he=>({markdownDescription:{fontSize:he.typography.caption.fontSize,margin:0,color:he.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),Nn=he=>{const{children:Ve,displayLabel:Be=!0,rawErrors:At=[],errors:Pt,help:tn,rawDescription:Ct,required:Ft,disabled:gn}=he,Cn=Gn();return g.createElement(B.A,{fullWidth:!0,error:!!At.length,required:Ft,disabled:gn},Ve,Be&&Ct?g.createElement(Oe.h2,{content:Ct,className:Cn.markdownDescription}):null,Pt,tn)},On=he=>{const{id:Ve,children:Be,classNames:At,style:Pt,disabled:tn,displayLabel:Ct,hidden:Ft,label:gn,onDropPropertyClick:Cn,onKeyChange:an,readonly:fn,required:Wn,rawErrors:jn=[],errors:ea,help:kn,rawDescription:Fn,schema:ra,uiSchema:la,registry:Aa}=he,ya=(0,Ne.$R)(la),Oa=(0,Ne.$F)("WrapIfAdditionalTemplate",Aa,ya);return Ft?g.createElement("div",{style:{display:"none"}},Be):g.createElement(Oa,{classNames:At,style:Pt,disabled:tn,id:Ve,label:gn,onDropPropertyClick:Cn,onKeyChange:an,readonly:fn,required:Wn,schema:ra,uiSchema:la,registry:Aa},g.createElement(Nn,{displayLabel:Ct,rawErrors:jn,help:kn,disabled:tn,rawDescription:Fn,errors:ea,required:Wn},Be))},Jn=(0,A.A)(he=>({markdownDescription:{fontSize:he.typography.caption.fontSize,margin:0,color:he.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),aa=he=>{const{id:Ve,description:Be}=he,At=Jn();return Be?typeof Be=="string"?g.createElement(Oe.h2,{content:Be,className:At.markdownDescription}):g.createElement(u.A,{id:Ve,variant:"subtitle2",style:{marginTop:"5px"}},Be):null},ft=(0,Ae.SL)(ne.Sx),m=he=>{const Ve=g.useMemo(()=>{var At;return Object.fromEntries(Object.entries((At=he.fields)!=null?At:{}).map(([Pt,tn])=>[Pt,Ct=>{var Ft,gn;return g.createElement(tn,{...Ct,uiSchema:(Ft=Ct.uiSchema)!=null?Ft:{},formData:Ct.formData,rawErrors:(gn=Ct.rawErrors)!=null?gn:[]})}]))},[he.fields]),Be=g.useMemo(()=>({FieldTemplate:On,DescriptionFieldTemplate:aa,...he.templates}),[he.templates]);return g.createElement(ft,{...he,templates:Be,fields:Ve})},D=(0,A.A)(he=>(0,r.A)({list:{width:"100%"},text:{textWrap:"wrap"}})),j=({errors:he})=>{const Ve=D();return g.createElement(Y.A,null,g.createElement(ye.A,{dense:!0,className:Ve.list},he.map((Be,At)=>g.createElement(ce.A,{key:At},g.createElement(a.A,null,g.createElement(N.A,{color:"error"})),g.createElement(fe.A,{classes:{primary:Ve.text},primary:Be.stack})))))},de=(0,A.A)(he=>({backButton:{marginRight:he.spacing(1)},footer:{display:"flex",flexDirection:"row",justifyContent:"right",marginTop:he.spacing(2)},formWrapper:{padding:he.spacing(2)}})),x=he=>{var Ve,Be,At,Pt,tn,Ct,Ft;const{layouts:gn=[],components:Cn={},...an}=he,{ReviewStateComponent:fn=je,ReviewStepComponent:Wn,backButtonText:jn="Back",createButtonText:ea="Create",reviewButtonText:kn="Review"}=Cn,Fn=(0,l.st)(),{presentation:ra,steps:la}=Yt(an.manifest),Aa=(0,o.b)(),[ya,Oa]=(0,g.useState)(0),[ia,Da]=(0,g.useState)(!1),[Ua,$a]=Gt(an.initialState),[Qa,Na]=(0,g.useState)(),za=de(),pr=(0,g.useMemo)(()=>Object.fromEntries(an.extensions.map(({name:rt,component:un})=>[rt,un])),[an.extensions]),ja=(0,g.useMemo)(()=>({...qn,...pr}),[pr]),ar=(0,g.useMemo)(()=>Object.fromEntries(an.extensions.map(({name:rt,validation:un})=>[rt,un])),[an.extensions]),ma=(0,g.useMemo)(()=>{var rt;return ct((rt=la[ya])==null?void 0:rt.mergedSchema,ar,{apiHolder:Aa})},[la,ya,ar,Aa]),rr=()=>{Oa(rt=>rt-1)},Za=(0,g.useCallback)(rt=>$a(un=>({...un,...rt.formData})),[$a]),lr=(0,g.useCallback)(()=>{var rt;an.onCreate(Ua);const un=typeof Ua.name=="string"?Ua.name:void 0;Fn.captureEvent("create",(rt=un!=null?un:an.templateName)!=null?rt:"unknown")},[an,Ua,Fn]),La=In(la[ya],{layouts:gn}),qa=async({formData:rt={}})=>{Na(void 0),Da(!0);const un=await ma(rt);Da(!1),Vt(un)?Na(un):(Na(void 0),Oa(Un=>{const Zn=Un+1;return Fn.captureEvent("click",`Next Step (${Zn})`),Zn})),$a(Un=>({...Un,...rt}))},or=(Be=(Ve=ra==null?void 0:ra.buttonLabels)==null?void 0:Ve.backButtonText)!=null?Be:jn,et=(Pt=(At=ra==null?void 0:ra.buttonLabels)==null?void 0:At.createButtonText)!=null?Pt:ea,Ee=(Ct=(tn=ra==null?void 0:ra.buttonLabels)==null?void 0:tn.reviewButtonText)!=null?Ct:kn;return g.createElement(g.Fragment,null,ia&&g.createElement(le.A,{variant:"indeterminate"}),g.createElement(ie.A,{activeStep:ya,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},la.map((rt,un)=>{const Un=ya>un;return g.createElement(oe.A,{key:un},g.createElement(ze.A,{"aria-label":`Step ${un+1}`,style:{cursor:Un?"pointer":"default"},onClick:()=>{Un&&Oa(un)}},rt.title))}),g.createElement(oe.A,null,g.createElement(ze.A,null,"Review"))),g.createElement("div",{className:za.formWrapper},ya<la.length?g.createElement(m,{validator:ue.Ay,extraErrors:Qa,formData:Ua,formContext:{formData:Ua},schema:La.schema,uiSchema:La.uiSchema,onSubmit:qa,fields:ja,showErrorList:"top",templates:{ErrorListTemplate:j},onChange:Za,experimental_defaultFormStateBehavior:{allOf:"populateDefaults"},...(Ft=an.formProps)!=null?Ft:{}},g.createElement("div",{className:za.footer},g.createElement(Le.A,{onClick:rr,className:za.backButton,disabled:ya<1||ia},or),g.createElement(Le.A,{variant:"contained",color:"primary",type:"submit",disabled:ia},ya===la.length-1?Ee:"Next"))):Wn?g.createElement(Wn,{disableButtons:ia,formData:Ua,handleBack:rr,handleReset:()=>{},steps:la,handleCreate:lr}):g.createElement(g.Fragment,null,g.createElement(fn,{formState:Ua,schemas:la}),g.createElement("div",{className:za.footer},g.createElement(Le.A,{onClick:rr,className:za.backButton,disabled:ya<1},"Back"),g.createElement(Le.A,{variant:"contained",color:"primary",onClick:lr},et)))))},$=(0,A.A)(()=>({header:{backgroundImage:({cardBackgroundImage:he})=>he,color:({cardFontColor:he})=>he},subtitleWrapper:{display:"flex",justifyContent:"space-between"}})),q=he=>{const{template:{metadata:{title:Ve,name:Be},spec:{type:At}}}=he,{getPageTheme:Pt}=(0,Pe.A)(),tn=Pt({themeId:At}),Ct=$({cardFontColor:tn.fontColor,cardBackgroundImage:tn.backgroundImage}),Ft=g.createElement("div",{className:Ct.subtitleWrapper},g.createElement("div",null,At),g.createElement("div",null,g.createElement(Ue.uR,{entity:he.template,style:{padding:0}})));return g.createElement(Oe.f1,{title:Ve!=null?Ve:Be,subtitle:Ft,classes:{root:Ct.header}})},xe=(0,A.A)(()=>({linkText:{display:"inline-flex",alignItems:"center"}})),ke=({icon:he,text:Ve,url:Be})=>{const At=xe();return g.createElement("div",{className:At.linkText},g.createElement(he,{fontSize:"small"}),g.createElement(Oe.N_,{style:{marginLeft:"8px"},to:Be},Ve||Be))},vt=(0,A.A)(he=>({box:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":10,"-webkit-box-orient":"vertical"},markdown:{"& :first-child":{margin:0}},label:{color:he.palette.text.secondary,textTransform:"uppercase",fontWeight:"bold",letterSpacing:.5,lineHeight:1,fontSize:"0.75rem"},footer:{display:"flex",justifyContent:"space-between",flex:1,alignItems:"center"},ownedBy:{display:"flex",alignItems:"center",flex:1,color:he.palette.link}})),kt=he=>{var Ve,Be,At,Pt,tn,Ct,Ft;const{template:gn}=he,Cn=vt(),an=(0,te.g)(gn,X.vv),fn=(0,l.nm)(),Wn=Fn=>{var ra;return Fn&&(ra=fn.getSystemIcon(Fn))!=null?ra:we.A},jn=!!((Ve=gn.metadata.tags)!=null&&Ve.length),ea=!!((Be=he.additionalLinks)!=null&&Be.length)||!!((At=gn.metadata.links)!=null&&At.length),kn=!jn&&!ea;return g.createElement(C.A,null,g.createElement(q,{template:gn}),g.createElement(ee.A,null,g.createElement(R.A,{container:!0,spacing:2},g.createElement(R.A,{item:!0,xs:12},g.createElement(p.A,{className:Cn.box},g.createElement(Oe.h2,{className:Cn.markdown,content:(Pt=gn.metadata.description)!=null?Pt:"No description"}))),kn&&g.createElement(R.A,{item:!0,xs:12},g.createElement(w.A,{"data-testid":"template-card-separator"})),jn&&g.createElement(g.Fragment,null,g.createElement(R.A,{item:!0,xs:12},g.createElement(w.A,{"data-testid":"template-card-separator--tags"})),g.createElement(R.A,{item:!0,xs:12},g.createElement(R.A,{container:!0,spacing:2},(tn=gn.metadata.tags)==null?void 0:tn.map(Fn=>g.createElement(R.A,{key:`grid-${Fn}`,item:!0},g.createElement(f.A,{style:{margin:0},size:"small",label:Fn,key:Fn})))))),ea&&g.createElement(g.Fragment,null,g.createElement(R.A,{item:!0,xs:12},g.createElement(w.A,{"data-testid":"template-card-separator--links"})),g.createElement(R.A,{item:!0,xs:12},g.createElement(R.A,{container:!0,spacing:2},(Ct=he.additionalLinks)==null?void 0:Ct.map(({icon:Fn,text:ra,url:la},Aa)=>g.createElement(R.A,{className:Cn.linkText,item:!0,xs:6,key:Aa},g.createElement(ke,{icon:Fn,text:ra,url:la}))),(Ft=gn.metadata.links)==null?void 0:Ft.map(({url:Fn,icon:ra,title:la},Aa)=>g.createElement(R.A,{className:Cn.linkText,item:!0,xs:6,key:Aa},g.createElement(ke,{icon:Wn(ra),text:la||Fn,url:Fn})))))))),g.createElement(E.A,{style:{padding:"16px",flex:1,alignItems:"flex-end"}},g.createElement("div",{className:Cn.footer},g.createElement("div",{className:Cn.ownedBy},an.length>0&&g.createElement(g.Fragment,null,g.createElement(Oe.ny,{fontSize:"small"}),g.createElement(Ue.iI,{style:{marginLeft:"8px"},entityRefs:an,defaultKind:"Group",hideIcons:!0}))),g.createElement(Le.A,{size:"small",variant:"outlined",color:"primary",onClick:()=>{var Fn;return(Fn=he.onSelected)==null?void 0:Fn.call(he,gn)}},"Choose"))))},V=he=>{const{templates:Ve,title:Be,components:{CardComponent:At}={},onSelected:Pt}=he,tn=typeof Be=="string"?g.createElement(Oe.dv,{title:Be}):Be;if(Ve.length===0)return null;const Ct=At||kt;return g.createElement(Oe.UC,null,tn,g.createElement(Oe.s3,null,Ve.map(({template:Ft,additionalLinks:gn})=>g.createElement(Ct,{key:(0,X.U2)(Ft),additionalLinks:gn,template:Ft,onSelected:Pt}))))},ve=he=>{const{loading:Ve,error:Be,entities:At}=(0,Ue.nK)(),{groups:Pt,templateFilter:tn,TemplateCardComponent:Ct,onTemplateSelected:Ft}=he,gn=(0,o.u)(o.r),Cn=(0,g.useCallback)(an=>{Ft==null||Ft(an)},[Ft]);return Ve?g.createElement(Oe.ke,null):Be?(gn.post(Be),null):!At||!At.length?g.createElement(u.A,{variant:"body2"},"No templates found that match your filter. Learn more about"," ",g.createElement(Oe.N_,{to:"https://backstage.io/docs/features/software-templates/adding-templates"},"adding templates"),"."):g.createElement(g.Fragment,null,Pt.map(({title:an,filter:fn},Wn)=>{const jn=At.filter(ht.c).filter(ea=>tn?tn(ea):!0).filter(fn).map(ea=>{var kn,Fn;const ra=(Fn=(kn=he.additionalLinksForEntity)==null?void 0:kn.call(he,ea))!=null?Fn:[];return{template:ea,additionalLinks:ra}});return g.createElement(V,{key:Wn,templates:jn,title:an,components:{CardComponent:Ct},onSelected:Cn})}))},$e=(0,A.A)({markdown:{"& :first-child":{marginTop:0},"& :last-child":{marginBottom:0}}}),Ke=he=>{var Ve;const{title:Be,description:At,namespace:Pt,templateName:tn,...Ct}=he,Ft=$e(),gn=(0,X.U2)({kind:"Template",namespace:Pt,name:tn}),Cn=(0,o.u)(o.r),{loading:an,manifest:fn,error:Wn}=sn(gn),jn=bn(fn);return(0,g.useEffect)(()=>{Wn&&Cn.post(new Error(`Failed to load template, ${Wn}`))},[Wn,Cn]),Wn?Ct.onError(Wn):g.createElement(Oe.UC,null,an&&g.createElement(Oe.ke,null),jn&&g.createElement(Oe.nO,{title:Be!=null?Be:jn.title,subheader:g.createElement(Oe.h2,{className:Ft.markdown,content:(Ve=At!=null?At:jn.description)!=null?Ve:"No description"}),noPadding:!0,titleTypographyProps:{component:"h2"}},g.createElement(x,{manifest:jn,templateName:tn,...Ct})))},Je=he=>React.createElement(SecretsContextProvider,null,React.createElement(Ke,{...he})),Ut=(0,A.A)({root:{"&:hover":{textDecoration:"none"}}}),Rt=he=>{const{links:Ve=[]}=he.output,Be=Ut(),At=(0,l.nm)(),Pt=(0,l.Sf)(Ue.sF),tn=Ct=>{var Ft;return(Ft=At.getSystemIcon(Ct))!=null?Ft:Wt.A};return g.createElement(g.Fragment,null,Ve.filter(({url:Ct,entityRef:Ft})=>Ct||Ft).map(({url:Ct,entityRef:Ft,title:gn,icon:Cn})=>{if(Ft){const an=(0,X.KU)(Ft),fn=Pt(an);return{title:gn,icon:Cn,url:fn}}return{title:gn,icon:Cn,url:Ct}}).map(({url:Ct,title:Ft,icon:gn},Cn)=>{const an=tn(gn);return g.createElement(Oe.N_,{to:Ct,key:Cn,classes:{root:Be.root}},g.createElement(Le.A,{startIcon:g.createElement(an,null),component:"div",color:"primary"},Ft))}))},Nt=he=>{const{output:{text:Ve=[]},index:Be,setIndex:At}=he,Pt=(0,l.nm)(),tn=Ct=>{var Ft;return(Ft=Pt.getSystemIcon(Ct))!=null?Ft:bt.A};return g.createElement(g.Fragment,null,Ve.filter(({content:Ct})=>Ct!==void 0).map(({title:Ct,icon:Ft},gn)=>{const Cn=tn(Ft);return g.createElement(Le.A,{key:gn,startIcon:g.createElement(Cn,null),component:"div",color:"primary",onClick:()=>{Be!==gn&&(At==null||At(gn))},variant:Be===gn?"outlined":void 0},Ct)}))},_n=he=>{var Ve,Be;const{output:At}=he,[Pt,tn]=(0,g.useState)(void 0);(0,g.useEffect)(()=>{if(Pt===void 0&&(At!=null&&At.text)){const Ft=At.text.findIndex(gn=>gn.default);tn(Ft>=0?Ft:0)}},[Pt,At]);const Ct=(0,g.useMemo)(()=>{var Ft;return Pt!==void 0?(Ft=At==null?void 0:At.text)==null?void 0:Ft[Pt]:null},[At,Pt]);return At?g.createElement(g.Fragment,null,g.createElement(p.A,{paddingBottom:2},g.createElement(Y.A,null,g.createElement(p.A,{padding:2,justifyContent:"center",display:"flex",gridGap:16},g.createElement(Nt,{output:At,index:Pt,setIndex:tn}),g.createElement(Rt,{output:At})))),Ct?g.createElement(p.A,{paddingBottom:2},g.createElement(Oe.nO,{title:(Ve=Ct.title)!=null?Ve:"Text Output",noPadding:!0,titleTypographyProps:{component:"h2"}},g.createElement(p.A,{padding:2,height:"100%"},g.createElement(Oe.h2,{content:(Be=Ct.content)!=null?Be:""})))):null):null},An=(0,A.A)(he=>({root:{color:he.palette.text.disabled},completed:{color:he.palette.status.ok},error:{color:he.palette.status.error}})),mn=he=>{const Ve=An(),{active:Be,completed:At,error:Pt,skipped:tn}=he,Ct=()=>Be?g.createElement(F.A,{size:"20px"}):At?g.createElement(ae.A,null):Pt?g.createElement(We.A,null):tn?g.createElement(It.A,null):g.createElement(O.A,null);return g.createElement("div",{className:K()(Ve.root,{[Ve.completed]:At,[Ve.error]:Pt})},Ct())},ln=he=>{const[Ve,Be]=(0,g.useState)(""),{step:At}=he,Pt=()=>At.startedAt&&At.endedAt&&Ve?null:At.startedAt&&At.endedAt?1:1e3,tn=(0,g.useCallback)(()=>{if(!At.startedAt){Be("");return}const Ct=At.endedAt?gt.c9.fromISO(At.endedAt):gt.c9.local(),Ft=gt.c9.fromISO(At.startedAt),gn=gt.IX.fromDateTimes(Ft,Ct).toDuration().valueOf();Be(st()(gn,{round:!0}))},[At.endedAt,At.startedAt]);return(0,Zt.u)(tn),(0,qe.A)(tn,Pt()),g.createElement(u.A,{variant:"caption"},Ve)},M=(0,A.A)(he=>({failed:{backgroundColor:he.palette.error.main},success:{backgroundColor:he.palette.success.main}})),J=he=>{const Ve=M();return he.isComplete?g.createElement(le.A,{variant:"determinate",classes:{bar:he.isError?Ve.failed:Ve.success},value:100}):g.createElement(le.A,{variant:"indeterminate"})},be=he=>{var Ve,Be;return g.createElement(Y.A,{style:{position:"relative",overflow:"hidden"}},g.createElement(J,{isComplete:(Ve=he.isComplete)!=null?Ve:!1,isError:(Be=he.isError)!=null?Be:!1}),g.createElement(p.A,{padding:2},g.createElement(ie.A,{activeStep:he.activeStep,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},he.steps.map(At=>{const Pt=At.status==="completed",tn=At.status==="failed",Ct=At.status==="processing",Ft=At.status==="skipped",gn={completed:Pt,error:tn,active:Ct,skipped:Ft};return g.createElement(oe.A,{key:At.id},g.createElement(re.A,null,g.createElement(ze.A,{StepIconProps:gn,StepIconComponent:mn,"data-testid":"step-label"},g.createElement(p.A,null,At.name),!Ft&&g.createElement(ln,{step:At}))))}))))},Re=(0,A.A)({root:{width:"100%",height:"100%",position:"relative"}}),yt=he=>{const Ve=Re();return g.createElement("div",{className:Ve.root},g.createElement(Oe.rW,{text:Object.values(he.logs).map(Be=>Be.join(`
`)).filter(Boolean).join(`
`)}))},Tt=g.createElement(Lt.A,{fontSize:"small"}),Kt=g.createElement(Qe.A,{fontSize:"small"}),Jt=()=>{const he=(0,o.u)(o.l),{error:Ve,loading:Be,availableTypes:At,selectedTypes:Pt,setSelectedTypes:tn}=(0,Ue.jF)();return Be?g.createElement(Oe.ke,null):Ve?(he.post({message:`Failed to load entity types with error: ${Ve}`,severity:"error"}),null):At?g.createElement(p.A,{pb:1,pt:1},g.createElement(u.A,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),g.createElement(en.Ay,{multiple:!0,id:"categories-picker",options:At,value:Pt,onChange:(Ct,Ft)=>tn(Ft),renderOption:(Ct,{selected:Ft})=>g.createElement(se.A,{control:g.createElement(_e.A,{icon:Tt,checkedIcon:Kt,checked:Ft}),label:mt()(Ct)}),size:"small",popupIcon:g.createElement(St.A,null),renderInput:Ct=>g.createElement(Q.A,{...Ct,variant:"outlined"})})):null},hn=(0,A.A)(he=>({button:{color:he.page.fontColor}}));function Dn(he){const{onEditorClicked:Ve,onActionsClicked:Be,onTasksClicked:At,onCreateClicked:Pt}=he,tn=hn(),[Ct,Ft]=(0,g.useState)();if(!Ve&&!Be)return null;const gn=an=>{Ft(an.currentTarget)},Cn=()=>{Ft(void 0)};return g.createElement(g.Fragment,null,g.createElement(xt.A,{id:"long-menu","aria-label":"more","aria-controls":"long-menu","aria-expanded":!!Ct,"aria-haspopup":"true",role:"button",onClick:gn,"data-testid":"menu-button",color:"inherit",className:tn.button},g.createElement(Ln.A,null)),g.createElement(Mt.Ay,{"aria-labelledby":"long-menu",open:!!Ct,onClose:Cn,anchorEl:Ct,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},g.createElement(Fe.A,null,Pt&&g.createElement(pe.A,{onClick:Pt},g.createElement(a.A,null,g.createElement(Xt.A,{fontSize:"small"})),g.createElement(fe.A,{primary:"Create"})),Ve&&g.createElement(pe.A,{onClick:Ve},g.createElement(a.A,null,g.createElement(Bt.A,{fontSize:"small"})),g.createElement(fe.A,{primary:"Template Editor"})),Be&&g.createElement(pe.A,{onClick:Be},g.createElement(a.A,null,g.createElement(bt.A,{fontSize:"small"})),g.createElement(fe.A,{primary:"Installed Actions"})),At&&g.createElement(pe.A,{onClick:At},g.createElement(a.A,null,g.createElement(jt.A,{fontSize:"small"})),g.createElement(fe.A,{primary:"Task List"})))))}},56362:(wn,wt,e)=>{"use strict";e.d(wt,{S:()=>u,s:()=>Y,u:()=>r});var o=e(97388),l=e(14041),A=e(48821);const B=(0,o.tK)("secrets-context"),u=ye=>{const[ce,a]=(0,l.useState)({});return l.createElement(B.Provider,{value:(0,o.Bl)({1:{secrets:ce,setSecrets:a}})},ye.children)},r=()=>{var ye;const ce=(ye=(0,l.useContext)(B))==null?void 0:ye.atVersion(1);if(!ce)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:a,secrets:fe={}}=ce;return{setSecrets:(0,l.useCallback)(ie=>{a(oe=>({...oe,...ie}))},[a]),secrets:fe}},Y=(0,o.Q6)("scaffolder:scaffolder-api-ref",()=>(0,A.c)({id:"plugin.scaffolder.service"}))},77189:(wn,wt,e)=>{"use strict";e.d(wt,{TA:()=>ze,cw:()=>ie,l3:()=>a,zD:()=>ye});var o=e(11638),l=e(48821),A=e(56362),B=e(82806),u=e(14041);const r="scaffolder.extensions.wrapper.v1",Y="scaffolder.extensions.field.v1";function ye(C){return{expose(){const ee=()=>null;return(0,o.h3)(ee,Y,C),ee}}}const ce=()=>null;(0,o.h3)(ce,r,!0);const a=C=>(0,o.OJ)(C,ee=>ee.selectByComponentData({key:r}).findComponentData({key:Y})),fe="scaffolder.layout.v1",le="scaffolder.layouts.wrapper.v1",ie=C=>(0,o.OJ)(C,ee=>ee.selectByComponentData({key:le}).findComponentData({key:fe}));function oe(C,ee){var R,p,w;switch(ee.type){case"INIT":{C.steps=ee.data.spec.steps.reduce((f,E)=>(f[E.id]={status:"open",id:E.id},f),{}),C.stepLogs=ee.data.spec.steps.reduce((f,E)=>(f[E.id]=[],f),{}),C.loading=!1,C.error=void 0,C.completed=!1,C.task=ee.data;return}case"LOGS":{const f=ee.data;for(const E of f){const F=`${E.createdAt} ${E.body.message}`;if(!E.body.stepId||!((R=C.steps)!=null&&R[E.body.stepId]))continue;const re=(p=C.stepLogs)==null?void 0:p[E.body.stepId],se=(w=C.steps)==null?void 0:w[E.body.stepId];se&&E.body.status&&E.body.status!==se.status&&(se.status=E.body.status,se.status==="processing"&&(se.startedAt=E.createdAt),["cancelled","completed","failed"].includes(se.status)&&(se.endedAt=E.createdAt)),re==null||re.push(F)}return}case"COMPLETED":{C.completed=!0,C.output=ee.data.body.output,C.error=ee.data.body.error;return}case"CANCELLED":{C.cancelled=!0;return}case"RECOVERED":{for(const f in C.steps)C.steps.hasOwnProperty(f)&&(C.steps[f].startedAt=void 0,C.steps[f].endedAt=void 0,C.steps[f].status="open");return}case"ERROR":{C.error=ee.data,C.loading=!1,C.completed=!0;return}default:return}}const ze=C=>{const ee=(0,l.u)(A.s),[R,p]=(0,B.A)(oe,{cancelled:!1,loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,u.useEffect)(()=>{let w=!1,f,E,F=1;const re=()=>ee.getTask(C).then(se=>{if(w)return;p({type:"INIT",data:se});const _e=ee.streamLogs({taskId:C}),Q=new Array;function g(){if(Q.length){const H=Q.splice(0,Q.length);p({type:"LOGS",data:H})}}E=setInterval(g,500),f=_e.subscribe({next:H=>{switch(F=1,H.type){case"log":return Q.push(H);case"cancelled":p({type:"CANCELLED"});return;case"completion":g(),p({type:"COMPLETED",data:H});return;case"recovered":p({type:"RECOVERED",data:H});return;default:throw new Error(`Unhandled event type ${H.type} in observer`)}},error:H=>{g();const G=3;H.message||(H.message=`We cannot connect at the moment, trying again in some seconds... Retrying (${F>G?G:F}/${G} retries)`),setTimeout(()=>{F+=1,re()},15e3),p({type:"ERROR",data:H})}})},se=>{w||p({type:"ERROR",data:se})});return re(),()=>{w=!0,f&&f.unsubscribe(),E&&clearInterval(E)}},[ee,p,C]),R};function Le(C){return{expose(){const ee=()=>null;return attachComponentData(ee,fe,C),ee}}}const Pe=()=>null;(0,o.h3)(Pe,le,!0)},66504:(wn,wt,e)=>{"use strict";e.d(wt,{E:()=>bt,M:()=>Qe,O:()=>st,R:()=>Dt,a:()=>Wt,b:()=>qe,c:()=>We,d:()=>mt,e:()=>K,f:()=>Fe,g:()=>_t,h:()=>Gn,i:()=>qn,j:()=>Yt,k:()=>je,l:()=>In,m:()=>bn,n:()=>aa,r:()=>Mt,v:()=>Lt});var o=e(29835),l=e(14041),A=e(16249),B=e(77125),u=e(72501),r=e(37197),Y=e(95061),ye=e(58837),ce=e(54917),a=e(29365),fe=e(55197),le=e(28233),ie=e(26343),oe=e(46423),ze=e(5951),Le=e(4321),Pe=e(64947),C=e(46195),ee=e(75757),R=e(48821),p=e(11638),w=e(92651),f=e(20577),E=e(91638),F=e(33478),re=e(51253),se=e(63301),_e=e(48543),Q=e(23180),g=e(56362),H=e(77189),G=e(16983),Oe=e(97720),ue=e(63177),it=e(3399),ot=e(18690),pt=e(91943),nt=e(45810),Ge=e.n(nt),De=e(91042),Ae=e(92399),Ne=e(55534),ne=e(25283),N=e(86868),X=e(71407),Ue=e(97093);function te(ft,m){return{schema:{returnValue:(0,ue.Ay)(ft),uiOptions:m?(0,ue.Ay)(m):void 0},type:null,uiOptionsType:null}}const we=C.z.record(C.z.string().or(C.z.object({exists:C.z.boolean().optional()})).or(C.z.array(C.z.string()))),Wt=te(C.z.string(),C.z.object({allowedKinds:C.z.array(C.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:C.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:C.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:C.z.union([C.z.string(),C.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:C.z.array(we).or(we).optional().describe("List of key-value filter expression for entities")})).schema,bt=ft=>{var m,D,j,de,x;const{onChange:$,schema:{title:q="Entity",description:xe="An entity from the catalog"},required:ke,uiSchema:vt,rawErrors:kt,formData:V,idSchema:ve}=ft,$e=S(vt),Ke=(m=vt["ui:options"])==null?void 0:m.defaultKind,Je=((D=vt["ui:options"])==null?void 0:D.defaultNamespace)||void 0,Ut=(0,R.u)(w.vp),{value:Rt,loading:Nt}=(0,E.default)(async()=>{const M=["metadata.name","metadata.namespace","kind"],{items:J}=await Ut.getEntities($e?{filter:$e,fields:M}:{filter:void 0,fields:M});return J}),_n=(de=(j=vt["ui:options"])==null?void 0:j.allowArbitraryValues)!=null?de:!0,An=(0,l.useCallback)(M=>{try{return(0,w.SE)((0,o.KU)(M,{defaultKind:Ke,defaultNamespace:Je}),{defaultKind:Ke,defaultNamespace:Je})}catch{return M}},[Ke,Je]),mn=(0,l.useCallback)((M,J,be)=>{if(typeof J!="string")$(J?(0,o.U2)(J):void 0);else if(be==="blur"||be==="create-option"){let Re=J;try{Re=(0,o.U2)((0,o.KU)(J,{defaultKind:Ke,defaultNamespace:Je}))}catch{}(V!==J||_n)&&$(Re)}},[$,V,Ke,Je,_n]),ln=(x=Rt==null?void 0:Rt.find(M=>(0,o.U2)(M)===V))!=null?x:_n&&V?An(V):"";return(0,l.useEffect)(()=>{(Rt==null?void 0:Rt.length)===1&&ln===""&&$((0,o.U2)(Rt[0]))},[Rt,$,ln]),l.createElement(Y.A,{margin:"normal",required:ke,error:(kt==null?void 0:kt.length)>0&&!V},l.createElement(f.Ay,{disabled:(Rt==null?void 0:Rt.length)===1,id:ve==null?void 0:ve.$id,value:ln,loading:Nt,onChange:mn,options:Rt||[],getOptionLabel:M=>typeof M=="string"?M:(0,w.SE)(M,{defaultKind:Ke,defaultNamespace:Je}),autoSelect:!0,freeSolo:_n,renderInput:M=>l.createElement(A.A,{...M,label:q,margin:"dense",helperText:xe,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:ke,InputProps:M.InputProps})}))};function It(ft){return typeof ft=="object"&&ft.exists?ee.cr:ft==null?void 0:ft.toString()}function O(ft){const m={};for(const[D,j]of Object.entries(ft))Array.isArray(j)?m[D]=j:m[D]=It(j);return m}function S(ft){var m,D;const j=(m=ft["ui:options"])==null?void 0:m.allowedKinds,de=((D=ft["ui:options"])==null?void 0:D.catalogFilter)||j&&{kind:j};if(de)return Array.isArray(de)?de.map(O):O(de)}const K=(ft,m)=>{o.yz.isValidObjectName(ft)||m.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")},We=te(C.z.string()).schema,qe=ft=>{const{onChange:m,required:D,schema:{title:j="Name",description:de="Unique name of the component"},rawErrors:x,formData:$,uiSchema:{"ui:autofocus":q},idSchema:xe,placeholder:ke}=ft;return l.createElement(A.A,{id:xe==null?void 0:xe.$id,label:j,placeholder:ke,helperText:de,required:D,value:$!=null?$:"",onChange:({target:{value:vt}})=>m(vt),margin:"normal",error:(x==null?void 0:x.length)>0&&!$,inputProps:{autoFocus:q}})},_t=te(C.z.string(),C.z.object({allowedKinds:C.z.array(C.z.string()).default(["Group","User"]).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:C.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:C.z.union([C.z.string(),C.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:C.z.array(we).or(we).optional().describe("List of key-value filter expression for entities")})).schema,st=ft=>{var m,D,j,de,x;const{schema:{title:$="Owner",description:q="The owner of the component"},uiSchema:xe,...ke}=ft,vt=(m=xe["ui:options"])==null?void 0:m.defaultNamespace,kt=(D=xe["ui:options"])==null?void 0:D.allowedKinds,V=((j=xe["ui:options"])==null?void 0:j.catalogFilter)||{kind:kt||["Group","User"]},ve={...xe,"ui:options":{catalogFilter:V,defaultKind:"Group",allowArbitraryValues:(x=(de=xe["ui:options"])==null?void 0:de.allowArbitraryValues)!=null?x:!0,...vt!==void 0?{defaultNamespace:vt}:{}}};return l.createElement(bt,{...ke,schema:{title:$,description:q},uiSchema:ve})},Zt=C.z.record(C.z.string().or(C.z.object({exists:C.z.boolean().optional()})).or(C.z.array(C.z.string()))),mt=te(C.z.array(C.z.string()),C.z.object({defaultKind:C.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:C.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:C.z.union([C.z.string(),C.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:C.z.array(Zt).or(Zt).optional().describe("List of key-value filter expression for entities")})).schema,Qe=ft=>{var m,D,j,de,x;const{onChange:$,schema:{title:q="Entity",description:xe="An entity from the catalog"},required:ke,uiSchema:vt,rawErrors:kt,formData:V,idSchema:ve}=ft,$e=xt(vt),Ke=(m=vt["ui:options"])==null?void 0:m.defaultKind,Je=((D=vt["ui:options"])==null?void 0:D.defaultNamespace)||void 0,Ut=(0,R.u)(w.vp),{value:Rt,loading:Nt}=(0,E.default)(async()=>{const{items:ln}=await Ut.getEntities($e?{filter:$e}:void 0);return ln}),_n=(de=(j=vt["ui:options"])==null?void 0:j.allowArbitraryValues)!=null?de:!0,An=(0,l.useCallback)(ln=>{try{return(0,w.SE)((0,o.KU)(ln,{defaultKind:Ke,defaultNamespace:Je}),{defaultKind:Ke,defaultNamespace:Je})}catch{return ln}},[Ke,Je]),mn=(0,l.useCallback)((ln,M,J)=>{const be=M.map(Re=>{if(typeof Re!="string")return Re?(0,o.U2)(Re):void 0;if(J==="blur"||J==="create-option"){let yt=Re;try{yt=(0,o.U2)((0,o.KU)(Re,{defaultKind:Ke,defaultNamespace:Je}))}catch{}if(V.includes(Re)||_n)return yt}}).filter(Re=>Re!==void 0);$(be)},[$,V,Ke,Je,_n]);return(0,l.useEffect)(()=>{(Rt==null?void 0:Rt.length)===1&&$([(0,o.U2)(Rt[0])])},[Rt,$]),l.createElement(Y.A,{margin:"normal",required:ke,error:(kt==null?void 0:kt.length)>0&&!V},l.createElement(f.Ay,{multiple:!0,filterSelectedOptions:!0,disabled:(Rt==null?void 0:Rt.length)===1,id:ve==null?void 0:ve.$id,value:(x=Rt==null?void 0:Rt.filter(ln=>V&&V.includes((0,o.U2)(ln))))!=null?x:_n&&V?V.map(An):[],loading:Nt,onChange:mn,options:Rt||[],getOptionLabel:ln=>typeof ln=="string"?ln:(0,w.SE)(ln,{defaultKind:Ke,defaultNamespace:Je}),autoSelect:!0,freeSolo:_n,renderInput:ln=>l.createElement(A.A,{...ln,label:q,margin:"dense",helperText:xe,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:ke,InputProps:ln.InputProps})}))},Lt=(ft,m)=>{ft.forEach(D=>{try{(0,o.KU)(D)}catch{m.addError(`${D} is not a valid entity ref`)}})};function St(ft){return typeof ft=="object"&&ft.exists?ee.cr:ft==null?void 0:ft.toString()}function en(ft){const m={};for(const[D,j]of Object.entries(ft))Array.isArray(j)?m[D]=j:m[D]=St(j);return m}function xt(ft){var m;const D=(m=ft["ui:options"])==null?void 0:m.catalogFilter;if(D)return Array.isArray(D)?D.map(en):en(D)}const Fe=te(C.z.string(),C.z.object({allowedHosts:C.z.array(C.z.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:C.z.array(C.z.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:C.z.array(C.z.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:C.z.array(C.z.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:C.z.array(C.z.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:C.z.object({secretsKey:C.z.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:C.z.object({gitea:C.z.array(C.z.string()).optional().describe("Additional Gitea scopes to request"),gerrit:C.z.array(C.z.string()).optional().describe("Additional Gerrit scopes to request"),github:C.z.array(C.z.string()).optional().describe("Additional GitHub scopes to request"),gitlab:C.z.array(C.z.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:C.z.array(C.z.string()).optional().describe("Additional BitBucket scopes to request"),azure:C.z.array(C.z.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})).schema,Mt=(ft,m,D)=>{var j,de;try{const{host:x,searchParams:$}=new URL(`https://${ft}`),q=D.apiHolder.get(F.YT);x?(((j=q==null?void 0:q.byHost(x))==null?void 0:j.type)==="bitbucket"?(x==="bitbucket.org"&&!$.get("workspace")&&m.addError("Incomplete repository location provided, workspace not provided"),$.get("project")||m.addError("Incomplete repository location provided, project not provided")):((de=q==null?void 0:q.byHost(x))==null?void 0:de.type)!=="gerrit"&&($.get("owner")||m.addError("Incomplete repository location provided, owner not provided")),$.get("repo")||m.addError("Incomplete repository location provided, repo not provided")):m.addError("Incomplete repository location provided, host not provided")}catch{m.addError("Unable to parse the Repository URL")}},Xt=ft=>{const{allowedOwners:m=[],rawErrors:D,state:j,onChange:de}=ft,x=m?m.map(q=>({label:q,value:q})):[{label:"Loading...",value:"loading"}],{owner:$}=j;return l.createElement(l.Fragment,null,l.createElement(Y.A,{margin:"normal",required:!0,error:(D==null?void 0:D.length)>0&&!$},m!=null&&m.length?l.createElement(Q.l6,{native:!0,label:"Owner Available",onChange:q=>de({owner:String(Array.isArray(q)?q[0]:q)}),disabled:m.length===1,selected:$,items:x}):l.createElement(l.Fragment,null,l.createElement(_e.A,{htmlFor:"ownerInput"},"Owner"),l.createElement(se.A,{id:"ownerInput",onChange:q=>de({owner:q.target.value}),value:$})),l.createElement(re.A,null,"The organization, user or project that this repo will belong to")))},Bt=ft=>{const{allowedOwners:m=[],state:D,onChange:j,rawErrors:de}=ft,x=m?m.map(q=>({label:q,value:q})):[{label:"Loading...",value:"loading"}],{owner:$}=D;return l.createElement(l.Fragment,null,l.createElement(Y.A,{margin:"normal",required:!0,error:(de==null?void 0:de.length)>0&&!$},m!=null&&m.length?l.createElement(Q.l6,{native:!0,label:"Owner Available",onChange:q=>j({owner:String(Array.isArray(q)?q[0]:q)}),disabled:m.length===1,selected:$,items:x}):l.createElement(l.Fragment,null,l.createElement(_e.A,{htmlFor:"ownerInput"},"Owner"),l.createElement(se.A,{id:"ownerInput",onChange:q=>j({owner:q.target.value}),value:$})),l.createElement(re.A,null,"Gitea namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},jt=ft=>{const{allowedOwners:m=[],state:D,onChange:j,rawErrors:de}=ft,x=m?m.map(q=>({label:q,value:q})):[{label:"Loading...",value:"loading"}],{owner:$}=D;return l.createElement(l.Fragment,null,l.createElement(Y.A,{margin:"normal",required:!0,error:(de==null?void 0:de.length)>0&&!$},m!=null&&m.length?l.createElement(Q.l6,{native:!0,label:"Owner Available",onChange:q=>j({owner:String(Array.isArray(q)?q[0]:q)}),disabled:m.length===1,selected:$,items:x}):l.createElement(l.Fragment,null,l.createElement(_e.A,{htmlFor:"ownerInput"},"Owner"),l.createElement(se.A,{id:"ownerInput",onChange:q=>j({owner:q.target.value}),value:$})),l.createElement(re.A,null,"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},Ln=ft=>{const{allowedOrganizations:m=[],allowedOwners:D=[],rawErrors:j,state:de,onChange:x}=ft,$=m?m.map(vt=>({label:vt,value:vt})):[{label:"Loading...",value:"loading"}],q=D?D.map(vt=>({label:vt,value:vt})):[{label:"Loading...",value:"loading"}],{organization:xe,owner:ke}=de;return l.createElement(l.Fragment,null,l.createElement(Y.A,{margin:"normal",required:!0,error:(j==null?void 0:j.length)>0&&!xe},m!=null&&m.length?l.createElement(Q.l6,{native:!0,label:"Organization",onChange:vt=>x({organization:String(Array.isArray(vt)?vt[0]:vt)}),disabled:m.length===1,selected:xe,items:$}):l.createElement(l.Fragment,null,l.createElement(_e.A,{htmlFor:"orgInput"},"Organization"),l.createElement(se.A,{id:"orgInput",onChange:vt=>x({organization:vt.target.value}),value:xe})),l.createElement(re.A,null,"The Organization that this repo will belong to")),l.createElement(Y.A,{margin:"normal",required:!0,error:(j==null?void 0:j.length)>0&&!ke},D!=null&&D.length?l.createElement(Q.l6,{native:!0,label:"Owner",onChange:vt=>x({owner:String(Array.isArray(vt)?vt[0]:vt)}),disabled:D.length===1,selected:ke,items:q}):l.createElement(l.Fragment,null,l.createElement(_e.A,{htmlFor:"ownerInput"},"Project"),l.createElement(se.A,{id:"ownerInput",onChange:vt=>x({owner:vt.target.value}),value:ke})),l.createElement(re.A,null,"The Project that this repo will belong to")))},pn=ft=>{const{allowedOwners:m=[],allowedProjects:D=[],onChange:j,rawErrors:de,state:x}=ft,{host:$,workspace:q,project:xe}=x,ke=m?m==null?void 0:m.map(kt=>({label:kt,value:kt})):[],vt=D?D==null?void 0:D.map(kt=>({label:kt,value:kt})):[];return(0,l.useEffect)(()=>{$==="bitbucket.org"&&m.length&&j({workspace:m[0]})},[m,$,j]),l.createElement(l.Fragment,null,$==="bitbucket.org"&&l.createElement(Y.A,{margin:"normal",required:!0,error:(de==null?void 0:de.length)>0&&!q},m!=null&&m.length?l.createElement(Q.l6,{native:!0,label:"Allowed Workspaces",onChange:kt=>j({workspace:String(Array.isArray(kt)?kt[0]:kt)}),disabled:m.length===1,selected:q,items:ke}):l.createElement(l.Fragment,null,l.createElement(_e.A,{htmlFor:"workspaceInput"},"Workspace"),l.createElement(se.A,{id:"workspaceInput",onChange:kt=>j({workspace:kt.target.value}),value:q})),l.createElement(re.A,null,"The Workspace that this repo will belong to")),l.createElement(Y.A,{margin:"normal",required:!0,error:(de==null?void 0:de.length)>0&&!xe},D!=null&&D.length?l.createElement(Q.l6,{native:!0,label:"Allowed Projects",onChange:kt=>j({project:String(Array.isArray(kt)?kt[0]:kt)}),disabled:D.length===1,selected:xe,items:vt}):l.createElement(l.Fragment,null,l.createElement(_e.A,{htmlFor:"projectInput"},"Project"),l.createElement(se.A,{id:"projectInput",onChange:kt=>j({project:kt.target.value}),value:xe})),l.createElement(re.A,null,"The Project that this repo will belong to")))},cn=ft=>{const{onChange:m,rawErrors:D,state:j}=ft,{workspace:de,owner:x}=j;return l.createElement(l.Fragment,null,l.createElement(Y.A,{margin:"normal",error:(D==null?void 0:D.length)>0&&!de},l.createElement(_e.A,{htmlFor:"ownerInput"},"Owner"),l.createElement(se.A,{id:"ownerInput",onChange:$=>m({owner:$.target.value}),value:x}),l.createElement(re.A,null,"The owner of the project (optional)")),l.createElement(Y.A,{margin:"normal",required:!0,error:(D==null?void 0:D.length)>0&&!de},l.createElement(_e.A,{htmlFor:"parentInput"},"Parent"),l.createElement(se.A,{id:"parentInput",onChange:$=>m({workspace:$.target.value}),value:de}),l.createElement(re.A,null,"The project parent that the repo will belong to")))},En=ft=>{const{host:m,hosts:D,onChange:j,rawErrors:de}=ft,x=(0,R.u)(g.s),{value:{integrations:$}={integrations:[]},loading:q}=(0,E.default)(async()=>await x.getIntegrationsList({allowedHosts:D!=null?D:[]}));(0,l.useEffect)(()=>{m||(D!=null&&D.length?j(D[0]):$!=null&&$.length&&j($[0].host))},[D,m,j,$]);const xe=$?$.filter(ke=>D!=null&&D.length?D==null?void 0:D.includes(ke.host):!0).map(ke=>({label:ke.title,value:ke.host})):[{label:"Loading...",value:"loading"}];return q?l.createElement(Q.ke,null):l.createElement(l.Fragment,null,l.createElement(Y.A,{margin:"normal",required:!0,error:(de==null?void 0:de.length)>0&&!m},l.createElement(Q.l6,{native:!0,disabled:(D==null?void 0:D.length)===1,label:"Host",onChange:ke=>j(String(Array.isArray(ke)?ke[0]:ke)),selected:m,items:xe,"data-testid":"host-select"}),l.createElement(re.A,null,"The host where the repository will be created")))},lt=ft=>{const{repoName:m,allowedRepos:D,onChange:j,rawErrors:de}=ft;(0,l.useEffect)(()=>{m||D!=null&&D.length&&j(D[0])},[D,m,j]);const x=D?D.map($=>({label:$,value:$})):[{label:"Loading...",value:"loading"}];return l.createElement(l.Fragment,null,l.createElement(Y.A,{margin:"normal",required:!0,error:(de==null?void 0:de.length)>0&&!m},D!=null&&D.length?l.createElement(Q.l6,{native:!0,label:"Repositories Available",onChange:$=>j(String(Array.isArray($)?$[0]:$)),disabled:D.length===1,selected:m,items:x}):l.createElement(l.Fragment,null,l.createElement(_e.A,{htmlFor:"repoNameInput"},"Repository"),l.createElement(se.A,{id:"repoNameInput",onChange:$=>j(String($.target.value)),value:m})),l.createElement(re.A,null,"The name of the repository")))};function Ot(ft){if(!ft.host)return;const m=new URLSearchParams;return ft.owner&&m.set("owner",ft.owner),ft.repoName&&m.set("repo",ft.repoName),ft.organization&&m.set("organization",ft.organization),ft.workspace&&m.set("workspace",ft.workspace),ft.project&&m.set("project",ft.project),`${ft.host}?${m.toString()}`}function Vt(ft){let m="",D="",j="",de="",x="",$="";try{if(ft){const q=new URL(`https://${ft}`);m=q.host,D=q.searchParams.get("owner")||"",j=q.searchParams.get("repo")||"",de=q.searchParams.get("organization")||"",x=q.searchParams.get("workspace")||"",$=q.searchParams.get("project")||""}}catch{}return{host:m,owner:D,repoName:j,organization:de,workspace:x,project:$}}const Dt=ft=>{var m,D;const{uiSchema:j,onChange:de,rawErrors:x,formData:$,schema:q}=ft,[xe,ke]=(0,l.useState)(Vt($)),vt=(0,R.u)(F.YT),kt=(0,R.u)(F.$J),{setSecrets:V}=(0,g.u)(),ve=(0,l.useMemo)(()=>{var M,J;return(J=(M=j==null?void 0:j["ui:options"])==null?void 0:M.allowedHosts)!=null?J:[]},[j]),$e=(0,l.useMemo)(()=>{var M,J;return(J=(M=j==null?void 0:j["ui:options"])==null?void 0:M.allowedOrganizations)!=null?J:[]},[j]),Ke=(0,l.useMemo)(()=>{var M,J;return(J=(M=j==null?void 0:j["ui:options"])==null?void 0:M.allowedOwners)!=null?J:[]},[j]),Je=(0,l.useMemo)(()=>{var M,J;return(J=(M=j==null?void 0:j["ui:options"])==null?void 0:M.allowedProjects)!=null?J:[]},[j]),Ut=(0,l.useMemo)(()=>{var M,J;return(J=(M=j==null?void 0:j["ui:options"])==null?void 0:M.allowedRepos)!=null?J:[]},[j]),{owner:Rt,organization:Nt,project:_n,repoName:An}=xe;(0,l.useEffect)(()=>{de(Ot(xe))},[xe,de]),(0,l.useEffect)(()=>{$e.length>0&&!Nt&&ke(M=>({...M,organization:$e[0]}))},[ke,$e,Nt]),(0,l.useEffect)(()=>{Ke.length>0&&!Rt&&ke(M=>({...M,owner:Ke[0]}))},[ke,Ke,Rt]),(0,l.useEffect)(()=>{Je.length>0&&!_n&&ke(M=>({...M,project:Je[0]}))},[ke,Je,_n]),(0,l.useEffect)(()=>{Ut.length>0&&!An&&ke(M=>({...M,repoName:Ut[0]}))},[ke,Ut,An]);const mn=(0,l.useCallback)(M=>{ke(J=>({...J,...M}))},[ke]);(0,G.A)(async()=>{var M;const{requestUserCredentials:J}=(M=j==null?void 0:j["ui:options"])!=null?M:{},be=xe.owner?xe.owner:xe.project;if(!J||!(xe.host&&be&&xe.repoName))return;const[Re,yt]=[xe.host,xe.repoName].map(encodeURIComponent),{token:Tt}=await kt.getCredentials({url:`https://${Re}/${be}/${yt}`,additionalScope:{repoWrite:!0,customScopes:J.additionalScopes}});V({[J.secretsKey]:Tt})},500,[xe,j]);const ln=(D=xe.host&&((m=vt.byHost(xe.host))==null?void 0:m.type))!=null?D:null;return l.createElement(l.Fragment,null,q.title&&l.createElement(B.A,{my:1},l.createElement(u.A,{variant:"h5"},q.title),l.createElement(r.A,null)),q.description&&l.createElement(u.A,{variant:"body1"},q.description),l.createElement(En,{host:xe.host,hosts:ve,onChange:M=>ke(J=>({...J,host:M})),rawErrors:x}),ln==="github"&&l.createElement(Xt,{allowedOwners:Ke,onChange:mn,rawErrors:x,state:xe}),ln==="gitea"&&l.createElement(Bt,{allowedOwners:Ke,allowedRepos:Ut,rawErrors:x,state:xe,onChange:mn}),ln==="gitlab"&&l.createElement(jt,{allowedOwners:Ke,rawErrors:x,state:xe,onChange:mn}),ln==="bitbucket"&&l.createElement(pn,{allowedOwners:Ke,allowedProjects:Je,rawErrors:x,state:xe,onChange:mn}),ln==="azure"&&l.createElement(Ln,{allowedOrganizations:$e,allowedOwners:Ke,rawErrors:x,state:xe,onChange:mn}),ln==="gerrit"&&l.createElement(cn,{rawErrors:x,state:xe,onChange:mn}),l.createElement(lt,{repoName:xe.repoName,allowedRepos:Ut,onChange:M=>ke(J=>({...J,repoName:M})),rawErrors:x}))},je=te(C.z.string(),C.z.object({allowedKinds:C.z.array(C.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:C.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:C.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:C.z.union([C.z.string(),C.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:C.z.array(we).or(we).optional().describe("List of key-value filter expression for entities")})).schema,Yt=ft=>{const{schema:{title:m="Entity",description:D="An entity from the catalog"},uiSchema:j,required:de}=ft,x=(0,R.u)(R.t),{loading:$,value:q}=(0,E.default)(async()=>(await x.getBackstageIdentity()).ownershipEntityRefs);if($)return l.createElement(f.Ay,{loading:$,renderInput:ke=>l.createElement(A.A,{...ke,label:m,margin:"dense",helperText:D,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:de,InputProps:ke.InputProps}),options:[]});const xe=Gt(j,q);return l.createElement(bt,{...ft,uiSchema:xe})};function Gt(ft,m){const D=(ft==null?void 0:ft["ui:options"])||{},j=D.allowedKinds;return{"ui:options":{catalogFilter:{...D.catalogFilter,...j?{kind:j,[`relations.${o.vv}`]:m||[]}:{[`relations.${o.vv}`]:m||[]}}}}}const bn=te(C.z.array(C.z.string()),C.z.object({kinds:C.z.array(C.z.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:C.z.boolean().optional().describe("Whether to show usage counts per tag"),helperText:C.z.string().optional().describe("Helper text to display")})).schema,In=ft=>{var m,D,j;const{formData:de,onChange:x,uiSchema:$}=ft,q=(0,R.u)(w.vp),[xe,ke]=(0,l.useState)([]),[vt,kt]=(0,l.useState)(""),[V,ve]=(0,l.useState)(!1),$e=(0,o.tj)().isValidTag,Ke=(m=$["ui:options"])==null?void 0:m.kinds,Je=(D=$["ui:options"])==null?void 0:D.showCounts,Ut=(j=$["ui:options"])==null?void 0:j.helperText,{loading:Rt,value:Nt}=(0,E.default)(async()=>{const An="metadata.tags",mn={facets:[An]};Ke&&(mn.filter={kind:Ke});const{facets:ln}=await q.getEntityFacets(mn),M=Object.fromEntries(ln[An].map(({value:J,count:be})=>[J,be]));return ke(Object.keys(M).sort((J,be)=>Je?M[be]-M[J]:J.localeCompare(be))),M}),_n=(An,mn)=>{let ln=!1,M=!1;const J=de||[];if(mn!=null&&mn.length&&J.length<mn.length){const be=mn[mn.length-1]=mn[mn.length-1].toLocaleLowerCase("en-US").trim();ln=!$e(be),M=J.indexOf(be)!==-1}ve(ln),kt(ln?vt:""),!ln&&!M&&x(mn||[])};return(0,Oe.A)(()=>x(de||[])),l.createElement(Y.A,{margin:"normal"},l.createElement(f.Ay,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:_n,value:de||[],inputValue:vt,loading:Rt,options:xe,ChipProps:{size:"small"},renderOption:An=>Je?`${An} (${Nt==null?void 0:Nt[An]})`:An,renderInput:An=>l.createElement(A.A,{...An,label:"Tags",onChange:mn=>kt(mn.target.value),error:V,helperText:Ut!=null?Ut:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))},qn=te(C.z.string(),C.z.object({title:C.z.string().default("Group").describe("Group"),description:C.z.string().default("A group you are part of").describe("The group to which the entity belongs")})).schema,Gn=ft=>{const{schema:{title:m,description:D},required:j,rawErrors:de,onChange:x}=ft,$=(0,R.u)(R.t),q=(0,R.u)(w.vp),xe=(0,R.u)(R.r),[ke,vt]=(0,l.useState)([]),[kt,V]=(0,l.useState)(null);(0,E.default)(async()=>{const{userEntityRef:$e}=await $.getBackstageIdentity();if(!$e){xe.post(new it.m_("No user entity ref found"));return}const{items:Ke}=await q.getEntities({filter:{kind:"Group","relations.hasMember":[$e]}}),Je=Ke.filter(Ut=>!!Ut).map(Ut=>{var Rt;return{label:(Rt=Ut.metadata.title)!=null?Rt:Ut.metadata.name,ref:(0,o.U2)(Ut)}});vt(Je)});const ve=($e,Ke)=>{var Je;V(Ke),x((Je=Ke==null?void 0:Ke.ref)!=null?Je:"")};return l.createElement(Y.A,{margin:"normal",required:j,error:(de==null?void 0:de.length)>0},l.createElement(f.Ay,{id:"OwnershipEntityRefPicker-dropdown",options:ke||[],value:kt,onChange:ve,getOptionLabel:$e=>$e.label,renderInput:$e=>l.createElement(A.A,{...$e,label:m,margin:"dense",helperText:D,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:j})}))},Nn=(0,ye.A)(()=>({button:{color:({fontColor:ft})=>ft}})),On=ft=>{const{cancelEnabled:m,logsVisible:D,buttonBarVisible:j,onStartOver:de,onToggleLogs:x,onToggleButtonBar:$,taskId:q}=ft,{getPageTheme:xe}=(0,ce.A)(),ke=xe({themeId:"website"}),vt=Nn({fontColor:ke.fontColor}),kt=(0,R.u)(g.s),[V,ve]=(0,l.useState)(),[{status:$e},{execute:Ke}]=(0,De.Y)(async()=>{q&&await kt.cancelTask(q)});return l.createElement(l.Fragment,null,l.createElement(a.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:Je=>{ve(Je.currentTarget)},"data-testid":"menu-button",className:vt.button},l.createElement(X.A,null)),l.createElement(fe.Ay,{open:!!V,onClose:()=>ve(void 0),anchorEl:V,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},l.createElement(le.A,null,l.createElement(ie.A,{onClick:()=>x==null?void 0:x(!D)},l.createElement(oe.A,null,l.createElement(ne.A,{fontSize:"small"})),l.createElement(ze.A,{primary:D?"Hide Logs":"Show Logs"})),l.createElement(ie.A,{onClick:()=>$==null?void 0:$(!j)},l.createElement(oe.A,null,l.createElement(N.A,{fontSize:"small"})),l.createElement(ze.A,{primary:j?"Hide Button Bar":"Show Button Bar"})),l.createElement(ie.A,{onClick:de},l.createElement(oe.A,null,l.createElement(Ne.A,{fontSize:"small"})),l.createElement(ze.A,{primary:"Start Over"})),l.createElement(ie.A,{onClick:Ke,disabled:!m||$e!=="not-executed","data-testid":"cancel-task"},l.createElement(oe.A,null,l.createElement(Ae.A,{fontSize:"small"})),l.createElement(ze.A,{primary:"Cancel"})))))},Jn=(0,ye.A)(ft=>({contentWrapper:{display:"flex",flexDirection:"column"},buttonBar:{display:"flex",flexDirection:"row",justifyContent:"right"},cancelButton:{marginRight:ft.spacing(1)},logsVisibilityButton:{marginRight:ft.spacing(1)}})),aa=ft=>{var m,D,j,de,x,$,q,xe;const{taskId:ke}=(0,ot.g)(),vt=(0,p.Sf)(pt.s),kt=(0,ot.Zp)(),V=(0,R.u)(g.s),ve=(0,H.TA)(ke),$e=Jn(),Ke=(0,l.useMemo)(()=>{var Re,yt;return(yt=(Re=ve.task)==null?void 0:Re.spec.steps.map(Tt=>{var Kt;return{...Tt,...(Kt=ve==null?void 0:ve.steps)==null?void 0:Kt[Tt.id]}}))!=null?yt:[]},[ve]),[Je,Ut]=(0,l.useState)(!1),[Rt,Nt]=(0,l.useState)(!0);(0,l.useEffect)(()=>{ve.error&&Ut(!0)},[ve.error]),(0,l.useEffect)(()=>{ve.completed&&!ve.error&&Nt(!1)},[ve.error,ve.completed]);const _n=(0,l.useMemo)(()=>{for(let Re=Ke.length-1;Re>=0;Re--)if(Ke[Re].status!=="open")return Re;return 0},[Ke]),An=(0,l.useCallback)(()=>{var Re,yt,Tt,Kt,Jt,hn;const{namespace:Dn,name:he}=(Kt=(Tt=(yt=(Re=ve.task)==null?void 0:Re.spec.templateInfo)==null?void 0:yt.entity)==null?void 0:Tt.metadata)!=null?Kt:{},Ve=(hn=(Jt=ve.task)==null?void 0:Jt.spec.parameters)!=null?hn:{};!Dn||!he||kt({pathname:vt({namespace:Dn,templateName:he}),search:`?${Ge().stringify({formData:JSON.stringify(Ve)})}`})},[kt,(m=ve.task)==null?void 0:m.spec.parameters,(de=(j=(D=ve.task)==null?void 0:D.spec.templateInfo)==null?void 0:j.entity)==null?void 0:de.metadata,vt]),[{status:mn},{execute:ln}]=(0,De.Y)(async()=>{ke&&await V.cancelTask(ke)}),M=(x=ft.TemplateOutputsComponent)!=null?x:Ue.KV,J=(xe=(q=($=ve.task)==null?void 0:$.spec.templateInfo)==null?void 0:q.entity)==null?void 0:xe.metadata.name,be=!(ve.cancelled||ve.completed);return l.createElement(Q.YW,{themeId:"website"},l.createElement(Q.Y9,{pageTitleOverride:`Run of ${J}`,title:l.createElement("div",null,"Run of ",l.createElement("code",null,J)),subtitle:`Task ${ke}`},l.createElement(On,{cancelEnabled:be,logsVisible:Je,buttonBarVisible:Rt,onStartOver:An,onToggleLogs:Ut,onToggleButtonBar:Nt,taskId:ke})),l.createElement(Q.UC,{className:$e.contentWrapper},ve.error?l.createElement(B.A,{paddingBottom:2},l.createElement(Q.bJ,{error:ve.error,titleFormat:"markdown",title:ve.error.message})):null,l.createElement(B.A,{paddingBottom:2},l.createElement(Ue.lN,{steps:Ke,activeStep:_n,isComplete:ve.completed,isError:!!ve.error})),l.createElement(M,{output:ve.output}),Rt?l.createElement(B.A,{paddingBottom:2},l.createElement(Le.A,null,l.createElement(B.A,{padding:2},l.createElement("div",{className:$e.buttonBar},l.createElement(Pe.A,{className:$e.cancelButton,disabled:!be||mn!=="not-executed",onClick:ln,"data-testid":"cancel-button"},"Cancel"),l.createElement(Pe.A,{className:$e.logsVisibilityButton,color:"primary",variant:"outlined",onClick:()=>Ut(!Je)},Je?"Hide Logs":"Show Logs"),l.createElement(Pe.A,{variant:"contained",color:"primary",disabled:be,onClick:An},"Start Over"))))):null,Je?l.createElement(B.A,{paddingBottom:2,height:"100%"},l.createElement(Le.A,{style:{height:"100%"}},l.createElement(B.A,{padding:2,height:"100%"},l.createElement(Ue.g_,{logs:ve.stepLogs})))):null))}},91943:(wn,wt,e)=>{"use strict";e.d(wt,{S:()=>ie,a:()=>C,b:()=>R,c:()=>ee,d:()=>oe,e:()=>p,r:()=>Le,s:()=>Pe,v:()=>ze});var o=e(29835),l=e(3399),A=e(45810),B=e.n(A),u=e(96403),r=e.n(u),Y=e(4237),ye=e.n(Y),ce=e(11638),a=Object.defineProperty,fe=(w,f,E)=>f in w?a(w,f,{enumerable:!0,configurable:!0,writable:!0,value:E}):w[f]=E,le=(w,f,E)=>(fe(w,typeof f!="symbol"?f+"":f,E),E);class ie{constructor(f){le(this,"discoveryApi"),le(this,"scmIntegrationsApi"),le(this,"fetchApi"),le(this,"identityApi"),le(this,"useLongPollingLogs");var E,F;this.discoveryApi=f.discoveryApi,this.fetchApi=(E=f.fetchApi)!=null?E:{fetch},this.scmIntegrationsApi=f.scmIntegrationsApi,this.useLongPollingLogs=(F=f.useLongPollingLogs)!=null?F:!1,this.identityApi=f.identityApi}async listTasks(f){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const E=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:F}=await this.identityApi.getBackstageIdentity(),re=B().stringify(f.filterByOwnership==="owned"?{createdBy:F}:{}),se=await this.fetchApi.fetch(`${E}/v2/tasks?${re}`);if(!se.ok)throw await l.o3.fromResponse(se);return await se.json()}async getIntegrationsList(f){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(F=>!this.scmIntegrationsApi.bitbucketCloud.byHost(F.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(F.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.gitea.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(F=>({type:F.type,title:F.title,host:F.config.host})).filter(F=>f.allowedHosts.includes(F.host))}}async getTemplateParameterSchema(f){const{namespace:E,kind:F,name:re}=(0,o.KU)(f,{defaultKind:"template"}),se=await this.discoveryApi.getBaseUrl("scaffolder"),_e=[E,F,re].map(G=>encodeURIComponent(G)).join("/"),Q=`${se}/v2/templates/${_e}/parameter-schema`,g=await this.fetchApi.fetch(Q);if(!g.ok)throw await l.o3.fromResponse(g);return await g.json()}async scaffold(f){const{templateRef:E,values:F,secrets:re={}}=f,se=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,_e=await this.fetchApi.fetch(se,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:E,values:{...F},secrets:re})});if(_e.status!==201){const g=`${_e.status} ${_e.statusText}`,H=await _e.text();throw new Error(`Backend request failed, ${g} ${H.trim()}`)}const{id:Q}=await _e.json();return{taskId:Q}}async getTask(f){const F=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(f)}`,re=await this.fetchApi.fetch(F);if(!re.ok)throw await l.o3.fromResponse(re);return await re.json()}streamLogs(f){return this.useLongPollingLogs?this.streamLogsPolling(f):this.streamLogsEventStream(f)}async dryRun(f){const E=await this.discoveryApi.getBaseUrl("scaffolder"),F=await this.fetchApi.fetch(`${E}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:f.template,values:f.values,secrets:f.secrets,directoryContents:f.directoryContents})});if(!F.ok)throw await l.o3.fromResponse(F);return F.json()}streamLogsEventStream({taskId:f,after:E}){return new(r())(F=>{var re;const se=new URLSearchParams;E!==void 0&&se.set("after",String(Number(E))),Promise.all([this.discoveryApi.getBaseUrl("scaffolder"),(re=this.identityApi)==null?void 0:re.getCredentials()]).then(([_e,Q])=>{const g=`${_e}/v2/tasks/${encodeURIComponent(f)}/eventstream`,H=Oe=>{if(Oe.data)try{F.next(JSON.parse(Oe.data))}catch(ue){F.error(ue)}},G=new Y.EventSourcePolyfill(g,{withCredentials:!0,headers:Q!=null&&Q.token?{Authorization:`Bearer ${Q.token}`}:{}});G.addEventListener("log",H),G.addEventListener("recovered",H),G.addEventListener("cancelled",H),G.addEventListener("completion",Oe=>{H(Oe),G.close(),F.complete()}),G.addEventListener("error",Oe=>{F.error(Oe)})},_e=>{F.error(_e)})})}streamLogsPolling({taskId:f,after:E}){let F=E;return new(r())(re=>{this.discoveryApi.getBaseUrl("scaffolder").then(async se=>{for(;!re.closed;){const _e=`${se}/v2/tasks/${encodeURIComponent(f)}/events?${B().stringify({after:F})}`,Q=await this.fetchApi.fetch(_e);if(!Q.ok){await new Promise(H=>setTimeout(H,1e3));continue}const g=await Q.json();for(const H of g)if(F=Number(H.id),re.next(H),H.type==="completion"){re.complete();return}}})})}async listActions(){const f=await this.discoveryApi.getBaseUrl("scaffolder"),E=await this.fetchApi.fetch(`${f}/v2/actions`);if(!E.ok)throw await l.o3.fromResponse(E);return await E.json()}async cancelTask(f){const F=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(f)}/cancel`,re=await this.fetchApi.fetch(F,{method:"POST"});if(!re.ok)throw await l.o3.fromResponse(re);return await re.json()}}const oe=(0,ce.Il)({id:"register-component",optional:!0}),ze=(0,ce.Il)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),Le=(0,ce.HM)({id:"scaffolder"});(0,ce.Vb)({id:"scaffolder/legacy/selected-template",parent:Le,path:"/templates/:templateName"});const Pe=(0,ce.Vb)({id:"scaffolder/selected-template",parent:Le,path:"/templates/:namespace/:templateName"}),C=(0,ce.Vb)({id:"scaffolder/task",parent:Le,path:"/tasks/:taskId"}),ee=(0,ce.Vb)({id:"scaffolder/list-tasks",parent:Le,path:"/tasks"}),R=(0,ce.Vb)({id:"scaffolder/actions",parent:Le,path:"/actions"}),p=(0,ce.Vb)({id:"scaffolder/edit",parent:Le,path:"/edit"})},77587:(wn,wt,e)=>{"use strict";e.d(wt,{Te:()=>C,r6:()=>F});var o=e(91943),l=e(33478),A=e(56362),B=e(77189),u=e(66504),r=e(11638),Y=e(48821),ye=e(14041),ce=e(56005),a=e.n(ce),fe=e(44148),le=e(41260),ie=e(96403),oe=e.n(ie),ze=e(4237),Le=e.n(ze),Pe=e(63177);const C=(0,r.i1)({id:"scaffolder",apis:[(0,r.bW)({api:A.s,deps:{discoveryApi:Y.q,scmIntegrationsApi:l.YT,fetchApi:Y.s,identityApi:Y.t},factory:({discoveryApi:nt,scmIntegrationsApi:Ge,fetchApi:De,identityApi:Ae})=>new o.S({discoveryApi:nt,scmIntegrationsApi:Ge,fetchApi:De,identityApi:Ae})})],routes:{root:o.r,selectedTemplate:o.s,ongoingTask:o.a,actions:o.b,listTasks:o.c,edit:o.e},externalRoutes:{registerComponent:o.d,viewTechDoc:o.v}}),ee=C.provide((0,B.zD)({component:u.E,name:"EntityPicker",schema:u.a})),R=C.provide((0,B.zD)({component:u.b,name:"EntityNamePicker",validation:u.e,schema:u.c})),p=C.provide((0,B.zD)({component:u.M,name:"MultiEntityPicker",schema:u.d,validation:u.v})),w=C.provide((0,B.zD)({component:u.R,name:"RepoUrlPicker",validation:u.r,schema:u.f})),f=C.provide((0,B.zD)({component:u.O,name:"OwnerPicker",schema:u.g})),E=C.provide((0,B.zD)({component:u.h,name:"MyGroupsPicker",schema:u.i})),F=C.provide((0,r.QJ)({name:"ScaffolderPage",component:()=>e.e(2737).then(e.bind(e,32737)).then(nt=>nt.Router),mountPoint:o.r})),re=C.provide((0,B.zD)({component:u.j,name:"OwnedEntityPicker",schema:u.k})),se=C.provide((0,B.zD)({component:u.l,name:"EntityTagsPicker",schema:u.m})),_e=ye.createElement(le.A,{fontSize:"small"}),Q=ye.createElement(fe.A,{fontSize:"small"}),g=()=>{const nt=useApi(alertApiRef),{error:Ge,loading:De,availableTypes:Ae,selectedTypes:Ne,setSelectedTypes:ne}=useEntityTypeFilter();return De?React.createElement(Progress,null):Ae?Ge?(nt.post({message:"Failed to load entity types",severity:"error"}),null):React.createElement(Box,{pb:1,pt:1},React.createElement(Typography,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),React.createElement(Autocomplete,{id:"categories-picker",multiple:!0,options:Ae,value:Ne,onChange:(N,X)=>ne(X),renderOption:(N,{selected:X})=>React.createElement(FormControlLabel,{control:React.createElement(Checkbox,{icon:_e,checkedIcon:Q,checked:X}),label:capitalize(N)}),size:"small",popupIcon:React.createElement(ExpandMoreIcon,{"data-testid":"categories-picker-expand"}),renderInput:N=>React.createElement(TextField,{...N,variant:"outlined"})})):null},H=null,G=null,Oe=null,ue=null,it=null,ot=null,pt=null},4237:function(wn,wt){var e,o,l;/** @license
* eventsource.js
* Available under MIT License (MIT)
* https://github.com/Yaffle/EventSource/
*/(function(A){"use strict";var B=A.setTimeout,u=A.clearTimeout,r=A.XMLHttpRequest,Y=A.XDomainRequest,ye=A.ActiveXObject,ce=A.EventSource,a=A.document,fe=A.Promise,le=A.fetch,ie=A.Response,oe=A.TextDecoder,ze=A.TextEncoder,Le=A.AbortController;if(typeof window!="undefined"&&typeof a!="undefined"&&!("readyState"in a)&&a.body==null&&(a.readyState="loading",window.addEventListener("load",function(O){a.readyState="complete"},!1)),r==null&&ye!=null&&(r=function(){return new ye("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(O){function S(){}return S.prototype=O,new S}),Date.now||(Date.now=function(){return new Date().getTime()}),Le==null){var Pe=le;le=function(O,S){var K=S.signal;return Pe(O,{headers:S.headers,credentials:S.credentials,cache:S.cache}).then(function(ae){var We=ae.body.getReader();return K._reader=We,K._aborted&&K._reader.cancel(),{status:ae.status,statusText:ae.statusText,headers:ae.headers,body:{getReader:function(){return We}}}})},Le=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function C(){this.bitsNeeded=0,this.codePoint=0}C.prototype.decode=function(O){function S(Zt,at,mt){if(mt===1)return Zt>=128>>at&&Zt<<at<=2047;if(mt===2)return Zt>=2048>>at&&Zt<<at<=55295||Zt>=57344>>at&&Zt<<at<=65535;if(mt===3)return Zt>=65536>>at&&Zt<<at<=1114111;throw new Error}function K(Zt,at){if(Zt===6*1)return at>>6>15?3:at>31?2:1;if(Zt===6*2)return at>15?3:2;if(Zt===6*3)return 3;throw new Error}for(var ae=65533,We="",qe=this.bitsNeeded,gt=this.codePoint,_t=0;_t<O.length;_t+=1){var st=O[_t];qe!==0&&(st<128||st>191||!S(gt<<6|st&63,qe-6,K(qe,gt)))&&(qe=0,gt=ae,We+=String.fromCharCode(gt)),qe===0?(st>=0&&st<=127?(qe=0,gt=st):st>=192&&st<=223?(qe=6*1,gt=st&31):st>=224&&st<=239?(qe=6*2,gt=st&15):st>=240&&st<=247?(qe=6*3,gt=st&7):(qe=0,gt=ae),qe!==0&&!S(gt,qe,K(qe,gt))&&(qe=0,gt=ae)):(qe-=6,gt=gt<<6|st&63),qe===0&&(gt<=65535?We+=String.fromCharCode(gt):(We+=String.fromCharCode(55296+(gt-65535-1>>10)),We+=String.fromCharCode(56320+(gt-65535-1&1023))))}return this.bitsNeeded=qe,this.codePoint=gt,We};var ee=function(){try{return new oe().decode(new ze().encode("test"),{stream:!0})==="test"}catch(O){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+O)}return!1};(oe==null||ze==null||!ee())&&(oe=C);var R=function(){};function p(O){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=R,this.onload=R,this.onerror=R,this.onreadystatechange=R,this._contentType="",this._xhr=O,this._sendTimeout=0,this._abort=R}p.prototype.open=function(O,S){this._abort(!0);var K=this,ae=this._xhr,We=1,qe=0;this._abort=function(mt){K._sendTimeout!==0&&(u(K._sendTimeout),K._sendTimeout=0),(We===1||We===2||We===3)&&(We=4,ae.onload=R,ae.onerror=R,ae.onabort=R,ae.onprogress=R,ae.onreadystatechange=R,ae.abort(),qe!==0&&(u(qe),qe=0),mt||(K.readyState=4,K.onabort(null),K.onreadystatechange())),We=0};var gt=function(){if(We===1){var mt=0,Qe="",Lt=void 0;if("contentType"in ae)mt=200,Qe="OK",Lt=ae.contentType;else try{mt=ae.status,Qe=ae.statusText,Lt=ae.getResponseHeader("Content-Type")}catch{mt=0,Qe="",Lt=void 0}mt!==0&&(We=2,K.readyState=2,K.status=mt,K.statusText=Qe,K._contentType=Lt,K.onreadystatechange())}},_t=function(){if(gt(),We===2||We===3){We=3;var mt="";try{mt=ae.responseText}catch{}K.readyState=3,K.responseText=mt,K.onprogress()}},st=function(mt,Qe){if((Qe==null||Qe.preventDefault==null)&&(Qe={preventDefault:R}),_t(),We===1||We===2||We===3){if(We=4,qe!==0&&(u(qe),qe=0),K.readyState=4,mt==="load")K.onload(Qe);else if(mt==="error")K.onerror(Qe);else if(mt==="abort")K.onabort(Qe);else throw new TypeError;K.onreadystatechange()}},Zt=function(mt){ae!=null&&(ae.readyState===4?(!("onload"in ae)||!("onerror"in ae)||!("onabort"in ae))&&st(ae.responseText===""?"error":"load",mt):ae.readyState===3?"onprogress"in ae||_t():ae.readyState===2&&gt())},at=function(){qe=B(function(){at()},500),ae.readyState===3&&_t()};"onload"in ae&&(ae.onload=function(mt){st("load",mt)}),"onerror"in ae&&(ae.onerror=function(mt){st("error",mt)}),"onabort"in ae&&(ae.onabort=function(mt){st("abort",mt)}),"onprogress"in ae&&(ae.onprogress=_t),"onreadystatechange"in ae&&(ae.onreadystatechange=function(mt){Zt(mt)}),("contentType"in ae||!("ontimeout"in r.prototype))&&(S+=(S.indexOf("?")===-1?"?":"&")+"padding=true"),ae.open(O,S,!0),"readyState"in ae&&(qe=B(function(){at()},0))},p.prototype.abort=function(){this._abort(!1)},p.prototype.getResponseHeader=function(O){return this._contentType},p.prototype.setRequestHeader=function(O,S){var K=this._xhr;"setRequestHeader"in K&&K.setRequestHeader(O,S)},p.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},p.prototype.send=function(){if((!("ontimeout"in r.prototype)||!("sendAsBinary"in r.prototype)&&!("mozAnon"in r.prototype))&&a!=null&&a.readyState!=null&&a.readyState!=="complete"){var O=this;O._sendTimeout=B(function(){O._sendTimeout=0,O.send()},4);return}var S=this._xhr;"withCredentials"in S&&(S.withCredentials=this.withCredentials);try{S.send(void 0)}catch(K){throw K}};function w(O){return O.replace(/[A-Z]/g,function(S){return String.fromCharCode(S.charCodeAt(0)+32)})}function f(O){for(var S=Object.create(null),K=O.split(`\r
`),ae=0;ae<K.length;ae+=1){var We=K[ae],qe=We.split(": "),gt=qe.shift(),_t=qe.join(": ");S[w(gt)]=_t}this._map=S}f.prototype.get=function(O){return this._map[w(O)]},r!=null&&r.HEADERS_RECEIVED==null&&(r.HEADERS_RECEIVED=2);function E(){}E.prototype.open=function(O,S,K,ae,We,qe,gt){O.open("GET",We);var _t=0;O.onprogress=function(){var Zt=O.responseText,at=Zt.slice(_t);_t+=at.length,K(at)},O.onerror=function(Zt){Zt.preventDefault(),ae(new Error("NetworkError"))},O.onload=function(){ae(null)},O.onabort=function(){ae(null)},O.onreadystatechange=function(){if(O.readyState===r.HEADERS_RECEIVED){var Zt=O.status,at=O.statusText,mt=O.getResponseHeader("Content-Type"),Qe=O.getAllResponseHeaders();S(Zt,at,mt,new f(Qe))}},O.withCredentials=qe;for(var st in gt)Object.prototype.hasOwnProperty.call(gt,st)&&O.setRequestHeader(st,gt[st]);return O.send(),O};function F(O){this._headers=O}F.prototype.get=function(O){return this._headers.get(O)};function re(){}re.prototype.open=function(O,S,K,ae,We,qe,gt){var _t=null,st=new Le,Zt=st.signal,at=new oe;return le(We,{headers:gt,credentials:qe?"include":"same-origin",signal:Zt,cache:"no-store"}).then(function(mt){return _t=mt.body.getReader(),S(mt.status,mt.statusText,mt.headers.get("Content-Type"),new F(mt.headers)),new fe(function(Qe,Lt){var St=function(){_t.read().then(function(en){if(en.done)Qe(void 0);else{var xt=at.decode(en.value,{stream:!0});K(xt),St()}}).catch(function(en){Lt(en)})};St()})}).catch(function(mt){if(mt.name!=="AbortError")return mt}).then(function(mt){ae(mt)}),{abort:function(){_t!=null&&_t.cancel(),st.abort()}}};function se(){this._listeners=Object.create(null)}function _e(O){B(function(){throw O},0)}se.prototype.dispatchEvent=function(O){O.target=this;var S=this._listeners[O.type];if(S!=null)for(var K=S.length,ae=0;ae<K;ae+=1){var We=S[ae];try{typeof We.handleEvent=="function"?We.handleEvent(O):We.call(this,O)}catch(qe){_e(qe)}}},se.prototype.addEventListener=function(O,S){O=String(O);var K=this._listeners,ae=K[O];ae==null&&(ae=[],K[O]=ae);for(var We=!1,qe=0;qe<ae.length;qe+=1)ae[qe]===S&&(We=!0);We||ae.push(S)},se.prototype.removeEventListener=function(O,S){O=String(O);var K=this._listeners,ae=K[O];if(ae!=null){for(var We=[],qe=0;qe<ae.length;qe+=1)ae[qe]!==S&&We.push(ae[qe]);We.length===0?delete K[O]:K[O]=We}};function Q(O){this.type=O,this.target=void 0}function g(O,S){Q.call(this,O),this.data=S.data,this.lastEventId=S.lastEventId}g.prototype=Object.create(Q.prototype);function H(O,S){Q.call(this,O),this.status=S.status,this.statusText=S.statusText,this.headers=S.headers}H.prototype=Object.create(Q.prototype);function G(O,S){Q.call(this,O),this.error=S.error}G.prototype=Object.create(Q.prototype);var Oe=-1,ue=0,it=1,ot=2,pt=-1,nt=0,Ge=1,De=2,Ae=3,Ne=/^text\/event\-stream(;.*)?$/i,ne=1e3,N=18e6,X=function(O,S){var K=O==null?S:parseInt(O,10);return K!==K&&(K=S),Ue(K)},Ue=function(O){return Math.min(Math.max(O,ne),N)},te=function(O,S,K){try{typeof S=="function"&&S.call(O,K)}catch(ae){_e(ae)}};function we(O,S){se.call(this),S=S||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,bt(this,O,S)}function ht(){return r!=null&&"withCredentials"in r.prototype||Y==null?new r:new Y}var Wt=le!=null&&ie!=null&&"body"in ie.prototype;function bt(O,S,K){S=String(S);var ae=!!K.withCredentials,We=K.lastEventIdQueryParameterName||"lastEventId",qe=Ue(1e3),gt=X(K.heartbeatTimeout,45e3),_t="",st=qe,Zt=!1,at=0,mt=K.headers||{},Qe=K.Transport,Lt=Wt&&Qe==null?void 0:new p(Qe!=null?new Qe:ht()),St=Qe!=null&&typeof Qe!="string"?new Qe:Lt==null?new re:new E,en=void 0,xt=0,pe=Oe,Fe="",Mt="",Xt="",Bt="",jt=nt,Ln=0,pn=0,cn=function(Dt,ct,je,Yt){if(pe===ue)if(Dt===200&&je!=null&&Ne.test(je)){pe=it,Zt=Date.now(),st=qe,O.readyState=it;var Gt=new H("open",{status:Dt,statusText:ct,headers:Yt});O.dispatchEvent(Gt),te(O,O.onopen,Gt)}else{var sn="";Dt!==200?(ct&&(ct=ct.replace(/\s+/g," ")),sn="EventSource's response has a status "+Dt+" "+ct+" that is not 200. Aborting the connection."):sn="EventSource's response has a Content-Type specifying an unsupported type: "+(je==null?"-":je.replace(/\s+/g," "))+". Aborting the connection.",Ot();var Gt=new H("error",{status:Dt,statusText:ct,headers:Yt});O.dispatchEvent(Gt),te(O,O.onerror,Gt),console.error(sn)}},En=function(Dt){if(pe===it){for(var ct=-1,je=0;je<Dt.length;je+=1){var Yt=Dt.charCodeAt(je);(Yt===10||Yt===13)&&(ct=je)}var Gt=(ct!==-1?Bt:"")+Dt.slice(0,ct+1);Bt=(ct===-1?Bt:"")+Dt.slice(ct+1),Dt!==""&&(Zt=Date.now(),at+=Dt.length);for(var sn=0;sn<Gt.length;sn+=1){var Yt=Gt.charCodeAt(sn);if(jt===pt&&Yt===10)jt=nt;else if(jt===pt&&(jt=nt),Yt===13||Yt===10){if(jt!==nt){jt===Ge&&(pn=sn+1);var bn=Gt.slice(Ln,pn-1),In=Gt.slice(pn+(pn<sn&&Gt.charCodeAt(pn)===32?1:0),sn);bn==="data"?(Fe+=`
`,Fe+=In):bn==="id"?Mt=In:bn==="event"?Xt=In:bn==="retry"?(qe=X(In,qe),st=qe):bn==="heartbeatTimeout"&&(gt=X(In,gt),xt!==0&&(u(xt),xt=B(function(){Vt()},gt)))}if(jt===nt){if(Fe!==""){_t=Mt,Xt===""&&(Xt="message");var Pn=new g(Xt,{data:Fe.slice(1),lastEventId:Mt});if(O.dispatchEvent(Pn),Xt==="open"?te(O,O.onopen,Pn):Xt==="message"?te(O,O.onmessage,Pn):Xt==="error"&&te(O,O.onerror,Pn),pe===ot)return}Fe="",Xt=""}jt=Yt===13?pt:nt}else jt===nt&&(Ln=sn,jt=Ge),jt===Ge?Yt===58&&(pn=sn+1,jt=De):jt===De&&(jt=Ae)}}},lt=function(Dt){if(pe===it||pe===ue){pe=Oe,xt!==0&&(u(xt),xt=0),xt=B(function(){Vt()},st),st=Ue(Math.min(qe*16,st*2)),O.readyState=ue;var ct=new G("error",{error:Dt});O.dispatchEvent(ct),te(O,O.onerror,ct),Dt!=null&&console.error(Dt)}},Ot=function(){pe=ot,en!=null&&(en.abort(),en=void 0),xt!==0&&(u(xt),xt=0),O.readyState=ot},Vt=function(){if(xt=0,pe!==Oe){if(!Zt&&en!=null)lt(new Error("No activity within "+gt+" milliseconds. "+(pe===ue?"No response received.":at+" chars received.")+" Reconnecting.")),en!=null&&(en.abort(),en=void 0);else{var Dt=Math.max((Zt||Date.now())+gt-Date.now(),1);Zt=!1,xt=B(function(){Vt()},Dt)}return}Zt=!1,at=0,xt=B(function(){Vt()},gt),pe=ue,Fe="",Xt="",Mt=_t,Bt="",Ln=0,pn=0,jt=nt;var ct=S;if(S.slice(0,5)!=="data:"&&S.slice(0,5)!=="blob:"&&_t!==""){var je=S.indexOf("?");ct=je===-1?S:S.slice(0,je+1)+S.slice(je+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(In,Pn){return Pn===We?"":In}),ct+=(S.indexOf("?")===-1?"?":"&")+We+"="+encodeURIComponent(_t)}var Yt=O.withCredentials,Gt={};Gt.Accept="text/event-stream";var sn=O.headers;if(sn!=null)for(var bn in sn)Object.prototype.hasOwnProperty.call(sn,bn)&&(Gt[bn]=sn[bn]);try{en=St.open(Lt,cn,En,lt,ct,Yt,Gt)}catch(In){throw Ot(),In}};O.url=S,O.readyState=ue,O.withCredentials=ae,O.headers=mt,O._close=Ot,Vt()}we.prototype=Object.create(se.prototype),we.prototype.CONNECTING=ue,we.prototype.OPEN=it,we.prototype.CLOSED=ot,we.prototype.close=function(){this._close()},we.CONNECTING=ue,we.OPEN=it,we.CLOSED=ot,we.prototype.withCredentials=void 0;var It=ce;r!=null&&(ce==null||!("withCredentials"in ce.prototype))&&(It=we),function(O){if(typeof wn.exports=="object"){var S=O(wt);S!==void 0&&(wn.exports=S)}else o=[wt],e=O,l=typeof e=="function"?e.apply(wt,o):e,l!==void 0&&(wn.exports=l)}(function(O){O.EventSourcePolyfill=we,O.NativeEventSource=ce,O.EventSource=It})})(typeof globalThis=="undefined"?typeof window!="undefined"?window:typeof self!="undefined"?self:this:globalThis)},92805:(wn,wt,e)=>{"use strict";e.d(wt,{S:()=>R,b:()=>le,c:()=>C});var o=e(14041),l=e(11638),A=e(58837),B=e(46423),u=e(5951),r=e(77125),Y=e(8109),ye=e(58007),ce=e(72501),a=e(23180);const fe=(0,A.A)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),le=p=>{const{text:w,preTag:f,postTag:E}=p,F=fe(),re=(0,o.useMemo)(()=>w.split(new RegExp(`(${f}.+?${E})`)),[E,f,w]);return o.createElement(o.Fragment,null,re.map((se,_e)=>se.includes(f)?o.createElement("mark",{className:F.highlight,key:_e},se.replace(new RegExp(`${f}|${E}`,"g"),"")):se))},ie=({result:p,highlight:w,icon:f,secondaryAction:E,lineClamp:F=5})=>p?o.createElement(o.Fragment,null,f&&o.createElement(B.A,null,f),o.createElement(u.A,{primaryTypographyProps:{variant:"h6"},primary:o.createElement(a.N_,{noTrack:!0,to:p.location},w!=null&&w.fields.title?o.createElement(le,{text:(w==null?void 0:w.fields.title)||"",preTag:(w==null?void 0:w.preTag)||"",postTag:(w==null?void 0:w.postTag)||""}):p.title),secondary:o.createElement(ce.A,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:F,overflow:"hidden"},color:"textSecondary",variant:"body2"},w!=null&&w.fields.text?o.createElement(le,{text:w.fields.text,preTag:w.preTag,postTag:w.postTag}):p.text)}),E&&o.createElement(r.A,{alignItems:"flex-end"},E)):null,oe=p=>o.createElement(l.Ig,{attributes:{pluginId:"search",extension:"DefaultResultListItem"}},o.createElement(ie,{...p})),ze="search.results.list.items.extensions.v1",Le=(p,w)=>{for(const f of p){if(!(0,o.isValidElement)(f))continue;const E=(0,l.E0)(f,ze);if(E!=null&&E(w))return(0,o.cloneElement)(f,{rank:w.rank,highlight:w.highlight,result:w.document,...f.props})}return null},Pe=p=>{const{rank:w,result:f,noTrack:E,children:F,alignItems:re="flex-start",...se}=p,_e=(0,l.st)(),Q=(0,o.useCallback)(()=>{E||f&&_e.captureEvent("discover",f.title,{attributes:{to:f.location},value:w})},[w,f,E,_e]);return o.createElement(Y.A,{divider:!0,alignItems:re,onClickCapture:Q,...se},F)},C=p=>{const{name:w,component:f,predicate:E=()=>!0}=p;return(0,l.zZ)({name:w,component:{lazy:()=>f().then(F=>re=>o.createElement(Pe,{rank:re.rank,result:re.result,noTrack:re.noTrack},(0,o.createElement)(F,re)))},data:{[ze]:E}})},ee=p=>{const w=(0,l.OJ)(p,f=>f.selectByComponentData({key:ze}).getElements(),[p]);return(0,o.useCallback)((f,E)=>{const F=Le(w,f);return o.createElement(o.Fragment,{key:E},F!=null?F:o.createElement(Pe,{rank:f.rank,result:f.document},o.createElement(oe,{rank:f.rank,highlight:f.highlight,result:f.document})))},[w])},R=p=>{const{results:w,children:f,...E}=p,F=ee(f);return o.createElement(ye.A,{...E},w.map(F))}},13270:(wn,wt,e)=>{"use strict";e.d(wt,{$6:()=>We,IW:()=>X,Lt:()=>Ne,SQ:()=>pt,Z5:()=>En,Zf:()=>N,nJ:()=>st,pY:()=>ht,q0:()=>Lt,yY:()=>ue});var o=e(48821),l=e(11638),A=e(92805),B=e(34839),u=e(29365),r=e(16249),Y=e(58837),ye=e(78467),ce=e(67720),a=e(95061),fe=e(91761),le=e(86901),ie=e(69076),oe=e(48543),ze=e(81215),Le=e(26343),Pe=e(72501),C=e(60083),ee=e(64947),R=e(45917),p=e(14041),w=e(16983),f=e(45250),E=e.n(f),F=e(91638),re=e(50193),se=e(97388),_e=e(20577),Q=e(5030),g=e(23180),H=e(21098),G=e(22982),Oe=e(1048).Buffer;const ue=(0,o.c)({id:"plugin.search.queryservice"});class it{constructor(Ot){this.mockedResults=Ot}query(){return Promise.resolve(this.mockedResults||{results:[]})}}const ot=(0,se.tK)("search-context"),pt=()=>{const lt=(0,p.useContext)(ot);if(!lt)throw new Error("useSearch must be used within a SearchContextProvider");const Ot=lt.atVersion(1);if(!Ot)throw new Error("No SearchContext v1 found");return Ot},nt=()=>(0,p.useContext)(ot)!==void 0,Ge={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},De=(lt=Ge)=>{var Ot,Vt,Dt,ct;const je=(0,o.u)(ue),Yt=(0,l.st)(),[Gt,sn]=(0,p.useState)(lt.term),[bn,In]=(0,p.useState)(lt.types),[Pn,qn]=(0,p.useState)(lt.filters),[Gn,Nn]=(0,p.useState)(lt.pageLimit),[On,Jn]=(0,p.useState)(lt.pageCursor),aa=(0,re.A)(Gt),ft=(0,re.A)(Pn),m=(0,F.default)(async()=>{var q,xe;const ke=await je.query({term:Gt,types:bn,filters:Pn,pageLimit:Gn,pageCursor:On});return Gt&&Yt.captureEvent("search",Gt,{value:(xe=(q=m.value)==null?void 0:q.numberOfResults)!=null?xe:void 0}),ke},[Gt,bn,Pn,Gn,On]),D=!m.loading&&!m.error&&((Ot=m.value)==null?void 0:Ot.nextPageCursor),j=!m.loading&&!m.error&&((Vt=m.value)==null?void 0:Vt.previousPageCursor),de=(0,p.useCallback)(()=>{var q;Jn((q=m.value)==null?void 0:q.nextPageCursor)},[(Dt=m.value)==null?void 0:Dt.nextPageCursor]),x=(0,p.useCallback)(()=>{var q;Jn((q=m.value)==null?void 0:q.previousPageCursor)},[(ct=m.value)==null?void 0:ct.previousPageCursor]);return(0,p.useEffect)(()=>{aa!==void 0&&Gt!==aa&&Jn(void 0)},[Gt,aa,Jn]),(0,p.useEffect)(()=>{ft!==void 0&&!(0,f.isEqual)(Pn,ft)&&Jn(void 0)},[Pn,ft,Jn]),{result:m,term:Gt,setTerm:sn,types:bn,setTypes:In,filters:Pn,setFilters:qn,pageLimit:Gn,setPageLimit:Nn,pageCursor:On,setPageCursor:Jn,fetchNextPage:D?de:void 0,fetchPreviousPage:j?x:void 0}},Ae=lt=>{const{initialState:Ot,children:Vt}=lt,Dt=De(Ot);return p.createElement(l.Ig,{attributes:{searchTypes:Dt.types.sort().join(",")}},p.createElement(ot.Provider,{value:(0,se.Bl)({1:Dt})},Vt))},Ne=lt=>{const{initialState:Ot,inheritParentContextIfAvailable:Vt,children:Dt}=lt,ct=nt(),je=(0,o.u)(o.p),Yt=Ot!=null?Ot:{},Gt=je.has("search.query.pageLimit")?{pageLimit:je.getNumber("search.query.pageLimit")}:{},sn={...Ge,...Yt,...Gt};return ct&&Vt?p.createElement(p.Fragment,null,Dt):p.createElement(Ae,{initialState:sn},Dt)};function ne(lt){return(0,p.forwardRef)((Ot,Vt)=>p.createElement(Ne,{inheritParentContextIfAvailable:!0},p.createElement(lt,{...Ot,ref:Vt})))}const N=ne((0,p.forwardRef)((lt,Ot)=>{const{onChange:Vt,onKeyDown:Dt=()=>{},onClear:ct=()=>{},onSubmit:je=()=>{},debounceTime:Yt=200,clearButton:Gt=!0,fullWidth:sn=!0,value:bn,label:In,placeholder:Pn,inputProps:qn={},InputProps:Gn={},endAdornment:Nn,...On}=lt,Jn=(0,o.u)(o.p),[aa,ft]=(0,p.useState)(""),m=(0,p.useRef)("");(0,p.useEffect)(()=>{ft(ke=>ke===m.current?String(bn):ke)},[bn,m]),(0,w.A)(()=>{m.current=aa,Vt(aa)},Yt,[aa]);const D=(0,p.useCallback)(ke=>{ft(ke.target.value)},[ft]),j=(0,p.useCallback)(ke=>{Dt&&Dt(ke),je&&ke.key==="Enter"&&je()},[Dt,je]),de=(0,p.useCallback)(()=>{m.current="",Vt(""),ft(""),ct&&ct()},[Vt,ct]),x=In?void 0:"Search",$=Pn!=null?Pn:`Search in ${Jn.getOptionalString("app.title")||"Backstage"}`,q=p.createElement(B.A,{position:"start"},p.createElement(u.A,{"aria-label":"Query",size:"small",disabled:!0},p.createElement(R.default,null))),xe=p.createElement(B.A,{position:"end"},p.createElement(ee.A,{"aria-label":"Clear",size:"small",onClick:de,onKeyDown:ke=>{ke.key==="Enter"&&ke.stopPropagation()}},"Clear"));return p.createElement(r.A,{id:"search-bar-text-field","data-testid":"search-bar-next",variant:"outlined",margin:"normal",inputRef:Ot,value:aa,label:In,placeholder:$,InputProps:{startAdornment:q,endAdornment:Gt?xe:Nn,...Gn},inputProps:{"aria-label":x,...qn},fullWidth:sn,onChange:D,onKeyDown:j,...On})})),X=ne((0,p.forwardRef)((lt,Ot)=>{const{value:Vt="",onChange:Dt,...ct}=lt,{term:je,setTerm:Yt}=pt();(0,p.useEffect)(()=>{Vt&&Yt(String(Vt))},[Vt,Yt]);const Gt=(0,p.useCallback)(sn=>{Dt?Dt(sn):Yt(sn)},[Dt,Yt]);return p.createElement(l.Ig,{attributes:{pluginId:"search",extension:"SearchBar"}},p.createElement(N,{...ct,ref:Ot,value:je,onChange:Gt}))})),Ue=(0,Y.A)(lt=>({loading:{right:lt.spacing(1),position:"absolute"}})),te=lt=>Ot=>p.createElement(Ne,{inheritParentContextIfAvailable:!0},p.createElement(lt,{...Ot})),we=()=>{const lt=Ue();return p.createElement(ye.A,{className:lt.loading,"data-testid":"search-autocomplete-progressbar",color:"inherit",size:20})},ht=te(function(Ot){const{loading:Vt,value:Dt,onChange:ct=()=>{},options:je=[],getOptionLabel:Yt=m=>String(m),inputPlaceholder:Gt,inputDebounceTime:sn,freeSolo:bn=!0,fullWidth:In=!0,clearOnBlur:Pn=!1,"data-testid":qn="search-autocomplete",...Gn}=Ot,{setTerm:Nn}=pt(),On=(0,p.useCallback)(m=>m?typeof m=="string"?m:Yt(m):"",[Yt]),Jn=(0,p.useMemo)(()=>On(Dt),[Dt,On]),aa=(0,p.useCallback)((m,D,j,de)=>{Nn(On(D)),ct(m,D,j,de)},[On,Nn,ct]),ft=(0,p.useCallback)(({InputProps:{ref:m,className:D,endAdornment:j},InputLabelProps:de,...x})=>p.createElement(X,{...x,ref:m,clearButton:!1,value:Jn,placeholder:Gt,debounceTime:sn,endAdornment:Vt?p.createElement(we,null):j,InputProps:{className:D}}),[Vt,Jn,Gt,sn]);return p.createElement(_e.Ay,{...Gn,"data-testid":qn,value:Dt,onChange:aa,options:je,getOptionLabel:Yt,renderInput:ft,freeSolo:bn,fullWidth:In,clearOnBlur:Pn})}),Wt=lt=>{const{icon:Ot,primaryText:Vt,primaryTextTypographyProps:Dt,secondaryText:ct,secondaryTextTypographyProps:je,disableTextTypography:Yt}=lt;return React.createElement(React.Fragment,null,Ot?React.createElement(ListItemIcon,null,Ot):null,React.createElement(ListItemText,{primary:Vt,primaryTypographyProps:Dt,secondary:ct,secondaryTypographyProps:je,disableTypography:Yt}))},bt=(lt,Ot,Vt=[],Dt=250)=>{const ct=(0,p.useRef)({}),je=lt||(()=>Promise.resolve([])),[Yt,Gt]=(0,Q.default)(je,[Ot],{loading:!0});if((0,w.A)(()=>{ct.current[Ot]===void 0&&(ct.current[Ot]=Gt(Ot).then(bn=>(ct.current[Ot]=bn,bn)))},Dt,[Gt,Ot]),Vt.length)return{loading:!1,value:Vt};const sn=ct.current[Ot];return Array.isArray(sn)?{loading:!1,value:sn}:Yt},It=(lt,Ot)=>{const{setFilters:Vt}=pt();(0,p.useEffect)(()=>{Ot&&[Ot].flat().length>0&&Vt(Dt=>({...Dt,[lt]:Ot}))},[])},O=lt=>{const{className:Ot,defaultValue:Vt,name:Dt,values:ct,valuesDebounceMs:je,label:Yt,filterSelectedOptions:Gt,limitTags:sn,multiple:bn}=lt,[In,Pn]=(0,p.useState)("");It(Dt,Vt);const qn=typeof ct=="function"?ct:void 0,Gn=typeof ct=="function"?void 0:ct,{value:Nn,loading:On}=bt(qn,In,Gn,je),{filters:Jn,setFilters:aa}=pt(),ft=Jn[Dt]||(bn?[]:null),m=(de,x)=>{aa($=>{const{[Dt]:q,...xe}=$;return x?{...xe,[Dt]:x}:{...xe}})},D=de=>p.createElement(r.A,{...de,name:"search",variant:"outlined",label:Yt,fullWidth:!0}),j=(de,x)=>de.map(($,q)=>p.createElement(ce.A,{label:$,color:"primary",...x({index:q})}));return p.createElement(_e.Ay,{filterSelectedOptions:Gt,limitTags:sn,multiple:bn,className:Ot,id:`${bn?"multi-":""}select-filter-${Dt}--select`,options:Nn||[],loading:On,value:ft,onChange:m,onInputChange:(de,x)=>Pn(x),renderInput:D,renderTags:j})},S=(0,Y.A)({label:{textTransform:"capitalize"},checkboxWrapper:{display:"flex",alignItems:"center",width:"100%"},textWrapper:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),K=lt=>{const{className:Ot,defaultValue:Vt,label:Dt,name:ct,values:je=[],valuesDebounceMs:Yt}=lt,Gt=S(),{filters:sn,setFilters:bn}=pt();It(ct,Vt);const In=typeof je=="function"?je:void 0,Pn=typeof je=="function"?void 0:je,{value:qn=[],loading:Gn}=bt(In,"",Pn,Yt),Nn=On=>{const{target:{value:Jn,checked:aa}}=On;bn(ft=>{const{[ct]:m,...D}=ft,j=(m||[]).filter(x=>x!==Jn),de=aa?[...j,Jn]:j;return de.length?{...D,[ct]:de}:D})};return p.createElement(a.A,{className:Ot,disabled:Gn,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},Dt?p.createElement(fe.A,{className:Gt.label},Dt):null,qn.map(On=>{var Jn;return p.createElement(le.A,{key:On,classes:{root:Gt.checkboxWrapper,label:Gt.textWrapper},label:On,control:p.createElement(ie.A,{color:"primary",inputProps:{"aria-labelledby":On},value:On,name:On,onChange:Nn,checked:((Jn=sn[ct])!=null?Jn:[]).includes(On)})})}))},ae=lt=>{const{className:Ot,defaultValue:Vt,label:Dt,name:ct,values:je,valuesDebounceMs:Yt}=lt,Gt=S();It(ct,Vt);const sn=typeof je=="function"?je:void 0,bn=typeof je=="function"?void 0:je,{value:In=[],loading:Pn}=bt(sn,"",bn,Yt),{filters:qn,setFilters:Gn}=pt(),Nn=On=>{const{target:{value:Jn}}=On;Gn(aa=>{const{[ct]:ft,...m}=aa;return Jn?{...m,[ct]:Jn}:m})};return p.createElement(a.A,{disabled:Pn,className:Ot,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},Dt?p.createElement(oe.A,{className:Gt.label,margin:"dense"},Dt):null,p.createElement(ze.A,{variant:"outlined",value:qn[ct]||"",onChange:Nn},p.createElement(Le.A,{value:""},p.createElement("em",null,"All")),In.map(On=>p.createElement(Le.A,{key:On,value:On},p.createElement(Pe.A,{variant:"inherit",noWrap:!0},On)))))},We=lt=>{const{component:Ot,...Vt}=lt;return p.createElement(Ot,{...Vt})};We.Checkbox=lt=>p.createElement(We,{...lt,component:K}),We.Select=lt=>p.createElement(We,{...lt,component:ae}),We.Autocomplete=lt=>p.createElement(We,{...lt,component:O});const qe=lt=>Oe.from(lt.toString(),"utf-8").toString("base64"),gt=lt=>lt?Number(Oe.from(lt,"base64").toString("utf-8")):0,_t=lt=>{const{total:Ot=-1,cursor:Vt,hasNextPage:Dt,onCursorChange:ct,limit:je=25,limitLabel:Yt="Results per page:",limitText:Gt=({from:Nn,to:On})=>Ot>0?`of ${Ot}`:`${Nn}-${On}`,limitOptions:sn,onLimitChange:bn,...In}=lt,Pn=(0,p.useMemo)(()=>gt(Vt),[Vt]),qn=(0,p.useCallback)((Nn,On)=>{ct==null||ct(qe(On))},[ct]),Gn=(0,p.useCallback)(Nn=>{const On=Nn.target.value;bn==null||bn(parseInt(On,10))},[bn]);return p.createElement(C.A,{...In,component:"div",count:Ot,page:Pn,nextIconButtonProps:{...Dt!==void 0&&{disabled:!Dt}},onPageChange:qn,rowsPerPage:je,labelRowsPerPage:Yt,labelDisplayedRows:Gt,rowsPerPageOptions:sn,onRowsPerPageChange:Gn})},st=lt=>{const{pageLimit:Ot,setPageLimit:Vt,pageCursor:Dt,setPageCursor:ct,fetchNextPage:je}=pt(),Yt=(0,p.useCallback)(Gt=>{Vt(Gt),ct(void 0)},[Vt,ct]);return p.createElement(_t,{...lt,hasNextPage:!!je,limit:Ot,onLimitChange:Yt,cursor:Dt,onCursorChange:ct})},Zt=lt=>{const{children:Ot}=lt,Vt=pt(),{result:Dt,...ct}=Vt;return Ot(Dt,ct)},at=lt=>{const{query:Ot,children:Vt}=lt,Dt=(0,o.u)(ue),ct=(0,F.default)(()=>{const{term:je="",types:Yt=[],filters:Gt={},...sn}=Ot;return Dt.query({...sn,term:je,types:Yt,filters:Gt})},[Ot]);return Vt(ct,Ot)},mt=lt=>{const{query:Ot,children:Vt}=lt;return Ot?p.createElement(at,{query:Ot},Vt):p.createElement(Zt,null,Vt)},Qe=lt=>{const{query:Ot,children:Vt,noResultsComponent:Dt=p.createElement(g.pp,{missing:"data",title:"Sorry, no results were found"}),...ct}=lt;return p.createElement(mt,{query:Ot},({loading:je,error:Yt,value:Gt})=>je?p.createElement(g.ke,null):Yt?p.createElement(g._1,{title:"Error encountered while fetching search results",error:Yt}):Gt!=null&&Gt.results.length?(0,f.isFunction)(Vt)?Vt(Gt):p.createElement(A.S,{...ct,results:Gt.results},Vt):Dt)},Lt=lt=>p.createElement(l.Ig,{attributes:{pluginId:"search",extension:"SearchResult"}},p.createElement(Qe,{...lt})),St=lt=>{const{error:Ot,loading:Vt,resultItems:Dt,renderResultItem:ct=sn=>React.createElement(HigherOrderDefaultResultListItem,{key:sn.document.location,result:sn.document}),disableRenderingWithNoResults:je,noResultsComponent:Yt=je?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...Gt}=lt;return Vt?React.createElement(Progress,null):Ot?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:Ot}):Dt!=null&&Dt.length?React.createElement(List,{...Gt},Dt.map(ct)):React.createElement(React.Fragment,null,Yt)},en=lt=>{const{query:Ot,renderResultItem:Vt,children:Dt,...ct}=lt,je=useSearchResultListItemExtensions(Dt);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultList"}},React.createElement(mt,{query:Ot},({loading:Yt,error:Gt,value:sn})=>React.createElement(St,{...ct,error:Gt,loading:Yt,resultItems:sn==null?void 0:sn.results,renderResultItem:Vt!=null?Vt:je})))},xt=(0,Y.A)(lt=>({listSubheader:{display:"flex",alignItems:"center"},listSubheaderName:{marginLeft:lt.spacing(1),textTransform:"uppercase"},listSubheaderChip:{color:lt.palette.text.secondary,margin:lt.spacing(0,0,0,1.5)},listSubheaderFilter:{display:"flex",color:lt.palette.text.secondary,margin:lt.spacing(0,0,0,1.5)},listSubheaderLink:{marginLeft:"auto",display:"flex",alignItems:"center"},listSubheaderLinkIcon:{fontSize:"inherit",marginLeft:lt.spacing(.5)}})),pe=lt=>{const Ot=xt(),{label:Vt,children:Dt,...ct}=lt;return React.createElement(Chip,{...ct,className:Ot.listSubheaderFilter,variant:"outlined",label:React.createElement(React.Fragment,null,Vt,": ",Dt)})},Fe=()=>null,Mt=(0,Y.A)(lt=>({root:{fontSize:"inherit","&:focus":{outline:"none",background:lt.palette.common.white},"&:not(:focus)":{cursor:"pointer",color:lt.palette.primary.main,"&:hover":{textDecoration:"underline"}}}})),Xt=lt=>{const Ot=Mt(),{label:Vt,value:Dt="None",onChange:ct,onDelete:je}=lt,Yt=useCallback(Gt=>{ct(Gt.target.value)},[ct]);return React.createElement(pe,{label:Vt,onDelete:je},React.createElement(Typography,{role:"textbox",component:"span",className:Ot.root,onChange:Yt,contentEditable:!0,suppressContentEditableWarning:!0},Dt==null?void 0:Dt.toString()))},Bt=(0,Y.A)(lt=>({root:{fontSize:"inherit","&:not(:focus)":{cursor:"pointer",color:lt.palette.primary.main,"&:hover":{textDecoration:"underline"}},"&:focus":{outline:"none"},"&>div:first-child":{padding:0}}})),jt=lt=>{const Ot=Bt(),{label:Vt,value:Dt="none",onChange:ct,onDelete:je,children:Yt}=lt,Gt=useCallback(sn=>{ct(sn.target.value)},[ct]);return React.createElement(pe,{label:Vt,onDelete:je},React.createElement(Select,{className:Ot.root,value:Dt,onChange:Gt,input:React.createElement(InputBase,null),IconComponent:Fe},React.createElement(MenuItem,{value:"none"},"None"),Yt))};function Ln(lt){const Ot=xt(),[Vt,Dt]=useState(null),{error:ct,loading:je,icon:Yt,title:Gt,titleProps:sn={},link:bn=React.createElement(React.Fragment,null,"See all",React.createElement(ArrowRightIcon,{className:Ot.listSubheaderLinkIcon})),linkProps:In={},filterOptions:Pn,renderFilterOption:qn=de=>React.createElement(MenuItem,{key:String(de),value:String(de)},String(de)),filterFields:Gn,renderFilterField:Nn,resultItems:On,renderResultItem:Jn=de=>React.createElement(HigherOrderDefaultResultListItem,{key:de.document.location,result:de.document}),disableRenderingWithNoResults:aa,noResultsComponent:ft=aa?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...m}=lt,D=useCallback(de=>{Dt(de.currentTarget)},[]),j=useCallback(()=>{Dt(null)},[]);return je?React.createElement(Progress,null):ct?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:ct}):On!=null&&On.length?React.createElement(List,{...m},React.createElement(ListSubheader,{className:Ot.listSubheader},Yt,React.createElement(Typography,{className:Ot.listSubheaderName,component:"strong",...sn},Gt),Pn?React.createElement(Chip,{className:Ot.listSubheaderChip,component:"button",icon:React.createElement(AddIcon,null),variant:"outlined",label:"Add filter","aria-controls":"filters-menu","aria-haspopup":"true",onClick:D}):null,Pn?React.createElement(Menu,{id:"filters-menu",anchorEl:Vt,open:!!Vt,onClose:j,onClick:j,keepMounted:!0},Pn.map(qn)):null,Gn==null?void 0:Gn.map(de=>{var x;return(x=Nn==null?void 0:Nn(de))!=null?x:null}),React.createElement(Link,{className:Ot.listSubheaderLink,to:"/search",...In},bn)),On.map(Jn)):React.createElement(React.Fragment,null,ft)}function pn(lt){const{query:Ot,children:Vt,renderResultItem:Dt,linkProps:ct={},...je}=lt,Yt=useSearchResultListItemExtensions(Vt);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultGroup"}},React.createElement(mt,{query:Ot},({loading:Gt,error:sn,value:bn},{term:In,types:Pn,pageCursor:qn,filters:Gn={}})=>{const Nn=`/search?${qs.stringify({term:In,types:Pn,filters:Gn,pageCursor:qn,query:In},{arrayFormat:"brackets"})}`;return React.createElement(Ln,{...je,error:sn,loading:Gt,linkProps:{to:Nn,...ct},filterFields:Object.keys(Gn),resultItems:bn==null?void 0:bn.results,renderResultItem:Dt!=null?Dt:Yt})}))}const cn=(0,Y.A)(lt=>({root:{display:"flex",justifyContent:"space-between",gap:lt.spacing(2),margin:lt.spacing(2,0)}})),En=()=>{const{fetchNextPage:lt,fetchPreviousPage:Ot}=pt(),Vt=cn();return!lt&&!Ot?p.createElement(p.Fragment,null):p.createElement("nav",{"aria-label":"pagination navigation",className:Vt.root},p.createElement(ee.A,{"aria-label":"previous page",disabled:!Ot,onClick:Ot,startIcon:p.createElement(G.A,null)},"Previous"),p.createElement(ee.A,{"aria-label":"next page",disabled:!lt,onClick:lt,endIcon:p.createElement(H.A,null)},"Next"))}},96377:(wn,wt,e)=>{"use strict";e.d(wt,{S:()=>N,a:()=>Wt,b:()=>De,c:()=>Ae,r:()=>nt});var o=e(3399),l=e(45810),A=e.n(l),B=e(13270),u=e(11638),r=e(48821),Y=e(14041),ye=e(50193),ce=e(18690),a=e(58837),fe=e(40703),le=e(45685),ie=e(48653),oe=e(8973),ze=e(29655),Le=e(91567),Pe=e(58007),C=e(37197),ee=e(8109),R=e(46423),p=e(5951),w=e(31653),f=e(38605),E=e(95061),F=e(48543),re=e(81215),se=e(67720),_e=e(26343),Q=e(69076),g=e(97720),H=e(6924),G=e(53364),Oe=e(91638),ue=Object.defineProperty,it=(bt,It,O)=>It in bt?ue(bt,It,{enumerable:!0,configurable:!0,writable:!0,value:O}):bt[It]=O,ot=(bt,It,O)=>(it(bt,typeof It!="symbol"?It+"":It,O),O);class pt{constructor(It){ot(this,"discoveryApi"),ot(this,"identityApi"),this.discoveryApi=It.discoveryApi,this.identityApi=It.identityApi}async query(It){const{token:O}=await this.identityApi.getCredentials(),S=A().stringify(It),K=`${await this.discoveryApi.getBaseUrl("search")}/query?${S}`,ae=await fetch(K,{headers:O?{Authorization:`Bearer ${O}`}:{}});if(!ae.ok)throw await o.o3.fromResponse(ae);return ae.json()}}const nt=(0,u.HM)({id:"search"}),Ge=(0,u.i1)({id:"search",apis:[(0,u.bW)({api:B.yY,deps:{discoveryApi:r.q,identityApi:r.t},factory:({discoveryApi:bt,identityApi:It})=>new pt({discoveryApi:bt,identityApi:It})})],routes:{root:nt}}),De=Ge.provide((0,u.QJ)({name:"SearchPage",component:()=>e.e(5451).then(e.bind(e,25451)).then(bt=>bt.SearchPage),mountPoint:nt})),Ae=Ge.provide((0,u.NC)({name:"SidebarSearchModal",component:{lazy:()=>e.e(7190).then(e.bind(e,94809)).then(bt=>bt.SidebarSearchModal)}})),Ne=Ge.provide((0,u.NC)({name:"HomePageSearchBar",component:{lazy:()=>e.e(5241).then(e.bind(e,55241)).then(bt=>bt.HomePageSearchBar)}})),ne=()=>{const bt=(0,ce.zy)(),{term:It,setTerm:O,types:S,setTypes:K,pageCursor:ae,setPageCursor:We,filters:qe,setFilters:gt}=(0,B.SQ)(),_t=(0,ye.A)(bt.search);return(0,Y.useEffect)(()=>{if(bt.search===_t)return;const st=A().parse(bt.search.substring(1),{arrayLimit:0})||{};st.filters&&gt(st.filters),st.query&&O(st.query),st.pageCursor&&We(st.pageCursor),st.types&&K(st.types)},[_t,bt,O,K,We,gt]),(0,Y.useEffect)(()=>{const st=A().stringify({query:It,types:S,pageCursor:ae,filters:qe},{arrayFormat:"brackets"}),Zt=`${window.location.pathname}?${st}`;window.history.replaceState(null,document.title,Zt)},[It,S,ae,qe]),null},N=()=>{const bt=(0,ce.P1)();return Y.createElement(B.Lt,null,Y.createElement(ne,null),bt)},X=(0,a.A)(bt=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:bt.spacing(1)},icon:{color:bt.palette.common.black},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:bt.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:bt.spacing(2,0),"&.Mui-expanded":{margin:bt.spacing(2,0)}},accordionDetails:{padding:bt.spacing(0,0,1)}})),Ue=bt=>{const It=X(),{filters:O,setPageCursor:S,setTypes:K,term:ae,types:We}=(0,B.SQ)(),qe=(0,r.u)(B.yY),[gt,_t]=(0,Y.useState)(!0),{defaultValue:st,name:Zt,showCounts:at,types:mt}=bt,Qe=()=>_t(pe=>!pe),Lt=pe=>()=>{K(pe!==""?[pe]:[]),S(void 0),_t(!1)};(0,Y.useEffect)(()=>{st&&K([st])},[]);const St=[{value:"",name:"All",icon:Y.createElement(G.A,null)},...mt],en=We[0]||"",{value:xt}=(0,Oe.default)(async()=>{if(!at)return{};const pe=await Promise.all(St.map(Fe=>Fe.value).map(async Fe=>{const{numberOfResults:Mt}=await qe.query({term:ae,types:Fe?[Fe]:[],filters:We.includes(Fe)||!We.length&&!Fe?O:{},pageLimit:0});return[Fe,Mt!==void 0?`${Mt>=1e4?">10000":Mt} results`:" -- "]}));return Object.fromEntries(pe)},[O,at,ae,We]);return Y.createElement(fe.A,{className:It.card},Y.createElement(le.A,{title:Zt,titleTypographyProps:{variant:"overline"}}),Y.createElement(ie.A,{className:It.cardContent},Y.createElement(oe.A,{className:It.accordion,expanded:gt,onChange:Qe},Y.createElement(ze.A,{classes:{root:It.accordionSummary,content:It.accordionSummaryContent},expandIcon:Y.createElement(H.A,{className:It.icon}),IconButtonProps:{size:"small"}},gt?"Collapse":St.filter(pe=>pe.value===en)[0].name),Y.createElement(Le.A,{classes:{root:It.accordionDetails}},Y.createElement(Pe.A,{className:It.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},St.map(pe=>Y.createElement(Y.Fragment,{key:pe.value},Y.createElement(C.A,null),Y.createElement(ee.A,{selected:We[0]===pe.value||We.length===0&&pe.value==="",onClick:Lt(pe.value),button:!0},Y.createElement(R.A,null,(0,Y.cloneElement)(pe.icon,{className:It.listItemIcon})),Y.createElement(p.A,{primary:pe.name,secondary:xt&&xt[pe.value]})))))))))},te=(0,a.A)(bt=>({tabs:{borderBottom:`1px solid ${bt.palette.textVerySubtle}`},tab:{height:"50px",fontWeight:bt.typography.fontWeightBold,fontSize:bt.typography.pxToRem(13),color:bt.palette.text.primary,minWidth:"130px"}})),we=bt=>{const It=te(),{setPageCursor:O,setTypes:S,types:K}=(0,B.SQ)(),{defaultValue:ae,types:We}=bt,qe=(_t,st)=>{S(st!==""?[st]:[]),O(void 0)};(0,Y.useEffect)(()=>{ae&&S([ae])},[]);const gt=[{value:"",name:"All"},...We];return Y.createElement(w.A,{"aria-label":"List of search types tabs",className:It.tabs,indicatorColor:"primary",value:K.length===0?"":K[0],onChange:qe},gt.map((_t,st)=>Y.createElement(f.A,{key:st,className:It.tab,label:_t.name,value:_t.value})))},ht=(0,a.A)(bt=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:bt.spacing(1)},chip:{margin:2}})),Wt=bt=>{const{className:It,defaultValue:O,name:S,values:K=[]}=bt,ae=ht(),{types:We,setTypes:qe}=(0,B.SQ)();(0,g.A)(()=>{We.length||(O&&Array.isArray(O)?qe(O):O&&qe([O]))});const gt=_t=>{const st=_t.target.value;qe(st)};return Y.createElement(E.A,{className:It,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},Y.createElement(F.A,{className:ae.label,margin:"dense"},S),Y.createElement(re.A,{multiple:!0,variant:"outlined",value:We,onChange:gt,placeholder:"All Results",renderValue:_t=>Y.createElement("div",{className:ae.chips},_t.map(st=>Y.createElement(se.A,{key:st,label:st,className:ae.chip,size:"small"})))},K.map(_t=>Y.createElement(_e.A,{key:_t,value:_t},Y.createElement(Q.A,{checked:We.indexOf(_t)>-1}),Y.createElement(p.A,{primary:_t})))))};Wt.Accordion=bt=>Y.createElement(Ue,{...bt}),Wt.Tabs=bt=>Y.createElement(we,{...bt})},52820:(wn,wt,e)=>{"use strict";e.d(wt,{M:()=>B,T:()=>le,a:()=>A});var o=e(48821),l=e(11638);const A=(0,o.c)({id:"plugin.techradar.service"});var B=(ie=>(ie[ie.Down=-1]="Down",ie[ie.NoChange=0]="NoChange",ie[ie.Up=1]="Up",ie))(B||{});const u=new Array;u.push({id:"adopt",name:"ADOPT",color:"#5BA300",description:"Commodi accusantium culpa sed itaque excepturi rem eum nulla possimus."}),u.push({id:"trial",name:"TRIAL",color:"#009EB0",description:"Recusandae possimus ipsum dolores."}),u.push({id:"assess",name:"ASSESS",color:"#C7BA00",description:"In asperiores repellat error recusandae et adipisci laborum porro."}),u.push({id:"hold",name:"HOLD",color:"#E09B96",description:"Esse mollitia in."});const r=new Array;r.push({id:"infrastructure",name:"Infrastructure"}),r.push({id:"frameworks",name:"Frameworks"}),r.push({id:"languages",name:"Languages"}),r.push({id:"process",name:"Process"});const Y=new Array;Y.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06"),description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}],key:"javascript",id:"javascript",title:"JavaScript",quadrant:"languages",links:[{url:"https://www.javascript.com/",title:"Learn more"},{url:"https://www.typescriptlang.org/",title:"TypeScript"}],description:'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n```ts\nconst x = "3";\n```\n'}),Y.push({timeline:[{moved:-1,ringId:"adopt",date:new Date("2020-08-06"),description:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"}],key:"typescript",id:"typescript",title:"TypeScript",quadrant:"languages",description:"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat"}),Y.push({timeline:[{moved:1,ringId:"adopt",date:new Date("2020-08-06"),description:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur"}],links:[{url:"https://webpack.js.org/",title:"Learn more"}],key:"webpack",id:"webpack",title:"Webpack",quadrant:"frameworks"}),Y.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],links:[{url:"https://reactjs.org/",title:"Learn more"}],key:"react",id:"react",title:"React",quadrant:"frameworks"}),Y.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"code-reviews",id:"code-reviews",title:"Code Reviews",quadrant:"process"}),Y.push({timeline:[{moved:0,ringId:"assess",date:new Date("2020-08-06")}],key:"mob-programming",id:"mob-programming",title:"Mob Programming",quadrant:"process"}),Y.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"docs-like-code",id:"docs-like-code",title:"Docs-like-code",quadrant:"process"}),Y.push({timeline:[{ringId:"hold",date:new Date("2020-08-06")}],key:"force-push",id:"force-push",title:"Force push to master",quadrant:"process"}),Y.push({timeline:[{ringId:"adopt",date:new Date("2020-08-06"),description:"long description"},{ringId:"trial",date:new Date("2020-07-05"),description:"long description"}],links:[{url:"https://github.com",title:"Learn more"}],key:"github-actions",id:"github-actions",title:"GitHub Actions",quadrant:"infrastructure"});const ye={entries:Y,quadrants:r,rings:u};class ce{async load(){return ye}}const a=(0,l.HM)({id:"tech-radar"}),le=(0,l.i1)({id:"tech-radar",routes:{root:a},apis:[(0,l.bW)(A,new ce)]}).provide((0,l.QJ)({name:"TechRadarPage",component:()=>e.e(2822).then(e.bind(e,42822)).then(function(ie){return ie.b}).then(ie=>ie.RadarPage),mountPoint:a}))},51330:(wn,wt,e)=>{"use strict";e.d(wt,{Gr:()=>Zt});var o=e(48821),l=e(11638),A=e(20443),B=e(14041),u=e(87881),r=e(7031),Y=e(64947),ye=e(58837),ce=e(41883),a=e(4321),fe=e(33466),le=e(54917),ie=e(26343),oe=e(5951),ze=e(72501),Le=e(77125),Pe=e(29365),C=e(63798),ee=e(6924),R=e(52536),p=e.n(R),w=e(63188),f=e(33478),E=e(85005),F=e(23180),re=e(18466),se=e(80113),_e=e(10527),Q=e(60367);const g=".md-nav__item--nested .md-toggle",H="@backstage/techdocs-addons/nav-expanded",G=(0,r.A)({root:{position:"absolute",left:"220px",top:"19px",padding:0,minWidth:0}})(Y.A),Oe=(0,r.A)({root:{height:"20px",width:"20px"}})(C.A),ue=(0,r.A)({root:{height:"20px",width:"20px"}})(ee.A),it=()=>{const Qe={expandAllNestedNavs:!1},{value:Lt,set:St}=(0,u.t)(H,{defaultValue:Qe}),[en,xt]=(0,B.useState)(!1),[...pe]=(0,A.$r)([g]),Fe=(0,B.useCallback)(Xt=>{const Bt=Xt.checked,jt=Lt==null?void 0:Lt.expandAllNestedNavs;return!!(jt&&!Bt||!jt&&Bt)},[Lt]);(0,B.useEffect)(()=>{pe!=null&&pe.length&&(xt(!0),pe.forEach(Xt=>{Fe(Xt)&&Xt.click()}))},[Lt,Fe,pe]);const Mt=()=>{St(Xt=>({expandAllNestedNavs:!(Xt!=null&&Xt.expandAllNestedNavs)}))};return B.createElement(B.Fragment,null,en?B.createElement(G,{size:"small",onClick:Mt,"aria-label":Lt!=null&&Lt.expandAllNestedNavs?"collapse-nav":"expand-nav"},Lt!=null&&Lt.expandAllNestedNavs?B.createElement(ue,null):B.createElement(Oe,null)):null)},ot="techdocs-report-issue",pt=`#${ot}`,nt='[title^="Edit this page"]',Ge='[title^="Leave feedback for"]',De='[data-md-component="main"] .md-content',Ae=(Qe,Lt)=>Lt==="github"?(0,w.Fw)(Qe,"blob"):Lt==="gitlab"?(0,w.B)(Qe,"blob"):(console.error(`Invalid SCM type ${Lt} found in ReportIssue addon for URL ${Qe}!`),Qe),Ne=Qe=>{const Lt=Qe.toString().substring(0,70),St=Lt.length===70?"...":"";return`Documentation feedback: ${Lt}${St}`},ne=(Qe,Lt,St)=>{const en="## Documentation Feedback \u{1F4DD}",xt="#### The highlighted text:",pe="#### The comment on the text:",Fe="_>replace this line with your comment<_",Mt=Qe.toString().trim().split(`
`).map(Bt=>`> ${Bt.trim()}`).join(`
`),Xt=[`${St} URL: <${window.location.href}> 
Markdown URL: <${Lt}>`];return`${en}

 ${xt} 

 ${Mt}

 ${pe} 
 ${Fe}

 ___
${Xt}`},N=Qe=>{var Lt,St;const en={title:"",body:""},xt=(0,A.k0)(Qe),[pe]=(0,A.$r)([nt]),Fe=(Lt=pe==null?void 0:pe.href)!=null?Lt:"",Mt=(0,o.u)(f.YT),Bt=(0,o.u)(o.p).getOptionalString("app.title")||"Backstage";if(!xt||!Fe)return en;const jt=(St=Mt.byUrl(Fe))==null?void 0:St.type;return jt?{title:Ne(xt),body:ne(xt,Ae(Fe,jt),Bt)}:en},X=()=>{var Qe,Lt;const St=(0,o.u)(f.YT),[en]=(0,A.$r)([nt]),xt=(Qe=en==null?void 0:en.href)!=null?Qe:"";if(!xt)return null;const pe=(Lt=St.byUrl(xt))==null?void 0:Lt.type;return pe?{...p()(Ae(xt,pe)),type:pe}:null},Ue=(0,ye.A)(Qe=>({root:{display:"grid",gridGap:Qe.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:Qe.palette.common.black,fontSize:Qe.typography.button.fontSize}})),te=({type:Qe})=>Qe==="github"?F.Hk:E.A,we=({type:Qe})=>Qe==="github"?"Github":"Gitlab",ht=(Qe,Lt)=>{const{title:St,body:en}=Lt,xt=encodeURIComponent(St),pe=encodeURIComponent(en),{protocol:Fe,resource:Mt,owner:Xt,name:Bt,type:jt}=Qe,Ln=`${Fe}://${Mt}/${Xt}/${Bt}`,pn=encodeURI(Ln);return jt==="github"?`${pn}/issues/new?title=${xt}&body=${pe}`:`${pn}/issues/new?issue[title]=${xt}&issue[description]=${pe}`},Wt=({template:Qe,repository:Lt})=>{const St=Ue(),en=te(Lt),xt=ht(Lt,Qe);return B.createElement(F.N_,{className:St.root,to:xt,target:"_blank"},B.createElement(en,null)," Open new ",we(Lt)," issue")},bt=(0,ye.A)(Qe=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:Qe.spacing(1),zIndex:Qe.zIndex.tooltip,background:Qe.palette.common.white}})),It=({debounceTime:Qe=500,templateBuilder:Lt})=>{const St=bt(),[en,xt]=(0,B.useState)(),pe=X(),Fe=N(Qe),Mt=(0,A.k0)(Qe),[Xt,Bt]=(0,A.$r)([De,Ge]);let[jt]=(0,A.$r)([pt]);return Bt&&(Bt.style.display="none"),(0,B.useEffect)(()=>{if(!pe||!Mt||!Mt.containsNode(Xt,!0)||Mt!=null&&Mt.containsNode(jt,!0))return;const Ln=Xt.getBoundingClientRect(),pn=Mt.getRangeAt(0).getBoundingClientRect(),cn=pn.top-Ln.top,En=50;let lt=cn<En?101:cn-16;if(Ln.top<0){const Ot=Math.abs(Ln.top);cn-Ot<En&&(lt+=89)}xt({top:`${lt}px`,left:`${pn.left+pn.width/2}px`})},[Mt,Xt,jt]),!Mt||!pe||!["github","gitlab"].includes(pe.type)?null:(jt||(jt=document.createElement("div"),jt.setAttribute("id",ot),Xt.prepend(jt)),B.createElement(ce.A,{container:jt},B.createElement(a.A,{"data-testid":"report-issue-addon",className:St.root,style:en},B.createElement(Wt,{repository:pe,template:Lt?Lt({selection:Mt}):Fe}))))},O="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",S=(0,r.A)(Qe=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:Qe.palette.common.white,boxShadow:O,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:O}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:Qe.palette.textSubtle,fontSize:Qe.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(fe.A),K={key:"techdocs.addons.settings.textsize",defaultValue:100},ae=[{value:90},{value:100},{value:115},{value:130},{value:150}],We=(0,ye.A)(Qe=>({container:{color:Qe.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:Qe.spacing(1)},increaseButton:{marginLeft:Qe.spacing(1)}})),qe=()=>{const Qe=We(),Lt=(0,le.A)(),[St]=(0,A.$r)(["body"]),[en,xt]=(0,B.useState)(()=>{const cn=localStorage==null?void 0:localStorage.getItem(K.key);return cn?parseInt(cn,10):K.defaultValue}),pe=(0,B.useMemo)(()=>ae.map(cn=>cn.value),[]),Fe=(0,B.useMemo)(()=>pe.indexOf(en),[pe,en]),Mt=(0,B.useMemo)(()=>pe[0],[pe]),Xt=(0,B.useMemo)(()=>pe[pe.length-1],[pe]),Bt=(0,B.useCallback)(()=>`${en}%`,[en]),jt=(0,B.useCallback)((cn,En)=>{Array.isArray(En)||(xt(En),localStorage==null||localStorage.setItem(K.key,String(En)))},[xt]),Ln=(0,B.useCallback)(cn=>{jt(cn,pe[Fe-1])},[Fe,pe,jt]),pn=(0,B.useCallback)(cn=>{jt(cn,pe[Fe+1])},[Fe,pe,jt]);return(0,B.useEffect)(()=>{var cn,En;if(!St)return;const lt=(En=(cn=Lt.typography)==null?void 0:cn.htmlFontSize)!=null?En:16;St.style.setProperty("--md-typeset-font-size",`${lt*(en/100)}px`)},[St,en,Lt]),B.createElement(ie.A,{className:Qe.menuItem,button:!0,disableRipple:!0},B.createElement(oe.A,{primary:B.createElement(ze.A,{variant:"subtitle2",color:"textPrimary"},"Text size"),secondary:B.createElement(Le.A,{className:Qe.container},B.createElement(Pe.A,{className:Qe.decreaseButton,size:"small",edge:"start",disabled:en===Mt,onClick:Ln,"aria-label":"Decrease text size"},B.createElement(se.A,null)),B.createElement(S,{value:en,"aria-labelledby":"text-size-slider",getAriaValueText:Bt,valueLabelDisplay:"on",valueLabelFormat:Bt,marks:ae,step:null,min:Mt,max:Xt,onChangeCommitted:jt}),B.createElement(Pe.A,{className:Qe.increaseButton,size:"small",edge:"end",disabled:en===Xt,onClick:pn,"aria-label":"Increase text size"},B.createElement(re.A,null))),disableTypography:!0}))},gt=()=>{const Qe=(0,A.$r)(["img"]);return(0,B.useEffect)(()=>{let Lt=null,St=new _e.A({pswpModule:Q.A,initialZoomLevel:1,secondaryZoomLevel:en=>{const xt=en.elementSize.x,pe=en.elementSize.y,Fe=en.panAreaSize.x,Mt=en.panAreaSize.y,Xt=Fe/xt,Bt=Mt/pe;return Math.min(Xt,Bt)},wheelToZoom:!0,arrowPrevSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosIcon" aria-label="fontSize large"><path d="M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"></path></svg>',arrowNextSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon" aria-label="fontSize large"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg>',closeSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CloseIcon" aria-label="fontSize large"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',zoomSVG:`<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomIcon" aria-label="fontSize large">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z" id="photoswipe-zoom-icon-zoomin-path"></path><path d="M12 10H 7 V 9 H 12 Z" id="photoswipe-zoom-icon-zoomout-path">
        </svg>`});return Qe.forEach((en,xt)=>{en.onclick=()=>(Lt===null&&(Lt=Qe.map(pe=>({element:pe,src:pe.src,msrc:pe.src,alt:pe.alt,width:pe.clientWidth,height:pe.clientHeight}))),St.loadAndOpen(xt,Lt),!1)}),St.init(),()=>{St.destroy(),St=null}},[Qe]),null},_t=(0,l.i1)({id:"techdocsModuleAddonsContrib"}),st=_t.provide((0,A.Hr)({name:"ExpandableNavigation",location:A.eK.PrimarySidebar,component:it})),Zt=_t.provide((0,A.Hr)({name:"ReportIssue",location:A.eK.Content,component:It})),at=_t.provide((0,A.Hr)({name:"TextSize",location:A.eK.Settings,component:qe})),mt=_t.provide((0,A.Hr)({name:"LightBox",location:A.eK.Content,component:gt}))},20443:(wn,wt,e)=>{"use strict";e.d(wt,{$r:()=>nt,AF:()=>Le,Hr:()=>ee,K$:()=>Oe,R7:()=>g,V1:()=>H,Wm:()=>ze,YR:()=>f,_$:()=>it,eK:()=>G,eh:()=>ot,k0:()=>De,l9:()=>E,po:()=>Pe,sm:()=>F});var o=e(14041),l=e(18690),A=e(11638),B=e(48821),u=e(91638),r=e(38282),Y=e(29835),ye=e(97388),ce=e(9394),a=e(22856),fe=e(91360),le=e(23180),ie=e(12784),oe=e.n(ie);const ze="techdocs.addons.addon.v1",Le="techdocs.addons.wrapper.v1",Pe=()=>null;(0,A.h3)(Pe,Le,!0);const C=Ae=>`${ze}.${Ae.toLocaleLowerCase("en-US")}`;function ee(Ae){const{name:Ne,component:ne}=Ae;return(0,A.zZ)({name:Ne,component:{sync:N=>o.createElement(ne,{...N})},data:{[ze]:Ae,[C(Ne)]:!0}})}const R=(Ae,Ne)=>Ae.selectByComponentData({key:Ne}).getElements()[0],p=Ae=>Ae.selectByComponentData({key:Le}).selectByComponentData({key:ze}),w=Ae=>Ae.selectByComponentData({key:Le}).findComponentData({key:ze}),f=()=>{const Ae=(0,l.P1)(),Ne=(0,A.OJ)(Ae,p),ne=(0,A.OJ)(Ae,w),N=(0,o.useCallback)(te=>{var we;if(!Ne||!te)return null;const ht=C(te.name);return(we=R(Ne,ht))!=null?we:null},[Ne]),X=(0,o.useCallback)(te=>{const we=ne.find(ht=>ht.name===te);return we?N(we):null},[ne,N]),Ue=(0,o.useCallback)(te=>{const we=ne.filter(ht=>ht.location===te);return we.length?we.map(N):null},[ne,N]);return{renderComponentByName:X,renderComponentsByLocation:Ue}},E=(0,B.c)({id:"plugin.techdocs.service"}),F=(0,B.c)({id:"plugin.techdocs.storageservice"});function re(Ae,Ne){return Ne.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(Ae.kind=Ae.kind.toLocaleLowerCase(),Ae.name=Ae.name.toLocaleLowerCase(),Ae.namespace=Ae.namespace.toLocaleLowerCase()),Ae}const se=(Ae,Ne)=>(0,Y.U2)(Ae)===(0,Y.U2)(Ne),_e={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},Q=(0,ye.tK)("techdocs-reader-page-context"),g=(0,o.memo)(Ae=>{const{entityRef:Ne,children:ne}=Ae,N=(0,B.u)(E),X=(0,B.u)(B.p),Ue=(0,u.default)(async()=>N.getEntityMetadata(Ne),[Ne]),te=(0,r.A)(async()=>N.getTechDocsMetadata(Ne),[Ne]),[we,ht]=(0,o.useState)(_e.title),[Wt,bt]=(0,o.useState)(_e.subtitle),[It,O]=(0,o.useState)(_e.shadowRoot);(0,o.useEffect)(()=>{It&&!te.value&&!te.loading&&te.retry()},[te.value,te.loading,It,te.retry,te]);const S={metadata:te,entityRef:re(Ne,X),entityMetadata:Ue,shadowRoot:It,setShadowRoot:O,title:we,setTitle:ht,subtitle:Wt,setSubtitle:bt},K=(0,ye.Bl)({1:S});return o.createElement(A.Ig,{attributes:{entityRef:(0,Y.U2)(Ne)}},o.createElement(Q.Provider,{value:K},ne instanceof Function?ne(S):ne))},(Ae,Ne)=>se(Ae.entityRef,Ne.entityRef)),H=()=>{const Ae=(0,o.useContext)(Q);if(Ae===void 0)return _e;const Ne=Ae.atVersion(1);if(Ne===void 0)throw new Error("No context found for version 1.");return Ne},G=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"}),Oe="TECH_DOCS_SHADOW_DOM_STYLE_LOAD",ue=Ae=>{(0,o.useEffect)(()=>{var Ne;if(!Ae)return()=>{};const ne=Ae.querySelectorAll('head > link[rel="stylesheet"]');let N=(Ne=ne==null?void 0:ne.length)!=null?Ne:0;const X=new CustomEvent(Oe);if(!N)return Ae.dispatchEvent(X),()=>{};const Ue=()=>{--N===0&&Ae.dispatchEvent(X)};return ne==null||ne.forEach(te=>{te.addEventListener("load",Ue)}),()=>{ne==null||ne.forEach(te=>{te.removeEventListener("load",Ue)})}},[Ae])},it=Ae=>{const[Ne,ne]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{if(!Ae)return()=>{};ne(!0);const N=Ae.style;N.setProperty("opacity","0");const X=()=>{ne(!1),N.setProperty("opacity","1")};return Ae.addEventListener(Oe,X),()=>{Ae.removeEventListener(Oe,X)}},[Ae]),Ne},ot=Ae=>{const{element:Ne,onAppend:ne,children:N}=Ae,[X,Ue]=(0,o.useState)((0,ce.vt)({...(0,a.A)(),insertionPoint:void 0}));ue(Ne);const te=it(Ne),we=(0,o.useCallback)(ht=>{if(!Ne||!ht)return;Ue((0,ce.vt)({...(0,a.A)(),insertionPoint:Ne.querySelector("head")||void 0}));let Wt=ht.shadowRoot;Wt||(Wt=ht.attachShadow({mode:"open"})),Wt.replaceChildren(Ne),typeof ne=="function"&&ne(Wt)},[Ne,ne]);return o.createElement(o.Fragment,null,te&&o.createElement(le.ke,null),o.createElement(fe.Ay,{jss:X,sheetsManager:new Map},o.createElement("div",{ref:we,"data-testid":"techdocs-native-shadowroot"}),N))},pt=()=>{const{shadowRoot:Ae}=H();return Ae},nt=Ae=>{const Ne=pt();return Ne?Ae.map(ne=>Ne==null?void 0:Ne.querySelectorAll(ne)).filter(ne=>ne.length).map(ne=>Array.from(ne)).flat():[]},Ge=Ae=>Ae.toString()&&Ae.rangeCount&&Ae.getRangeAt(0).getBoundingClientRect().top,De=(Ae=0)=>{const Ne=pt(),[ne,N]=(0,o.useState)(null),X=(0,o.useMemo)(()=>oe()(()=>{const Ue=Ne,te=Ue.getSelection?Ue.getSelection():document.getSelection();te&&Ge(te)?N(te):N(null)},Ae),[Ne,N,Ae]);return(0,o.useEffect)(()=>(window.document.addEventListener("selectionchange",X),()=>{X.cancel(),window.document.removeEventListener("selectionchange",X)}),[X]),ne}},3493:(wn,wt,e)=>{"use strict";e.d(wt,{E:()=>ze,a:()=>Pe,c:()=>C,d:()=>ee,t:()=>ie});var o=e(14041),l=e(18690),A=e(29835),B=e(20443),u=e(87266),r=e(11638),Y=e(48821),ye=e(92805),ce=e(76067),a=e(61413),fe=e(58054),le=e(92651);const ie=(0,r.i1)({id:"techdocs",apis:[(0,r.bW)({api:B.sm,deps:{configApi:Y.p,discoveryApi:Y.q,identityApi:Y.t,fetchApi:Y.s},factory:({configApi:_e,discoveryApi:Q,identityApi:g,fetchApi:H})=>new u.a({configApi:_e,discoveryApi:Q,identityApi:g,fetchApi:H})}),(0,r.bW)({api:B.l9,deps:{configApi:Y.p,discoveryApi:Y.q,fetchApi:Y.s},factory:({configApi:_e,discoveryApi:Q,fetchApi:g})=>new u.T({configApi:_e,discoveryApi:Q,fetchApi:g})})],routes:{root:u.r,docRoot:u.b,entityContent:u.c}}),oe=ie.provide((0,r.QJ)({name:"TechdocsPage",component:()=>Promise.resolve().then(function(){return se}).then(_e=>_e.Router),mountPoint:u.r})),ze=ie.provide((0,r.QJ)({name:"EntityTechdocsContent",component:()=>Promise.resolve().then(function(){return se}).then(_e=>_e.EmbeddedDocsRouter),mountPoint:u.c})),Le=ie.provide((0,r.QJ)({name:"TechDocsCustomHome",component:()=>e.e(4777).then(e.bind(e,4777)).then(_e=>_e.TechDocsCustomHome),mountPoint:u.r})),Pe=ie.provide((0,r.QJ)({name:"TechDocsIndexPage",component:()=>Promise.resolve().then(e.bind(e,61413)).then(function(_e){return _e.d}).then(_e=>_e.TechDocsIndexPage),mountPoint:u.r})),C=ie.provide((0,r.QJ)({name:"TechDocsReaderPage",component:()=>e.e(7715).then(e.bind(e,97715)).then(_e=>_e.TechDocsReaderPage),mountPoint:u.b})),ee=ie.provide((0,ye.c)({name:"TechDocsSearchResultListItem",component:()=>Promise.resolve().then(e.bind(e,75018)).then(_e=>_e.TechDocsSearchResultListItem),predicate:_e=>_e.type==="techdocs"})),R="backstage.io/techdocs-entity",p=({entity:_e})=>{var Q,g;let H=(0,A.sM)(_e);if((Q=_e.metadata.annotations)!=null&&Q[R])try{H=(0,A.KU)((g=_e.metadata.annotations)==null?void 0:g[R])}catch{}return o.createElement(C,{entityRef:H},o.createElement(ce.d,null),o.createElement(ce.c,{withSearch:!1}))},w="backstage.io/techdocs-ref",f="backstage.io/techdocs-entity";var se=Object.freeze({__proto__:null,isTechDocsAvailable:_e=>{var Q,g,H,G;return!!((g=(Q=_e==null?void 0:_e.metadata)==null?void 0:Q.annotations)!=null&&g[w])||!!((G=(H=_e==null?void 0:_e.metadata)==null?void 0:H.annotations)!=null&&G[f])},Router:()=>o.createElement(l.BV,null,o.createElement(l.qh,{path:"/",element:o.createElement(a.c,null)}),o.createElement(l.qh,{path:"/:namespace/:kind/:name/*",element:o.createElement(ce.f,null)})),EmbeddedDocsRouter:_e=>{var Q,g;const{children:H}=_e,{entity:G}=(0,fe.u)(),Oe=(0,l.Ye)([{path:"/*",element:o.createElement(p,{entity:G}),children:[{path:"*",element:H}]}]);return((Q=G.metadata.annotations)==null?void 0:Q[w])||((g=G.metadata.annotations)==null?void 0:g[f])?Oe:o.createElement(le.o9,{annotation:[w]})}})},61413:(wn,wt,e)=>{"use strict";e.r(wt),e.d(wt,{D:()=>f,E:()=>E,T:()=>F,a:()=>_e,b:()=>se,c:()=>Q,d:()=>g,t:()=>C});var o=e(14041),l=e(18690),A=e(23180),B=e(92651),u=e(58054),r=e(75757),Y=e(11638),ye=e(48821),ce=e(51100),a=e(45250),fe=e.n(a),le=e(29835),ie=e(87266),oe=e(55290),ze=e(80430),Le=e(80109),Pe=e(15303);function C(H,G){return G.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?H:H.toLocaleLowerCase("en-US")}const ee=(0,ze.A)({root:{color:"#f3ba37"}})(Le.A),R={createCopyDocsUrlAction(H){return G=>({icon:()=>o.createElement(oe.A,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>H(`${window.location.origin}${G.resolved.docsUrl}`)})},createStarEntityAction(H,G){return Oe=>{const ue=Oe.entity,it=H(ue);return{cellStyle:{paddingLeft:"1em"},icon:()=>it?o.createElement(ee,null):o.createElement(Pe.A,null),tooltip:it?"Remove from favorites":"Add to favorites",onClick:()=>G(ue)}}}};function p(H){return H.metadata.title||H.metadata.name}const w={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:H=>o.createElement(A.md,{value:o.createElement(A.N_,{to:H.resolved.docsUrl},p(H.entity)),subvalue:H.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:H})=>o.createElement(B.iI,{entityRefs:H.ownedByRelations,defaultKind:"group"})}},createKindColumn(){return{title:"Kind",field:"entity.kind"}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},f=H=>{const{entities:G,title:Oe,loading:ue,columns:it,actions:ot,options:pt}=H,[,nt]=(0,ce.A)(),Ge=(0,Y.Sf)(ie.b),De=(0,ye.u)(ye.p);if(!G)return null;const Ae=G.map(Ue=>{var te;const we=(0,u.g)(Ue,le.vv);return{entity:Ue,resolved:{docsUrl:Ge({namespace:C((te=Ue.metadata.namespace)!=null?te:"default",De),kind:C(Ue.kind,De),name:C(Ue.metadata.name,De)}),ownedByRelations:we,ownedByRelationsTitle:we.map(ht=>(0,B.SE)(ht,{defaultKind:"group"})).join(", ")}}}),Ne=[w.createNameColumn(),w.createOwnerColumn(),w.createKindColumn(),w.createTypeColumn()],ne=[R.createCopyDocsUrlAction(nt)],N=20,X=Ae&&Ae.length>N;return o.createElement(o.Fragment,null,ue||Ae&&Ae.length>0?o.createElement(A.XI,{isLoading:ue,options:{paging:X,pageSize:N,search:!0,actionsColumnIndex:-1,...pt},data:Ae,columns:it||Ne,actions:ot||ne,title:Oe?`${Oe} (${Ae.length})`:`All (${Ae.length})`}):o.createElement(A.pp,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:o.createElement(A.z9,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};f.columns=w,f.actions=R;const E=H=>{var G,Oe;const{columns:ue,actions:it,options:ot}=H,{loading:pt,error:nt,entities:Ge,filters:De}=(0,B.nK)(),{isStarredEntity:Ae,toggleStarredEntity:Ne}=(0,B.IT)(),[,ne]=(0,ce.A)(),N=(0,a.capitalize)((Oe=(G=De.user)==null?void 0:G.value)!=null?Oe:"all"),X=[R.createCopyDocsUrlAction(ne),R.createStarEntityAction(Ae,Ne)];return nt?o.createElement(A.Bp,{severity:"error",title:"Could not load available documentation."},o.createElement(A.z7,{language:"text",text:nt.toString()})):o.createElement(f,{title:N,entities:Ge,loading:pt,actions:it||X,columns:ue,options:ot})};E.columns=w,E.actions=R;const F=H=>{var G;const{children:Oe}=H,it=`Documentation available in ${(G=(0,ye.u)(ye.p).getOptionalString("organization.name"))!=null?G:"Backstage"}`;return o.createElement(A.dT,{title:"Documentation",subtitle:it,themeId:"documentation"},Oe)};class re{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":r.cr}}}const se=()=>{const{updateFilters:H}=(0,B.nK)();return(0,o.useEffect)(()=>{H({techdocs:new re})},[H]),null},_e=H=>{const{initialFilter:G="owned",columns:Oe,actions:ue}=H;return o.createElement(F,null,o.createElement(A.UC,null,o.createElement(A.dv,{title:""},o.createElement(A.Yl,null,"Discover documentation in your ecosystem.")),o.createElement(B.B9,null,o.createElement(B.GI,null,o.createElement(B.GI.Filters,null,o.createElement(se,null),o.createElement(B.y2,{initialFilter:G}),o.createElement(B.t3,null),o.createElement(B.mo,null)),o.createElement(B.GI.Content,null,o.createElement(E,{actions:ue,columns:Oe}))))))},Q=H=>(0,l.P1)()||o.createElement(_e,{...H});var g=Object.freeze({__proto__:null,TechDocsIndexPage:Q})},76067:(wn,wt,e)=>{"use strict";e.d(wt,{a:()=>mn,c:()=>Je,d:()=>An,f:()=>ln});var o=e(14041),l=e(18690),A=e(23180),B=e(20443),u=e(58837),r=e(99703),Y=e(42899),ye=e(72501),ce=e(29365),a=e(64947),fe=e(73845),le=e(78467),ie=e(268),oe=e(54917),ze=e(7031),Le=e(71677),Pe=e(10437),C=e(50868),ee=e(5893),R=e(41883),p=e(75173),w=e(77125),f=e(37757),E=e(13270),F=e(75018),re=e(74219),se=e(4387),_e=e(32881),Q=e(48821),g=e(11638),H=e(91638),G=e(38282),Oe=e(33478),ue=e(71651),it=e.n(ue),ot=e(63188),pt=e(90292),nt=e(52536),Ge=e.n(nt),De=e(27326),Ae=e(51100),Ne=e(93285),ne=e(13660),N=e(58054),X=e(92651),Ue=e(29835),te=e(45250),we=e.n(te),ht=e(87266),Wt=e(9684);function bt({contentLoading:M,content:J,activeSyncState:be}){return M||be==="BUILD_READY_RELOAD"||!J&&be==="CHECKING"?"CHECKING":!J&&be==="BUILDING"?"INITIAL_BUILD":J?be==="BUILDING"?"CONTENT_STALE_REFRESHING":be==="BUILD_READY"?"CONTENT_STALE_READY":be==="ERROR"?"CONTENT_STALE_ERROR":"CONTENT_FRESH":"CONTENT_NOT_FOUND"}function It(M,J){const be={...M};switch(J.type){case"sync":J.state==="CHECKING"&&(be.buildLog=[]),be.activeSyncState=J.state,be.syncError=J.syncError;break;case"contentLoading":be.contentLoading=!0,be.contentError=void 0;break;case"content":typeof J.path=="string"&&(be.path=J.path),be.contentLoading=!1,be.content=J.content,be.contentError=J.contentError;break;case"buildLog":be.buildLog=be.buildLog.concat(J.log);break;default:throw new Error}return["BUILD_READY","BUILD_READY_RELOAD"].includes(be.activeSyncState)&&["contentLoading","content"].includes(J.type)&&(be.activeSyncState="UP_TO_DATE",be.buildLog=[]),be}function O(M,J,be,Re){var yt,Tt;const[Kt,Jt]=(0,o.useReducer)(It,{activeSyncState:"CHECKING",path:Re,contentLoading:!0,buildLog:[]}),hn=(0,Q.u)(B.sm),{retry:Dn}=(0,G.A)(async()=>{Jt({type:"contentLoading"});try{const Be=await hn.getEntityDocs({kind:M,namespace:J,name:be},Re);return Jt({type:"content",content:Be,path:Re}),Be}catch(Be){Jt({type:"content",contentError:Be,path:Re})}},[hn,M,J,be,Re]),he=(0,o.useRef)({content:void 0,reload:()=>{}});return he.current={content:Kt.content,reload:Dn},(0,H.default)(async()=>{Jt({type:"sync",state:"CHECKING"});const Be=setTimeout(()=>{Jt({type:"sync",state:"BUILDING"})},1e3);try{switch(await hn.syncEntityDocs({kind:M,namespace:J,name:be},Pt=>{Jt({type:"buildLog",log:Pt})})){case"updated":he.current.content?Jt({type:"sync",state:"BUILD_READY"}):(he.current.reload(),Jt({type:"sync",state:"BUILD_READY_RELOAD"}));break;case"cached":Jt({type:"sync",state:"UP_TO_DATE"});break;default:Jt({type:"sync",state:"ERROR",syncError:new Error("Unexpected return state")});break}}catch(At){Jt({type:"sync",state:"ERROR",syncError:At})}finally{clearTimeout(Be)}},[M,be,J,hn,Jt,he]),{state:(0,o.useMemo)(()=>bt({activeSyncState:Kt.activeSyncState,contentLoading:Kt.contentLoading,content:Kt.content}),[Kt.activeSyncState,Kt.content,Kt.contentLoading]),contentReload:Dn,path:Kt.path,content:Kt.content,contentErrorMessage:(yt=Kt.contentError)==null?void 0:yt.toString(),syncErrorMessage:(Tt=Kt.syncError)==null?void 0:Tt.toString(),buildLog:Kt.buildLog}}const S=(0,o.createContext)({}),K=()=>(0,o.useContext)(S),ae=M=>{const{children:J}=M,{"*":be=""}=(0,l.g)(),{entityRef:Re}=(0,B.V1)(),{kind:yt,namespace:Tt,name:Kt}=Re,Jt=O(yt,Tt,Kt,be);return o.createElement(S.Provider,{value:Jt},J instanceof Function?J(Jt):J)},We=M=>J=>o.createElement(ae,null,o.createElement(M,{...J})),qe=M=>M==null?void 0:M.document,gt=M=>{const{entityId:J,entityTitle:be,debounceTime:Re=150}=M,[yt,Tt]=(0,o.useState)(!1),Kt=(0,l.Zp)(),{setFilters:Jt,result:{loading:hn,value:Dn}}=(0,E.SQ)(),[he,Ve]=(0,o.useState)([]);(0,o.useEffect)(()=>{let Ct=!0;if(Ct&&Dn){const Ft=Dn.results.slice(0,10);Ve(Ft)}return()=>{Ct=!1}},[hn,Dn]);const{kind:Be,name:At,namespace:Pt}=J;(0,o.useEffect)(()=>{Jt(Ct=>({...Ct,kind:Be,namespace:Pt,name:At}))},[Be,Pt,At,Jt]);const tn=(Ct,Ft)=>{if(qe(Ft)){const{location:gn}=Ft.document;Kt(gn)}};return o.createElement(E.pY,{"data-testid":"techdocs-search-bar",size:"small",open:yt,getOptionLabel:()=>"",filterOptions:Ct=>Ct,onClose:()=>{Tt(!1)},onFocus:()=>{Tt(!0)},onChange:tn,blurOnSelect:!0,noOptionsText:"No results found",value:null,options:he,renderOption:({document:Ct,highlight:Ft})=>o.createElement(F.TechDocsSearchResultListItem,{result:Ct,lineClamp:3,asListItem:!1,asLink:!1,title:Ct.title,highlight:Ft}),loading:hn,inputDebounceTime:Re,inputPlaceholder:`Search ${be||J.name} docs`,freeSolo:!1})},_t=M=>{const J={term:"",types:["techdocs"],pageCursor:"",filters:M.entityId};return o.createElement(E.Lt,{initialState:J},o.createElement(gt,{...M}))},st=(0,u.A)(M=>(0,r.A)({paper:{width:"100%",[M.breakpoints.up("sm")]:{width:"75%"},[M.breakpoints.up("md")]:{width:"50%"},padding:M.spacing(2.5)},root:{height:"100%",overflow:"hidden"},logs:{background:M.palette.background.default}})),Zt=({buildLog:M,onClose:J})=>{const be=st(),Re=M.length===0?"Waiting for logs...":M.join(`
`);return o.createElement(Y.A,{container:!0,direction:"column",className:be.root,spacing:0,wrap:"nowrap"},o.createElement(Y.A,{item:!0,container:!0,justifyContent:"space-between",alignItems:"center",spacing:0,wrap:"nowrap"},o.createElement(ye.A,{variant:"h5"},"Build Details"),o.createElement(ce.A,{key:"dismiss",title:"Close the drawer",onClick:J,color:"inherit"},o.createElement(_e.A,null))),o.createElement(Y.A,{item:!0,xs:!0},o.createElement(A.rW,{text:Re,classes:{root:be.logs}})))},at=({buildLog:M})=>{const J=st(),[be,Re]=(0,o.useState)(!1);return o.createElement(o.Fragment,null,o.createElement(a.A,{color:"inherit",onClick:()=>Re(!0)},"Show Build Logs"),o.createElement(fe.Ay,{classes:{paper:J.paper},anchor:"right",open:be,onClose:()=>Re(!1)},o.createElement(Zt,{buildLog:M,onClose:()=>Re(!1)})))},mt=({errorMessage:M})=>{const J=(0,Q.u)(Q.p).getOptionalString("techdocs.builder"),be=(0,g.st)(),{entityRef:Re}=(0,B.V1)(),yt=(0,l.zy)();(0,o.useEffect)(()=>{const{pathname:Kt,search:Jt,hash:hn}=yt;be.captureEvent("not-found",`${Kt}${Jt}${hn}`,{attributes:Re})},[be,Re,yt]);let Tt="";return J!=="local"&&(Tt="Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance."),o.createElement(A.M,{status:"404",statusMessage:M||"Documentation not found",additionalInfo:Tt})},Qe=(0,u.A)(M=>({root:{marginBottom:M.spacing(2)},message:{wordBreak:"break-word",overflowWrap:"anywhere"}})),Lt=()=>{let M=null;const J=Qe(),{state:be,contentReload:Re,contentErrorMessage:yt,syncErrorMessage:Tt,buildLog:Kt}=K();return be==="INITIAL_BUILD"&&(M=o.createElement(re.A,{classes:{root:J.root},variant:"outlined",severity:"info",icon:o.createElement(le.A,{size:"24px"}),action:o.createElement(at,{buildLog:Kt})},"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.")),be==="CONTENT_STALE_REFRESHING"&&(M=o.createElement(re.A,{variant:"outlined",severity:"info",icon:o.createElement(le.A,{size:"24px"}),action:o.createElement(at,{buildLog:Kt}),classes:{root:J.root}},"A newer version of this documentation is being prepared and will be available shortly.")),be==="CONTENT_STALE_READY"&&(M=o.createElement(re.A,{variant:"outlined",severity:"success",action:o.createElement(a.A,{color:"inherit",onClick:()=>Re()},"Refresh"),classes:{root:J.root}},"A newer version of this documentation is now available, please refresh to view.")),be==="CONTENT_STALE_ERROR"&&(M=o.createElement(re.A,{variant:"outlined",severity:"error",action:o.createElement(at,{buildLog:Kt}),classes:{root:J.root,message:J.message}},"Building a newer version of this documentation failed."," ",Tt)),be==="CONTENT_NOT_FOUND"&&(M=o.createElement(o.Fragment,null,Tt&&o.createElement(re.A,{variant:"outlined",severity:"error",action:o.createElement(at,{buildLog:Kt}),classes:{root:J.root,message:J.message}},"Building a newer version of this documentation failed."," ",Tt),o.createElement(mt,{errorMessage:yt}))),M},St=/main\.[A-Fa-f0-9]{8}\.min\.css$/,en=/^https:\/\/fonts\.googleapis\.com/,xt=/^https:\/\/fonts\.gstatic\.com/,pe=M=>M.nodeName==="LINK",Fe=M=>{const J=(M==null?void 0:M.getAttribute("href"))||"",be=J.match(St),Re=J.match(en),yt=J.match(xt);return be||Re||yt},Mt=M=>(pe(M)&&!Fe(M)&&M.remove(),M),Xt=M=>M.nodeName==="IFRAME",Bt=(M,J)=>{const be=M.getAttribute("src")||"";try{const{host:Re}=new URL(be);return J.includes(Re)}catch{return!1}},jt=M=>J=>(Xt(J)&&!Bt(J,M)&&J.remove(),J),Ln=()=>{const M=(0,Q.u)(Q.p);return(0,o.useMemo)(()=>M.getOptionalConfig("techdocs.sanitizer"),[M])},pn=()=>{const M=Ln();return(0,o.useCallback)(async J=>{const be=M==null?void 0:M.getOptionalStringArray("allowedIframeHosts");it().addHook("beforeSanitizeElements",Mt);const Re=["link"];return be&&(Re.push("iframe"),it().addHook("beforeSanitizeElements",jt(be))),it().sanitize(J.outerHTML,{ADD_TAGS:Re,FORBID_TAGS:["style"],WHOLE_DOCUMENT:!0,RETURN_DOM:!0})},[M])};var cn=({theme:M})=>`
/*==================  Variables  ==================*/
/*
  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.
  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.
*/

:host {
  /* FONT */
  --md-default-fg-color: ${M.palette.text.primary};
  --md-default-fg-color--light: ${M.palette.text.secondary};
  --md-default-fg-color--lighter: ${(0,ie.a)(M.palette.text.secondary,.7)};
  --md-default-fg-color--lightest: ${(0,ie.a)(M.palette.text.secondary,.3)};

  /* BACKGROUND */
  --md-default-bg-color:${M.palette.background.default};
  --md-default-bg-color--light: ${M.palette.background.paper};
  --md-default-bg-color--lighter: ${(0,ie.a)(M.palette.background.paper,.7)};
  --md-default-bg-color--lightest: ${(0,ie.a)(M.palette.background.paper,.3)};

  /* PRIMARY */
  --md-primary-fg-color: ${M.palette.primary.main};
  --md-primary-fg-color--light: ${M.palette.primary.light};
  --md-primary-fg-color--dark: ${M.palette.primary.dark};
  --md-primary-bg-color: ${M.palette.primary.contrastText};
  --md-primary-bg-color--light: ${(0,ie.a)(M.palette.primary.contrastText,.7)};

  /* ACCENT */
  --md-accent-fg-color: var(--md-primary-fg-color);

  /* SHADOW */
  --md-shadow-z1: ${M.shadows[1]};
  --md-shadow-z2: ${M.shadows[2]};
  --md-shadow-z3: ${M.shadows[3]};

  /* EXTENSIONS */
  --md-admonition-fg-color: var(--md-default-fg-color);
  --md-admonition-bg-color: var(--md-default-bg-color);
  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */
  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z"/></svg>');
  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>');
  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>');
  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>');
  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>');
  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>');
  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg>');
  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z"/></svg>');
  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/></svg>');
  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z"/></svg>');
  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z"/></svg>');
  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');
  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z"/></svg>');
}

:host > * {
  /* CODE */
  --md-code-fg-color: ${M.palette.text.primary};
  --md-code-bg-color: ${M.palette.background.paper};
  --md-code-hl-color: ${(0,ie.X4)(M.palette.warning.main,.5)};
  --md-code-hl-keyword-color: ${M.palette.type==="dark"?M.palette.primary.light:M.palette.primary.dark};
  --md-code-hl-function-color: ${M.palette.type==="dark"?M.palette.secondary.light:M.palette.secondary.dark};
  --md-code-hl-string-color: ${M.palette.type==="dark"?M.palette.success.light:M.palette.success.dark};
  --md-code-hl-number-color: ${M.palette.type==="dark"?M.palette.error.light:M.palette.error.dark};
  --md-code-hl-constant-color: var(--md-code-hl-function-color);
  --md-code-hl-special-color: var(--md-code-hl-function-color);
  --md-code-hl-name-color: var(--md-code-fg-color);
  --md-code-hl-comment-color: var(--md-default-fg-color--light);
  --md-code-hl-generic-color: var(--md-default-fg-color--light);
  --md-code-hl-variable-color: var(--md-default-fg-color--light);
  --md-code-hl-operator-color: var(--md-default-fg-color--light);
  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);

  /* TYPESET */
  --md-typeset-font-size: 1rem;
  --md-typeset-color: var(--md-default-fg-color);
  --md-typeset-a-color: ${M.palette.link};
  --md-typeset-table-color: ${M.palette.text.primary};
  --md-typeset-del-color: ${M.palette.type==="dark"?(0,ie.X4)(M.palette.error.dark,.5):(0,ie.X4)(M.palette.error.light,.5)};
  --md-typeset-ins-color: ${M.palette.type==="dark"?(0,ie.X4)(M.palette.success.dark,.5):(0,ie.X4)(M.palette.success.light,.5)};
  --md-typeset-mark-color: ${M.palette.type==="dark"?(0,ie.X4)(M.palette.warning.dark,.5):(0,ie.X4)(M.palette.warning.light,.5)};
}

@media screen and (max-width: 76.1875em) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .9rem;
  }
}

@media screen and (max-width: 600px) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .7rem;
  }
}
`,En=({theme:M})=>`
/*==================  Reset  ==================*/

body {
  --md-text-color: var(--md-default-fg-color);
  --md-text-link-color: var(--md-accent-fg-color);
  --md-text-font-family: ${M.typography.fontFamily};
  font-family: var(--md-text-font-family);
  background-color: unset;
}
`;const lt="224px";var Ot=({theme:M,sidebar:J})=>`
/*==================  Layout  ==================*/

/* mkdocs material v9 compat */
.md-nav__title {
  color: var(--md-default-fg-color);
}

.md-grid {
  max-width: 100%;
  margin: 0;
}

.md-nav {
  font-size: calc(var(--md-typeset-font-size) * 0.9);
}
.md-nav__link {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.md-nav__icon {
  height: 20px !important;
  width: 20px !important;
  margin-left:${M.spacing(1)}px;
}
.md-nav__icon svg {
  margin: 0;
  width: 20px !important;
  height: 20px !important;
}
.md-nav__icon:after {
  width: 20px !important;
  height: 20px !important;
}

.md-nav__item--active > .md-nav__link, a.md-nav__link--active {
  text-decoration: underline;
  color: var(--md-typeset-a-color);
}

.md-main__inner {
  margin-top: 0;
}

.md-sidebar {
  bottom: 75px;
  position: fixed;
  width: 16rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-color: rgb(193, 193, 193) #eee;
  scrollbar-width: thin;
}
.md-sidebar .md-sidebar__scrollwrap {
  width: calc(12.1rem);
}
.md-sidebar--secondary {
  right: ${M.spacing(3)}px;
}
.md-sidebar::-webkit-scrollbar {
  width: 5px;
}
.md-sidebar::-webkit-scrollbar-button {
  width: 5px;
  height: 5px;
}
.md-sidebar::-webkit-scrollbar-track {
  background: #eee;
  border: 1 px solid rgb(250, 250, 250);
  box-shadow: 0px 0px 3px #dfdfdf inset;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb {
  width: 5px;
  background: rgb(193, 193, 193);
  border: transparent;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb:hover {
  background: rgb(125, 125, 125);
}

.md-content {
  max-width: calc(100% - 16rem * 2);
  margin-left: 16rem;
  margin-bottom: 50px;
}

.md-footer {
  position: fixed;
  bottom: 0px;
  pointer-events: none;
}

.md-footer-nav__link, .md-footer__link {
  pointer-events: all;
}

.md-footer__title {
  background-color: unset;
}
.md-footer-nav__link, .md-footer__link {
  width: 16rem;
}

.md-dialog {
  background-color: unset;
}

@media screen and (min-width: 76.25em) {
  .md-sidebar {
    height: auto;
  }
}

@media screen and (max-width: 76.1875em) {
  .md-nav {
    transition: none !important;
    background-color: var(--md-default-bg-color)
  }
  .md-nav--primary .md-nav__title {
    cursor: auto;
    color: var(--md-default-fg-color);
    font-weight: 700;
    white-space: normal;
    line-height: 1rem;
    height: auto;
    display: flex;
    flex-flow: column;
    row-gap: 1.6rem;
    padding: 1.2rem .8rem .8rem;
    background-color: var(--md-default-bg-color);
  }
  .md-nav--primary .md-nav__title~.md-nav__list {
    box-shadow: none;
  }
  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {
    border-top: none;
  }
  .md-nav--primary .md-nav__title .md-nav__button {
    display: none;
  }
  .md-nav--primary .md-nav__title .md-nav__icon {
    color: var(--md-default-fg-color);
    position: static;
    height: auto;
    margin: 0 0 0 -0.2rem;
  }
  .md-nav--primary > .md-nav__title [for="none"] {
    padding-top: 0;
  }
  .md-nav--primary .md-nav__item {
    border-top: none;
  }
  .md-nav--primary :is(.md-nav__title,.md-nav__item) {
    font-size : var(--md-typeset-font-size);
  }
  .md-nav .md-source {
    display: none;
  }

  .md-sidebar {
    height: 100%;
  }
  .md-sidebar--primary {
    width: 12.1rem !important;
    z-index: 200;
    left: ${J.isPinned?`calc(-12.1rem + ${lt})`:"calc(-12.1rem + 72px)"} !important;
  }
  .md-sidebar--secondary:not([hidden]) {
    display: none;
  }

  .md-content {
    max-width: 100%;
    margin-left: 0;
  }

  .md-header__button {
    margin: 0.4rem 0;
    margin-left: 0.4rem;
    padding: 0;
  }

  .md-overlay {
    left: 0;
  }

  .md-footer {
    position: static;
    padding-left: 0;
  }
  .md-footer-nav__link {
    /* footer links begin to overlap at small sizes without setting width */
    width: 50%;
  }
}

@media screen and (max-width: 600px) {
  .md-sidebar--primary {
    left: -12.1rem !important;
    width: 12.1rem;
  }
}


@media print {
  .md-sidebar,
  #toggle-sidebar {
    display: none;
  }
  
  .md-content {
    margin: 0;
    width: 100%;
    max-width: 100%;
  }
}
`;const Vt=["h1","h2","h3","h4","h5","h6"];var Dt=({theme:M})=>`
/*==================  Typeset  ==================*/

.md-typeset {
  font-size: var(--md-typeset-font-size);
}

${Vt.reduce((J,be)=>{var Re;const yt=(Re=M.typography.htmlFontSize)!=null?Re:16,Tt=M.typography[be],{lineHeight:Kt,fontFamily:Jt,fontWeight:hn,fontSize:Dn}=Tt,he=Ve=>{let Be=1;return typeof Ve=="number"&&(Be=Ve/yt*.6),typeof Ve=="string"&&(Be=Ve.replace("rem","")),`calc(${Be} * var(--md-typeset-font-size))`};return J.concat(`
    .md-typeset ${be} {
      color: var(--md-default-fg-color);
      line-height: ${Kt};
      font-family: ${Jt};
      font-weight: ${hn};
      font-size: ${he(Dn)};
    }
  `)},"")}

.md-typeset .md-content__button {
  color: var(--md-default-fg-color);
}

.md-typeset hr {
  border-bottom: 0.05rem dotted ${M.palette.divider};
}

.md-typeset details {
  font-size: var(--md-typeset-font-size) !important;
}
.md-typeset details summary {
  padding-left: 2.5rem !important;
}
.md-typeset details summary:before,
.md-typeset details summary:after {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: rotate(0deg) translateY(-50%) !important;
}
.md-typeset details[open] > summary:after {
  transform: rotate(90deg) translateX(-50%) !important;
}

.md-typeset blockquote {
  color: var(--md-default-fg-color--light);
  border-left: 0.2rem solid var(--md-default-fg-color--light);
}

.md-typeset table:not([class]) {
  font-size: var(--md-typeset-font-size);
  border: 1px solid var(--md-default-fg-color);
  border-bottom: none;
  border-collapse: collapse;
}
.md-typeset table:not([class]) th {
  font-weight: bold;
}
.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {
  border-bottom: 1px solid var(--md-default-fg-color);
}

.md-typeset pre > code::-webkit-scrollbar-thumb {
  background-color: hsla(0, 0%, 0%, 0.32);
}
.md-typeset pre > code::-webkit-scrollbar-thumb:hover {
  background-color: hsla(0, 0%, 0%, 0.87);
}

.md-typeset code {
  word-break: keep-all;
}
`,ct=()=>`
/*==================  Animations  ==================*/
/*
  Disable CSS animations on link colors as they lead to issues in dark mode.
  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.
*/
.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {
  transition: none;
}
`,je=({theme:M})=>`
/*==================  Extensions  ==================*/

/* HIGHLIGHT */
.highlight .md-clipboard:after {
  content: unset;
}

.highlight .nx {
  color: ${M.palette.type==="dark"?"#ff53a3":"#ec407a"};
}

/* CODE HILITE */
.codehilite .gd {
  background-color: ${M.palette.type==="dark"?"rgba(248,81,73,0.65)":"#fdd"};
}

.codehilite .gi {
  background-color: ${M.palette.type==="dark"?"rgba(46,160,67,0.65)":"#dfd"};
}

/* TABBED */
.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),
.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),
.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),
.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),
.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),
.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),
.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),
.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),
.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),
.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),
.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),
.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),
.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),
.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),
.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),
.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),
.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),
.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),
.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),
.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {
  color: var(--md-accent-fg-color);
  border-color: var(--md-accent-fg-color);
}

/* TASK-LIST */
.task-list-control .task-list-indicator::before {
  background-color: ${M.palette.action.disabledBackground};
}
.task-list-control [type="checkbox"]:checked + .task-list-indicator:before {
 background-color: ${M.palette.success.main};
}

/* ADMONITION */
.admonition {
  font-size: var(--md-typeset-font-size) !important;
}
.admonition .admonition-title {
  padding-left: 2.5rem !important;
}

.admonition .admonition-title:before {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: translateY(-50%) !important;
}
`;const Yt=[cn,En,Ot,Dt,ct,je],Gt=()=>(0,A.Ut)(),sn=()=>{const M=Gt(),J=(0,oe.A)();return(0,o.useMemo)(()=>{const be={theme:J,sidebar:M};return Yt.reduce((Re,yt)=>Re+yt(be),"")},[J,M])},bn=()=>{const M=sn();return(0,o.useCallback)(J=>(J.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<style>${M}</style>`),J),[M])},In=(M,J,be)=>{const Re=M==="src"&&J.endsWith(".svg"),yt=!J.match(/^([a-z]*:)?\/\//i),Tt=J.startsWith(be);return Re&&(yt||Tt)},Pn=({techdocsStorageApi:M,entityId:J,path:be})=>async Re=>{const yt=await M.getApiOrigin(),Tt=async(Kt,Jt)=>{for(const hn of Kt)if(hn.hasAttribute(Jt)){const Dn=hn.getAttribute(Jt);if(!Dn)return;const he=await M.getBaseUrl(Dn,J,be);if(In(Jt,Dn,yt))try{const Be=await(await fetch(he,{credentials:"include"})).text();hn.setAttribute(Jt,`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(Be)))}`)}catch{hn.setAttribute("alt",`Error: ${Dn}`)}else hn.setAttribute(Jt,he)}};return await Promise.all([Tt(Re.querySelectorAll("img"),"src"),Tt(Re.querySelectorAll("script"),"src"),Tt(Re.querySelectorAll("source"),"src"),Tt(Re.querySelectorAll("link"),"href"),Tt(Re.querySelectorAll("a[download]"),"href")]),Re};let qn;qn=Promise.resolve().then(e.t.bind(e,25873,19));function Gn(M,J){qn.then(be=>{"createRoot"in be?be.createRoot(J).render(M):be.render(M,J)})}const Nn=M=>J=>{var be;const Re=J.querySelector('[title="Edit this page"]');if(!Re||!Re.href)return J;const yt=new URL(Re.href),Tt=M.byUrl(yt);if((Tt==null?void 0:Tt.type)!=="github"&&(Tt==null?void 0:Tt.type)!=="gitlab")return J;const Kt=((be=J.querySelector("article>h1"))==null?void 0:be.childNodes[0].textContent)||"",Jt=encodeURIComponent(`Documentation Feedback: ${Kt}`),hn=encodeURIComponent(`Page source:
${Re.href}

Feedback:`),Dn=(Tt==null?void 0:Tt.type)==="github"?(0,ot.Fw)(yt.href,"blob"):yt.href,he=Ge()(Dn),Ve=`/${he.organization}/${he.name}`,Be=Re.cloneNode();switch(Tt==null?void 0:Tt.type){case"gitlab":Be.href=`${yt.origin}${Ve}/issues/new?issue[title]=${Jt}&issue[description]=${hn}`;break;case"github":Be.href=`${yt.origin}${Ve}/issues/new?title=${Jt}&body=${hn}`;break;default:return J}return Gn(o.createElement(pt.A),Be),Be.style.paddingLeft="5px",Be.title="Leave feedback for this page",Be.id="git-feedback-link",Re==null||Re.insertAdjacentElement("beforebegin",Be),J},On=()=>M=>{const J=M.querySelector('.md-header label[for="__drawer"]'),be=M.querySelector("article");if(!J||!be)return M;const Re=J.cloneNode();return Gn(o.createElement(De.A),Re),Re.id="toggle-sidebar",Re.title="Toggle Sidebar",Re.classList.add("md-content__button"),Re.style.setProperty("padding","0 0 0 5px"),Re.style.setProperty("margin","0.4rem 0 0.4rem 0.4rem"),be==null||be.prepend(Re),M},Jn=()=>M=>(((be,Re)=>{Array.from(be).filter(yt=>yt.hasAttribute(Re)).forEach(yt=>{const Tt=yt.getAttribute(Re);if(Tt){Tt.match(/^https?:\/\//i)&&yt.setAttribute("target","_blank");try{const Kt=aa(window.location.href);yt.setAttribute(Re,new URL(Tt,Kt).toString())}catch{yt.replaceWith(yt.textContent||Tt)}}})})(Array.from(M.getElementsByTagName("a")),"href"),M);function aa(M){const J=new URL(M);return!J.pathname.endsWith("/")&&!J.pathname.endsWith(".html")&&(J.pathname+="/"),J.toString()}const ft=({baseUrl:M,onClick:J})=>be=>(Array.from(be.getElementsByTagName("a")).forEach(Re=>{Re.addEventListener("click",yt=>{const Kt=Re.getAttribute("href");Kt&&Kt.startsWith(M)&&!Re.hasAttribute("download")&&(yt.preventDefault(),J(yt,Kt))})}),be),m=(0,ze.A)(M=>({tooltip:{fontSize:"inherit",color:M.palette.text.primary,margin:0,padding:M.spacing(.5),backgroundColor:"transparent",boxShadow:"none"}}))(Le.Ay),D=()=>o.createElement(Pe.A,null,o.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})),j=({text:M})=>{const[J,be]=(0,o.useState)(!1),[,Re]=(0,Ae.A)(),yt=(0,o.useCallback)(()=>{Re(M),be(!0)},[M,Re]),Tt=(0,o.useCallback)(()=>{be(!1)},[be]);return o.createElement(m,{title:"Copied to clipboard",placement:"left",open:J,onClose:Tt,leaveDelay:1e3},o.createElement(ce.A,{style:{color:"inherit"},className:"md-clipboard md-icon",onClick:yt},o.createElement(D,null)))},de=M=>J=>{var be;const Re=J.querySelectorAll("pre > code");for(const yt of Re){const Tt=yt.textContent||"",Kt=document.createElement("div");(be=yt==null?void 0:yt.parentElement)==null||be.prepend(Kt),Gn(o.createElement(C.A,{theme:M},o.createElement(j,{text:Tt})),Kt)}return J},x=()=>M=>{var J;return(J=M.querySelector(".md-header"))==null||J.remove(),M},$=()=>M=>{var J,be;return(J=M.querySelector(".md-footer .md-copyright"))==null||J.remove(),(be=M.querySelector(".md-footer-copyright"))==null||be.remove(),M},q=({onLoading:M,onLoaded:J})=>be=>(M(),be.addEventListener(B.K$,function Re(){J(),be.removeEventListener(B.K$,Re)}),be),xe=()=>M=>(setTimeout(()=>{const J=M==null?void 0:M.querySelectorAll("li.md-nav__item--active");J.length!==0&&(J.forEach(Re=>{const yt=Re==null?void 0:Re.querySelector("input");yt!=null&&yt.checked||yt==null||yt.click()}),J[J.length-1].scrollIntoView())},200),M),ke=async(M,J)=>{let be;if(typeof M=="string")be=new DOMParser().parseFromString(M,"text/html").documentElement;else if(M instanceof Element)be=M;else throw new Error("dom is not a recognized type");for(const Re of J)be=await Re(be);return be};function vt(M,J){const be=new URL(J),Re=`${be.origin}${be.pathname.replace(/\/$/,"")}`,yt=M.replace(Re,"").replace(/^\/+/,""),Tt=new URL(`http://localhost/${yt}`);return`${Tt.pathname}${Tt.search}${Tt.hash}`}function kt(){const M=(0,l.Zp)(),be=(0,Q.u)(Q.p).getOptionalString("app.baseUrl");return(0,o.useCallback)(yt=>{let Tt=yt;if(be)try{Tt=vt(yt,be)}catch{}M(Tt)},[M,be])}const V="screen and (max-width: 76.1875em)",ve=M=>{const J=kt(),be=(0,oe.A)(),Re=(0,ee.A)(V),yt=pn(),Tt=bn(),Kt=(0,g.st)(),Jt=(0,Q.u)(B.sm),hn=(0,Q.u)(Oe.YT),{state:Dn,path:he,content:Ve}=K(),[Be,At]=(0,o.useState)(null),Pt=(0,B._$)(Be),tn=(0,o.useCallback)(()=>{if(!Be)return;Be.querySelectorAll(".md-sidebar").forEach(an=>{var fn,Wn,jn;if(Re)an.style.top="0px";else{const ea=document==null?void 0:document.querySelector(".techdocs-reader-page"),kn=(fn=ea==null?void 0:ea.getBoundingClientRect().top)!=null?fn:0;let Fn=(Wn=Be.getBoundingClientRect().top)!=null?Wn:0;const ra=Be.querySelector(".md-container > .md-tabs"),la=(jn=ra==null?void 0:ra.getBoundingClientRect().height)!=null?jn:0;Fn<kn&&(Fn=kn),an.style.top=`${Math.max(Fn,0)+la}px`}an.style.setProperty("opacity","1")})},[Be,Re]);(0,o.useEffect)(()=>(window.addEventListener("resize",tn),window.addEventListener("scroll",tn,!0),()=>{window.removeEventListener("resize",tn),window.removeEventListener("scroll",tn,!0)}),[Be,tn]);const Ct=(0,o.useCallback)(()=>{if(!Be)return;const Cn=Be.querySelector(".md-footer");Cn&&(Cn.style.width=`${Be.getBoundingClientRect().width}px`)},[Be]);(0,o.useEffect)(()=>(window.addEventListener("resize",Ct),()=>{window.removeEventListener("resize",Ct)}),[Be,Ct]),(0,o.useEffect)(()=>{Pt||(Ct(),tn())},[Dn,Pt,Ct,tn]);const Ft=(0,o.useCallback)((Cn,an)=>ke(Cn,[yt,Pn({techdocsStorageApi:Jt,entityId:M,path:an}),Jn(),On(),x(),$(),Nn(hn),Tt]),[M,hn,Jt,yt,Tt]),gn=(0,o.useCallback)(async Cn=>ke(Cn,[xe(),de(be),ft({baseUrl:window.location.origin,onClick:(an,fn)=>{var Wn,jn;const ea=an.ctrlKey||an.metaKey,kn=new URL(fn),Fn=((Wn=an.target)==null?void 0:Wn.innerText)||fn,ra=fn.replace(window.location.origin,"");Kt.captureEvent("click",Fn,{attributes:{to:ra}}),kn.hash?ea?window.open(fn,"_blank"):(J(fn),(jn=Cn==null?void 0:Cn.querySelector(`[id="${kn.hash.slice(1)}"]`))==null||jn.scrollIntoView()):ea?window.open(fn,"_blank"):J(fn)}}),q({onLoading:()=>{},onLoaded:()=>{var an;(an=Cn.querySelector(".md-nav__title"))==null||an.removeAttribute("for")}}),q({onLoading:()=>{Array.from(Cn.querySelectorAll(".md-sidebar")).forEach(fn=>{fn.style.setProperty("opacity","0")})},onLoaded:()=>{}})]),[be,J,Kt]);return(0,o.useEffect)(()=>{if(!Ve)return()=>{};let Cn=!0;return Ft(Ve,he).then(async an=>{if(!(an!=null&&an.innerHTML)||!Cn)return;window.scroll({top:0});const fn=await gn(an);At(fn)}),()=>{Cn=!1}},[Ve,he,Ft,gn]),Be},$e=()=>{const M=(0,B.YR)(),{shadowRoot:J}=(0,B.V1)(),be=J==null?void 0:J.querySelector('[data-md-component="content"]'),Re=J==null?void 0:J.querySelector('div[data-md-component="sidebar"][data-md-type="navigation"], div[data-md-component="navigation"]');let yt=Re==null?void 0:Re.querySelector('[data-techdocs-addons-location="primary sidebar"]');yt||(yt=document.createElement("div"),yt.setAttribute("data-techdocs-addons-location","primary sidebar"),Re==null||Re.prepend(yt));const Tt=J==null?void 0:J.querySelector('div[data-md-component="sidebar"][data-md-type="toc"], div[data-md-component="toc"]');let Kt=Tt==null?void 0:Tt.querySelector('[data-techdocs-addons-location="secondary sidebar"]');return Kt||(Kt=document.createElement("div"),Kt.setAttribute("data-techdocs-addons-location","secondary sidebar"),Tt==null||Tt.prepend(Kt)),o.createElement(o.Fragment,null,o.createElement(R.A,{container:yt},M.renderComponentsByLocation(B.eK.PrimarySidebar)),o.createElement(R.A,{container:be},M.renderComponentsByLocation(B.eK.Content)),o.createElement(R.A,{container:Kt},M.renderComponentsByLocation(B.eK.SecondarySidebar)))},Ke=(0,u.A)({search:{width:"100%","@media (min-width: 76.1875em)":{width:"calc(100% - 34.4rem)",margin:"0 auto"},"@media print":{display:"none"}}}),Je=We(M=>{var J;const{withSearch:be=!0,onReady:Re}=M,yt=Ke(),{entityMetadata:{value:Tt,loading:Kt},entityRef:Jt,setShadowRoot:hn}=(0,B.V1)(),Dn=ve(Jt),he=window.location.pathname,Ve=window.location.hash,Be=(0,B._$)(Dn),[At]=(0,B.$r)([`[id="${Ve.slice(1)}"]`]);(0,o.useEffect)(()=>{var tn;Be||(Ve?At&&At.scrollIntoView():(tn=document==null?void 0:document.querySelector("header"))==null||tn.scrollIntoView())},[he,Ve,At,Be]);const Pt=(0,o.useCallback)(tn=>{hn(tn),Re instanceof Function&&Re()},[hn,Re]);return Kt===!1&&!Tt?o.createElement(A.M,{status:"404",statusMessage:"PAGE NOT FOUND"}):Dn?o.createElement(A.UC,null,o.createElement(Y.A,{container:!0},o.createElement(Y.A,{xs:12,item:!0},o.createElement(Lt,null)),be&&o.createElement(Y.A,{className:yt.search,xs:"auto",item:!0},o.createElement(_t,{entityId:Jt,entityTitle:(J=Tt==null?void 0:Tt.metadata)==null?void 0:J.title})),o.createElement(Y.A,{xs:12,item:!0},o.createElement(B.eh,{element:Dn,onAppend:Pt},o.createElement($e,null))))):o.createElement(A.UC,null,o.createElement(Y.A,{container:!0},o.createElement(Y.A,{xs:12,item:!0},o.createElement(Lt,null))))}),Ut=null,Rt=o.createElement(se.A,{animation:"wave",variant:"text",height:40}),Nt=M=>{const{palette:{common:{white:J}}}=(0,oe.A)(),{children:be}=M,Re=(0,B.YR)(),yt=(0,Q.u)(Q.p),{title:Tt,setTitle:Kt,subtitle:Jt,setSubtitle:hn,entityRef:Dn,metadata:{value:he,loading:Ve},entityMetadata:{value:Be,loading:At}}=(0,B.V1)();(0,o.useEffect)(()=>{he&&(Kt(he.site_name),hn(()=>{let{site_description:ea}=he;return(!ea||ea==="None")&&(ea=""),ea}))},[he,Kt,hn]);const Pt=yt.getOptional("app.title")||"Backstage",tn=[Tt,Jt,Pt].filter(Boolean).join(" | "),{locationMetadata:Ct,spec:Ft}=Be||{},gn=Ft==null?void 0:Ft.lifecycle,Cn=Be?(0,N.g)(Be,Ue.vv):[],an=(0,g.Sf)(ht.r)(),fn=o.createElement(o.Fragment,null,o.createElement(A.ST,{label:(0,te.capitalize)((Be==null?void 0:Be.kind)||"entity"),value:o.createElement(X.zI,{color:"inherit",entityRef:Dn,title:Be==null?void 0:Be.metadata.title,defaultKind:"Component"})}),Cn.length>0&&o.createElement(A.ST,{label:"Owner",value:o.createElement(X.iI,{color:"inherit",entityRefs:Cn,defaultKind:"group"})}),gn?o.createElement(A.ST,{label:"Lifecycle",value:String(gn)}):null,Ct&&Ct.type!=="dir"&&Ct.type!=="file"?o.createElement(A.ST,{label:"",value:o.createElement(Y.A,{container:!0,direction:"column",alignItems:"center",style:{color:J}},o.createElement(Y.A,{style:{padding:0},item:!0},o.createElement(ne.A,{style:{marginTop:"-25px"}})),o.createElement(Y.A,{style:{padding:0},item:!0},"Source")),url:Ct.target}):null);return!At&&Be===void 0||!Ve&&he===void 0?null:o.createElement(A.Y9,{type:"Documentation",typeLink:an,title:Tt||Rt,subtitle:Jt===""?void 0:Jt||Rt},o.createElement(Ne.A,{titleTemplate:"%s"},o.createElement("title",null,tn)),fn,be,Re.renderComponentsByLocation(B.eK.Header))},_n=(0,u.A)(M=>({root:{gridArea:"pageSubheader",flexDirection:"column",minHeight:"auto",padding:M.spacing(3,3,0),"@media print":{display:"none"}}})),An=M=>{const J=_n(),[be,Re]=(0,o.useState)(null),yt=(0,o.useCallback)(Ve=>{Re(Ve.currentTarget)},[]),Tt=(0,o.useCallback)(()=>{Re(null)},[]),{entityMetadata:{value:Kt,loading:Jt}}=(0,B.V1)(),hn=(0,B.YR)(),Dn=hn.renderComponentsByLocation(B.eK.Subheader),he=hn.renderComponentsByLocation(B.eK.Settings);return!Dn&&!he||Jt===!1&&!Kt?null:o.createElement(p.A,{classes:J,...M.toolbarProps},o.createElement(w.A,{display:"flex",justifyContent:"flex-end",width:"100%",flexWrap:"wrap"},Dn,he?o.createElement(o.Fragment,null,o.createElement(Le.Ay,{title:"Settings"},o.createElement(ce.A,{"aria-controls":"tech-docs-reader-page-settings","aria-haspopup":"true",onClick:yt},o.createElement(Wt.A,null))),o.createElement(f.A,{id:"tech-docs-reader-page-settings",getContentAnchorEl:null,anchorEl:be,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:!!be,onClose:Tt,keepMounted:!0},o.createElement("div",null,he))):null))},mn=M=>{const{withSearch:J,withHeader:be=!0}=M;return o.createElement(A.YW,{themeId:"documentation"},be&&o.createElement(Nt,null),o.createElement(An,null),o.createElement(Je,{withSearch:J}))},ln=M=>{const{kind:J,name:be,namespace:Re}=(0,g.KS)(ht.b),{children:yt,entityRef:Tt={kind:J,name:be,namespace:Re}}=M,Kt=(0,l.P1)();if(!yt){const Dn=(Kt?o.Children.toArray(Kt.props.children):[]).flatMap(he=>{var Ve,Be;return(Be=(Ve=he==null?void 0:he.props)==null?void 0:Ve.children)!=null?Be:[]}).find(he=>!(0,g.E0)(he,B.AF)&&!(0,g.E0)(he,B.Wm));return o.createElement(B.R7,{entityRef:Tt},Dn||o.createElement(mn,null))}return o.createElement(B.R7,{entityRef:Tt},({metadata:Jt,entityMetadata:hn,onReady:Dn})=>o.createElement("div",{className:"techdocs-reader-page"},o.createElement(A.YW,{themeId:"documentation"},yt instanceof Function?yt({entityRef:Tt,techdocsMetadataValue:Jt.value,entityMetadataValue:hn.value,onReady:Dn}):yt)))}},75018:(wn,wt,e)=>{"use strict";e.r(wt),e.d(wt,{TechDocsSearchResultListItem:()=>ce});var o=e(14041),l=e(58837),A=e(5951),B=e(46423),u=e(72501),r=e(23180),Y=e(92805);const ye=(0,l.A)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",marginBottom:"1rem"}}),ce=a=>{const{result:fe,highlight:le,lineClamp:ie=5,asListItem:oe=!0,asLink:ze=!0,title:Le,icon:Pe}=a,C=ye(),ee=({children:w})=>ze?o.createElement(r.N_,{noTrack:!0,to:fe.location},w):o.createElement(o.Fragment,null,w),R=()=>{const w=le!=null&&le.fields.title?o.createElement(Y.b,{text:le.fields.title,preTag:le.preTag,postTag:le.postTag}):fe.title,f=le!=null&&le.fields.entityTitle?o.createElement(Y.b,{text:le.fields.entityTitle,preTag:le.preTag,postTag:le.postTag}):fe.entityTitle,E=le!=null&&le.fields.name?o.createElement(Y.b,{text:le.fields.name,preTag:le.preTag,postTag:le.postTag}):fe.name;return fe?o.createElement(A.A,{className:C.itemText,primaryTypographyProps:{variant:"h6"},primary:o.createElement(ee,null,Le||o.createElement(o.Fragment,null,w," | ",f!=null?f:E," docs")),secondary:o.createElement(u.A,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:ie,overflow:"hidden"},color:"textSecondary",variant:"body2"},le!=null&&le.fields.text?o.createElement(Y.b,{text:le.fields.text,preTag:le.preTag,postTag:le.postTag}):fe.text)}):null},p=({children:w})=>oe?o.createElement(o.Fragment,null,Pe&&o.createElement(B.A,null,typeof Pe=="function"?Pe(fe):Pe),o.createElement("div",{className:C.flexContainer},w)):o.createElement(o.Fragment,null,w);return o.createElement(p,null,o.createElement(R,null))}},87266:(wn,wt,e)=>{"use strict";e.d(wt,{T:()=>ye,a:()=>ce,b:()=>fe,c:()=>le,r:()=>a});var o=e(3399),l=e(17520),A=e.n(l),B=e(11638),u=Object.defineProperty,r=(ie,oe,ze)=>oe in ie?u(ie,oe,{enumerable:!0,configurable:!0,writable:!0,value:ze}):ie[oe]=ze,Y=(ie,oe,ze)=>(r(ie,typeof oe!="symbol"?oe+"":oe,ze),ze);class ye{constructor(oe){Y(this,"configApi"),Y(this,"discoveryApi"),Y(this,"fetchApi"),this.configApi=oe.configApi,this.discoveryApi=oe.discoveryApi,this.fetchApi=oe.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(oe){const{kind:ze,namespace:Le,name:Pe}=oe,ee=`${await this.getApiOrigin()}/metadata/techdocs/${Le}/${ze}/${Pe}`,R=await this.fetchApi.fetch(`${ee}`);if(!R.ok)throw await o.o3.fromResponse(R);return await R.json()}async getEntityMetadata(oe){const{kind:ze,namespace:Le,name:Pe}=oe,ee=`${await this.getApiOrigin()}/metadata/entity/${Le}/${ze}/${Pe}`,R=await this.fetchApi.fetch(`${ee}`);if(!R.ok)throw await o.o3.fromResponse(R);return await R.json()}}class ce{constructor(oe){Y(this,"configApi"),Y(this,"discoveryApi"),Y(this,"identityApi"),Y(this,"fetchApi"),this.configApi=oe.configApi,this.discoveryApi=oe.discoveryApi,this.identityApi=oe.identityApi,this.fetchApi=oe.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var oe;return(oe=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?oe:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getString("techdocs.builder")}async getEntityDocs(oe,ze){const{kind:Le,namespace:Pe,name:C}=oe,R=`${await this.getStorageUrl()}/${Pe}/${Le}/${C}/${ze}`,p=await this.fetchApi.fetch(`${R.endsWith("/")?R:`${R}/`}index.html`);let w="";switch(p.status){case 404:throw w="Page not found. ",ze||(w+="This could be because there is no index.md file in the root of the docs directory of this repository."),new o.m_(w);case 500:throw w="Could not generate documentation or an error in the TechDocs backend. ",new Error(w)}return p.text()}async syncEntityDocs(oe,ze=()=>{}){const{kind:Le,namespace:Pe,name:C}=oe,R=`${await this.getApiOrigin()}/sync/${Pe}/${Le}/${C}`,{token:p}=await this.identityApi.getCredentials();return new Promise((w,f)=>{const E=new l.EventSourcePolyfill(R,{withCredentials:!0,headers:p?{Authorization:`Bearer ${p}`}:{}});E.addEventListener("log",F=>{F.data&&ze(JSON.parse(F.data))}),E.addEventListener("finish",F=>{let re=!1;F.data&&({updated:re}=JSON.parse(F.data)),w(re?"updated":"cached")}),E.onerror=F=>{switch(E.close(),F.status){case 404:f(new o.m_(F.message));return;default:f(new Error(F.data));return}}})}async getBaseUrl(oe,ze,Le){const{kind:Pe,namespace:C,name:ee}=ze,p=`${await this.getApiOrigin()}/static/docs/${C}/${Pe}/${ee}/${Le}`;return new URL(oe,p.endsWith("/")?p:`${p}/`).toString()}}const a=(0,B.HM)({id:"techdocs:index-page"}),fe=(0,B.HM)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),le=(0,B.HM)({id:"techdocs:catalog-reader-view"})},11851:(wn,wt,e)=>{"use strict";e.d(wt,{L:()=>Qe,S:()=>St,a:()=>xt,e:()=>Wt});var o=e(18690),l=e(14041),A=e(72501),B=e(64947),u=e(58837),r=e(19087),Y=e(8109),ye=e(46423),ce=e(5951),a=e(71677),fe=e(42899),le=e(65569),ie=e(58007),oe=e(73643),ze=e(16249),Le=e(29365),Pe=e(37757),C=e(26343),ee=e(23180),R=e(80109),p=e(48821),w=e(11638),f=e(64704),E=e(91638),F=e(89383),re=e(71407),se=e(45145),_e=e(93970),Q=e(15485),g=e(42247),H=e(59294),G=e(19597),Oe=e(92651);const ue=`auth:
  providers:
    google:
      development:
        clientId: \${AUTH_GOOGLE_CLIENT_ID}
        clientSecret: \${AUTH_GOOGLE_CLIENT_SECRET}
`,it=()=>l.createElement(ee.pp,{missing:"content",title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:l.createElement(l.Fragment,null,l.createElement(A.A,{variant:"body1"},"Open ",l.createElement("code",null,"app-config.yaml")," and make the changes as highlighted below:"),l.createElement(ee.z7,{text:ue,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6,7,8],customStyle:{background:"inherit",fontSize:"115%"}}),l.createElement(B.A,{variant:"contained",color:"primary",href:"https://backstage.io/docs/auth/add-auth-provider"},"Read More"))}),ot=(0,u.A)(pe=>({avatar:{width:({size:Fe})=>Fe,height:({size:Fe})=>Fe,fontSize:({size:Fe})=>Fe*.7,border:`1px solid ${pe.palette.textSubtle}`}})),pt=({size:pe,picture:Fe})=>{const{iconSize:Mt}=ee.hC,Xt=ot(pe?{size:pe}:{size:Mt});return l.createElement(r.A,{src:Fe,className:Xt.avatar})},nt={},Ge=pe=>{const{title:Fe,description:Mt,icon:Xt,apiRef:Bt}=pe,jt=(0,p.u)(Bt),Ln=(0,p.u)(p.r),[pn,cn]=(0,l.useState)(!1),[En,lt]=(0,l.useState)(nt);return(0,l.useEffect)(()=>{let Ot=!1;const Vt=jt.sessionState$().subscribe(Dt=>{Dt!==p.S.SignedIn&&(lt(nt),cn(!1)),Ot||jt.getProfile({optional:!0}).then(ct=>{Ot||(Dt===p.S.SignedIn&&cn(!0),ct&&lt(ct))})});return()=>{Ot=!0,Vt.unsubscribe()}},[jt]),l.createElement(Y.A,null,l.createElement(ye.A,null,l.createElement(Xt,null)),l.createElement(ce.A,{primary:Fe,secondary:l.createElement(a.Ay,{placement:"top",arrow:!0,title:Mt},l.createElement(fe.A,{container:!0,spacing:6},l.createElement(fe.A,{item:!0},l.createElement(pt,{size:48,picture:En.picture})),l.createElement(fe.A,{item:!0,xs:12,sm:!0,container:!0},l.createElement(fe.A,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},l.createElement(fe.A,{item:!0,xs:!0},En.displayName&&l.createElement(A.A,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0},En.displayName),En.email&&l.createElement(A.A,{variant:"body2",color:"textSecondary"},En.email),l.createElement(A.A,{variant:"body2",color:"textSecondary"},Mt)))))),secondaryTypographyProps:{noWrap:!0,style:{width:"80%"}}}),l.createElement(le.A,null,l.createElement(a.Ay,{placement:"top",arrow:!0,title:pn?`Sign out from ${Fe}`:`Sign in to ${Fe}`},l.createElement(B.A,{variant:"outlined",color:"primary",onClick:()=>{(pn?jt.signOut():jt.signIn()).catch(Vt=>Ln.post(Vt))}},pn?"Sign out":"Sign in"))))},De=pe=>{const{configuredProviders:Fe}=pe;return l.createElement(l.Fragment,null,Fe.includes("google")&&l.createElement(Ge,{title:"Google",description:"Provides authentication towards Google APIs and identities",apiRef:p.g,icon:R.A}),Fe.includes("microsoft")&&l.createElement(Ge,{title:"Microsoft",description:"Provides authentication towards Microsoft APIs and identities",apiRef:p.m,icon:R.A}),Fe.includes("github")&&l.createElement(Ge,{title:"GitHub",description:"Provides authentication towards GitHub APIs",apiRef:p.d,icon:R.A}),Fe.includes("gitlab")&&l.createElement(Ge,{title:"GitLab",description:"Provides authentication towards GitLab APIs",apiRef:p.e,icon:R.A}),Fe.includes("okta")&&l.createElement(Ge,{title:"Okta",description:"Provides authentication towards Okta APIs",apiRef:p.o,icon:R.A}),Fe.includes("bitbucket")&&l.createElement(Ge,{title:"Bitbucket",description:"Provides authentication towards Bitbucket APIs",apiRef:p.i,icon:R.A}),Fe.includes("onelogin")&&l.createElement(Ge,{title:"OneLogin",description:"Provides authentication towards OneLogin APIs",apiRef:p.h,icon:R.A}),Fe.includes("atlassian")&&l.createElement(Ge,{title:"Atlassian",description:"Provides authentication towards Atlassian APIs",apiRef:p.k,icon:R.A}),Fe.includes("bitbucketServer")&&l.createElement(Ge,{title:"Bitbucket Server",description:"Provides authentication towards Bitbucket Server APIs",apiRef:p.j,icon:R.A}))},Ae=pe=>{const{providerSettings:Fe}=pe,Xt=(0,p.u)(p.p).getOptionalConfig("auth.providers"),Bt=(Xt==null?void 0:Xt.keys())||[],jt=Fe!=null?Fe:l.createElement(De,{configuredProviders:Bt});return!Fe&&!(Bt!=null&&Bt.length)?l.createElement(it,null):l.createElement(ee.nO,{title:"Available Providers"},l.createElement(ie.A,{dense:!0},jt))},Ne=`import { createPlugin } from '@backstage/core-plugin-api';

export default createPlugin({
  id: 'plugin-name',
  featureFlags: [{ name: 'enable-example-feature' }],
});
`,ne=()=>l.createElement(ee.pp,{missing:"content",title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:l.createElement(l.Fragment,null,l.createElement(A.A,{variant:"body1"},"An example for how to add a feature flag is highlighted below:"),l.createElement(ee.z7,{text:Ne,language:"typescript",showLineNumbers:!0,highlightedNumbers:[6],customStyle:{background:"inherit",fontSize:"115%"}}),l.createElement(B.A,{variant:"contained",color:"primary",href:"https://backstage.io/docs/api/utility-apis"},"Read More"))}),N=pe=>pe.description?pe.description:pe.pluginId?`Registered in ${pe.pluginId} plugin`:"Registered in the application",X=({flag:pe,enabled:Fe,toggleHandler:Mt})=>l.createElement(Y.A,{divider:!0,button:!0,onClick:()=>Mt(pe.name)},l.createElement(ye.A,null,l.createElement(a.Ay,{placement:"top",arrow:!0,title:Fe?"Disable":"Enable"},l.createElement(oe.A,{color:"primary",checked:Fe,name:pe.name}))),l.createElement(ce.A,{primary:pe.name,secondary:N(pe)})),Ue=(pe,Fe)=>{const Mt=pe.filter(Bt=>Fe.isActive(Bt.name)),Xt=pe.filter(Bt=>!Fe.isActive(Bt.name));return[...Mt,...Xt]},te=()=>{const pe=(0,p.u)(p.f),Fe=l.useRef(),Mt=pe.getRegisteredFlags(),Xt=Ue(Mt,pe),[Bt]=(0,l.useState)(Xt),jt=Object.fromEntries(Bt.map(({name:ct})=>[ct,pe.isActive(ct)])),[Ln,pn]=(0,l.useState)(jt),[cn,En]=(0,l.useState)(""),lt=(0,l.useCallback)(ct=>{const je=pe.isActive(ct)?p.F.None:p.F.Active;pe.save({states:{[ct]:je},merge:!0}),pn(Yt=>({...Yt,[ct]:je===p.F.Active}))},[pe]);if(!Bt.length)return l.createElement(ne,null);const Ot=()=>{var ct;En(""),(ct=Fe==null?void 0:Fe.current)==null||ct.focus()},Vt=Bt.filter(ct=>ct.name.toLocaleLowerCase("en-US").includes(cn.toLocaleLowerCase("en-US"))),Dt=()=>l.createElement(fe.A,{container:!0,style:{justifyContent:"space-between"}},l.createElement(fe.A,{item:!0,xs:6,md:8},l.createElement(A.A,{variant:"h5"},"Feature Flags"),l.createElement(A.A,{variant:"subtitle1"},"Please refresh the page when toggling feature flags")),Bt.length>=10&&l.createElement(fe.A,{item:!0,xs:6,md:4},l.createElement(ze.A,{label:"Filter",style:{display:"flex",justifyContent:"flex-end"},inputRef:ct=>ct&&ct.focus(),InputProps:{...cn.length&&{endAdornment:l.createElement(Le.A,{"aria-label":"Clear filter",onClick:Ot,edge:"end"},l.createElement(f.default,null))}},onChange:ct=>En(ct.target.value),value:cn})));return l.createElement(ee.nO,{title:l.createElement(Dt,null)},l.createElement(ie.A,{dense:!0},Vt.map(ct=>{const je=!!Ln[ct.name];return l.createElement(X,{key:ct.name,flag:ct,enabled:je,toggleHandler:lt})})))},we=()=>{var pe;const Fe=(0,p.u)(p.t),Mt=(0,p.u)(p.l),{value:Xt,loading:Bt,error:jt}=(0,E.default)(async()=>({profile:await Fe.getProfileInfo(),identity:await Fe.getBackstageIdentity()}),[]);return(0,l.useEffect)(()=>{jt&&Mt.post({message:`Failed to load user identity: ${jt}`,severity:"error"})},[jt,Mt]),Bt||jt?{profile:{},displayName:"",loading:Bt}:{profile:Xt.profile,backstageIdentity:Xt.identity,displayName:(pe=Xt.profile.displayName)!=null?pe:Xt.identity.userEntityRef,loading:Bt}},ht=(0,u.A)(pe=>({avatar:{width:({size:Fe})=>Fe,height:({size:Fe})=>Fe,fontSize:({size:Fe})=>Fe*.7,border:`1px solid ${pe.palette.textSubtle}`}})),Wt=pe=>{const{size:Fe}=pe,{iconSize:Mt}=ee.hC,Xt=ht(Fe?{size:Fe}:{size:Mt}),{profile:Bt}=we();return l.createElement(r.A,{src:Bt.picture,className:Xt.avatar,alt:"Profile picture"})},bt=()=>{const pe=(0,p.u)(p.r),Fe=(0,p.u)(p.t),[Mt,Xt]=l.useState(!1),[Bt,jt]=l.useState(void 0),Ln=cn=>{jt(cn.currentTarget),Xt(!0)},pn=()=>{jt(void 0),Xt(!1)};return l.createElement(l.Fragment,null,l.createElement(Le.A,{"data-testid":"user-settings-menu","aria-label":"more",onClick:Ln},l.createElement(re.A,null)),l.createElement(Pe.A,{anchorEl:Bt,open:Mt,onClose:pn},l.createElement(C.A,{"data-testid":"sign-out",onClick:()=>Fe.signOut().catch(cn=>pe.post(cn))},l.createElement(ye.A,null,l.createElement(F.A,null)),"Sign Out")))},It=()=>{const{profile:pe,displayName:Fe}=we();return l.createElement(ee.nO,{title:"Profile",variant:"gridItem"},l.createElement(fe.A,{container:!0,spacing:6},l.createElement(fe.A,{item:!0},l.createElement(Wt,{size:96})),l.createElement(fe.A,{item:!0,xs:12,sm:!0,container:!0},l.createElement(fe.A,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},l.createElement(fe.A,{item:!0,xs:!0},l.createElement(A.A,{variant:"subtitle1",gutterBottom:!0},Fe),pe.email&&l.createElement(A.A,{variant:"body2",color:"textSecondary"},pe.email))),l.createElement(fe.A,{item:!0},l.createElement(bt,null)))))},O=()=>{const{isPinned:pe,toggleSidebarPinState:Fe}=(0,ee.Ut)();return l.createElement(Y.A,null,l.createElement(ce.A,{primary:"Pin Sidebar",secondary:"Prevent the sidebar from collapsing"}),l.createElement(le.A,null,l.createElement(a.Ay,{placement:"top",arrow:!0,title:`${pe?"Unpin":"Pin"} Sidebar`},l.createElement(oe.A,{color:"primary",checked:pe,onChange:()=>Fe(),name:"pin",inputProps:{"aria-label":"Pin Sidebar Switch"}}))))},S=({id:pe,activeId:Fe,icon:Mt})=>Mt?(0,l.cloneElement)(Mt,{color:Fe===pe?"primary":void 0}):l.createElement(_e.A,{color:Fe===pe?"primary":void 0}),K=(0,u.A)(pe=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[pe.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[pe.breakpoints.down("xs")]:{paddingLeft:0}}})),ae=({children:pe,title:Fe,value:Mt,...Xt})=>l.createElement(a.Ay,{placement:"top",arrow:!0,title:Fe},l.createElement(Q.A,{value:Mt,...Xt},pe)),We=()=>{const pe=K(),Fe=(0,p.u)(p.n),Mt=(0,se.A)(Fe.activeThemeId$(),Fe.getActiveThemeId()),Xt=Fe.getInstalledThemes(),{t:Bt}=(0,H.ie)(G.a),jt=(Ln,pn)=>{Xt.some(cn=>cn.id===pn)?Fe.setActiveThemeId(pn):Fe.setActiveThemeId(void 0)};return l.createElement(Y.A,{className:pe.list,classes:{container:pe.container}},l.createElement(ce.A,{className:pe.listItemText,primary:Bt("themeToggle.title"),secondary:Bt("themeToggle.description")}),l.createElement(le.A,{className:pe.listItemSecondaryAction},l.createElement(g.A,{exclusive:!0,size:"small",value:Mt!=null?Mt:"auto",onChange:jt},Xt.map(Ln=>{const pn=Ln.id,cn=Ln.icon,En=Ln.title||(pn==="light"||pn==="dark"?Bt(`themeToggle.names.${pn}`):pn);return l.createElement(ae,{key:pn,title:Bt("themeToggle.select",{theme:En}),value:pn},l.createElement(l.Fragment,null,En,"\xA0",l.createElement(S,{id:pn,icon:cn,activeId:Mt})))}),l.createElement(a.Ay,{placement:"top",arrow:!0,title:Bt("themeToggle.selectAuto")},l.createElement(Q.A,{value:"auto",selected:Mt===void 0},Bt("themeToggle.names.auto"),"\xA0",l.createElement(_e.A,{color:Mt===void 0?"primary":void 0}))))))},qe=(0,u.A)(pe=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[pe.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[pe.breakpoints.down("xs")]:{paddingLeft:0}}})),gt=()=>{const pe=qe(),Fe=(0,p.u)(H.pl),{t:Mt}=(0,H.ie)(G.a),[Xt]=(0,l.useState)(()=>Fe.language$()),{language:Bt}=(0,se.A)(Xt,Fe.getLanguage()),{languages:jt}=Fe.getAvailableLanguages();if(jt.length<=1)return null;const Ln=cn=>{Fe.setLanguage(cn)},pn=cn=>{try{return new Intl.DisplayNames([cn],{type:"language"}).of(cn)||cn}catch{return cn}};return l.createElement(Y.A,{className:pe.list,classes:{container:pe.container}},l.createElement(ce.A,{className:pe.listItemText,primary:Mt("languageToggle.title"),secondary:Mt("languageToggle.description")}),l.createElement(le.A,{className:pe.listItemSecondaryAction},l.createElement(ee.l6,{label:"",selected:Bt,items:jt.map(cn=>({label:pn(cn),value:cn})),onChange:cn=>Ln(cn)})))},_t=()=>{const{isMobile:pe}=(0,ee.Ut)();return l.createElement(ee.nO,{title:"Appearance",variant:"gridItem"},l.createElement(ie.A,{dense:!0},l.createElement(We,null),l.createElement(gt,null),!pe&&l.createElement(O,null)))},st=()=>{const{backstageIdentity:pe}=we();return pe?l.createElement(fe.A,{container:!0,spacing:1},l.createElement(fe.A,{item:!0,xs:12},l.createElement(A.A,{variant:"subtitle1",gutterBottom:!0},"User Entity:"," ",l.createElement(Oe.iI,{entityRefs:[pe.userEntityRef]}))),l.createElement(fe.A,{item:!0,xs:12},l.createElement(A.A,{variant:"subtitle1"},"Ownership Entities:"," ",l.createElement(Oe.iI,{entityRefs:pe.ownershipEntityRefs})))):l.createElement(A.A,null,"No Backstage Identity")},Zt=()=>l.createElement(ee.nO,{title:"Backstage Identity"},l.createElement(st,null)),at=()=>l.createElement(fe.A,{container:!0,direction:"row",spacing:3},l.createElement(fe.A,{item:!0,xs:12,md:6},l.createElement(It,null)),l.createElement(fe.A,{item:!0,xs:12,md:6},l.createElement(_t,null)),l.createElement(fe.A,{item:!0,xs:12,md:6},l.createElement(Zt,null))),mt="plugin.user-settings.settingsLayout",Qe="plugin.user-settings.settingsLayoutRoute",Lt=()=>null;(0,w.h3)(Lt,Qe,!0),(0,w.h3)(Lt,"core.gatherMountPoints",!0);const St=pe=>{const{title:Fe,children:Mt}=pe,{isMobile:Xt}=(0,ee.Ut)(),Bt=(0,w.OJ)(Mt,jt=>jt.selectByComponentData({key:Qe,withStrictError:"Child of SettingsLayout must be an SettingsLayout.Route"}).getElements().map(Ln=>Ln.props));return l.createElement(ee.YW,{themeId:"home"},!Xt&&l.createElement(ee.Y9,{title:Fe!=null?Fe:"Settings"}),l.createElement(ee.kE,{routes:Bt}))};(0,w.h3)(St,mt,!0),St.Route=Lt;const en=pe=>{const{providerSettings:Fe,tabs:Mt}=pe;return l.createElement(St,null,l.createElement(St.Route,{path:"general",title:"General"},l.createElement(at,null)),l.createElement(St.Route,{path:"auth-providers",title:"Authentication Providers"},l.createElement(Ae,{providerSettings:Fe})),l.createElement(St.Route,{path:"feature-flags",title:"Feature Flags"},l.createElement(te,null)),Mt)},xt=pe=>{const{providerSettings:Fe}=pe,Mt=(0,o.P1)(),Xt=(0,w.OJ)(Mt,jt=>jt.selectByComponentData({key:mt}).getElements()),Bt=(0,w.OJ)(Mt,jt=>jt.selectByComponentData({key:Qe}).getElements());return l.createElement(l.Fragment,null,Xt.length!==0&&Xt||l.createElement(en,{tabs:Bt,providerSettings:Fe}))}},19597:(wn,wt,e)=>{"use strict";e.d(wt,{U:()=>u,a:()=>r,s:()=>A});var o=e(11638),l=e(59294);const A=(0,o.HM)({id:"user-settings"}),u=(0,o.i1)({id:"user-settings",routes:{settingsPage:A}}).provide((0,o.QJ)({name:"UserSettingsPage",component:()=>e.e(7700).then(e.bind(e,47700)).then(Y=>Y.SettingsPage),mountPoint:A})),r=(0,l.h2)({id:"user-settings",messages:{languageToggle:{title:"Language",description:"Change the language",select:"Select language {{language}}"},themeToggle:{title:"Theme",description:"Change the theme mode",select:"Select theme {{theme}}",selectAuto:"Select Auto Theme",names:{light:"Light",dark:"Dark",auto:"Auto"}}}})},93449:(wn,wt,e)=>{"use strict";e.d(wt,{wB:()=>ze});var o=e(96403),l=e.n(o),A=e(19597),B=e(14041),u=e(9684),r=e(23180),Y=e(11638),ye=e(11851),ce=Object.defineProperty,a=(C,ee,R)=>ee in C?ce(C,ee,{enumerable:!0,configurable:!0,writable:!0,value:R}):C[ee]=R,fe=(C,ee,R)=>(a(C,typeof ee!="symbol"?ee+"":ee,R),R);const le={"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},ie=new Map;class oe{constructor(ee,R,p,w,f,E){this.namespace=ee,this.fetchApi=R,this.discoveryApi=p,this.errorApi=w,this.identityApi=f,this.fallback=E,fe(this,"subscribers",new Set),fe(this,"observables",new Map)}static create(ee){var R;return new oe((R=ee.namespace)!=null?R:"default",ee.fetchApi,ee.discoveryApi,ee.errorApi,ee.identityApi,WebStorage.create({namespace:ee.namespace,errorApi:ee.errorApi}))}forBucket(ee){const R=`${this.namespace}.${ee}`;return ie.has(R)||ie.set(R,new oe(R,this.fetchApi,this.discoveryApi,this.errorApi,this.identityApi,this.fallback)),ie.get(R)}async remove(ee){const R=await this.getFetchUrl(ee),p=await this.fetchApi.fetch(R,{method:"DELETE"});if(!p.ok&&p.status!==404)throw await ResponseError.fromResponse(p);this.notifyChanges({key:ee,presence:"absent"})}async set(ee,R){if(!await this.isSignedIn()){await this.fallback.set(ee,R),this.notifyChanges({key:ee,presence:"present",value:R});return}const p=await this.getFetchUrl(ee),w=await this.fetchApi.fetch(p,{method:"PUT",headers:le,body:JSON.stringify({value:R})});if(!w.ok)throw await ResponseError.fromResponse(w);const{value:f}=await w.json();this.notifyChanges({key:ee,value:f,presence:"present"})}observe$(ee){return this.observables.has(ee)||this.observables.set(ee,new ObservableImpl(R=>(this.subscribers.add(R),Promise.resolve().then(()=>this.get(ee)).then(p=>R.next(p)).catch(p=>this.errorApi.post(p)),()=>{this.subscribers.delete(R)})).filter(({key:R})=>R===ee)),this.observables.get(ee)}snapshot(ee){return{key:ee,presence:"unknown"}}async get(ee){if(!await this.isSignedIn())return this.fallback.snapshot(ee);const R=await this.getFetchUrl(ee),p=await this.fetchApi.fetch(R);if(p.status===404)return{key:ee,presence:"absent"};if(!p.ok)throw await ResponseError.fromResponse(p);try{const{value:w}=await p.json(),f=JSON.parse(JSON.stringify(w),(E,F)=>(typeof F=="object"&&F!==null&&Object.freeze(F),F));return{key:ee,presence:"present",value:f}}catch{return{key:ee,presence:"absent"}}}async getFetchUrl(ee){const R=await this.discoveryApi.getBaseUrl("user-settings"),p=encodeURIComponent(this.namespace),w=encodeURIComponent(ee);return`${R}/buckets/${p}/keys/${w}`}async notifyChanges(ee){for(const R of this.subscribers)try{R.next(ee)}catch{}}async isSignedIn(){try{const ee=await this.identityApi.getCredentials();return!!(ee!=null&&ee.token)}catch{return!1}}}const ze=C=>{const ee=(0,Y.Sf)(A.s),R=C.icon?C.icon:u.A;return B.createElement(r.uk,{text:"Settings",to:ee(),icon:R})},Le=ye.L,Pe=C=>B.createElement(ye.S.Route,{path:C.path,title:C.title},B.createElement(B.Fragment,null,"props.children"));(0,Y.h3)(Pe,Le,"UserSettingsTab")},40477:(wn,wt,e)=>{"use strict";e.d(wt,{Zj:()=>ot,kW:()=>ee,nS:()=>nt});var o=e(98392),l=e(55288),A=e(91360),B=e(50868),u=e(80012),r=e(56558),Y=e(12285),ye=e(88714),ce=e(14041),a=e(14360),fe=e(58733);const le=N=>(...X)=>{const Ue=X.length===0?[1]:X,te=(we,ht)=>typeof we=="string"?we:ht*we;return Ue.map(we=>{const ht=te(we,N);return typeof ht=="number"?`${ht}px`:ht}).join(" ")};function ie(N,X){if(!X||typeof X=="string")return;const Ue=typeof X=="function"?X(N):X;if(Ue)return{"@global":Ue}}function oe(N,X){if(!(!X||typeof X=="string")){if(typeof X=="object"){const Ue={...N},te=N.spacing(1);return typeof te=="number"&&(Ue.spacing=le(te)),Object.fromEntries(Object.entries(X).map(([we,ht])=>typeof ht=="function"?[we,ht({theme:Ue})]:[we,ht]))}return X}}const ze=/^&.Mui-([\w-]+)$/;function Le(N){let X=N;if(!N||typeof N!="object")return X;for(const Ue of Object.keys(N)){const te=N[Ue];if(!(!te||typeof te!="object"))for(const we of Object.keys(te)){const ht=we,Wt=ht.match(ze);if(Wt){const[,bt]=Wt,{[ht]:It,...O}=te;It&&(X={...X,[Ue]:O,[bt]:It})}}}return X}function Pe(N,X={}){const Ue={},te={};for(const we of Object.keys(X)){const ht=X[we];ht&&("styleOverrides"in ht&&(we==="MuiCssBaseline"?Ue[we]=ie(N,ht.styleOverrides):Ue[we]=Le(oe(N,ht.styleOverrides))),"defaultProps"in ht&&(te[we]=ht.defaultProps))}return{overrides:Ue,props:te}}const C={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},ee={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function R(N){var X;const{colors:Ue,shape:te,options:we}=N,Wt=`linear-gradient(90deg, ${(Ue.length===1?[Ue[0],Ue[0]]:Ue).join(", ")})`,bt=`${te},  ${Wt}`,It=(X=we==null?void 0:we.fontColor)!=null?X:"#FFFFFF";return{colors:Ue,shape:te,backgroundImage:bt,fontColor:It}}const p={home:R({colors:ee.teal,shape:C.wave}),documentation:R({colors:ee.pinkSea,shape:C.wave2}),tool:R({colors:ee.purpleSky,shape:C.round}),service:R({colors:ee.marineBlue,shape:C.wave}),website:R({colors:ee.veryBlue,shape:C.wave}),library:R({colors:ee.rubyRed,shape:C.wave}),other:R({colors:ee.darkGrey,shape:C.wave}),app:R({colors:ee.toastyOrange,shape:C.wave}),apis:R({colors:ee.teal,shape:C.wave2}),card:R({colors:ee.greens,shape:C.wave})},w=16,f='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif',E="home";function F(N){const{palette:X,htmlFontSize:Ue=w,fontFamily:te=f,defaultPageTheme:we=E,pageTheme:ht=p,typography:Wt}=N;if(!ht[we])throw new Error(`${we} is not defined in pageTheme.`);const bt={htmlFontSize:Ue,fontFamily:te,h1:{fontSize:54,fontWeight:700,marginBottom:10},h2:{fontSize:40,fontWeight:700,marginBottom:8},h3:{fontSize:32,fontWeight:700,marginBottom:6},h4:{fontWeight:700,fontSize:28,marginBottom:6},h5:{fontWeight:700,fontSize:24,marginBottom:4},h6:{fontWeight:700,fontSize:20,marginBottom:2}};return{palette:X,typography:Wt!=null?Wt:bt,page:ht[we],getPageTheme:({themeId:It})=>{var O;return(O=ht[It])!=null?O:ht[we]}}}const re={MuiCssBaseline:{styleOverrides:N=>({html:{height:"100%",fontFamily:N.typography.fontFamily},body:{height:"100%",fontFamily:N.typography.fontFamily,overscrollBehaviorY:"none",fontSize:"0.875rem",lineHeight:1.43},a:{color:"inherit",textDecoration:"none"}})},MuiGrid:{defaultProps:{spacing:2}},MuiSwitch:{defaultProps:{color:"primary"}},MuiTableRow:{styleOverrides:{root:({theme:N})=>({"&:nth-of-type(odd)":{backgroundColor:N.palette.background.default}}),hover:{"&:hover":{cursor:"pointer"}},head:({theme:N})=>({"&:nth-of-type(odd)":{backgroundColor:N.palette.background.paper}})}},MuiTableCell:{styleOverrides:{root:({theme:N})=>({wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:N.spacing(3,2,3,2.5),borderBottom:0}),sizeSmall:({theme:N})=>({padding:N.spacing(1.5,2,1.5,2.5)}),head:({theme:N})=>({wordBreak:"break-word",overflow:"hidden",color:N.palette.textSubtle,fontWeight:"normal",lineHeight:"1"})}},MuiTabs:{styleOverrides:{root:{minHeight:24}}},MuiTab:{styleOverrides:{root:({theme:N})=>({color:N.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,u.e$)(N.palette.link,.3),background:(0,u.a)(N.palette.link,.95)},[N.breakpoints.up("md")]:{minWidth:120,fontSize:N.typography.pxToRem(14),fontWeight:500}}),textColorPrimary:({theme:N})=>({color:N.palette.link})}},MuiTableSortLabel:{styleOverrides:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"},"&.Mui-active":{fontWeight:"bold",color:"inherit"}}}},MuiListItemText:{styleOverrides:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},MuiButton:{styleOverrides:{text:{padding:void 0}}},MuiChip:{styleOverrides:{root:({theme:N})=>({marginRight:N.spacing(1),marginBottom:N.spacing(1)}),label:({theme:N})=>({lineHeight:N.spacing(2.5),fontWeight:N.typography.fontWeightMedium,fontSize:N.spacing(1.75)}),labelSmall:({theme:N})=>({fontSize:N.spacing(1.5)}),deleteIcon:({theme:N})=>({width:N.spacing(3),height:N.spacing(3),margin:N.spacing(0,.75,0,-.75)}),deleteIconSmall:({theme:N})=>({width:N.spacing(2),height:N.spacing(2),margin:N.spacing(0,.5,0,-.5)})}},MuiCard:{styleOverrides:{root:{display:"flex",flexDirection:"column"}}},MuiCardHeader:{styleOverrides:{root:{paddingBottom:0}}},MuiCardContent:{styleOverrides:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}}},MuiCardActions:{styleOverrides:{root:{justifyContent:"flex-end"}}},MuiLink:{defaultProps:{underline:"hover"}},MuiPaper:{styleOverrides:{root:{backgroundImage:"unset"}}}};var se=(N,X,Ue)=>{if(!X.has(N))throw TypeError("Cannot "+Ue)},_e=(N,X,Ue)=>(se(N,X,"read from private field"),Ue?Ue.call(N):X.get(N)),Q=(N,X,Ue)=>{if(X.has(N))throw TypeError("Cannot add the same private member more than once");X instanceof WeakSet?X.add(N):X.set(N,Ue)},g=(N,X,Ue,te)=>(se(N,X,"write to private field"),te?te.call(N,Ue):X.set(N,Ue),Ue),H;class G{constructor(X,Ue){Q(this,H,new Map),g(this,H,new Map),X&&_e(this,H).set("v4",X),Ue&&_e(this,H).set("v5",Ue)}getTheme(X){return _e(this,H).get(X)}}H=new WeakMap;function Oe(N){const X=F(N),Ue={...re,...N.components},te=(0,r.A)({...X,components:Ue}),we=Pe(te,Ue),ht={...(0,o.A)(X),...we};return new G(ht,te)}function ue(N){const X=adaptV4Theme(N),Ue=createTheme$2(N);return new G(Ue,createTheme$1(X))}const it={light:{type:"light",mode:"light",background:{default:"#F8F8F8",paper:"#FFFFFF"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#1F5493",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#1F5493"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:"#FFD600",navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},dark:{type:"dark",mode:"dark",background:{default:"#333333",paper:"#424242"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:"#FFD600",navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}}},ot={light:Oe({palette:it.light}),dark:Oe({palette:it.dark})};a.A.configure(N=>`v5-${N}`);const pt=(0,l.A)({productionPrefix:"jss4-"});function nt(N){const{children:X,theme:Ue,noCssBaseline:te=!1}=N,we=Ue.getTheme("v4"),ht=Ue.getTheme("v5");let Wt;te||(Wt=ce.createElement(fe.Ay,null));let bt=ce.createElement(ce.Fragment,null,Wt,X);return we&&(bt=ce.createElement(A.Ay,{generateClassName:pt},ce.createElement(B.A,{theme:we},bt))),ht&&(bt=ce.createElement(Y.A,{injectFirst:!0},ce.createElement(ye.A,{theme:ht},bt))),bt}function Ge(N){var X,Ue,te,we;return{props:{MuiGrid:(Ue=(X=re)==null?void 0:X.MuiGrid)==null?void 0:Ue.defaultProps,MuiSwitch:(we=(te=re)==null?void 0:te.MuiSwitch)==null?void 0:we.defaultProps},...F(N)}}function De(N){return Pe(N,re).overrides}function Ae(N){const X=Ge(N),Ue=(0,o.A)(X),te=De(Ue);return{...Ue,overrides:te}}const Ne=Ae({palette:it.light}),ne=Ae({palette:it.dark})},97388:(wn,wt,e)=>{"use strict";e.d(wt,{Bl:()=>r,Q6:()=>u,qO:()=>ye,tK:()=>Y});var o=e(14041);function l(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const A=l(),B=a=>`__@backstage/${a}__`;function u(a,fe){const le=B(a);let ie=A[le];return ie||(ie=fe(),A[le]=ie,ie)}function r(a){Object.freeze(a);const fe={atVersion(le){return a[le]}};return Object.defineProperty(fe,"$map",{configurable:!0,enumerable:!0,get(){return a}}),fe}function Y(a){return u(a,()=>(0,o.createContext)(void 0))}function ye(a){return(0,o.useContext)(Y(a))}function ce(a){return{set(fe){globalThis[`__@backstage/${a}__`]=createContext(r(fe))},reset(){delete globalThis[`__@backstage/${a}__`]}}}}}]);})();

//# sourceMappingURL=module-backstage.6142f63e.js.map