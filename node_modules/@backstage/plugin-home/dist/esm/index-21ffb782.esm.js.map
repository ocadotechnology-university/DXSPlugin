{"version":3,"file":"index-21ffb782.esm.js","sources":["../../src/homePageComponents/FeaturedDocsCard/Content.tsx"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport {\n  LinkButton,\n  EmptyState,\n  Link,\n  Progress,\n  ErrorPanel,\n} from '@backstage/core-components';\nimport {\n  catalogApiRef,\n  CatalogApi,\n  EntityDisplayName,\n} from '@backstage/plugin-catalog-react';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { EntityFilterQuery } from '@backstage/catalog-client';\n\nimport { makeStyles, Typography } from '@material-ui/core';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\n\n/**\n * Props customizing the <FeaturedDocsCard/> component.\n *\n * @public\n */\nexport type FeaturedDocsCardProps = {\n  /** The entity filter used to display only the intended item/s */\n  filter: EntityFilterQuery;\n  /** An optional ReactNode for empty states */\n  emptyState?: React.JSX.Element;\n  /** An optional linkDestination to set for the Featured Doc  */\n  linkDestination?: string;\n  /** An optional limit to set for link destination  */\n  responseLimit?: number;\n  /** An optional string to customize sublink text */\n  subLinkText?: string;\n};\n\nconst useStyles = makeStyles(\n  theme => ({\n    docDescription: {\n      fontSize: theme.typography.body1.fontSize,\n      fontWeight: theme.typography.body1.fontWeight,\n      marginBottom: theme.spacing(2),\n      marginTop: theme.spacing(2),\n    },\n    docSubLink: {\n      fontSize: theme.typography.subtitle1.fontSize,\n      fontWeight: theme.typography.subtitle1.fontWeight,\n      lineHeight: theme.typography.subtitle1.lineHeight,\n    },\n    docsTitleLink: {\n      fontSize: theme.typography.h6.fontSize,\n      fontWeight: theme.typography.h6.fontWeight,\n      lineHeight: theme.typography.h6.lineHeight,\n    },\n  }),\n  { name: 'HomeFeaturedDocsCard' },\n);\n\n/**\n * A component to display specific Featured Docs.\n *\n * @public\n */\nexport const Content = (props: FeaturedDocsCardProps): JSX.Element => {\n  const { emptyState, filter, linkDestination, responseLimit, subLinkText } =\n    props;\n  const linkText = subLinkText || 'LEARN MORE';\n  const styles = useStyles();\n  const catalogApi: CatalogApi = useApi(catalogApiRef);\n  const {\n    value: entities,\n    loading,\n    error,\n  } = useAsync(async () => {\n    const response = await catalogApi.getEntities({\n      filter: filter,\n      limit: responseLimit || 10,\n    });\n    return response.items;\n  });\n\n  if (loading) {\n    return <Progress />;\n  }\n  if (error) {\n    return <ErrorPanel error={error} />;\n  }\n\n  return entities?.length ? (\n    <>\n      {entities.map(d => (\n        <div\n          key={`${d.metadata.name}-${d.kind}-${d.metadata.namespace}`}\n          data-testid=\"docs-card-content\"\n        >\n          <Link\n            className={styles.docsTitleLink}\n            data-testid=\"docs-card-title\"\n            to={\n              linkDestination ||\n              `/docs/${d.metadata.namespace || 'default'}/${d.kind}/${\n                d.metadata.name\n              }/`\n            }\n          >\n            <EntityDisplayName entityRef={stringifyEntityRef(d)} />\n          </Link>\n          {d.metadata.description && (\n            <Typography className={styles.docDescription}>\n              {d.metadata.description}\n            </Typography>\n          )}\n          <Link\n            className={styles.docSubLink}\n            data-testid=\"docs-card-sub-link\"\n            to={\n              linkDestination ||\n              `/docs/${d.metadata.namespace || 'default'}/${d.kind}/${\n                d.metadata.name\n              }/`\n            }\n          >\n            {linkText}\n          </Link>\n        </div>\n      ))}\n    </>\n  ) : (\n    emptyState || (\n      <EmptyState\n        missing=\"data\"\n        title=\"No documents to show\"\n        description=\"Create your own document. Check out our Getting Started Information\"\n        action={\n          <LinkButton\n            to=\"https://backstage.io/docs/features/techdocs/getting-started\"\n            variant=\"contained\"\n          >\n            DOCS\n          </LinkButton>\n        }\n      />\n    )\n  );\n};\n"],"names":[],"mappings":"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"}