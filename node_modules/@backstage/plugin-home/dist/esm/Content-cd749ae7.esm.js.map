{"version":3,"file":"Content-cd749ae7.esm.js","sources":["../../src/homePageComponents/VisitedByType/Context.tsx","../../src/homePageComponents/VisitedByType/Actions.tsx","../../src/api/config.ts","../../src/components/VisitList/ItemName.tsx","../../src/components/VisitList/ItemDetail.tsx","../../src/components/VisitList/ItemCategory.tsx","../../src/components/VisitList/VisitListItem.tsx","../../src/components/VisitList/VisitListEmpty.tsx","../../src/components/VisitList/VisitListFew.tsx","../../src/components/VisitList/VisitListSkeleton.tsx","../../src/components/VisitList/VisitList.tsx","../../src/homePageComponents/VisitedByType/VisitedByType.tsx","../../src/homePageComponents/VisitedByType/Content.tsx"],"sourcesContent":["/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { Dispatch, SetStateAction, createContext, useMemo } from 'react';\nimport { Visit } from '../../api/VisitsApi';\nimport { VisitedByTypeKind } from './Content';\n\nexport type ContextValueOnly = {\n  collapsed: boolean;\n  numVisitsOpen: number;\n  numVisitsTotal: number;\n  visits: Array<Visit>;\n  loading: boolean;\n  kind: VisitedByTypeKind;\n};\n\nexport type ContextValue = ContextValueOnly & {\n  setCollapsed: Dispatch<SetStateAction<boolean>>;\n  setNumVisitsOpen: Dispatch<SetStateAction<number>>;\n  setNumVisitsTotal: Dispatch<SetStateAction<number>>;\n  setVisits: Dispatch<SetStateAction<Array<Visit>>>;\n  setLoading: Dispatch<SetStateAction<boolean>>;\n  setKind: Dispatch<SetStateAction<VisitedByTypeKind>>;\n  setContext: Dispatch<SetStateAction<ContextValueOnly>>;\n};\n\nconst defaultContextValueOnly: ContextValueOnly = {\n  collapsed: true,\n  numVisitsOpen: 3,\n  numVisitsTotal: 8,\n  visits: [],\n  loading: true,\n  kind: 'recent',\n};\n\nexport const defaultContextValue: ContextValue = {\n  ...defaultContextValueOnly,\n  setCollapsed: () => {},\n  setNumVisitsOpen: () => {},\n  setNumVisitsTotal: () => {},\n  setVisits: () => {},\n  setLoading: () => {},\n  setKind: () => {},\n  setContext: () => {},\n};\n\nexport const Context = createContext<ContextValue>(defaultContextValue);\n\nconst getFilteredSet =\n  <T,>(\n    setContext: Dispatch<SetStateAction<ContextValueOnly>>,\n    contextKey: keyof ContextValueOnly,\n  ) =>\n  (e: SetStateAction<T>) =>\n    setContext(state => ({\n      ...state,\n      [contextKey]:\n        typeof e === 'function' ? (e as Function)(state[contextKey]) : e,\n    }));\n\nexport const ContextProvider = ({ children }: { children: JSX.Element }) => {\n  const [context, setContext] = React.useState<ContextValueOnly>(\n    defaultContextValueOnly,\n  );\n  const {\n    setCollapsed,\n    setNumVisitsOpen,\n    setNumVisitsTotal,\n    setVisits,\n    setLoading,\n    setKind,\n  } = useMemo(\n    () => ({\n      setCollapsed: getFilteredSet(setContext, 'collapsed'),\n      setNumVisitsOpen: getFilteredSet(setContext, 'numVisitsOpen'),\n      setNumVisitsTotal: getFilteredSet(setContext, 'numVisitsTotal'),\n      setVisits: getFilteredSet(setContext, 'visits'),\n      setLoading: getFilteredSet(setContext, 'loading'),\n      setKind: getFilteredSet(setContext, 'kind'),\n    }),\n    [setContext],\n  );\n\n  const value: ContextValue = {\n    ...context,\n    setContext,\n    setCollapsed,\n    setNumVisitsOpen,\n    setNumVisitsTotal,\n    setVisits,\n    setLoading,\n    setKind,\n  };\n\n  return <Context.Provider value={value}>{children}</Context.Provider>;\n};\n\nexport const useContext = () => {\n  const value = React.useContext(Context);\n\n  if (value === undefined)\n    throw new Error(\n      'VisitedByType useContext found undefined ContextValue, <ContextProvider/> could be missing',\n    );\n\n  return value;\n};\n\nexport default Context;\n","/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useCallback } from 'react';\nimport { Button } from '@material-ui/core';\nimport { useContext } from './Context';\n\nexport const Actions = () => {\n  const { collapsed, setCollapsed, visits, numVisitsOpen, loading } =\n    useContext();\n  const onClick = useCallback(\n    () => setCollapsed(prevCollapsed => !prevCollapsed),\n    [setCollapsed],\n  );\n  const label = collapsed ? 'View More' : 'View Less';\n\n  if (!loading && visits.length <= numVisitsOpen) return <></>;\n\n  return (\n    <Button variant=\"text\" onClick={onClick}>\n      {label}\n    </Button>\n  );\n};\n","/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Visit,\n  VisitsApiQueryParams,\n  Operators,\n  isOperator,\n} from './VisitsApi';\nimport { Config } from '@backstage/config';\n\n/**\n * Reads a single FilterBy config.\n *\n * @param config - The single config object\n *\n * @public\n */\n\nexport function readFilterConfig(config: Config):\n  | {\n      field: keyof Visit;\n      operator: Operators;\n      value: string | number;\n    }\n  | undefined {\n  try {\n    const field = config.getString('field') as keyof Visit;\n    const operator = config.getString('operator');\n    const value = getValue(config);\n    if (isOperator(operator) && value !== undefined) {\n      return { field, operator, value };\n    }\n    return undefined;\n  } catch (error) {\n    // invalid filter config - ignore filter\n    return undefined;\n  }\n}\n\nfunction getValue(config: Config) {\n  let value = undefined;\n  try {\n    value = config.getString('value');\n  } catch (error) {\n    try {\n      value = config.getNumber('value');\n    } catch {\n      // value is not string or number - ignore filter\n    }\n  }\n  return value;\n}\n\n/**\n * Reads a set of filter by configs.\n *\n * @param configs - All of the config objects\n *\n * @public\n */\nexport function createFilterByQueryParamFromConfig(\n  configs: Config[],\n): VisitsApiQueryParams['filterBy'] | undefined {\n  try {\n    return configs\n      .map(readFilterConfig)\n      .filter(Boolean) as VisitsApiQueryParams['filterBy'];\n  } catch {\n    return undefined;\n  }\n}\n","/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Typography, makeStyles } from '@material-ui/core';\nimport { Visit } from '../../api/VisitsApi';\nimport { Link } from '@backstage/core-components';\n\nconst useStyles = makeStyles(_theme => ({\n  name: {\n    marginLeft: '0.8rem',\n    marginRight: '0.8rem',\n  },\n}));\nexport const ItemName = ({ visit }: { visit: Visit }) => {\n  const classes = useStyles();\n\n  return (\n    <Typography\n      component={Link}\n      to={visit.pathname}\n      noWrap\n      className={classes.name}\n    >\n      {visit.name}\n    </Typography>\n  );\n};\n","/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { Visit } from '../../api/VisitsApi';\nimport { DateTime } from 'luxon';\n\nconst ItemDetailHits = ({ visit }: { visit: Visit }) => (\n  <Typography component=\"span\" variant=\"caption\" color=\"textSecondary\">\n    {visit.hits} time{visit.hits > 1 ? 's' : ''}\n  </Typography>\n);\n\nconst ItemDetailTimeAgo = ({ visit }: { visit: Visit }) => {\n  const visitDate = DateTime.fromMillis(visit.timestamp);\n\n  return (\n    <Typography\n      component=\"time\"\n      variant=\"caption\"\n      color=\"textSecondary\"\n      dateTime={visitDate.toISO() ?? undefined}\n    >\n      {visitDate >= DateTime.now().startOf('day')\n        ? visitDate.toFormat('HH:mm')\n        : visitDate.toRelative()}\n    </Typography>\n  );\n};\n\nexport type ItemDetailType = 'time-ago' | 'hits';\n\nexport const ItemDetail = ({\n  visit,\n  type,\n}: {\n  visit: Visit;\n  type: ItemDetailType;\n}) =>\n  type === 'time-ago' ? (\n    <ItemDetailTimeAgo visit={visit} />\n  ) : (\n    <ItemDetailHits visit={visit} />\n  );\n","/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Chip, makeStyles } from '@material-ui/core';\nimport { colorVariants } from '@backstage/theme';\nimport { Visit } from '../../api/VisitsApi';\nimport { CompoundEntityRef, parseEntityRef } from '@backstage/catalog-model';\n\nconst useStyles = makeStyles(theme => ({\n  chip: {\n    color: theme.palette.common.white,\n    fontWeight: 'bold',\n    margin: 0,\n  },\n}));\nconst maybeEntity = (visit: Visit): CompoundEntityRef | undefined => {\n  try {\n    return parseEntityRef(visit?.entityRef ?? '');\n  } catch (e) {\n    return undefined;\n  }\n};\nconst getColorByIndex = (index: number) => {\n  const variants = Object.keys(colorVariants);\n  const variantIndex = index % variants.length;\n  return colorVariants[variants[variantIndex]][0];\n};\nconst getChipColor = (entity: CompoundEntityRef | undefined): string => {\n  const defaultColor = getColorByIndex(0);\n  if (!entity) return defaultColor;\n\n  // IDEA: Use or replicate useAllKinds hook thus supporting all software catalog\n  //       registered kinds. See:\n  //       plugins/catalog-react/src/components/EntityKindPicker/kindFilterUtils.ts\n  //       Provide extension point to register your own color code.\n  const entityKinds = [\n    'component',\n    'template',\n    'api',\n    'group',\n    'user',\n    'resource',\n    'system',\n    'domain',\n    'location',\n  ];\n  const foundIndex = entityKinds.indexOf(\n    entity.kind.toLocaleLowerCase('en-US'),\n  );\n  return foundIndex === -1 ? defaultColor : getColorByIndex(foundIndex + 1);\n};\n\nexport const ItemCategory = ({ visit }: { visit: Visit }) => {\n  const classes = useStyles();\n  const entity = maybeEntity(visit);\n\n  return (\n    <Chip\n      size=\"small\"\n      className={classes.chip}\n      label={(entity?.kind ?? 'Other').toLocaleLowerCase('en-US')}\n      style={{ background: getChipColor(entity) }}\n    />\n  );\n};\n","/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  makeStyles,\n} from '@material-ui/core';\nimport { Visit } from '../../api/VisitsApi';\nimport { ItemName } from './ItemName';\nimport { ItemDetail, ItemDetailType } from './ItemDetail';\nimport { ItemCategory } from './ItemCategory';\n\nconst useStyles = makeStyles(_theme => ({\n  avatar: {\n    minWidth: 0,\n  },\n}));\nexport const VisitListItem = ({\n  visit,\n  detailType,\n}: {\n  visit: Visit;\n  detailType: ItemDetailType;\n}) => {\n  const classes = useStyles();\n\n  return (\n    <ListItem disableGutters>\n      <ListItemAvatar className={classes.avatar}>\n        <ItemCategory visit={visit} />\n      </ListItemAvatar>\n      <ListItemText\n        primary={<ItemName visit={visit} />}\n        secondary={<ItemDetail visit={visit} type={detailType} />}\n        disableTypography\n      />\n    </ListItem>\n  );\n};\n","/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Typography } from '@material-ui/core';\n\nexport const VisitListEmpty = () => (\n  <>\n    <Typography variant=\"body2\" color=\"textSecondary\">\n      There are no visits to show yet.\n    </Typography>\n    <Typography variant=\"body2\" color=\"textSecondary\">\n      Once you start using Backstage, your visits will appear here as a quick\n      link to carry on where you left off.\n    </Typography>\n  </>\n);\n","/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Typography } from '@material-ui/core';\n\nexport const VisitListFew = () => (\n  <>\n    <Typography variant=\"body2\" color=\"textSecondary\">\n      The more pages you visit, the more pages will appear here.\n    </Typography>\n  </>\n);\n","/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  Collapse,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  makeStyles,\n} from '@material-ui/core';\nimport { Skeleton } from '@material-ui/lab';\n\nconst useStyles = makeStyles(_theme => ({\n  skeleton: {\n    borderRadius: 30,\n  },\n}));\n\nconst VisitListItemSkeleton = () => {\n  const classes = useStyles();\n\n  return (\n    <ListItem disableGutters>\n      <ListItemAvatar>\n        <Skeleton\n          className={classes.skeleton}\n          variant=\"rect\"\n          width={50}\n          height={24}\n        />\n      </ListItemAvatar>\n      <ListItemText\n        primary={<Skeleton variant=\"text\" width=\"100%\" height={28} />}\n        disableTypography\n      />\n    </ListItem>\n  );\n};\n\nexport const VisitListSkeleton = ({\n  numVisitsOpen,\n  numVisitsTotal,\n  collapsed,\n}: {\n  numVisitsOpen: number;\n  numVisitsTotal: number;\n  collapsed: boolean;\n}) => (\n  <>\n    {Array(numVisitsOpen)\n      .fill(null)\n      .map((_e, index) => (\n        <VisitListItemSkeleton key={index} />\n      ))}\n    {numVisitsTotal > numVisitsOpen && (\n      <Collapse in={!collapsed}>\n        {Array(numVisitsTotal - numVisitsOpen)\n          .fill(null)\n          .map((_e, index) => (\n            <VisitListItemSkeleton key={index} />\n          ))}\n      </Collapse>\n    )}\n  </>\n);\n","/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Collapse, List, Typography, makeStyles } from '@material-ui/core';\nimport { Visit } from '../../api/VisitsApi';\nimport { VisitListItem } from './VisitListItem';\nimport { ItemDetailType } from './ItemDetail';\nimport { VisitListEmpty } from './VisitListEmpty';\nimport { VisitListFew } from './VisitListFew';\nimport { VisitListSkeleton } from './VisitListSkeleton';\n\nconst useStyles = makeStyles(_theme => ({\n  title: {\n    marginBottom: '2rem',\n  },\n}));\n\nexport const VisitList = ({\n  title,\n  detailType,\n  visits = [],\n  numVisitsOpen = 3,\n  numVisitsTotal = 8,\n  collapsed = true,\n  loading = false,\n}: {\n  title: string;\n  detailType: ItemDetailType;\n  visits?: Visit[];\n  numVisitsOpen?: number;\n  numVisitsTotal?: number;\n  collapsed?: boolean;\n  loading?: boolean;\n}) => {\n  const classes = useStyles();\n\n  let listBody: React.ReactElement = <></>;\n  if (loading) {\n    listBody = (\n      <VisitListSkeleton\n        numVisitsOpen={numVisitsOpen}\n        numVisitsTotal={numVisitsTotal}\n        collapsed={collapsed}\n      />\n    );\n  } else if (visits.length === 0) {\n    listBody = <VisitListEmpty />;\n  } else if (visits.length < numVisitsOpen) {\n    listBody = (\n      <>\n        {visits.map((visit, index) => (\n          <VisitListItem visit={visit} key={index} detailType={detailType} />\n        ))}\n        <VisitListFew />\n      </>\n    );\n  } else {\n    listBody = (\n      <>\n        {visits.slice(0, numVisitsOpen).map((visit, index) => (\n          <VisitListItem visit={visit} key={index} detailType={detailType} />\n        ))}\n        {visits.length > numVisitsOpen && (\n          <Collapse in={!collapsed}>\n            {visits.slice(numVisitsOpen, numVisitsTotal).map((visit, index) => (\n              <VisitListItem\n                visit={visit}\n                key={index}\n                detailType={detailType}\n              />\n            ))}\n          </Collapse>\n        )}\n      </>\n    );\n  }\n\n  return (\n    <>\n      <Typography variant=\"h5\" className={classes.title}>\n        {title}\n      </Typography>\n      <List dense disablePadding>\n        {listBody}\n      </List>\n    </>\n  );\n};\n","/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { VisitList } from '../../components/VisitList';\nimport { useContext } from './Context';\n\nexport const VisitedByType = () => {\n  const { collapsed, numVisitsOpen, numVisitsTotal, visits, loading, kind } =\n    useContext();\n\n  return (\n    <VisitList\n      visits={visits}\n      title={kind === 'top' ? 'Top Visited' : 'Recently Visited'}\n      detailType={kind === 'top' ? 'hits' : 'time-ago'}\n      collapsed={collapsed}\n      numVisitsOpen={numVisitsOpen}\n      numVisitsTotal={numVisitsTotal}\n      loading={loading}\n    />\n  );\n};\n","/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport { createFilterByQueryParamFromConfig } from '../../api/config';\nimport { VisitedByType } from './VisitedByType';\nimport { Visit, visitsApiRef } from '../../api';\nimport { ContextValueOnly, useContext } from './Context';\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\n\n/** @public */\nexport type VisitedByTypeKind = 'recent' | 'top';\n\n/** @public */\nexport type VisitedByTypeProps = {\n  visits?: Array<Visit>;\n  numVisitsOpen?: number;\n  numVisitsTotal?: number;\n  loading?: boolean;\n  kind: VisitedByTypeKind;\n};\n\n/**\n * Display recently visited pages for the homepage\n * @public\n */\nexport const Content = ({\n  visits,\n  numVisitsOpen,\n  numVisitsTotal,\n  loading,\n  kind,\n}: VisitedByTypeProps) => {\n  const { setContext, setVisits, setLoading } = useContext();\n  // Allows behavior override from properties\n  useEffect(() => {\n    const context: Partial<ContextValueOnly> = {};\n    context.kind = kind;\n    if (visits) {\n      context.visits = visits;\n      context.loading = false;\n    } else if (loading) {\n      context.loading = loading;\n    }\n    if (numVisitsOpen) context.numVisitsOpen = numVisitsOpen;\n    if (numVisitsTotal) context.numVisitsTotal = numVisitsTotal;\n    setContext(state => ({ ...state, ...context }));\n  }, [setContext, kind, visits, loading, numVisitsOpen, numVisitsTotal]);\n\n  const config = useApi(configApiRef);\n  // Fetches data from visitsApi in case visits and loading are not provided\n  const visitsApi = useApi(visitsApiRef);\n  const { loading: reqLoading } = useAsync(async () => {\n    if (!visits && !loading && kind === 'recent') {\n      const filterBy = createFilterByQueryParamFromConfig(\n        config.getOptionalConfigArray('home.recentVisits.filterBy') ?? [],\n      );\n      return await visitsApi\n        .list({\n          limit: numVisitsTotal ?? 8,\n          orderBy: [{ field: 'timestamp', direction: 'desc' }],\n          ...(filterBy && { filterBy }),\n        })\n        .then(setVisits);\n    }\n    if (!visits && !loading && kind === 'top') {\n      const filterBy = createFilterByQueryParamFromConfig(\n        config.getOptionalConfigArray('home.topVisits.filterBy') ?? [],\n      );\n      return await visitsApi\n        .list({\n          limit: numVisitsTotal ?? 8,\n          orderBy: [{ field: 'hits', direction: 'desc' }],\n          ...(filterBy && { filterBy }),\n        })\n        .then(setVisits);\n    }\n    return undefined;\n  }, [visitsApi, visits, loading, setVisits]);\n  useEffect(() => {\n    if (!loading) {\n      setLoading(reqLoading);\n    }\n  }, [loading, setLoading, reqLoading]);\n\n  return <VisitedByType />;\n};\n"],"names":["useStyles"],"mappings":"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"}