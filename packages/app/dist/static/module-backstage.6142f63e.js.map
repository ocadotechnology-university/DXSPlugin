{"version":3,"file":"static/module-backstage.6142f63e.js","mappings":"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AAa,+FACb,UAAW,EACX,SAAU,CACT,wBACA,oBACA,KACD,CACD,EACA,KAAM,CACL,KAAM,SACN,YAAa,8CACb,UAAW,EACX,SAAU,CACT,MACA,YACA,SACA,QACA,WACA,WACA,SACA,WACA,MACD,CACD,EACA,SAAU,CACT,KAAM,SACN,SAAU,CACT,MACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,6HACb,SAAU,CACT,gBACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,4CACb,QAAW,UACX,SAAU,CACT,UACA,OACD,EACA,UAAW,CACZ,CACD,CACD,CACD,EACIC,GAAuB,CAC1B,QAASR,EACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,KAAMC,GACN,SAAUC,GACV,qBAAsBC,GACtB,WAAYC,EACb,EAEIE,GAAY,yCACZC,GAAQ,SACRC,GAAgB,yEAChBC,EAAa,CAChB,CACC,WAAY,wBACZ,KAAM,YACN,SAAU,CACT,KAAM,eACN,YAAa,6BACb,OAAQ,CACP,aAAc,wBACf,EACA,YAAa,CACZ,KAAM,0CACP,CACD,EACA,KAAM,CACL,KAAM,UACN,UAAW,aACX,MAAO,OACR,CACD,CACD,EACIC,EAAS,SACTC,GAAa,CAChB,aACA,OACA,UACD,EACIC,GAAyB,GACzBC,GAAe,CAClB,WAAY,CACX,KAAM,SACN,YAAa,+FACb,UAAW,EACX,SAAU,CACT,wBACA,oBACA,KACD,CACD,EACA,KAAM,CACL,KAAM,SACN,YAAa,8CACb,UAAW,EACX,SAAU,CACT,MACA,YACA,SACA,QACA,WACA,WACA,SACA,WACA,MACD,CACD,EACA,SAAU,CACT,KAAM,YACP,EACA,KAAM,CACL,KAAM,SACN,YAAa,sDACd,EACA,UAAW,CACV,KAAM,QACN,YAAa,0DACb,MAAO,CACN,KAAM,iBACP,CACD,EACA,OAAQ,CACP,KAAM,eACP,CACD,EACIC,GAAe,CAClB,QAASR,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,EACV,KAAMC,EACN,SAAUC,GACV,qBAAsBC,GACtB,WAAYC,EACb,EAEIE,GAAY,yCACZC,GAAQ,aACRC,GAAgB,0DAChBC,EAAa,CAChB,CACC,IAAK,uCACL,KAAM,2BACN,KAAM,mBACN,UAAW,gBACX,OAAQ,CACP,sBAAuB,YACxB,EACA,YAAa,CACZ,uBAAwB,YACzB,EACA,KAAM,CACL,OACA,MACD,CACD,CACD,EACIC,EAAS,SACTC,EAAW,CACd,MACD,EACIC,GAAuB,GACvBC,GAAa,CAChB,IAAK,CACJ,KAAM,SACN,YAAa,iXACb,SAAU,CACT,sCACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,mbACb,SAAU,CACT,0BACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,6HACb,SAAU,CACT,gBACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,4CACb,QAAW,UACX,SAAU,CACT,UACA,OACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,iHACb,SAAU,CACT,oBACD,EACA,UAAW,CACZ,EACA,YAAa,CACZ,KAAM,SACN,YAAa,kFACd,EACA,OAAQ,CACP,KAAM,SACN,YAAa,qEACb,qBAAsB,GACtB,kBAAmB,CAClB,OAAQ,CACP,KAAM,QACP,CACD,CACD,EACA,YAAa,CACZ,KAAM,SACN,YAAa,mFACb,qBAAsB,GACtB,kBAAmB,CAClB,OAAQ,CACP,KAAM,QACP,CACD,CACD,EACA,KAAM,CACL,KAAM,QACN,YAAa,6FACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,EACA,MAAO,CACN,KAAM,QACN,YAAa,kNACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,KACD,EACA,WAAY,CACX,IAAK,CACJ,KAAM,SACN,YAAa,kCACb,SAAU,CACT,+BACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,6CACb,SAAU,CACT,iBACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,8DACb,SAAU,CACT,WACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,8DACb,SAAU,CACT,UACA,gBACA,OACA,WACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,EACIC,GAAmB,CACtB,QAASR,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,EACV,KAAMC,EACN,SAAUC,EACV,qBAAsBC,GACtB,WAAYC,EACb,EAEIE,GAAY,yCACZC,GAAQ,SACRpF,GAAO,SACPqF,GAAgB,kDAChBC,GAAc,CACjB,UAAW,CACV,IAAK,aACL,KAAM,SACN,YAAa,yCACb,SAAU,CACT,OACA,YACA,MACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,gCACb,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,8CACb,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,yCACb,UAAW,CACZ,CACD,CACD,EACA,SAAU,CACT,IAAK,YACL,KAAM,SACN,YAAa,kDACb,SAAU,CACT,OACA,WACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,UAAW,EACX,QAAS,SACT,YAAa,uBACd,EACA,OAAQ,CACP,KAAM,aACN,WAAY,EACb,EACA,UAAW,CACV,KAAM,SACN,UAAW,EACX,YAAa,gDACd,CACD,CACD,EACA,OAAQ,CACP,IAAK,UACL,KAAM,SACN,YAAa,mEACb,SAAU,CACV,EACA,qBAAsB,GACtB,WAAY,CACX,MAAO,CACN,KAAM,QACN,MAAO,CACN,KAAM,aACP,CACD,CACD,CACD,EACA,WAAY,CACX,IAAK,cACL,KAAM,SACN,YAAa,iDACb,SAAU,CACT,OACA,QACA,SACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,UAAW,CACZ,EACA,MAAO,CACN,KAAM,eACN,YAAa,iDACd,EACA,QAAS,CACR,KAAM,SACN,YAAa,wEACd,EACA,MAAO,CACN,KAAM,SACN,YAAa,4DACd,CACD,CACD,EACA,YAAa,CACZ,IAAK,eACL,KAAM,SACN,YAAa,6BACb,KAAQ,CACP,OACA,UACA,OACD,C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X,KAAM,CACL,KAAM,SACN,YAAa,kCACb,SAAU,CACT,UACA,WACA,UACA,OACA,MACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,kCACb,SAAU,CACT,eACA,aACA,YACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,+CACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,EACA,OAAQ,CACP,KAAM,SACN,YAAa,6DACb,UAAW,CACZ,EACA,WAAY,CACX,KAAM,SACN,YAAa,sEACb,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,SAASE,EAA+B5D,GAAQ,CAC9C,IAAIoC,GACJ,MAAO,CACL,MAAM,MAAMnB,GAAM,CAChB,OAAKmB,KACHA,GAAYlB,GAA0BlB,EAAM,GAEvCoC,GAAUnB,EAAI,IAAMA,EAC7B,CACF,CACF,CAEA,MAAM4C,EAA6BD,EAA+BD,EAAQ,EAE1E,IAAIG,EAAY,yCACZC,GAAQ,oBACRC,EAAgB,4PAChBC,EAAa,CAChB,CACC,WAAY,wBACZ,KAAM,YACN,SAAU,CACT,KAAM,eACN,YAAa,6BACb,OAAQ,CACP,aAAc,wBACf,EACA,YAAa,CACZ,KAAM,0CACP,CACD,EACA,KAAM,CACL,KAAM,UACN,UAAW,aACX,MAAO,OACR,CACD,CACD,EACIC,EAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,WACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACA,YACA,OACD,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,yBACb,SAAU,CACT,UACA,UACA,SACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,wCACb,SAAU,CACT,eACA,aACA,YACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,qDACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,EACA,OAAQ,CACP,KAAM,SACN,YAAa,mEACb,UAAW,CACZ,EACA,eAAgB,CACf,KAAM,SACN,YAAa,6EACb,UAAW,CACZ,EACA,aAAc,CACb,KAAM,QACN,YAAa,gFACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,EACA,aAAc,CACb,KAAM,QACN,YAAa,gFACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,EACA,UAAW,CACV,KAAM,QACN,YAAa,sFACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,EACT,IAAKC,GACL,YAAaC,EACb,SAAUC,EACV,MAAOC,CACR,EAEA,MAAME,GAAmCR,EAA+BO,EAAQ,EAEhF,IAAIE,GAAY,yCACZC,GAAQ,iBACRC,EAAgB,kJAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,SACN,SAAU,CACT,KAAM,UACN,YAAa,0BACd,EACA,KAAM,CACL,MAAO,uBACR,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,QACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACD,EACA,WAAY,CACX,MAAO,CACN,KAAM,SACN,YAAa,qDACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,EACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAAgCf,EAA+Bc,EAAQ,EAE7E,IAAIE,GAAY,yCACZC,GAAQ,gBACRC,GAAgB,kNAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,QACN,SAAU,CACT,KAAM,iBACN,YAAa,yBACd,EACA,KAAM,CACL,KAAM,gBACN,QAAS,CACR,YAAa,iBACb,MAAO,6BACP,QAAS,mDACV,EACA,OAAQ,MACR,SAAU,CACT,YACA,OACD,CACD,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,OACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACA,UACD,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,2LACb,SAAU,CACT,OACA,gBACA,eACA,MACD,EACA,UAAW,CACZ,EACA,QAAS,CACR,KAAM,SACN,YAAa,uYACb,WAAY,CACX,YAAa,CACZ,KAAM,SACN,YAAa,6CACb,SAAU,CACT,gBACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,6CACb,SAAU,CACT,4BACD,EACA,UAAW,CACZ,EACA,QAAS,CACR,KAAM,SACN,YAAa,mDACb,SAAU,CACT,mDACD,EACA,UAAW,CACZ,CACD,CACD,EACA,OAAQ,CACP,KAAM,SACN,YAAa,4NACb,SAAU,CACT,KACD,EACA,UAAW,CACZ,EACA,SAAU,CACT,KAAM,QACN,YAAa,mSACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,YACA,OACD,EACA,UAAW,CACZ,CACD,EACA,QAAS,CACR,KAAM,QACN,YAAa,6FACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,MACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAA+BtB,EAA+BqB,EAAQ,EAE5E,IAAIE,EAAY,yCACZC,EAAQ,mBACRC,GAAgB,gFAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,WACN,SAAU,CACT,KAAM,UACP,EACA,KAAM,CACL,KAAM,MACN,QAAS,CACR,0EACA,+EACD,CACD,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,UACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACV,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,gLACb,SAAU,CACT,KACD,EACA,UAAW,CACZ,EACA,OAAQ,CACP,KAAM,SACN,YAAa,6NACb,SAAU,CACT,6BACD,EACA,UAAW,CACZ,EACA,QAAS,CACR,KAAM,QACN,YAAa,sOACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,8BACA,yEACD,EACA,UAAW,CACZ,CACD,EACA,SAAU,CACT,KAAM,SACN,YAAa,sHACb,QAAW,WACX,SAAU,CACT,UACD,EACA,KAAQ,CACP,WACA,UACD,CACD,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,EACT,IAAKC,EACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAAkC7B,EAA+B4B,EAAQ,EAEzEE,GAAoB,UACpBC,GAAoB,UACpBC,GAAwB,cACxBC,GAA2B,gBAC3BC,GAAwB,cACxBC,GAA2B,gBAC3BC,GAAsB,YACtBC,GAAyB,eACzBC,GAAqB,WACrBC,GAAoB,UACpBC,GAAqB,WACrBC,GAAsB,YACtBC,GAAmB,SACnBC,GAAoB,UAE1B,IAAIC,GAAY,yCACZC,GAAQ,mBACRC,GAAgB,8PAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,WACN,SAAU,CACT,KAAM,aACN,YAAa,uBACd,EACA,KAAM,CACL,KAAM,WACN,MAAO,wBACP,OAAQ,0BACT,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,UACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACA,OACD,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,wBACb,SAAU,CACT,WACA,YACA,SACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,oDACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,QACN,YAAa,qFACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,EACA,OAAQ,CACP,KAAM,SACN,YAAa,kEACb,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAAkClD,EAA+BiD,EAAQ,EAE/E,IAAIE,GAAY,yCACZC,GAAQ,iBACRC,GAAgB,uXAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,SACN,SAAU,CACT,KAAM,2BACN,YAAa,yCACd,EACA,KAAM,CACL,MAAO,wBACP,OAAQ,SACT,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,QACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACD,EACA,WAAY,CACX,MAAO,CACN,KAAM,SACN,YAAa,qDACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,EACA,OAAQ,CACP,KAAM,SACN,YAAa,gEACb,SAAU,CACT,SACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAAgCzD,EAA+BwD,EAAQ,EAE7E,IAAIE,GAAU,yCACVC,GAAM,eACNC,GAAc,8SACdC,GAAW,CACd,CACC,WAAY,wBACZ,KAAM,OACN,SAAU,CACT,KAAM,MACP,EACA,KAAM,CACL,QAAS,CACR,YAAa,YACb,MAAO,wBACP,QAAS,qDACV,EACA,SAAU,CACT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BACP,KAAM,UACN,WAAY,CACX,SAAU,CACT,OACA,cACA,SACD,EACA,wBAAyB,CACxB,KAAM,CACL,MACA,KACD,CACD,EACA,WAAY,CACX,KAAM,CACL,MAAO,OACP,KAAM,SACN,YAAa,8BACd,EACA,YAAa,CACZ,MAAO,cACP,KAAM,SACN,YAAa,8BACd,EACA,QAAS,CACR,MAAO,oBACP,KAAM,SACN,WAAY,eACb,CACD,CACD,EACA,MAAO,CACN,CACC,GAAI,QACJ,KAAM,QACN,OAAQ,cACR,WAAY,CACX,IAAK,YACN,EACA,wBAAyB,CACxB,KAAM,CACL,MACA,KACD,CACD,CACD,EACA,CACC,GAAI,UACJ,KAAM,oBACN,OAAQ,iBACR,WAAY,CACX,QAAS,2BACV,EACA,GAAM,2BACP,CACD,EACA,OAAQ,CACP,eAAgB,4CACjB,CACD,CACD,CACD,EACIC,EAAQ,CACX,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,iCACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,UACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACA,OACD,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,+YACb,SAAU,CACT,UACA,UACA,SACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,4CACb,UAAW,CACZ,EACA,WAAY,CACX,MAAO,CACN,CACC,KAAM,SACN,YAAa,yDACb,WAAY,CACX,wBAAyB,CACxB,KAAM,SACN,YAAa,4CACb,WAAY,CACX,KAAM,CACL,KAAM,QACN,MAAO,CACN,KAAM,QACP,CACD,CACD,CACD,CACD,CACD,EACA,CACC,KAAM,QACN,YAAa,kDACb,MAAO,CACN,KAAM,SACN,YAAa,yDACb,WAAY,CACX,wBAAyB,CACxB,KAAM,SACN,YAAa,4CACb,WAAY,CACX,KAAM,CACL,KAAM,QACN,MAAO,CACN,KAAM,QACP,CACD,CACD,CACD,CACD,CACD,CACD,CACD,CACD,EACA,aAAc,CACb,KAAM,SACN,YAAa,uDACb,WAAY,CACX,eAAgB,CACf,KAAM,SACN,YAAa,kDACd,EACA,iBAAkB,CACjB,KAAM,SACN,YAAa,qDACd,EACA,iBAAkB,CACjB,KAAM,SACN,YAAa,uFACd,CACD,CACD,EACA,sBAAuB,CACtB,KAAM,SACN,YAAa,2BACb,WAAY,CACX,sBAAuB,CACtB,KAAM,SACN,YAAa,sEACd,CACD,CACD,EACA,MAAO,CACN,KAAM,QACN,YAAa,8BACb,MAAO,CACN,KAAM,SACN,YAAa,wCACb,SAAU,CACT,QACD,EACA,WAAY,CACX,GAAI,CACH,KAAM,SACN,YAAa,gEACd,EACA,KAAM,CACL,KAAM,SACN,YAAa,yFACd,EACA,OAAQ,CACP,KAAM,SACN,YAAa,oCACd,EACA,MAAO,CACN,KAAM,SACN,YAAa,yDACd,EACA,GAAM,CACL,KAAM,CACL,SACA,SACD,EACA,YAAa,gOACd,EACA,wBAAyB,CACxB,KAAM,SACN,YAAa,uCACb,WAAY,CACX,KAAM,CACL,KAAM,QACN,MAAO,CACN,KAAM,QACP,CACD,CACD,CACD,CACD,CACD,CACD,EACA,OAAQ,CACP,KAAM,SACN,YAAa,qEACb,WAAY,CACX,MAAO,CACN,KAAM,QACN,YAAa,oGACb,MAAO,CACN,KAAM,SACN,SAAU,CACV,EACA,WAAY,CACX,IAAK,CACJ,KAAM,SACN,YAAa,kCACb,SAAU,CACT,uCACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,mDACb,SAAU,CACT,0BACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,6CACb,SAAU,CACT,eACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,8DACb,SAAU,CACT,WACD,EACA,UAAW,CACZ,CACD,CACD,CACD,EACA,KAAM,CACL,KAAM,QACN,YAAa,qEACb,MAAO,CACN,KAAM,SACN,SAAU,CACV,EACA,WAAY,CACX,MAAO,CACN,KAAM,SACN,YAAa,6CACb,SAAU,CACT,gBACD,EACA,UAAW,CACZ,EACA,KAA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","sources":["webpack://app/../../node_modules/@backstage/app-defaults/dist/index.esm.js","webpack://app/../../node_modules/@backstage/catalog-client/dist/index.esm.js","webpack://app/../../node_modules/@backstage/catalog-model/dist/index.esm.js","webpack://app/../../node_modules/@backstage/config/dist/index.esm.js","webpack://app/../../node_modules/@backstage/core-app-api/dist/index.esm.js","webpack://app/../../node_modules/@backstage/core-components/dist/index.esm.js","webpack://app/../../node_modules/@backstage/core-plugin-api/dist/alpha.esm.js","webpack://app/../../node_modules/@backstage/core-plugin-api/dist/esm/StorageApi-c8a5e616.esm.js","webpack://app/../../node_modules/@backstage/core-plugin-api/dist/index.esm.js","webpack://app/../../node_modules/@backstage/errors/dist/index.esm.js","webpack://app/../../node_modules/@backstage/integration-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/integration/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-api-docs/dist/esm/ApiDefinitionWidget-798ee85f.esm.js","webpack://app/../../node_modules/@backstage/plugin-api-docs/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-bazaar/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-common/dist/alpha.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-graph/dist/esm/routes-c6756725.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-graph/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-import/dist/esm/plugin-5ca30662.esm.js","webpack://app/../../node_modules/@backstage/frontend-plugin-api/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/dist/alpha.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/dist/esm/useEntity-de64059a.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog/dist/esm/EntityLayout-51caff9c.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog/dist/esm/EntitySwitch-b8889a58.esm.js","webpack://app/../../node_modules/@backstage/types/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog/dist/esm/routes-6e97578f.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-github-actions/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-home-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-home/dist/esm/VisitListener-7a513ef0.esm.js","webpack://app/../../node_modules/@backstage/plugin-home/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-org/dist/esm/routes-e3daad75.esm.js","webpack://app/../../node_modules/@backstage/plugin-org/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-permission-common/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-permission-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-common/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/alpha.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/esm/ref-e2ee478c.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/esm/OngoingTask-5a95edc0.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/esm/routes-1428737e.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/node_modules/event-source-polyfill/src/eventsource.js","webpack://app/../../node_modules/@backstage/plugin-search-react/dist/esm/extensions-c878c532.esm.js","webpack://app/../../node_modules/@backstage/plugin-search-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-search/dist/esm/SearchType-a8f79021.esm.js","webpack://app/../../node_modules/@backstage/plugin-tech-radar/dist/esm/plugin-76dae734.esm.js","webpack://app/../../node_modules/@backstage/plugin-techdocs-module-addons-contrib/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-techdocs-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-techdocs/dist/esm/Router-79dfcddc.esm.js","webpack://app/../../node_modules/@backstage/plugin-techdocs/dist/esm/TechDocsIndexPage-a43a1a1c.esm.js","webpack://app/../../node_modules/@backstage/plugin-techdocs/dist/esm/TechDocsReaderPage-b432d0c4.esm.js","webpack://app/../../node_modules/@backstage/plugin-techdocs/dist/esm/TechDocsSearchResultListItem-4736f829.esm.js","webpack://app/../../node_modules/@backstage/plugin-techdocs/dist/esm/routes-691e552c.esm.js","webpack://app/../../node_modules/@backstage/plugin-user-settings/dist/esm/SettingsPage-500a9808.esm.js","webpack://app/../../node_modules/@backstage/plugin-user-settings/dist/esm/translation-bd96c6ff.esm.js","webpack://app/../../node_modules/@backstage/plugin-user-settings/dist/index.esm.js","webpack://app/../../node_modules/@backstage/theme/dist/index.esm.js","webpack://app/../../node_modules/@backstage/version-bridge/dist/index.esm.js"],"sourcesContent":["import { UrlPatternDiscovery, AlertApiForwarder, NoOpAnalyticsApi, ErrorAlerter, ErrorApiForwarder, UnhandledErrorForwarder, WebStorage, createFetchApi, FetchMiddlewares, OAuthRequestManager, GoogleAuth, MicrosoftAuth, GithubAuth, OktaAuth, GitlabAuth, OneLoginAuth, BitbucketAuth, BitbucketServerAuth, AtlassianAuth, VMwareCloudAuth, createSpecializedApp } from '@backstage/core-app-api';\nimport { createApiFactory, discoveryApiRef, configApiRef, alertApiRef, analyticsApiRef, errorApiRef, storageApiRef, fetchApiRef, identityApiRef, oauthRequestApiRef, googleAuthApiRef, microsoftAuthApiRef, githubAuthApiRef, oktaAuthApiRef, gitlabAuthApiRef, oneloginAuthApiRef, bitbucketAuthApiRef, bitbucketServerAuthApiRef, atlassianAuthApiRef, vmwareCloudAuthApiRef } from '@backstage/core-plugin-api';\nimport { permissionApiRef, IdentityPermissionApi } from '@backstage/plugin-permission-react';\nimport React from 'react';\nimport Button from '@material-ui/core/Button';\nimport { Progress, ErrorPage, ErrorPanel } from '@backstage/core-components';\nimport { BrowserRouter, useInRouterContext, MemoryRouter } from 'react-router-dom';\nimport MuiApartmentIcon from '@material-ui/icons/Apartment';\nimport MuiBrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport MuiCategoryIcon from '@material-ui/icons/Category';\nimport MuiCreateNewFolderIcon from '@material-ui/icons/CreateNewFolder';\nimport MuiSubjectIcon from '@material-ui/icons/Subject';\nimport MuiSearchIcon from '@material-ui/icons/Search';\nimport MuiChatIcon from '@material-ui/icons/Chat';\nimport MuiDashboardIcon from '@material-ui/icons/Dashboard';\nimport MuiDocsIcon from '@material-ui/icons/Description';\nimport MuiEmailIcon from '@material-ui/icons/Email';\nimport MuiExtensionIcon from '@material-ui/icons/Extension';\nimport MuiGitHubIcon from '@material-ui/icons/GitHub';\nimport MuiHelpIcon from '@material-ui/icons/Help';\nimport MuiLocationOnIcon from '@material-ui/icons/LocationOn';\nimport MuiMemoryIcon from '@material-ui/icons/Memory';\nimport MuiMenuBookIcon from '@material-ui/icons/MenuBook';\nimport MuiPeopleIcon from '@material-ui/icons/People';\nimport MuiPersonIcon from '@material-ui/icons/Person';\nimport MuiWarningIcon from '@material-ui/icons/Warning';\nimport MuiStorageIcon from '@material-ui/icons/Storage';\nimport MuiFeaturedPlayListIcon from '@material-ui/icons/FeaturedPlayList';\nimport { UnifiedThemeProvider, themes as themes$1 } from '@backstage/theme';\nimport DarkIcon from '@material-ui/icons/Brightness2';\nimport LightIcon from '@material-ui/icons/WbSunny';\n\nconst apis = [\n  createApiFactory({\n    api: discoveryApiRef,\n    deps: { configApi: configApiRef },\n    factory: ({ configApi }) => UrlPatternDiscovery.compile(\n      `${configApi.getString(\"backend.baseUrl\")}/api/{{ pluginId }}`\n    )\n  }),\n  createApiFactory({\n    api: alertApiRef,\n    deps: {},\n    factory: () => new AlertApiForwarder()\n  }),\n  createApiFactory({\n    api: analyticsApiRef,\n    deps: {},\n    factory: () => new NoOpAnalyticsApi()\n  }),\n  createApiFactory({\n    api: errorApiRef,\n    deps: { alertApi: alertApiRef },\n    factory: ({ alertApi }) => {\n      const errorApi = new ErrorAlerter(alertApi, new ErrorApiForwarder());\n      UnhandledErrorForwarder.forward(errorApi, { hidden: false });\n      return errorApi;\n    }\n  }),\n  createApiFactory({\n    api: storageApiRef,\n    deps: { errorApi: errorApiRef },\n    factory: ({ errorApi }) => WebStorage.create({ errorApi })\n  }),\n  createApiFactory({\n    api: fetchApiRef,\n    deps: {\n      configApi: configApiRef,\n      identityApi: identityApiRef,\n      discoveryApi: discoveryApiRef\n    },\n    factory: ({ configApi, identityApi, discoveryApi }) => {\n      return createFetchApi({\n        middleware: [\n          FetchMiddlewares.resolvePluginProtocol({\n            discoveryApi\n          }),\n          FetchMiddlewares.injectIdentityAuth({\n            identityApi,\n            config: configApi\n          })\n        ]\n      });\n    }\n  }),\n  createApiFactory({\n    api: oauthRequestApiRef,\n    deps: {},\n    factory: () => new OAuthRequestManager()\n  }),\n  createApiFactory({\n    api: googleAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GoogleAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: microsoftAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => MicrosoftAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: githubAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GithubAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      defaultScopes: [\"read:user\"],\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: oktaAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => OktaAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: gitlabAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GitlabAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: oneloginAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => OneLoginAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: bitbucketAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => BitbucketAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      defaultScopes: [\"account\"],\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: bitbucketServerAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => BitbucketServerAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      defaultScopes: [\"REPO_READ\"]\n    })\n  }),\n  createApiFactory({\n    api: atlassianAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => {\n      return AtlassianAuth.create({\n        configApi,\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString(\"auth.environment\")\n      });\n    }\n  }),\n  createApiFactory({\n    api: vmwareCloudAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => {\n      return VMwareCloudAuth.create({\n        configApi,\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString(\"auth.environment\")\n      });\n    }\n  }),\n  createApiFactory({\n    api: permissionApiRef,\n    deps: {\n      discovery: discoveryApiRef,\n      identity: identityApiRef,\n      config: configApiRef\n    },\n    factory: ({ config, discovery, identity }) => IdentityPermissionApi.create({ config, discovery, identity })\n  })\n];\n\nfunction OptionallyWrapInRouter({ children }) {\n  if (useInRouterContext()) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  }\n  return /* @__PURE__ */ React.createElement(MemoryRouter, null, children);\n}\nconst DefaultNotFoundPage = () => /* @__PURE__ */ React.createElement(ErrorPage, { status: \"404\", statusMessage: \"PAGE NOT FOUND\" });\nconst DefaultBootErrorPage = ({ step, error }) => {\n  let message = \"\";\n  if (step === \"load-config\") {\n    message = `The configuration failed to load, someone should have a look at this error: ${error.message}`;\n  } else if (step === \"load-chunk\") {\n    message = `Lazy loaded chunk failed to load, try to reload the page: ${error.message}`;\n  }\n  return /* @__PURE__ */ React.createElement(OptionallyWrapInRouter, null, /* @__PURE__ */ React.createElement(ErrorPage, { statusMessage: message, stack: error.stack }));\n};\nconst DefaultErrorBoundaryFallback = ({\n  error,\n  resetError,\n  plugin\n}) => {\n  return /* @__PURE__ */ React.createElement(\n    ErrorPanel,\n    {\n      title: `Error in ${plugin == null ? void 0 : plugin.getId()}`,\n      defaultExpanded: true,\n      error\n    },\n    /* @__PURE__ */ React.createElement(Button, { variant: \"outlined\", onClick: resetError }, \"Retry\")\n  );\n};\nconst components = {\n  Progress,\n  Router: BrowserRouter,\n  NotFoundErrorPage: DefaultNotFoundPage,\n  BootErrorPage: DefaultBootErrorPage,\n  ErrorBoundaryFallback: DefaultErrorBoundaryFallback\n};\n\nconst icons = {\n  brokenImage: MuiBrokenImageIcon,\n  // To be confirmed: see https://github.com/backstage/backstage/issues/4970\n  catalog: MuiMenuBookIcon,\n  scaffolder: MuiCreateNewFolderIcon,\n  techdocs: MuiSubjectIcon,\n  search: MuiSearchIcon,\n  chat: MuiChatIcon,\n  dashboard: MuiDashboardIcon,\n  docs: MuiDocsIcon,\n  email: MuiEmailIcon,\n  github: MuiGitHubIcon,\n  group: MuiPeopleIcon,\n  help: MuiHelpIcon,\n  \"kind:api\": MuiExtensionIcon,\n  \"kind:component\": MuiMemoryIcon,\n  \"kind:domain\": MuiApartmentIcon,\n  \"kind:group\": MuiPeopleIcon,\n  \"kind:location\": MuiLocationOnIcon,\n  \"kind:system\": MuiCategoryIcon,\n  \"kind:user\": MuiPersonIcon,\n  \"kind:resource\": MuiStorageIcon,\n  \"kind:template\": MuiFeaturedPlayListIcon,\n  user: MuiPersonIcon,\n  warning: MuiWarningIcon\n};\n\nconst themes = [\n  {\n    id: \"light\",\n    title: \"Light Theme\",\n    variant: \"light\",\n    icon: /* @__PURE__ */ React.createElement(LightIcon, null),\n    Provider: ({ children }) => /* @__PURE__ */ React.createElement(UnifiedThemeProvider, { theme: themes$1.light, children })\n  },\n  {\n    id: \"dark\",\n    title: \"Dark Theme\",\n    variant: \"dark\",\n    icon: /* @__PURE__ */ React.createElement(DarkIcon, null),\n    Provider: ({ children }) => /* @__PURE__ */ React.createElement(UnifiedThemeProvider, { theme: themes$1.dark, children })\n  }\n];\n\nfunction createApp(options) {\n  var _a, _b, _c, _d;\n  return createSpecializedApp({\n    ...options,\n    apis: (_a = options == null ? void 0 : options.apis) != null ? _a : [],\n    bindRoutes: options == null ? void 0 : options.bindRoutes,\n    components: {\n      ...components,\n      ...options == null ? void 0 : options.components\n    },\n    configLoader: options == null ? void 0 : options.configLoader,\n    defaultApis: apis,\n    icons: {\n      ...icons,\n      ...options == null ? void 0 : options.icons\n    },\n    plugins: (_b = options == null ? void 0 : options.plugins) != null ? _b : [],\n    featureFlags: (_c = options == null ? void 0 : options.featureFlags) != null ? _c : [],\n    themes: (_d = options == null ? void 0 : options.themes) != null ? _d : themes\n  });\n}\n\nexport { createApp };\n//# sourceMappingURL=index.esm.js.map\n","import { parseEntityRef, stringifyLocationRef, stringifyEntityRef } from '@backstage/catalog-model';\nimport { ResponseError } from '@backstage/errors';\nimport crossFetch from 'cross-fetch';\nimport * as parser from 'uri-template';\n\nconst CATALOG_FILTER_EXISTS = Symbol.for(\n  // Random UUID to ensure no collisions\n  \"CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111\"\n);\n\nfunction isQueryEntitiesInitialRequest(request) {\n  return !request.cursor;\n}\n\nconst pluginId = \"catalog\";\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass DefaultApiClient {\n  constructor(options) {\n    __publicField$1(this, \"discoveryApi\");\n    __publicField$1(this, \"fetchApi\");\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = options.fetchApi || { fetch: crossFetch };\n  }\n  /**\n   * Validate a given location.\n   * @param analyzeLocationRequest\n   */\n  async analyzeLocation(request, options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(pluginId);\n    const uriTemplate = `/analyze-location`;\n    const uri = parser.parse(uriTemplate).expand({});\n    return await this.fetchApi.fetch(`${baseUrl}${uri}`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"POST\",\n      body: JSON.stringify(request.body)\n    });\n  }\n  /**\n   * Create a location for a given target.\n   * @param createLocationRequest\n   * @param dryRun\n   */\n  async createLocation(request, options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(pluginId);\n    const uriTemplate = `/locations{?dryRun}`;\n    const uri = parser.parse(uriTemplate).expand({\n      ...request.query\n    });\n    return await this.fetchApi.fetch(`${baseUrl}${uri}`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"POST\",\n      body: JSON.stringify(request.body)\n    });\n  }\n  /**\n   * Delete a single entity by UID.\n   * @param uid\n   */\n  async deleteEntityByUid(request, options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(pluginId);\n    const uriTemplate = `/entities/by-uid/{uid}`;\n    const uri = parser.parse(uriTemplate).expand({\n      uid: request.path.uid\n    });\n    return await this.fetchApi.fetch(`${baseUrl}${uri}`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"DELETE\"\n    });\n  }\n  /**\n   * Delete a location by id.\n   * @param id\n   */\n  async deleteLocation(request, options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(pluginId);\n    const uriTemplate = `/locations/{id}`;\n    const uri = parser.parse(uriTemplate).expand({\n      id: request.path.id\n    });\n    return await this.fetchApi.fetch(`${baseUrl}${uri}`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"DELETE\"\n    });\n  }\n  /**\n   * Get all entities matching a given filter.\n   * @param fields Restrict to just these fields in the response.\n   * @param limit Number of records to return in the response.\n   * @param filter Filter for just the entities defined by this filter.\n   * @param offset Number of records to skip in the query page.\n   * @param after Pointer to the previous page of results.\n   * @param order\n   */\n  async getEntities(request, options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(pluginId);\n    const uriTemplate = `/entities{?fields,limit,filter*,offset,after,order*}`;\n    const uri = parser.parse(uriTemplate).expand({\n      ...request.query\n    });\n    return await this.fetchApi.fetch(`${baseUrl}${uri}`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"GET\"\n    });\n  }\n  /**\n   * Search for entities by a given query.\n   * @param fields Restrict to just these fields in the response.\n   * @param limit Number of records to return in the response.\n   * @param orderField The fields to sort returned results by.\n   * @param cursor Cursor to a set page of results.\n   * @param filter Filter for just the entities defined by this filter.\n   * @param fullTextFilterTerm Text search term.\n   * @param fullTextFilterFields A comma separated list of fields to sort returned results by.\n   */\n  async getEntitiesByQuery(request, options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(pluginId);\n    const uriTemplate = `/entities/by-query{?fields,limit,orderField*,cursor,filter*,fullTextFilterTerm,fullTextFilterFields}`;\n    const uri = parser.parse(uriTemplate).expand({\n      ...request.query\n    });\n    return await this.fetchApi.fetch(`${baseUrl}${uri}`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"GET\"\n    });\n  }\n  /**\n   * Get a batch set of entities given an array of entityRefs.\n   * @param getEntitiesByRefsRequest\n   */\n  async getEntitiesByRefs(request, options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(pluginId);\n    const uriTemplate = `/entities/by-refs`;\n    const uri = parser.parse(uriTemplate).expand({});\n    return await this.fetchApi.fetch(`${baseUrl}${uri}`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"POST\",\n      body: JSON.stringify(request.body)\n    });\n  }\n  /**\n   * Get an entity's ancestry by entity ref.\n   * @param kind\n   * @param namespace\n   * @param name\n   */\n  async getEntityAncestryByName(request, options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(pluginId);\n    const uriTemplate = `/entities/by-name/{kind}/{namespace}/{name}/ancestry`;\n    const uri = parser.parse(uriTemplate).expand({\n      kind: request.path.kind,\n      namespace: request.path.namespace,\n      name: request.path.name\n    });\n    return await this.fetchApi.fetch(`${baseUrl}${uri}`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"GET\"\n    });\n  }\n  /**\n   * Get an entity by an entity ref.\n   * @param kind\n   * @param namespace\n   * @param name\n   */\n  async getEntityByName(request, options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(pluginId);\n    const uriTemplate = `/entities/by-name/{kind}/{namespace}/{name}`;\n    const uri = parser.parse(uriTemplate).expand({\n      kind: request.path.kind,\n      namespace: request.path.namespace,\n      name: request.path.name\n    });\n    return await this.fetchApi.fetch(`${baseUrl}${uri}`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"GET\"\n    });\n  }\n  /**\n   * Get a single entity by the UID.\n   * @param uid\n   */\n  async getEntityByUid(request, options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(pluginId);\n    const uriTemplate = `/entities/by-uid/{uid}`;\n    const uri = parser.parse(uriTemplate).expand({\n      uid: request.path.uid\n    });\n    return await this.fetchApi.fetch(`${baseUrl}${uri}`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"GET\"\n    });\n  }\n  /**\n   * Get all entity facets that match the given filters.\n   * @param facet\n   * @param filter Filter for just the entities defined by this filter.\n   */\n  async getEntityFacets(request, options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(pluginId);\n    const uriTemplate = `/entity-facets{?facet*,filter*}`;\n    const uri = parser.parse(uriTemplate).expand({\n      ...request.query\n    });\n    return await this.fetchApi.fetch(`${baseUrl}${uri}`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"GET\"\n    });\n  }\n  /**\n   * Get a location by id.\n   * @param id\n   */\n  async getLocation(request, options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(pluginId);\n    const uriTemplate = `/locations/{id}`;\n    const uri = parser.parse(uriTemplate).expand({\n      id: request.path.id\n    });\n    return await this.fetchApi.fetch(`${baseUrl}${uri}`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"GET\"\n    });\n  }\n  /**\n   * Get a location for entity.\n   * @param kind\n   * @param namespace\n   * @param name\n   */\n  async getLocationByEntity(request, options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(pluginId);\n    const uriTemplate = `/locations/by-entity/{kind}/{namespace}/{name}`;\n    const uri = parser.parse(uriTemplate).expand({\n      kind: request.path.kind,\n      namespace: request.path.namespace,\n      name: request.path.name\n    });\n    return await this.fetchApi.fetch(`${baseUrl}${uri}`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"GET\"\n    });\n  }\n  /**\n   * Get all locations\n   */\n  async getLocations(request, options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(pluginId);\n    const uriTemplate = `/locations`;\n    const uri = parser.parse(uriTemplate).expand({});\n    return await this.fetchApi.fetch(`${baseUrl}${uri}`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"GET\"\n    });\n  }\n  /**\n   * Refresh the entity related to entityRef.\n   * @param refreshEntityRequest\n   */\n  async refreshEntity(request, options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(pluginId);\n    const uriTemplate = `/refresh`;\n    const uri = parser.parse(uriTemplate).expand({});\n    return await this.fetchApi.fetch(`${baseUrl}${uri}`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"POST\",\n      body: JSON.stringify(request.body)\n    });\n  }\n  /**\n   * Validate that a passed in entity has no errors in schema.\n   * @param validateEntityRequest\n   */\n  async validateEntity(request, options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(pluginId);\n    const uriTemplate = `/validate-entity`;\n    const uri = parser.parse(uriTemplate).expand({});\n    return await this.fetchApi.fetch(`${baseUrl}${uri}`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"POST\",\n      body: JSON.stringify(request.body)\n    });\n  }\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass CatalogClient {\n  constructor(options) {\n    __publicField(this, \"apiClient\");\n    this.apiClient = new DefaultApiClient(options);\n  }\n  /**\n   * {@inheritdoc CatalogApi.getEntityAncestors}\n   */\n  async getEntityAncestors(request, options) {\n    return await this.requestRequired(\n      await this.apiClient.getEntityAncestryByName(\n        { path: parseEntityRef(request.entityRef) },\n        options\n      )\n    );\n  }\n  /**\n   * {@inheritdoc CatalogApi.getLocationById}\n   */\n  async getLocationById(id, options) {\n    return await this.requestOptional(\n      await this.apiClient.getLocation({ path: { id } }, options)\n    );\n  }\n  /**\n   * {@inheritdoc CatalogApi.getLocationByEntity}\n   */\n  async getLocationByEntity(entityRef, options) {\n    return await this.requestOptional(\n      await this.apiClient.getLocationByEntity(\n        { path: parseEntityRef(entityRef) },\n        options\n      )\n    );\n  }\n  /**\n   * {@inheritdoc CatalogApi.getEntities}\n   */\n  async getEntities(request, options) {\n    const {\n      filter = [],\n      fields = [],\n      order,\n      offset,\n      limit,\n      after\n    } = request != null ? request : {};\n    const encodedOrder = [];\n    if (order) {\n      for (const directive of [order].flat()) {\n        if (directive) {\n          encodedOrder.push(`${directive.order}:${directive.field}`);\n        }\n      }\n    }\n    const entities = await this.requestRequired(\n      await this.apiClient.getEntities(\n        {\n          query: {\n            fields,\n            limit,\n            filter: this.getFilterValue(filter),\n            offset,\n            after,\n            order: order ? encodedOrder : void 0\n          }\n        },\n        options\n      )\n    );\n    const refCompare = (a, b) => {\n      var _a, _b;\n      if (((_a = a.metadata) == null ? void 0 : _a.name) === void 0 || a.kind === void 0 || ((_b = b.metadata) == null ? void 0 : _b.name) === void 0 || b.kind === void 0) {\n        return 0;\n      }\n      const aRef = stringifyEntityRef(a);\n      const bRef = stringifyEntityRef(b);\n      if (aRef < bRef) {\n        return -1;\n      }\n      if (aRef > bRef) {\n        return 1;\n      }\n      return 0;\n    };\n    return { items: entities.sort(refCompare) };\n  }\n  /**\n   * {@inheritdoc CatalogApi.getEntitiesByRefs}\n   */\n  async getEntitiesByRefs(request, options) {\n    const response = await this.apiClient.getEntitiesByRefs(\n      {\n        body: request\n      },\n      options\n    );\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const { items } = await response.json();\n    return { items: items.map((i) => i != null ? i : void 0) };\n  }\n  /**\n   * {@inheritdoc CatalogApi.queryEntities}\n   */\n  async queryEntities(request = {}, options) {\n    var _a, _b;\n    const params = {};\n    if (isQueryEntitiesInitialRequest(request)) {\n      const {\n        fields = [],\n        filter,\n        limit,\n        orderFields,\n        fullTextFilter\n      } = request;\n      params.filter = this.getFilterValue(filter);\n      if (limit !== void 0) {\n        params.limit = limit;\n      }\n      if (orderFields !== void 0) {\n        params.orderField = (Array.isArray(orderFields) ? orderFields : [orderFields]).map(({ field, order }) => `${field},${order}`);\n      }\n      if (fields.length) {\n        params.fields = fields;\n      }\n      const normalizedFullTextFilterTerm = (_a = fullTextFilter == null ? void 0 : fullTextFilter.term) == null ? void 0 : _a.trim();\n      if (normalizedFullTextFilterTerm) {\n        params.fullTextFilterTerm = normalizedFullTextFilterTerm;\n      }\n      if ((_b = fullTextFilter == null ? void 0 : fullTextFilter.fields) == null ? void 0 : _b.length) {\n        params.fullTextFilterFields = fullTextFilter.fields;\n      }\n    } else {\n      const { fields = [], limit, cursor } = request;\n      params.cursor = cursor;\n      if (limit !== void 0) {\n        params.limit = limit;\n      }\n      if (fields.length) {\n        params.fields = fields;\n      }\n    }\n    return this.apiClient.getEntitiesByQuery({ query: params }, options).then((r) => r.json());\n  }\n  /**\n   * {@inheritdoc CatalogApi.getEntityByRef}\n   */\n  async getEntityByRef(entityRef, options) {\n    return this.requestOptional(\n      await this.apiClient.getEntityByName(\n        {\n          path: parseEntityRef(entityRef)\n        },\n        options\n      )\n    );\n  }\n  // NOTE(freben): When we deprecate getEntityByName from the interface, we may\n  // still want to leave this implementation in place for quite some time\n  // longer, to minimize the risk for breakages. Suggested date for removal:\n  // August 2022\n  /**\n   * @deprecated Use getEntityByRef instead\n   */\n  async getEntityByName(compoundName, options) {\n    const { kind, namespace = \"default\", name } = compoundName;\n    return this.requestOptional(\n      await this.apiClient.getEntityByName(\n        { path: { kind, namespace, name } },\n        options\n      )\n    );\n  }\n  /**\n   * {@inheritdoc CatalogApi.refreshEntity}\n   */\n  async refreshEntity(entityRef, options) {\n    const response = await this.apiClient.refreshEntity(\n      { body: { entityRef } },\n      options\n    );\n    if (response.status !== 200) {\n      throw new Error(await response.text());\n    }\n  }\n  /**\n   * {@inheritdoc CatalogApi.getEntityFacets}\n   */\n  async getEntityFacets(request, options) {\n    const { filter = [], facets } = request;\n    return await this.requestOptional(\n      await this.apiClient.getEntityFacets(\n        {\n          query: { facet: facets, filter: this.getFilterValue(filter) }\n        },\n        options\n      )\n    );\n  }\n  /**\n   * {@inheritdoc CatalogApi.addLocation}\n   */\n  async addLocation(request, options) {\n    const { type = \"url\", target, dryRun } = request;\n    const response = await this.apiClient.createLocation(\n      {\n        body: { type, target },\n        query: { dryRun: dryRun ? \"true\" : void 0 }\n      },\n      options\n    );\n    if (response.status !== 201) {\n      throw new Error(await response.text());\n    }\n    const { location, entities, exists } = await response.json();\n    if (!location) {\n      throw new Error(`Location wasn't added: ${target}`);\n    }\n    return {\n      location,\n      entities,\n      exists\n    };\n  }\n  /**\n   * {@inheritdoc CatalogApi.getLocationByRef}\n   */\n  async getLocationByRef(locationRef, options) {\n    const all = await this.requestRequired(\n      await this.apiClient.getLocations({}, options)\n    );\n    return all.map((r) => r.data).find((l) => locationRef === stringifyLocationRef(l));\n  }\n  /**\n   * {@inheritdoc CatalogApi.removeLocationById}\n   */\n  async removeLocationById(id, options) {\n    await this.requestIgnored(\n      await this.apiClient.deleteLocation({ path: { id } }, options)\n    );\n  }\n  /**\n   * {@inheritdoc CatalogApi.removeEntityByUid}\n   */\n  async removeEntityByUid(uid, options) {\n    await this.requestIgnored(\n      await this.apiClient.deleteEntityByUid({ path: { uid } }, options)\n    );\n  }\n  /**\n   * {@inheritdoc CatalogApi.validateEntity}\n   */\n  async validateEntity(entity, locationRef, options) {\n    const response = await this.apiClient.validateEntity(\n      { body: { entity, location: locationRef } },\n      options\n    );\n    if (response.ok) {\n      return {\n        valid: true\n      };\n    }\n    if (response.status !== 400) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const { errors = [] } = await response.json();\n    return {\n      valid: false,\n      errors\n    };\n  }\n  //\n  // Private methods\n  //\n  async requestIgnored(response) {\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n  }\n  async requestRequired(response) {\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return response.json();\n  }\n  async requestOptional(response) {\n    if (!response.ok) {\n      if (response.status === 404) {\n        return void 0;\n      }\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n  getFilterValue(filter = []) {\n    const filters = [];\n    for (const filterItem of [filter].flat()) {\n      const filterParts = [];\n      for (const [key, value] of Object.entries(filterItem)) {\n        for (const v of [value].flat()) {\n          if (v === CATALOG_FILTER_EXISTS) {\n            filterParts.push(key);\n          } else if (typeof v === \"string\") {\n            filterParts.push(`${key}=${v}`);\n          }\n        }\n      }\n      if (filterParts.length) {\n        filters.push(filterParts.join(\",\"));\n      }\n    }\n    return filters;\n  }\n}\n\nconst ENTITY_STATUS_CATALOG_PROCESSING_TYPE = \"backstage.io/catalog-processing\";\n\nexport { CATALOG_FILTER_EXISTS, CatalogClient, ENTITY_STATUS_CATALOG_PROCESSING_TYPE };\n//# sourceMappingURL=index.esm.js.map\n","import lodash from 'lodash';\nimport Ajv from 'ajv';\n\nfunction isApiEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"API\";\n}\nfunction isComponentEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"COMPONENT\";\n}\nfunction isDomainEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"DOMAIN\";\n}\nfunction isGroupEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"GROUP\";\n}\nfunction isLocationEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"LOCATION\";\n}\nfunction isResourceEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"RESOURCE\";\n}\nfunction isSystemEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"SYSTEM\";\n}\nfunction isUserEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"USER\";\n}\n\nconst DEFAULT_NAMESPACE = \"default\";\nconst ANNOTATION_VIEW_URL = \"backstage.io/view-url\";\nconst ANNOTATION_EDIT_URL = \"backstage.io/edit-url\";\nconst ANNOTATION_KUBERNETES_API_SERVER = \"kubernetes.io/api-server\";\nconst ANNOTATION_KUBERNETES_API_SERVER_CA = \"kubernetes.io/api-server-certificate-authority\";\nconst ANNOTATION_KUBERNETES_AUTH_PROVIDER = \"kubernetes.io/auth-provider\";\n\nvar __defProp$4 = Object.defineProperty;\nvar __defNormalProp$4 = (obj, key, value) => key in obj ? __defProp$4(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$4 = (obj, key, value) => {\n  __defNormalProp$4(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass DefaultNamespaceEntityPolicy {\n  constructor(namespace = DEFAULT_NAMESPACE) {\n    __publicField$4(this, \"namespace\");\n    this.namespace = namespace;\n  }\n  async enforce(entity) {\n    if (entity.metadata.namespace) {\n      return entity;\n    }\n    return lodash.merge({ metadata: { namespace: this.namespace } }, entity);\n  }\n}\n\nfunction parseRefString(ref) {\n  let colonI = ref.indexOf(\":\");\n  const slashI = ref.indexOf(\"/\");\n  if (slashI !== -1 && slashI < colonI) {\n    colonI = -1;\n  }\n  const kind = colonI === -1 ? void 0 : ref.slice(0, colonI);\n  const namespace = slashI === -1 ? void 0 : ref.slice(colonI + 1, slashI);\n  const name = ref.slice(Math.max(colonI + 1, slashI + 1));\n  if (kind === \"\" || namespace === \"\" || name === \"\") {\n    throw new TypeError(\n      `Entity reference \"${ref}\" was not on the form [<kind>:][<namespace>/]<name>`\n    );\n  }\n  return { kind, namespace, name };\n}\nfunction getCompoundEntityRef(entity) {\n  return {\n    kind: entity.kind,\n    namespace: entity.metadata.namespace || DEFAULT_NAMESPACE,\n    name: entity.metadata.name\n  };\n}\nfunction parseEntityRef(ref, context) {\n  var _a, _b, _c, _d;\n  if (!ref) {\n    throw new Error(`Entity reference must not be empty`);\n  }\n  const defaultKind = context == null ? void 0 : context.defaultKind;\n  const defaultNamespace = (context == null ? void 0 : context.defaultNamespace) || DEFAULT_NAMESPACE;\n  let kind;\n  let namespace;\n  let name;\n  if (typeof ref === \"string\") {\n    const parsed = parseRefString(ref);\n    kind = (_a = parsed.kind) != null ? _a : defaultKind;\n    namespace = (_b = parsed.namespace) != null ? _b : defaultNamespace;\n    name = parsed.name;\n  } else {\n    kind = (_c = ref.kind) != null ? _c : defaultKind;\n    namespace = (_d = ref.namespace) != null ? _d : defaultNamespace;\n    name = ref.name;\n  }\n  if (!kind) {\n    const textual = JSON.stringify(ref);\n    throw new Error(\n      `Entity reference ${textual} had missing or empty kind (e.g. did not start with \"component:\" or similar)`\n    );\n  } else if (!namespace) {\n    const textual = JSON.stringify(ref);\n    throw new Error(\n      `Entity reference ${textual} had missing or empty namespace`\n    );\n  } else if (!name) {\n    const textual = JSON.stringify(ref);\n    throw new Error(`Entity reference ${textual} had missing or empty name`);\n  }\n  return { kind, namespace, name };\n}\nfunction stringifyEntityRef(ref) {\n  var _a, _b;\n  let kind;\n  let namespace;\n  let name;\n  if (\"metadata\" in ref) {\n    kind = ref.kind;\n    namespace = (_a = ref.metadata.namespace) != null ? _a : DEFAULT_NAMESPACE;\n    name = ref.metadata.name;\n  } else {\n    kind = ref.kind;\n    namespace = (_b = ref.namespace) != null ? _b : DEFAULT_NAMESPACE;\n    name = ref.name;\n  }\n  return `${kind.toLocaleLowerCase(\"en-US\")}:${namespace.toLocaleLowerCase(\n    \"en-US\"\n  )}/${name.toLocaleLowerCase(\"en-US\")}`;\n}\n\nvar __defProp$3 = Object.defineProperty;\nvar __defNormalProp$3 = (obj, key, value) => key in obj ? __defProp$3(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$3 = (obj, key, value) => {\n  __defNormalProp$3(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass GroupDefaultParentEntityPolicy {\n  constructor(parentEntityRef) {\n    __publicField$3(this, \"parentRef\");\n    const { kind, namespace, name } = parseEntityRef(parentEntityRef, {\n      defaultKind: \"Group\",\n      defaultNamespace: DEFAULT_NAMESPACE\n    });\n    if (kind.toLocaleUpperCase(\"en-US\") !== \"GROUP\") {\n      throw new TypeError(\"group parent must be a group\");\n    }\n    this.parentRef = stringifyEntityRef({\n      kind,\n      namespace,\n      name\n    });\n  }\n  async enforce(entity) {\n    if (entity.kind !== \"Group\") {\n      return entity;\n    }\n    const group = entity;\n    if (group.spec.parent) {\n      return group;\n    }\n    if (stringifyEntityRef(group) !== this.parentRef) {\n      group.spec.parent = this.parentRef;\n    }\n    return group;\n  }\n}\n\nclass CommonValidatorFunctions {\n  /**\n   * Checks that the value is on the form `<suffix>` or `<prefix><separator><suffix>`, and validates\n   * those parts separately.\n   *\n   * @param value - The value to check\n   * @param separator - The separator between parts\n   * @param isValidPrefix - Checks that the part before the separator is valid, if present\n   * @param isValidSuffix - Checks that the part after the separator (or the entire value if there is no separator) is valid\n   */\n  static isValidPrefixAndOrSuffix(value, separator, isValidPrefix, isValidSuffix) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    const parts = value.split(separator);\n    if (parts.length === 1) {\n      return isValidSuffix(parts[0]);\n    } else if (parts.length === 2) {\n      return isValidPrefix(parts[0]) && isValidSuffix(parts[1]);\n    }\n    return false;\n  }\n  /**\n   * Checks that the value can be safely transferred as JSON.\n   *\n   * @param value - The value to check\n   */\n  static isJsonSafe(value) {\n    try {\n      return lodash.isEqual(value, JSON.parse(JSON.stringify(value)));\n    } catch {\n      return false;\n    }\n  }\n  /**\n   * Checks that the value is a valid DNS subdomain name.\n   *\n   * @param value - The value to check\n   * @see https://tools.ietf.org/html/rfc1123\n   */\n  static isValidDnsSubdomain(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 253 && value.split(\".\").every(CommonValidatorFunctions.isValidDnsLabel);\n  }\n  /**\n   * Checks that the value is a valid DNS label.\n   *\n   * @param value - The value to check\n   * @see https://tools.ietf.org/html/rfc1123\n   */\n  static isValidDnsLabel(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-z0-9]+(?:\\-+[a-z0-9]+)*$/.test(value);\n  }\n  /**\n   * Checks that the value is a valid tag.\n   *\n   * @deprecated This will be removed in a future release\n   * @param value - The value to check\n   */\n  static isValidTag(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-z0-9+#]+(\\-[a-z0-9+#]+)*$/.test(value);\n  }\n  /**\n   * Checks that the value is a valid string URL.\n   *\n   * @param value - The value to check\n   */\n  static isValidUrl(value) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    try {\n      new URL(value);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n  /**\n   * Checks that the value is a non empty string value.\n   *\n   * @deprecated use isNonEmptyString instead\n   * @param value - The value to check\n   */\n  static isValidString(value) {\n    var _a;\n    return typeof value === \"string\" && ((_a = value == null ? void 0 : value.trim()) == null ? void 0 : _a.length) >= 1;\n  }\n  /**\n   * Checks that the value is a string value that's not empty.\n   *\n   * @param value - The value to check\n   */\n  static isNonEmptyString(value) {\n    var _a;\n    return typeof value === \"string\" && ((_a = value == null ? void 0 : value.trim()) == null ? void 0 : _a.length) >= 1;\n  }\n}\n\nvar $schema$b = \"http://json-schema.org/draft-07/schema\";\nvar $id$b = \"EntityEnvelope\";\nvar description$b = \"The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.\";\nvar examples$a = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Component\",\n\t\tmetadata: {\n\t\t\tname: \"LoremService\"\n\t\t}\n\t}\n];\nvar type$3 = \"object\";\nvar required$2 = [\n\t\"apiVersion\",\n\t\"kind\",\n\t\"metadata\"\n];\nvar additionalProperties$2 = true;\nvar properties$2 = {\n\tapiVersion: {\n\t\ttype: \"string\",\n\t\tdescription: \"The version of specification format for this particular entity that this is written against.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\"my-company.net/v1\",\n\t\t\t\"1.0\"\n\t\t]\n\t},\n\tkind: {\n\t\ttype: \"string\",\n\t\tdescription: \"The high level entity type being described.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"API\",\n\t\t\t\"Component\",\n\t\t\t\"Domain\",\n\t\t\t\"Group\",\n\t\t\t\"Location\",\n\t\t\t\"Resource\",\n\t\t\t\"System\",\n\t\t\t\"Template\",\n\t\t\t\"User\"\n\t\t]\n\t},\n\tmetadata: {\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"name\"\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\tname: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.\",\n\t\t\t\texamples: [\n\t\t\t\t\t\"metadata-proxy\"\n\t\t\t\t],\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tnamespace: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The namespace that the entity belongs to.\",\n\t\t\t\t\"default\": \"default\",\n\t\t\t\texamples: [\n\t\t\t\t\t\"default\",\n\t\t\t\t\t\"admin\"\n\t\t\t\t],\n\t\t\t\tminLength: 1\n\t\t\t}\n\t\t}\n\t}\n};\nvar entityEnvelopeSchema = {\n\t$schema: $schema$b,\n\t$id: $id$b,\n\tdescription: description$b,\n\texamples: examples$a,\n\ttype: type$3,\n\trequired: required$2,\n\tadditionalProperties: additionalProperties$2,\n\tproperties: properties$2\n};\n\nvar $schema$a = \"http://json-schema.org/draft-07/schema\";\nvar $id$a = \"Entity\";\nvar description$a = \"The parts of the format that's common to all versions/kinds of entity.\";\nvar examples$9 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Component\",\n\t\tmetadata: {\n\t\t\tname: \"LoremService\",\n\t\t\tdescription: \"Creates Lorems like a pro.\",\n\t\t\tlabels: {\n\t\t\t\tproduct_name: \"Random value Generator\"\n\t\t\t},\n\t\t\tannotations: {\n\t\t\t\tdocs: \"https://github.com/..../tree/develop/doc\"\n\t\t\t}\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"service\",\n\t\t\tlifecycle: \"production\",\n\t\t\towner: \"tools\"\n\t\t}\n\t}\n];\nvar type$2 = \"object\";\nvar required$1 = [\n\t\"apiVersion\",\n\t\"kind\",\n\t\"metadata\"\n];\nvar additionalProperties$1 = false;\nvar properties$1 = {\n\tapiVersion: {\n\t\ttype: \"string\",\n\t\tdescription: \"The version of specification format for this particular entity that this is written against.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\"my-company.net/v1\",\n\t\t\t\"1.0\"\n\t\t]\n\t},\n\tkind: {\n\t\ttype: \"string\",\n\t\tdescription: \"The high level entity type being described.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"API\",\n\t\t\t\"Component\",\n\t\t\t\"Domain\",\n\t\t\t\"Group\",\n\t\t\t\"Location\",\n\t\t\t\"Resource\",\n\t\t\t\"System\",\n\t\t\t\"Template\",\n\t\t\t\"User\"\n\t\t]\n\t},\n\tmetadata: {\n\t\t$ref: \"EntityMeta\"\n\t},\n\tspec: {\n\t\ttype: \"object\",\n\t\tdescription: \"The specification data describing the entity itself.\"\n\t},\n\trelations: {\n\t\ttype: \"array\",\n\t\tdescription: \"The relations that this entity has with other entities.\",\n\t\titems: {\n\t\t\t$ref: \"common#relation\"\n\t\t}\n\t},\n\tstatus: {\n\t\t$ref: \"common#status\"\n\t}\n};\nvar entitySchema = {\n\t$schema: $schema$a,\n\t$id: $id$a,\n\tdescription: description$a,\n\texamples: examples$9,\n\ttype: type$2,\n\trequired: required$1,\n\tadditionalProperties: additionalProperties$1,\n\tproperties: properties$1\n};\n\nvar $schema$9 = \"http://json-schema.org/draft-07/schema\";\nvar $id$9 = \"EntityMeta\";\nvar description$9 = \"Metadata fields common to all versions/kinds of entity.\";\nvar examples$8 = [\n\t{\n\t\tuid: \"e01199ab-08cc-44c2-8e19-5c29ded82521\",\n\t\tetag: \"lsndfkjsndfkjnsdfkjnsd==\",\n\t\tname: \"my-component-yay\",\n\t\tnamespace: \"the-namespace\",\n\t\tlabels: {\n\t\t\t\"backstage.io/custom\": \"ValueStuff\"\n\t\t},\n\t\tannotations: {\n\t\t\t\"example.com/bindings\": \"are-secret\"\n\t\t},\n\t\ttags: [\n\t\t\t\"java\",\n\t\t\t\"data\"\n\t\t]\n\t}\n];\nvar type$1 = \"object\";\nvar required = [\n\t\"name\"\n];\nvar additionalProperties = true;\nvar properties = {\n\tuid: {\n\t\ttype: \"string\",\n\t\tdescription: \"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.\",\n\t\texamples: [\n\t\t\t\"e01199ab-08cc-44c2-8e19-5c29ded82521\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tetag: {\n\t\ttype: \"string\",\n\t\tdescription: \"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.\",\n\t\texamples: [\n\t\t\t\"lsndfkjsndfkjnsdfkjnsd==\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tname: {\n\t\ttype: \"string\",\n\t\tdescription: \"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.\",\n\t\texamples: [\n\t\t\t\"metadata-proxy\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tnamespace: {\n\t\ttype: \"string\",\n\t\tdescription: \"The namespace that the entity belongs to.\",\n\t\t\"default\": \"default\",\n\t\texamples: [\n\t\t\t\"default\",\n\t\t\t\"admin\"\n\t\t],\n\t\tminLength: 1\n\t},\n\ttitle: {\n\t\ttype: \"string\",\n\t\tdescription: \"A display name of the entity, to be presented in user interfaces instead of the name property, when available.\",\n\t\texamples: [\n\t\t\t\"React SSR Template\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tdescription: {\n\t\ttype: \"string\",\n\t\tdescription: \"A short (typically relatively few words, on one line) description of the entity.\"\n\t},\n\tlabels: {\n\t\ttype: \"object\",\n\t\tdescription: \"Key/value pairs of identifying information attached to the entity.\",\n\t\tadditionalProperties: true,\n\t\tpatternProperties: {\n\t\t\t\"^.+$\": {\n\t\t\t\ttype: \"string\"\n\t\t\t}\n\t\t}\n\t},\n\tannotations: {\n\t\ttype: \"object\",\n\t\tdescription: \"Key/value pairs of non-identifying auxiliary information attached to the entity.\",\n\t\tadditionalProperties: true,\n\t\tpatternProperties: {\n\t\t\t\"^.+$\": {\n\t\t\t\ttype: \"string\"\n\t\t\t}\n\t\t}\n\t},\n\ttags: {\n\t\ttype: \"array\",\n\t\tdescription: \"A list of single-valued strings, to for example classify catalog entities in various ways.\",\n\t\titems: {\n\t\t\ttype: \"string\",\n\t\t\tminLength: 1\n\t\t}\n\t},\n\tlinks: {\n\t\ttype: \"array\",\n\t\tdescription: \"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.\",\n\t\titems: {\n\t\t\ttype: \"object\",\n\t\t\trequired: [\n\t\t\t\t\"url\"\n\t\t\t],\n\t\t\tproperties: {\n\t\t\t\turl: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"A url in a standard uri format.\",\n\t\t\t\t\texamples: [\n\t\t\t\t\t\t\"https://admin.example-org.com\"\n\t\t\t\t\t],\n\t\t\t\t\tminLength: 1\n\t\t\t\t},\n\t\t\t\ttitle: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"A user friendly display name for the link.\",\n\t\t\t\t\texamples: [\n\t\t\t\t\t\t\"Admin Dashboard\"\n\t\t\t\t\t],\n\t\t\t\t\tminLength: 1\n\t\t\t\t},\n\t\t\t\ticon: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"A key representing a visual icon to be displayed in the UI.\",\n\t\t\t\t\texamples: [\n\t\t\t\t\t\t\"dashboard\"\n\t\t\t\t\t],\n\t\t\t\t\tminLength: 1\n\t\t\t\t},\n\t\t\t\ttype: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"An optional value to categorize links into specific groups.\",\n\t\t\t\t\texamples: [\n\t\t\t\t\t\t\"runbook\",\n\t\t\t\t\t\t\"documentation\",\n\t\t\t\t\t\t\"logs\",\n\t\t\t\t\t\t\"dashboard\"\n\t\t\t\t\t],\n\t\t\t\t\tminLength: 1\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\nvar entityMetaSchema = {\n\t$schema: $schema$9,\n\t$id: $id$9,\n\tdescription: description$9,\n\texamples: examples$8,\n\ttype: type$1,\n\trequired: required,\n\tadditionalProperties: additionalProperties,\n\tproperties: properties\n};\n\nvar $schema$8 = \"http://json-schema.org/draft-07/schema\";\nvar $id$8 = \"common\";\nvar type = \"object\";\nvar description$8 = \"Common definitions to import from other schemas\";\nvar definitions = {\n\treference: {\n\t\t$id: \"#reference\",\n\t\ttype: \"object\",\n\t\tdescription: \"A reference by name to another entity.\",\n\t\trequired: [\n\t\t\t\"kind\",\n\t\t\t\"namespace\",\n\t\t\t\"name\"\n\t\t],\n\t\tadditionalProperties: false,\n\t\tproperties: {\n\t\t\tkind: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The kind field of the entity.\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tnamespace: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The metadata.namespace field of the entity.\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tname: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The metadata.name field of the entity.\",\n\t\t\t\tminLength: 1\n\t\t\t}\n\t\t}\n\t},\n\trelation: {\n\t\t$id: \"#relation\",\n\t\ttype: \"object\",\n\t\tdescription: \"A directed relation from one entity to another.\",\n\t\trequired: [\n\t\t\t\"type\",\n\t\t\t\"targetRef\"\n\t\t],\n\t\tadditionalProperties: false,\n\t\tproperties: {\n\t\t\ttype: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tminLength: 1,\n\t\t\t\tpattern: \"^\\\\w+$\",\n\t\t\t\tdescription: \"The type of relation.\"\n\t\t\t},\n\t\t\ttarget: {\n\t\t\t\t$ref: \"#reference\",\n\t\t\t\tdeprecated: true\n\t\t\t},\n\t\t\ttargetRef: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tminLength: 1,\n\t\t\t\tdescription: \"The entity ref of the target of this relation.\"\n\t\t\t}\n\t\t}\n\t},\n\tstatus: {\n\t\t$id: \"#status\",\n\t\ttype: \"object\",\n\t\tdescription: \"The current status of the entity, as claimed by various sources.\",\n\t\trequired: [\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\titems: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: {\n\t\t\t\t\t$ref: \"#statusItem\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tstatusItem: {\n\t\t$id: \"#statusItem\",\n\t\ttype: \"object\",\n\t\tdescription: \"A specific status item on a well known format.\",\n\t\trequired: [\n\t\t\t\"type\",\n\t\t\t\"level\",\n\t\t\t\"message\"\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\ttype: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tlevel: {\n\t\t\t\t$ref: \"#statusLevel\",\n\t\t\t\tdescription: \"The status level / severity of the status item.\"\n\t\t\t},\n\t\t\tmessage: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"A brief message describing the status, intended for human consumption.\"\n\t\t\t},\n\t\t\terror: {\n\t\t\t\t$ref: \"#error\",\n\t\t\t\tdescription: \"An optional serialized error object related to the status.\"\n\t\t\t}\n\t\t}\n\t},\n\tstatusLevel: {\n\t\t$id: \"#statusLevel\",\n\t\ttype: \"string\",\n\t\tdescription: \"A status level / severity.\",\n\t\t\"enum\": [\n\t\t\t\"info\",\n\t\t\t\"warning\",\n\t\t\t\"error\"\n\t\t]\n\t},\n\terror: {\n\t\t$id: \"#error\",\n\t\ttype: \"object\",\n\t\tdescription: \"A serialized error object.\",\n\t\trequired: [\n\t\t\t\"name\",\n\t\t\t\"message\"\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\tname: {\n\t\t\t\ttype: \"string\",\n\t\t\t\texamples: [\n\t\t\t\t\t\"Error\",\n\t\t\t\t\t\"InputError\"\n\t\t\t\t],\n\t\t\t\tdescription: \"The type name of the error\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tmessage: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The message of the error\"\n\t\t\t},\n\t\t\tcode: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"An error code associated with the error\"\n\t\t\t},\n\t\t\tstack: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"An error stack trace\"\n\t\t\t}\n\t\t}\n\t}\n};\nvar commonSchema = {\n\t$schema: $schema$8,\n\t$id: $id$8,\n\ttype: type,\n\tdescription: description$8,\n\tdefinitions: definitions\n};\n\nconst compiledSchemaCache = /* @__PURE__ */ new Map();\nconst refDependencyCandidates = [\n  entityEnvelopeSchema,\n  entitySchema,\n  entityMetaSchema,\n  commonSchema\n];\nfunction throwAjvError(errors) {\n  if (!(errors == null ? void 0 : errors.length)) {\n    throw new TypeError(\"Unknown error\");\n  }\n  const error = errors[0];\n  throw new TypeError(\n    `${error.instancePath || \"<root>\"} ${error.message}${error.params ? ` - ${Object.entries(error.params).map(([key, val]) => `${key}: ${val}`).join(\", \")}` : \"\"}`\n  );\n}\nfunction compileAjvSchema(schema, options = {}) {\n  var _a;\n  const disableCache = (_a = options == null ? void 0 : options.disableCache) != null ? _a : false;\n  const cacheKey = disableCache ? \"\" : JSON.stringify(schema);\n  if (!disableCache) {\n    const cached = compiledSchemaCache.get(cacheKey);\n    if (cached) {\n      return cached;\n    }\n  }\n  const extraSchemas = getExtraSchemas(schema);\n  const ajv = new Ajv({\n    allowUnionTypes: true,\n    allErrors: true,\n    validateSchema: true\n  });\n  if (extraSchemas.length) {\n    ajv.addSchema(extraSchemas, void 0, void 0, true);\n  }\n  const compiled = ajv.compile(schema);\n  if (!disableCache) {\n    compiledSchemaCache.set(cacheKey, compiled);\n  }\n  return compiled;\n}\nfunction getExtraSchemas(schema) {\n  if (typeof schema !== \"object\") {\n    return [];\n  }\n  const seen = /* @__PURE__ */ new Set();\n  if (schema.$id) {\n    seen.add(schema.$id);\n  }\n  const selected = new Array();\n  const todo = [schema];\n  while (todo.length) {\n    const current = todo.pop();\n    for (const ref of getAllRefs(current)) {\n      if (!seen.has(ref)) {\n        seen.add(ref);\n        const match = refDependencyCandidates.find((c) => c.$id === ref);\n        if (match) {\n          selected.push(match);\n          todo.push(match);\n        }\n      }\n    }\n  }\n  return selected;\n}\nfunction* getAllRefs(schema) {\n  const todo = [schema];\n  while (todo.length) {\n    const current = todo.pop();\n    if (typeof current === \"object\" && current) {\n      for (const [key, value] of Object.entries(current)) {\n        if (key === \"$ref\" && typeof value === \"string\") {\n          yield value.split(\"#\")[0];\n        } else {\n          todo.push(value);\n        }\n      }\n    }\n  }\n}\n\nfunction entityEnvelopeSchemaValidator(schema) {\n  const validate = compileAjvSchema(\n    schema ? schema : entityEnvelopeSchema\n  );\n  return (data) => {\n    const result = validate(data);\n    if (result === true) {\n      return data;\n    }\n    throw throwAjvError(validate.errors);\n  };\n}\n\nfunction entityKindSchemaValidator(schema) {\n  const validate = compileAjvSchema(schema);\n  return (data) => {\n    var _a;\n    const result = validate(data);\n    if (result === true) {\n      return data;\n    }\n    const softCandidates = (_a = validate.errors) == null ? void 0 : _a.filter(\n      (e) => [\"/kind\", \"/apiVersion\"].includes(e.instancePath)\n    );\n    if ((softCandidates == null ? void 0 : softCandidates.length) && softCandidates.every((e) => e.keyword === \"enum\")) {\n      return false;\n    }\n    throw throwAjvError(validate.errors);\n  };\n}\n\nfunction entitySchemaValidator(schema) {\n  const validate = compileAjvSchema(schema ? schema : entitySchema);\n  return (data) => {\n    const result = validate(data);\n    if (result === true) {\n      return data;\n    }\n    throw throwAjvError(validate.errors);\n  };\n}\n\nclass KubernetesValidatorFunctions {\n  static isValidApiVersion(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      \"/\",\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      (n) => n.length >= 1 && n.length <= 63 && /^[a-z0-9A-Z]+$/.test(n)\n    );\n  }\n  static isValidKind(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-zA-Z][a-z0-9A-Z]*$/.test(value);\n  }\n  static isValidObjectName(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(value);\n  }\n  static isValidNamespace(value) {\n    return CommonValidatorFunctions.isValidDnsLabel(value);\n  }\n  static isValidLabelKey(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      \"/\",\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      KubernetesValidatorFunctions.isValidObjectName\n    );\n  }\n  static isValidLabelValue(value) {\n    return value === \"\" || KubernetesValidatorFunctions.isValidObjectName(value);\n  }\n  static isValidAnnotationKey(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      \"/\",\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      KubernetesValidatorFunctions.isValidObjectName\n    );\n  }\n  static isValidAnnotationValue(value) {\n    return typeof value === \"string\";\n  }\n}\n\nconst defaultValidators = {\n  isValidApiVersion: KubernetesValidatorFunctions.isValidApiVersion,\n  isValidKind: KubernetesValidatorFunctions.isValidKind,\n  isValidEntityName: KubernetesValidatorFunctions.isValidObjectName,\n  isValidNamespace: KubernetesValidatorFunctions.isValidNamespace,\n  isValidLabelKey: KubernetesValidatorFunctions.isValidLabelKey,\n  isValidLabelValue: KubernetesValidatorFunctions.isValidLabelValue,\n  isValidAnnotationKey: KubernetesValidatorFunctions.isValidAnnotationKey,\n  isValidAnnotationValue: KubernetesValidatorFunctions.isValidAnnotationValue,\n  isValidTag: (value) => {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-z0-9:+#]+(\\-[a-z0-9:+#]+)*$/.test(value);\n  }\n};\nfunction makeValidator(overrides = {}) {\n  return {\n    ...defaultValidators,\n    ...overrides\n  };\n}\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass FieldFormatEntityPolicy {\n  constructor(validators = makeValidator()) {\n    __publicField$2(this, \"validators\");\n    this.validators = validators;\n  }\n  async enforce(entity) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    function require2(field, value, validator) {\n      if (value === void 0 || value === null) {\n        throw new Error(`${field} must have a value`);\n      }\n      let isValid;\n      try {\n        isValid = validator(value);\n      } catch (e) {\n        throw new Error(`${field} could not be validated, ${e}`);\n      }\n      if (!isValid) {\n        let expectation;\n        switch (validator.name) {\n          case \"isValidLabelValue\":\n          case \"isValidObjectName\":\n            expectation = \"a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total\";\n            break;\n          case \"isValidLabelKey\":\n          case \"isValidApiVersion\":\n          case \"isValidAnnotationKey\":\n            expectation = \"a valid prefix and/or suffix\";\n            break;\n          case \"isValidNamespace\":\n          case \"isValidDnsLabel\":\n            expectation = \"a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total\";\n            break;\n          case \"isValidTag\":\n            expectation = \"a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total\";\n            break;\n          case \"isValidAnnotationValue\":\n            expectation = \"a string\";\n            break;\n          case \"isValidKind\":\n            expectation = \"a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total\";\n            break;\n          case \"isValidUrl\":\n            expectation = \"a string that is a valid url\";\n            break;\n          case \"isValidString\":\n          case \"isNonEmptyString\":\n            expectation = \"a non empty string\";\n            break;\n          default:\n            expectation = void 0;\n            break;\n        }\n        const message = expectation ? ` expected ${expectation} but found \"${value}\".` : \"\";\n        throw new Error(\n          `\"${field}\" is not valid;${message} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`\n        );\n      }\n    }\n    function optional(field, value, validator) {\n      return value === void 0 || require2(field, value, validator);\n    }\n    require2(\"apiVersion\", entity.apiVersion, this.validators.isValidApiVersion);\n    require2(\"kind\", entity.kind, this.validators.isValidKind);\n    require2(\"metadata.name\", entity.metadata.name, this.validators.isValidEntityName);\n    optional(\n      \"metadata.namespace\",\n      entity.metadata.namespace,\n      this.validators.isValidNamespace\n    );\n    for (const [k, v] of Object.entries((_a = entity.metadata.labels) != null ? _a : [])) {\n      require2(`labels.${k}`, k, this.validators.isValidLabelKey);\n      require2(`labels.${k}`, v, this.validators.isValidLabelValue);\n    }\n    for (const [k, v] of Object.entries((_b = entity.metadata.annotations) != null ? _b : [])) {\n      require2(`annotations.${k}`, k, this.validators.isValidAnnotationKey);\n      require2(`annotations.${k}`, v, this.validators.isValidAnnotationValue);\n    }\n    const tags = (_c = entity.metadata.tags) != null ? _c : [];\n    for (let i = 0; i < tags.length; ++i) {\n      require2(`tags.${i}`, tags[i], this.validators.isValidTag);\n    }\n    const links = (_d = entity.metadata.links) != null ? _d : [];\n    for (let i = 0; i < links.length; ++i) {\n      require2(`links.${i}.url`, (_e = links[i]) == null ? void 0 : _e.url, CommonValidatorFunctions.isValidUrl);\n      optional(\n        `links.${i}.title`,\n        (_f = links[i]) == null ? void 0 : _f.title,\n        CommonValidatorFunctions.isNonEmptyString\n      );\n      optional(\n        `links.${i}.icon`,\n        (_g = links[i]) == null ? void 0 : _g.icon,\n        KubernetesValidatorFunctions.isValidObjectName\n      );\n    }\n    return entity;\n  }\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst defaultKnownFields = [\"apiVersion\", \"kind\", \"metadata\", \"spec\"];\nclass NoForeignRootFieldsEntityPolicy {\n  constructor(knownFields = defaultKnownFields) {\n    __publicField$1(this, \"knownFields\");\n    this.knownFields = knownFields;\n  }\n  async enforce(entity) {\n    for (const field of Object.keys(entity)) {\n      if (!this.knownFields.includes(field)) {\n        throw new Error(`Unknown field ${field}`);\n      }\n    }\n    return entity;\n  }\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass SchemaValidEntityPolicy {\n  constructor() {\n    __publicField(this, \"validate\");\n  }\n  async enforce(entity) {\n    if (!this.validate) {\n      const ajv = new Ajv({ allowUnionTypes: true });\n      this.validate = ajv.addSchema([commonSchema, entityMetaSchema], void 0, void 0, true).compile(entitySchema);\n    }\n    const result = this.validate(entity);\n    if (result === true) {\n      return entity;\n    }\n    const [error] = this.validate.errors || [];\n    if (!error) {\n      throw new Error(`Malformed envelope, Unknown error`);\n    }\n    throw new Error(\n      `Malformed envelope, ${error.instancePath || \"<root>\"} ${error.message}`\n    );\n  }\n}\n\nclass AllEntityPolicies {\n  constructor(policies) {\n    this.policies = policies;\n  }\n  async enforce(entity) {\n    let result = entity;\n    for (const policy of this.policies) {\n      const output = await policy.enforce(result);\n      if (!output) {\n        throw new Error(\n          `Policy ${policy.constructor.name} did not return a result`\n        );\n      }\n      result = output;\n    }\n    return result;\n  }\n}\nclass AnyEntityPolicy {\n  constructor(policies) {\n    this.policies = policies;\n  }\n  async enforce(entity) {\n    for (const policy of this.policies) {\n      const output = await policy.enforce(entity);\n      if (output) {\n        return output;\n      }\n    }\n    throw new Error(`The entity did not match any known policy`);\n  }\n}\nconst EntityPolicies = {\n  allOf(policies) {\n    return new AllEntityPolicies(policies);\n  },\n  oneOf(policies) {\n    return new AnyEntityPolicy(policies);\n  }\n};\n\nvar $schema$7 = \"http://json-schema.org/draft-07/schema\";\nvar $id$7 = \"ApiV1alpha1\";\nvar description$7 = \"An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.\";\nvar examples$7 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"API\",\n\t\tmetadata: {\n\t\t\tname: \"artist-api\",\n\t\t\tdescription: \"Retrieve artist details\",\n\t\t\tlabels: {\n\t\t\t\tproduct_name: \"Random value Generator\"\n\t\t\t},\n\t\t\tannotations: {\n\t\t\t\tdocs: \"https://github.com/..../tree/develop/doc\"\n\t\t\t}\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"openapi\",\n\t\t\tlifecycle: \"production\",\n\t\t\towner: \"artist-relations-team\",\n\t\t\tsystem: \"artist-engagement-portal\",\n\t\t\tdefinition: \"openapi: \\\"3.0.0\\\"\\ninfo:...\"\n\t\t}\n\t}\n];\nvar allOf$7 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"API\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"lifecycle\",\n\t\t\t\t\t\"owner\",\n\t\t\t\t\t\"definition\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of the API definition.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"openapi\",\n\t\t\t\t\t\t\t\"asyncapi\",\n\t\t\t\t\t\t\t\"graphql\",\n\t\t\t\t\t\t\t\"grpc\",\n\t\t\t\t\t\t\t\"trpc\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tlifecycle: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The lifecycle state of the API.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"experimental\",\n\t\t\t\t\t\t\t\"production\",\n\t\t\t\t\t\t\t\"deprecated\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the API.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tsystem: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the system that the API belongs to.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tdefinition: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The definition of the API, based on the format defined by the type.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$7 = {\n\t$schema: $schema$7,\n\t$id: $id$7,\n\tdescription: description$7,\n\texamples: examples$7,\n\tallOf: allOf$7\n};\n\nfunction ajvCompiledJsonSchemaValidator(schema) {\n  let validator;\n  return {\n    async check(data) {\n      if (!validator) {\n        validator = entityKindSchemaValidator(schema);\n      }\n      return validator(data) === data;\n    }\n  };\n}\n\nconst apiEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$7);\n\nvar $schema$6 = \"http://json-schema.org/draft-07/schema\";\nvar $id$6 = \"ComponentV1alpha1\";\nvar description$6 = \"A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a \\\"unit of software\\\", usually with a distinct deployable or linkable artifact.\";\nvar examples$6 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Component\",\n\t\tmetadata: {\n\t\t\tname: \"LoremService\",\n\t\t\tdescription: \"Creates Lorems like a pro.\",\n\t\t\tlabels: {\n\t\t\t\tproduct_name: \"Random value Generator\"\n\t\t\t},\n\t\t\tannotations: {\n\t\t\t\tdocs: \"https://github.com/..../tree/develop/doc\"\n\t\t\t}\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"service\",\n\t\t\tlifecycle: \"production\",\n\t\t\towner: \"tools\"\n\t\t}\n\t}\n];\nvar allOf$6 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Component\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"lifecycle\",\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"service\",\n\t\t\t\t\t\t\t\"website\",\n\t\t\t\t\t\t\t\"library\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tlifecycle: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The lifecycle state of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"experimental\",\n\t\t\t\t\t\t\t\"production\",\n\t\t\t\t\t\t\t\"deprecated\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tsystem: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the system that the component belongs to.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tsubcomponentOf: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to another component of which the component is a part.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tprovidesApis: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of entity references to the APIs that are provided by the component.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tconsumesApis: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of entity references to the APIs that are consumed by the component.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdependsOn: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of references to other entities that the component depends on to function.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$6 = {\n\t$schema: $schema$6,\n\t$id: $id$6,\n\tdescription: description$6,\n\texamples: examples$6,\n\tallOf: allOf$6\n};\n\nconst componentEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$6);\n\nvar $schema$5 = \"http://json-schema.org/draft-07/schema\";\nvar $id$5 = \"DomainV1alpha1\";\nvar description$5 = \"A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.\";\nvar examples$5 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Domain\",\n\t\tmetadata: {\n\t\t\tname: \"artists\",\n\t\t\tdescription: \"Everything about artists\"\n\t\t},\n\t\tspec: {\n\t\t\towner: \"artist-relations-team\"\n\t\t}\n\t}\n];\nvar allOf$5 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Domain\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$5 = {\n\t$schema: $schema$5,\n\t$id: $id$5,\n\tdescription: description$5,\n\texamples: examples$5,\n\tallOf: allOf$5\n};\n\nconst domainEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$5);\n\nvar $schema$4 = \"http://json-schema.org/draft-07/schema\";\nvar $id$4 = \"GroupV1alpha1\";\nvar description$4 = \"A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.\";\nvar examples$4 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Group\",\n\t\tmetadata: {\n\t\t\tname: \"infrastructure\",\n\t\t\tdescription: \"The infra business unit\"\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"business-unit\",\n\t\t\tprofile: {\n\t\t\t\tdisplayName: \"Infrastructure\",\n\t\t\t\temail: \"infrastructure@example.com\",\n\t\t\t\tpicture: \"https://example.com/groups/bu-infrastructure.jpeg\"\n\t\t\t},\n\t\t\tparent: \"ops\",\n\t\t\tchildren: [\n\t\t\t\t\"backstage\",\n\t\t\t\t\"other\"\n\t\t\t]\n\t\t}\n\t}\n];\nvar allOf$4 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Group\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"children\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"team\",\n\t\t\t\t\t\t\t\"business-unit\",\n\t\t\t\t\t\t\t\"product-area\",\n\t\t\t\t\t\t\t\"root\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tprofile: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tdescription: \"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tdisplayName: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"A simple display name to present to users.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"Infrastructure\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"An email where this entity can be reached.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"infrastructure@example.com\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpicture: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The URL of an image that represents this entity.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"https://example.com/groups/bu-infrastructure.jpeg\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tparent: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"ops\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tchildren: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"backstage\",\n\t\t\t\t\t\t\t\t\"other\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tmembers: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"The users that are members of this group. The entries of this array are entity references.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"jdoe\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$4 = {\n\t$schema: $schema$4,\n\t$id: $id$4,\n\tdescription: description$4,\n\texamples: examples$4,\n\tallOf: allOf$4\n};\n\nconst groupEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$4);\n\nvar $schema$3 = \"http://json-schema.org/draft-07/schema\";\nvar $id$3 = \"LocationV1alpha1\";\nvar description$3 = \"A location is a marker that references other places to look for catalog data.\";\nvar examples$3 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Location\",\n\t\tmetadata: {\n\t\t\tname: \"org-data\"\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"url\",\n\t\t\ttargets: [\n\t\t\t\t\"http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml\",\n\t\t\t\t\"http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml\"\n\t\t\t]\n\t\t}\n\t}\n];\nvar allOf$3 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Location\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"url\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\ttarget: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"./details/catalog-info.yaml\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\ttargets: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"./details/catalog-info.yaml\",\n\t\t\t\t\t\t\t\t\"http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tpresence: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"Whether the presence of the location target is required and it should be considered an error if it can not be found\",\n\t\t\t\t\t\t\"default\": \"required\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"required\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\t\"enum\": [\n\t\t\t\t\t\t\t\"required\",\n\t\t\t\t\t\t\t\"optional\"\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$3 = {\n\t$schema: $schema$3,\n\t$id: $id$3,\n\tdescription: description$3,\n\texamples: examples$3,\n\tallOf: allOf$3\n};\n\nconst locationEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$3);\n\nconst RELATION_OWNED_BY = \"ownedBy\";\nconst RELATION_OWNER_OF = \"ownerOf\";\nconst RELATION_CONSUMES_API = \"consumesApi\";\nconst RELATION_API_CONSUMED_BY = \"apiConsumedBy\";\nconst RELATION_PROVIDES_API = \"providesApi\";\nconst RELATION_API_PROVIDED_BY = \"apiProvidedBy\";\nconst RELATION_DEPENDS_ON = \"dependsOn\";\nconst RELATION_DEPENDENCY_OF = \"dependencyOf\";\nconst RELATION_PARENT_OF = \"parentOf\";\nconst RELATION_CHILD_OF = \"childOf\";\nconst RELATION_MEMBER_OF = \"memberOf\";\nconst RELATION_HAS_MEMBER = \"hasMember\";\nconst RELATION_PART_OF = \"partOf\";\nconst RELATION_HAS_PART = \"hasPart\";\n\nvar $schema$2 = \"http://json-schema.org/draft-07/schema\";\nvar $id$2 = \"ResourceV1alpha1\";\nvar description$2 = \"A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.\";\nvar examples$2 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Resource\",\n\t\tmetadata: {\n\t\t\tname: \"artists-db\",\n\t\t\tdescription: \"Stores artist details\"\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"database\",\n\t\t\towner: \"artist-relations-team\",\n\t\t\tsystem: \"artist-engagement-portal\"\n\t\t}\n\t}\n];\nvar allOf$2 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Resource\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of resource.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"database\",\n\t\t\t\t\t\t\t\"s3-bucket\",\n\t\t\t\t\t\t\t\"cluster\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the resource.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tdependsOn: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of references to other entities that the resource depends on to function.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tsystem: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the system that the resource belongs to.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$2 = {\n\t$schema: $schema$2,\n\t$id: $id$2,\n\tdescription: description$2,\n\texamples: examples$2,\n\tallOf: allOf$2\n};\n\nconst resourceEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$2);\n\nvar $schema$1 = \"http://json-schema.org/draft-07/schema\";\nvar $id$1 = \"SystemV1alpha1\";\nvar description$1 = \"A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.\";\nvar examples$1 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"System\",\n\t\tmetadata: {\n\t\t\tname: \"artist-engagement-portal\",\n\t\t\tdescription: \"Handy tools to keep artists in the loop\"\n\t\t},\n\t\tspec: {\n\t\t\towner: \"artist-relations-team\",\n\t\t\tdomain: \"artists\"\n\t\t}\n\t}\n];\nvar allOf$1 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"System\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tdomain: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the domain that the system belongs to.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artists\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$1 = {\n\t$schema: $schema$1,\n\t$id: $id$1,\n\tdescription: description$1,\n\texamples: examples$1,\n\tallOf: allOf$1\n};\n\nconst systemEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$1);\n\nvar $schema = \"http://json-schema.org/draft-07/schema\";\nvar $id = \"UserV1alpha1\";\nvar description = \"A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.\";\nvar examples = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"User\",\n\t\tmetadata: {\n\t\t\tname: \"jdoe\"\n\t\t},\n\t\tspec: {\n\t\t\tprofile: {\n\t\t\t\tdisplayName: \"Jenny Doe\",\n\t\t\t\temail: \"jenny-doe@example.com\",\n\t\t\t\tpicture: \"https://example.com/staff/jenny-with-party-hat.jpeg\"\n\t\t\t},\n\t\t\tmemberOf: [\n\t\t\t\t\"team-b\",\n\t\t\t\t\"employees\"\n\t\t\t]\n\t\t}\n\t}\n];\nvar allOf = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"User\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"memberOf\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\tprofile: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tdescription: \"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tdisplayName: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"A simple display name to present to users.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"Jenny Doe\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"An email where this user can be reached.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"jenny-doe@example.com\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpicture: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The URL of an image that represents this user.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"https://example.com/staff/jenny-with-party-hat.jpeg\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tmemberOf: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"team-b\",\n\t\t\t\t\t\t\t\t\"employees\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema = {\n\t$schema: $schema,\n\t$id: $id,\n\tdescription: description,\n\texamples: examples,\n\tallOf: allOf\n};\n\nconst userEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema);\n\nconst ANNOTATION_LOCATION = \"backstage.io/managed-by-location\";\nconst ANNOTATION_ORIGIN_LOCATION = \"backstage.io/managed-by-origin-location\";\nconst ANNOTATION_SOURCE_LOCATION = \"backstage.io/source-location\";\n\nconst scriptProtocolPattern = (\n  // eslint-disable-next-line no-control-regex\n  /^[\\u0000-\\u001F ]*j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*\\:/i\n);\nfunction parseLocationRef(ref) {\n  if (typeof ref !== \"string\") {\n    throw new TypeError(\n      `Unable to parse location ref '${ref}', unexpected argument ${typeof ref}`\n    );\n  }\n  const splitIndex = ref.indexOf(\":\");\n  if (splitIndex < 0) {\n    throw new TypeError(\n      `Unable to parse location ref '${ref}', expected '<type>:<target>', e.g. 'url:https://host/path'`\n    );\n  }\n  const type = ref.substring(0, splitIndex).trim();\n  const target = ref.substring(splitIndex + 1).trim();\n  if (!type || !target) {\n    throw new TypeError(\n      `Unable to parse location ref '${ref}', expected '<type>:<target>', e.g. 'url:https://host/path'`\n    );\n  }\n  if (type === \"http\" || type === \"https\") {\n    throw new TypeError(\n      `Invalid location ref '${ref}', please prefix it with 'url:', e.g. 'url:${ref}'`\n    );\n  }\n  if (scriptProtocolPattern.test(target)) {\n    throw new TypeError(\n      `Invalid location ref '${ref}', target is a javascript: URL`\n    );\n  }\n  return { type, target };\n}\nfunction stringifyLocationRef(ref) {\n  const { type, target } = ref;\n  if (!type) {\n    throw new TypeError(`Unable to stringify location ref, empty type`);\n  } else if (!target) {\n    throw new TypeError(`Unable to stringify location ref, empty target`);\n  }\n  if (scriptProtocolPattern.test(target)) {\n    throw new TypeError(\n      `Invalid location ref '${type}:${target}', target is a javascript: URL`\n    );\n  }\n  return `${type}:${target}`;\n}\nfunction getEntitySourceLocation(entity) {\n  var _a, _b, _c, _d, _e;\n  const locationRef = (_e = (_b = (_a = entity.metadata) == null ? void 0 : _a.annotations) == null ? void 0 : _b[ANNOTATION_SOURCE_LOCATION]) != null ? _e : (_d = (_c = entity.metadata) == null ? void 0 : _c.annotations) == null ? void 0 : _d[ANNOTATION_LOCATION];\n  if (!locationRef) {\n    throw new Error(\n      `Entity '${stringifyEntityRef(entity)}' is missing location`\n    );\n  }\n  return parseLocationRef(locationRef);\n}\n\nexport { ANNOTATION_EDIT_URL, ANNOTATION_KUBERNETES_API_SERVER, ANNOTATION_KUBERNETES_API_SERVER_CA, ANNOTATION_KUBERNETES_AUTH_PROVIDER, ANNOTATION_LOCATION, ANNOTATION_ORIGIN_LOCATION, ANNOTATION_SOURCE_LOCATION, ANNOTATION_VIEW_URL, CommonValidatorFunctions, DEFAULT_NAMESPACE, DefaultNamespaceEntityPolicy, EntityPolicies, FieldFormatEntityPolicy, GroupDefaultParentEntityPolicy, KubernetesValidatorFunctions, NoForeignRootFieldsEntityPolicy, RELATION_API_CONSUMED_BY, RELATION_API_PROVIDED_BY, RELATION_CHILD_OF, RELATION_CONSUMES_API, RELATION_DEPENDENCY_OF, RELATION_DEPENDS_ON, RELATION_HAS_MEMBER, RELATION_HAS_PART, RELATION_MEMBER_OF, RELATION_OWNED_BY, RELATION_OWNER_OF, RELATION_PARENT_OF, RELATION_PART_OF, RELATION_PROVIDES_API, SchemaValidEntityPolicy, apiEntityV1alpha1Validator, componentEntityV1alpha1Validator, domainEntityV1alpha1Validator, entityEnvelopeSchemaValidator, entityKindSchemaValidator, entitySchemaValidator, getCompoundEntityRef, getEntitySourceLocation, groupEntityV1alpha1Validator, isApiEntity, isComponentEntity, isDomainEntity, isGroupEntity, isLocationEntity, isResourceEntity, isSystemEntity, isUserEntity, locationEntityV1alpha1Validator, makeValidator, parseEntityRef, parseLocationRef, resourceEntityV1alpha1Validator, stringifyEntityRef, stringifyLocationRef, systemEntityV1alpha1Validator, userEntityV1alpha1Validator };\n//# sourceMappingURL=index.esm.js.map\n","import { InputError } from '@backstage/errors';\nimport cloneDeep from 'lodash/cloneDeep';\nimport mergeWith from 'lodash/mergeWith';\n\nconst propsOfHumanDuration = [\n  \"years\",\n  \"months\",\n  \"weeks\",\n  \"days\",\n  \"hours\",\n  \"minutes\",\n  \"seconds\",\n  \"milliseconds\"\n];\nfunction readDurationFromConfig(config, options) {\n  let root;\n  let found = false;\n  const result = {};\n  try {\n    root = (options == null ? void 0 : options.key) ? config.getConfig(options.key) : config;\n    for (const prop of propsOfHumanDuration) {\n      const value = root.getOptionalNumber(prop);\n      if (value !== void 0) {\n        result[prop] = value;\n        found = true;\n      }\n    }\n  } catch (error) {\n    throw new InputError(`Failed to read duration from config, ${error}`);\n  }\n  try {\n    if (!found) {\n      const good = propsOfHumanDuration.map((p) => `'${p}'`).join(\", \");\n      throw new Error(`Needs one or more of ${good}`);\n    }\n    const invalidProps = root.keys().filter((prop) => !propsOfHumanDuration.includes(prop));\n    if (invalidProps.length) {\n      const what = invalidProps.length === 1 ? \"property\" : \"properties\";\n      const bad = invalidProps.map((p) => `'${p}'`).join(\", \");\n      const good = propsOfHumanDuration.map((p) => `'${p}'`).join(\", \");\n      throw new Error(\n        `Unknown ${what} ${bad}; expected one or more of ${good}`\n      );\n    }\n  } catch (error) {\n    let prefix = \"Failed to read duration from config\";\n    if (options == null ? void 0 : options.key) {\n      prefix += ` at '${options.key}'`;\n    }\n    throw new InputError(`${prefix}, ${error}`);\n  }\n  return result;\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst CONFIG_KEY_PART_PATTERN = /^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;\nfunction isObject(value) {\n  return typeof value === \"object\" && value !== null && !Array.isArray(value);\n}\nfunction typeOf(value) {\n  if (value === null) {\n    return \"null\";\n  } else if (Array.isArray(value)) {\n    return \"array\";\n  }\n  const type = typeof value;\n  if (type === \"number\" && isNaN(value)) {\n    return \"nan\";\n  }\n  if (type === \"string\" && value === \"\") {\n    return \"empty-string\";\n  }\n  return type;\n}\nconst errors = {\n  type(key, context, typeName, expected) {\n    return `Invalid type in config for key '${key}' in '${context}', got ${typeName}, wanted ${expected}`;\n  },\n  missing(key) {\n    return `Missing required config value at '${key}'`;\n  },\n  convert(key, context, expected) {\n    return `Unable to convert config value for key '${key}' in '${context}' to a ${expected}`;\n  }\n};\nclass ConfigReader {\n  constructor(data, context = \"mock-config\", fallback, prefix = \"\") {\n    this.data = data;\n    this.context = context;\n    this.fallback = fallback;\n    this.prefix = prefix;\n    /**\n     * A set of key paths that where removed from the config due to not being visible.\n     *\n     * This was added as a mutable private member to avoid changes to the public API.\n     * Its only purpose of this is to warn users of missing visibility when running\n     * the frontend in development mode.\n     */\n    __publicField(this, \"filteredKeys\");\n    __publicField(this, \"notifiedFilteredKeys\", /* @__PURE__ */ new Set());\n  }\n  /**\n   * Instantiates the config reader from a list of application config objects.\n   */\n  static fromConfigs(configs) {\n    if (configs.length === 0) {\n      return new ConfigReader(void 0);\n    }\n    return configs.reduce(\n      (previousReader, { data, context, filteredKeys, deprecatedKeys }) => {\n        const reader = new ConfigReader(data, context, previousReader);\n        reader.filteredKeys = filteredKeys;\n        if (deprecatedKeys) {\n          for (const { key, description } of deprecatedKeys) {\n            console.warn(\n              `The configuration key '${key}' of ${context} is deprecated and may be removed soon. ${description || \"\"}`\n            );\n          }\n        }\n        return reader;\n      },\n      void 0\n    );\n  }\n  /** {@inheritdoc Config.has} */\n  has(key) {\n    var _a, _b;\n    const value = this.readValue(key);\n    if (value !== void 0) {\n      return true;\n    }\n    return (_b = (_a = this.fallback) == null ? void 0 : _a.has(key)) != null ? _b : false;\n  }\n  /** {@inheritdoc Config.keys} */\n  keys() {\n    var _a, _b;\n    const localKeys = this.data ? Object.keys(this.data) : [];\n    const fallbackKeys = (_b = (_a = this.fallback) == null ? void 0 : _a.keys()) != null ? _b : [];\n    return [.../* @__PURE__ */ new Set([...localKeys, ...fallbackKeys])];\n  }\n  /** {@inheritdoc Config.get} */\n  get(key) {\n    const value = this.getOptional(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key != null ? key : \"\")));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptional} */\n  getOptional(key) {\n    var _a, _b;\n    const value = cloneDeep(this.readValue(key));\n    const fallbackValue = (_a = this.fallback) == null ? void 0 : _a.getOptional(key);\n    if (value === void 0) {\n      if (process.env.NODE_ENV === \"development\") {\n        if (fallbackValue === void 0 && key) {\n          const fullKey = this.fullKey(key);\n          if (((_b = this.filteredKeys) == null ? void 0 : _b.includes(fullKey)) && !this.notifiedFilteredKeys.has(fullKey)) {\n            this.notifiedFilteredKeys.add(fullKey);\n            console.warn(\n              `Failed to read configuration value at '${fullKey}' as it is not visible. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`\n            );\n          }\n        }\n      }\n      return fallbackValue;\n    } else if (fallbackValue === void 0) {\n      return value;\n    }\n    return mergeWith(\n      {},\n      { value: fallbackValue },\n      { value },\n      (into, from) => !isObject(from) || !isObject(into) ? from : void 0\n    ).value;\n  }\n  /** {@inheritdoc Config.getConfig} */\n  getConfig(key) {\n    const value = this.getOptionalConfig(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalConfig} */\n  getOptionalConfig(key) {\n    var _a;\n    const value = this.readValue(key);\n    const fallbackConfig = (_a = this.fallback) == null ? void 0 : _a.getOptionalConfig(key);\n    if (isObject(value)) {\n      return this.copy(value, key, fallbackConfig);\n    }\n    if (value !== void 0) {\n      throw new TypeError(\n        errors.type(this.fullKey(key), this.context, typeOf(value), \"object\")\n      );\n    }\n    return fallbackConfig;\n  }\n  /** {@inheritdoc Config.getConfigArray} */\n  getConfigArray(key) {\n    const value = this.getOptionalConfigArray(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalConfigArray} */\n  getOptionalConfigArray(key) {\n    var _a;\n    const configs = this.readConfigValue(key, (values) => {\n      if (!Array.isArray(values)) {\n        return { expected: \"object-array\" };\n      }\n      for (const [index, value] of values.entries()) {\n        if (!isObject(value)) {\n          return { expected: \"object-array\", value, key: `${key}[${index}]` };\n        }\n      }\n      return true;\n    });\n    if (!configs) {\n      if (process.env.NODE_ENV === \"development\") {\n        const fullKey = this.fullKey(key);\n        if (((_a = this.filteredKeys) == null ? void 0 : _a.some((k) => k.startsWith(fullKey))) && !this.notifiedFilteredKeys.has(key)) {\n          this.notifiedFilteredKeys.add(key);\n          console.warn(\n            `Failed to read configuration array at '${key}' as it does not have any visible elements. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`\n          );\n        }\n      }\n      return void 0;\n    }\n    return configs.map((obj, index) => this.copy(obj, `${key}[${index}]`));\n  }\n  /** {@inheritdoc Config.getNumber} */\n  getNumber(key) {\n    const value = this.getOptionalNumber(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalNumber} */\n  getOptionalNumber(key) {\n    const value = this.readConfigValue(\n      key,\n      (val) => typeof val === \"number\" || typeof val === \"string\" || { expected: \"number\" }\n    );\n    if (typeof value === \"number\" || value === void 0) {\n      return value;\n    }\n    const number = Number(value);\n    if (!Number.isFinite(number)) {\n      throw new Error(\n        errors.convert(this.fullKey(key), this.context, \"number\")\n      );\n    }\n    return number;\n  }\n  /** {@inheritdoc Config.getBoolean} */\n  getBoolean(key) {\n    const value = this.getOptionalBoolean(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalBoolean} */\n  getOptionalBoolean(key) {\n    const value = this.readConfigValue(\n      key,\n      (val) => typeof val === \"boolean\" || typeof val === \"number\" || typeof val === \"string\" || { expected: \"boolean\" }\n    );\n    if (typeof value === \"boolean\" || value === void 0) {\n      return value;\n    }\n    const valueString = String(value).trim();\n    if (/^(?:y|yes|true|1|on)$/i.test(valueString)) {\n      return true;\n    }\n    if (/^(?:n|no|false|0|off)$/i.test(valueString)) {\n      return false;\n    }\n    throw new Error(errors.convert(this.fullKey(key), this.context, \"boolean\"));\n  }\n  /** {@inheritdoc Config.getString} */\n  getString(key) {\n    const value = this.getOptionalString(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalString} */\n  getOptionalString(key) {\n    return this.readConfigValue(\n      key,\n      (value) => typeof value === \"string\" && value !== \"\" || { expected: \"string\" }\n    );\n  }\n  /** {@inheritdoc Config.getStringArray} */\n  getStringArray(key) {\n    const value = this.getOptionalStringArray(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalStringArray} */\n  getOptionalStringArray(key) {\n    return this.readConfigValue(key, (values) => {\n      if (!Array.isArray(values)) {\n        return { expected: \"string-array\" };\n      }\n      for (const [index, value] of values.entries()) {\n        if (typeof value !== \"string\" || value === \"\") {\n          return { expected: \"string-array\", value, key: `${key}[${index}]` };\n        }\n      }\n      return true;\n    });\n  }\n  fullKey(key) {\n    return `${this.prefix}${this.prefix ? \".\" : \"\"}${key}`;\n  }\n  copy(data, key, fallback) {\n    const reader = new ConfigReader(\n      data,\n      this.context,\n      fallback,\n      this.fullKey(key)\n    );\n    reader.filteredKeys = this.filteredKeys;\n    return reader;\n  }\n  readConfigValue(key, validate) {\n    var _a, _b;\n    const value = this.readValue(key);\n    if (value === void 0) {\n      if (process.env.NODE_ENV === \"development\") {\n        const fullKey = this.fullKey(key);\n        if (((_a = this.filteredKeys) == null ? void 0 : _a.includes(fullKey)) && !this.notifiedFilteredKeys.has(fullKey)) {\n          this.notifiedFilteredKeys.add(fullKey);\n          console.warn(\n            `Failed to read configuration value at '${fullKey}' as it is not visible. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`\n          );\n        }\n      }\n      return (_b = this.fallback) == null ? void 0 : _b.readConfigValue(key, validate);\n    }\n    const result = validate(value);\n    if (result !== true) {\n      const { key: keyName = key, value: theValue = value, expected } = result;\n      throw new TypeError(\n        errors.type(\n          this.fullKey(keyName),\n          this.context,\n          typeOf(theValue),\n          expected\n        )\n      );\n    }\n    return value;\n  }\n  readValue(key) {\n    const parts = key ? key.split(\".\") : [];\n    for (const part of parts) {\n      if (!CONFIG_KEY_PART_PATTERN.test(part)) {\n        throw new TypeError(`Invalid config key '${key}'`);\n      }\n    }\n    if (this.data === void 0) {\n      return void 0;\n    }\n    let value = this.data;\n    for (const [index, part] of parts.entries()) {\n      if (isObject(value)) {\n        value = value[part];\n      } else if (value !== void 0) {\n        const badKey = this.fullKey(parts.slice(0, index).join(\".\"));\n        throw new TypeError(\n          errors.type(badKey, this.context, typeOf(value), \"object\")\n        );\n      }\n    }\n    return value;\n  }\n}\n\nexport { ConfigReader, readDurationFromConfig };\n//# sourceMappingURL=index.esm.js.map\n","import React, { useContext, createContext, useEffect, useState, Children, isValidElement, useMemo, useRef, Suspense } from 'react';\nimport PropTypes from 'prop-types';\nimport { createVersionedContext, createVersionedValueMap, getOrCreateGlobalSingleton } from '@backstage/version-bridge';\nimport ObservableImpl from 'zen-observable';\nimport { SessionState, FeatureFlagState, AnalyticsContext, useAnalytics, attachComponentData, useApp, useApi, configApiRef, getComponentData, featureFlagsApiRef, appThemeApiRef, identityApiRef, useElementFilter } from '@backstage/core-plugin-api';\nimport { z } from 'zod';\nimport { ConfigReader } from '@backstage/config';\nexport { ConfigReader } from '@backstage/config';\nimport { createRoutesFromChildren, Route, useLocation, matchRoutes, Routes, generatePath, useRoutes } from 'react-router-dom';\nimport useAsync from 'react-use/lib/useAsync';\nimport { appLanguageApiRef, translationApiRef } from '@backstage/core-plugin-api/alpha';\nimport mapValues from 'lodash/mapValues';\nimport useObservable from 'react-use/lib/useObservable';\nimport { createInstance } from 'i18next';\n\nvar __defProp$l = Object.defineProperty;\nvar __defNormalProp$l = (obj, key, value) => key in obj ? __defProp$l(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$l = (obj, key, value) => {\n  __defNormalProp$l(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ApiAggregator {\n  constructor(...holders) {\n    __publicField$l(this, \"holders\");\n    this.holders = holders;\n  }\n  get(apiRef) {\n    for (const holder of this.holders) {\n      const api = holder.get(apiRef);\n      if (api) {\n        return api;\n      }\n    }\n    return void 0;\n  }\n}\n\nconst ApiContext = createVersionedContext(\"api-context\");\nconst ApiProvider = (props) => {\n  var _a;\n  const { apis, children } = props;\n  const parentHolder = (_a = useContext(ApiContext)) == null ? void 0 : _a.atVersion(1);\n  const holder = parentHolder ? new ApiAggregator(apis, parentHolder) : apis;\n  return /* @__PURE__ */ React.createElement(\n    ApiContext.Provider,\n    {\n      value: createVersionedValueMap({ 1: holder }),\n      children\n    }\n  );\n};\nApiProvider.propTypes = {\n  apis: PropTypes.shape({ get: PropTypes.func.isRequired }).isRequired,\n  children: PropTypes.node\n};\n\nvar __defProp$k = Object.defineProperty;\nvar __defNormalProp$k = (obj, key, value) => key in obj ? __defProp$k(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$k = (obj, key, value) => {\n  __defNormalProp$k(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ApiResolver {\n  constructor(factories) {\n    this.factories = factories;\n    __publicField$k(this, \"apis\", /* @__PURE__ */ new Map());\n  }\n  /**\n   * Validate factories by making sure that each of the apis can be created\n   * without hitting any circular dependencies.\n   */\n  static validateFactories(factories, apis) {\n    for (const api of apis) {\n      const heap = [api];\n      const allDeps = /* @__PURE__ */ new Set();\n      while (heap.length) {\n        const apiRef = heap.shift();\n        const factory = factories.get(apiRef);\n        if (!factory) {\n          continue;\n        }\n        for (const dep of Object.values(factory.deps)) {\n          if (dep.id === api.id) {\n            throw new Error(`Circular dependency of api factory for ${api}`);\n          }\n          if (!allDeps.has(dep)) {\n            allDeps.add(dep);\n            heap.push(dep);\n          }\n        }\n      }\n    }\n  }\n  get(ref) {\n    return this.load(ref);\n  }\n  load(ref, loading = []) {\n    const impl = this.apis.get(ref.id);\n    if (impl) {\n      return impl;\n    }\n    const factory = this.factories.get(ref);\n    if (!factory) {\n      return void 0;\n    }\n    if (loading.includes(factory.api)) {\n      throw new Error(`Circular dependency of api factory for ${factory.api}`);\n    }\n    const deps = this.loadDeps(ref, factory.deps, [...loading, factory.api]);\n    const api = factory.factory(deps);\n    this.apis.set(ref.id, api);\n    return api;\n  }\n  loadDeps(dependent, apis, loading) {\n    const impls = {};\n    for (const key in apis) {\n      if (apis.hasOwnProperty(key)) {\n        const ref = apis[key];\n        const api = this.load(ref, loading);\n        if (!api) {\n          throw new Error(\n            `No API factory available for dependency ${ref} of dependent ${dependent}`\n          );\n        }\n        impls[key] = api;\n      }\n    }\n    return impls;\n  }\n}\n\nvar __defProp$j = Object.defineProperty;\nvar __defNormalProp$j = (obj, key, value) => key in obj ? __defProp$j(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$j = (obj, key, value) => {\n  __defNormalProp$j(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar ScopePriority = /* @__PURE__ */ ((ScopePriority2) => {\n  ScopePriority2[ScopePriority2[\"default\"] = 10] = \"default\";\n  ScopePriority2[ScopePriority2[\"app\"] = 50] = \"app\";\n  ScopePriority2[ScopePriority2[\"static\"] = 100] = \"static\";\n  return ScopePriority2;\n})(ScopePriority || {});\nclass ApiFactoryRegistry {\n  constructor() {\n    __publicField$j(this, \"factories\", /* @__PURE__ */ new Map());\n  }\n  /**\n   * Register a new API factory. Returns true if the factory was added\n   * to the registry.\n   *\n   * A factory will not be added to the registry if there is already\n   * an existing factory with the same or higher priority.\n   */\n  register(scope, factory) {\n    const priority = ScopePriority[scope];\n    const existing = this.factories.get(factory.api.id);\n    if (existing && existing.priority >= priority) {\n      return false;\n    }\n    this.factories.set(factory.api.id, { priority, factory });\n    return true;\n  }\n  get(api) {\n    const tuple = this.factories.get(api.id);\n    if (!tuple) {\n      return void 0;\n    }\n    return tuple.factory;\n  }\n  getAllApis() {\n    const refs = /* @__PURE__ */ new Set();\n    for (const { factory } of this.factories.values()) {\n      refs.add(factory.api);\n    }\n    return refs;\n  }\n}\n\nfunction showLoginPopup(options) {\n  return new Promise((resolve, reject) => {\n    const width = options.width || 500;\n    const height = options.height || 700;\n    const left = window.screen.width / 2 - width / 2;\n    const top = window.screen.height / 2 - height / 2;\n    const popup = window.open(\n      options.url,\n      options.name,\n      `menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${width},height=${height},top=${top},left=${left}`\n    );\n    let targetOrigin = \"\";\n    if (!popup || typeof popup.closed === \"undefined\" || popup.closed) {\n      const error = new Error(\"Failed to open auth popup.\");\n      error.name = \"PopupRejectedError\";\n      reject(error);\n      return;\n    }\n    const messageListener = (event) => {\n      if (event.source !== popup) {\n        return;\n      }\n      if (event.origin !== options.origin) {\n        return;\n      }\n      const { data } = event;\n      if (data.type === \"config_info\") {\n        targetOrigin = data.targetOrigin;\n        return;\n      }\n      if (data.type !== \"authorization_response\") {\n        return;\n      }\n      const authResult = data;\n      if (\"error\" in authResult) {\n        const error = new Error(authResult.error.message);\n        error.name = authResult.error.name;\n        reject(error);\n      } else {\n        resolve(authResult.response);\n      }\n      done();\n    };\n    const intervalId = setInterval(() => {\n      if (popup.closed) {\n        const errMessage = `Login failed, ${targetOrigin && targetOrigin !== window.location.origin ? `Incorrect app origin, expected ${targetOrigin}` : \"popup was closed\"}`;\n        const error = new Error(errMessage);\n        error.name = \"PopupClosedError\";\n        reject(error);\n        done();\n      }\n    }, 100);\n    function done() {\n      window.removeEventListener(\"message\", messageListener);\n      clearInterval(intervalId);\n    }\n    window.addEventListener(\"message\", messageListener);\n  });\n}\n\nvar __defProp$i = Object.defineProperty;\nvar __defNormalProp$i = (obj, key, value) => key in obj ? __defProp$i(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$i = (obj, key, value) => {\n  __defNormalProp$i(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nlet warned$1 = false;\nfunction defaultJoinScopes(scopes) {\n  return [...scopes].join(\" \");\n}\nclass DefaultAuthConnector {\n  constructor(options) {\n    __publicField$i(this, \"discoveryApi\");\n    __publicField$i(this, \"environment\");\n    __publicField$i(this, \"provider\");\n    __publicField$i(this, \"joinScopesFunc\");\n    __publicField$i(this, \"authRequester\");\n    __publicField$i(this, \"sessionTransform\");\n    __publicField$i(this, \"enableExperimentalRedirectFlow\");\n    __publicField$i(this, \"popupOptions\");\n    var _a;\n    const {\n      configApi,\n      discoveryApi,\n      environment,\n      provider,\n      joinScopes = defaultJoinScopes,\n      oauthRequestApi,\n      sessionTransform = (id) => id,\n      popupOptions\n    } = options;\n    if (!warned$1 && !configApi) {\n      console.warn(\n        \"DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor.\"\n      );\n      warned$1 = true;\n    }\n    this.enableExperimentalRedirectFlow = configApi ? (_a = configApi.getOptionalBoolean(\"enableExperimentalRedirectFlow\")) != null ? _a : false : false;\n    this.authRequester = oauthRequestApi.createAuthRequester({\n      provider,\n      onAuthRequest: async (scopes) => {\n        if (!this.enableExperimentalRedirectFlow) {\n          return this.showPopup(scopes);\n        }\n        return this.executeRedirect(scopes);\n      }\n    });\n    this.discoveryApi = discoveryApi;\n    this.environment = environment;\n    this.provider = provider;\n    this.joinScopesFunc = joinScopes;\n    this.sessionTransform = sessionTransform;\n    this.popupOptions = popupOptions;\n  }\n  async createSession(options) {\n    if (options.instantPopup) {\n      if (this.enableExperimentalRedirectFlow) {\n        return this.executeRedirect(options.scopes);\n      }\n      return this.showPopup(options.scopes);\n    }\n    return this.authRequester(options.scopes);\n  }\n  async refreshSession(scopes) {\n    const res = await fetch(\n      await this.buildUrl(\"/refresh\", {\n        optional: true,\n        ...scopes && { scope: this.joinScopesFunc(scopes) }\n      }),\n      {\n        headers: {\n          \"x-requested-with\": \"XMLHttpRequest\"\n        },\n        credentials: \"include\"\n      }\n    ).catch((error) => {\n      throw new Error(`Auth refresh request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(\n        `Auth refresh request failed, ${res.statusText}`\n      );\n      error.status = res.status;\n      throw error;\n    }\n    const authInfo = await res.json();\n    if (authInfo.error) {\n      const error = new Error(authInfo.error.message);\n      if (authInfo.error.name) {\n        error.name = authInfo.error.name;\n      }\n      throw error;\n    }\n    return await this.sessionTransform(authInfo);\n  }\n  async removeSession() {\n    const res = await fetch(await this.buildUrl(\"/logout\"), {\n      method: \"POST\",\n      headers: {\n        \"x-requested-with\": \"XMLHttpRequest\"\n      },\n      credentials: \"include\"\n    }).catch((error) => {\n      throw new Error(`Logout request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(`Logout request failed, ${res.statusText}`);\n      error.status = res.status;\n      throw error;\n    }\n  }\n  async showPopup(scopes) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    const scope = this.joinScopesFunc(scopes);\n    const popupUrl = await this.buildUrl(\"/start\", {\n      scope,\n      origin: window.location.origin,\n      flow: \"popup\"\n    });\n    const width = ((_b = (_a = this.popupOptions) == null ? void 0 : _a.size) == null ? void 0 : _b.fullscreen) ? window.screen.width : ((_d = (_c = this.popupOptions) == null ? void 0 : _c.size) == null ? void 0 : _d.width) || 450;\n    const height = ((_f = (_e = this.popupOptions) == null ? void 0 : _e.size) == null ? void 0 : _f.fullscreen) ? window.screen.height : ((_h = (_g = this.popupOptions) == null ? void 0 : _g.size) == null ? void 0 : _h.height) || 730;\n    const payload = await showLoginPopup({\n      url: popupUrl,\n      name: `${this.provider.title} Login`,\n      origin: new URL(popupUrl).origin,\n      width,\n      height\n    });\n    return await this.sessionTransform(payload);\n  }\n  async executeRedirect(scopes) {\n    const scope = this.joinScopesFunc(scopes);\n    window.location.href = await this.buildUrl(\"/start\", {\n      scope,\n      origin: window.location.origin,\n      redirectUrl: window.location.href,\n      flow: \"redirect\"\n    });\n    return new Promise(() => {\n    });\n  }\n  async buildUrl(path, query) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"auth\");\n    const queryString = this.buildQueryString({\n      ...query,\n      env: this.environment\n    });\n    return `${baseUrl}/${this.provider.id}${path}${queryString}`;\n  }\n  buildQueryString(query) {\n    if (!query) {\n      return \"\";\n    }\n    const queryString = Object.entries(query).map(([key, value]) => {\n      if (typeof value === \"string\") {\n        return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n      } else if (value) {\n        return encodeURIComponent(key);\n      }\n      return void 0;\n    }).filter(Boolean).join(\"&\");\n    if (!queryString) {\n      return \"\";\n    }\n    return `?${queryString}`;\n  }\n}\n\nvar __defProp$h = Object.defineProperty;\nvar __defNormalProp$h = (obj, key, value) => key in obj ? __defProp$h(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$h = (obj, key, value) => {\n  __defNormalProp$h(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass DirectAuthConnector {\n  constructor(options) {\n    __publicField$h(this, \"discoveryApi\");\n    __publicField$h(this, \"environment\");\n    __publicField$h(this, \"provider\");\n    const { discoveryApi, environment, provider } = options;\n    this.discoveryApi = discoveryApi;\n    this.environment = environment;\n    this.provider = provider;\n  }\n  async createSession() {\n    const popupUrl = await this.buildUrl(\"/start\");\n    const payload = await showLoginPopup({\n      url: popupUrl,\n      name: `${this.provider.title} Login`,\n      origin: new URL(popupUrl).origin,\n      width: 450,\n      height: 730\n    });\n    return {\n      ...payload,\n      id: payload.profile.email\n    };\n  }\n  async refreshSession() {\n  }\n  async removeSession() {\n    const res = await fetch(await this.buildUrl(\"/logout\"), {\n      method: \"POST\",\n      headers: {\n        \"x-requested-with\": \"XMLHttpRequest\"\n      },\n      credentials: \"include\"\n    }).catch((error) => {\n      throw new Error(`Logout request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(`Logout request failed, ${res.statusText}`);\n      error.status = res.status;\n      throw error;\n    }\n  }\n  async buildUrl(path) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"auth\");\n    return `${baseUrl}/${this.provider.id}${path}?env=${this.environment}`;\n  }\n}\n\nfunction hasScopes$1(searched, searchFor) {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\nclass SessionScopeHelper {\n  constructor(options) {\n    this.options = options;\n  }\n  sessionExistsAndHasScope(session, scopes) {\n    if (!session) {\n      return false;\n    }\n    if (!scopes) {\n      return true;\n    }\n    if (this.options.sessionScopes === void 0) {\n      return true;\n    }\n    const sessionScopes = this.options.sessionScopes(session);\n    return hasScopes$1(sessionScopes, scopes);\n  }\n  getExtendedScope(session, scopes) {\n    const newScope = new Set(this.options.defaultScopes);\n    if (session && this.options.sessionScopes !== void 0) {\n      const sessionScopes = this.options.sessionScopes(session);\n      for (const scope of sessionScopes) {\n        newScope.add(scope);\n      }\n    }\n    if (scopes) {\n      for (const scope of scopes) {\n        newScope.add(scope);\n      }\n    }\n    return newScope;\n  }\n}\n\nvar __defProp$g = Object.defineProperty;\nvar __defNormalProp$g = (obj, key, value) => key in obj ? __defProp$g(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$g = (obj, key, value) => {\n  __defNormalProp$g(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass PublishSubject {\n  constructor() {\n    __publicField$g(this, \"isClosed\", false);\n    __publicField$g(this, \"terminatingError\");\n    __publicField$g(this, \"observable\", new ObservableImpl((subscriber) => {\n      if (this.isClosed) {\n        if (this.terminatingError) {\n          subscriber.error(this.terminatingError);\n        } else {\n          subscriber.complete();\n        }\n        return () => {\n        };\n      }\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    }));\n    __publicField$g(this, \"subscribers\", /* @__PURE__ */ new Set());\n  }\n  [Symbol.observable]() {\n    return this;\n  }\n  get closed() {\n    return this.isClosed;\n  }\n  next(value) {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.subscribers.forEach((subscriber) => subscriber.next(value));\n  }\n  error(error) {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach((subscriber) => subscriber.error(error));\n  }\n  complete() {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.isClosed = true;\n    this.subscribers.forEach((subscriber) => subscriber.complete());\n  }\n  subscribe(onNext, onError, onComplete) {\n    const observer = typeof onNext === \"function\" ? {\n      next: onNext,\n      error: onError,\n      complete: onComplete\n    } : onNext;\n    return this.observable.subscribe(observer);\n  }\n}\nclass BehaviorSubject {\n  constructor(value) {\n    __publicField$g(this, \"isClosed\");\n    __publicField$g(this, \"currentValue\");\n    __publicField$g(this, \"terminatingError\");\n    __publicField$g(this, \"observable\");\n    __publicField$g(this, \"subscribers\", /* @__PURE__ */ new Set());\n    this.isClosed = false;\n    this.currentValue = value;\n    this.terminatingError = void 0;\n    this.observable = new ObservableImpl((subscriber) => {\n      if (this.isClosed) {\n        if (this.terminatingError) {\n          subscriber.error(this.terminatingError);\n        } else {\n          subscriber.complete();\n        }\n        return () => {\n        };\n      }\n      subscriber.next(this.currentValue);\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n  }\n  [Symbol.observable]() {\n    return this;\n  }\n  get closed() {\n    return this.isClosed;\n  }\n  next(value) {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.currentValue = value;\n    this.subscribers.forEach((subscriber) => subscriber.next(value));\n  }\n  error(error) {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach((subscriber) => subscriber.error(error));\n  }\n  complete() {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.isClosed = true;\n    this.subscribers.forEach((subscriber) => subscriber.complete());\n  }\n  subscribe(onNext, onError, onComplete) {\n    const observer = typeof onNext === \"function\" ? {\n      next: onNext,\n      error: onError,\n      complete: onComplete\n    } : onNext;\n    return this.observable.subscribe(observer);\n  }\n}\n\nvar __defProp$f = Object.defineProperty;\nvar __defNormalProp$f = (obj, key, value) => key in obj ? __defProp$f(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$f = (obj, key, value) => {\n  __defNormalProp$f(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass SessionStateTracker {\n  constructor() {\n    __publicField$f(this, \"subject\", new BehaviorSubject(\n      SessionState.SignedOut\n    ));\n    __publicField$f(this, \"signedIn\", false);\n  }\n  setIsSignedIn(isSignedIn) {\n    if (this.signedIn !== isSignedIn) {\n      this.signedIn = isSignedIn;\n      this.subject.next(\n        this.signedIn ? SessionState.SignedIn : SessionState.SignedOut\n      );\n    }\n  }\n  sessionState$() {\n    return this.subject;\n  }\n}\n\nvar __defProp$e = Object.defineProperty;\nvar __defNormalProp$e = (obj, key, value) => key in obj ? __defProp$e(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$e = (obj, key, value) => {\n  __defNormalProp$e(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass RefreshingAuthSessionManager {\n  constructor(options) {\n    __publicField$e(this, \"connector\");\n    __publicField$e(this, \"helper\");\n    __publicField$e(this, \"sessionScopesFunc\");\n    __publicField$e(this, \"sessionShouldRefreshFunc\");\n    __publicField$e(this, \"stateTracker\", new SessionStateTracker());\n    __publicField$e(this, \"refreshPromise\");\n    __publicField$e(this, \"currentSession\");\n    const {\n      connector,\n      defaultScopes = /* @__PURE__ */ new Set(),\n      sessionScopes,\n      sessionShouldRefresh\n    } = options;\n    this.connector = connector;\n    this.sessionScopesFunc = sessionScopes;\n    this.sessionShouldRefreshFunc = sessionShouldRefresh;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n  async getSession(options) {\n    if (this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)) {\n      const shouldRefresh = this.sessionShouldRefreshFunc(this.currentSession);\n      if (!shouldRefresh) {\n        return this.currentSession;\n      }\n      try {\n        const refreshedSession = await this.collapsedSessionRefresh(\n          options.scopes\n        );\n        const currentScopes = this.sessionScopesFunc(this.currentSession);\n        const refreshedScopes = this.sessionScopesFunc(refreshedSession);\n        if (hasScopes$1(refreshedScopes, currentScopes)) {\n          this.currentSession = refreshedSession;\n        }\n        return refreshedSession;\n      } catch (error) {\n        if (options.optional) {\n          return void 0;\n        }\n        throw error;\n      }\n    }\n    if (!this.currentSession && !options.instantPopup) {\n      try {\n        const newSession = await this.collapsedSessionRefresh(options.scopes);\n        this.currentSession = newSession;\n        return this.getSession(options);\n      } catch {\n      }\n    }\n    if (options.optional) {\n      return void 0;\n    }\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes)\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n  async removeSession() {\n    this.currentSession = void 0;\n    await this.connector.removeSession();\n    this.stateTracker.setIsSignedIn(false);\n  }\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n  async collapsedSessionRefresh(scopes) {\n    if (this.refreshPromise) {\n      return this.refreshPromise;\n    }\n    this.refreshPromise = this.connector.refreshSession(\n      this.helper.getExtendedScope(this.currentSession, scopes)\n    );\n    try {\n      const session = await this.refreshPromise;\n      this.stateTracker.setIsSignedIn(true);\n      return session;\n    } finally {\n      delete this.refreshPromise;\n    }\n  }\n}\n\nvar __defProp$d = Object.defineProperty;\nvar __defNormalProp$d = (obj, key, value) => key in obj ? __defProp$d(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$d = (obj, key, value) => {\n  __defNormalProp$d(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass StaticAuthSessionManager {\n  constructor(options) {\n    __publicField$d(this, \"connector\");\n    __publicField$d(this, \"helper\");\n    __publicField$d(this, \"stateTracker\", new SessionStateTracker());\n    __publicField$d(this, \"currentSession\");\n    const { connector, defaultScopes = /* @__PURE__ */ new Set(), sessionScopes } = options;\n    this.connector = connector;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n  setSession(session) {\n    this.currentSession = session;\n    this.stateTracker.setIsSignedIn(Boolean(session));\n  }\n  async getSession(options) {\n    if (this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)) {\n      return this.currentSession;\n    }\n    if (options.optional) {\n      return void 0;\n    }\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes)\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n  /**\n   * We don't call this.connector.removeSession here, since this session manager\n   * is intended to be static. As such there's no need to hit the remote logout\n   * endpoint - simply discarding the local session state when signing out is\n   * enough.\n   */\n  async removeSession() {\n    this.currentSession = void 0;\n    this.stateTracker.setIsSignedIn(false);\n  }\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n}\n\nvar __defProp$c = Object.defineProperty;\nvar __defNormalProp$c = (obj, key, value) => key in obj ? __defProp$c(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$c = (obj, key, value) => {\n  __defNormalProp$c(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass AuthSessionStore {\n  constructor(options) {\n    __publicField$c(this, \"manager\");\n    __publicField$c(this, \"storageKey\");\n    __publicField$c(this, \"schema\");\n    __publicField$c(this, \"sessionShouldRefreshFunc\");\n    __publicField$c(this, \"helper\");\n    const {\n      manager,\n      storageKey,\n      schema,\n      sessionScopes,\n      sessionShouldRefresh = () => false\n    } = options;\n    this.manager = manager;\n    this.storageKey = storageKey;\n    this.schema = schema;\n    this.sessionShouldRefreshFunc = sessionShouldRefresh;\n    this.helper = new SessionScopeHelper({\n      sessionScopes,\n      defaultScopes: /* @__PURE__ */ new Set()\n    });\n  }\n  setSession(session) {\n    this.manager.setSession(session);\n    this.saveSession(session);\n  }\n  async getSession(options) {\n    const { scopes } = options;\n    const session = this.loadSession();\n    if (this.helper.sessionExistsAndHasScope(session, scopes)) {\n      const shouldRefresh = this.sessionShouldRefreshFunc(session);\n      if (!shouldRefresh) {\n        this.manager.setSession(session);\n        return session;\n      }\n    }\n    const newSession = await this.manager.getSession(options);\n    this.saveSession(newSession);\n    return newSession;\n  }\n  async removeSession() {\n    localStorage.removeItem(this.storageKey);\n    await this.manager.removeSession();\n  }\n  sessionState$() {\n    return this.manager.sessionState$();\n  }\n  loadSession() {\n    try {\n      const sessionJson = localStorage.getItem(this.storageKey);\n      if (sessionJson) {\n        const session = JSON.parse(sessionJson, (_key, value) => {\n          if ((value == null ? void 0 : value.__type) === \"Set\") {\n            return new Set(value.__value);\n          }\n          return value;\n        });\n        try {\n          return this.schema.parse(session);\n        } catch (e) {\n          console.log(\n            `Failed to load session from local storage because it did not conform to the expected schema, ${e}`\n          );\n          throw e;\n        }\n      }\n      return void 0;\n    } catch (error) {\n      localStorage.removeItem(this.storageKey);\n      return void 0;\n    }\n  }\n  saveSession(session) {\n    if (session === void 0) {\n      localStorage.removeItem(this.storageKey);\n      return;\n    }\n    try {\n      this.schema.parse(session);\n    } catch (e) {\n      console.warn(\n        `Failed to save session to local storage because it did not conform to the expected schema, ${e}`\n      );\n      return;\n    }\n    localStorage.setItem(\n      this.storageKey,\n      JSON.stringify(session, (_key, value) => {\n        if (value instanceof Set) {\n          return {\n            __type: \"Set\",\n            __value: Array.from(value)\n          };\n        }\n        return value;\n      })\n    );\n  }\n}\n\nvar __defProp$b = Object.defineProperty;\nvar __defNormalProp$b = (obj, key, value) => key in obj ? __defProp$b(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$b = (obj, key, value) => {\n  __defNormalProp$b(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst DEFAULT_PROVIDER$b = {\n  id: \"oauth2\",\n  title: \"Your Identity Provider\",\n  icon: () => null\n};\nclass OAuth2 {\n  constructor(options) {\n    __publicField$b(this, \"sessionManager\");\n    __publicField$b(this, \"scopeTransform\");\n    this.sessionManager = options.sessionManager;\n    this.scopeTransform = options.scopeTransform;\n  }\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$b,\n      oauthRequestApi,\n      defaultScopes = [],\n      scopeTransform = (x) => x,\n      popupOptions\n    } = options;\n    const connector = new DefaultAuthConnector({\n      configApi,\n      discoveryApi,\n      environment,\n      provider,\n      oauthRequestApi,\n      sessionTransform({\n        backstageIdentity,\n        ...res\n      }) {\n        var _a;\n        const session = {\n          ...res,\n          providerInfo: {\n            idToken: res.providerInfo.idToken,\n            accessToken: res.providerInfo.accessToken,\n            scopes: OAuth2.normalizeScopes(\n              scopeTransform,\n              res.providerInfo.scope\n            ),\n            expiresAt: res.providerInfo.expiresInSeconds ? new Date(Date.now() + res.providerInfo.expiresInSeconds * 1e3) : void 0\n          }\n        };\n        if (backstageIdentity) {\n          const expInSec = (_a = backstageIdentity.expiresInSeconds) != null ? _a : res.providerInfo.expiresInSeconds;\n          session.backstageIdentity = {\n            token: backstageIdentity.token,\n            identity: backstageIdentity.identity,\n            expiresAt: expInSec ? new Date(Date.now() + expInSec * 1e3) : void 0\n          };\n        }\n        return session;\n      },\n      popupOptions\n    });\n    const sessionManager = new RefreshingAuthSessionManager({\n      connector,\n      defaultScopes: new Set(defaultScopes),\n      sessionScopes: (session) => session.providerInfo.scopes,\n      sessionShouldRefresh: (session) => {\n        var _a, _b;\n        let min = Infinity;\n        if ((_a = session.providerInfo) == null ? void 0 : _a.expiresAt) {\n          min = Math.min(\n            min,\n            (session.providerInfo.expiresAt.getTime() - Date.now()) / 1e3\n          );\n        }\n        if ((_b = session.backstageIdentity) == null ? void 0 : _b.expiresAt) {\n          min = Math.min(\n            min,\n            (session.backstageIdentity.expiresAt.getTime() - Date.now()) / 1e3\n          );\n        }\n        return min < 60 * 5;\n      }\n    });\n    return new OAuth2({ sessionManager, scopeTransform });\n  }\n  async signIn() {\n    await this.getAccessToken();\n  }\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n  sessionState$() {\n    return this.sessionManager.sessionState$();\n  }\n  async getAccessToken(scope, options) {\n    var _a;\n    const normalizedScopes = OAuth2.normalizeScopes(this.scopeTransform, scope);\n    const session = await this.sessionManager.getSession({\n      ...options,\n      scopes: normalizedScopes\n    });\n    return (_a = session == null ? void 0 : session.providerInfo.accessToken) != null ? _a : \"\";\n  }\n  async getIdToken(options = {}) {\n    var _a;\n    const session = await this.sessionManager.getSession({\n      ...options,\n      scopes: /* @__PURE__ */ new Set([\"openid\"])\n    });\n    return (_a = session == null ? void 0 : session.providerInfo.idToken) != null ? _a : \"\";\n  }\n  async getBackstageIdentity(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.backstageIdentity;\n  }\n  async getProfile(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.profile;\n  }\n  static normalizeScopes(scopeTransform, scopes) {\n    if (!scopes) {\n      return /* @__PURE__ */ new Set();\n    }\n    const scopeList = Array.isArray(scopes) ? scopes : scopes.split(/[\\s|,]/).filter(Boolean);\n    return new Set(scopeTransform(scopeList));\n  }\n}\n\nconst DEFAULT_PROVIDER$a = {\n  id: \"github\",\n  title: \"GitHub\",\n  icon: () => null\n};\nclass GithubAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$a,\n      oauthRequestApi,\n      defaultScopes = [\"read:user\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$9 = {\n  id: \"gitlab\",\n  title: \"GitLab\",\n  icon: () => null\n};\nclass GitlabAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$9,\n      oauthRequestApi,\n      defaultScopes = [\"read_user\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$8 = {\n  id: \"google\",\n  title: \"Google\",\n  icon: () => null\n};\nconst SCOPE_PREFIX$1 = \"https://www.googleapis.com/auth/\";\nclass GoogleAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$8,\n      defaultScopes = [\n        \"openid\",\n        `${SCOPE_PREFIX$1}userinfo.email`,\n        `${SCOPE_PREFIX$1}userinfo.profile`\n      ]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (scope === \"openid\") {\n            return scope;\n          }\n          if (scope === \"profile\" || scope === \"email\") {\n            return `${SCOPE_PREFIX$1}userinfo.${scope}`;\n          }\n          if (scope.startsWith(SCOPE_PREFIX$1)) {\n            return scope;\n          }\n          return `${SCOPE_PREFIX$1}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$7 = {\n  id: \"okta\",\n  title: \"Okta\",\n  icon: () => null\n};\nconst OKTA_OIDC_SCOPES = /* @__PURE__ */ new Set([\n  \"openid\",\n  \"profile\",\n  \"email\",\n  \"phone\",\n  \"address\",\n  \"groups\",\n  \"offline_access\"\n]);\nconst OKTA_SCOPE_PREFIX = \"okta.\";\nclass OktaAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$7,\n      oauthRequestApi,\n      defaultScopes = [\"openid\", \"email\", \"profile\", \"offline_access\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (OKTA_OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n          if (scope.startsWith(OKTA_SCOPE_PREFIX)) {\n            return scope;\n          }\n          return `${OKTA_SCOPE_PREFIX}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst samlSessionSchema = z.object({\n  profile: z.object({\n    email: z.string().optional(),\n    displayName: z.string().optional(),\n    picture: z.string().optional()\n  }),\n  backstageIdentity: z.object({\n    token: z.string(),\n    identity: z.object({\n      type: z.literal(\"user\"),\n      userEntityRef: z.string(),\n      ownershipEntityRefs: z.array(z.string())\n    })\n  })\n});\n\nconst DEFAULT_PROVIDER$6 = {\n  id: \"saml\",\n  title: \"SAML\",\n  icon: () => null\n};\nclass SamlAuth {\n  constructor(sessionManager) {\n    this.sessionManager = sessionManager;\n  }\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$6\n    } = options;\n    const connector = new DirectAuthConnector({\n      discoveryApi,\n      environment,\n      provider\n    });\n    const sessionManager = new StaticAuthSessionManager({\n      connector\n    });\n    const authSessionStore = new AuthSessionStore({\n      manager: sessionManager,\n      storageKey: `${provider.id}Session`,\n      schema: samlSessionSchema\n    });\n    return new SamlAuth(authSessionStore);\n  }\n  sessionState$() {\n    return this.sessionManager.sessionState$();\n  }\n  async signIn() {\n    await this.getBackstageIdentity({});\n  }\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n  async getBackstageIdentity(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.backstageIdentity;\n  }\n  async getProfile(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.profile;\n  }\n}\n\nvar __defProp$a = Object.defineProperty;\nvar __defNormalProp$a = (obj, key, value) => key in obj ? __defProp$a(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$a = (obj, key, value) => {\n  __defNormalProp$a(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst DEFAULT_PROVIDER$5 = {\n  id: \"microsoft\",\n  title: \"Microsoft\",\n  icon: () => null\n};\nconst _MicrosoftAuth = class _MicrosoftAuth {\n  constructor(options) {\n    __publicField$a(this, \"oauth2\");\n    __publicField$a(this, \"configApi\");\n    __publicField$a(this, \"environment\");\n    __publicField$a(this, \"provider\");\n    __publicField$a(this, \"oauthRequestApi\");\n    __publicField$a(this, \"discoveryApi\");\n    __publicField$a(this, \"scopeTransform\");\n    const {\n      configApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$5,\n      oauthRequestApi,\n      discoveryApi,\n      defaultScopes = [\n        \"openid\",\n        \"offline_access\",\n        \"profile\",\n        \"email\",\n        \"User.Read\"\n      ],\n      scopeTransform = (scopes) => scopes.concat(\"offline_access\")\n    } = options;\n    this.configApi = configApi;\n    this.environment = environment;\n    this.provider = provider;\n    this.oauthRequestApi = oauthRequestApi;\n    this.discoveryApi = discoveryApi;\n    this.scopeTransform = scopeTransform;\n    this.oauth2 = {\n      [_MicrosoftAuth.MicrosoftGraphID]: OAuth2.create({\n        configApi: this.configApi,\n        discoveryApi: this.discoveryApi,\n        oauthRequestApi: this.oauthRequestApi,\n        provider: this.provider,\n        environment: this.environment,\n        scopeTransform: this.scopeTransform,\n        defaultScopes\n      })\n    };\n  }\n  static create(options) {\n    return new _MicrosoftAuth(options);\n  }\n  microsoftGraph() {\n    return this.oauth2[_MicrosoftAuth.MicrosoftGraphID];\n  }\n  static resourceForScopes(scope) {\n    var _a;\n    const audiences = [\n      ...new Set(\n        scope.split(\" \").map(_MicrosoftAuth.resourceForScope).filter((aud) => aud !== \"openid\")\n      )\n    ];\n    if (audiences.length > 1) {\n      return Promise.reject(\n        new Error(\n          `Requested access token with scopes from multiple Azure resources: ${audiences.join(\n            \", \"\n          )}. Access tokens can only have a single audience.`\n        )\n      );\n    }\n    const audience = (_a = audiences[0]) != null ? _a : _MicrosoftAuth.MicrosoftGraphID;\n    return Promise.resolve(audience);\n  }\n  static resourceForScope(scope) {\n    var _a;\n    const groups = (_a = scope.match(/^(?<resourceURI>.*)\\/(?<scp>[^\\/]*)$/)) == null ? void 0 : _a.groups;\n    if (groups) {\n      const { resourceURI } = groups;\n      const aud = resourceURI.replace(/^api:\\/\\//, \"\");\n      return aud;\n    }\n    switch (scope) {\n      case \"email\":\n      case \"openid\":\n      case \"offline_access\":\n      case \"profile\": {\n        return \"openid\";\n      }\n      default:\n        return _MicrosoftAuth.MicrosoftGraphID;\n    }\n  }\n  async getAccessToken(scope, options) {\n    const aud = scope === void 0 ? _MicrosoftAuth.MicrosoftGraphID : await _MicrosoftAuth.resourceForScopes(\n      Array.isArray(scope) ? scope.join(\" \") : scope\n    );\n    if (!(aud in this.oauth2)) {\n      this.oauth2[aud] = OAuth2.create({\n        configApi: this.configApi,\n        discoveryApi: this.discoveryApi,\n        oauthRequestApi: this.oauthRequestApi,\n        provider: this.provider,\n        environment: this.environment,\n        scopeTransform: this.scopeTransform\n      });\n    }\n    return this.oauth2[aud].getAccessToken(scope, options);\n  }\n  getIdToken(options) {\n    return this.microsoftGraph().getIdToken(options);\n  }\n  getProfile(options) {\n    return this.microsoftGraph().getProfile(options);\n  }\n  getBackstageIdentity(options) {\n    return this.microsoftGraph().getBackstageIdentity(options);\n  }\n  signIn() {\n    return this.microsoftGraph().signIn();\n  }\n  signOut() {\n    return this.microsoftGraph().signOut();\n  }\n  sessionState$() {\n    return this.microsoftGraph().sessionState$();\n  }\n};\n__publicField$a(_MicrosoftAuth, \"MicrosoftGraphID\", \"00000003-0000-0000-c000-000000000000\");\nlet MicrosoftAuth = _MicrosoftAuth;\n\nconst DEFAULT_PROVIDER$4 = {\n  id: \"onelogin\",\n  title: \"onelogin\",\n  icon: () => null\n};\nconst OIDC_SCOPES = /* @__PURE__ */ new Set([\n  \"openid\",\n  \"profile\",\n  \"email\",\n  \"phone\",\n  \"address\",\n  \"groups\",\n  \"offline_access\"\n]);\nconst SCOPE_PREFIX = \"onelogin.\";\nclass OneLoginAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$4,\n      oauthRequestApi\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n          if (scope.startsWith(SCOPE_PREFIX)) {\n            return scope;\n          }\n          return `${SCOPE_PREFIX}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$3 = {\n  id: \"bitbucket\",\n  title: \"Bitbucket\",\n  icon: () => null\n};\nclass BitbucketAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$3,\n      oauthRequestApi,\n      defaultScopes = [\"account\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$2 = {\n  id: \"bitbucketServer\",\n  title: \"Bitbucket Server\",\n  icon: () => null\n};\nclass BitbucketServerAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$2,\n      oauthRequestApi,\n      defaultScopes = [\"PROJECT_ADMIN\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$1 = {\n  id: \"atlassian\",\n  title: \"Atlassian\",\n  icon: () => null\n};\nclass AtlassianAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$1,\n      oauthRequestApi\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER = {\n  id: \"vmwareCloudServices\",\n  title: \"VMware Cloud\",\n  icon: () => null\n};\nclass VMwareCloudAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER,\n      defaultScopes = [\"openid\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nvar __defProp$9 = Object.defineProperty;\nvar __defNormalProp$9 = (obj, key, value) => key in obj ? __defProp$9(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$9 = (obj, key, value) => {\n  __defNormalProp$9(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass AlertApiForwarder {\n  constructor() {\n    __publicField$9(this, \"subject\", new PublishSubject());\n  }\n  post(alert) {\n    this.subject.next(alert);\n  }\n  alert$() {\n    return this.subject;\n  }\n}\n\nclass MultipleAnalyticsApi {\n  constructor(actualApis) {\n    this.actualApis = actualApis;\n  }\n  /**\n   * Create an AnalyticsApi implementation from an array of concrete\n   * implementations.\n   *\n   * @example\n   *\n   * ```jsx\n   * MultipleAnalyticsApi.fromApis([\n   *   SomeAnalyticsApi.fromConfig(configApi),\n   *   new CustomAnalyticsApi(),\n   * ]);\n   * ```\n   */\n  static fromApis(actualApis) {\n    return new MultipleAnalyticsApi(actualApis);\n  }\n  /**\n   * Forward the event to all configured analytics API implementations.\n   */\n  captureEvent(event) {\n    this.actualApis.forEach((analyticsApi) => {\n      try {\n        analyticsApi.captureEvent(event);\n      } catch {\n      }\n    });\n  }\n}\n\nclass NoOpAnalyticsApi {\n  captureEvent(_event) {\n  }\n}\n\nvar __defProp$8 = Object.defineProperty;\nvar __defNormalProp$8 = (obj, key, value) => key in obj ? __defProp$8(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$8 = (obj, key, value) => {\n  __defNormalProp$8(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst STORAGE_KEY$1 = \"theme\";\nclass AppThemeSelector {\n  constructor(themes) {\n    this.themes = themes;\n    __publicField$8(this, \"activeThemeId\");\n    __publicField$8(this, \"subject\", new BehaviorSubject(void 0));\n  }\n  static createWithStorage(themes) {\n    var _a;\n    const selector = new AppThemeSelector(themes);\n    if (!window.localStorage) {\n      return selector;\n    }\n    const initialThemeId = (_a = window.localStorage.getItem(STORAGE_KEY$1)) != null ? _a : void 0;\n    selector.setActiveThemeId(initialThemeId);\n    selector.activeThemeId$().subscribe((themeId) => {\n      if (themeId) {\n        window.localStorage.setItem(STORAGE_KEY$1, themeId);\n      } else {\n        window.localStorage.removeItem(STORAGE_KEY$1);\n      }\n    });\n    window.addEventListener(\"storage\", (event) => {\n      var _a2;\n      if (event.key === STORAGE_KEY$1) {\n        const themeId = (_a2 = localStorage.getItem(STORAGE_KEY$1)) != null ? _a2 : void 0;\n        selector.setActiveThemeId(themeId);\n      }\n    });\n    return selector;\n  }\n  getInstalledThemes() {\n    return this.themes.slice();\n  }\n  activeThemeId$() {\n    return this.subject;\n  }\n  getActiveThemeId() {\n    return this.activeThemeId;\n  }\n  setActiveThemeId(themeId) {\n    this.activeThemeId = themeId;\n    this.subject.next(themeId);\n  }\n}\n\nconst ERROR_PREFIX = \"Invalid discovery URL pattern,\";\nclass UrlPatternDiscovery {\n  constructor(parts) {\n    this.parts = parts;\n  }\n  /**\n   * Creates a new UrlPatternDiscovery given a template. The the only\n   * interpolation done for the template is to replace instances of `{{pluginId}}`\n   * with the ID of the plugin being requested.\n   *\n   * Example pattern: `http://localhost:7007/api/{{ pluginId }}`\n   */\n  static compile(pattern) {\n    const parts = pattern.split(/\\{\\{\\s*pluginId\\s*\\}\\}/);\n    const urlStr = parts.join(\"pluginId\");\n    let url;\n    try {\n      url = new URL(urlStr);\n    } catch {\n      throw new Error(`${ERROR_PREFIX} URL '${urlStr}' is invalid`);\n    }\n    if (url.hash) {\n      throw new Error(`${ERROR_PREFIX} URL must not have a hash`);\n    }\n    if (url.search) {\n      throw new Error(`${ERROR_PREFIX} URL must not have a query`);\n    }\n    if (urlStr.endsWith(\"/\")) {\n      throw new Error(`${ERROR_PREFIX} URL must not end with a slash`);\n    }\n    return new UrlPatternDiscovery(parts);\n  }\n  async getBaseUrl(pluginId) {\n    return this.parts.join(encodeURIComponent(pluginId));\n  }\n}\n\nclass FrontendHostDiscovery {\n  constructor(endpoints, defaultEndpoint) {\n    this.endpoints = endpoints;\n    this.defaultEndpoint = defaultEndpoint;\n  }\n  /**\n   * Creates a new FrontendHostDiscovery discovery instance by reading\n   * the external target URL from the `discovery.endpoints` config section.\n   *\n   * eg.\n   * ```yaml\n   * discovery:\n   *  endpoints:\n   *    - target: https://internal.example.com/internal-catalog\n   *      plugins: [catalog]\n   *    - target: https://internal.example.com/secure/api/{{pluginId}}\n   *      plugins: [auth, permissions]\n   *    - target:\n   *        internal: https://internal.example.com/search\n   *        external: https://example.com/search\n   *      plugins: [search]\n   * ```\n   *\n   * If a plugin is not declared in the config, the discovery will fall back to using the baseUrl with\n   * the provided `pathPattern` appended. The default path pattern is `\"/api/{{ pluginId }}\"`.\n   */\n  static fromConfig(config, options) {\n    var _a, _b;\n    const path = (_a = options == null ? void 0 : options.pathPattern) != null ? _a : \"/api/{{ pluginId }}\";\n    const baseUrl = config.getString(\"backend.baseUrl\");\n    const endpoints = (_b = config.getOptionalConfigArray(\"discovery.endpoints\")) == null ? void 0 : _b.flatMap((e) => {\n      const target = typeof e.get(\"target\") === \"object\" ? e.getString(\"target.external\") : e.getString(\"target\");\n      const discovery = UrlPatternDiscovery.compile(target);\n      return e.getStringArray(\"plugins\").map((pluginId) => [pluginId, discovery]);\n    });\n    return new FrontendHostDiscovery(\n      new Map(endpoints),\n      UrlPatternDiscovery.compile(`${baseUrl}${path}`)\n    );\n  }\n  async getBaseUrl(pluginId) {\n    const endpoint = this.endpoints.get(pluginId);\n    if (endpoint) {\n      return endpoint.getBaseUrl(pluginId);\n    }\n    return this.defaultEndpoint.getBaseUrl(pluginId);\n  }\n}\n\nclass ErrorAlerter {\n  constructor(alertApi, errorApi) {\n    this.alertApi = alertApi;\n    this.errorApi = errorApi;\n  }\n  post(error, context) {\n    if (!(context == null ? void 0 : context.hidden)) {\n      this.alertApi.post({ message: error.message, severity: \"error\" });\n    }\n    return this.errorApi.post(error, context);\n  }\n  error$() {\n    return this.errorApi.error$();\n  }\n}\n\nvar __defProp$7 = Object.defineProperty;\nvar __defNormalProp$7 = (obj, key, value) => key in obj ? __defProp$7(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$7 = (obj, key, value) => {\n  __defNormalProp$7(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ErrorApiForwarder {\n  constructor() {\n    __publicField$7(this, \"subject\", new PublishSubject());\n  }\n  post(error, context) {\n    this.subject.next({ error, context });\n  }\n  error$() {\n    return this.subject;\n  }\n}\n\nclass UnhandledErrorForwarder {\n  /**\n   * Add event listener, such that unhandled errors can be forwarded using an given `ErrorApi` instance\n   */\n  static forward(errorApi, errorContext) {\n    window.addEventListener(\n      \"unhandledrejection\",\n      (e) => {\n        errorApi.post(e.reason, errorContext);\n      }\n    );\n  }\n}\n\nvar __defProp$6 = Object.defineProperty;\nvar __defNormalProp$6 = (obj, key, value) => key in obj ? __defProp$6(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$6 = (obj, key, value) => {\n  __defNormalProp$6(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nfunction validateFlagName(name) {\n  if (name.length < 3) {\n    throw new Error(\n      `The '${name}' feature flag must have a minimum length of three characters.`\n    );\n  }\n  if (name.length > 150) {\n    throw new Error(\n      `The '${name}' feature flag must not exceed 150 characters.`\n    );\n  }\n  if (!name.match(/^[a-z]+[a-z0-9-]+$/)) {\n    throw new Error(\n      `The '${name}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`\n    );\n  }\n}\nclass LocalStorageFeatureFlags {\n  constructor() {\n    __publicField$6(this, \"registeredFeatureFlags\", []);\n    __publicField$6(this, \"flags\");\n  }\n  registerFlag(flag) {\n    validateFlagName(flag.name);\n    this.registeredFeatureFlags.push(flag);\n  }\n  getRegisteredFlags() {\n    return this.registeredFeatureFlags.slice();\n  }\n  isActive(name) {\n    if (!this.flags) {\n      this.flags = this.load();\n    }\n    return this.flags.get(name) === FeatureFlagState.Active;\n  }\n  save(options) {\n    if (!this.flags) {\n      this.flags = this.load();\n    }\n    if (!options.merge) {\n      this.flags.clear();\n    }\n    for (const [name, state] of Object.entries(options.states)) {\n      this.flags.set(name, state);\n    }\n    const enabled = Array.from(this.flags.entries()).filter(\n      ([, state]) => state === FeatureFlagState.Active\n    );\n    window.localStorage.setItem(\n      \"featureFlags\",\n      JSON.stringify(Object.fromEntries(enabled))\n    );\n  }\n  load() {\n    try {\n      const jsonStr = window.localStorage.getItem(\"featureFlags\");\n      if (!jsonStr) {\n        return /* @__PURE__ */ new Map();\n      }\n      const json = JSON.parse(jsonStr);\n      if (typeof json !== \"object\" || json === null || Array.isArray(json)) {\n        return /* @__PURE__ */ new Map();\n      }\n      const entries = Object.entries(json).filter(([name, value]) => {\n        validateFlagName(name);\n        return value === FeatureFlagState.Active;\n      });\n      return new Map(entries);\n    } catch {\n      return /* @__PURE__ */ new Map();\n    }\n  }\n}\n\nfunction createFetchApi(options) {\n  var _a;\n  let result = options.baseImplementation || global.fetch;\n  const middleware = [(_a = options.middleware) != null ? _a : []].flat().reverse();\n  for (const m of middleware) {\n    result = m.apply(result);\n  }\n  return {\n    fetch: result\n  };\n}\n\nclass IdentityAuthInjectorFetchMiddleware {\n  constructor(identityApi, allowUrl, headerName, headerValue) {\n    this.identityApi = identityApi;\n    this.allowUrl = allowUrl;\n    this.headerName = headerName;\n    this.headerValue = headerValue;\n  }\n  static create(options) {\n    var _a, _b;\n    const matcher = buildMatcher(options);\n    const headerName = ((_a = options.header) == null ? void 0 : _a.name) || \"authorization\";\n    const headerValue = ((_b = options.header) == null ? void 0 : _b.value) || ((token) => `Bearer ${token}`);\n    return new IdentityAuthInjectorFetchMiddleware(\n      options.identityApi,\n      matcher,\n      headerName,\n      headerValue\n    );\n  }\n  apply(next) {\n    return async (input, init) => {\n      const request = new Request(input, init);\n      const { token } = await this.identityApi.getCredentials();\n      if (request.headers.get(this.headerName) || typeof token !== \"string\" || !token || !this.allowUrl(request.url)) {\n        return next(input, init);\n      }\n      request.headers.set(this.headerName, this.headerValue(token));\n      return next(request);\n    };\n  }\n}\nfunction buildMatcher(options) {\n  if (options.allowUrl) {\n    return options.allowUrl;\n  } else if (options.urlPrefixAllowlist) {\n    return buildPrefixMatcher(options.urlPrefixAllowlist);\n  } else if (options.config) {\n    return buildPrefixMatcher([options.config.getString(\"backend.baseUrl\")]);\n  }\n  return () => false;\n}\nfunction buildPrefixMatcher(prefixes) {\n  const trimmedPrefixes = prefixes.map((prefix) => prefix.replace(/\\/$/, \"\"));\n  return (url) => trimmedPrefixes.some(\n    (prefix) => url === prefix || url.startsWith(`${prefix}/`)\n  );\n}\n\nfunction join(left, right) {\n  if (!right || right === \"/\") {\n    return left;\n  }\n  return `${left.replace(/\\/$/, \"\")}/${right.replace(/^\\//, \"\")}`;\n}\nclass PluginProtocolResolverFetchMiddleware {\n  constructor(discoveryApi) {\n    this.discoveryApi = discoveryApi;\n  }\n  apply(next) {\n    return async (input, init) => {\n      const request = new Request(input, init);\n      const prefix = \"plugin://\";\n      if (!request.url.startsWith(prefix)) {\n        return next(input, init);\n      }\n      const { hostname, pathname, search, hash, username, password } = new URL(\n        `http://${request.url.substring(prefix.length)}`\n      );\n      let base = await this.discoveryApi.getBaseUrl(hostname);\n      if (username || password) {\n        const baseUrl = new URL(base);\n        const authority = `${username}${password ? `:${password}` : \"\"}@`;\n        base = `${baseUrl.protocol}//${authority}${baseUrl.host}${baseUrl.pathname}`;\n      }\n      const target = `${join(base, pathname)}${search}${hash}`;\n      return next(\n        target,\n        typeof input === \"string\" || isUrl(input) ? init : input\n      );\n    };\n  }\n}\nfunction isUrl(a) {\n  return typeof a === \"object\" && (a == null ? void 0 : a.constructor) === URL;\n}\n\nclass FetchMiddlewares {\n  /**\n   * Handles translation from `plugin://` URLs to concrete http(s) URLs based on\n   * the discovery API.\n   *\n   * @remarks\n   *\n   * If the request is for `plugin://catalog/entities?filter=x=y`, the discovery\n   * API will be queried for `'catalog'`. If it returned\n   * `https://backstage.example.net/api/catalog`, the resulting query would be\n   * `https://backstage.example.net/api/catalog/entities?filter=x=y`.\n   *\n   * If the incoming URL protocol was not `plugin`, the request is just passed\n   * through verbatim to the underlying implementation.\n   */\n  static resolvePluginProtocol(options) {\n    return new PluginProtocolResolverFetchMiddleware(options.discoveryApi);\n  }\n  /**\n   * Injects a Backstage token header when the user is signed in.\n   *\n   * @remarks\n   *\n   * Per default, an `Authorization: Bearer <token>` is generated. This can be\n   * customized using the `header` option.\n   *\n   * The header injection only happens on allowlisted URLs. Per default, if the\n   * `config` option is passed in, the `backend.baseUrl` is allowlisted, unless\n   * the `urlPrefixAllowlist` or `allowUrl` options are passed in, in which case\n   * they take precedence. If you pass in neither config nor an\n   * allowlist/callback, the middleware will have no effect since effectively no\n   * request will match the (nonexistent) rules.\n   */\n  static injectIdentityAuth(options) {\n    return IdentityAuthInjectorFetchMiddleware.create(options);\n  }\n  constructor() {\n  }\n}\n\nvar __defProp$5 = Object.defineProperty;\nvar __defNormalProp$5 = (obj, key, value) => key in obj ? __defProp$5(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$5 = (obj, key, value) => {\n  __defNormalProp$5(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nfunction hasScopes(searched, searchFor) {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction joinScopes(scopes, ...moreScopess) {\n  const result = new Set(scopes);\n  for (const moreScopes of moreScopess) {\n    for (const scope of moreScopes) {\n      result.add(scope);\n    }\n  }\n  return result;\n}\nclass OAuthPendingRequests {\n  constructor() {\n    __publicField$5(this, \"requests\", []);\n    __publicField$5(this, \"subject\", new BehaviorSubject(\n      this.getCurrentPending()\n    ));\n  }\n  request(scopes) {\n    return new Promise((resolve, reject) => {\n      this.requests.push({ scopes, resolve, reject });\n      this.subject.next(this.getCurrentPending());\n    });\n  }\n  resolve(scopes, result) {\n    this.requests = this.requests.filter((request) => {\n      if (hasScopes(scopes, request.scopes)) {\n        request.resolve(result);\n        return false;\n      }\n      return true;\n    });\n    this.subject.next(this.getCurrentPending());\n  }\n  reject(error) {\n    this.requests.forEach((request) => request.reject(error));\n    this.requests = [];\n    this.subject.next(this.getCurrentPending());\n  }\n  pending() {\n    return this.subject;\n  }\n  getCurrentPending() {\n    const currentScopes = this.requests.length === 0 ? void 0 : this.requests.slice(1).reduce(\n      (acc, current) => joinScopes(acc, current.scopes),\n      this.requests[0].scopes\n    );\n    return {\n      scopes: currentScopes,\n      resolve: (value) => {\n        if (currentScopes) {\n          this.resolve(currentScopes, value);\n        }\n      },\n      reject: (reason) => {\n        if (currentScopes) {\n          this.reject(reason);\n        }\n      }\n    };\n  }\n}\n\nvar __defProp$4 = Object.defineProperty;\nvar __defNormalProp$4 = (obj, key, value) => key in obj ? __defProp$4(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$4 = (obj, key, value) => {\n  __defNormalProp$4(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass OAuthRequestManager {\n  constructor() {\n    __publicField$4(this, \"subject\", new BehaviorSubject([]));\n    __publicField$4(this, \"currentRequests\", []);\n    __publicField$4(this, \"handlerCount\", 0);\n  }\n  createAuthRequester(options) {\n    const handler = new OAuthPendingRequests();\n    const index = this.handlerCount;\n    this.handlerCount++;\n    handler.pending().subscribe({\n      next: (scopeRequest) => {\n        const newRequests = this.currentRequests.slice();\n        const request = this.makeAuthRequest(scopeRequest, options);\n        if (!request) {\n          delete newRequests[index];\n        } else {\n          newRequests[index] = request;\n        }\n        this.currentRequests = newRequests;\n        this.subject.next(newRequests.filter(Boolean));\n      }\n    });\n    return (scopes) => {\n      return handler.request(scopes);\n    };\n  }\n  // Converts the pending request and popup options into a popup request that we can forward to subscribers.\n  makeAuthRequest(request, options) {\n    const { scopes } = request;\n    if (!scopes) {\n      return void 0;\n    }\n    return {\n      provider: options.provider,\n      trigger: async () => {\n        const result = await options.onAuthRequest(scopes);\n        request.resolve(result);\n      },\n      reject: () => {\n        const error = new Error(\"Login failed, rejected by user\");\n        error.name = \"RejectedError\";\n        request.reject(error);\n      }\n    };\n  }\n  authRequest$() {\n    return this.subject;\n  }\n}\n\nvar __defProp$3 = Object.defineProperty;\nvar __defNormalProp$3 = (obj, key, value) => key in obj ? __defProp$3(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$3 = (obj, key, value) => {\n  __defNormalProp$3(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst buckets = /* @__PURE__ */ new Map();\nconst _WebStorage = class _WebStorage {\n  constructor(namespace, errorApi) {\n    this.namespace = namespace;\n    this.errorApi = errorApi;\n    __publicField$3(this, \"subscribers\", /* @__PURE__ */ new Set());\n    __publicField$3(this, \"observable\", new ObservableImpl((subscriber) => {\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    }));\n  }\n  static create(options) {\n    var _a;\n    return new _WebStorage((_a = options.namespace) != null ? _a : \"\", options.errorApi);\n  }\n  static addStorageEventListener() {\n    window.addEventListener(\"storage\", (event) => {\n      var _a;\n      for (const [bucketPath, webStorage] of buckets.entries()) {\n        if ((_a = event.key) == null ? void 0 : _a.startsWith(bucketPath)) {\n          webStorage.handleStorageChange(event.key);\n        }\n      }\n    });\n  }\n  get(key) {\n    return this.snapshot(key).value;\n  }\n  snapshot(key) {\n    let value = void 0;\n    let presence = \"absent\";\n    try {\n      const item = localStorage.getItem(this.getKeyName(key));\n      if (item) {\n        value = JSON.parse(item, (_key, val) => {\n          if (typeof val === \"object\" && val !== null) {\n            Object.freeze(val);\n          }\n          return val;\n        });\n        presence = \"present\";\n      }\n    } catch (e) {\n      this.errorApi.post(\n        new Error(`Error when parsing JSON config from storage for: ${key}`)\n      );\n    }\n    return { key, value, presence };\n  }\n  forBucket(name) {\n    const bucketPath = `${this.namespace}/${name}`;\n    if (!buckets.has(bucketPath)) {\n      buckets.set(bucketPath, new _WebStorage(bucketPath, this.errorApi));\n    }\n    return buckets.get(bucketPath);\n  }\n  async set(key, data) {\n    localStorage.setItem(this.getKeyName(key), JSON.stringify(data));\n    this.notifyChanges(key);\n  }\n  async remove(key) {\n    localStorage.removeItem(this.getKeyName(key));\n    this.notifyChanges(key);\n  }\n  observe$(key) {\n    if (!_WebStorage.hasSubscribed) {\n      _WebStorage.addStorageEventListener();\n      _WebStorage.hasSubscribed = true;\n    }\n    return this.observable.filter(({ key: messageKey }) => messageKey === key);\n  }\n  handleStorageChange(eventKey) {\n    if (!(eventKey == null ? void 0 : eventKey.startsWith(this.namespace))) {\n      return;\n    }\n    const trimmedKey = eventKey == null ? void 0 : eventKey.slice(`${this.namespace}/`.length);\n    if (!trimmedKey.includes(\"/\")) {\n      this.notifyChanges(decodeURIComponent(trimmedKey));\n    }\n  }\n  getKeyName(key) {\n    return `${this.namespace}/${encodeURIComponent(key)}`;\n  }\n  notifyChanges(key) {\n    const snapshot = this.snapshot(key);\n    for (const subscription of this.subscribers) {\n      subscription.next(snapshot);\n    }\n  }\n};\n__publicField$3(_WebStorage, \"hasSubscribed\", false);\nlet WebStorage = _WebStorage;\n\nconst InternalAppContext = createContext(void 0);\n\nfunction isReactRouterBeta() {\n  const [obj] = createRoutesFromChildren(/* @__PURE__ */ React.createElement(Route, { index: true, element: /* @__PURE__ */ React.createElement(\"div\", null) }));\n  return !obj.index;\n}\n\nconst getExtensionContext = (pathname, routes) => {\n  try {\n    const matches = matchRoutes(routes, { pathname });\n    const routeMatch = matches == null ? void 0 : matches.filter((match) => {\n      var _a;\n      return ((_a = match == null ? void 0 : match.route.routeRefs) == null ? void 0 : _a.size) > 0;\n    }).pop();\n    const routeObject = routeMatch == null ? void 0 : routeMatch.route;\n    if (!routeObject) {\n      return void 0;\n    }\n    if (routeObject.path === \"\" && pathname !== \"/\") {\n      return void 0;\n    }\n    let routeRef;\n    if (routeObject.routeRefs.size === 1) {\n      routeRef = routeObject.routeRefs.values().next().value;\n    }\n    let plugin;\n    if (routeObject.plugins.size === 1) {\n      plugin = routeObject.plugins.values().next().value;\n    }\n    const params = Object.entries(\n      (routeMatch == null ? void 0 : routeMatch.params) || {}\n    ).reduce((acc, [key, value]) => {\n      if (value !== void 0 && key !== \"*\") {\n        acc[key] = value;\n      }\n      return acc;\n    }, {});\n    return {\n      extension: \"App\",\n      pluginId: (plugin == null ? void 0 : plugin.getId()) || \"root\",\n      ...routeRef ? { routeRef: routeRef.id } : {},\n      _routeNodeType: routeObject.element,\n      params\n    };\n  } catch {\n    return void 0;\n  }\n};\nconst TrackNavigation = ({\n  pathname,\n  search,\n  hash,\n  attributes\n}) => {\n  const analytics = useAnalytics();\n  useEffect(() => {\n    analytics.captureEvent(\"navigate\", `${pathname}${search}${hash}`, {\n      attributes\n    });\n  }, [analytics, pathname, search, hash, attributes]);\n  return null;\n};\nconst RouteTracker = ({\n  routeObjects\n}) => {\n  const { pathname, search, hash } = useLocation();\n  const { params, ...attributes } = getExtensionContext(\n    pathname,\n    routeObjects\n  ) || { params: {} };\n  return /* @__PURE__ */ React.createElement(AnalyticsContext, { attributes }, /* @__PURE__ */ React.createElement(\n    TrackNavigation,\n    {\n      pathname,\n      search,\n      hash,\n      attributes: params\n    }\n  ));\n};\n\nfunction getBasePath(configApi) {\n  if (!isReactRouterBeta()) {\n    return \"\";\n  }\n  return readBasePath(configApi);\n}\nfunction readBasePath(configApi) {\n  var _a;\n  let { pathname } = new URL(\n    (_a = configApi.getOptionalString(\"app.baseUrl\")) != null ? _a : \"/\",\n    \"http://sample.dev\"\n    // baseUrl can be specified as just a path\n  );\n  pathname = pathname.replace(/\\/*$/, \"\");\n  return pathname;\n}\nfunction SignInPageWrapper({\n  component: Component,\n  appIdentityProxy,\n  children\n}) {\n  const [identityApi, setIdentityApi] = useState();\n  const configApi = useApi(configApiRef);\n  const basePath = readBasePath(configApi);\n  if (!identityApi) {\n    return /* @__PURE__ */ React.createElement(Component, { onSignInSuccess: setIdentityApi });\n  }\n  appIdentityProxy.setTarget(identityApi, {\n    signOutTargetUrl: basePath || \"/\"\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n}\nfunction AppRouter(props) {\n  const { Router: RouterComponent, SignInPage: SignInPageComponent } = useApp().getComponents();\n  const configApi = useApi(configApiRef);\n  const basePath = readBasePath(configApi);\n  const mountPath = `${basePath}/*`;\n  const internalAppContext = useContext(InternalAppContext);\n  if (!internalAppContext) {\n    throw new Error(\"AppRouter must be rendered within the AppProvider\");\n  }\n  const { routeObjects, appIdentityProxy } = internalAppContext;\n  if (!SignInPageComponent) {\n    appIdentityProxy.setTarget(\n      {\n        getUserId: () => \"guest\",\n        getIdToken: async () => void 0,\n        getProfile: () => ({\n          email: \"guest@example.com\",\n          displayName: \"Guest\"\n        }),\n        getProfileInfo: async () => ({\n          email: \"guest@example.com\",\n          displayName: \"Guest\"\n        }),\n        getBackstageIdentity: async () => ({\n          type: \"user\",\n          userEntityRef: \"user:default/guest\",\n          ownershipEntityRefs: [\"user:default/guest\"]\n        }),\n        getCredentials: async () => ({}),\n        signOut: async () => {\n        }\n      },\n      { signOutTargetUrl: basePath || \"/\" }\n    );\n    if (isReactRouterBeta()) {\n      return /* @__PURE__ */ React.createElement(RouterComponent, null, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, { path: mountPath, element: /* @__PURE__ */ React.createElement(React.Fragment, null, props.children) })));\n    }\n    return /* @__PURE__ */ React.createElement(RouterComponent, { basename: basePath }, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), props.children);\n  }\n  if (isReactRouterBeta()) {\n    return /* @__PURE__ */ React.createElement(RouterComponent, null, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), /* @__PURE__ */ React.createElement(\n      SignInPageWrapper,\n      {\n        component: SignInPageComponent,\n        appIdentityProxy\n      },\n      /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, { path: mountPath, element: /* @__PURE__ */ React.createElement(React.Fragment, null, props.children) }))\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(RouterComponent, { basename: basePath }, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), /* @__PURE__ */ React.createElement(\n    SignInPageWrapper,\n    {\n      component: SignInPageComponent,\n      appIdentityProxy\n    },\n    props.children\n  ));\n}\nattachComponentData(AppRouter, \"core.type\", \"AppRouter\");\n\nfunction traverseElementTree(options) {\n  const collectors = {};\n  for (const name in options.collectors) {\n    if (options.collectors.hasOwnProperty(name)) {\n      collectors[name] = options.collectors[name]();\n    }\n  }\n  const queue = [\n    {\n      node: Children.toArray(options.root),\n      parent: void 0,\n      contexts: {}\n    }\n  ];\n  while (queue.length !== 0) {\n    const { node, parent, contexts } = queue.shift();\n    Children.forEach(node, (element) => {\n      if (!isValidElement(element)) {\n        return;\n      }\n      const nextContexts = {};\n      for (const name in collectors) {\n        if (collectors.hasOwnProperty(name)) {\n          const collector = collectors[name];\n          nextContexts[name] = collector.visit(\n            collector.accumulator,\n            element,\n            parent,\n            contexts[name]\n          );\n        }\n      }\n      for (const discoverer of options.discoverers) {\n        const children = discoverer(element);\n        if (children) {\n          queue.push({\n            node: children,\n            parent: element,\n            contexts: nextContexts\n          });\n        }\n      }\n    });\n  }\n  return Object.fromEntries(\n    Object.entries(collectors).map(([name, c]) => [name, c.accumulator])\n  );\n}\nfunction createCollector(accumulatorFactory, visit) {\n  return () => ({ accumulator: accumulatorFactory(), visit });\n}\nfunction childDiscoverer(element) {\n  var _a;\n  return (_a = element.props) == null ? void 0 : _a.children;\n}\nfunction routeElementDiscoverer(element) {\n  var _a, _b, _c;\n  if (((_a = element.props) == null ? void 0 : _a.path) && ((_b = element.props) == null ? void 0 : _b.element)) {\n    return (_c = element.props) == null ? void 0 : _c.element;\n  }\n  return void 0;\n}\n\nconst pluginCollector = createCollector(\n  () => /* @__PURE__ */ new Set(),\n  (acc, node) => {\n    const plugin = getComponentData(node, \"core.plugin\");\n    if (plugin) {\n      acc.add(plugin);\n    }\n  }\n);\n\nconst FeatureFlagged = (props) => {\n  const { children } = props;\n  const featureFlagApi = useApi(featureFlagsApiRef);\n  const isEnabled = \"with\" in props ? featureFlagApi.isActive(props.with) : !featureFlagApi.isActive(props.without);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, isEnabled ? children : null);\n};\nattachComponentData(FeatureFlagged, \"core.featureFlagged\", true);\n\nconst MATCH_ALL_ROUTE = {\n  caseSensitive: false,\n  path: \"*\",\n  element: \"match-all\",\n  // These elements aren't used, so we add in a bit of debug information\n  routeRefs: /* @__PURE__ */ new Set(),\n  plugins: /* @__PURE__ */ new Set()\n};\nfunction stringifyNode(node) {\n  var _a, _b;\n  const anyNode = node;\n  if (anyNode == null ? void 0 : anyNode.type) {\n    return (_b = (_a = anyNode.type.displayName) != null ? _a : anyNode.type.name) != null ? _b : String(anyNode.type);\n  }\n  return String(anyNode);\n}\nconst pluginSet = (plugin) => {\n  const set = /* @__PURE__ */ new Set();\n  if (plugin) {\n    set.add(plugin);\n  }\n  return set;\n};\nfunction collectSubTree(node, entries = new Array()) {\n  Children.forEach(node, (element) => {\n    if (!isValidElement(element)) {\n      return;\n    }\n    const routeRef = getComponentData(element, \"core.mountPoint\");\n    if (routeRef) {\n      const plugin = getComponentData(element, \"core.plugin\");\n      entries.push({ routeRef, plugin });\n    }\n    collectSubTree(element.props.children, entries);\n  });\n  return entries;\n}\nconst routingV2Collector = createCollector(\n  () => ({\n    paths: /* @__PURE__ */ new Map(),\n    parents: /* @__PURE__ */ new Map(),\n    objects: new Array()\n  }),\n  (acc, node, parent, ctx) => {\n    var _a, _b, _c, _d, _e, _f, _g;\n    if (ctx == null ? void 0 : ctx.isElementAncestor) {\n      return ctx;\n    }\n    if ((parent == null ? void 0 : parent.props.element) === node) {\n      return { ...ctx, isElementAncestor: true };\n    }\n    const pathProp = (_a = node.props) == null ? void 0 : _a.path;\n    const mountPoint = getComponentData(node, \"core.mountPoint\");\n    if (mountPoint && pathProp) {\n      throw new Error(\n        `Path property may not be set directly on a routable extension \"${stringifyNode(\n          node\n        )}\"`\n      );\n    }\n    const parentChildren = (_c = (_b = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _b.children) != null ? _c : acc.objects;\n    if (pathProp !== void 0) {\n      if (typeof pathProp !== \"string\") {\n        throw new Error(\n          `Element path must be a string at \"${stringifyNode(node)}\"`\n        );\n      }\n      const path = pathProp.startsWith(\"/\") ? pathProp.slice(1) : pathProp;\n      const elementProp = node.props.element;\n      if (getComponentData(node, \"core.gatherMountPoints\")) {\n        if (elementProp) {\n          throw new Error(\n            `Mount point gatherers may not have an element prop \"${stringifyNode(\n              node\n            )}\"`\n          );\n        }\n        const newObj = {\n          path,\n          element: \"gathered\",\n          routeRefs: /* @__PURE__ */ new Set(),\n          caseSensitive: Boolean((_d = node.props) == null ? void 0 : _d.caseSensitive),\n          children: [MATCH_ALL_ROUTE],\n          plugins: /* @__PURE__ */ new Set()\n        };\n        parentChildren.push(newObj);\n        return {\n          obj: newObj,\n          gatherPath: path,\n          routeRef: ctx == null ? void 0 : ctx.routeRef,\n          gatherRouteRef: ctx == null ? void 0 : ctx.routeRef\n        };\n      }\n      if (elementProp) {\n        const [extension, ...others] = collectSubTree(elementProp);\n        if (others.length > 0) {\n          throw new Error(\n            `Route element with path \"${pathProp}\" may not contain multiple routable extensions`\n          );\n        }\n        if (!extension) {\n          return ctx;\n        }\n        const { routeRef, plugin } = extension;\n        const newObj = {\n          path,\n          element: \"mounted\",\n          routeRefs: /* @__PURE__ */ new Set([routeRef]),\n          caseSensitive: Boolean((_e = node.props) == null ? void 0 : _e.caseSensitive),\n          children: [MATCH_ALL_ROUTE],\n          plugins: pluginSet(plugin)\n        };\n        parentChildren.push(newObj);\n        acc.paths.set(routeRef, path);\n        acc.parents.set(routeRef, ctx == null ? void 0 : ctx.routeRef);\n        return {\n          obj: newObj,\n          routeRef: routeRef != null ? routeRef : ctx == null ? void 0 : ctx.routeRef,\n          gatherPath: path,\n          gatherRouteRef: ctx == null ? void 0 : ctx.gatherRouteRef\n        };\n      }\n    }\n    if (mountPoint) {\n      if ((ctx == null ? void 0 : ctx.gatherPath) === void 0) {\n        throw new Error(\n          `Routable extension \"${stringifyNode(\n            node\n          )}\" with mount point \"${mountPoint}\" must be assigned a path`\n        );\n      }\n      (_f = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _f.routeRefs.add(mountPoint);\n      const mountPointPlugin = getComponentData(\n        node,\n        \"core.plugin\"\n      );\n      if (mountPointPlugin) {\n        (_g = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _g.plugins.add(mountPointPlugin);\n      }\n      acc.paths.set(mountPoint, ctx.gatherPath);\n      acc.parents.set(mountPoint, ctx == null ? void 0 : ctx.gatherRouteRef);\n      return {\n        ...ctx,\n        routeRef: mountPoint\n      };\n    }\n    return ctx;\n  }\n);\nconst routingV1Collector = createCollector(\n  () => ({\n    paths: /* @__PURE__ */ new Map(),\n    parents: /* @__PURE__ */ new Map(),\n    objects: new Array()\n  }),\n  (acc, node, parent, ctx) => {\n    var _a, _b, _c, _d, _e;\n    if ((parent == null ? void 0 : parent.props.element) === node) {\n      return ctx;\n    }\n    let currentObj = ctx == null ? void 0 : ctx.obj;\n    let currentParentRouteRef = ctx == null ? void 0 : ctx.routeRef;\n    let sticky = ctx == null ? void 0 : ctx.sticky;\n    const path = (_a = node.props) == null ? void 0 : _a.path;\n    const parentChildren = (_b = currentObj == null ? void 0 : currentObj.children) != null ? _b : acc.objects;\n    const caseSensitive = Boolean((_c = node.props) == null ? void 0 : _c.caseSensitive);\n    let currentCtxPath = ctx == null ? void 0 : ctx.path;\n    if (getComponentData(node, \"core.gatherMountPoints\")) {\n      if (!path) {\n        throw new Error(\"Mount point gatherer must have a path\");\n      }\n      currentCtxPath = path;\n    }\n    const element = (_d = node.props) == null ? void 0 : _d.element;\n    let routeRef = getComponentData(node, \"core.mountPoint\");\n    if (!routeRef && isValidElement(element)) {\n      routeRef = getComponentData(element, \"core.mountPoint\");\n    }\n    if (routeRef) {\n      let routePath = path;\n      if (currentCtxPath) {\n        if (routePath) {\n          currentCtxPath = void 0;\n        } else {\n          routePath = currentCtxPath;\n        }\n      }\n      if (!routePath) {\n        throw new Error(\"Mounted routable extension must have a path\");\n      }\n      acc.paths.set(routeRef, routePath);\n      if (currentParentRouteRef && sticky) {\n        acc.parents.set(routeRef, currentParentRouteRef);\n        if (path) {\n          currentParentRouteRef = routeRef;\n          sticky = false;\n        }\n      } else {\n        acc.parents.set(routeRef, currentParentRouteRef);\n        currentParentRouteRef = routeRef;\n      }\n      if (path) {\n        currentObj = {\n          caseSensitive,\n          path,\n          element: \"mounted\",\n          routeRefs: /* @__PURE__ */ new Set([routeRef]),\n          children: [MATCH_ALL_ROUTE],\n          plugins: pluginSet(\n            getComponentData(\n              node.props.element,\n              \"core.plugin\"\n            )\n          )\n        };\n        parentChildren.push(currentObj);\n      } else {\n        currentObj == null ? void 0 : currentObj.routeRefs.add(routeRef);\n      }\n    }\n    if (getComponentData(node, \"core.gatherMountPoints\")) {\n      sticky = true;\n    }\n    const isGatherer = getComponentData(\n      node,\n      \"core.gatherMountPoints\"\n    );\n    if (isGatherer) {\n      if (!path) {\n        throw new Error(\"Mount point gatherer must have a path\");\n      }\n      if (!routeRef) {\n        currentObj = {\n          caseSensitive,\n          path,\n          element: \"gathered\",\n          routeRefs: /* @__PURE__ */ new Set(),\n          children: [MATCH_ALL_ROUTE],\n          plugins: ((_e = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _e.plugins) || /* @__PURE__ */ new Set()\n        };\n        parentChildren.push(currentObj);\n      }\n    }\n    return {\n      obj: currentObj,\n      path: currentCtxPath,\n      routeRef: currentParentRouteRef,\n      sticky\n    };\n  }\n);\nconst featureFlagCollector = createCollector(\n  () => /* @__PURE__ */ new Set(),\n  (acc, node) => {\n    if (node.type === FeatureFlagged) {\n      const props = node.props;\n      acc.add(\"with\" in props ? props.with : props.without);\n    }\n  }\n);\n\nconst routeRefType = getOrCreateGlobalSingleton(\n  \"route-ref-type\",\n  () => Symbol(\"route-ref-type\")\n);\nfunction isRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"absolute\";\n}\nfunction isSubRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"sub\";\n}\nfunction isExternalRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"external\";\n}\n\nfunction joinPaths(...paths) {\n  const normalized = paths.join(\"/\").replace(/\\/\\/+/g, \"/\");\n  if (normalized !== \"/\" && normalized.endsWith(\"/\")) {\n    return normalized.slice(0, -1);\n  }\n  return normalized;\n}\n\nfunction resolveTargetRef(anyRouteRef, routePaths, routeBindings) {\n  let targetRef;\n  let subRoutePath = \"\";\n  if (isRouteRef(anyRouteRef)) {\n    targetRef = anyRouteRef;\n  } else if (isSubRouteRef(anyRouteRef)) {\n    targetRef = anyRouteRef.parent;\n    subRoutePath = anyRouteRef.path;\n  } else if (isExternalRouteRef(anyRouteRef)) {\n    const resolvedRoute = routeBindings.get(anyRouteRef);\n    if (!resolvedRoute) {\n      return [void 0, \"\"];\n    }\n    if (isRouteRef(resolvedRoute)) {\n      targetRef = resolvedRoute;\n    } else if (isSubRouteRef(resolvedRoute)) {\n      targetRef = resolvedRoute.parent;\n      subRoutePath = resolvedRoute.path;\n    } else {\n      throw new Error(\n        `ExternalRouteRef was bound to invalid target, ${resolvedRoute}`\n      );\n    }\n  } else if (anyRouteRef[routeRefType]) {\n    throw new Error(\n      `Unknown or invalid route ref type, ${anyRouteRef[routeRefType]}`\n    );\n  } else {\n    throw new Error(`Unknown object passed to useRouteRef, got ${anyRouteRef}`);\n  }\n  if (!targetRef) {\n    return [void 0, \"\"];\n  }\n  const resolvedPath = routePaths.get(targetRef);\n  if (resolvedPath === void 0) {\n    return [void 0, \"\"];\n  }\n  const targetPath = joinPaths(resolvedPath, subRoutePath);\n  return [targetRef, targetPath];\n}\nfunction resolveBasePath(targetRef, sourceLocation, routePaths, routeParents, routeObjects) {\n  var _a;\n  const match = (_a = matchRoutes(routeObjects, sourceLocation)) != null ? _a : [];\n  const refDiffList = Array();\n  let matchIndex = -1;\n  for (let targetSearchRef = targetRef; targetSearchRef; targetSearchRef = routeParents.get(targetSearchRef)) {\n    matchIndex = match.findIndex(\n      (m) => m.route.routeRefs.has(targetSearchRef)\n    );\n    if (matchIndex !== -1) {\n      break;\n    }\n    refDiffList.unshift(targetSearchRef);\n  }\n  if (refDiffList.length === 0) {\n    matchIndex -= 1;\n  }\n  const parentPath = matchIndex === -1 ? \"\" : match[matchIndex].pathname;\n  const diffPaths = refDiffList.slice(0, -1).map((ref) => {\n    const path = routePaths.get(ref);\n    if (path === void 0) {\n      throw new Error(`No path for ${ref}`);\n    }\n    if (path.includes(\":\")) {\n      throw new Error(\n        `Cannot route to ${targetRef} with parent ${ref} as it has parameters`\n      );\n    }\n    return path;\n  });\n  return `${joinPaths(parentPath, ...diffPaths)}/`;\n}\nclass RouteResolver {\n  constructor(routePaths, routeParents, routeObjects, routeBindings, appBasePath) {\n    this.routePaths = routePaths;\n    this.routeParents = routeParents;\n    this.routeObjects = routeObjects;\n    this.routeBindings = routeBindings;\n    this.appBasePath = appBasePath;\n  }\n  resolve(anyRouteRef, sourceLocation) {\n    const [targetRef, targetPath] = resolveTargetRef(\n      anyRouteRef,\n      this.routePaths,\n      this.routeBindings\n    );\n    if (!targetRef) {\n      return void 0;\n    }\n    let relativeSourceLocation;\n    if (typeof sourceLocation === \"string\") {\n      relativeSourceLocation = this.trimPath(sourceLocation);\n    } else if (sourceLocation.pathname) {\n      relativeSourceLocation = {\n        ...sourceLocation,\n        pathname: this.trimPath(sourceLocation.pathname)\n      };\n    } else {\n      relativeSourceLocation = sourceLocation;\n    }\n    const basePath = this.appBasePath + resolveBasePath(\n      targetRef,\n      relativeSourceLocation,\n      this.routePaths,\n      this.routeParents,\n      this.routeObjects\n    );\n    const routeFunc = (...[params]) => {\n      const encodedParams = params && mapValues(params, (value) => {\n        if (typeof value === \"string\") {\n          return value.replaceAll(/[&?#;\\/]/g, (c) => encodeURIComponent(c));\n        }\n        return value;\n      });\n      return joinPaths(basePath, generatePath(targetPath, encodedParams));\n    };\n    return routeFunc;\n  }\n  trimPath(targetPath) {\n    if (!targetPath) {\n      return targetPath;\n    }\n    if (targetPath.startsWith(this.appBasePath)) {\n      return targetPath.slice(this.appBasePath.length);\n    }\n    return targetPath;\n  }\n}\n\nconst RoutingContext = createVersionedContext(\n  \"routing-context\"\n);\nconst RoutingProvider = ({\n  routePaths,\n  routeParents,\n  routeObjects,\n  routeBindings,\n  basePath = \"\",\n  children\n}) => {\n  const resolver = new RouteResolver(\n    routePaths,\n    routeParents,\n    routeObjects,\n    routeBindings,\n    basePath\n  );\n  const versionedValue = createVersionedValueMap({ 1: resolver });\n  return /* @__PURE__ */ React.createElement(RoutingContext.Provider, { value: versionedValue }, children);\n};\n\nfunction validateRouteParameters(routePaths, routeParents) {\n  const notLeafRoutes = new Set(routeParents.values());\n  notLeafRoutes.delete(void 0);\n  for (const route of routeParents.keys()) {\n    if (notLeafRoutes.has(route)) {\n      continue;\n    }\n    let currentRouteRef = route;\n    let fullPath = \"\";\n    while (currentRouteRef) {\n      const path = routePaths.get(currentRouteRef);\n      if (path === void 0) {\n        throw new Error(`No path for ${currentRouteRef}`);\n      }\n      fullPath = joinPaths(path, fullPath);\n      currentRouteRef = routeParents.get(currentRouteRef);\n    }\n    const params = fullPath.match(/:(\\w+)/g);\n    if (params) {\n      for (let j = 0; j < params.length; j++) {\n        for (let i = j + 1; i < params.length; i++) {\n          if (params[i] === params[j]) {\n            throw new Error(\n              `Parameter ${params[i]} is duplicated in path ${fullPath}`\n            );\n          }\n        }\n      }\n    }\n  }\n}\nfunction validateRouteBindings(routeBindings, plugins) {\n  for (const plugin of plugins) {\n    if (!plugin.externalRoutes) {\n      continue;\n    }\n    for (const [name, externalRouteRef] of Object.entries(\n      plugin.externalRoutes\n    )) {\n      if (externalRouteRef.optional) {\n        continue;\n      }\n      if (!routeBindings.has(externalRouteRef)) {\n        throw new Error(\n          `External route '${name}' of the '${plugin.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`\n        );\n      }\n    }\n  }\n}\n\nconst AppContext = createVersionedContext(\"app-context\");\nconst AppContextProvider = ({\n  appContext,\n  children\n}) => {\n  const versionedValue = createVersionedValueMap({ 1: appContext });\n  return /* @__PURE__ */ React.createElement(AppContext.Provider, { value: versionedValue, children });\n};\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nfunction mkError(thing) {\n  return new Error(\n    `Tried to access IdentityApi ${thing} before app was loaded`\n  );\n}\nfunction logDeprecation(thing) {\n  console.warn(\n    `WARNING: Call to ${thing} is deprecated and will break in the future`\n  );\n}\nclass AppIdentityProxy {\n  constructor() {\n    __publicField$2(this, \"target\");\n    __publicField$2(this, \"waitForTarget\");\n    __publicField$2(this, \"resolveTarget\", () => {\n    });\n    __publicField$2(this, \"signOutTargetUrl\", \"/\");\n    this.waitForTarget = new Promise((resolve) => {\n      this.resolveTarget = resolve;\n    });\n  }\n  // This is called by the app manager once the sign-in page provides us with an implementation\n  setTarget(identityApi, targetOptions) {\n    this.target = identityApi;\n    this.signOutTargetUrl = targetOptions.signOutTargetUrl;\n    this.resolveTarget(identityApi);\n  }\n  getUserId() {\n    if (!this.target) {\n      throw mkError(\"getUserId\");\n    }\n    if (!this.target.getUserId) {\n      throw new Error(\"IdentityApi does not implement getUserId\");\n    }\n    logDeprecation(\"getUserId\");\n    return this.target.getUserId();\n  }\n  getProfile() {\n    if (!this.target) {\n      throw mkError(\"getProfile\");\n    }\n    if (!this.target.getProfile) {\n      throw new Error(\"IdentityApi does not implement getProfile\");\n    }\n    logDeprecation(\"getProfile\");\n    return this.target.getProfile();\n  }\n  async getProfileInfo() {\n    return this.waitForTarget.then((target) => target.getProfileInfo());\n  }\n  async getBackstageIdentity() {\n    const identity = await this.waitForTarget.then(\n      (target) => target.getBackstageIdentity()\n    );\n    if (!identity.userEntityRef.match(/^.*:.*\\/.*$/)) {\n      console.warn(\n        `WARNING: The App IdentityApi provided an invalid userEntityRef, '${identity.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`\n      );\n    }\n    return identity;\n  }\n  async getCredentials() {\n    return this.waitForTarget.then((target) => target.getCredentials());\n  }\n  async getIdToken() {\n    return this.waitForTarget.then((target) => {\n      if (!target.getIdToken) {\n        throw new Error(\"IdentityApi does not implement getIdToken\");\n      }\n      logDeprecation(\"getIdToken\");\n      return target.getIdToken();\n    });\n  }\n  async signOut() {\n    await this.waitForTarget.then((target) => target.signOut());\n    window.location.href = this.signOutTargetUrl;\n  }\n}\n\nfunction resolveTheme(themeId, shouldPreferDark, themes) {\n  if (themeId !== void 0) {\n    const selectedTheme = themes.find((theme) => theme.id === themeId);\n    if (selectedTheme) {\n      return selectedTheme;\n    }\n  }\n  if (shouldPreferDark) {\n    const darkTheme = themes.find((theme) => theme.variant === \"dark\");\n    if (darkTheme) {\n      return darkTheme;\n    }\n  }\n  const lightTheme = themes.find((theme) => theme.variant === \"light\");\n  if (lightTheme) {\n    return lightTheme;\n  }\n  return themes[0];\n}\nconst useShouldPreferDarkTheme = () => {\n  const mediaQuery = useMemo(\n    () => window.matchMedia(\"(prefers-color-scheme: dark)\"),\n    []\n  );\n  const [shouldPreferDark, setPrefersDark] = useState(mediaQuery.matches);\n  useEffect(() => {\n    const listener = (event) => {\n      setPrefersDark(event.matches);\n    };\n    mediaQuery.addListener(listener);\n    return () => {\n      mediaQuery.removeListener(listener);\n    };\n  }, [mediaQuery]);\n  return shouldPreferDark;\n};\nfunction AppThemeProvider({ children }) {\n  const appThemeApi = useApi(appThemeApiRef);\n  const themeId = useObservable(\n    appThemeApi.activeThemeId$(),\n    appThemeApi.getActiveThemeId()\n  );\n  const shouldPreferDark = Boolean(window.matchMedia) ? useShouldPreferDarkTheme() : false;\n  const appTheme = resolveTheme(\n    themeId,\n    shouldPreferDark,\n    appThemeApi.getInstalledThemes()\n  );\n  if (!appTheme) {\n    throw new Error(\"App has no themes\");\n  }\n  return /* @__PURE__ */ React.createElement(appTheme.Provider, { children });\n}\n\nconst defaultConfigLoader = async () => defaultConfigLoaderSync();\nfunction defaultConfigLoaderSync(runtimeConfigJson = \"__APP_INJECTED_RUNTIME_CONFIG__\") {\n  const appConfig = process.env.APP_CONFIG;\n  if (!appConfig) {\n    throw new Error(\"No static configuration provided\");\n  }\n  if (!Array.isArray(appConfig)) {\n    throw new Error(\"Static configuration has invalid format\");\n  }\n  const configs = appConfig.slice();\n  if (runtimeConfigJson !== \"__app_injected_runtime_config__\".toLocaleUpperCase(\"en-US\")) {\n    try {\n      const data = JSON.parse(runtimeConfigJson);\n      if (Array.isArray(data)) {\n        configs.push(...data);\n      } else {\n        configs.push({ data, context: \"env\" });\n      }\n    } catch (error) {\n      throw new Error(`Failed to load runtime configuration, ${error}`);\n    }\n  }\n  const windowAppConfig = window.__APP_CONFIG__;\n  if (windowAppConfig) {\n    configs.push({\n      context: \"window\",\n      data: windowAppConfig\n    });\n  }\n  return configs;\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ApiRegistryBuilder {\n  constructor() {\n    __publicField$1(this, \"apis\", []);\n  }\n  add(api, impl) {\n    this.apis.push([api.id, impl]);\n    return impl;\n  }\n  build() {\n    return new ApiRegistry(new Map(this.apis));\n  }\n}\nclass ApiRegistry {\n  constructor(apis) {\n    this.apis = apis;\n  }\n  static builder() {\n    return new ApiRegistryBuilder();\n  }\n  /**\n   * Creates a new ApiRegistry with a list of API implementations.\n   *\n   * @param apis - A list of pairs mapping an ApiRef to its respective implementation\n   */\n  static from(apis) {\n    return new ApiRegistry(new Map(apis.map(([api, impl]) => [api.id, impl])));\n  }\n  /**\n   * Creates a new ApiRegistry with a single API implementation.\n   *\n   * @param api - ApiRef for the API to add\n   * @param impl - Implementation of the API to add\n   */\n  static with(api, impl) {\n    return new ApiRegistry(/* @__PURE__ */ new Map([[api.id, impl]]));\n  }\n  /**\n   * Returns a new ApiRegistry with the provided API added to the existing ones.\n   *\n   * @param api - ApiRef for the API to add\n   * @param impl - Implementation of the API to add\n   */\n  with(api, impl) {\n    return new ApiRegistry(new Map([...this.apis, [api.id, impl]]));\n  }\n  get(api) {\n    return this.apis.get(api.id);\n  }\n}\n\nfunction resolveRouteBindings(bindRoutes) {\n  const result = /* @__PURE__ */ new Map();\n  if (bindRoutes) {\n    const bind = (externalRoutes, targetRoutes) => {\n      for (const [key, value] of Object.entries(targetRoutes)) {\n        const externalRoute = externalRoutes[key];\n        if (!externalRoute) {\n          throw new Error(`Key ${key} is not an existing external route`);\n        }\n        if (!value && !externalRoute.optional) {\n          throw new Error(\n            `External route ${key} is required but was undefined`\n          );\n        }\n        if (value) {\n          result.set(externalRoute, value);\n        }\n      }\n    };\n    bindRoutes({ bind });\n  }\n  return result;\n}\n\nvar __accessCheck$2 = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$2 = (obj, member, getter) => {\n  __accessCheck$2(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$2 = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$2 = (obj, member, value, setter) => {\n  __accessCheck$2(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _languages, _language$1, _subject;\nconst STORAGE_KEY = \"language\";\nconst DEFAULT_LANGUAGE = \"en\";\nconst _AppLanguageSelector = class _AppLanguageSelector {\n  constructor(languages, initialLanguage) {\n    __privateAdd$2(this, _languages, void 0);\n    __privateAdd$2(this, _language$1, void 0);\n    __privateAdd$2(this, _subject, void 0);\n    __privateSet$2(this, _languages, languages);\n    __privateSet$2(this, _language$1, initialLanguage);\n    __privateSet$2(this, _subject, new BehaviorSubject({\n      language: __privateGet$2(this, _language$1)\n    }));\n  }\n  static create(options) {\n    var _a, _b;\n    const languages = (_a = options == null ? void 0 : options.availableLanguages) != null ? _a : [DEFAULT_LANGUAGE];\n    if (languages.length !== new Set(languages).size) {\n      throw new Error(\n        `Supported languages may not contain duplicates, got '${languages.join(\n          \"', '\"\n        )}'`\n      );\n    }\n    if (!languages.includes(DEFAULT_LANGUAGE)) {\n      throw new Error(`Supported languages must include '${DEFAULT_LANGUAGE}'`);\n    }\n    const initialLanguage = (_b = options == null ? void 0 : options.defaultLanguage) != null ? _b : DEFAULT_LANGUAGE;\n    if (!languages.includes(initialLanguage)) {\n      throw new Error(\n        `Initial language must be one of the supported languages, got '${initialLanguage}'`\n      );\n    }\n    return new _AppLanguageSelector(languages, initialLanguage);\n  }\n  static createWithStorage(options) {\n    const selector = _AppLanguageSelector.create(options);\n    if (!window.localStorage) {\n      return selector;\n    }\n    const storedLanguage = window.localStorage.getItem(STORAGE_KEY);\n    const { languages } = selector.getAvailableLanguages();\n    if (storedLanguage && languages.includes(storedLanguage)) {\n      selector.setLanguage(storedLanguage);\n    }\n    selector.language$().subscribe(({ language }) => {\n      if (language !== window.localStorage.getItem(STORAGE_KEY)) {\n        window.localStorage.setItem(STORAGE_KEY, language);\n      }\n    });\n    window.addEventListener(\"storage\", (event) => {\n      var _a;\n      if (event.key === STORAGE_KEY) {\n        const language = (_a = localStorage.getItem(STORAGE_KEY)) != null ? _a : void 0;\n        if (language) {\n          selector.setLanguage(language);\n        }\n      }\n    });\n    return selector;\n  }\n  getAvailableLanguages() {\n    return { languages: __privateGet$2(this, _languages).slice() };\n  }\n  setLanguage(language) {\n    const lng = language != null ? language : DEFAULT_LANGUAGE;\n    if (lng === __privateGet$2(this, _language$1)) {\n      return;\n    }\n    if (lng && !__privateGet$2(this, _languages).includes(lng)) {\n      throw new Error(\n        `Failed to change language to '${lng}', available languages are '${__privateGet$2(this, _languages).join(\n          \"', '\"\n        )}'`\n      );\n    }\n    __privateSet$2(this, _language$1, lng);\n    __privateGet$2(this, _subject).next({ language: lng });\n  }\n  getLanguage() {\n    return { language: __privateGet$2(this, _language$1) };\n  }\n  language$() {\n    return __privateGet$2(this, _subject);\n  }\n};\n_languages = new WeakMap();\n_language$1 = new WeakMap();\n_subject = new WeakMap();\nlet AppLanguageSelector = _AppLanguageSelector;\n\nfunction toInternalTranslationResource(resource) {\n  const r = resource;\n  if (r.$$type !== \"@backstage/TranslationResource\") {\n    throw new Error(`Invalid translation resource, bad type '${r.$$type}'`);\n  }\n  if (r.version !== \"v1\") {\n    throw new Error(`Invalid translation resource, bad version '${r.version}'`);\n  }\n  return r;\n}\n\nfunction toInternalTranslationRef(ref) {\n  const r = ref;\n  if (r.$$type !== \"@backstage/TranslationRef\") {\n    throw new Error(`Invalid translation ref, bad type '${r.$$type}'`);\n  }\n  if (r.version !== \"v1\") {\n    throw new Error(`Invalid translation ref, bad version '${r.version}'`);\n  }\n  return r;\n}\n\nvar __accessCheck$1 = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$1 = (obj, member, getter) => {\n  __accessCheck$1(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$1 = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$1 = (obj, member, value, setter) => {\n  __accessCheck$1(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck$1(obj, member, \"access private method\");\n  return method;\n};\nvar _loaded, _loading, _loaders, _getLoaderKey, getLoaderKey_fn, _i18n, _loader, _language, _registeredRefs, _languageChangeListeners, _changeLanguage, changeLanguage_fn, _createSnapshot, createSnapshot_fn, _registerDefaults, registerDefaults_fn;\nfunction removeNulls(messages) {\n  return Object.fromEntries(\n    Object.entries(messages).filter(\n      (e) => e[1] !== null\n    )\n  );\n}\nclass ResourceLoader {\n  constructor(onLoad) {\n    this.onLoad = onLoad;\n    __privateAdd$1(this, _getLoaderKey);\n    /** Loaded resources by loader key */\n    __privateAdd$1(this, _loaded, /* @__PURE__ */ new Set());\n    /** Resource loading promises by loader key */\n    __privateAdd$1(this, _loading, /* @__PURE__ */ new Map());\n    /** Loaders for each resource language */\n    __privateAdd$1(this, _loaders, /* @__PURE__ */ new Map());\n  }\n  addTranslationResource(resource) {\n    const internalResource = toInternalTranslationResource(resource);\n    for (const entry of internalResource.resources) {\n      const key = __privateMethod(this, _getLoaderKey, getLoaderKey_fn).call(this, entry.language, internalResource.id);\n      if (!__privateGet$1(this, _loaders).has(key)) {\n        __privateGet$1(this, _loaders).set(key, entry.loader);\n      }\n    }\n  }\n  needsLoading(language, namespace) {\n    const key = __privateMethod(this, _getLoaderKey, getLoaderKey_fn).call(this, language, namespace);\n    const loader = __privateGet$1(this, _loaders).get(key);\n    if (!loader) {\n      return false;\n    }\n    return !__privateGet$1(this, _loaded).has(key);\n  }\n  async load(language, namespace) {\n    const key = __privateMethod(this, _getLoaderKey, getLoaderKey_fn).call(this, language, namespace);\n    const loader = __privateGet$1(this, _loaders).get(key);\n    if (!loader) {\n      return;\n    }\n    if (__privateGet$1(this, _loaded).has(key)) {\n      return;\n    }\n    const loading = __privateGet$1(this, _loading).get(key);\n    if (loading) {\n      await loading;\n      return;\n    }\n    const load = loader().then(\n      (result) => {\n        this.onLoad({ language, namespace, messages: result.messages });\n        __privateGet$1(this, _loaded).add(key);\n      },\n      (error) => {\n        __privateGet$1(this, _loaded).add(key);\n        throw error;\n      }\n    );\n    __privateGet$1(this, _loading).set(key, load);\n    await load;\n  }\n}\n_loaded = new WeakMap();\n_loading = new WeakMap();\n_loaders = new WeakMap();\n_getLoaderKey = new WeakSet();\ngetLoaderKey_fn = function(language, namespace) {\n  return `${language}/${namespace}`;\n};\nconst _I18nextTranslationApi = class _I18nextTranslationApi {\n  constructor(i18n, loader, language) {\n    __privateAdd$1(this, _changeLanguage);\n    __privateAdd$1(this, _createSnapshot);\n    __privateAdd$1(this, _registerDefaults);\n    __privateAdd$1(this, _i18n, void 0);\n    __privateAdd$1(this, _loader, void 0);\n    __privateAdd$1(this, _language, void 0);\n    /** Keep track of which refs we have registered default resources for */\n    __privateAdd$1(this, _registeredRefs, /* @__PURE__ */ new Set());\n    /** Notify observers when language changes */\n    __privateAdd$1(this, _languageChangeListeners, /* @__PURE__ */ new Set());\n    __privateSet$1(this, _i18n, i18n);\n    __privateSet$1(this, _loader, loader);\n    __privateSet$1(this, _language, language);\n  }\n  static create(options) {\n    const { languages } = options.languageApi.getAvailableLanguages();\n    const i18n = createInstance({\n      fallbackLng: DEFAULT_LANGUAGE,\n      supportedLngs: languages,\n      interpolation: {\n        escapeValue: false\n      },\n      ns: [],\n      defaultNS: false,\n      fallbackNS: false,\n      // Disable resource loading on init, meaning i18n will be ready to use immediately\n      initImmediate: false\n    });\n    i18n.init();\n    if (!i18n.isInitialized) {\n      throw new Error(\"i18next was unexpectedly not initialized\");\n    }\n    const { language: initialLanguage } = options.languageApi.getLanguage();\n    if (initialLanguage !== DEFAULT_LANGUAGE) {\n      i18n.changeLanguage(initialLanguage);\n    }\n    const loader = new ResourceLoader((loaded) => {\n      i18n.addResourceBundle(\n        loaded.language,\n        loaded.namespace,\n        removeNulls(loaded.messages),\n        false,\n        // do not merge with existing translations\n        true\n        // overwrite translations\n      );\n    });\n    const resources = (options == null ? void 0 : options.resources) || [];\n    for (let i = resources.length - 1; i >= 0; i--) {\n      const resource = resources[i];\n      if (resource.$$type === \"@backstage/TranslationResource\") {\n        loader.addTranslationResource(resource);\n      } else if (resource.$$type === \"@backstage/TranslationMessages\") {\n        i18n.addResourceBundle(\n          DEFAULT_LANGUAGE,\n          resource.id,\n          removeNulls(resource.messages),\n          true,\n          // merge with existing translations\n          false\n          // do not overwrite translations\n        );\n      }\n    }\n    const instance = new _I18nextTranslationApi(\n      i18n,\n      loader,\n      options.languageApi.getLanguage().language\n    );\n    options.languageApi.language$().subscribe(({ language }) => {\n      var _a;\n      __privateMethod(_a = instance, _changeLanguage, changeLanguage_fn).call(_a, language);\n    });\n    return instance;\n  }\n  getTranslation(translationRef) {\n    const internalRef = toInternalTranslationRef(translationRef);\n    __privateMethod(this, _registerDefaults, registerDefaults_fn).call(this, internalRef);\n    return __privateMethod(this, _createSnapshot, createSnapshot_fn).call(this, internalRef);\n  }\n  translation$(translationRef) {\n    const internalRef = toInternalTranslationRef(translationRef);\n    __privateMethod(this, _registerDefaults, registerDefaults_fn).call(this, internalRef);\n    return new ObservableImpl((subscriber) => {\n      let loadTicket = {};\n      const loadResource = () => {\n        loadTicket = {};\n        const ticket = loadTicket;\n        __privateGet$1(this, _loader).load(__privateGet$1(this, _language), internalRef.id).then(\n          () => {\n            if (ticket === loadTicket) {\n              const snapshot = __privateMethod(this, _createSnapshot, createSnapshot_fn).call(this, internalRef);\n              if (snapshot.ready) {\n                subscriber.next(snapshot);\n              }\n            }\n          },\n          (error) => {\n            if (ticket === loadTicket) {\n              subscriber.error(Array.isArray(error) ? error[0] : error);\n            }\n          }\n        );\n      };\n      const onChange = () => {\n        const snapshot = __privateMethod(this, _createSnapshot, createSnapshot_fn).call(this, internalRef);\n        if (snapshot.ready) {\n          subscriber.next(snapshot);\n        } else {\n          loadResource();\n        }\n      };\n      if (__privateGet$1(this, _loader).needsLoading(__privateGet$1(this, _language), internalRef.id)) {\n        loadResource();\n      }\n      __privateGet$1(this, _languageChangeListeners).add(onChange);\n      return () => {\n        __privateGet$1(this, _languageChangeListeners).delete(onChange);\n      };\n    });\n  }\n};\n_i18n = new WeakMap();\n_loader = new WeakMap();\n_language = new WeakMap();\n_registeredRefs = new WeakMap();\n_languageChangeListeners = new WeakMap();\n_changeLanguage = new WeakSet();\nchangeLanguage_fn = function(language) {\n  if (__privateGet$1(this, _language) !== language) {\n    __privateSet$1(this, _language, language);\n    __privateGet$1(this, _i18n).changeLanguage(language);\n    __privateGet$1(this, _languageChangeListeners).forEach((listener) => listener());\n  }\n};\n_createSnapshot = new WeakSet();\ncreateSnapshot_fn = function(internalRef) {\n  if (__privateGet$1(this, _loader).needsLoading(__privateGet$1(this, _language), internalRef.id)) {\n    return { ready: false };\n  }\n  const t = __privateGet$1(this, _i18n).getFixedT(\n    null,\n    internalRef.id\n  );\n  return {\n    ready: true,\n    t\n  };\n};\n_registerDefaults = new WeakSet();\nregisterDefaults_fn = function(internalRef) {\n  if (__privateGet$1(this, _registeredRefs).has(internalRef.id)) {\n    return;\n  }\n  __privateGet$1(this, _registeredRefs).add(internalRef.id);\n  const defaultMessages = internalRef.getDefaultMessages();\n  __privateGet$1(this, _i18n).addResourceBundle(\n    DEFAULT_LANGUAGE,\n    internalRef.id,\n    defaultMessages,\n    true,\n    // merge with existing translations\n    false\n    // do not overwrite translations\n  );\n  const defaultResource = internalRef.getDefaultResource();\n  if (defaultResource) {\n    __privateGet$1(this, _loader).addTranslationResource(defaultResource);\n  }\n};\nlet I18nextTranslationApi = _I18nextTranslationApi;\n\nfunction createLocalBaseUrl(fullUrl) {\n  const url = new URL(fullUrl);\n  url.protocol = document.location.protocol;\n  url.hostname = document.location.hostname;\n  url.port = document.location.port;\n  return url.toString().replace(/\\/$/, \"\");\n}\nfunction overrideBaseUrlConfigs(inputConfigs) {\n  const urlConfigReader = ConfigReader.fromConfigs(inputConfigs);\n  const appBaseUrl = urlConfigReader.getOptionalString(\"app.baseUrl\");\n  const backendBaseUrl = urlConfigReader.getOptionalString(\"backend.baseUrl\");\n  let configs = inputConfigs;\n  let newBackendBaseUrl = void 0;\n  let newAppBaseUrl = void 0;\n  if (appBaseUrl && backendBaseUrl) {\n    const appOrigin = new URL(appBaseUrl).origin;\n    const backendOrigin = new URL(backendBaseUrl).origin;\n    if (appOrigin === backendOrigin) {\n      const maybeNewBackendBaseUrl = createLocalBaseUrl(backendBaseUrl);\n      if (backendBaseUrl !== maybeNewBackendBaseUrl) {\n        newBackendBaseUrl = maybeNewBackendBaseUrl;\n      }\n    }\n  }\n  if (appBaseUrl) {\n    const maybeNewAppBaseUrl = createLocalBaseUrl(appBaseUrl);\n    if (appBaseUrl !== maybeNewAppBaseUrl) {\n      newAppBaseUrl = maybeNewAppBaseUrl;\n    }\n  }\n  if (newAppBaseUrl || newBackendBaseUrl) {\n    configs = configs.concat({\n      data: {\n        app: newAppBaseUrl && {\n          baseUrl: newAppBaseUrl\n        },\n        backend: newBackendBaseUrl && {\n          baseUrl: newBackendBaseUrl\n        }\n      },\n      context: \"relative-resolver\"\n    });\n  }\n  return configs;\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _getProviderCalled;\nfunction useConfigLoader(configLoader, components, appThemeApi) {\n  var _a;\n  const hasConfig = Boolean(configLoader);\n  const config = useAsync(configLoader || (() => Promise.resolve([])));\n  let noConfigNode = void 0;\n  if (hasConfig && config.loading) {\n    const { Progress } = components;\n    noConfigNode = /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (config.error) {\n    const { BootErrorPage } = components;\n    noConfigNode = /* @__PURE__ */ React.createElement(BootErrorPage, { step: \"load-config\", error: config.error });\n  }\n  const { ThemeProvider = AppThemeProvider } = components;\n  if (noConfigNode) {\n    return {\n      node: /* @__PURE__ */ React.createElement(ApiProvider, { apis: ApiRegistry.with(appThemeApiRef, appThemeApi) }, /* @__PURE__ */ React.createElement(ThemeProvider, null, noConfigNode))\n    };\n  }\n  const configReader = ConfigReader.fromConfigs(\n    ((_a = config.value) == null ? void 0 : _a.length) ? overrideBaseUrlConfigs(config.value) : []\n  );\n  return { api: configReader };\n}\nclass AppContextImpl {\n  constructor(app) {\n    this.app = app;\n  }\n  getPlugins() {\n    return this.app.getPlugins();\n  }\n  getSystemIcon(key) {\n    return this.app.getSystemIcon(key);\n  }\n  getSystemIcons() {\n    return this.app.getSystemIcons();\n  }\n  getComponents() {\n    return this.app.getComponents();\n  }\n}\nclass AppManager {\n  constructor(options) {\n    __publicField(this, \"apiHolder\");\n    __publicField(this, \"configApi\");\n    __publicField(this, \"apis\");\n    __publicField(this, \"icons\");\n    __publicField(this, \"plugins\");\n    __publicField(this, \"featureFlags\");\n    __publicField(this, \"components\");\n    __publicField(this, \"themes\");\n    __publicField(this, \"configLoader\");\n    __publicField(this, \"defaultApis\");\n    __publicField(this, \"bindRoutes\");\n    __publicField(this, \"appLanguageApi\");\n    __publicField(this, \"translationResources\");\n    __publicField(this, \"appIdentityProxy\", new AppIdentityProxy());\n    __publicField(this, \"apiFactoryRegistry\");\n    __privateAdd(this, _getProviderCalled, false);\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i;\n    this.apis = (_a = options.apis) != null ? _a : [];\n    this.icons = options.icons;\n    this.plugins = new Set((_b = options.plugins) != null ? _b : []);\n    this.featureFlags = (_c = options.featureFlags) != null ? _c : [];\n    this.components = options.components;\n    this.themes = options.themes;\n    this.configLoader = (_d = options.configLoader) != null ? _d : defaultConfigLoader;\n    this.defaultApis = (_e = options.defaultApis) != null ? _e : [];\n    this.bindRoutes = options.bindRoutes;\n    this.apiFactoryRegistry = new ApiFactoryRegistry();\n    this.appLanguageApi = AppLanguageSelector.createWithStorage({\n      defaultLanguage: (_f = options.__experimentalTranslations) == null ? void 0 : _f.defaultLanguage,\n      availableLanguages: (_g = options.__experimentalTranslations) == null ? void 0 : _g.availableLanguages\n    });\n    this.translationResources = (_i = (_h = options.__experimentalTranslations) == null ? void 0 : _h.resources) != null ? _i : [];\n  }\n  getPlugins() {\n    return Array.from(this.plugins);\n  }\n  getSystemIcon(key) {\n    return this.icons[key];\n  }\n  getSystemIcons() {\n    return this.icons;\n  }\n  getComponents() {\n    return this.components;\n  }\n  createRoot(element) {\n    const AppProvider = this.getProvider();\n    const AppRoot = () => {\n      return /* @__PURE__ */ React.createElement(AppProvider, null, element);\n    };\n    return AppRoot;\n  }\n  getProvider() {\n    if (__privateGet(this, _getProviderCalled)) {\n      throw new Error(\n        \"app.getProvider() or app.createRoot() has already been called, and can only be called once\"\n      );\n    }\n    __privateSet(this, _getProviderCalled, true);\n    const appContext = new AppContextImpl(this);\n    let routesHaveBeenValidated = false;\n    const Provider = ({ children }) => {\n      const needsFeatureFlagRegistrationRef = useRef(true);\n      const appThemeApi = useMemo(\n        () => AppThemeSelector.createWithStorage(this.themes),\n        []\n      );\n      const { routing, featureFlags, routeBindings } = useMemo(() => {\n        const usesReactRouterBeta = isReactRouterBeta();\n        if (usesReactRouterBeta) {\n          console.warn(`\nDEPRECATION WARNING: React Router Beta is deprecated and support for it will be removed in a future release.\n                     Please migrate to use React Router v6 stable.\n                     See https://backstage.io/docs/tutorials/react-router-stable-migration\n`);\n        }\n        const result = traverseElementTree({\n          root: children,\n          discoverers: [childDiscoverer, routeElementDiscoverer],\n          collectors: {\n            routing: usesReactRouterBeta ? routingV1Collector : routingV2Collector,\n            collectedPlugins: pluginCollector,\n            featureFlags: featureFlagCollector\n          }\n        });\n        result.collectedPlugins.forEach((plugin) => this.plugins.add(plugin));\n        this.verifyPlugins(this.plugins);\n        this.getApiHolder();\n        return {\n          ...result,\n          routeBindings: resolveRouteBindings(this.bindRoutes)\n        };\n      }, [children]);\n      if (!routesHaveBeenValidated) {\n        routesHaveBeenValidated = true;\n        validateRouteParameters(routing.paths, routing.parents);\n        validateRouteBindings(\n          routeBindings,\n          this.plugins\n        );\n      }\n      const loadedConfig = useConfigLoader(\n        this.configLoader,\n        this.components,\n        appThemeApi\n      );\n      const hasConfigApi = \"api\" in loadedConfig;\n      if (hasConfigApi) {\n        const { api } = loadedConfig;\n        this.configApi = api;\n      }\n      if (\"node\" in loadedConfig) {\n        return loadedConfig.node;\n      }\n      if (hasConfigApi && needsFeatureFlagRegistrationRef.current) {\n        needsFeatureFlagRegistrationRef.current = false;\n        const featureFlagsApi = this.getApiHolder().get(featureFlagsApiRef);\n        if (featureFlagsApi) {\n          for (const flag of this.featureFlags) {\n            featureFlagsApi.registerFlag({\n              ...flag,\n              pluginId: \"\"\n            });\n          }\n          for (const plugin of this.plugins.values()) {\n            if (\"getFeatureFlags\" in plugin) {\n              for (const flag of plugin.getFeatureFlags()) {\n                featureFlagsApi.registerFlag({\n                  name: flag.name,\n                  pluginId: plugin.getId()\n                });\n              }\n            } else {\n              for (const output of plugin.output()) {\n                if (output.type === \"feature-flag\") {\n                  featureFlagsApi.registerFlag({\n                    name: output.name,\n                    pluginId: plugin.getId()\n                  });\n                }\n              }\n            }\n          }\n          const registeredFlags = featureFlagsApi.getRegisteredFlags();\n          const flagNames = new Set(registeredFlags.map((f) => f.name));\n          for (const name of featureFlags) {\n            if (!flagNames.has(name)) {\n              featureFlagsApi.registerFlag({ name, pluginId: \"\" });\n            }\n          }\n        }\n      }\n      const { ThemeProvider = AppThemeProvider, Progress } = this.components;\n      return /* @__PURE__ */ React.createElement(ApiProvider, { apis: this.getApiHolder() }, /* @__PURE__ */ React.createElement(AppContextProvider, { appContext }, /* @__PURE__ */ React.createElement(ThemeProvider, null, /* @__PURE__ */ React.createElement(\n        RoutingProvider,\n        {\n          routePaths: routing.paths,\n          routeParents: routing.parents,\n          routeObjects: routing.objects,\n          routeBindings,\n          basePath: getBasePath(loadedConfig.api)\n        },\n        /* @__PURE__ */ React.createElement(\n          InternalAppContext.Provider,\n          {\n            value: {\n              routeObjects: routing.objects,\n              appIdentityProxy: this.appIdentityProxy\n            }\n          },\n          /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, children)\n        )\n      ))));\n    };\n    return Provider;\n  }\n  getRouter() {\n    return AppRouter;\n  }\n  getApiHolder() {\n    if (this.apiHolder) {\n      for (const plugin of this.plugins) {\n        for (const factory of plugin.getApis()) {\n          if (!this.apiFactoryRegistry.get(factory.api)) {\n            this.apiFactoryRegistry.register(\"default\", factory);\n          }\n        }\n      }\n      ApiResolver.validateFactories(\n        this.apiFactoryRegistry,\n        this.apiFactoryRegistry.getAllApis()\n      );\n      return this.apiHolder;\n    }\n    this.apiFactoryRegistry.register(\"static\", {\n      api: appThemeApiRef,\n      deps: {},\n      factory: () => AppThemeSelector.createWithStorage(this.themes)\n    });\n    this.apiFactoryRegistry.register(\"static\", {\n      api: configApiRef,\n      deps: {},\n      factory: () => {\n        if (!this.configApi) {\n          throw new Error(\n            \"Tried to access config API before config was loaded\"\n          );\n        }\n        return this.configApi;\n      }\n    });\n    this.apiFactoryRegistry.register(\"static\", {\n      api: identityApiRef,\n      deps: {},\n      factory: () => this.appIdentityProxy\n    });\n    this.apiFactoryRegistry.register(\"static\", {\n      api: appLanguageApiRef,\n      deps: {},\n      factory: () => this.appLanguageApi\n    });\n    this.apiFactoryRegistry.register(\"default\", {\n      api: translationApiRef,\n      deps: { languageApi: appLanguageApiRef },\n      factory: ({ languageApi }) => I18nextTranslationApi.create({\n        languageApi,\n        resources: this.translationResources\n      })\n    });\n    this.apiFactoryRegistry.register(\"default\", {\n      api: featureFlagsApiRef,\n      deps: {},\n      factory: () => new LocalStorageFeatureFlags()\n    });\n    for (const factory of this.defaultApis) {\n      this.apiFactoryRegistry.register(\"default\", factory);\n    }\n    for (const plugin of this.plugins) {\n      for (const factory of plugin.getApis()) {\n        if (!this.apiFactoryRegistry.register(\"default\", factory)) {\n          throw new Error(\n            `Plugin ${plugin.getId()} tried to register duplicate or forbidden API factory for ${factory.api}`\n          );\n        }\n      }\n    }\n    for (const factory of this.apis) {\n      if (!this.apiFactoryRegistry.register(\"app\", factory)) {\n        throw new Error(\n          `Duplicate or forbidden API factory for ${factory.api} in app`\n        );\n      }\n    }\n    ApiResolver.validateFactories(\n      this.apiFactoryRegistry,\n      this.apiFactoryRegistry.getAllApis()\n    );\n    this.apiHolder = new ApiResolver(this.apiFactoryRegistry);\n    return this.apiHolder;\n  }\n  verifyPlugins(plugins) {\n    const pluginIds = /* @__PURE__ */ new Set();\n    for (const plugin of plugins) {\n      const id = plugin.getId();\n      if (pluginIds.has(id)) {\n        throw new Error(`Duplicate plugin found '${id}'`);\n      }\n      pluginIds.add(id);\n    }\n  }\n}\n_getProviderCalled = new WeakMap();\n\nfunction createSpecializedApp(options) {\n  return new AppManager(options);\n}\n\nlet warned = false;\nconst FlatRoutes = (props) => {\n  const app = useApp();\n  const { NotFoundErrorPage } = app.getComponents();\n  const isBeta = useMemo(() => isReactRouterBeta(), []);\n  const routes = useElementFilter(\n    props.children,\n    (elements) => elements.getElements().flatMap((child) => {\n      var _a;\n      let path = child.props.path;\n      if (path === \"\") {\n        return [];\n      }\n      path = (_a = path == null ? void 0 : path.replace(/\\/\\*$/, \"\")) != null ? _a : \"/\";\n      let element = isBeta ? child : child.props.element;\n      if (!isBeta && !element) {\n        element = child;\n        if (!warned && process.env.NODE_ENV !== \"test\") {\n          console.warn(\n            \"DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />.\"\n          );\n          warned = true;\n        }\n      }\n      return [\n        {\n          // Each route matches any sub route, except for the explicit root path\n          path,\n          element,\n          children: child.props.children ? [\n            // These are the children of each route, which we all add in under a catch-all\n            // subroute in order to make them available to `useOutlet`\n            {\n              path: path === \"/\" ? \"/\" : \"*\",\n              // The root path must require an exact match\n              element: child.props.children\n            }\n          ] : void 0\n        }\n      ];\n    }).sort((a, b) => b.path.localeCompare(a.path)).map((obj) => ({ ...obj, path: obj.path === \"/\" ? \"/\" : `${obj.path}/*` }))\n  );\n  const withNotFound = [\n    ...routes,\n    {\n      path: \"*\",\n      element: /* @__PURE__ */ React.createElement(NotFoundErrorPage, null)\n    }\n  ];\n  return useRoutes(withNotFound);\n};\nattachComponentData(FlatRoutes, \"core.type\", \"FlatRoutes\");\n\nexport { AlertApiForwarder, ApiFactoryRegistry, ApiProvider, ApiResolver, AppRouter, AppThemeSelector, AtlassianAuth, BitbucketAuth, BitbucketServerAuth, ErrorAlerter, ErrorApiForwarder, FeatureFlagged, FetchMiddlewares, FlatRoutes, FrontendHostDiscovery, GithubAuth, GitlabAuth, GoogleAuth, LocalStorageFeatureFlags, MicrosoftAuth, MultipleAnalyticsApi, NoOpAnalyticsApi, OAuth2, OAuthRequestManager, OktaAuth, OneLoginAuth, SamlAuth, UnhandledErrorForwarder, UrlPatternDiscovery, VMwareCloudAuth, WebStorage, createFetchApi, createSpecializedApp, defaultConfigLoader };\n//# sourceMappingURL=index.esm.js.map\n","import { useApi, alertApiRef, identityApiRef, configApiRef, useAnalytics, errorApiRef, storageApiRef, useApp, oauthRequestApiRef, useApiHolder, attachComponentData, useElementFilter, discoveryApiRef } from '@backstage/core-plugin-api';\nimport IconButton from '@material-ui/core/IconButton';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { Alert } from '@material-ui/lab';\nimport pluralize from 'pluralize';\nimport React, { useState, useEffect, useMemo, useRef, useCallback, useLayoutEffect, lazy, Suspense, Component as Component$3, Children, isValidElement, useContext, Fragment, forwardRef, createContext } from 'react';\nimport { useIdleTimer, workerTimers } from 'react-idle-timer';\nimport Button$1 from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MaterialAvatar from '@material-ui/core/Avatar';\nimport { makeStyles, useTheme, darken, lighten, withStyles, createStyles, styled, alpha, ThemeProvider } from '@material-ui/core/styles';\nimport MaterialLink from '@material-ui/core/Link';\nimport classNames from 'classnames';\nimport { trimEnd, isEqual, transform, orderBy, isMatch } from 'lodash';\nimport { Link as Link$1, createRoutesFromChildren, Route as Route$1, useSearchParams, useNavigate, useParams, useRoutes, matchRoutes, useLocation, useResolvedPath as useResolvedPath$1, resolvePath } from 'react-router-dom';\nimport Box from '@material-ui/core/Box';\nimport LightAsync from 'react-syntax-highlighter/dist/esm/light-async';\nimport dark from 'react-syntax-highlighter/dist/esm/styles/hljs/dark';\nimport docco from 'react-syntax-highlighter/dist/esm/styles/hljs/docco';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport CopyIcon from '@material-ui/icons/FileCopy';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport AddCircleOutline from '@material-ui/icons/AddCircleOutline';\nimport * as d3Zoom from 'd3-zoom';\nimport * as d3Selection from 'd3-selection';\nimport useTheme$1 from '@material-ui/core/styles/useTheme';\nimport dagre from 'dagre';\nimport debounce from 'lodash/debounce';\nimport makeStyles$1 from '@material-ui/core/styles/makeStyles';\nimport * as d3Shape from 'd3-shape';\nimport isFinite from 'lodash/isFinite';\nimport useObservable from 'react-use/lib/useObservable';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport Grid from '@material-ui/core/Grid';\nimport missingAnnotation from './components/EmptyState/assets/missingAnnotation.svg';\nimport noInformation from './components/EmptyState/assets/noInformation.svg';\nimport createComponent from './components/EmptyState/assets/createComponent.svg';\nimport noBuild from './components/EmptyState/assets/noBuild.svg';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport ErrorOutline from '@material-ui/icons/ErrorOutline';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ReactMarkdown from 'react-markdown';\nimport gfm from 'remark-gfm';\nimport Divider from '@material-ui/core/Divider';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { createPortal } from 'react-dom';\nimport LinkIcon from '@material-ui/icons/Link';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport { isError, ResponseError, ForwardedError } from '@backstage/errors';\nimport TextTruncate from 'react-text-truncate';\nimport { useIsMounted, useDebouncedEffect, useAsync, useMountEffect } from '@react-hookz/web';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport ArrowIcon from '@material-ui/icons/ArrowForward';\nimport { Circle, Line } from 'rc-progress';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Chip from '@material-ui/core/Chip';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputBase from '@material-ui/core/InputBase';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport MuiStepper from '@material-ui/core/Stepper';\nimport MuiStep from '@material-ui/core/Step';\nimport StepContent from '@material-ui/core/StepContent';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport startCase from 'lodash/startCase';\nimport Table$1 from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport MenuList from '@material-ui/core/MenuList';\nimport Popover from '@material-ui/core/Popover';\nimport qs from 'qs';\nimport MuiBrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport { Helmet } from 'react-helmet';\nimport TabUI from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport MTable, { MTableHeader, MTableToolbar, MTableBody } from '@material-table/core';\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowUpward from '@material-ui/icons/ArrowUpward';\nimport Check from '@material-ui/icons/Check';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { Sparklines, SparklinesLine } from 'react-sparklines';\nimport MicDropSvgUrl from './layout/ErrorPage/mic-drop.svg';\nimport MaterialBreadcrumbs from '@material-ui/core/Breadcrumbs';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport Drawer from '@material-ui/core/Drawer';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport { createVersionedContext, createVersionedValueMap } from '@backstage/version-bridge';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport Badge from '@material-ui/core/Badge';\nimport TextField from '@material-ui/core/TextField';\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport { z } from 'zod';\nimport { useForm } from 'react-hook-form';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport isEmpty from 'lodash/isEmpty';\n\nfunction AlertDisplay(props) {\n  const [messages, setMessages] = useState([]);\n  const alertApi = useApi(alertApiRef);\n  const {\n    anchorOrigin = { vertical: \"top\", horizontal: \"center\" },\n    transientTimeoutMs\n  } = props;\n  const timeoutMs = transientTimeoutMs != null ? transientTimeoutMs : 5e3;\n  useEffect(() => {\n    const subscription = alertApi.alert$().subscribe((message) => setMessages((msgs) => msgs.concat(message)));\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [alertApi]);\n  const [firstMessage] = messages;\n  useEffect(() => {\n    if (firstMessage && firstMessage.display === \"transient\") {\n      const timeout = setTimeout(() => {\n        setMessages((msgs) => {\n          const newMsgs = msgs.filter((msg) => msg !== firstMessage);\n          return newMsgs.length === msgs.length ? msgs : newMsgs;\n        });\n      }, timeoutMs);\n      return () => clearTimeout(timeout);\n    }\n    return void 0;\n  }, [firstMessage, timeoutMs]);\n  if (messages.length === 0) {\n    return null;\n  }\n  const handleClose = () => {\n    setMessages((msgs) => msgs.filter((msg) => msg !== firstMessage));\n  };\n  return /* @__PURE__ */ React.createElement(Snackbar, { open: true, anchorOrigin }, /* @__PURE__ */ React.createElement(\n    Alert,\n    {\n      action: /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          color: \"inherit\",\n          size: \"small\",\n          onClick: handleClose,\n          \"data-testid\": \"error-button-close\"\n        },\n        /* @__PURE__ */ React.createElement(CloseIcon, null)\n      ),\n      severity: firstMessage.severity\n    },\n    /* @__PURE__ */ React.createElement(Typography, { component: \"span\" }, String(firstMessage.message), messages.length > 1 && /* @__PURE__ */ React.createElement(\"em\", null, ` (${messages.length - 1} older ${pluralize(\n      \"message\",\n      messages.length - 1\n    )})`))\n  ));\n}\n\nconst LAST_SEEN_ONLINE_STORAGE_KEY = \"@backstage/autologout:lastSeenOnline\";\nconst useLogoutDisconnectedUserEffect = ({\n  enableEffect,\n  autologoutIsEnabled,\n  idleTimeoutSeconds,\n  lastSeenOnlineStore,\n  identityApi\n}) => {\n  useEffect(() => {\n    if (autologoutIsEnabled && enableEffect) {\n      const lastSeenOnline = lastSeenOnlineStore.get();\n      if (lastSeenOnline) {\n        const now = /* @__PURE__ */ new Date();\n        const nowSeconds = Math.ceil(now.getTime() / 1e3);\n        const lastSeenOnlineSeconds = Math.ceil(\n          lastSeenOnline.getTime() / 1e3\n        );\n        if (nowSeconds - lastSeenOnlineSeconds > idleTimeoutSeconds) {\n          identityApi.signOut();\n        }\n      }\n      lastSeenOnlineStore.save(/* @__PURE__ */ new Date());\n    } else {\n      lastSeenOnlineStore.delete();\n    }\n  }, [\n    autologoutIsEnabled,\n    enableEffect,\n    identityApi,\n    idleTimeoutSeconds,\n    lastSeenOnlineStore\n  ]);\n};\n\nconst StillTherePrompt = (props) => {\n  const {\n    idleTimer,\n    setOpen,\n    open,\n    promptTimeoutMillis,\n    remainingTime,\n    setRemainingTime\n  } = props;\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setRemainingTime(Math.ceil(idleTimer.getRemainingTime()));\n    }, 500);\n    return () => {\n      clearInterval(interval);\n    };\n  }, [idleTimer, setRemainingTime]);\n  const handleStillHere = () => {\n    setOpen(false);\n    idleTimer.activate();\n  };\n  const timeTillPrompt = Math.max(\n    remainingTime - promptTimeoutMillis / 1e3,\n    0\n  );\n  const seconds = timeTillPrompt > 1 ? \"seconds\" : \"second\";\n  return /* @__PURE__ */ React.createElement(Dialog, { open, \"data-testid\": \"inactivity-prompt-dialog\" }, /* @__PURE__ */ React.createElement(DialogTitle, null, \"Logging out due to inactivity\"), /* @__PURE__ */ React.createElement(DialogContent, null, /* @__PURE__ */ React.createElement(DialogContentText, null, \"You are about to be disconnected in\", \" \", /* @__PURE__ */ React.createElement(\"b\", null, Math.ceil(remainingTime / 1e3), \" \", seconds), \". Are you still there?\")), /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      onClick: handleStillHere,\n      color: \"secondary\",\n      variant: \"contained\",\n      size: \"small\"\n    },\n    \"Yes! Don't log me out\"\n  )));\n};\n\nclass DefaultTimestampStore {\n  constructor(key) {\n    this.key = key;\n  }\n  save(date) {\n    localStorage.setItem(this.key, date.toJSON());\n  }\n  delete() {\n    localStorage.removeItem(this.key);\n  }\n  get() {\n    const timestamp = localStorage.getItem(this.key);\n    return timestamp !== null ? new Date(Date.parse(timestamp)) : null;\n  }\n}\n\nconst ConditionalAutoLogout = ({\n  idleTimeoutMinutes,\n  events,\n  useWorkerTimers,\n  logoutIfDisconnected,\n  promptBeforeIdleSeconds,\n  promptOpen,\n  setPromptOpen,\n  remainingTimeCountdown,\n  setRemainingTimeCountdown,\n  identityApi,\n  lastSeenOnlineStore\n}) => {\n  const promptBeforeIdleMillis = promptBeforeIdleSeconds * 1e3;\n  const promptBeforeIdle = promptBeforeIdleMillis > 0 ? true : false;\n  const onPrompt = async () => {\n    setPromptOpen(true);\n    setRemainingTimeCountdown(promptBeforeIdleMillis);\n  };\n  const onIdle = () => {\n    setPromptOpen(false);\n    setRemainingTimeCountdown(0);\n    identityApi.signOut();\n  };\n  const onActive = () => {\n    setPromptOpen(false);\n    setRemainingTimeCountdown(0);\n  };\n  const onAction = (_event, _idleTimer) => {\n    lastSeenOnlineStore.save(/* @__PURE__ */ new Date());\n  };\n  const timer = useIdleTimer({\n    timeout: idleTimeoutMinutes * 60 * 1e3,\n    events,\n    crossTab: true,\n    name: \"autologout-timer\",\n    timers: useWorkerTimers ? workerTimers : void 0,\n    onIdle,\n    onActive: promptBeforeIdle ? onActive : void 0,\n    onAction: logoutIfDisconnected ? onAction : void 0,\n    onPrompt: promptBeforeIdle ? onPrompt : void 0,\n    promptBeforeIdle: promptBeforeIdle ? promptBeforeIdleMillis : void 0,\n    syncTimers: 1e3\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, promptBeforeIdle && /* @__PURE__ */ React.createElement(\n    StillTherePrompt,\n    {\n      idleTimer: timer,\n      open: promptOpen,\n      setOpen: setPromptOpen,\n      remainingTime: remainingTimeCountdown,\n      setRemainingTime: setRemainingTimeCountdown,\n      promptTimeoutMillis: promptBeforeIdleMillis\n    }\n  ));\n};\nconst defaultConfig = {\n  enabled: true,\n  idleTimeoutMinutes: 0.5,\n  promptBeforeIdleSeconds: 10,\n  useWorkerTimers: true,\n  logoutIfDisconnected: true\n};\nconst defaultTrackedEvents = [\n  \"mousemove\",\n  \"keydown\",\n  \"wheel\",\n  \"DOMMouseScroll\",\n  \"mousewheel\",\n  \"mousedown\",\n  \"touchstart\",\n  \"touchmove\",\n  \"MSPointerDown\",\n  \"MSPointerMove\",\n  \"visibilitychange\"\n];\nconst parseConfig = (configApi, props) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j;\n  return {\n    enabled: (_b = (_a = configApi.getOptionalBoolean(\"auth.autologout.enabled\")) != null ? _a : props.enabled) != null ? _b : defaultConfig.enabled,\n    idleTimeoutMinutes: (_d = (_c = configApi.getOptionalNumber(\"auth.autologout.idleTimeoutMinutes\")) != null ? _c : props.idleTimeoutMinutes) != null ? _d : defaultConfig.idleTimeoutMinutes,\n    promptBeforeIdleSeconds: (_f = (_e = configApi.getOptionalNumber(\"auth.autologout.promptBeforeIdleSeconds\")) != null ? _e : props.promptBeforeIdleSeconds) != null ? _f : defaultConfig.promptBeforeIdleSeconds,\n    useWorkerTimers: (_h = (_g = configApi.getOptionalBoolean(\"auth.autologout.useWorkerTimers\")) != null ? _g : props.useWorkerTimers) != null ? _h : defaultConfig.useWorkerTimers,\n    logoutIfDisconnected: (_j = (_i = configApi.getOptionalBoolean(\"auth.autologout.logoutIfDisconnected\")) != null ? _i : props.logoutIfDisconnected) != null ? _j : defaultConfig.logoutIfDisconnected\n  };\n};\nconst AutoLogout = (props) => {\n  const identityApi = useApi(identityApiRef);\n  const configApi = useApi(configApiRef);\n  const [isLogged, setIsLogged] = useState(false);\n  useEffect(() => {\n    async function isLoggedIn(identity) {\n      if ((await identity.getCredentials()).token) {\n        setIsLogged(true);\n      } else {\n        setIsLogged(false);\n      }\n    }\n    isLoggedIn(identityApi);\n  }, [identityApi]);\n  const {\n    enabled,\n    idleTimeoutMinutes,\n    promptBeforeIdleSeconds,\n    logoutIfDisconnected,\n    useWorkerTimers\n  } = useMemo(() => {\n    return parseConfig(configApi, props);\n  }, [configApi, props]);\n  useEffect(() => {\n    if (idleTimeoutMinutes < 0.5) {\n      throw new Error(\n        \"\\u274C idleTimeoutMinutes property should be >= 0.5 minutes (30 seconds).\"\n      );\n    }\n    if (promptBeforeIdleSeconds < 0) {\n      throw new Error(\n        \"\\u274C promptBeforeIdleSeconds property should be >= 0 seconds. Set to 0 to disable the prompt.\"\n      );\n    }\n    if (idleTimeoutMinutes * 60 <= promptBeforeIdleSeconds) {\n      throw new Error(\n        `\\u274C promptBeforeIdleSeconds should be smaller than idleTimeoutMinutes`\n      );\n    }\n  }, [idleTimeoutMinutes, promptBeforeIdleSeconds]);\n  const lastSeenOnlineStore = useMemo(\n    () => new DefaultTimestampStore(LAST_SEEN_ONLINE_STORAGE_KEY),\n    []\n  );\n  const [promptOpen, setPromptOpen] = useState(false);\n  const [remainingTimeCountdown, setRemainingTimeCountdown] = useState(0);\n  useLogoutDisconnectedUserEffect({\n    enableEffect: logoutIfDisconnected,\n    autologoutIsEnabled: enabled && isLogged,\n    idleTimeoutSeconds: idleTimeoutMinutes * 60,\n    lastSeenOnlineStore,\n    identityApi\n  });\n  if (!enabled || !isLogged) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(\n    ConditionalAutoLogout,\n    {\n      idleTimeoutMinutes,\n      promptBeforeIdleSeconds,\n      useWorkerTimers,\n      events: defaultTrackedEvents,\n      logoutIfDisconnected,\n      promptOpen,\n      setPromptOpen,\n      remainingTimeCountdown,\n      setRemainingTimeCountdown,\n      identityApi,\n      lastSeenOnlineStore\n    }\n  );\n};\n\nfunction stringToColor(str) {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  let color = \"#\";\n  for (let i = 0; i < 3; i++) {\n    const value = hash >> i * 8 & 255;\n    color += `00${value.toString(16)}`.slice(-2);\n  }\n  return color;\n}\nfunction extractInitials(name) {\n  var _a;\n  const names = name.trim().split(\" \");\n  const firstName = (_a = names[0]) != null ? _a : \"\";\n  const lastName = names.length > 1 ? names[names.length - 1] : \"\";\n  return firstName && lastName ? `${firstName.charAt(0)}${lastName.charAt(0)}` : firstName.charAt(0);\n}\n\nconst useStyles$O = makeStyles(\n  (theme) => ({\n    avatar: {\n      width: \"4rem\",\n      height: \"4rem\",\n      color: theme.palette.common.white\n    },\n    avatarText: {\n      fontWeight: theme.typography.fontWeightBold,\n      letterSpacing: \"1px\",\n      textTransform: \"uppercase\"\n    }\n  }),\n  { name: \"BackstageAvatar\" }\n);\nfunction Avatar(props) {\n  const { displayName, picture, customStyles } = props;\n  const classes = useStyles$O();\n  let styles = { ...customStyles };\n  const fontStyles = {\n    fontFamily: styles.fontFamily,\n    fontSize: styles.fontSize,\n    fontWeight: styles.fontWeight\n  };\n  if (!picture) {\n    styles = {\n      backgroundColor: stringToColor(displayName || \"\"),\n      ...customStyles\n    };\n  }\n  return /* @__PURE__ */ React.createElement(\n    MaterialAvatar,\n    {\n      alt: displayName,\n      src: picture,\n      className: classes.avatar,\n      style: styles\n    },\n    displayName && /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        variant: \"h6\",\n        component: \"span\",\n        className: classes.avatarText,\n        style: fontStyles\n      },\n      extractInitials(displayName)\n    )\n  );\n}\n\nfunction isReactRouterBeta() {\n  const [obj] = createRoutesFromChildren(/* @__PURE__ */ React.createElement(Route$1, { index: true, element: /* @__PURE__ */ React.createElement(\"div\", null) }));\n  return !obj.index;\n}\nconst useStyles$N = makeStyles(\n  {\n    visuallyHidden: {\n      clip: \"rect(0 0 0 0)\",\n      clipPath: \"inset(50%)\",\n      overflow: \"hidden\",\n      position: \"absolute\",\n      userSelect: \"none\",\n      whiteSpace: \"nowrap\",\n      height: 1,\n      width: 1\n    },\n    externalLink: {\n      position: \"relative\"\n    }\n  },\n  { name: \"Link\" }\n);\nconst isExternalUri = (uri) => /^([a-z+.-]+):/.test(uri);\nconst scriptProtocolPattern = (\n  // eslint-disable-next-line no-control-regex\n  /^[\\u0000-\\u001F ]*j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*\\:/i\n);\nconst originalWindowOpen = window.open;\nif (originalWindowOpen && !originalWindowOpen.__backstage) {\n  const newOpen = function open(...args) {\n    const url = String(args[0]);\n    if (scriptProtocolPattern.test(url)) {\n      throw new Error(\n        \"Rejected window.open() with a javascript: URL as a security precaution\"\n      );\n    }\n    return originalWindowOpen.apply(this, args);\n  };\n  newOpen.__backstage = true;\n  window.open = newOpen;\n}\nconst useBaseUrl = () => {\n  try {\n    const config = useApi(configApiRef);\n    return config.getOptionalString(\"app.baseUrl\");\n  } catch {\n    return void 0;\n  }\n};\nconst useBasePath = () => {\n  var _a;\n  const base = \"http://sample.dev\";\n  const url = (_a = useBaseUrl()) != null ? _a : \"/\";\n  const { pathname } = new URL(url, base);\n  return trimEnd(pathname, \"/\");\n};\nconst useResolvedPath = (uri) => {\n  let resolvedPath = String(uri);\n  const basePath = useBasePath();\n  const external = isExternalUri(resolvedPath);\n  const startsWithBasePath = resolvedPath.startsWith(basePath);\n  if (!external && !startsWithBasePath) {\n    resolvedPath = basePath.concat(resolvedPath);\n  }\n  return resolvedPath;\n};\nconst getNodeText = (node) => {\n  var _a;\n  if (node instanceof Array) {\n    return node.map(getNodeText).join(\" \").trim();\n  }\n  if (typeof node === \"object\" && node) {\n    return getNodeText((_a = node == null ? void 0 : node.props) == null ? void 0 : _a.children);\n  }\n  if ([\"string\", \"number\"].includes(typeof node)) {\n    return String(node);\n  }\n  return \"\";\n};\nconst Link = React.forwardRef(\n  ({ onClick, noTrack, ...props }, ref) => {\n    const classes = useStyles$N();\n    const analytics = useAnalytics();\n    const to = isReactRouterBeta() ? useResolvedPath(props.to) : props.to;\n    const linkText = getNodeText(props.children) || to;\n    const external = isExternalUri(to);\n    const newWindow = external && !!/^https?:/.exec(to);\n    if (scriptProtocolPattern.test(to)) {\n      throw new Error(\n        \"Link component rejected javascript: URL as a security precaution\"\n      );\n    }\n    const handleClick = (event) => {\n      onClick == null ? void 0 : onClick(event);\n      if (!noTrack) {\n        analytics.captureEvent(\"click\", linkText, { attributes: { to } });\n      }\n    };\n    return external ? (\n      // External links\n      /* @__PURE__ */ React.createElement(\n        MaterialLink,\n        {\n          ...newWindow ? { target: \"_blank\", rel: \"noopener\" } : {},\n          ...props,\n          ...props[\"aria-label\"] ? { \"aria-label\": `${props[\"aria-label\"]}, Opens in a new window` } : {},\n          ref,\n          href: to,\n          onClick: handleClick,\n          className: classNames(classes.externalLink, props.className)\n        },\n        props.children,\n        /* @__PURE__ */ React.createElement(Typography, { component: \"span\", className: classes.visuallyHidden }, \", Opens in a new window\")\n      )\n    ) : (\n      // Interact with React Router for internal links\n      /* @__PURE__ */ React.createElement(\n        MaterialLink,\n        {\n          ...props,\n          ref,\n          component: Link$1,\n          to,\n          onClick: handleClick\n        }\n      )\n    );\n  }\n);\n\nconst LinkWrapper = React.forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Link, { ref, ...props, color: \"initial\" }));\nconst LinkButton = React.forwardRef(\n  (props, ref) => /* @__PURE__ */ React.createElement(Button$1, { ref, component: LinkWrapper, ...props })\n);\nconst Button = LinkButton;\n\nfunction CopyTextButton(props) {\n  const {\n    text,\n    tooltipDelay = 1e3,\n    tooltipText = \"Text copied to clipboard\",\n    \"aria-label\": ariaLabel = \"Copy text\"\n  } = props;\n  const errorApi = useApi(errorApiRef);\n  const [open, setOpen] = useState(false);\n  const [{ error }, copyToClipboard] = useCopyToClipboard();\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  const handleCopyClick = (e) => {\n    e.stopPropagation();\n    setOpen(true);\n    copyToClipboard(text);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    Tooltip,\n    {\n      id: \"copy-test-tooltip\",\n      title: tooltipText,\n      placement: \"top\",\n      leaveDelay: tooltipDelay,\n      onClose: () => setOpen(false),\n      open\n    },\n    /* @__PURE__ */ React.createElement(IconButton, { onClick: handleCopyClick, \"aria-label\": ariaLabel }, /* @__PURE__ */ React.createElement(CopyIcon, null))\n  ));\n}\n\nfunction CodeSnippet(props) {\n  const {\n    text,\n    language,\n    showLineNumbers = false,\n    highlightedNumbers,\n    customStyle,\n    showCopyCodeButton = false\n  } = props;\n  const theme = useTheme();\n  const mode = theme.palette.type === \"dark\" ? dark : docco;\n  const highlightColor = theme.palette.type === \"dark\" ? \"#256bf3\" : \"#e6ffed\";\n  return /* @__PURE__ */ React.createElement(Box, { position: \"relative\" }, /* @__PURE__ */ React.createElement(\n    LightAsync,\n    {\n      customStyle,\n      language,\n      style: mode,\n      showLineNumbers,\n      wrapLines: true,\n      lineNumberStyle: { color: theme.palette.textVerySubtle },\n      lineProps: (lineNumber) => (highlightedNumbers == null ? void 0 : highlightedNumbers.includes(lineNumber)) ? {\n        style: {\n          backgroundColor: highlightColor\n        }\n      } : {}\n    },\n    text\n  ), showCopyCodeButton && /* @__PURE__ */ React.createElement(Box, { position: \"absolute\", top: 0, right: 0 }, /* @__PURE__ */ React.createElement(CopyTextButton, { text })));\n}\n\nfunction CreateButton(props) {\n  const { title, to } = props;\n  const isXSScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"xs\")\n  );\n  if (!to) {\n    return null;\n  }\n  return isXSScreen ? /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      component: Link$1,\n      color: \"primary\",\n      title,\n      size: \"small\",\n      to\n    },\n    /* @__PURE__ */ React.createElement(AddCircleOutline, null)\n  ) : /* @__PURE__ */ React.createElement(Button$1, { component: Link$1, variant: \"contained\", color: \"primary\", to }, title);\n}\n\nvar DependencyGraphTypes;\n((DependencyGraphTypes2) => {\n  ((Direction2) => {\n    Direction2[\"TOP_BOTTOM\"] = \"TB\";\n    Direction2[\"BOTTOM_TOP\"] = \"BT\";\n    Direction2[\"LEFT_RIGHT\"] = \"LR\";\n    Direction2[\"RIGHT_LEFT\"] = \"RL\";\n  })(DependencyGraphTypes2.Direction || (DependencyGraphTypes2.Direction = {}));\n  ((Alignment2) => {\n    Alignment2[\"UP_LEFT\"] = \"UL\";\n    Alignment2[\"UP_RIGHT\"] = \"UR\";\n    Alignment2[\"DOWN_LEFT\"] = \"DL\";\n    Alignment2[\"DOWN_RIGHT\"] = \"DR\";\n  })(DependencyGraphTypes2.Alignment || (DependencyGraphTypes2.Alignment = {}));\n  ((Ranker2) => {\n    Ranker2[\"NETWORK_SIMPLEX\"] = \"network-simplex\";\n    Ranker2[\"TIGHT_TREE\"] = \"tight-tree\";\n    Ranker2[\"LONGEST_PATH\"] = \"longest-path\";\n  })(DependencyGraphTypes2.Ranker || (DependencyGraphTypes2.Ranker = {}));\n  ((LabelPosition2) => {\n    LabelPosition2[\"LEFT\"] = \"l\";\n    LabelPosition2[\"RIGHT\"] = \"r\";\n    LabelPosition2[\"CENTER\"] = \"c\";\n  })(DependencyGraphTypes2.LabelPosition || (DependencyGraphTypes2.LabelPosition = {}));\n})(DependencyGraphTypes || (DependencyGraphTypes = {}));\n\nconst useStyles$M = makeStyles(\n  (theme) => ({\n    node: {\n      fill: theme.palette.primary.light,\n      stroke: theme.palette.primary.light\n    },\n    text: {\n      fill: theme.palette.primary.contrastText\n    }\n  }),\n  { name: \"BackstageDependencyGraphDefaultNode\" }\n);\nfunction DefaultNode({ node: { id } }) {\n  const classes = useStyles$M();\n  const [width, setWidth] = React.useState(0);\n  const [height, setHeight] = React.useState(0);\n  const idRef = React.useRef(null);\n  React.useLayoutEffect(() => {\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n  const padding = 10;\n  const paddedWidth = width + padding * 2;\n  const paddedHeight = height + padding * 2;\n  return /* @__PURE__ */ React.createElement(\"g\", null, /* @__PURE__ */ React.createElement(\n    \"rect\",\n    {\n      className: classes.node,\n      width: paddedWidth,\n      height: paddedHeight,\n      rx: 10\n    }\n  ), /* @__PURE__ */ React.createElement(\n    \"text\",\n    {\n      ref: idRef,\n      className: classes.text,\n      y: paddedHeight / 2,\n      x: paddedWidth / 2,\n      textAnchor: \"middle\",\n      alignmentBaseline: \"middle\"\n    },\n    id\n  ));\n}\n\nconst ARROW_MARKER_ID = \"arrow-marker\";\nconst NODE_TEST_ID = \"node\";\nconst EDGE_TEST_ID = \"edge\";\nconst LABEL_TEST_ID = \"label\";\n\nconst useStyles$L = makeStyles$1(\n  (theme) => ({\n    node: {\n      transition: `${theme.transitions.duration.shortest}ms`\n    }\n  }),\n  { name: \"BackstageDependencyGraphNode\" }\n);\nconst renderDefault$1 = (props) => /* @__PURE__ */ React.createElement(DefaultNode, { ...props });\nfunction Node({\n  render = renderDefault$1,\n  setNode,\n  node\n}) {\n  const { width, height, x = 0, y = 0 } = node;\n  const nodeProps = node;\n  const classes = useStyles$L();\n  const nodeRef = React.useRef(null);\n  React.useLayoutEffect(() => {\n    if (nodeRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = nodeRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setNode(node.id, {\n          ...node,\n          height: renderedHeight,\n          width: renderedWidth\n        });\n      }\n    }\n  }, [node, width, height, setNode]);\n  return /* @__PURE__ */ React.createElement(\n    \"g\",\n    {\n      ref: nodeRef,\n      \"data-testid\": NODE_TEST_ID,\n      className: classes.node,\n      transform: `translate(${x - width / 2},${y - height / 2})`\n    },\n    render({ node: nodeProps })\n  );\n}\n\nconst useStyles$K = makeStyles$1(\n  (theme) => ({\n    text: {\n      fill: theme.palette.textContrast\n    }\n  }),\n  { name: \"BackstageDependencyGraphDefaultLabel\" }\n);\nfunction DefaultLabel({ edge: { label } }) {\n  const classes = useStyles$K();\n  return /* @__PURE__ */ React.createElement(\"text\", { className: classes.text, textAnchor: \"middle\" }, label);\n}\n\nconst useStyles$J = makeStyles$1(\n  (theme) => ({\n    path: {\n      strokeWidth: 1.3,\n      stroke: theme.palette.textSubtle,\n      fill: \"none\",\n      transition: `${theme.transitions.duration.shortest}ms`\n    },\n    label: {\n      transition: `${theme.transitions.duration.shortest}ms`\n    }\n  }),\n  { name: \"BackstageDependencyGraphEdge\" }\n);\nconst renderDefault = (props) => /* @__PURE__ */ React.createElement(DefaultLabel, { ...props });\nfunction Edge({\n  render = renderDefault,\n  setEdge,\n  id,\n  edge,\n  curve,\n  showArrowHeads\n}) {\n  const { x = 0, y = 0, width, height, points } = edge;\n  const labelProps = edge;\n  const classes = useStyles$J();\n  const labelRef = React.useRef(null);\n  React.useLayoutEffect(() => {\n    if (labelRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = labelRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setEdge(id, {\n          ...edge,\n          height: renderedHeight,\n          width: renderedWidth\n        });\n      }\n    }\n  }, [edge, height, width, setEdge, id]);\n  let path = \"\";\n  const createPath = React.useMemo(\n    () => d3Shape.line().x((d) => d.x).y((d) => d.y).curve(d3Shape[curve]),\n    [curve]\n  );\n  if (points) {\n    const finitePoints = points.filter(\n      (point) => isFinite(point.x) && isFinite(point.y)\n    );\n    path = createPath(finitePoints) || \"\";\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, path && /* @__PURE__ */ React.createElement(\n    \"path\",\n    {\n      \"data-testid\": EDGE_TEST_ID,\n      className: classes.path,\n      markerEnd: showArrowHeads ? `url(#${ARROW_MARKER_ID})` : void 0,\n      d: path\n    }\n  ), labelProps.label ? /* @__PURE__ */ React.createElement(\n    \"g\",\n    {\n      ref: labelRef,\n      \"data-testid\": LABEL_TEST_ID,\n      className: classes.label,\n      transform: `translate(${x},${y})`\n    },\n    render({ edge: labelProps })\n  ) : null);\n}\n\nconst WORKSPACE_ID = \"workspace\";\nfunction DependencyGraph(props) {\n  var _a, _b;\n  const {\n    edges,\n    nodes,\n    renderNode,\n    direction = DependencyGraphTypes.Direction.TOP_BOTTOM,\n    align,\n    nodeMargin = 50,\n    edgeMargin = 10,\n    rankMargin = 50,\n    paddingX = 0,\n    paddingY = 0,\n    acyclicer,\n    ranker = DependencyGraphTypes.Ranker.NETWORK_SIMPLEX,\n    labelPosition = DependencyGraphTypes.LabelPosition.RIGHT,\n    labelOffset = 10,\n    edgeRanks = 1,\n    edgeWeight = 1,\n    renderLabel,\n    defs,\n    zoom = \"enabled\",\n    curve = \"curveMonotoneX\",\n    showArrowHeads = false,\n    fit = \"grow\",\n    ...svgProps\n  } = props;\n  const theme = useTheme$1();\n  const [containerWidth, setContainerWidth] = React.useState(100);\n  const [containerHeight, setContainerHeight] = React.useState(100);\n  const graph = React.useRef(new dagre.graphlib.Graph());\n  const [graphWidth, setGraphWidth] = React.useState(\n    ((_a = graph.current.graph()) == null ? void 0 : _a.width) || 0\n  );\n  const [graphHeight, setGraphHeight] = React.useState(\n    ((_b = graph.current.graph()) == null ? void 0 : _b.height) || 0\n  );\n  const [graphNodes, setGraphNodes] = React.useState([]);\n  const [graphEdges, setGraphEdges] = React.useState([]);\n  const maxWidth = Math.max(graphWidth, containerWidth);\n  const maxHeight = Math.max(graphHeight, containerHeight);\n  const minHeight = Math.min(graphHeight, containerHeight);\n  const scalableHeight = fit === \"grow\" ? maxHeight : minHeight;\n  const containerRef = React.useMemo(\n    () => debounce((node) => {\n      if (!node) {\n        return;\n      }\n      const container = d3Selection.select(node);\n      const workspace = d3Selection.select(node.getElementById(WORKSPACE_ID));\n      function enableZoom() {\n        container.call(\n          d3Zoom.zoom().scaleExtent([1, Infinity]).on(\"zoom\", (event) => {\n            event.transform.x = Math.min(\n              0,\n              Math.max(\n                event.transform.x,\n                maxWidth - maxWidth * event.transform.k\n              )\n            );\n            event.transform.y = Math.min(\n              0,\n              Math.max(\n                event.transform.y,\n                maxHeight - maxHeight * event.transform.k\n              )\n            );\n            workspace.attr(\"transform\", event.transform);\n          })\n        );\n      }\n      if (zoom === \"enabled\") {\n        enableZoom();\n      } else if (zoom === \"enable-on-click\") {\n        container.on(\"click\", () => enableZoom());\n      }\n      const { width: newContainerWidth, height: newContainerHeight } = node.getBoundingClientRect();\n      if (containerWidth !== newContainerWidth) {\n        setContainerWidth(newContainerWidth);\n      }\n      if (containerHeight !== newContainerHeight) {\n        setContainerHeight(newContainerHeight);\n      }\n    }, 100),\n    [containerHeight, containerWidth, maxWidth, maxHeight, zoom]\n  );\n  const setNodesAndEdges = React.useCallback(() => {\n    const currentGraphNodes = graph.current.nodes();\n    const currentGraphEdges = graph.current.edges();\n    currentGraphNodes.forEach((nodeId) => {\n      const remainingNode = nodes.some((node) => node.id === nodeId);\n      if (!remainingNode) {\n        graph.current.removeNode(nodeId);\n      }\n    });\n    currentGraphEdges.forEach((e) => {\n      const remainingEdge = edges.some(\n        (edge) => edge.from === e.v && edge.to === e.w\n      );\n      if (!remainingEdge) {\n        graph.current.removeEdge(e.v, e.w);\n      }\n    });\n    nodes.forEach((node) => {\n      const existingNode = graph.current.nodes().find((nodeId) => node.id === nodeId);\n      if (existingNode && graph.current.node(existingNode)) {\n        const { width, height, x, y } = graph.current.node(existingNode);\n        graph.current.setNode(existingNode, { ...node, width, height, x, y });\n      } else {\n        graph.current.setNode(node.id, { ...node, width: 0, height: 0 });\n      }\n    });\n    edges.forEach((e) => {\n      graph.current.setEdge(e.from, e.to, {\n        ...e,\n        label: e.label,\n        width: 0,\n        height: 0,\n        labelpos: labelPosition,\n        labeloffset: labelOffset,\n        weight: edgeWeight,\n        minlen: edgeRanks\n      });\n    });\n  }, [edges, nodes, labelPosition, labelOffset, edgeWeight, edgeRanks]);\n  const updateGraph = React.useMemo(\n    () => debounce(\n      () => {\n        dagre.layout(graph.current);\n        const { height, width } = graph.current.graph();\n        const newHeight = Math.max(0, height || 0);\n        const newWidth = Math.max(0, width || 0);\n        setGraphWidth(newWidth);\n        setGraphHeight(newHeight);\n        setGraphNodes(graph.current.nodes());\n        setGraphEdges(graph.current.edges());\n      },\n      250,\n      { leading: true }\n    ),\n    []\n  );\n  React.useEffect(() => {\n    graph.current.setGraph({\n      rankdir: direction,\n      align,\n      nodesep: nodeMargin,\n      edgesep: edgeMargin,\n      ranksep: rankMargin,\n      marginx: paddingX,\n      marginy: paddingY,\n      acyclicer,\n      ranker\n    });\n    setNodesAndEdges();\n    updateGraph();\n    return updateGraph.cancel;\n  }, [\n    acyclicer,\n    align,\n    direction,\n    edgeMargin,\n    paddingX,\n    paddingY,\n    nodeMargin,\n    rankMargin,\n    ranker,\n    setNodesAndEdges,\n    updateGraph\n  ]);\n  function setNode(id, node) {\n    graph.current.setNode(id, node);\n    updateGraph();\n    return graph.current;\n  }\n  function setEdge(id, edge) {\n    graph.current.setEdge(id, edge);\n    updateGraph();\n    return graph.current;\n  }\n  return /* @__PURE__ */ React.createElement(\n    \"svg\",\n    {\n      ref: containerRef,\n      ...svgProps,\n      width: \"100%\",\n      height: scalableHeight,\n      viewBox: `0 0 ${maxWidth} ${maxHeight}`\n    },\n    /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\n      \"marker\",\n      {\n        id: ARROW_MARKER_ID,\n        viewBox: \"0 0 24 24\",\n        markerWidth: \"14\",\n        markerHeight: \"14\",\n        refX: \"16\",\n        refY: \"12\",\n        orient: \"auto\",\n        markerUnits: \"strokeWidth\"\n      },\n      /* @__PURE__ */ React.createElement(\n        \"path\",\n        {\n          fill: theme.palette.textSubtle,\n          d: \"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\"\n        }\n      )\n    ), defs),\n    /* @__PURE__ */ React.createElement(\"g\", { id: WORKSPACE_ID }, /* @__PURE__ */ React.createElement(\n      \"svg\",\n      {\n        width: graphWidth,\n        height: graphHeight,\n        y: maxHeight / 2 - graphHeight / 2,\n        x: maxWidth / 2 - graphWidth / 2,\n        viewBox: `0 0 ${graphWidth} ${graphHeight}`\n      },\n      graphEdges.map((e) => {\n        const edge = graph.current.edge(e);\n        if (!edge)\n          return null;\n        return /* @__PURE__ */ React.createElement(\n          Edge,\n          {\n            key: `${e.v}-${e.w}`,\n            id: e,\n            setEdge,\n            render: renderLabel,\n            edge,\n            curve,\n            showArrowHeads\n          }\n        );\n      }),\n      graphNodes.map((id) => {\n        const node = graph.current.node(id);\n        if (!node)\n          return null;\n        return /* @__PURE__ */ React.createElement(\n          Node,\n          {\n            key: id,\n            setNode,\n            render: renderNode,\n            node\n          }\n        );\n      })\n    ))\n  );\n}\n\nconst useStyles$I = makeStyles(\n  (theme) => {\n    var _a, _b;\n    return {\n      root: {\n        padding: theme.spacing(0),\n        marginBottom: theme.spacing(0),\n        marginTop: theme.spacing(0),\n        display: \"flex\",\n        flexFlow: \"row nowrap\"\n      },\n      // showing on top\n      topPosition: {\n        position: \"relative\",\n        marginBottom: theme.spacing(6),\n        marginTop: -theme.spacing(3),\n        zIndex: \"unset\"\n      },\n      icon: {\n        fontSize: theme.typography.h6.fontSize\n      },\n      content: {\n        width: \"100%\",\n        maxWidth: \"inherit\",\n        flexWrap: \"nowrap\",\n        color: theme.palette.banner.text\n      },\n      message: {\n        display: \"flex\",\n        alignItems: \"center\",\n        \"& a\": {\n          color: theme.palette.banner.link\n        }\n      },\n      button: {\n        color: (_a = theme.palette.banner.closeButtonColor) != null ? _a : \"inherit\"\n      },\n      info: {\n        backgroundColor: theme.palette.banner.info\n      },\n      error: {\n        backgroundColor: theme.palette.banner.error\n      },\n      warning: {\n        backgroundColor: (_b = theme.palette.banner.warning) != null ? _b : theme.palette.banner.error\n      }\n    };\n  },\n  { name: \"BackstageDismissableBanner\" }\n);\nconst DismissableBanner = (props) => {\n  var _a;\n  const { variant, message, id, fixed = false } = props;\n  const classes = useStyles$I();\n  const storageApi = useApi(storageApiRef);\n  const notificationsStore = storageApi.forBucket(\"notifications\");\n  const rawDismissedBanners = (_a = notificationsStore.snapshot(\"dismissedBanners\").value) != null ? _a : [];\n  const [dismissedBanners, setDismissedBanners] = useState(\n    new Set(rawDismissedBanners)\n  );\n  const observedItems = useObservable(\n    notificationsStore.observe$(\"dismissedBanners\")\n  );\n  useEffect(() => {\n    var _a2;\n    if (observedItems == null ? void 0 : observedItems.value) {\n      const currentValue = (_a2 = observedItems == null ? void 0 : observedItems.value) != null ? _a2 : [];\n      setDismissedBanners(new Set(currentValue));\n    }\n  }, [observedItems == null ? void 0 : observedItems.value]);\n  const handleClick = () => {\n    notificationsStore.set(\"dismissedBanners\", [...dismissedBanners, id]);\n  };\n  return /* @__PURE__ */ React.createElement(\n    Snackbar,\n    {\n      anchorOrigin: fixed ? { vertical: \"bottom\", horizontal: \"center\" } : { vertical: \"top\", horizontal: \"center\" },\n      open: !dismissedBanners.has(id),\n      classes: {\n        root: classNames(classes.root, !fixed && classes.topPosition)\n      }\n    },\n    /* @__PURE__ */ React.createElement(\n      SnackbarContent,\n      {\n        classes: {\n          root: classNames(classes.content, classes[variant]),\n          message: classes.message\n        },\n        message,\n        action: [\n          /* @__PURE__ */ React.createElement(\n            IconButton,\n            {\n              key: \"dismiss\",\n              title: \"Permanently dismiss this message\",\n              className: classes.button,\n              onClick: handleClick\n            },\n            /* @__PURE__ */ React.createElement(CloseIcon, { className: classes.icon })\n          )\n        ]\n      }\n    )\n  );\n};\n\nconst useStyles$H = makeStyles(\n  {\n    generalImg: {\n      width: \"95%\",\n      zIndex: 2,\n      position: \"relative\",\n      left: \"50%\",\n      top: \"50%\",\n      transform: \"translate(-50%, 15%)\"\n    }\n  },\n  { name: \"BackstageEmptyStateImage\" }\n);\nconst EmptyStateImage = ({ missing }) => {\n  const classes = useStyles$H();\n  switch (missing) {\n    case \"field\":\n      return /* @__PURE__ */ React.createElement(\n        \"img\",\n        {\n          src: missingAnnotation,\n          className: classes.generalImg,\n          alt: \"annotation is missing\"\n        }\n      );\n    case \"info\":\n      return /* @__PURE__ */ React.createElement(\n        \"img\",\n        {\n          src: noInformation,\n          alt: \"no Information\",\n          className: classes.generalImg\n        }\n      );\n    case \"content\":\n      return /* @__PURE__ */ React.createElement(\n        \"img\",\n        {\n          src: createComponent,\n          alt: \"create Component\",\n          className: classes.generalImg\n        }\n      );\n    case \"data\":\n      return /* @__PURE__ */ React.createElement(\"img\", { src: noBuild, alt: \"no Build\", className: classes.generalImg });\n    default:\n      return null;\n  }\n};\n\nconst useStyles$G = makeStyles(\n  (theme) => ({\n    root: {\n      backgroundColor: theme.palette.background.default,\n      padding: theme.spacing(2, 0, 0, 0)\n    },\n    action: {\n      marginTop: theme.spacing(2)\n    },\n    imageContainer: {\n      position: \"relative\"\n    }\n  }),\n  { name: \"BackstageEmptyState\" }\n);\nfunction EmptyState(props) {\n  const { title, description, missing, action } = props;\n  const classes = useStyles$G();\n  return /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      direction: \"row\",\n      justifyContent: \"space-around\",\n      alignItems: \"flex-start\",\n      className: classes.root,\n      spacing: 2\n    },\n    /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, md: 6 }, /* @__PURE__ */ React.createElement(Grid, { container: true, direction: \"column\" }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\" }, title)), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true }, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, description)), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true, className: classes.action }, action))),\n    /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, md: 6, className: classes.imageContainer }, typeof missing === \"string\" ? /* @__PURE__ */ React.createElement(EmptyStateImage, { missing }) : missing.customImage)\n  );\n}\n\nconst COMPONENT_YAML_TEMPLATE = `apiVersion: backstage.io/v1alpha1\nkind: Component\nmetadata:\n  name: example\n  description: example.com\n  annotations:\n    ANNOTATION: value\nspec:\n  type: website\n  lifecycle: production\n  owner: user:guest`;\nconst ANNOTATION_REGEXP = /^.*ANNOTATION.*$/m;\nconst ANNOTATION_YAML = COMPONENT_YAML_TEMPLATE.match(ANNOTATION_REGEXP)[0];\nconst ANNOTATION_LINE = COMPONENT_YAML_TEMPLATE.split(\"\\n\").findIndex(\n  (line) => ANNOTATION_REGEXP.test(line)\n);\nconst useStyles$F = makeStyles(\n  (theme) => ({\n    code: {\n      borderRadius: 6,\n      margin: theme.spacing(2, 0),\n      background: theme.palette.type === \"dark\" ? \"#444\" : theme.palette.common.white\n    }\n  }),\n  { name: \"BackstageMissingAnnotationEmptyState\" }\n);\nfunction generateLineNumbers(lineCount) {\n  return Array.from(Array(lineCount + 1).keys(), (i) => i + ANNOTATION_LINE);\n}\nfunction generateComponentYaml(annotations) {\n  const annotationYaml = annotations.map((ann) => ANNOTATION_YAML.replace(\"ANNOTATION\", ann)).join(\"\\n\");\n  return COMPONENT_YAML_TEMPLATE.replace(ANNOTATION_YAML, annotationYaml);\n}\nfunction generateDescription(annotations) {\n  const isSingular = annotations.length <= 1;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, \"The \", isSingular ? \"annotation\" : \"annotations\", \" \", annotations.map((ann) => /* @__PURE__ */ React.createElement(\"code\", null, ann)).reduce((prev, curr) => /* @__PURE__ */ React.createElement(React.Fragment, null, prev, \", \", curr)), \" \", isSingular ? \"is\" : \"are\", \" missing. You need to add the\", \" \", isSingular ? \"annotation\" : \"annotations\", \" to your component if you want to enable this tool.\");\n}\nfunction MissingAnnotationEmptyState(props) {\n  const { annotation, readMoreUrl } = props;\n  const annotations = Array.isArray(annotation) ? annotation : [annotation];\n  const url = readMoreUrl || \"https://backstage.io/docs/features/software-catalog/well-known-annotations\";\n  const classes = useStyles$F();\n  return /* @__PURE__ */ React.createElement(\n    EmptyState,\n    {\n      missing: \"field\",\n      title: \"Missing Annotation\",\n      description: generateDescription(annotations),\n      action: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"Add the annotation to your component YAML as shown in the highlighted example below:\"), /* @__PURE__ */ React.createElement(Box, { className: classes.code }, /* @__PURE__ */ React.createElement(\n        CodeSnippet,\n        {\n          text: generateComponentYaml(annotations),\n          language: \"yaml\",\n          showLineNumbers: true,\n          highlightedNumbers: generateLineNumbers(annotations.length),\n          customStyle: { background: \"inherit\", fontSize: \"115%\" }\n        }\n      )), /* @__PURE__ */ React.createElement(Button$1, { color: \"primary\", component: Link, to: url }, \"Read more\"))\n    }\n  );\n}\n\nconst useStyles$E = makeStyles(\n  (theme) => ({\n    markdown: {\n      \"& table\": {\n        borderCollapse: \"collapse\",\n        border: `1px solid ${theme.palette.border}`\n      },\n      \"& th, & td\": {\n        border: `1px solid ${theme.palette.border}`,\n        padding: theme.spacing(1)\n      },\n      \"& td\": {\n        wordBreak: \"break-word\",\n        overflow: \"hidden\",\n        verticalAlign: \"middle\",\n        lineHeight: \"1\",\n        margin: 0,\n        padding: theme.spacing(3, 2, 3, 2.5),\n        borderBottom: 0\n      },\n      \"& th\": {\n        backgroundColor: theme.palette.background.paper\n      },\n      \"& tr\": {\n        backgroundColor: theme.palette.background.paper\n      },\n      \"& tr:nth-child(odd)\": {\n        backgroundColor: theme.palette.background.default\n      },\n      \"& a\": {\n        color: theme.palette.link\n      },\n      \"& img\": {\n        maxWidth: \"100%\"\n      }\n    }\n  }),\n  { name: \"BackstageMarkdownContent\" }\n);\nconst flatten = (text, child) => {\n  if (!child)\n    return text;\n  return typeof child === \"string\" ? text + child : React.Children.toArray(child.props.children).reduce(flatten, text);\n};\nconst headingRenderer = ({ level, children }) => {\n  const childrenArray = React.Children.toArray(children);\n  const text = childrenArray.reduce(flatten, \"\");\n  const slug = text.toLocaleLowerCase(\"en-US\").replace(/\\W/g, \"-\");\n  return React.createElement(`h${level}`, { id: slug }, children);\n};\nconst components = {\n  code: ({ inline, className, children, ...props }) => {\n    const text = String(children).replace(/\\n+$/, \"\");\n    const match = /language-(\\w+)/.exec(className || \"\");\n    return !inline && match ? /* @__PURE__ */ React.createElement(CodeSnippet, { language: match[1], text }) : /* @__PURE__ */ React.createElement(\"code\", { className, ...props }, children);\n  },\n  h1: headingRenderer,\n  h2: headingRenderer,\n  h3: headingRenderer,\n  h4: headingRenderer,\n  h5: headingRenderer,\n  h6: headingRenderer\n};\nfunction MarkdownContent(props) {\n  const {\n    content,\n    dialect = \"gfm\",\n    linkTarget,\n    transformLinkUri,\n    transformImageUri,\n    className\n  } = props;\n  const classes = useStyles$E();\n  return /* @__PURE__ */ React.createElement(\n    ReactMarkdown,\n    {\n      remarkPlugins: dialect === \"gfm\" ? [gfm] : [],\n      className: `${classes.markdown} ${className}`,\n      children: content,\n      components,\n      linkTarget,\n      transformLinkUri,\n      transformImageUri\n    }\n  );\n}\n\nconst getWarningTextColor = (severity, theme) => {\n  const getColor = theme.palette.type === \"light\" ? darken : lighten;\n  return getColor(theme.palette[severity].light, 0.6);\n};\nconst getWarningBackgroundColor = (severity, theme) => {\n  const getBackgroundColor = theme.palette.type === \"light\" ? lighten : darken;\n  return getBackgroundColor(theme.palette[severity].light, 0.9);\n};\nconst useErrorOutlineStyles = makeStyles((theme) => ({\n  root: {\n    marginRight: theme.spacing(1),\n    fill: ({ severity }) => getWarningTextColor(\n      severity,\n      theme\n    )\n  }\n}));\nconst ErrorOutlineStyled = ({ severity }) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return /* @__PURE__ */ React.createElement(ErrorOutline, { classes });\n};\nconst ExpandMoreIconStyled = ({ severity }) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return /* @__PURE__ */ React.createElement(ExpandMoreIcon, { classes });\n};\nconst useStyles$D = makeStyles(\n  (theme) => ({\n    panel: {\n      backgroundColor: ({ severity }) => getWarningBackgroundColor(\n        severity,\n        theme\n      ),\n      color: ({ severity }) => getWarningTextColor(\n        severity,\n        theme\n      ),\n      verticalAlign: \"middle\"\n    },\n    summary: {\n      display: \"flex\",\n      flexDirection: \"row\"\n    },\n    summaryText: {\n      color: ({ severity }) => getWarningTextColor(\n        severity,\n        theme\n      ),\n      fontWeight: theme.typography.fontWeightBold\n    },\n    markdownContent: {\n      \"& p\": {\n        display: \"inline\"\n      }\n    },\n    message: {\n      width: \"100%\",\n      display: \"block\",\n      color: ({ severity }) => getWarningTextColor(\n        severity,\n        theme\n      ),\n      backgroundColor: ({ severity }) => getWarningBackgroundColor(\n        severity,\n        theme\n      )\n    },\n    details: {\n      width: \"100%\",\n      display: \"block\",\n      color: theme.palette.textContrast,\n      backgroundColor: theme.palette.background.default,\n      border: `1px solid ${theme.palette.border}`,\n      padding: theme.spacing(2),\n      fontFamily: \"sans-serif\"\n    }\n  }),\n  { name: \"BackstageWarningPanel\" }\n);\nconst capitalize = (s) => {\n  return s.charAt(0).toLocaleUpperCase(\"en-US\") + s.slice(1);\n};\nfunction WarningPanel(props) {\n  const {\n    severity = \"warning\",\n    title,\n    titleFormat,\n    message,\n    children,\n    defaultExpanded\n  } = props;\n  const classes = useStyles$D({ severity });\n  const subTitle = capitalize(severity) + (title ? `: ${title}` : \"\");\n  return /* @__PURE__ */ React.createElement(\n    Accordion,\n    {\n      defaultExpanded: defaultExpanded != null ? defaultExpanded : false,\n      className: classes.panel,\n      role: \"alert\"\n    },\n    /* @__PURE__ */ React.createElement(\n      AccordionSummary,\n      {\n        expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIconStyled, { severity }),\n        className: classes.summary\n      },\n      /* @__PURE__ */ React.createElement(ErrorOutlineStyled, { severity }),\n      /* @__PURE__ */ React.createElement(Typography, { className: classes.summaryText, variant: \"subtitle1\" }, titleFormat === \"markdown\" ? /* @__PURE__ */ React.createElement(\n        MarkdownContent,\n        {\n          content: subTitle,\n          className: classes.markdownContent\n        }\n      ) : subTitle)\n    ),\n    (message || children) && /* @__PURE__ */ React.createElement(AccordionDetails, null, /* @__PURE__ */ React.createElement(Grid, { container: true }, message && /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Typography, { className: classes.message, variant: \"body1\" }, message)), children && /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, className: classes.details }, children)))\n  );\n}\n\nconst useStyles$C = makeStyles(\n  (theme) => ({\n    text: {\n      fontFamily: \"monospace\",\n      whiteSpace: \"pre\",\n      overflowX: \"auto\",\n      marginRight: theme.spacing(2)\n    },\n    divider: {\n      margin: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageErrorPanel\" }\n);\nconst ErrorList = ({\n  error,\n  message,\n  stack,\n  children\n}) => {\n  const classes = useStyles$C();\n  return /* @__PURE__ */ React.createElement(List, { dense: true }, /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      classes: { secondary: classes.text },\n      primary: \"Error\",\n      secondary: error\n    }\n  ), /* @__PURE__ */ React.createElement(CopyTextButton, { text: error })), /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      classes: { secondary: classes.text },\n      primary: \"Message\",\n      secondary: message\n    }\n  ), /* @__PURE__ */ React.createElement(CopyTextButton, { text: message })), stack && /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      classes: { secondary: classes.text },\n      primary: \"Stack Trace\",\n      secondary: stack\n    }\n  ), /* @__PURE__ */ React.createElement(CopyTextButton, { text: stack })), children);\n};\nfunction ErrorPanel(props) {\n  const { title, error, defaultExpanded, titleFormat, children } = props;\n  return /* @__PURE__ */ React.createElement(\n    WarningPanel,\n    {\n      severity: \"error\",\n      title: title != null ? title : error.message,\n      defaultExpanded,\n      titleFormat\n    },\n    /* @__PURE__ */ React.createElement(\n      ErrorList,\n      {\n        error: error.name,\n        message: error.message,\n        stack: error.stack,\n        children\n      }\n    )\n  );\n}\n\nconst useStyles$B = makeStyles(\n  (theme) => ({\n    text: {\n      fontFamily: \"monospace\",\n      whiteSpace: \"pre\",\n      overflowX: \"auto\",\n      marginRight: theme.spacing(2)\n    },\n    divider: {\n      margin: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageResponseErrorPanel\" }\n);\nfunction ResponseErrorPanel(props) {\n  var _a;\n  const { title, error, defaultExpanded } = props;\n  const classes = useStyles$B();\n  if (error.name !== \"ResponseError\") {\n    return /* @__PURE__ */ React.createElement(\n      ErrorPanel,\n      {\n        title: title != null ? title : error.message,\n        defaultExpanded,\n        error\n      }\n    );\n  }\n  const { body, cause } = error;\n  const { request, response } = body;\n  const errorString = `${response.statusCode}: ${cause.name}`;\n  const requestString = request && `${request.method} ${request.url}`;\n  const messageString = cause.message.replace(/\\\\n/g, \"\\n\");\n  const stackString = (_a = cause.stack) == null ? void 0 : _a.replace(/\\\\n/g, \"\\n\");\n  const jsonString = JSON.stringify(body, void 0, 2);\n  return /* @__PURE__ */ React.createElement(\n    ErrorPanel,\n    {\n      title: title != null ? title : error.message,\n      defaultExpanded,\n      error: { name: errorString, message: messageString, stack: stackString }\n    },\n    requestString && /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        classes: { secondary: classes.text },\n        primary: \"Request\",\n        secondary: request ? `${requestString}` : void 0\n      }\n    ), /* @__PURE__ */ React.createElement(CopyTextButton, { text: requestString })),\n    /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Divider, { component: \"li\", className: classes.divider }), /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        classes: { secondary: classes.text },\n        primary: \"Full Error as JSON\"\n      }\n    )), /* @__PURE__ */ React.createElement(CodeSnippet, { language: \"json\", text: jsonString, showCopyCodeButton: true }))\n  );\n}\n\nfunction createRootElement(id) {\n  const rootContainer = document.createElement(\"div\");\n  rootContainer.setAttribute(\"id\", id);\n  return rootContainer;\n}\nfunction addRootElement(rootElem) {\n  document.body.insertBefore(\n    rootElem,\n    document.body.lastElementChild.nextElementSibling\n  );\n}\nfunction usePortal(id) {\n  const rootElemRef = useRef(null);\n  useEffect(\n    function setupElement() {\n      const existingParent = document.querySelector(`#${id}`);\n      const parentElem = existingParent || createRootElement(id);\n      if (!existingParent) {\n        addRootElement(parentElem);\n      }\n      parentElem.appendChild(rootElemRef.current);\n      return function removeElement() {\n        rootElemRef.current.remove();\n        if (parentElem.childNodes.length === -1) {\n          parentElem.remove();\n        }\n      };\n    },\n    [id]\n  );\n  function getRootElem() {\n    if (!rootElemRef.current) {\n      rootElemRef.current = document.createElement(\"div\");\n    }\n    return rootElemRef.current;\n  }\n  return getRootElem();\n}\n\nconst STATES_LOCAL_STORAGE_KEY = \"core.calloutSeen\";\nfunction useCalloutStates() {\n  const [states, setStates] = useState(() => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    return raw ? JSON.parse(raw) : {};\n  });\n  const setState = useCallback((key, value) => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    const oldStates = raw ? JSON.parse(raw) : {};\n    const newStates = { ...oldStates, [key]: value };\n    setStates(newStates);\n    localStorage.setItem(STATES_LOCAL_STORAGE_KEY, JSON.stringify(newStates));\n  }, []);\n  return { states, setState };\n}\nfunction useCalloutHasBeenSeen(featureId) {\n  const { states, setState } = useCalloutStates();\n  const markSeen = useCallback(() => {\n    setState(featureId, true);\n  }, [setState, featureId]);\n  return { seen: states[featureId] === true, markSeen };\n}\nfunction useShowCallout(featureId) {\n  const { seen, markSeen } = useCalloutHasBeenSeen(featureId);\n  return { show: seen === false, hide: markSeen };\n}\n\nconst useStyles$A = makeStyles(\n  (theme) => ({\n    \"@keyframes pulsateSlightly\": {\n      \"0%\": { transform: \"scale(1.0)\" },\n      \"100%\": { transform: \"scale(1.1)\" }\n    },\n    \"@keyframes pulsateAndFade\": {\n      \"0%\": { transform: \"scale(1.0)\", opacity: 0.9 },\n      \"100%\": { transform: \"scale(1.5)\", opacity: 0 }\n    },\n    featureWrapper: {\n      position: \"relative\"\n    },\n    backdrop: {\n      zIndex: 2e3,\n      position: \"fixed\",\n      overflow: \"hidden\",\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    },\n    dot: {\n      position: \"absolute\",\n      backgroundColor: \"transparent\",\n      borderRadius: \"100%\",\n      border: \"1px solid rgba(103, 146, 180, 0.98)\",\n      boxShadow: \"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)\",\n      zIndex: 2001,\n      transformOrigin: \"center center\",\n      animation: \"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite\"\n    },\n    pulseCircle: {\n      width: \"100%\",\n      height: \"100%\",\n      backgroundColor: \"transparent\",\n      borderRadius: \"100%\",\n      border: `2px solid ${theme.palette.common.white}`,\n      zIndex: 2001,\n      transformOrigin: \"center center\",\n      animation: \"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite\"\n    },\n    text: {\n      position: \"absolute\",\n      color: theme.palette.common.white,\n      zIndex: 2003\n    }\n  }),\n  { name: \"BackstageFeatureCalloutCircular\" }\n);\nfunction FeatureCalloutCircular(props) {\n  const { featureId, title, description, children } = props;\n  const { show, hide } = useShowCallout(featureId);\n  const portalElement = usePortal(\"core.callout\");\n  const wrapperRef = useRef(null);\n  const [placement, setPlacement] = useState();\n  const classes = useStyles$A();\n  const update = useCallback(() => {\n    if (wrapperRef.current) {\n      const wrapperBounds = wrapperRef.current.getBoundingClientRect();\n      const longest = Math.max(wrapperBounds.width, wrapperBounds.height);\n      const borderWidth = 800;\n      const dotLeft = wrapperBounds.x - (longest - wrapperBounds.width) / 2 - borderWidth;\n      const dotTop = wrapperBounds.y - (longest - wrapperBounds.height) / 2 - borderWidth;\n      const dotSize = longest + 2 * borderWidth;\n      const textWidth = 450;\n      const textLeft = wrapperBounds.x + wrapperBounds.width / 2 - textWidth;\n      const textTop = wrapperBounds.y - (longest - wrapperBounds.height) / 2 + longest + 20;\n      setPlacement({\n        dotLeft,\n        dotTop,\n        dotSize,\n        borderWidth,\n        textTop,\n        textLeft,\n        textWidth\n      });\n    }\n  }, []);\n  useEffect(() => {\n    window.addEventListener(\"resize\", update);\n    window.addEventListener(\"scroll\", update);\n    return () => {\n      window.removeEventListener(\"resize\", update);\n      window.removeEventListener(\"scroll\", update);\n    };\n  }, [update]);\n  useLayoutEffect(update, [wrapperRef.current, update]);\n  if (!show) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { className: classes.featureWrapper, ...{ ref: wrapperRef } }, children), createPortal(\n    /* @__PURE__ */ React.createElement(Box, { className: classes.backdrop }, /* @__PURE__ */ React.createElement(ClickAwayListener, { onClickAway: hide }, /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n      Box,\n      {\n        className: classes.dot,\n        \"data-testid\": \"dot\",\n        style: {\n          left: placement == null ? void 0 : placement.dotLeft,\n          top: placement == null ? void 0 : placement.dotTop,\n          width: placement == null ? void 0 : placement.dotSize,\n          height: placement == null ? void 0 : placement.dotSize,\n          borderWidth: placement == null ? void 0 : placement.borderWidth\n        },\n        onClick: hide,\n        onKeyDown: hide,\n        role: \"button\",\n        tabIndex: 0\n      },\n      /* @__PURE__ */ React.createElement(Box, { className: classes.pulseCircle })\n    ), /* @__PURE__ */ React.createElement(\n      Box,\n      {\n        className: classes.text,\n        \"data-testid\": \"text\",\n        style: {\n          left: placement == null ? void 0 : placement.textLeft,\n          top: placement == null ? void 0 : placement.textTop,\n          width: placement == null ? void 0 : placement.textWidth\n        }\n      },\n      /* @__PURE__ */ React.createElement(Typography, { variant: \"h2\", paragraph: true }, title),\n      /* @__PURE__ */ React.createElement(Typography, null, description)\n    )))),\n    portalElement\n  ));\n}\n\nconst useIconStyles = makeStyles(\n  (theme) => ({\n    link: {\n      display: \"grid\",\n      justifyItems: \"center\",\n      gridGap: 4,\n      textAlign: \"center\"\n    },\n    disabled: {\n      color: theme.palette.text.secondary,\n      cursor: \"default\"\n    },\n    primary: {\n      color: theme.palette.primary.main\n    },\n    secondary: {\n      color: theme.palette.secondary.main\n    },\n    label: {\n      textTransform: \"uppercase\",\n      fontWeight: theme.typography.fontWeightBold,\n      letterSpacing: 1.2\n    }\n  }),\n  { name: \"BackstageIconLinkVertical\" }\n);\nfunction IconLinkVertical({\n  color = \"primary\",\n  disabled = false,\n  href = \"#\",\n  icon = /* @__PURE__ */ React.createElement(LinkIcon, null),\n  label,\n  onClick,\n  title\n}) {\n  const classes = useIconStyles();\n  if (disabled) {\n    return /* @__PURE__ */ React.createElement(Box, { title, className: classNames(classes.link, classes.disabled) }, icon, /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        variant: \"caption\",\n        component: \"span\",\n        className: classes.label\n      },\n      label\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(\n    Link,\n    {\n      title,\n      className: classNames(classes.link, classes[color]),\n      to: href,\n      onClick\n    },\n    icon,\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"caption\", component: \"span\", className: classes.label }, label)\n  );\n}\n\nconst useStyles$z = makeStyles(\n  (theme) => ({\n    links: {\n      margin: theme.spacing(2, 0),\n      display: \"grid\",\n      gridAutoFlow: \"column\",\n      gridAutoColumns: \"min-content\",\n      gridGap: theme.spacing(3)\n    }\n  }),\n  { name: \"BackstageHeaderIconLinkRow\" }\n);\nfunction HeaderIconLinkRow(props) {\n  const { links } = props;\n  const classes = useStyles$z();\n  return /* @__PURE__ */ React.createElement(\"nav\", { className: classes.links }, links.map((link, index) => /* @__PURE__ */ React.createElement(IconLinkVertical, { key: index + 1, ...link })));\n}\n\nconst generateGradientStops = (themeType) => {\n  const luminance = themeType === \"dark\" ? \"16%\" : \"97%\";\n  return `\n    hsl(0, 0%, ${luminance}) 0%,\n    hsla(0, 0%, ${luminance}, 0.987) 8.1%,\n    hsla(0, 0%, ${luminance}, 0.951) 15.5%,\n    hsla(0, 0%, ${luminance}, 0.896) 22.5%,\n    hsla(0, 0%, ${luminance}, 0.825) 29%,\n    hsla(0, 0%, ${luminance}, 0.741) 35.3%,\n    hsla(0, 0%, ${luminance}, 0.648) 41.2%,\n    hsla(0, 0%, ${luminance}, 0.55) 47.1%,\n    hsla(0, 0%, ${luminance}, 0.45) 52.9%,\n    hsla(0, 0%, ${luminance}, 0.352) 58.8%,\n    hsla(0, 0%, ${luminance}, 0.259) 64.7%,\n    hsla(0, 0%, ${luminance}, 0.175) 71%,\n    hsla(0, 0%, ${luminance}, 0.104) 77.5%,\n    hsla(0, 0%, ${luminance}, 0.049) 84.5%,\n    hsla(0, 0%, ${luminance}, 0.013) 91.9%,\n    hsla(0, 0%, ${luminance}, 0) 100%\n  `;\n};\nconst fadeSize = 100;\nconst fadePadding = 10;\nconst useStyles$y = makeStyles(\n  (theme) => ({\n    root: {\n      position: \"relative\",\n      display: \"flex\",\n      flexFlow: \"row nowrap\",\n      alignItems: \"center\"\n    },\n    container: {\n      overflow: \"auto\",\n      scrollbarWidth: 0,\n      // hide in FF\n      \"&::-webkit-scrollbar\": {\n        display: \"none\"\n        // hide in Chrome\n      }\n    },\n    fade: {\n      position: \"absolute\",\n      width: fadeSize,\n      height: `calc(100% + ${fadePadding}px)`,\n      transition: \"opacity 300ms\",\n      pointerEvents: \"none\"\n    },\n    fadeLeft: {\n      left: -fadePadding,\n      background: `linear-gradient(90deg, ${generateGradientStops(\n        theme.palette.type\n      )})`\n    },\n    fadeRight: {\n      right: -fadePadding,\n      background: `linear-gradient(270deg, ${generateGradientStops(\n        theme.palette.type\n      )})`\n    },\n    fadeHidden: {\n      opacity: 0\n    },\n    button: {\n      position: \"absolute\"\n    },\n    buttonLeft: {\n      left: -theme.spacing(2)\n    },\n    buttonRight: {\n      right: -theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageHorizontalScrollGrid\" }\n);\nfunction useScrollDistance(ref) {\n  const [[scrollLeft, scrollRight], setScroll] = React.useState([0, 0]);\n  React.useLayoutEffect(() => {\n    const el = ref.current;\n    if (!el) {\n      setScroll([0, 0]);\n      return;\n    }\n    const handleUpdate = () => {\n      const left = el.scrollLeft;\n      const right = el.scrollWidth - el.offsetWidth - el.scrollLeft;\n      setScroll([left, right]);\n    };\n    handleUpdate();\n    el.addEventListener(\"scroll\", handleUpdate);\n    window.addEventListener(\"resize\", handleUpdate);\n    return () => {\n      el.removeEventListener(\"scroll\", handleUpdate);\n      window.removeEventListener(\"resize\", handleUpdate);\n    };\n  }, [ref]);\n  return [scrollLeft, scrollRight];\n}\nfunction useSmoothScroll(ref, speed, minDistance) {\n  const [scrollTarget, setScrollTarget] = React.useState(0);\n  React.useLayoutEffect(() => {\n    if (scrollTarget === 0) {\n      return;\n    }\n    const startTime = window.performance.now();\n    const id = requestAnimationFrame((frameTime) => {\n      if (!ref.current) {\n        return;\n      }\n      const frameDuration = frameTime - startTime;\n      const scrollDistance = Math.abs(scrollTarget) * frameDuration / speed;\n      const cappedScrollDistance = Math.max(minDistance, scrollDistance);\n      const scrollAmount = cappedScrollDistance * Math.sign(scrollTarget);\n      ref.current.scrollBy({ left: scrollAmount });\n      const newScrollTarget = scrollTarget - scrollAmount;\n      if (Math.sign(scrollTarget) !== Math.sign(newScrollTarget)) {\n        setScrollTarget(0);\n      } else {\n        setScrollTarget(newScrollTarget);\n      }\n    });\n    return () => cancelAnimationFrame(id);\n  }, [ref, scrollTarget, speed, minDistance]);\n  return setScrollTarget;\n}\nfunction HorizontalScrollGrid(props) {\n  const {\n    scrollStep = 100,\n    scrollSpeed = 50,\n    minScrollDistance = 5,\n    children,\n    ...otherProps\n  } = props;\n  const classes = useStyles$y(props);\n  const ref = React.useRef();\n  const [scrollLeft, scrollRight] = useScrollDistance(ref);\n  const setScrollTarget = useSmoothScroll(ref, scrollSpeed, minScrollDistance);\n  const handleScrollClick = (forwards) => {\n    const el = ref.current;\n    if (!el) {\n      return;\n    }\n    setScrollTarget(forwards ? scrollStep : -scrollStep);\n  };\n  return /* @__PURE__ */ React.createElement(Box, { ...otherProps, className: classes.root }, /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      direction: \"row\",\n      wrap: \"nowrap\",\n      className: classes.container,\n      ref\n    },\n    children\n  ), /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      className: classNames(classes.fade, classes.fadeLeft, {\n        [classes.fadeHidden]: scrollLeft === 0\n      })\n    }\n  ), /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      className: classNames(classes.fade, classes.fadeRight, {\n        [classes.fadeHidden]: scrollRight === 0\n      })\n    }\n  ), scrollLeft > 0 && /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      title: \"Scroll Left\",\n      onClick: () => handleScrollClick(false),\n      className: classNames(classes.button, classes.buttonLeft, {})\n    },\n    /* @__PURE__ */ React.createElement(ChevronLeftIcon, null)\n  ), scrollRight > 0 && /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      title: \"Scroll Right\",\n      onClick: () => handleScrollClick(true),\n      className: classNames(classes.button, classes.buttonRight, {})\n    },\n    /* @__PURE__ */ React.createElement(ChevronRight, null)\n  ));\n}\n\nconst useStyles$x = makeStyles(\n  (theme) => ({\n    alpha: {\n      color: theme.palette.common.white,\n      fontFamily: \"serif\",\n      fontWeight: \"normal\",\n      fontStyle: \"italic\"\n    },\n    beta: {\n      color: \"#4d65cc\",\n      fontFamily: \"serif\",\n      fontWeight: \"normal\",\n      fontStyle: \"italic\"\n    }\n  }),\n  { name: \"BackstageLifecycle\" }\n);\nfunction Lifecycle(props) {\n  const classes = useStyles$x(props);\n  const { shorthand, alpha } = props;\n  return shorthand ? /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classes[alpha ? \"alpha\" : \"beta\"],\n      style: { fontSize: \"120%\" }\n    },\n    alpha ? /* @__PURE__ */ React.createElement(React.Fragment, null, \"\\u03B1\") : /* @__PURE__ */ React.createElement(React.Fragment, null, \"\\u03B2\")\n  ) : /* @__PURE__ */ React.createElement(Typography, { component: \"span\", className: classes[alpha ? \"alpha\" : \"beta\"] }, alpha ? \"Alpha\" : \"Beta\");\n}\n\nconst RealLogViewer = lazy(\n  () => import('./esm/RealLogViewer-ff069402.esm.js').then((m) => ({ default: m.RealLogViewer }))\n);\nfunction LogViewer(props) {\n  const { Progress } = useApp().getComponents();\n  return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(RealLogViewer, { ...props }));\n}\n\nconst useItemStyles = makeStyles(\n  (theme) => ({\n    root: {\n      paddingLeft: theme.spacing(3)\n    }\n  }),\n  { name: \"BackstageLoginRequestListItem\" }\n);\nconst LoginRequestListItem = ({ request, busy, setBusy }) => {\n  const classes = useItemStyles();\n  const [error, setError] = useState();\n  const handleContinue = async () => {\n    setBusy(true);\n    try {\n      await request.trigger();\n    } catch (e) {\n      setError(isError(e) ? e.message : \"An unspecified error occurred\");\n    } finally {\n      setBusy(false);\n    }\n  };\n  const IconComponent = request.provider.icon;\n  return /* @__PURE__ */ React.createElement(ListItem, { disabled: busy, classes: { root: classes.root } }, /* @__PURE__ */ React.createElement(ListItemAvatar, null, /* @__PURE__ */ React.createElement(IconComponent, { fontSize: \"large\" })), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: request.provider.title,\n      secondary: error && /* @__PURE__ */ React.createElement(Typography, { color: \"error\" }, error)\n    }\n  ), /* @__PURE__ */ React.createElement(Button$1, { color: \"primary\", variant: \"contained\", onClick: handleContinue }, \"Log in\"));\n};\n\nconst useStyles$w = makeStyles(\n  (theme) => ({\n    dialog: {\n      paddingTop: theme.spacing(1)\n    },\n    title: {\n      minWidth: 0\n    },\n    titleHeading: {\n      fontSize: theme.typography.h6.fontSize\n    },\n    contentList: {\n      padding: 0\n    },\n    actionButtons: {\n      padding: theme.spacing(2, 0)\n    }\n  }),\n  { name: \"OAuthRequestDialog\" }\n);\nfunction OAuthRequestDialog(_props) {\n  var _a;\n  const classes = useStyles$w();\n  const [busy, setBusy] = useState(false);\n  const oauthRequestApi = useApi(oauthRequestApiRef);\n  const configApi = useApi(configApiRef);\n  const authRedirect = (_a = configApi.getOptionalBoolean(\"enableExperimentalRedirectFlow\")) != null ? _a : false;\n  const requests = useObservable(\n    useMemo(() => oauthRequestApi.authRequest$(), [oauthRequestApi]),\n    []\n  );\n  const handleRejectAll = () => {\n    requests.forEach((request) => request.reject());\n  };\n  return /* @__PURE__ */ React.createElement(\n    Dialog,\n    {\n      open: Boolean(requests.length),\n      fullWidth: true,\n      maxWidth: \"xs\",\n      classes: { paper: classes.dialog },\n      \"aria-labelledby\": \"oauth-req-dialog-title\"\n    },\n    /* @__PURE__ */ React.createElement(\"main\", null, /* @__PURE__ */ React.createElement(\n      DialogTitle,\n      {\n        classes: { root: classes.title },\n        id: \"oauth-req-dialog-title\"\n      },\n      /* @__PURE__ */ React.createElement(\n        Typography,\n        {\n          className: classes.titleHeading,\n          variant: \"h1\",\n          variantMapping: { h1: \"span\" }\n        },\n        \"Login Required\"\n      ),\n      authRedirect ? /* @__PURE__ */ React.createElement(Typography, null, \"This will trigger a http redirect to OAuth Login.\") : null\n    ), /* @__PURE__ */ React.createElement(DialogContent, { dividers: true, classes: { root: classes.contentList } }, /* @__PURE__ */ React.createElement(List, null, requests.map((request) => /* @__PURE__ */ React.createElement(\n      LoginRequestListItem,\n      {\n        key: request.provider.title,\n        request,\n        busy,\n        setBusy\n      }\n    ))))),\n    /* @__PURE__ */ React.createElement(DialogActions, { classes: { root: classes.actionButtons } }, /* @__PURE__ */ React.createElement(Button$1, { onClick: handleRejectAll }, \"Reject All\"))\n  );\n}\n\nconst useStyles$v = makeStyles(\n  {\n    container: {\n      overflow: \"visible !important\"\n    }\n  },\n  { name: \"BackstageOverflowTooltip\" }\n);\nfunction OverflowTooltip(props) {\n  var _a;\n  const [hover, setHover] = useState(false);\n  const isMounted = useIsMounted();\n  const classes = useStyles$v();\n  const handleToggled = (truncated) => {\n    if (isMounted()) {\n      setHover(truncated);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\n    Tooltip,\n    {\n      title: (_a = props.title) != null ? _a : props.text || \"\",\n      placement: props.placement,\n      disableHoverListener: !hover\n    },\n    /* @__PURE__ */ React.createElement(\n      TextTruncate,\n      {\n        text: props.text,\n        line: props.line,\n        onToggled: handleToggled,\n        containerClassName: classes.container\n      }\n    )\n  );\n}\n\nfunction Progress(props) {\n  const theme = useTheme();\n  const [isVisible, setIsVisible] = useState(false);\n  useEffect(() => {\n    const handle = setTimeout(\n      () => setIsVisible(true),\n      theme.transitions.duration.short\n    );\n    return () => clearTimeout(handle);\n  }, [theme.transitions.duration.short]);\n  return isVisible ? /* @__PURE__ */ React.createElement(LinearProgress, { ...props, \"data-testid\": \"progress\" }) : /* @__PURE__ */ React.createElement(Box, { display: \"none\" });\n}\n\nconst useStyles$u = makeStyles(\n  (theme) => ({\n    root: {\n      maxWidth: \"fit-content\",\n      padding: theme.spacing(2, 2, 2, 2.5)\n    },\n    boxTitle: {\n      margin: 0,\n      color: theme.palette.textSubtle\n    },\n    arrow: {\n      color: theme.palette.textSubtle\n    }\n  }),\n  { name: \"BackstageBottomLink\" }\n);\nfunction BottomLink(props) {\n  const { link, title, onClick } = props;\n  const classes = useStyles$u();\n  return /* @__PURE__ */ React.createElement(Box, null, /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(Link, { to: link, onClick, underline: \"none\" }, /* @__PURE__ */ React.createElement(Box, { display: \"flex\", alignItems: \"center\", className: classes.root }, /* @__PURE__ */ React.createElement(Box, { className: classes.boxTitle, fontWeight: \"fontWeightBold\", m: 1 }, /* @__PURE__ */ React.createElement(Typography, null, /* @__PURE__ */ React.createElement(\"strong\", null, title))), /* @__PURE__ */ React.createElement(ArrowIcon, { className: classes.arrow }))));\n}\n\nconst SlackLink = (props) => {\n  const { slackChannel } = props;\n  if (!slackChannel) {\n    return null;\n  } else if (typeof slackChannel === \"string\") {\n    return /* @__PURE__ */ React.createElement(Typography, null, \"Please contact \", slackChannel, \" for help.\");\n  } else if (!slackChannel.href) {\n    return /* @__PURE__ */ React.createElement(Typography, null, \"Please contact \", slackChannel.name, \" for help.\");\n  }\n  return /* @__PURE__ */ React.createElement(LinkButton, { to: slackChannel.href, variant: \"contained\" }, slackChannel.name);\n};\nconst ErrorBoundary = class ErrorBoundary2 extends Component$3 {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: void 0,\n      errorInfo: void 0\n    };\n  }\n  componentDidCatch(error, errorInfo) {\n    console.error(`ErrorBoundary, error: ${error}, info: ${errorInfo}`);\n    this.setState({ error, errorInfo });\n  }\n  render() {\n    const { slackChannel, children } = this.props;\n    const { error } = this.state;\n    if (!error) {\n      return children;\n    }\n    return /* @__PURE__ */ React.createElement(ErrorPanel, { title: \"Something Went Wrong\", error }, /* @__PURE__ */ React.createElement(SlackLink, { slackChannel }));\n  }\n};\n\nconst useStyles$t = makeStyles(\n  (theme) => ({\n    noPadding: {\n      padding: 0,\n      \"&:last-child\": {\n        paddingBottom: 0\n      }\n    },\n    header: {\n      padding: theme.spacing(2, 2, 2, 2.5)\n    },\n    headerTitle: {\n      fontWeight: theme.typography.fontWeightBold\n    },\n    headerSubheader: {\n      paddingTop: theme.spacing(1)\n    },\n    headerAvatar: {},\n    headerAction: {},\n    headerContent: {},\n    subheader: {\n      display: \"flex\"\n    }\n  }),\n  { name: \"BackstageInfoCard\" }\n);\nconst CardActionsTopRight = withStyles(\n  (theme) => ({\n    root: {\n      display: \"inline-block\",\n      padding: theme.spacing(8, 8, 0, 0),\n      float: \"right\"\n    }\n  }),\n  { name: \"BackstageInfoCardCardActionsTopRight\" }\n)(CardActions);\nconst VARIANT_STYLES = {\n  card: {\n    flex: {\n      display: \"flex\",\n      flexDirection: \"column\"\n    },\n    fullHeight: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      height: \"100%\"\n    },\n    gridItem: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      height: \"calc(100% - 10px)\",\n      // for pages without content header\n      marginBottom: \"10px\",\n      breakInside: \"avoid-page\",\n      \"@media print\": {\n        height: \"auto\"\n      }\n    }\n  },\n  cardContent: {\n    fullHeight: {\n      flex: 1\n    },\n    gridItem: {\n      flex: 1\n    }\n  }\n};\nfunction InfoCard(props) {\n  const {\n    title,\n    subheader,\n    divider = true,\n    deepLink,\n    slackChannel,\n    errorBoundaryProps,\n    variant,\n    children,\n    headerStyle,\n    headerProps,\n    icon,\n    action,\n    actionsClassName,\n    actions,\n    cardClassName,\n    actionsTopRight,\n    className,\n    noPadding,\n    titleTypographyProps\n  } = props;\n  const classes = useStyles$t();\n  let calculatedStyle = {};\n  let calculatedCardStyle = {};\n  if (variant) {\n    const variants = variant.split(/[\\s]+/g);\n    variants.forEach((name) => {\n      calculatedStyle = {\n        ...calculatedStyle,\n        ...VARIANT_STYLES.card[name]\n      };\n      calculatedCardStyle = {\n        ...calculatedCardStyle,\n        ...VARIANT_STYLES.cardContent[name]\n      };\n    });\n  }\n  const cardSubTitle = () => {\n    if (!subheader && !icon) {\n      return null;\n    }\n    return /* @__PURE__ */ React.createElement(\n      \"div\",\n      {\n        className: classes.headerSubheader,\n        \"data-testid\": \"info-card-subheader\"\n      },\n      subheader && /* @__PURE__ */ React.createElement(\"div\", { className: classes.subheader }, subheader),\n      icon\n    );\n  };\n  const errProps = errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n  return /* @__PURE__ */ React.createElement(Card, { style: calculatedStyle, className }, /* @__PURE__ */ React.createElement(ErrorBoundary, { ...errProps }, title && /* @__PURE__ */ React.createElement(\n    CardHeader,\n    {\n      classes: {\n        root: classes.header,\n        title: classes.headerTitle,\n        subheader: classes.headerSubheader,\n        avatar: classes.headerAvatar,\n        action: classes.headerAction,\n        content: classes.headerContent\n      },\n      title,\n      subheader: cardSubTitle(),\n      action,\n      style: { ...headerStyle },\n      titleTypographyProps,\n      ...headerProps\n    }\n  ), actionsTopRight && /* @__PURE__ */ React.createElement(CardActionsTopRight, null, actionsTopRight), divider && /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(\n    CardContent,\n    {\n      className: classNames(cardClassName, {\n        [classes.noPadding]: noPadding\n      }),\n      style: calculatedCardStyle\n    },\n    children\n  ), actions && /* @__PURE__ */ React.createElement(CardActions, { className: actionsClassName }, actions), deepLink && /* @__PURE__ */ React.createElement(BottomLink, { ...deepLink })));\n}\n\nconst useStyles$s = makeStyles(\n  (theme) => ({\n    root: {\n      position: \"relative\",\n      lineHeight: 0\n    },\n    overlay: {\n      position: \"absolute\",\n      top: \"50%\",\n      left: \"50%\",\n      transform: \"translate(-50%, -60%)\",\n      fontSize: theme.typography.pxToRem(45),\n      fontWeight: theme.typography.fontWeightBold,\n      color: theme.palette.textContrast\n    },\n    description: {\n      fontSize: \"100%\",\n      top: \"50%\",\n      left: \"50%\",\n      transform: \"translate(-50%, -50%)\",\n      position: \"absolute\",\n      wordBreak: \"break-all\",\n      display: \"inline-block\"\n    },\n    circle: {\n      width: \"80%\",\n      transform: \"translate(10%, 0)\"\n    },\n    colorUnknown: {}\n  }),\n  { name: \"BackstageGauge\" }\n);\nconst defaultGaugeProps = {\n  fractional: true,\n  inverse: false,\n  unit: \"%\",\n  max: 100\n};\nconst getProgressColor = ({\n  palette,\n  value,\n  inverse,\n  max\n}) => {\n  if (isNaN(value)) {\n    return \"#ddd\";\n  }\n  const actualMax = max ? max : defaultGaugeProps.max;\n  const actualValue = inverse ? actualMax - value : value;\n  if (actualValue < actualMax / 3) {\n    return palette.status.error;\n  } else if (actualValue < actualMax * (2 / 3)) {\n    return palette.status.warning;\n  }\n  return palette.status.ok;\n};\nfunction Gauge(props) {\n  const [hoverRef, setHoverRef] = useState(null);\n  const { getColor = getProgressColor } = props;\n  const classes = useStyles$s(props);\n  const { palette } = useTheme();\n  const { value, fractional, inverse, unit, max, description } = {\n    ...defaultGaugeProps,\n    ...props\n  };\n  const asPercentage = fractional ? Math.round(value * max) : value;\n  const asActual = max !== 100 ? Math.round(value) : asPercentage;\n  const [isHovering, setIsHovering] = useState(false);\n  useEffect(() => {\n    const node = hoverRef;\n    const handleMouseOver = () => setIsHovering(true);\n    const handleMouseOut = () => setIsHovering(false);\n    if (node && description) {\n      node.addEventListener(\"mouseenter\", handleMouseOver);\n      node.addEventListener(\"mouseleave\", handleMouseOut);\n      return () => {\n        node.removeEventListener(\"mouseenter\", handleMouseOver);\n        node.removeEventListener(\"mouseleave\", handleMouseOut);\n      };\n    }\n    return () => {\n      setIsHovering(false);\n    };\n  }, [description, hoverRef]);\n  return /* @__PURE__ */ React.createElement(Box, { ...{ ref: setHoverRef }, className: classes.root }, /* @__PURE__ */ React.createElement(\n    Circle,\n    {\n      strokeLinecap: \"butt\",\n      percent: asPercentage,\n      strokeWidth: 12,\n      trailWidth: 12,\n      strokeColor: getColor({ palette, value: asActual, inverse, max }),\n      className: classes.circle\n    }\n  ), description && isHovering ? /* @__PURE__ */ React.createElement(Box, { className: classes.description }, description) : /* @__PURE__ */ React.createElement(Box, { className: classes.overlay }, isNaN(value) ? \"N/A\" : `${asActual}${unit}`));\n}\n\nconst useStyles$r = makeStyles(\n  {\n    root: {\n      height: \"100%\",\n      width: 250\n    }\n  },\n  { name: \"BackstageGaugeCard\" }\n);\nfunction GaugeCard(props) {\n  const classes = useStyles$r(props);\n  const {\n    title,\n    subheader,\n    progress,\n    inverse,\n    deepLink,\n    description,\n    icon,\n    variant,\n    getColor\n  } = props;\n  const gaugeProps = {\n    inverse,\n    description,\n    getColor,\n    value: progress\n  };\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title,\n      subheader,\n      deepLink,\n      variant,\n      icon\n    },\n    /* @__PURE__ */ React.createElement(Gauge, { ...gaugeProps })\n  ));\n}\n\nfunction LinearGauge(props) {\n  const { value, getColor = getProgressColor, width = \"thick\" } = props;\n  const { palette } = useTheme();\n  if (isNaN(value)) {\n    return null;\n  }\n  let percent = Math.round(value * 100 * 100) / 100;\n  if (percent > 100) {\n    percent = 100;\n  }\n  const lineWidth = width === \"thick\" ? 4 : 1;\n  const strokeColor = getColor({\n    palette,\n    value: percent,\n    inverse: false,\n    max: 100\n  });\n  return /* @__PURE__ */ React.createElement(Tooltip, { title: `${percent}%` }, /* @__PURE__ */ React.createElement(Typography, { component: \"span\" }, /* @__PURE__ */ React.createElement(\n    Line,\n    {\n      percent,\n      strokeWidth: lineWidth,\n      trailWidth: lineWidth,\n      strokeColor\n    }\n  )));\n}\n\nconst useStyles$q = makeStyles(\n  (theme) => createStyles({\n    icon: {\n      position: \"absolute\",\n      right: theme.spacing(0.5),\n      pointerEvents: \"none\"\n    }\n  }),\n  { name: \"BackstageClosedDropdown\" }\n);\nconst ClosedDropdown = () => {\n  const classes = useStyles$q();\n  return /* @__PURE__ */ React.createElement(\n    SvgIcon,\n    {\n      className: classes.icon,\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\"\n    },\n    /* @__PURE__ */ React.createElement(\n      \"path\",\n      {\n        d: \"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z\",\n        fill: \"#616161\"\n      }\n    )\n  );\n};\n\nconst useStyles$p = makeStyles(\n  (theme) => createStyles({\n    icon: {\n      position: \"absolute\",\n      right: theme.spacing(0.5),\n      pointerEvents: \"none\"\n    }\n  }),\n  { name: \"BackstageOpenedDropdown\" }\n);\nconst OpenedDropdown = () => {\n  const classes = useStyles$p();\n  return /* @__PURE__ */ React.createElement(\n    SvgIcon,\n    {\n      className: classes.icon,\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\"\n    },\n    /* @__PURE__ */ React.createElement(\n      \"path\",\n      {\n        d: \"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z\",\n        fill: \"#616161\"\n      }\n    )\n  );\n};\n\nconst BootstrapInput = withStyles(\n  (theme) => createStyles({\n    root: {\n      \"label + &\": {\n        marginTop: theme.spacing(3)\n      },\n      \"&.Mui-focused > div[role=button]\": {\n        borderColor: theme.palette.primary.main\n      }\n    },\n    input: {\n      borderRadius: theme.shape.borderRadius,\n      position: \"relative\",\n      backgroundColor: theme.palette.background.paper,\n      border: \"1px solid #ced4da\",\n      fontSize: theme.typography.body1.fontSize,\n      padding: theme.spacing(1.25, 3.25, 1.25, 1.5),\n      transition: theme.transitions.create([\"border-color\", \"box-shadow\"]),\n      fontFamily: \"Helvetica Neue\",\n      \"&:focus\": {\n        background: theme.palette.background.paper,\n        borderRadius: theme.shape.borderRadius\n      }\n    }\n  }),\n  { name: \"BackstageSelectInputBase\" }\n)(InputBase);\nconst useStyles$o = makeStyles(\n  (theme) => createStyles({\n    formControl: {\n      margin: theme.spacing(1, 0),\n      maxWidth: 300\n    },\n    label: {\n      transform: \"initial\",\n      fontWeight: \"bold\",\n      fontSize: theme.typography.body2.fontSize,\n      fontFamily: theme.typography.fontFamily,\n      color: theme.palette.text.primary,\n      \"&.Mui-focused\": {\n        color: theme.palette.text.primary\n      }\n    },\n    formLabel: {\n      transform: \"initial\",\n      fontWeight: \"bold\",\n      fontSize: theme.typography.body2.fontSize,\n      fontFamily: theme.typography.fontFamily,\n      color: theme.palette.text.primary,\n      \"&.Mui-focused\": {\n        color: theme.palette.text.primary\n      }\n    },\n    chips: {\n      display: \"flex\",\n      flexWrap: \"wrap\"\n    },\n    chip: {\n      margin: 2\n    },\n    checkbox: {},\n    root: {\n      display: \"flex\",\n      flexDirection: \"column\"\n    }\n  }),\n  { name: \"BackstageSelect\" }\n);\nfunction SelectComponent(props) {\n  const {\n    multiple,\n    items,\n    label,\n    placeholder,\n    selected,\n    onChange,\n    triggerReset,\n    native = false,\n    disabled = false,\n    margin\n  } = props;\n  const classes = useStyles$o();\n  const [value, setValue] = useState(\n    selected || (multiple ? [] : \"\")\n  );\n  const [isOpen, setOpen] = useState(false);\n  useEffect(() => {\n    setValue(multiple ? [] : \"\");\n  }, [triggerReset, multiple]);\n  useEffect(() => {\n    setValue(selected || (multiple ? [] : \"\"));\n  }, [selected, multiple]);\n  const handleChange = (event) => {\n    setValue(event.target.value);\n    onChange(event.target.value);\n  };\n  const handleOpen = (event) => {\n    if (disabled) {\n      event.preventDefault();\n      return;\n    }\n    setOpen((previous) => {\n      if (multiple && !(event.target instanceof HTMLElement)) {\n        return true;\n      }\n      return !previous;\n    });\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const handleDelete = (selectedValue) => () => {\n    const newValue = value.filter((chip) => chip !== selectedValue);\n    setValue(newValue);\n    onChange(newValue);\n  };\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, /* @__PURE__ */ React.createElement(FormControl, { className: classes.formControl }, /* @__PURE__ */ React.createElement(InputLabel, { className: classes.formLabel }, label), /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      \"aria-label\": label,\n      value,\n      native,\n      disabled,\n      \"data-testid\": \"select\",\n      displayEmpty: true,\n      multiple,\n      margin,\n      onChange: handleChange,\n      open: isOpen,\n      onOpen: handleOpen,\n      onClose: handleClose,\n      input: /* @__PURE__ */ React.createElement(BootstrapInput, null),\n      label,\n      renderValue: (s) => {\n        var _a;\n        return multiple && value.length !== 0 ? /* @__PURE__ */ React.createElement(Box, { className: classes.chips }, s.map((selectedValue) => {\n          const item = items.find((el) => el.value === selectedValue);\n          return item ? /* @__PURE__ */ React.createElement(\n            Chip,\n            {\n              key: item == null ? void 0 : item.value,\n              label: item == null ? void 0 : item.label,\n              clickable: true,\n              onDelete: handleDelete(selectedValue),\n              className: classes.chip\n            }\n          ) : false;\n        })) : /* @__PURE__ */ React.createElement(Typography, null, value.length === 0 ? placeholder || \"\" : (_a = items.find((el) => el.value === s)) == null ? void 0 : _a.label);\n      },\n      IconComponent: () => !isOpen ? /* @__PURE__ */ React.createElement(ClosedDropdown, null) : /* @__PURE__ */ React.createElement(OpenedDropdown, null),\n      MenuProps: {\n        anchorOrigin: {\n          vertical: \"bottom\",\n          horizontal: \"left\"\n        },\n        transformOrigin: {\n          vertical: \"top\",\n          horizontal: \"left\"\n        },\n        getContentAnchorEl: null\n      }\n    },\n    placeholder && !multiple && /* @__PURE__ */ React.createElement(MenuItem, { value: [] }, placeholder),\n    native ? items && items.map((item) => /* @__PURE__ */ React.createElement(\"option\", { value: item.value, key: item.value }, item.label)) : items && items.map((item) => /* @__PURE__ */ React.createElement(MenuItem, { key: item.value, value: item.value }, multiple && /* @__PURE__ */ React.createElement(\n      Checkbox,\n      {\n        color: \"primary\",\n        checked: value.includes(item.value) || false,\n        className: classes.checkbox\n      }\n    ), item.label))\n  )));\n}\n\nconst noop = () => {\n};\nconst VerticalStepperContext = React.createContext({\n  stepperLength: 0,\n  stepIndex: 0,\n  setStepIndex: noop,\n  stepHistory: [],\n  setStepHistory: noop,\n  onStepChange: noop\n});\nfunction SimpleStepper(props) {\n  const { children, elevated, onStepChange, activeStep = 0 } = props;\n  const [stepIndex, setStepIndex] = useState(activeStep);\n  const [stepHistory, setStepHistory] = useState([0]);\n  useEffect(() => {\n    setStepIndex(activeStep);\n  }, [activeStep]);\n  const steps = [];\n  let endStep;\n  Children.forEach(children, (child) => {\n    if (isValidElement(child)) {\n      if (child.props.end) {\n        endStep = child;\n      } else {\n        steps.push(child);\n      }\n    }\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    VerticalStepperContext.Provider,\n    {\n      value: {\n        stepIndex,\n        setStepIndex,\n        stepHistory,\n        setStepHistory,\n        onStepChange,\n        stepperLength: Children.count(children)\n      }\n    },\n    /* @__PURE__ */ React.createElement(\n      MuiStepper,\n      {\n        activeStep: stepIndex,\n        orientation: \"vertical\",\n        elevation: elevated ? 2 : 0\n      },\n      steps\n    )\n  ), stepIndex >= Children.count(children) - 1 && endStep);\n}\n\nconst useStyles$n = makeStyles(\n  (theme) => ({\n    root: {\n      marginTop: theme.spacing(3),\n      \"& button\": {\n        marginRight: theme.spacing(1)\n      }\n    }\n  }),\n  { name: \"BackstageSimpleStepperFooter\" }\n);\nconst RestartBtn = ({ text, handleClick }) => /* @__PURE__ */ React.createElement(Button$1, { onClick: handleClick }, text || \"Reset\");\nconst NextBtn = ({\n  text,\n  handleClick,\n  disabled,\n  last,\n  stepIndex\n}) => /* @__PURE__ */ React.createElement(\n  Button$1,\n  {\n    variant: \"contained\",\n    color: \"primary\",\n    disabled,\n    \"data-testid\": `nextButton-${stepIndex}`,\n    onClick: handleClick\n  },\n  text || (last ? \"Finish\" : \"Next\")\n);\nconst SkipBtn = ({ text, handleClick, disabled, stepIndex }) => /* @__PURE__ */ React.createElement(\n  Button$1,\n  {\n    variant: \"outlined\",\n    color: \"primary\",\n    disabled,\n    \"data-testid\": `skipButton-${stepIndex}`,\n    onClick: handleClick\n  },\n  text || \"Skip\"\n);\nconst BackBtn = ({ text, handleClick, disabled, stepIndex }) => /* @__PURE__ */ React.createElement(\n  Button$1,\n  {\n    onClick: handleClick,\n    \"data-testid\": `backButton-${stepIndex}`,\n    disabled\n  },\n  text || \"Back\"\n);\nconst SimpleStepperFooter = ({\n  actions = {},\n  children\n}) => {\n  const classes = useStyles$n();\n  const {\n    stepperLength,\n    stepIndex,\n    setStepIndex,\n    stepHistory,\n    setStepHistory,\n    onStepChange\n  } = useContext(VerticalStepperContext);\n  const onChange = (newIndex, callback) => {\n    if (callback) {\n      callback();\n    }\n    if (onStepChange) {\n      onStepChange(stepIndex, newIndex);\n    }\n    setStepIndex(newIndex);\n  };\n  const handleNext = () => {\n    const newIndex = actions.nextStep ? actions.nextStep(stepIndex, stepperLength - 1) : stepIndex + 1;\n    onChange(newIndex, actions.onNext);\n    setStepHistory([...stepHistory, newIndex]);\n  };\n  const handleBack = () => {\n    stepHistory.pop();\n    onChange(stepHistory[stepHistory.length - 1], actions.onBack);\n    setStepHistory([...stepHistory]);\n  };\n  const handleRestart = () => {\n    onChange(0, actions.onRestart);\n    setStepHistory([0]);\n  };\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, [void 0, true].includes(actions.showBack) && stepIndex !== 0 && /* @__PURE__ */ React.createElement(\n    BackBtn,\n    {\n      text: actions.backText,\n      handleClick: handleBack,\n      disabled: stepIndex === 0,\n      stepIndex\n    }\n  ), actions.showSkip && /* @__PURE__ */ React.createElement(\n    SkipBtn,\n    {\n      text: actions.skipText,\n      handleClick: handleNext,\n      disabled: !!stepperLength && stepIndex >= stepperLength || !!actions.canSkip && !actions.canSkip(),\n      stepIndex\n    }\n  ), [void 0, true].includes(actions.showNext) && /* @__PURE__ */ React.createElement(\n    NextBtn,\n    {\n      text: actions.nextText,\n      handleClick: handleNext,\n      disabled: !!stepperLength && stepIndex >= stepperLength || !!actions.canNext && !actions.canNext(),\n      stepIndex\n    }\n  ), actions.showRestart && stepIndex !== 0 && /* @__PURE__ */ React.createElement(\n    RestartBtn,\n    {\n      text: actions.restartText,\n      handleClick: handleRestart,\n      stepIndex\n    }\n  ), children);\n};\n\nconst useStyles$m = makeStyles(\n  (theme) => ({\n    end: {\n      padding: theme.spacing(3)\n    }\n  }),\n  { name: \"SimpleStepperStep\" }\n);\nfunction SimpleStepperStep(props) {\n  const { title, children, end, actions, ...muiProps } = props;\n  const classes = useStyles$m();\n  return end ? /* @__PURE__ */ React.createElement(Box, { className: classes.end }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, title), children, /* @__PURE__ */ React.createElement(SimpleStepperFooter, { actions: { ...actions || {}, showNext: false } })) : /* @__PURE__ */ React.createElement(MuiStep, { ...muiProps }, /* @__PURE__ */ React.createElement(StepLabel, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, title)), /* @__PURE__ */ React.createElement(StepContent, null, children, /* @__PURE__ */ React.createElement(SimpleStepperFooter, { actions })));\n}\n\nconst useStyles$l = makeStyles(\n  (theme) => ({\n    status: {\n      fontWeight: theme.typography.fontWeightMedium,\n      \"&::before\": {\n        width: \"0.7em\",\n        height: \"0.7em\",\n        display: \"inline-block\",\n        marginRight: theme.spacing(1),\n        borderRadius: \"50%\",\n        content: '\"\"'\n      }\n    },\n    ok: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.ok\n      }\n    },\n    warning: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.warning\n      }\n    },\n    error: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.error\n      }\n    },\n    pending: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.pending\n      }\n    },\n    running: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.running\n      }\n    },\n    aborted: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.aborted\n      }\n    }\n  }),\n  { name: \"BackstageStatus\" }\n);\nfunction StatusOK(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.ok),\n      \"aria-label\": \"Status ok\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusWarning(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.warning),\n      \"aria-label\": \"Status warning\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusError(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.error),\n      \"aria-label\": \"Status error\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusPending(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.pending),\n      \"aria-label\": \"Status pending\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusRunning(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.running),\n      \"aria-label\": \"Status running\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusAborted(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.aborted),\n      \"aria-label\": \"Status aborted\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\n\nconst tableTitleCellStyles = (theme) => createStyles({\n  root: {\n    fontWeight: theme.typography.fontWeightBold,\n    whiteSpace: \"nowrap\",\n    paddingRight: theme.spacing(4),\n    border: \"0\",\n    verticalAlign: \"top\"\n  }\n});\nconst tableContentCellStyles = {\n  root: {\n    border: \"0\",\n    verticalAlign: \"top\"\n  }\n};\nconst listStyles = (theme) => createStyles({\n  root: {\n    margin: theme.spacing(0, 0, -1, 0)\n  }\n});\nconst listItemStyles = (theme) => createStyles({\n  root: {\n    padding: theme.spacing(0, 0, 1, 0)\n  },\n  random: {}\n});\nconst TitleCell = withStyles(tableTitleCellStyles, {\n  name: \"BackstageMetadataTableTitleCell\"\n})(TableCell);\nconst ContentCell = withStyles(tableContentCellStyles, {\n  name: \"BackstageMetadataTableCell\"\n})(TableCell);\nconst MetadataTable = ({\n  dense,\n  children\n}) => /* @__PURE__ */ React.createElement(Table$1, { size: dense ? \"small\" : \"medium\" }, /* @__PURE__ */ React.createElement(TableBody, null, children));\nconst MetadataTableItem = ({\n  title,\n  children,\n  ...rest\n}) => /* @__PURE__ */ React.createElement(TableRow, null, title && /* @__PURE__ */ React.createElement(TitleCell, null, title), /* @__PURE__ */ React.createElement(ContentCell, { colSpan: title ? 1 : 2, ...rest }, children));\nconst MetadataList = withStyles(listStyles, {\n  name: \"BackstageMetadataTableList\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(List, { disablePadding: true, className: classes.root }, children));\nconst MetadataListItem = withStyles(listItemStyles, {\n  name: \"BackstageMetadataTableListItem\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(ListItem, { className: classes.root }, children));\n\nconst listStyle = createStyles({\n  root: {\n    margin: \"0 0\",\n    listStyleType: \"none\"\n  }\n});\nconst nestedListStyle = (theme) => createStyles({\n  root: {\n    ...listStyle.root,\n    paddingLeft: theme.spacing(1)\n  }\n});\nconst StyledList = withStyles(listStyle, {\n  name: \"BackstageStructuredMetadataTableList\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(MetadataList, { classes }, children));\nconst StyledNestedList = withStyles(nestedListStyle, {\n  name: \"BackstageStructuredMetadataTableNestedList\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(MetadataList, { classes }, children));\nfunction renderList(list, options, nested) {\n  const values = list.map((item, index) => /* @__PURE__ */ React.createElement(MetadataListItem, { key: index }, toValue(item, options, nested)));\n  return nested ? /* @__PURE__ */ React.createElement(StyledNestedList, null, values) : /* @__PURE__ */ React.createElement(StyledList, null, values);\n}\nfunction renderMap(map, options, nested) {\n  const values = Object.keys(map).map((key) => {\n    const value = toValue(map[key], options, true);\n    return /* @__PURE__ */ React.createElement(MetadataListItem, { key }, /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", component: \"span\" }, `${options.titleFormat(key)}: `), value);\n  });\n  return nested ? /* @__PURE__ */ React.createElement(StyledNestedList, null, values) : /* @__PURE__ */ React.createElement(StyledList, null, values);\n}\nfunction toValue(value, options, nested) {\n  if (React.isValidElement(value)) {\n    return /* @__PURE__ */ React.createElement(Fragment, null, value);\n  }\n  if (value !== null && typeof value === \"object\" && !Array.isArray(value)) {\n    return renderMap(value, options, nested);\n  }\n  if (Array.isArray(value)) {\n    return renderList(value, options, nested);\n  }\n  if (typeof value === \"boolean\") {\n    return /* @__PURE__ */ React.createElement(Fragment, null, value ? \"\\u2705\" : \"\\u274C\");\n  }\n  return /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", component: \"span\" }, value);\n}\nconst ItemValue = ({ value, options }) => /* @__PURE__ */ React.createElement(Fragment, null, toValue(value, options, false));\nconst TableItem = ({\n  title,\n  value,\n  options\n}) => {\n  return /* @__PURE__ */ React.createElement(MetadataTableItem, { title: options.titleFormat(title) }, /* @__PURE__ */ React.createElement(ItemValue, { value, options }));\n};\nfunction mapToItems(info, options) {\n  return Object.keys(info).map((key) => /* @__PURE__ */ React.createElement(TableItem, { key, title: key, value: info[key], options }));\n}\nfunction StructuredMetadataTable(props) {\n  const { metadata, dense = true, options = {} } = props;\n  const metadataItems = mapToItems(metadata, {\n    titleFormat: startCase,\n    ...options\n  });\n  return /* @__PURE__ */ React.createElement(MetadataTable, { dense }, metadataItems);\n}\n\nfunction stringify(queryParams) {\n  return qs.stringify(queryParams, {\n    strictNullHandling: true\n  });\n}\nfunction parse(queryString) {\n  return qs.parse(queryString, {\n    ignoreQueryPrefix: true,\n    strictNullHandling: true\n  });\n}\nfunction extractState(queryString, stateName) {\n  const queryParams = parse(queryString);\n  return queryParams[stateName];\n}\nfunction joinQueryString(queryString, stateName, state) {\n  const queryParams = {\n    ...parse(queryString),\n    [stateName]: state\n  };\n  return stringify(queryParams);\n}\nfunction useQueryParamState(stateName, debounceTime = 250) {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const searchParamsString = searchParams.toString();\n  const [queryParamState, setQueryParamState] = useState(\n    extractState(searchParamsString, stateName)\n  );\n  useEffect(() => {\n    const newState = extractState(searchParamsString, stateName);\n    setQueryParamState(\n      (oldState) => isEqual(newState, oldState) ? oldState : newState\n    );\n  }, [searchParamsString, setQueryParamState, stateName]);\n  useDebouncedEffect(\n    () => {\n      const queryString = joinQueryString(\n        searchParamsString,\n        stateName,\n        queryParamState\n      );\n      if (searchParamsString !== queryString) {\n        setSearchParams(queryString, { replace: true });\n      }\n    },\n    [setSearchParams, queryParamState, searchParamsString, stateName],\n    debounceTime\n  );\n  return [queryParamState, setQueryParamState];\n}\n\nconst DEFAULT_SUPPORT_CONFIG = {\n  url: \"https://github.com/backstage/backstage/issues\",\n  items: [\n    {\n      title: \"Support Not Configured\",\n      icon: \"warning\",\n      links: [\n        {\n          // TODO: Update to dedicated support page on backstage.io/docs\n          title: \"Add `app.support` config key\",\n          url: \"https://github.com/backstage/backstage/blob/master/app-config.yaml\"\n        }\n      ]\n    }\n  ]\n};\nfunction useSupportConfig() {\n  const apiHolder = useApiHolder();\n  const config = apiHolder.get(configApiRef);\n  const supportConfig = config == null ? void 0 : config.getOptionalConfig(\"app.support\");\n  if (!supportConfig) {\n    return DEFAULT_SUPPORT_CONFIG;\n  }\n  return {\n    url: supportConfig.getString(\"url\"),\n    items: supportConfig.getConfigArray(\"items\").flatMap((itemConf) => {\n      var _a;\n      return {\n        title: itemConf.getString(\"title\"),\n        icon: itemConf.getOptionalString(\"icon\"),\n        links: ((_a = itemConf.getOptionalConfigArray(\"links\")) != null ? _a : []).flatMap(\n          (linkConf) => ({\n            url: linkConf.getString(\"url\"),\n            title: linkConf.getString(\"title\")\n          })\n        )\n      };\n    })\n  };\n}\n\nfunction useSystemIcon(key, props) {\n  const app = useApp();\n  const Icon = app.getSystemIcon(key);\n  return Icon ? /* @__PURE__ */ React.createElement(Icon, { ...props }) : /* @__PURE__ */ React.createElement(MuiBrokenImageIcon, { ...props });\n}\nfunction BrokenImageIcon(props) {\n  return useSystemIcon(\"brokenImage\", props);\n}\nfunction CatalogIcon(props) {\n  return useSystemIcon(\"catalog\", props);\n}\nfunction ChatIcon(props) {\n  return useSystemIcon(\"chat\", props);\n}\nfunction DashboardIcon(props) {\n  return useSystemIcon(\"dashboard\", props);\n}\nfunction DocsIcon(props) {\n  return useSystemIcon(\"docs\", props);\n}\nfunction EmailIcon(props) {\n  return useSystemIcon(\"email\", props);\n}\nfunction GitHubIcon(props) {\n  return useSystemIcon(\"github\", props);\n}\nfunction GroupIcon(props) {\n  return useSystemIcon(\"group\", props);\n}\nfunction HelpIcon(props) {\n  return useSystemIcon(\"help\", props);\n}\nfunction UserIcon(props) {\n  return useSystemIcon(\"user\", props);\n}\nfunction WarningIcon(props) {\n  return useSystemIcon(\"warning\", props);\n}\n\nconst useStyles$k = makeStyles(\n  {\n    popoverList: {\n      minWidth: 260,\n      maxWidth: 400\n    },\n    menuItem: {\n      whiteSpace: \"normal\"\n    }\n  },\n  { name: \"BackstageSupportButton\" }\n);\nconst SupportIcon = ({ icon }) => {\n  var _a;\n  const app = useApp();\n  const Icon = icon ? (_a = app.getSystemIcon(icon)) != null ? _a : HelpIcon : HelpIcon;\n  return /* @__PURE__ */ React.createElement(Icon, null);\n};\nconst SupportLink = ({ link }) => {\n  var _a;\n  return /* @__PURE__ */ React.createElement(Link, { to: link.url }, (_a = link.title) != null ? _a : link.url);\n};\nconst SupportListItem = ({ item }) => {\n  var _a;\n  return /* @__PURE__ */ React.createElement(MenuItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(SupportIcon, { icon: item.icon })), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: item.title,\n      secondary: (_a = item.links) == null ? void 0 : _a.reduce(\n        (prev, link, idx) => [\n          ...prev,\n          idx > 0 && /* @__PURE__ */ React.createElement(\"br\", { key: idx }),\n          /* @__PURE__ */ React.createElement(SupportLink, { link, key: link.url })\n        ],\n        []\n      )\n    }\n  ));\n};\nfunction SupportButton(props) {\n  const { title, items, children } = props;\n  const { items: configItems } = useSupportConfig();\n  const [popoverOpen, setPopoverOpen] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const classes = useStyles$k();\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"sm\")\n  );\n  const onClickHandler = (event) => {\n    setAnchorEl(event.currentTarget);\n    setPopoverOpen(true);\n  };\n  const popoverCloseHandler = () => {\n    setPopoverOpen(false);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { display: \"flex\", ml: 1 }, isSmallScreen ? /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      color: \"primary\",\n      size: \"small\",\n      onClick: onClickHandler,\n      \"data-testid\": \"support-button\",\n      \"aria-label\": \"Support\"\n    },\n    /* @__PURE__ */ React.createElement(HelpIcon, null)\n  ) : /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      \"data-testid\": \"support-button\",\n      \"aria-label\": \"Support\",\n      color: \"primary\",\n      onClick: onClickHandler,\n      startIcon: /* @__PURE__ */ React.createElement(HelpIcon, null)\n    },\n    \"Support\"\n  )), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      \"data-testid\": \"support-button-popover\",\n      open: popoverOpen,\n      anchorEl,\n      anchorOrigin: {\n        vertical: \"bottom\",\n        horizontal: \"right\"\n      },\n      transformOrigin: {\n        vertical: \"top\",\n        horizontal: \"right\"\n      },\n      onClose: popoverCloseHandler\n    },\n    /* @__PURE__ */ React.createElement(\n      MenuList,\n      {\n        className: classes.popoverList,\n        autoFocusItem: Boolean(anchorEl)\n      },\n      title && /* @__PURE__ */ React.createElement(MenuItem, { alignItems: \"flex-start\", className: classes.menuItem }, /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle1\" }, title)),\n      React.Children.map(children, (child, i) => /* @__PURE__ */ React.createElement(\n        MenuItem,\n        {\n          alignItems: \"flex-start\",\n          key: `child-${i}`,\n          className: classes.menuItem\n        },\n        child\n      )),\n      (items != null ? items : configItems).map((item, i) => /* @__PURE__ */ React.createElement(SupportListItem, { item, key: `item-${i}` }))\n    ),\n    /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(\n      Button$1,\n      {\n        color: \"primary\",\n        onClick: popoverCloseHandler,\n        \"aria-label\": \"Close\"\n      },\n      \"Close\"\n    ))\n  ));\n}\n\nconst useStyles$j = makeStyles(\n  (theme) => ({\n    root: {\n      gridArea: \"pageContent\",\n      minWidth: 0,\n      paddingTop: theme.spacing(3),\n      paddingBottom: theme.spacing(3),\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up(\"sm\")]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3)\n      }\n    },\n    stretch: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      flexGrow: 1\n    },\n    noPadding: {\n      padding: 0\n    }\n  }),\n  { name: \"BackstageContent\" }\n);\nfunction Content(props) {\n  const { className, stretch, noPadding, children, ...restProps } = props;\n  const classes = useStyles$j();\n  return /* @__PURE__ */ React.createElement(\n    \"article\",\n    {\n      ...restProps,\n      className: classNames(classes.root, className, {\n        [classes.stretch]: stretch,\n        [classes.noPadding]: noPadding\n      })\n    },\n    children\n  );\n}\n\nconst useStyles$i = makeStyles(\n  (theme) => ({\n    tabsWrapper: {\n      gridArea: \"pageSubheader\",\n      backgroundColor: theme.palette.background.paper,\n      paddingLeft: theme.spacing(3),\n      minWidth: 0\n    },\n    defaultTab: {\n      ...theme.typography.caption,\n      padding: theme.spacing(3, 3),\n      textTransform: \"uppercase\",\n      fontWeight: theme.typography.fontWeightBold,\n      color: theme.palette.text.secondary\n    },\n    selected: {\n      color: theme.palette.text.primary\n    },\n    tabRoot: {\n      \"&:hover\": {\n        backgroundColor: theme.palette.background.default,\n        color: theme.palette.text.primary\n      }\n    }\n  }),\n  { name: \"BackstageHeaderTabs\" }\n);\nfunction HeaderTabs(props) {\n  const { tabs, onChange, selectedIndex } = props;\n  const [selectedTab, setSelectedTab] = useState(selectedIndex != null ? selectedIndex : 0);\n  const styles = useStyles$i();\n  const handleChange = useCallback(\n    (_, index) => {\n      if (selectedIndex === void 0) {\n        setSelectedTab(index);\n      }\n      if (onChange)\n        onChange(index);\n    },\n    [selectedIndex, onChange]\n  );\n  useEffect(() => {\n    if (selectedIndex !== void 0) {\n      setSelectedTab(selectedIndex);\n    }\n  }, [selectedIndex]);\n  return /* @__PURE__ */ React.createElement(Box, { className: styles.tabsWrapper }, /* @__PURE__ */ React.createElement(\n    Tabs,\n    {\n      indicatorColor: \"primary\",\n      textColor: \"inherit\",\n      variant: \"scrollable\",\n      scrollButtons: \"auto\",\n      \"aria-label\": \"tabs\",\n      onChange: handleChange,\n      value: selectedTab\n    },\n    tabs.map((tab, index) => /* @__PURE__ */ React.createElement(\n      TabUI,\n      {\n        ...tab.tabProps,\n        \"data-testid\": `header-tab-${index}`,\n        label: tab.label,\n        key: tab.id,\n        value: index,\n        className: styles.defaultTab,\n        classes: { selected: styles.selected, root: styles.tabRoot }\n      }\n    ))\n  ));\n}\n\nfunction useSelectedSubRoute(subRoutes) {\n  var _a, _b, _c, _d, _e;\n  const params = useParams();\n  const routes = subRoutes.map(({ path, children }) => ({\n    caseSensitive: false,\n    path: `${path}/*`,\n    element: children\n  }));\n  const sortedRoutes = routes.sort(\n    (a, b) => (\n      // remove \"/*\" symbols from path end before comparing\n      b.path.replace(/\\/\\*$/, \"\").localeCompare(a.path.replace(/\\/\\*$/, \"\"))\n    )\n  );\n  const element = (_b = useRoutes(sortedRoutes)) != null ? _b : (_a = subRoutes[0]) == null ? void 0 : _a.children;\n  let currentRoute = (_c = params[\"*\"]) != null ? _c : \"\";\n  if (!currentRoute.startsWith(\"/\")) {\n    currentRoute = `/${currentRoute}`;\n  }\n  const [matchedRoute] = (_d = matchRoutes(sortedRoutes, currentRoute)) != null ? _d : [];\n  const foundIndex = matchedRoute ? subRoutes.findIndex((t) => `${t.path}/*` === matchedRoute.route.path) : 0;\n  return {\n    index: foundIndex === -1 ? 0 : foundIndex,\n    element,\n    route: (_e = subRoutes[foundIndex]) != null ? _e : subRoutes[0]\n  };\n}\nfunction RoutedTabs(props) {\n  const { routes } = props;\n  const navigate = useNavigate();\n  const { index, route, element } = useSelectedSubRoute(routes);\n  const headerTabs = useMemo(\n    () => routes.map((t) => ({\n      id: t.path,\n      label: t.title,\n      tabProps: t.tabProps\n    })),\n    [routes]\n  );\n  const onTabChange = (tabIndex) => {\n    let { path } = routes[tabIndex];\n    path = path.replace(/\\/\\*$/, \"\");\n    path = path.replace(/^\\//, \"\");\n    navigate(path);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    HeaderTabs,\n    {\n      tabs: headerTabs,\n      selectedIndex: index,\n      onChange: onTabChange\n    }\n  ), /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Helmet, { title: route == null ? void 0 : route.title }), element));\n}\n\nconst Route = () => null;\nattachComponentData(Route, \"core.gatherMountPoints\", true);\nfunction createSubRoutesFromChildren(childrenProps) {\n  const routeType = (/* @__PURE__ */ React.createElement(Route, { path: \"\", title: \"\" }, /* @__PURE__ */ React.createElement(\"div\", null))).type;\n  return Children.toArray(childrenProps).flatMap((child) => {\n    if (!isValidElement(child)) {\n      return [];\n    }\n    if (child.type === Fragment) {\n      return createSubRoutesFromChildren(child.props.children);\n    }\n    if (child.type !== routeType) {\n      throw new Error(\"Child of TabbedLayout must be an TabbedLayout.Route\");\n    }\n    const { path, title, children, tabProps } = child.props;\n    return [{ path, title, children, tabProps }];\n  });\n}\nfunction TabbedLayout(props) {\n  const routes = createSubRoutesFromChildren(props.children);\n  return /* @__PURE__ */ React.createElement(RoutedTabs, { routes });\n}\nTabbedLayout.Route = Route;\n\nconst useSubvalueCellStyles = makeStyles(\n  (theme) => ({\n    value: {\n      marginBottom: theme.spacing(0.75)\n    },\n    subvalue: {\n      color: theme.palette.textSubtle,\n      fontWeight: \"normal\"\n    }\n  }),\n  { name: \"BackstageSubvalueCell\" }\n);\nfunction SubvalueCell(props) {\n  const { value, subvalue } = props;\n  const classes = useSubvalueCellStyles();\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { className: classes.value }, value), /* @__PURE__ */ React.createElement(Box, { className: classes.subvalue }, subvalue));\n}\n\nconst useFilterStyles$1 = makeStyles(\n  (theme) => ({\n    root: {\n      height: \"100%\",\n      width: \"315px\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      marginRight: theme.spacing(3)\n    },\n    value: {\n      fontWeight: \"bold\",\n      fontSize: 18\n    },\n    header: {\n      display: \"flex\",\n      alignItems: \"center\",\n      height: theme.spacing(7.5),\n      justifyContent: \"space-between\",\n      borderBottom: `1px solid ${theme.palette.grey[500]}`\n    },\n    filters: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      \"& > *\": {\n        marginTop: theme.spacing(2)\n      }\n    }\n  }),\n  { name: \"BackstageTableFilters\" }\n);\nconst Filters = (props) => {\n  var _a;\n  const classes = useFilterStyles$1();\n  const { onChangeFilters } = props;\n  const [selectedFilters, setSelectedFilters] = useState({\n    ...props.selectedFilters\n  });\n  const [reset, triggerReset] = useState(false);\n  const handleClick = () => {\n    setSelectedFilters({});\n    triggerReset((el) => !el);\n  };\n  useEffect(() => {\n    onChangeFilters(selectedFilters);\n  }, [selectedFilters, onChangeFilters]);\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, /* @__PURE__ */ React.createElement(Box, { className: classes.header }, /* @__PURE__ */ React.createElement(Box, { className: classes.value }, \"Filters\"), /* @__PURE__ */ React.createElement(Button$1, { color: \"primary\", onClick: handleClick }, \"Clear all\")), /* @__PURE__ */ React.createElement(Box, { className: classes.filters }, ((_a = props.filters) == null ? void 0 : _a.length) && props.filters.map((filter) => /* @__PURE__ */ React.createElement(\n    SelectComponent,\n    {\n      triggerReset: reset,\n      key: filter.element.label,\n      ...filter.element,\n      selected: selectedFilters[filter.element.label],\n      onChange: (el) => setSelectedFilters({\n        ...selectedFilters,\n        [filter.element.label]: el\n      })\n    }\n  ))));\n};\n\nfunction TableLoadingBody(props) {\n  return /* @__PURE__ */ React.createElement(\"tbody\", { \"data-testid\": \"loading-indicator\" }, /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"td\", { colSpan: props.colSpan }, /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      sx: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        width: \"100%\",\n        minHeight: \"15rem\"\n      }\n    },\n    /* @__PURE__ */ React.createElement(CircularProgress, { size: \"5rem\" })\n  ))));\n}\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(AddBox, { ...props, ref })),\n  Check: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Check, { ...props, ref })),\n  Clear: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Clear, { ...props, ref })),\n  Delete: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(DeleteOutline, { ...props, ref })),\n  DetailPanel: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ChevronRight, { ...props, ref })),\n  Edit: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Edit, { ...props, ref })),\n  Export: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(SaveAlt, { ...props, ref })),\n  Filter: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(FilterList, { ...props, ref })),\n  FirstPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(FirstPage, { ...props, ref })),\n  LastPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(LastPage, { ...props, ref })),\n  NextPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ChevronRight, { ...props, ref })),\n  PreviousPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ChevronLeftIcon, { ...props, ref })),\n  ResetSearch: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Clear, { ...props, ref })),\n  Search: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(FilterList, { ...props, ref })),\n  SortArrow: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ArrowUpward, { ...props, ref })),\n  ThirdStateCheck: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Remove, { ...props, ref })),\n  ViewColumn: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ViewColumn, { ...props, ref }))\n};\nfunction extractValueByField(data, field) {\n  const path = field.split(\".\");\n  let value = data[path[0]];\n  for (let i = 1; i < path.length; ++i) {\n    if (value === void 0) {\n      return value;\n    }\n    const f = path[i];\n    value = value[f];\n  }\n  return value;\n}\nconst StyledMTableHeader = withStyles(\n  (theme) => ({\n    header: {\n      padding: theme.spacing(1, 2, 1, 2.5),\n      borderTop: `1px solid ${theme.palette.grey.A100}`,\n      borderBottom: `1px solid ${theme.palette.grey.A100}`,\n      // withStyles hasn't a generic overload for theme\n      fontWeight: theme.typography.fontWeightBold,\n      position: \"static\",\n      wordBreak: \"normal\"\n    }\n  }),\n  { name: \"BackstageTableHeader\" }\n)(MTableHeader);\nconst StyledMTableToolbar = withStyles(\n  (theme) => ({\n    root: {\n      padding: theme.spacing(3, 0, 2.5, 2.5)\n    },\n    title: {\n      \"& > h6\": {\n        fontWeight: theme.typography.fontWeightBold\n      }\n    },\n    searchField: {\n      paddingRight: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageTableToolbar\" }\n)(MTableToolbar);\nconst useFilterStyles = makeStyles(\n  (theme) => ({\n    root: {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\"\n    },\n    title: {\n      fontWeight: theme.typography.fontWeightBold,\n      fontSize: 18,\n      whiteSpace: \"nowrap\"\n    }\n  }),\n  { name: \"BackstageTableFiltersContainer\" }\n);\nconst useTableStyles = makeStyles(\n  () => ({\n    root: {\n      display: \"flex\",\n      alignItems: \"start\"\n    }\n  }),\n  { name: \"BackstageTable\" }\n);\nfunction convertColumns(columns, theme) {\n  return columns.map((column) => {\n    var _a;\n    const headerStyle = (_a = column.headerStyle) != null ? _a : {};\n    let cellStyle = column.cellStyle || {};\n    if (column.highlight) {\n      headerStyle.color = theme.palette.textContrast;\n      if (typeof cellStyle === \"object\") {\n        cellStyle.fontWeight = theme.typography.fontWeightBold;\n      } else {\n        const cellStyleFn = cellStyle;\n        cellStyle = (data, rowData, rowColumn) => {\n          const style = cellStyleFn(data, rowData, rowColumn);\n          return { ...style, fontWeight: theme.typography.fontWeightBold };\n        };\n      }\n    }\n    return {\n      ...column,\n      headerStyle,\n      cellStyle\n    };\n  });\n}\nfunction removeDefaultValues(state, defaultState) {\n  return transform(state, (result, value, key) => {\n    if (!isEqual(value, defaultState[key])) {\n      result[key] = value;\n    }\n  });\n}\nconst defaultInitialState = {\n  search: \"\",\n  filtersOpen: false,\n  filters: {}\n};\nfunction TableToolbar(toolbarProps) {\n  const {\n    toolbarRef,\n    setSearch,\n    hasFilters,\n    selectedFiltersLength,\n    toggleFilters\n  } = toolbarProps;\n  const filtersClasses = useFilterStyles();\n  const onSearchChanged = useCallback(\n    (searchText) => {\n      toolbarProps.onSearchChanged(searchText);\n      setSearch(searchText);\n    },\n    [toolbarProps, setSearch]\n  );\n  if (hasFilters) {\n    return /* @__PURE__ */ React.createElement(Box, { className: filtersClasses.root }, /* @__PURE__ */ React.createElement(Box, { className: filtersClasses.root }, /* @__PURE__ */ React.createElement(IconButton, { onClick: toggleFilters, \"aria-label\": \"filter list\" }, /* @__PURE__ */ React.createElement(FilterList, null)), /* @__PURE__ */ React.createElement(Typography, { className: filtersClasses.title }, \"Filters (\", selectedFiltersLength, \")\")), /* @__PURE__ */ React.createElement(\n      StyledMTableToolbar,\n      {\n        ...toolbarProps,\n        ref: toolbarRef,\n        onSearchChanged\n      }\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(\n    StyledMTableToolbar,\n    {\n      ...toolbarProps,\n      ref: toolbarRef,\n      onSearchChanged\n    }\n  );\n}\nfunction Table(props) {\n  const {\n    data,\n    columns,\n    emptyContent,\n    options,\n    title,\n    subtitle,\n    localization,\n    filters,\n    initialState,\n    onStateChange,\n    components,\n    isLoading: loading,\n    ...restProps\n  } = props;\n  const tableClasses = useTableStyles();\n  const theme = useTheme();\n  const calculatedInitialState = { ...defaultInitialState, ...initialState };\n  const [filtersOpen, setFiltersOpen] = useState(\n    calculatedInitialState.filtersOpen\n  );\n  const toggleFilters = useCallback(\n    () => setFiltersOpen((v) => !v),\n    [setFiltersOpen]\n  );\n  const [selectedFilters, setSelectedFilters] = useState(\n    calculatedInitialState.filters\n  );\n  const [search, setSearch] = useState(calculatedInitialState.search);\n  useEffect(() => {\n    if (onStateChange) {\n      const state = removeDefaultValues(\n        {\n          search,\n          filtersOpen,\n          filters: selectedFilters\n        },\n        defaultInitialState\n      );\n      onStateChange(state);\n    }\n  }, [search, filtersOpen, selectedFilters, onStateChange]);\n  const getFieldByTitle = useCallback(\n    (titleValue) => {\n      var _a;\n      return (_a = columns.find((el) => el.title === titleValue)) == null ? void 0 : _a.field;\n    },\n    [columns]\n  );\n  const tableData = useMemo(() => {\n    if (typeof data === \"function\" || !selectedFilters) {\n      return data;\n    }\n    const selectedFiltersArray = Object.values(selectedFilters);\n    if (data && selectedFiltersArray.flat().length) {\n      const newData = data.filter(\n        (el) => !!Object.entries(selectedFilters).filter(([, value]) => !!value.length).every(([key, filterValue]) => {\n          const fieldValue = extractValueByField(\n            el,\n            getFieldByTitle(key)\n          );\n          if (Array.isArray(fieldValue) && Array.isArray(filterValue)) {\n            return fieldValue.some((v) => filterValue.includes(v));\n          } else if (Array.isArray(fieldValue)) {\n            return fieldValue.includes(filterValue);\n          } else if (Array.isArray(filterValue)) {\n            return filterValue.includes(fieldValue);\n          }\n          return fieldValue === filterValue;\n        })\n      );\n      return newData;\n    }\n    return data;\n  }, [data, selectedFilters, getFieldByTitle]);\n  const selectedFiltersLength = Object.values(selectedFilters).flat().length;\n  const hasFilters = !!(filters == null ? void 0 : filters.length);\n  const Toolbar = useCallback(\n    (toolbarProps) => {\n      return /* @__PURE__ */ React.createElement(\n        TableToolbar,\n        {\n          setSearch,\n          hasFilters,\n          selectedFiltersLength,\n          toggleFilters,\n          ...toolbarProps\n        }\n      );\n    },\n    [toggleFilters, hasFilters, selectedFiltersLength, setSearch]\n  );\n  const hasNoRows = typeof data !== \"function\" && data.length === 0;\n  const columnCount = columns.length;\n  const Body = useMemo(\n    () => makeBody({ hasNoRows, emptyContent, columnCount, loading }),\n    [hasNoRows, emptyContent, columnCount, loading]\n  );\n  return /* @__PURE__ */ React.createElement(Box, { className: tableClasses.root }, filtersOpen && data && typeof data !== \"function\" && (filters == null ? void 0 : filters.length) && /* @__PURE__ */ React.createElement(\n    Filters,\n    {\n      filters: constructFilters(filters, data, columns),\n      selectedFilters,\n      onChangeFilters: setSelectedFilters\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MTable,\n    {\n      components: {\n        Header: StyledMTableHeader,\n        Body,\n        Toolbar,\n        ...components\n      },\n      options: { headerStyle: { textTransform: \"uppercase\" }, ...options },\n      columns: convertColumns(columns, theme),\n      icons: tableIcons,\n      title: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\", component: \"h2\" }, title), subtitle && /* @__PURE__ */ React.createElement(Typography, { color: \"textSecondary\", variant: \"body1\" }, subtitle)),\n      data: tableData,\n      style: { width: \"100%\" },\n      localization: {\n        toolbar: { searchPlaceholder: \"Filter\", searchTooltip: \"Filter\" },\n        ...localization\n      },\n      ...restProps\n    }\n  ));\n}\nTable.icons = Object.freeze(tableIcons);\nfunction makeBody({\n  columnCount,\n  emptyContent,\n  hasNoRows,\n  loading\n}) {\n  return (bodyProps) => {\n    if (loading) {\n      return /* @__PURE__ */ React.createElement(TableLoadingBody, { colSpan: columnCount });\n    }\n    if (emptyContent && hasNoRows) {\n      return /* @__PURE__ */ React.createElement(\"tbody\", null, /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"td\", { colSpan: columnCount }, emptyContent)));\n    }\n    return /* @__PURE__ */ React.createElement(MTableBody, { ...bodyProps });\n  };\n}\nfunction constructFilters(filterConfig, dataValue, columns) {\n  const extractDistinctValues = (field) => {\n    const distinctValues = /* @__PURE__ */ new Set();\n    const addValue = (value) => {\n      if (value !== void 0 && value !== null) {\n        distinctValues.add(value);\n      }\n    };\n    if (dataValue) {\n      dataValue.forEach((el) => {\n        var _a;\n        const value = extractValueByField(\n          el,\n          (_a = columns.find((c) => c.title === field)) == null ? void 0 : _a.field\n        );\n        if (Array.isArray(value)) {\n          value.forEach(addValue);\n        } else {\n          addValue(value);\n        }\n      });\n    }\n    return distinctValues;\n  };\n  const constructSelect = (filter) => {\n    return {\n      placeholder: \"All results\",\n      label: filter.column,\n      multiple: filter.type === \"multiple-select\",\n      items: [...extractDistinctValues(filter.column)].sort().map((value) => ({\n        label: value,\n        value\n      }))\n    };\n  };\n  return filterConfig.map((filter) => ({\n    type: filter.type,\n    element: constructSelect(filter)\n  }));\n}\n\nfunction color(data, theme) {\n  const lastNum = data[data.length - 1];\n  if (!lastNum)\n    return void 0;\n  if (lastNum >= 0.9)\n    return theme.palette.status.ok;\n  if (lastNum >= 0.5)\n    return theme.palette.status.warning;\n  return theme.palette.status.error;\n}\nfunction TrendLine(props) {\n  var _a;\n  const theme = useTheme();\n  if (!props.data)\n    return null;\n  return /* @__PURE__ */ React.createElement(Sparklines, { width: 120, height: 30, min: 0, max: 1, ...props }, props.title && /* @__PURE__ */ React.createElement(\"title\", null, props.title), /* @__PURE__ */ React.createElement(SparklinesLine, { color: (_a = props.color) != null ? _a : color(props.data, theme) }));\n}\n\nconst useStyles$h = (props) => makeStyles(\n  (theme) => ({\n    container: {\n      width: \"100%\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      flexWrap: \"wrap\",\n      justifyContent: \"flex-end\",\n      alignItems: \"center\",\n      marginBottom: theme.spacing(2),\n      textAlign: props.textAlign\n    },\n    leftItemsBox: {\n      flex: \"1 1 auto\",\n      minWidth: 0,\n      overflow: \"visible\"\n    },\n    rightItemsBox: {\n      flex: \"0 1 auto\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      flexWrap: \"wrap\",\n      alignItems: \"center\",\n      marginLeft: theme.spacing(1),\n      minWidth: 0,\n      overflow: \"visible\"\n    },\n    description: {},\n    title: {\n      display: \"inline-flex\",\n      marginBottom: 0\n    }\n  }),\n  { name: \"BackstageContentHeader\" }\n);\nconst ContentHeaderTitle = ({\n  title = \"Unknown page\",\n  className\n}) => /* @__PURE__ */ React.createElement(\n  Typography,\n  {\n    variant: \"h4\",\n    component: \"h2\",\n    className,\n    \"data-testid\": \"header-title\"\n  },\n  title\n);\nfunction ContentHeader(props) {\n  const {\n    description,\n    title,\n    titleComponent: TitleComponent = void 0,\n    children,\n    textAlign = \"left\"\n  } = props;\n  const classes = useStyles$h({ textAlign })();\n  const renderedTitle = TitleComponent ? TitleComponent : /* @__PURE__ */ React.createElement(ContentHeaderTitle, { title, className: classes.title });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Helmet, { title }), /* @__PURE__ */ React.createElement(Box, { className: classes.container }, /* @__PURE__ */ React.createElement(Box, { className: classes.leftItemsBox }, renderedTitle, description && /* @__PURE__ */ React.createElement(Typography, { className: classes.description, variant: \"body2\" }, description)), /* @__PURE__ */ React.createElement(Box, { className: classes.rightItemsBox }, children)));\n}\n\nconst useStyles$g = makeStyles(\n  (theme) => ({\n    micDrop: {\n      maxWidth: \"60%\",\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n      [theme.breakpoints.down(\"xs\")]: {\n        maxWidth: \"96%\",\n        bottom: \"unset\",\n        right: \"unset\",\n        margin: theme.spacing(10, \"auto\", 4)\n      }\n    }\n  }),\n  { name: \"BackstageErrorPageMicDrop\" }\n);\nconst MicDrop = () => {\n  const classes = useStyles$g();\n  return /* @__PURE__ */ React.createElement(\n    \"img\",\n    {\n      src: MicDropSvgUrl,\n      className: classes.micDrop,\n      alt: \"Girl dropping mic from her hands\"\n    }\n  );\n};\n\nconst useStyles$f = makeStyles(\n  (theme) => ({\n    title: {\n      paddingBottom: theme.spacing(5),\n      [theme.breakpoints.down(\"xs\")]: {\n        paddingBottom: theme.spacing(4),\n        fontSize: theme.typography.h3.fontSize\n      }\n    }\n  }),\n  { name: \"BackstageErrorPageStackDetails\" }\n);\nfunction StackDetails(props) {\n  const { stack } = props;\n  const classes = useStyles$f();\n  const [detailsOpen, setDetailsOpen] = useState(false);\n  if (!detailsOpen) {\n    return /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\", className: classes.title }, /* @__PURE__ */ React.createElement(Link, { to: \"#\", onClick: () => setDetailsOpen(true) }, \"Show more details\"));\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\", className: classes.title }, /* @__PURE__ */ React.createElement(Link, { to: \"#\", onClick: () => setDetailsOpen(false) }, \"Show less details\")), /* @__PURE__ */ React.createElement(\n    CodeSnippet,\n    {\n      text: stack,\n      language: \"text\",\n      showCopyCodeButton: true,\n      showLineNumbers: true\n    }\n  ));\n}\n\nconst useStyles$e = makeStyles(\n  (theme) => ({\n    container: {\n      padding: theme.spacing(8),\n      [theme.breakpoints.down(\"xs\")]: {\n        padding: theme.spacing(2)\n      }\n    },\n    title: {\n      paddingBottom: theme.spacing(5),\n      [theme.breakpoints.down(\"xs\")]: {\n        paddingBottom: theme.spacing(4),\n        fontSize: theme.typography.h3.fontSize\n      }\n    },\n    subtitle: {\n      color: theme.palette.textSubtle\n    }\n  }),\n  { name: \"BackstageErrorPage\" }\n);\nfunction ErrorPage(props) {\n  const { status, statusMessage, additionalInfo, supportUrl, stack } = props;\n  const classes = useStyles$e();\n  const navigate = useNavigate();\n  const support = useSupportConfig();\n  return /* @__PURE__ */ React.createElement(Grid, { container: true, className: classes.container }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, sm: 8, md: 4 }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      \"data-testid\": \"error\",\n      variant: \"body1\",\n      className: classes.subtitle\n    },\n    \"ERROR \",\n    status,\n    \": \",\n    statusMessage\n  ), /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\", className: classes.subtitle }, additionalInfo), /* @__PURE__ */ React.createElement(Typography, { variant: \"h2\", className: classes.title }, \"Looks like someone dropped the mic!\"), /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\", className: classes.title }, /* @__PURE__ */ React.createElement(Link, { to: \"#\", \"data-testid\": \"go-back-link\", onClick: () => navigate(-1) }, \"Go back\"), \"... or please\", \" \", /* @__PURE__ */ React.createElement(Link, { to: supportUrl || support.url }, \"contact support\"), \" if you think this is a bug.\"), stack && /* @__PURE__ */ React.createElement(StackDetails, { stack })), /* @__PURE__ */ React.createElement(MicDrop, null));\n}\n\nconst ClickableText = withStyles(\n  {\n    root: {\n      textDecoration: \"underline\",\n      cursor: \"pointer\"\n    }\n  },\n  { name: \"BackstageBreadcrumbsClickableText\" }\n)(Typography);\nconst StyledBox = withStyles(\n  {\n    root: {\n      textDecoration: \"underline\",\n      color: \"inherit\"\n    }\n  },\n  { name: \"BackstageBreadcrumbsStyledBox\" }\n)(Box);\nfunction Breadcrumbs(props) {\n  const { children, ...restProps } = props;\n  const [anchorEl, setAnchorEl] = React.useState(\n    null\n  );\n  const childrenArray = React.Children.toArray(children);\n  const [firstPage, secondPage, ...expandablePages] = childrenArray;\n  const currentPage = expandablePages.length ? expandablePages.pop() : childrenArray[childrenArray.length - 1];\n  const hasHiddenBreadcrumbs = childrenArray.length > 3;\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n  const open = Boolean(anchorEl);\n  return /* @__PURE__ */ React.createElement(Fragment, null, /* @__PURE__ */ React.createElement(MaterialBreadcrumbs, { \"aria-label\": \"breadcrumb\", ...restProps }, childrenArray.length > 1 && /* @__PURE__ */ React.createElement(StyledBox, { clone: true }, firstPage), childrenArray.length > 2 && /* @__PURE__ */ React.createElement(StyledBox, { clone: true }, secondPage), hasHiddenBreadcrumbs && /* @__PURE__ */ React.createElement(ClickableText, { onClick: handleClick }, \"...\"), /* @__PURE__ */ React.createElement(Box, { style: { fontStyle: \"italic\" } }, currentPage)), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      open,\n      anchorEl,\n      onClose: handleClose,\n      anchorOrigin: {\n        vertical: \"bottom\",\n        horizontal: \"left\"\n      },\n      transformOrigin: {\n        vertical: \"top\",\n        horizontal: \"left\"\n      }\n    },\n    /* @__PURE__ */ React.createElement(List, null, expandablePages.map((pageLink, index) => /* @__PURE__ */ React.createElement(ListItem, { key: index, button: true }, /* @__PURE__ */ React.createElement(StyledBox, { clone: true }, pageLink))))\n  ));\n}\n\nconst drawerWidthClosed = 72;\nconst iconPadding = 24;\nconst userBadgePadding = 18;\nconst sidebarConfig = {\n  drawerWidthClosed,\n  drawerWidthOpen: 224,\n  // As per NN/g's guidance on timing for exposing hidden content\n  // See https://www.nngroup.com/articles/timing-exposing-content/\n  defaultOpenDelayMs: 100,\n  defaultCloseDelayMs: 0,\n  defaultFadeDuration: 200,\n  logoHeight: 32,\n  iconContainerWidth: drawerWidthClosed,\n  iconSize: drawerWidthClosed - iconPadding * 2,\n  iconPadding,\n  selectedIndicatorWidth: 3,\n  userBadgePadding,\n  userBadgeDiameter: drawerWidthClosed - userBadgePadding * 2,\n  mobileSidebarHeight: 56\n};\nconst makeSidebarConfig = (customSidebarConfig) => ({\n  ...sidebarConfig,\n  ...customSidebarConfig,\n  iconContainerWidth: sidebarConfig.drawerWidthClosed,\n  iconSize: sidebarConfig.drawerWidthClosed - sidebarConfig.iconPadding * 2,\n  userBadgeDiameter: sidebarConfig.drawerWidthClosed - sidebarConfig.userBadgePadding * 2\n});\nconst submenuConfig = {\n  drawerWidthClosed: 0,\n  drawerWidthOpen: 202,\n  defaultOpenDelayMs: sidebarConfig.defaultOpenDelayMs + 200\n};\nconst makeSidebarSubmenuConfig = (customSubmenuConfig) => ({\n  ...submenuConfig,\n  ...customSubmenuConfig\n});\nconst SIDEBAR_INTRO_LOCAL_STORAGE = \"@backstage/core/sidebar-intro-dismissed\";\nconst SidebarConfigContext = createContext({\n  sidebarConfig,\n  submenuConfig\n});\nconst SidebarItemWithSubmenuContext = createContext({\n  isHoveredOn: false,\n  setIsHoveredOn: () => {\n  }\n});\n\nconst defaultSidebarOpenStateContext = {\n  isOpen: false,\n  setOpen: () => {\n  }\n};\nconst LegacySidebarContext = createContext(\n  defaultSidebarOpenStateContext\n);\nconst VersionedSidebarContext = createVersionedContext(\"sidebar-open-state-context\");\nfunction SidebarOpenStateProvider(props) {\n  const { children, value } = props;\n  return /* @__PURE__ */ React.createElement(LegacySidebarContext.Provider, { value }, /* @__PURE__ */ React.createElement(\n    VersionedSidebarContext.Provider,\n    {\n      value: createVersionedValueMap({ 1: value })\n    },\n    children\n  ));\n}\nconst useSidebarOpenState = () => {\n  const versionedOpenStateContext = useContext(VersionedSidebarContext);\n  const legacyOpenStateContext = useContext(LegacySidebarContext);\n  if (versionedOpenStateContext === void 0) {\n    return legacyOpenStateContext || defaultSidebarOpenStateContext;\n  }\n  const openStateContext = versionedOpenStateContext.atVersion(1);\n  if (openStateContext === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return openStateContext;\n};\n\nconst MobileSidebarContext = createContext({\n  selectedMenuItemIndex: -1,\n  setSelectedMenuItemIndex: () => {\n  }\n});\n\nconst defaultSidebarPinStateContext = {\n  isPinned: true,\n  toggleSidebarPinState: () => {\n  },\n  isMobile: false\n};\nconst LegacySidebarPinStateContext = createContext(defaultSidebarPinStateContext);\nconst VersionedSidebarPinStateContext = createVersionedContext(\"sidebar-pin-state-context\");\nfunction SidebarPinStateProvider(props) {\n  const { children, value } = props;\n  return /* @__PURE__ */ React.createElement(LegacySidebarPinStateContext.Provider, { value }, /* @__PURE__ */ React.createElement(\n    VersionedSidebarPinStateContext.Provider,\n    {\n      value: createVersionedValueMap({ 1: value })\n    },\n    children\n  ));\n}\nconst useSidebarPinState = () => {\n  const versionedPinStateContext = useContext(VersionedSidebarPinStateContext);\n  const legacyPinStateContext = useContext(LegacySidebarPinStateContext);\n  if (versionedPinStateContext === void 0) {\n    return legacyPinStateContext || defaultSidebarPinStateContext;\n  }\n  const pinStateContext = versionedPinStateContext.atVersion(1);\n  if (pinStateContext === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return pinStateContext;\n};\n\nconst useStyles$d = makeStyles(\n  (theme) => ({\n    root: {\n      flexGrow: 0,\n      margin: theme.spacing(0, 2),\n      color: theme.palette.navigation.color\n    },\n    selected: (props) => ({\n      color: `${theme.palette.navigation.selectedColor}!important`,\n      borderTop: `solid ${props.sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n      marginTop: \"-1px\"\n    }),\n    label: {\n      display: \"none\"\n    }\n  })\n);\nconst MobileSidebarGroup = (props) => {\n  const { to, label, icon, value } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles$d({ sidebarConfig });\n  const location = useLocation();\n  const { selectedMenuItemIndex, setSelectedMenuItemIndex } = useContext(MobileSidebarContext);\n  const onChange = (_, value2) => {\n    if (value2 === selectedMenuItemIndex) {\n      setSelectedMenuItemIndex(-1);\n    } else {\n      setSelectedMenuItemIndex(value2);\n    }\n  };\n  const selected = value === selectedMenuItemIndex && selectedMenuItemIndex >= 0 || !(value === selectedMenuItemIndex) && !(selectedMenuItemIndex >= 0) && to === location.pathname;\n  return (\n    // Material UI issue: https://github.com/mui-org/material-ui/issues/27820\n    /* @__PURE__ */ React.createElement(\n      BottomNavigationAction,\n      {\n        \"aria-label\": label,\n        label,\n        icon,\n        component: Link,\n        to: to ? to : location.pathname,\n        onChange,\n        value,\n        selected,\n        classes\n      }\n    )\n  );\n};\nconst SidebarGroup = (props) => {\n  const { children, to, label, icon, value } = props;\n  const { isMobile } = useSidebarPinState();\n  return isMobile ? /* @__PURE__ */ React.createElement(MobileSidebarGroup, { to, label, icon, value }) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n};\n\nconst useStyles$c = makeStyles(\n  (theme) => ({\n    root: {\n      position: \"fixed\",\n      backgroundColor: theme.palette.navigation.background,\n      color: theme.palette.navigation.color,\n      bottom: 0,\n      left: 0,\n      right: 0,\n      zIndex: theme.zIndex.snackbar,\n      // SidebarDivider color\n      borderTop: \"1px solid #383838\",\n      \"@media print\": {\n        display: \"none\"\n      }\n    },\n    overlay: (props) => ({\n      background: theme.palette.navigation.background,\n      width: \"100%\",\n      bottom: `${props.sidebarConfig.mobileSidebarHeight}px`,\n      height: `calc(100% - ${props.sidebarConfig.mobileSidebarHeight}px)`,\n      flex: \"0 1 auto\",\n      overflow: \"auto\"\n    }),\n    overlayHeader: {\n      display: \"flex\",\n      color: theme.palette.navigation.color,\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      padding: theme.spacing(2, 3)\n    },\n    overlayHeaderClose: {\n      color: theme.palette.navigation.color\n    },\n    marginMobileSidebar: (props) => ({\n      marginBottom: `${props.sidebarConfig.mobileSidebarHeight}px`\n    })\n  })\n);\nconst sortSidebarGroupsForPriority = (children) => orderBy(\n  children,\n  ({ props: { priority } }) => Number.isInteger(priority) ? priority : -1,\n  \"desc\"\n);\nconst sidebarGroupType = React.createElement(SidebarGroup).type;\nconst OverlayMenu = ({\n  children,\n  label = \"Menu\",\n  open,\n  onClose\n}) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles$c({ sidebarConfig });\n  return /* @__PURE__ */ React.createElement(\n    Drawer,\n    {\n      anchor: \"bottom\",\n      open,\n      onClose,\n      ModalProps: {\n        BackdropProps: { classes: { root: classes.marginMobileSidebar } }\n      },\n      classes: {\n        root: classes.marginMobileSidebar,\n        paperAnchorBottom: classes.overlay\n      }\n    },\n    /* @__PURE__ */ React.createElement(Box, { className: classes.overlayHeader }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h3\" }, label), /* @__PURE__ */ React.createElement(\n      IconButton,\n      {\n        onClick: onClose,\n        classes: { root: classes.overlayHeaderClose }\n      },\n      /* @__PURE__ */ React.createElement(CloseIcon, null)\n    )),\n    /* @__PURE__ */ React.createElement(Box, { component: \"nav\" }, children)\n  );\n};\nconst MobileSidebar = (props) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const { children } = props;\n  const classes = useStyles$c({ sidebarConfig });\n  const location = useLocation();\n  const [selectedMenuItemIndex, setSelectedMenuItemIndex] = useState(-1);\n  useEffect(() => {\n    setSelectedMenuItemIndex(-1);\n  }, [location.pathname]);\n  let sidebarGroups = useElementFilter(\n    children,\n    (elements) => elements.getElements().filter((child) => child.type === sidebarGroupType)\n  );\n  if (!children) {\n    return null;\n  } else if (!sidebarGroups.length) {\n    sidebarGroups.push(\n      /* @__PURE__ */ React.createElement(SidebarGroup, { key: \"default_menu\", icon: /* @__PURE__ */ React.createElement(MenuIcon, null) }, children)\n    );\n  } else {\n    sidebarGroups = sortSidebarGroupsForPriority(sidebarGroups);\n  }\n  const shouldShowGroupChildren = selectedMenuItemIndex >= 0 && !sidebarGroups[selectedMenuItemIndex].props.to;\n  return /* @__PURE__ */ React.createElement(SidebarOpenStateProvider, { value: { isOpen: true, setOpen: () => {\n  } } }, /* @__PURE__ */ React.createElement(\n    MobileSidebarContext.Provider,\n    {\n      value: { selectedMenuItemIndex, setSelectedMenuItemIndex }\n    },\n    /* @__PURE__ */ React.createElement(\n      OverlayMenu,\n      {\n        label: sidebarGroups[selectedMenuItemIndex] && sidebarGroups[selectedMenuItemIndex].props.label,\n        open: shouldShowGroupChildren,\n        onClose: () => setSelectedMenuItemIndex(-1)\n      },\n      sidebarGroups[selectedMenuItemIndex] && sidebarGroups[selectedMenuItemIndex].props.children\n    ),\n    /* @__PURE__ */ React.createElement(\n      BottomNavigation,\n      {\n        className: classes.root,\n        \"data-testid\": \"mobile-sidebar-root\",\n        component: \"nav\"\n      },\n      sidebarGroups\n    )\n  ));\n};\n\nconst LocalStorage = {\n  getSidebarPinState() {\n    let value;\n    try {\n      value = JSON.parse(\n        window.localStorage.getItem(\"sidebarPinState\" /* SIDEBAR_PIN_STATE */) || \"true\"\n      );\n    } catch {\n      return true;\n    }\n    return !!value;\n  },\n  setSidebarPinState(state) {\n    return window.localStorage.setItem(\n      \"sidebarPinState\" /* SIDEBAR_PIN_STATE */,\n      JSON.stringify(state)\n    );\n  }\n};\n\nconst useStyles$b = makeStyles(\n  (theme) => ({\n    root: {\n      width: \"100%\",\n      transition: \"padding-left 0.1s ease-out\",\n      isolation: \"isolate\",\n      [theme.breakpoints.up(\"sm\")]: {\n        paddingLeft: (props) => props.isPinned ? props.sidebarConfig.drawerWidthOpen : props.sidebarConfig.drawerWidthClosed\n      },\n      [theme.breakpoints.down(\"xs\")]: {\n        paddingBottom: (props) => props.sidebarConfig.mobileSidebarHeight\n      },\n      \"@media print\": {\n        padding: \"0px !important\"\n      }\n    },\n    content: {\n      zIndex: 0,\n      isolation: \"isolate\",\n      \"&:focus\": {\n        outline: 0\n      }\n    }\n  }),\n  { name: \"BackstageSidebarPage\" }\n);\nconst PageContext = createContext({\n  content: {\n    contentRef: void 0\n  }\n});\nfunction SidebarPage(props) {\n  const [isPinned, setIsPinned] = useState(\n    () => LocalStorage.getSidebarPinState()\n  );\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const contentRef = useRef(null);\n  const pageContext = useMemo(\n    () => ({\n      content: {\n        contentRef\n      }\n    }),\n    [contentRef]\n  );\n  useEffect(() => {\n    LocalStorage.setSidebarPinState(isPinned);\n  }, [isPinned]);\n  const isMobile = useMediaQuery((theme) => theme.breakpoints.down(\"xs\"), {\n    noSsr: true\n  });\n  const toggleSidebarPinState = () => setIsPinned(!isPinned);\n  const classes = useStyles$b({ isPinned, sidebarConfig });\n  return /* @__PURE__ */ React.createElement(\n    SidebarPinStateProvider,\n    {\n      value: {\n        isPinned,\n        toggleSidebarPinState,\n        isMobile\n      }\n    },\n    /* @__PURE__ */ React.createElement(PageContext.Provider, { value: pageContext }, /* @__PURE__ */ React.createElement(Box, { className: classes.root }, props.children))\n  );\n}\nfunction useContent() {\n  const { content } = useContext(PageContext);\n  const focusContent = useCallback(() => {\n    var _a, _b;\n    (_b = (_a = content == null ? void 0 : content.contentRef) == null ? void 0 : _a.current) == null ? void 0 : _b.focus();\n  }, [content]);\n  return { focusContent, contentRef: content == null ? void 0 : content.contentRef };\n}\n\nconst useStyles$a = makeStyles(\n  (theme) => ({\n    drawer: {\n      display: \"flex\",\n      flexFlow: \"column nowrap\",\n      alignItems: \"flex-start\",\n      position: \"fixed\",\n      left: 0,\n      top: 0,\n      bottom: 0,\n      zIndex: theme.zIndex.appBar,\n      background: theme.palette.navigation.background,\n      overflowX: \"hidden\",\n      msOverflowStyle: \"none\",\n      scrollbarWidth: \"none\",\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.shortest\n      }),\n      \"& > *\": {\n        flexShrink: 0\n      },\n      \"&::-webkit-scrollbar\": {\n        display: \"none\"\n      },\n      \"@media print\": {\n        display: \"none\"\n      }\n    },\n    drawerWidth: (props) => ({\n      width: props.sidebarConfig.drawerWidthClosed\n    }),\n    drawerOpen: (props) => ({\n      width: props.sidebarConfig.drawerWidthOpen,\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.shorter\n      })\n    }),\n    visuallyHidden: {\n      top: 0,\n      position: \"absolute\",\n      zIndex: 1e3,\n      transform: \"translateY(-200%)\",\n      \"&:focus\": {\n        transform: \"translateY(5px)\"\n      }\n    }\n  }),\n  { name: \"BackstageSidebar\" }\n);\nconst DesktopSidebar = (props) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const {\n    openDelayMs = sidebarConfig.defaultOpenDelayMs,\n    closeDelayMs = sidebarConfig.defaultCloseDelayMs,\n    disableExpandOnHover,\n    children\n  } = props;\n  const classes = useStyles$a({ sidebarConfig });\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"md\"),\n    { noSsr: true }\n  );\n  const [state, setState] = useState(0 /* Closed */);\n  const hoverTimerRef = useRef();\n  const { isPinned, toggleSidebarPinState } = useSidebarPinState();\n  const handleOpen = () => {\n    if (isPinned || disableExpandOnHover) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = void 0;\n    }\n    if (state !== 2 /* Open */ && !isSmallScreen) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = void 0;\n        setState(2 /* Open */);\n      }, openDelayMs);\n      setState(1 /* Idle */);\n    }\n  };\n  const handleClose = () => {\n    if (isPinned || disableExpandOnHover) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = void 0;\n    }\n    if (state === 1 /* Idle */) {\n      setState(0 /* Closed */);\n    } else if (state === 2 /* Open */) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = void 0;\n        setState(0 /* Closed */);\n      }, closeDelayMs);\n    }\n  };\n  const isOpen = state === 2 /* Open */ && !isSmallScreen || isPinned;\n  const setOpen = (open) => {\n    if (open) {\n      setState(2 /* Open */);\n      toggleSidebarPinState();\n    } else {\n      setState(0 /* Closed */);\n      toggleSidebarPinState();\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\"nav\", { style: {}, \"aria-label\": \"sidebar nav\" }, /* @__PURE__ */ React.createElement(A11ySkipSidebar, null), /* @__PURE__ */ React.createElement(SidebarOpenStateProvider, { value: { isOpen, setOpen } }, /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      className: classes.root,\n      \"data-testid\": \"sidebar-root\",\n      onMouseEnter: disableExpandOnHover ? () => {\n      } : handleOpen,\n      onFocus: disableExpandOnHover ? () => {\n      } : handleOpen,\n      onMouseLeave: disableExpandOnHover ? () => {\n      } : handleClose,\n      onBlur: disableExpandOnHover ? () => {\n      } : handleClose\n    },\n    /* @__PURE__ */ React.createElement(\n      Box,\n      {\n        className: classNames(classes.drawer, classes.drawerWidth, {\n          [classes.drawerOpen]: isOpen\n        })\n      },\n      children\n    )\n  )));\n};\nconst Sidebar = (props) => {\n  var _a, _b;\n  const sidebarConfig = makeSidebarConfig(\n    (_a = props.sidebarOptions) != null ? _a : {}\n  );\n  const submenuConfig = makeSidebarSubmenuConfig(\n    (_b = props.submenuOptions) != null ? _b : {}\n  );\n  const { children, disableExpandOnHover, openDelayMs, closeDelayMs } = props;\n  const { isMobile } = useSidebarPinState();\n  return isMobile ? /* @__PURE__ */ React.createElement(MobileSidebar, null, children) : /* @__PURE__ */ React.createElement(SidebarConfigContext.Provider, { value: { sidebarConfig, submenuConfig } }, /* @__PURE__ */ React.createElement(\n    DesktopSidebar,\n    {\n      openDelayMs,\n      closeDelayMs,\n      disableExpandOnHover\n    },\n    children\n  ));\n};\nfunction A11ySkipSidebar() {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const { focusContent, contentRef } = useContent();\n  const classes = useStyles$a({ sidebarConfig });\n  if (!(contentRef == null ? void 0 : contentRef.current)) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      onClick: focusContent,\n      variant: \"contained\",\n      className: classNames(classes.visuallyHidden)\n    },\n    \"Skip to content\"\n  );\n}\n\nfunction isLocationMatch(currentLocation, toLocation, exact = false) {\n  const toDecodedSearch = new URLSearchParams(toLocation.search).toString();\n  const toQueryParameters = qs.parse(toDecodedSearch);\n  const currentDecodedSearch = new URLSearchParams(\n    currentLocation.search\n  ).toString();\n  const currentQueryParameters = qs.parse(currentDecodedSearch);\n  const queryStringMatcher = exact ? isEqual : isMatch;\n  const matching = isEqual(toLocation.pathname, currentLocation.pathname) && queryStringMatcher(currentQueryParameters, toQueryParameters);\n  return matching;\n}\n\nconst useStyles$9 = makeStyles(\n  (theme) => {\n    var _a, _b;\n    return {\n      item: {\n        height: 48,\n        width: \"100%\",\n        \"&:hover\": {\n          background: ((_a = theme.palette.navigation.navItem) == null ? void 0 : _a.hoverBackground) || \"#6f6f6f\",\n          color: theme.palette.navigation.selectedColor\n        },\n        display: \"flex\",\n        alignItems: \"center\",\n        color: theme.palette.navigation.color,\n        padding: theme.spacing(2.5),\n        cursor: \"pointer\",\n        position: \"relative\",\n        background: \"none\",\n        border: \"none\"\n      },\n      itemContainer: {\n        width: \"100%\"\n      },\n      selected: {\n        background: \"#6f6f6f\",\n        color: theme.palette.common.white\n      },\n      label: {\n        margin: theme.spacing(1.75),\n        marginLeft: theme.spacing(1),\n        fontSize: theme.typography.body2.fontSize,\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        \"text-overflow\": \"ellipsis\",\n        lineHeight: 1\n      },\n      subtitle: {\n        fontSize: 10,\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        \"text-overflow\": \"ellipsis\"\n      },\n      dropdownArrow: {\n        position: \"absolute\",\n        right: 21\n      },\n      dropdown: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"end\"\n      },\n      dropdownItem: {\n        width: \"100%\",\n        padding: \"10px 0 10px 0\",\n        \"&:hover\": {\n          background: ((_b = theme.palette.navigation.navItem) == null ? void 0 : _b.hoverBackground) || \"#6f6f6f\",\n          color: theme.palette.navigation.selectedColor\n        }\n      },\n      textContent: {\n        color: theme.palette.navigation.color,\n        paddingLeft: theme.spacing(4),\n        paddingRight: theme.spacing(1),\n        fontSize: theme.typography.body2.fontSize,\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        \"text-overflow\": \"ellipsis\"\n      }\n    };\n  },\n  { name: \"BackstageSidebarSubmenuItem\" }\n);\nconst SidebarSubmenuItem = (props) => {\n  const { title, subtitle, to, icon: Icon, dropdownItems, exact } = props;\n  const classes = useStyles$9();\n  const { setIsHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const closeSubmenu = () => {\n    setIsHoveredOn(false);\n  };\n  const toLocation = useResolvedPath$1(to != null ? to : \"\");\n  const currentLocation = useLocation();\n  let isActive = isLocationMatch(currentLocation, toLocation, exact);\n  const [showDropDown, setShowDropDown] = useState(false);\n  const handleClickDropdown = () => {\n    setShowDropDown(!showDropDown);\n  };\n  if (dropdownItems !== void 0) {\n    dropdownItems.some((item) => {\n      const resolvedPath = resolvePath(item.to);\n      isActive = isLocationMatch(currentLocation, resolvedPath, exact);\n      return isActive;\n    });\n    return /* @__PURE__ */ React.createElement(Box, { className: classes.itemContainer }, /* @__PURE__ */ React.createElement(Tooltip, { title, enterDelay: 500, enterNextDelay: 500 }, /* @__PURE__ */ React.createElement(\n      Button$1,\n      {\n        role: \"button\",\n        onClick: handleClickDropdown,\n        onTouchStart: (e) => e.stopPropagation(),\n        className: classNames(\n          classes.item,\n          isActive ? classes.selected : void 0\n        )\n      },\n      Icon && /* @__PURE__ */ React.createElement(Icon, { fontSize: \"small\" }),\n      /* @__PURE__ */ React.createElement(\n        Typography,\n        {\n          variant: \"subtitle1\",\n          component: \"span\",\n          className: classes.label\n        },\n        title,\n        /* @__PURE__ */ React.createElement(\"br\", null),\n        subtitle && /* @__PURE__ */ React.createElement(\n          Typography,\n          {\n            variant: \"caption\",\n            component: \"span\",\n            className: classes.subtitle\n          },\n          subtitle\n        )\n      ),\n      showDropDown ? /* @__PURE__ */ React.createElement(ArrowDropUpIcon, { className: classes.dropdownArrow }) : /* @__PURE__ */ React.createElement(ArrowDropDownIcon, { className: classes.dropdownArrow })\n    )), dropdownItems && showDropDown && /* @__PURE__ */ React.createElement(Box, { className: classes.dropdown }, dropdownItems.map((object, key) => /* @__PURE__ */ React.createElement(\n      Tooltip,\n      {\n        key,\n        title: object.title,\n        enterDelay: 500,\n        enterNextDelay: 500\n      },\n      /* @__PURE__ */ React.createElement(\n        Link,\n        {\n          to: object.to,\n          underline: \"none\",\n          className: classes.dropdownItem,\n          onClick: closeSubmenu,\n          onTouchStart: (e) => e.stopPropagation()\n        },\n        /* @__PURE__ */ React.createElement(Typography, { component: \"span\", className: classes.textContent }, object.title)\n      )\n    ))));\n  }\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.itemContainer }, /* @__PURE__ */ React.createElement(Tooltip, { title, enterDelay: 500, enterNextDelay: 500 }, /* @__PURE__ */ React.createElement(\n    Link,\n    {\n      to,\n      underline: \"none\",\n      className: classNames(\n        classes.item,\n        isActive ? classes.selected : void 0\n      ),\n      onClick: closeSubmenu,\n      onTouchStart: (e) => e.stopPropagation()\n    },\n    Icon && /* @__PURE__ */ React.createElement(Icon, { fontSize: \"small\" }),\n    /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        variant: \"subtitle1\",\n        component: \"span\",\n        className: classes.label\n      },\n      title,\n      /* @__PURE__ */ React.createElement(\"br\", null),\n      subtitle && /* @__PURE__ */ React.createElement(\n        Typography,\n        {\n          variant: \"caption\",\n          component: \"span\",\n          className: classes.subtitle\n        },\n        subtitle\n      )\n    )\n  )));\n};\n\nconst useStyles$8 = makeStyles(\n  (theme) => ({\n    root: {\n      zIndex: 1e3,\n      position: \"relative\",\n      overflow: \"visible\",\n      width: theme.spacing(7) + 1\n    },\n    drawer: (props) => {\n      var _a, _b;\n      return {\n        display: \"flex\",\n        flexFlow: \"column nowrap\",\n        alignItems: \"flex-start\",\n        position: \"fixed\",\n        [theme.breakpoints.up(\"sm\")]: {\n          marginLeft: props.left,\n          transition: theme.transitions.create(\"margin-left\", {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.shortest\n          })\n        },\n        top: 0,\n        bottom: 0,\n        padding: 0,\n        background: (_b = (_a = theme.palette.navigation.submenu) == null ? void 0 : _a.background) != null ? _b : \"#404040\",\n        overflowX: \"hidden\",\n        msOverflowStyle: \"none\",\n        scrollbarWidth: \"none\",\n        cursor: \"default\",\n        width: props.submenuConfig.drawerWidthClosed,\n        transitionDelay: `${props.submenuConfig.defaultOpenDelayMs}ms`,\n        \"& > *\": {\n          flexShrink: 0\n        },\n        \"&::-webkit-scrollbar\": {\n          display: \"none\"\n        }\n      };\n    },\n    drawerOpen: (props) => ({\n      width: props.submenuConfig.drawerWidthOpen,\n      [theme.breakpoints.down(\"xs\")]: {\n        width: \"100%\",\n        position: \"relative\",\n        paddingLeft: theme.spacing(3),\n        left: 0,\n        top: 0\n      }\n    }),\n    title: {\n      fontSize: theme.typography.h5.fontSize,\n      fontWeight: theme.typography.fontWeightMedium,\n      color: theme.palette.common.white,\n      padding: theme.spacing(2.5),\n      [theme.breakpoints.down(\"xs\")]: {\n        display: \"none\"\n      }\n    }\n  }),\n  { name: \"BackstageSidebarSubmenu\" }\n);\nconst SidebarSubmenu = (props) => {\n  const { isOpen } = useSidebarOpenState();\n  const { sidebarConfig, submenuConfig } = useContext(SidebarConfigContext);\n  const left = isOpen ? sidebarConfig.drawerWidthOpen : sidebarConfig.drawerWidthClosed;\n  const classes = useStyles$8({ left, submenuConfig });\n  const { isHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const [isSubmenuOpen, setIsSubmenuOpen] = useState(false);\n  useEffect(() => {\n    setIsSubmenuOpen(isHoveredOn);\n  }, [isHoveredOn]);\n  return /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      className: classNames(classes.drawer, {\n        [classes.drawerOpen]: isSubmenuOpen\n      })\n    },\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\", component: \"span\", className: classes.title }, props.title),\n    props.children\n  );\n};\n\nconst useStyles$7 = makeStyles({\n  iconContainer: {\n    display: \"flex\",\n    position: \"relative\",\n    width: \"100%\"\n  },\n  arrow1: {\n    right: \"6px\",\n    position: \"absolute\"\n  }\n});\nconst DoubleArrowLeft = () => {\n  const classes = useStyles$7();\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.iconContainer }, /* @__PURE__ */ React.createElement(Box, { className: classes.arrow1 }, /* @__PURE__ */ React.createElement(ArrowBackIosIcon, { style: { fontSize: \"12px\" } })), /* @__PURE__ */ React.createElement(Box, null, /* @__PURE__ */ React.createElement(ArrowBackIosIcon, { style: { fontSize: \"12px\" } })));\n};\n\nconst useStyles$6 = makeStyles({\n  iconContainer: {\n    display: \"flex\",\n    position: \"relative\",\n    width: \"100%\"\n  },\n  arrow1: {\n    right: \"6px\",\n    position: \"absolute\"\n  }\n});\nconst DoubleArrowRight = () => {\n  const classes = useStyles$6();\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.iconContainer }, /* @__PURE__ */ React.createElement(Box, { className: classes.arrow1 }, /* @__PURE__ */ React.createElement(ArrowForwardIosIcon, { style: { fontSize: \"12px\" } })), /* @__PURE__ */ React.createElement(Box, null, /* @__PURE__ */ React.createElement(ArrowForwardIosIcon, { style: { fontSize: \"12px\" } })));\n};\n\nconst makeSidebarStyles = (sidebarConfig) => makeStyles(\n  (theme) => {\n    var _a, _b, _c, _d;\n    return {\n      root: {\n        color: theme.palette.navigation.color,\n        display: \"flex\",\n        flexFlow: \"row nowrap\",\n        alignItems: \"center\",\n        height: 48,\n        cursor: \"pointer\"\n      },\n      buttonItem: {\n        background: \"none\",\n        border: \"none\",\n        width: \"100%\",\n        margin: 0,\n        padding: 0,\n        textAlign: \"inherit\",\n        font: \"inherit\",\n        textTransform: \"none\"\n      },\n      closed: {\n        width: sidebarConfig.drawerWidthClosed,\n        justifyContent: \"center\"\n      },\n      open: {\n        [theme.breakpoints.up(\"sm\")]: {\n          width: sidebarConfig.drawerWidthOpen\n        }\n      },\n      highlightable: {\n        \"&:hover\": {\n          background: (_b = (_a = theme.palette.navigation.navItem) == null ? void 0 : _a.hoverBackground) != null ? _b : \"#404040\"\n        }\n      },\n      highlighted: {\n        background: (_d = (_c = theme.palette.navigation.navItem) == null ? void 0 : _c.hoverBackground) != null ? _d : \"#404040\"\n      },\n      label: {\n        // XXX (@koroeskohr): I can't seem to achieve the desired font-weight from the designs\n        fontWeight: \"bold\",\n        whiteSpace: \"nowrap\",\n        lineHeight: \"auto\",\n        flex: \"3 1 auto\",\n        width: \"110px\",\n        overflow: \"hidden\",\n        \"text-overflow\": \"ellipsis\"\n      },\n      iconContainer: {\n        boxSizing: \"border-box\",\n        height: \"100%\",\n        width: sidebarConfig.iconContainerWidth,\n        marginRight: -theme.spacing(2),\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        lineHeight: \"0\"\n      },\n      searchRoot: {\n        marginBottom: 12\n      },\n      searchField: {\n        color: \"#b5b5b5\",\n        fontWeight: theme.typography.fontWeightBold,\n        fontSize: theme.typography.fontSize\n      },\n      searchFieldHTMLInput: {\n        padding: theme.spacing(2, 0, 2)\n      },\n      searchContainer: {\n        width: sidebarConfig.drawerWidthOpen - sidebarConfig.iconContainerWidth\n      },\n      secondaryAction: {\n        width: theme.spacing(6),\n        textAlign: \"center\",\n        marginRight: theme.spacing(1)\n      },\n      closedItemIcon: {\n        width: \"100%\",\n        justifyContent: \"center\"\n      },\n      submenuArrow: {\n        display: \"flex\"\n      },\n      expandButton: {\n        background: \"none\",\n        border: \"none\",\n        color: theme.palette.navigation.color,\n        width: \"100%\",\n        cursor: \"pointer\",\n        position: \"relative\",\n        height: 48\n      },\n      arrows: {\n        position: \"absolute\",\n        right: 10\n      },\n      selected: {\n        \"&$root\": {\n          borderLeft: `solid ${sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n          color: theme.palette.navigation.selectedColor\n        },\n        \"&$closed\": {\n          width: sidebarConfig.drawerWidthClosed\n        },\n        \"& $closedItemIcon\": {\n          paddingRight: sidebarConfig.selectedIndicatorWidth\n        },\n        \"& $iconContainer\": {\n          marginLeft: -sidebarConfig.selectedIndicatorWidth\n        }\n      }\n    };\n  },\n  { name: \"BackstageSidebarItem\" }\n);\nfunction useMemoStyles(sidebarConfig) {\n  const useStyles = useMemo(\n    () => makeSidebarStyles(sidebarConfig),\n    [sidebarConfig]\n  );\n  return useStyles();\n}\nconst useLocationMatch = (submenu, location) => useElementFilter(\n  submenu.props.children,\n  (elements) => {\n    let active = false;\n    elements.getElements().forEach(\n      ({\n        props: { to, dropdownItems }\n      }) => {\n        if (!active) {\n          if (dropdownItems == null ? void 0 : dropdownItems.length) {\n            dropdownItems.forEach(\n              ({ to: _to }) => active = active || isLocationMatch(location, resolvePath(_to))\n            );\n            return;\n          }\n          if (to) {\n            active = isLocationMatch(location, resolvePath(to));\n          }\n        }\n      }\n    );\n    return active;\n  },\n  [location.pathname]\n);\nfunction isButtonItem(props) {\n  return props.to === void 0;\n}\nconst sidebarSubmenuType = React.createElement(SidebarSubmenu).type;\nconst WorkaroundNavLink = React.forwardRef(function WorkaroundNavLinkWithRef({\n  to,\n  end,\n  style,\n  className,\n  activeStyle,\n  caseSensitive,\n  activeClassName = \"active\",\n  \"aria-current\": ariaCurrentProp = \"page\",\n  ...rest\n}, ref) {\n  let { pathname: locationPathname } = useLocation();\n  let { pathname: toPathname } = useResolvedPath$1(to);\n  if (!caseSensitive) {\n    locationPathname = locationPathname.toLocaleLowerCase(\"en-US\");\n    toPathname = toPathname.toLocaleLowerCase(\"en-US\");\n  }\n  let isActive = locationPathname === toPathname;\n  if (!isActive && !end) {\n    isActive = locationPathname.startsWith(`${toPathname}/`);\n  }\n  const ariaCurrent = isActive ? ariaCurrentProp : void 0;\n  return /* @__PURE__ */ React.createElement(\n    Link$1,\n    {\n      ...rest,\n      to,\n      ref,\n      \"aria-current\": ariaCurrent,\n      style: { ...style, ...isActive ? activeStyle : void 0 },\n      className: classNames([\n        typeof className !== \"function\" ? className : void 0,\n        isActive ? activeClassName : void 0\n      ])\n    }\n  );\n});\nconst SidebarItemBase = forwardRef((props, ref) => {\n  const {\n    icon: Icon,\n    text,\n    hasNotifications = false,\n    hasSubmenu = false,\n    disableHighlight = false,\n    onClick,\n    noTrack,\n    children,\n    className,\n    ...navLinkProps\n  } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const { isOpen } = useSidebarOpenState();\n  const divStyle = !isOpen && hasSubmenu ? { display: \"flex\", marginLeft: \"20px\" } : { lineHeight: \"0\" };\n  const displayItemIcon = /* @__PURE__ */ React.createElement(Box, { style: divStyle }, /* @__PURE__ */ React.createElement(Icon, { fontSize: \"small\" }), !isOpen && hasSubmenu ? /* @__PURE__ */ React.createElement(ArrowRightIcon, { fontSize: \"small\" }) : /* @__PURE__ */ React.createElement(React.Fragment, null));\n  const itemIcon = /* @__PURE__ */ React.createElement(\n    Badge,\n    {\n      color: \"secondary\",\n      variant: \"dot\",\n      overlap: \"circular\",\n      invisible: !hasNotifications,\n      className: classNames({ [classes.closedItemIcon]: !isOpen })\n    },\n    displayItemIcon\n  );\n  const openContent = /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { \"data-testid\": \"login-button\", className: classes.iconContainer }, itemIcon), text && /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      variant: \"subtitle2\",\n      component: \"span\",\n      className: classes.label\n    },\n    text\n  ), /* @__PURE__ */ React.createElement(\"div\", { className: classes.secondaryAction }, children));\n  const content = isOpen ? openContent : itemIcon;\n  const childProps = {\n    onClick,\n    className: classNames(\n      className,\n      classes.root,\n      isOpen ? classes.open : classes.closed,\n      isButtonItem(props) && classes.buttonItem,\n      { [classes.highlightable]: !disableHighlight }\n    )\n  };\n  const analyticsApi = useAnalytics();\n  const { pathname: to } = useResolvedPath$1(\n    !isButtonItem(props) && props.to ? props.to : \"\"\n  );\n  const handleClick = useCallback(\n    (event) => {\n      if (!noTrack) {\n        const action = \"click\";\n        const subject = text != null ? text : \"Sidebar Item\";\n        const options = to ? { attributes: { to } } : void 0;\n        analyticsApi.captureEvent(action, subject, options);\n      }\n      onClick == null ? void 0 : onClick(event);\n    },\n    [analyticsApi, text, to, noTrack, onClick]\n  );\n  if (isButtonItem(props)) {\n    return /* @__PURE__ */ React.createElement(\n      Button$1,\n      {\n        role: \"button\",\n        \"aria-label\": text,\n        ...childProps,\n        ref,\n        onClick: handleClick\n      },\n      content\n    );\n  }\n  return /* @__PURE__ */ React.createElement(\n    WorkaroundNavLink,\n    {\n      ...childProps,\n      activeClassName: classes.selected,\n      to: props.to ? props.to : \"\",\n      ref,\n      \"aria-label\": text ? text : props.to,\n      ...navLinkProps,\n      onClick: handleClick\n    },\n    content\n  );\n});\nconst SidebarItemWithSubmenu = ({\n  children,\n  ...props\n}) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const [isHoveredOn, setIsHoveredOn] = useState(false);\n  const location = useLocation();\n  const isActive = useLocationMatch(children, location);\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"sm\")\n  );\n  const handleMouseEnter = () => {\n    setIsHoveredOn(true);\n  };\n  const handleMouseLeave = () => {\n    setIsHoveredOn(false);\n  };\n  const arrowIcon = () => {\n    if (isSmallScreen) {\n      return isHoveredOn ? /* @__PURE__ */ React.createElement(ArrowDropUpIcon, { fontSize: \"small\", className: classes.submenuArrow }) : /* @__PURE__ */ React.createElement(ArrowDropDownIcon, { fontSize: \"small\", className: classes.submenuArrow });\n    }\n    return !isHoveredOn && /* @__PURE__ */ React.createElement(ArrowRightIcon, { fontSize: \"small\", className: classes.submenuArrow });\n  };\n  return /* @__PURE__ */ React.createElement(\n    SidebarItemWithSubmenuContext.Provider,\n    {\n      value: {\n        isHoveredOn,\n        setIsHoveredOn\n      }\n    },\n    /* @__PURE__ */ React.createElement(\n      \"div\",\n      {\n        \"data-testid\": \"item-with-submenu\",\n        onMouseLeave: handleMouseLeave,\n        onTouchStart: isHoveredOn ? handleMouseLeave : handleMouseEnter,\n        onMouseEnter: handleMouseEnter,\n        className: classNames(isHoveredOn && classes.highlighted)\n      },\n      /* @__PURE__ */ React.createElement(\n        SidebarItemBase,\n        {\n          hasSubmenu: true,\n          className: isActive ? classes.selected : \"\",\n          ...props\n        },\n        arrowIcon()\n      ),\n      isHoveredOn && children\n    )\n  );\n};\nconst SidebarItem = forwardRef((props, ref) => {\n  const [submenu] = useElementFilter(\n    props.children,\n    (elements) => (\n      // Directly comparing child.type with SidebarSubmenu will not work with in\n      // combination with react-hot-loader\n      //\n      // https://github.com/gaearon/react-hot-loader/issues/304#issuecomment-456569720\n      elements.getElements().filter((child) => child.type === sidebarSubmenuType)\n    )\n  );\n  if (submenu) {\n    return /* @__PURE__ */ React.createElement(SidebarItemWithSubmenu, { ...props }, submenu);\n  }\n  return /* @__PURE__ */ React.createElement(SidebarItemBase, { ...props, ref });\n});\nfunction SidebarSearchField(props) {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const [input, setInput] = useState(\"\");\n  const classes = useMemoStyles(sidebarConfig);\n  const Icon = props.icon ? props.icon : SearchIcon;\n  const search = () => {\n    props.onSearch(input);\n    setInput(\"\");\n  };\n  const handleEnter = (ev) => {\n    if (ev.key === \"Enter\") {\n      ev.preventDefault();\n      search();\n    }\n  };\n  const handleInput = (ev) => {\n    setInput(ev.target.value);\n  };\n  const handleInputClick = (ev) => {\n    ev.preventDefault();\n    ev.stopPropagation();\n  };\n  const handleItemClick = (ev) => {\n    search();\n    ev.preventDefault();\n  };\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.searchRoot }, /* @__PURE__ */ React.createElement(\n    SidebarItem,\n    {\n      icon: Icon,\n      to: props.to,\n      onClick: handleItemClick,\n      disableHighlight: true\n    },\n    /* @__PURE__ */ React.createElement(\n      TextField,\n      {\n        placeholder: \"Search\",\n        value: input,\n        onClick: handleInputClick,\n        onChange: handleInput,\n        onKeyDown: handleEnter,\n        className: classes.searchContainer,\n        InputProps: {\n          disableUnderline: true,\n          className: classes.searchField\n        },\n        inputProps: {\n          className: classes.searchFieldHTMLInput\n        }\n      }\n    )\n  ));\n}\nconst SidebarSpace = styled(\"div\")(\n  {\n    flex: 1\n  },\n  { name: \"BackstageSidebarSpace\" }\n);\nconst SidebarSpacer = styled(\"div\")(\n  {\n    height: 8\n  },\n  { name: \"BackstageSidebarSpacer\" }\n);\nconst SidebarDivider = styled(\"hr\")(\n  ({ theme }) => ({\n    height: 1,\n    width: \"100%\",\n    background: \"#383838\",\n    border: \"none\",\n    margin: theme.spacing(1.2, 0)\n  }),\n  { name: \"BackstageSidebarDivider\" }\n);\nconst styledScrollbar = (theme) => ({\n  overflowY: \"auto\",\n  \"&::-webkit-scrollbar\": {\n    backgroundColor: theme.palette.background.default,\n    width: \"5px\",\n    borderRadius: \"5px\"\n  },\n  \"&::-webkit-scrollbar-thumb\": {\n    backgroundColor: theme.palette.text.secondary,\n    borderRadius: \"5px\"\n  }\n});\nconst SidebarScrollWrapper = styled(\"div\")(({ theme }) => {\n  const scrollbarStyles = styledScrollbar(theme);\n  return {\n    flex: \"0 1 auto\",\n    overflowX: \"hidden\",\n    // 5px space to the right of the scrollbar\n    width: \"calc(100% - 5px)\",\n    // Display at least one item in the container\n    // Question: Can this be a config/theme variable - if so, which? :/\n    minHeight: \"48px\",\n    overflowY: \"hidden\",\n    \"@media (hover: none)\": scrollbarStyles,\n    \"&:hover\": scrollbarStyles\n  };\n});\nconst SidebarExpandButton = () => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const { isOpen, setOpen } = useSidebarOpenState();\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"md\"),\n    { noSsr: true }\n  );\n  if (isSmallScreen) {\n    return null;\n  }\n  const handleClick = () => {\n    setOpen(!isOpen);\n  };\n  return /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      role: \"button\",\n      onClick: handleClick,\n      className: classes.expandButton,\n      \"aria-label\": \"Expand Sidebar\",\n      \"data-testid\": \"sidebar-expand-button\"\n    },\n    /* @__PURE__ */ React.createElement(Box, { className: classes.arrows }, isOpen ? /* @__PURE__ */ React.createElement(DoubleArrowLeft, null) : /* @__PURE__ */ React.createElement(DoubleArrowRight, null))\n  );\n};\n\nconst useStyles$5 = makeStyles(\n  (theme) => ({\n    header: {\n      gridArea: \"pageHeader\",\n      padding: theme.spacing(3),\n      width: \"100%\",\n      boxShadow: theme.shadows[4],\n      position: \"relative\",\n      zIndex: 100,\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      backgroundImage: theme.page.backgroundImage,\n      backgroundPosition: \"center\",\n      backgroundSize: \"cover\",\n      [theme.breakpoints.down(\"sm\")]: {\n        flexWrap: \"wrap\"\n      }\n    },\n    leftItemsBox: {\n      maxWidth: \"100%\",\n      flexGrow: 1\n    },\n    rightItemsBox: {\n      width: \"auto\",\n      alignItems: \"center\"\n    },\n    title: {\n      color: theme.page.fontColor,\n      wordBreak: \"break-word\",\n      fontSize: theme.typography.h3.fontSize,\n      marginBottom: 0\n    },\n    subtitle: {\n      color: theme.page.fontColor,\n      opacity: 0.8,\n      display: \"inline-block\",\n      // prevents margin collapse of adjacent siblings\n      marginTop: theme.spacing(1),\n      maxWidth: \"75ch\"\n    },\n    type: {\n      textTransform: \"uppercase\",\n      fontSize: 11,\n      opacity: 0.8,\n      marginBottom: theme.spacing(1),\n      color: theme.page.fontColor\n    },\n    breadcrumb: {\n      color: theme.page.fontColor\n    },\n    breadcrumbType: {\n      fontSize: \"inherit\",\n      opacity: 0.7,\n      marginRight: -theme.spacing(0.3),\n      marginBottom: theme.spacing(0.3)\n    },\n    breadcrumbTitle: {\n      fontSize: \"inherit\",\n      marginLeft: -theme.spacing(0.3),\n      marginBottom: theme.spacing(0.3)\n    }\n  }),\n  { name: \"BackstageHeader\" }\n);\nconst TypeFragment = ({\n  type,\n  typeLink,\n  classes,\n  pageTitle\n}) => {\n  if (!type) {\n    return null;\n  }\n  if (!typeLink) {\n    return /* @__PURE__ */ React.createElement(Typography, { className: classes.type }, type);\n  }\n  return /* @__PURE__ */ React.createElement(Breadcrumbs, { className: classes.breadcrumb }, /* @__PURE__ */ React.createElement(Link, { to: typeLink }, type), /* @__PURE__ */ React.createElement(Typography, null, pageTitle));\n};\nconst TitleFragment = ({ pageTitle, classes, tooltip }) => {\n  const { contentRef } = useContent();\n  const FinalTitle = /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      ref: contentRef,\n      tabIndex: -1,\n      className: classes.title,\n      variant: \"h1\"\n    },\n    pageTitle\n  );\n  if (!tooltip) {\n    return FinalTitle;\n  }\n  return /* @__PURE__ */ React.createElement(Tooltip, { title: tooltip, placement: \"top-start\" }, FinalTitle);\n};\nconst SubtitleFragment = ({ classes, subtitle }) => {\n  if (!subtitle) {\n    return null;\n  }\n  if (typeof subtitle !== \"string\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, subtitle);\n  }\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      className: classes.subtitle,\n      variant: \"subtitle2\",\n      component: \"span\"\n    },\n    subtitle\n  );\n};\nfunction Header(props) {\n  const {\n    children,\n    pageTitleOverride,\n    style,\n    subtitle,\n    title,\n    tooltip,\n    type,\n    typeLink\n  } = props;\n  const classes = useStyles$5();\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptionalString(\"app.title\") || \"Backstage\";\n  const documentTitle = pageTitleOverride || title;\n  const pageTitle = title || pageTitleOverride;\n  const titleTemplate = `${documentTitle} | %s | ${appTitle}`;\n  const defaultTitle = `${documentTitle} | ${appTitle}`;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Helmet, { titleTemplate, defaultTitle }), /* @__PURE__ */ React.createElement(\"header\", { style, className: classes.header }, /* @__PURE__ */ React.createElement(Box, { className: classes.leftItemsBox }, /* @__PURE__ */ React.createElement(\n    TypeFragment,\n    {\n      classes,\n      type,\n      typeLink,\n      pageTitle\n    }\n  ), /* @__PURE__ */ React.createElement(\n    TitleFragment,\n    {\n      classes,\n      pageTitle,\n      tooltip\n    }\n  ), /* @__PURE__ */ React.createElement(SubtitleFragment, { classes, subtitle })), /* @__PURE__ */ React.createElement(Grid, { container: true, className: classes.rightItemsBox, spacing: 4 }, children)));\n}\n\nconst ActionItem = ({\n  label,\n  secondaryLabel,\n  icon,\n  disabled = false,\n  onClick\n}) => {\n  return /* @__PURE__ */ React.createElement(Fragment, null, /* @__PURE__ */ React.createElement(\n    ListItem,\n    {\n      \"data-testid\": \"header-action-item\",\n      disabled,\n      button: true,\n      onClick: (event) => {\n        if (onClick) {\n          onClick(event);\n        }\n      }\n    },\n    icon && /* @__PURE__ */ React.createElement(ListItemIcon, null, icon),\n    /* @__PURE__ */ React.createElement(ListItemText, { primary: label, secondary: secondaryLabel })\n  ));\n};\nfunction HeaderActionMenu(props) {\n  const {\n    palette: {\n      common: { white }\n    }\n  } = useTheme();\n  const { actionItems } = props;\n  const [open, setOpen] = React.useState(false);\n  const anchorElRef = React.useRef(null);\n  return /* @__PURE__ */ React.createElement(Fragment, null, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      onClick: () => setOpen(true),\n      \"data-testid\": \"header-action-menu\",\n      ref: anchorElRef,\n      style: {\n        color: white,\n        height: 56,\n        width: 56,\n        marginRight: -4,\n        padding: 0\n      }\n    },\n    /* @__PURE__ */ React.createElement(MoreVert, null)\n  ), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      open,\n      anchorEl: anchorElRef.current,\n      anchorOrigin: { horizontal: \"right\", vertical: \"bottom\" },\n      transformOrigin: { horizontal: \"right\", vertical: \"top\" },\n      onClose: () => setOpen(false)\n    },\n    /* @__PURE__ */ React.createElement(List, null, actionItems.map((actionItem, i) => {\n      return /* @__PURE__ */ React.createElement(ActionItem, { key: `header-action-menu-${i}`, ...actionItem });\n    }))\n  ));\n}\n\nconst useStyles$4 = makeStyles(\n  (theme) => ({\n    root: {\n      textAlign: \"left\"\n    },\n    label: {\n      color: theme.page.fontColor,\n      fontWeight: theme.typography.fontWeightBold,\n      letterSpacing: 0,\n      fontSize: theme.typography.fontSize,\n      marginBottom: theme.spacing(1) / 2,\n      lineHeight: 1\n    },\n    value: {\n      color: alpha(theme.page.fontColor, 0.8),\n      fontSize: theme.typography.fontSize,\n      lineHeight: 1\n    }\n  }),\n  { name: \"BackstageHeaderLabel\" }\n);\nconst HeaderLabelContent = ({\n  value,\n  className,\n  typographyRootComponent\n}) => {\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: typographyRootComponent != null ? typographyRootComponent : typeof value === \"string\" ? \"p\" : \"span\",\n      className\n    },\n    value\n  );\n};\nfunction HeaderLabel(props) {\n  const { label, value, url, contentTypograpyRootComponent } = props;\n  const classes = useStyles$4();\n  const content = /* @__PURE__ */ React.createElement(\n    HeaderLabelContent,\n    {\n      className: classes.value,\n      value: value || \"<Unknown>\",\n      typographyRootComponent: contentTypograpyRootComponent\n    }\n  );\n  return /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(Typography, { component: \"span\", className: classes.root }, /* @__PURE__ */ React.createElement(Typography, { className: classes.label }, label), url ? /* @__PURE__ */ React.createElement(Link, { to: url }, content) : content));\n}\n\nconst styles$1 = (theme) => createStyles({\n  root: {\n    color: theme.palette.common.white,\n    padding: theme.spacing(2, 2, 3),\n    backgroundImage: theme.getPageTheme({ themeId: \"card\" }).backgroundImage,\n    backgroundPosition: 0,\n    backgroundSize: \"inherit\"\n  }\n});\nconst useStyles$3 = makeStyles(styles$1, { name: \"BackstageItemCardHeader\" });\nfunction ItemCardHeader(props) {\n  const { title, subtitle, children } = props;\n  const classes = useStyles$3(props);\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, subtitle && /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle2\", component: \"h3\" }, subtitle), title && /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\", component: \"h4\" }, title), children);\n}\n\nfunction ItemCard(props) {\n  const { description, tags, title, type, subtitle, label, onClick, href } = props;\n  return /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(CardMedia, null, /* @__PURE__ */ React.createElement(ItemCardHeader, { title, subtitle: subtitle || type })), /* @__PURE__ */ React.createElement(CardContent, null, (tags == null ? void 0 : tags.length) ? /* @__PURE__ */ React.createElement(Box, null, tags.map((tag, i) => /* @__PURE__ */ React.createElement(Chip, { size: \"small\", label: tag, key: i }))) : null, description), /* @__PURE__ */ React.createElement(CardActions, null, !href && /* @__PURE__ */ React.createElement(LinkButton, { to: \"#\", onClick, color: \"primary\" }, label), href && /* @__PURE__ */ React.createElement(LinkButton, { to: href, color: \"primary\" }, label)));\n}\n\nconst styles = (theme) => createStyles({\n  root: {\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(auto-fill, minmax(22em, 1fr))\",\n    gridAutoRows: \"1fr\",\n    gridGap: theme.spacing(2)\n  }\n});\nconst useStyles$2 = makeStyles(styles, { name: \"BackstageItemCardGrid\" });\nfunction ItemCardGrid(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles$2(otherProps);\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root, ...otherProps }, children);\n}\n\nconst useStyles$1 = makeStyles(\n  (theme) => ({\n    root: {\n      display: \"grid\",\n      gridTemplateAreas: \"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'\",\n      gridTemplateRows: \"max-content auto 1fr\",\n      gridTemplateColumns: \"auto 1fr auto\",\n      overflowY: \"auto\",\n      height: \"100vh\",\n      [theme.breakpoints.down(\"xs\")]: {\n        height: \"100%\"\n      },\n      \"@media print\": {\n        display: \"block\",\n        height: \"auto\",\n        overflowY: \"inherit\"\n      }\n    }\n  }),\n  { name: \"BackstagePage\" }\n);\nfunction Page(props) {\n  const { themeId, children } = props;\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(\n    ThemeProvider,\n    {\n      theme: (baseTheme) => ({\n        ...baseTheme,\n        page: baseTheme.getPageTheme({ themeId })\n      })\n    },\n    /* @__PURE__ */ React.createElement(\"main\", { className: classes.root }, children)\n  );\n}\n\nfunction PageWithHeader(props) {\n  const { themeId, children, ...restProps } = props;\n  return /* @__PURE__ */ React.createElement(Page, { themeId }, /* @__PURE__ */ React.createElement(Header, { ...restProps }), children);\n}\n\nconst proxiedSessionSchema = z.object({\n  providerInfo: z.object({}).catchall(z.unknown()).optional(),\n  profile: z.object({\n    email: z.string().optional(),\n    displayName: z.string().optional(),\n    picture: z.string().optional()\n  }),\n  backstageIdentity: z.object({\n    token: z.string(),\n    identity: z.object({\n      type: z.literal(\"user\"),\n      userEntityRef: z.string(),\n      ownershipEntityRefs: z.array(z.string())\n    })\n  })\n});\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst DEFAULTS = {\n  // The amount of time between token refreshes, if we fail to get an actual\n  // value out of the exp claim\n  defaultTokenExpiryMillis: 5 * 60 * 1e3,\n  // The amount of time before the actual expiry of the Backstage token, that we\n  // shall start trying to get a new one\n  tokenExpiryMarginMillis: 5 * 60 * 1e3\n};\nfunction tokenToExpiry(jwtToken) {\n  const fallback = new Date(Date.now() + DEFAULTS.defaultTokenExpiryMillis);\n  if (!jwtToken) {\n    return fallback;\n  }\n  const [_header, rawPayload, _signature] = jwtToken.split(\".\");\n  const payload = JSON.parse(window.atob(rawPayload));\n  if (typeof payload.exp !== \"number\") {\n    return fallback;\n  }\n  return new Date(payload.exp * 1e3 - DEFAULTS.tokenExpiryMarginMillis);\n}\nclass ProxiedSignInIdentity {\n  constructor(options) {\n    __publicField$1(this, \"options\");\n    __publicField$1(this, \"abortController\");\n    __publicField$1(this, \"state\");\n    this.options = options;\n    this.abortController = new AbortController();\n    this.state = { type: \"empty\" };\n  }\n  async start() {\n    await this.getSessionAsync();\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getUserId} */\n  getUserId() {\n    const { backstageIdentity } = this.getSessionSync();\n    const ref = backstageIdentity.identity.userEntityRef;\n    const match = /^([^:/]+:)?([^:/]+\\/)?([^:/]+)$/.exec(ref);\n    if (!match) {\n      throw new TypeError(`Invalid user entity reference \"${ref}\"`);\n    }\n    return match[3];\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getIdToken} */\n  async getIdToken() {\n    const session = await this.getSessionAsync();\n    return session.backstageIdentity.token;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfile} */\n  getProfile() {\n    const session = this.getSessionSync();\n    return session.profile;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfileInfo} */\n  async getProfileInfo() {\n    const session = await this.getSessionAsync();\n    return session.profile;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getBackstageIdentity} */\n  async getBackstageIdentity() {\n    const session = await this.getSessionAsync();\n    return session.backstageIdentity.identity;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getCredentials} */\n  async getCredentials() {\n    const session = await this.getSessionAsync();\n    return {\n      token: session.backstageIdentity.token\n    };\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.signOut} */\n  async signOut() {\n    this.abortController.abort();\n  }\n  getSessionSync() {\n    if (this.state.type === \"active\") {\n      return this.state.session;\n    } else if (this.state.type === \"fetching\" && this.state.previous) {\n      return this.state.previous;\n    }\n    throw new Error(\"No session available. Try reloading your browser page.\");\n  }\n  async getSessionAsync() {\n    if (this.state.type === \"fetching\") {\n      return this.state.promise;\n    } else if (this.state.type === \"active\" && /* @__PURE__ */ new Date() < this.state.expiresAt) {\n      return this.state.session;\n    }\n    const previous = this.state.type === \"active\" ? this.state.session : void 0;\n    const promise = this.fetchSession().then(\n      (session) => {\n        this.state = {\n          type: \"active\",\n          session,\n          expiresAt: tokenToExpiry(session.backstageIdentity.token)\n        };\n        return session;\n      },\n      (error) => {\n        this.state = {\n          type: \"failed\",\n          error\n        };\n        throw error;\n      }\n    );\n    this.state = {\n      type: \"fetching\",\n      promise,\n      previous\n    };\n    return promise;\n  }\n  async fetchSession() {\n    const baseUrl = await this.options.discoveryApi.getBaseUrl(\"auth\");\n    const headers = typeof this.options.headers === \"function\" ? await this.options.headers() : this.options.headers;\n    const mergedHeaders = new Headers(headers);\n    mergedHeaders.set(\"X-Requested-With\", \"XMLHttpRequest\");\n    const response = await fetch(\n      `${baseUrl}/${this.options.provider}/refresh`,\n      {\n        signal: this.abortController.signal,\n        headers: mergedHeaders,\n        credentials: \"include\"\n      }\n    );\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return proxiedSessionSchema.parse(await response.json());\n  }\n}\n\nconst ProxiedSignInPage = (props) => {\n  const discoveryApi = useApi(discoveryApiRef);\n  const [{ status, error }, { execute }] = useAsync(async () => {\n    const identity = new ProxiedSignInIdentity({\n      provider: props.provider,\n      discoveryApi,\n      headers: props.headers\n    });\n    await identity.start();\n    props.onSignInSuccess(identity);\n  });\n  useMountEffect(execute);\n  if (status === \"loading\") {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(\n      ErrorPanel,\n      {\n        title: \"You do not appear to be signed in. Please try reloading the browser page.\",\n        error\n      }\n    );\n  }\n  return null;\n};\n\nclass GuestUserIdentity {\n  getUserId() {\n    return \"guest\";\n  }\n  async getIdToken() {\n    return void 0;\n  }\n  getProfile() {\n    return {\n      email: \"guest@example.com\",\n      displayName: \"Guest\"\n    };\n  }\n  async getProfileInfo() {\n    return {\n      email: \"guest@example.com\",\n      displayName: \"Guest\"\n    };\n  }\n  async getBackstageIdentity() {\n    const userEntityRef = `user:default/guest`;\n    return {\n      type: \"user\",\n      userEntityRef,\n      ownershipEntityRefs: [userEntityRef]\n    };\n  }\n  async getCredentials() {\n    return {};\n  }\n  async signOut() {\n  }\n}\n\nfunction parseJwtPayload(token) {\n  const [_header, payload, _signature] = token.split(\".\");\n  return JSON.parse(window.atob(payload));\n}\nclass LegacyUserIdentity {\n  constructor(result) {\n    this.result = result;\n  }\n  getUserId() {\n    return this.result.userId;\n  }\n  static fromResult(result) {\n    return new LegacyUserIdentity(result);\n  }\n  async getIdToken() {\n    var _a, _b;\n    return (_b = (_a = this.result).getIdToken) == null ? void 0 : _b.call(_a);\n  }\n  getProfile() {\n    return this.result.profile;\n  }\n  async getProfileInfo() {\n    return this.result.profile;\n  }\n  async getBackstageIdentity() {\n    const token = await this.getIdToken();\n    if (!token) {\n      const userEntityRef = `user:default/${this.getUserId()}`;\n      return {\n        type: \"user\",\n        userEntityRef,\n        ownershipEntityRefs: [userEntityRef]\n      };\n    }\n    const { sub, ent } = parseJwtPayload(token);\n    return {\n      type: \"user\",\n      userEntityRef: sub,\n      ownershipEntityRefs: ent != null ? ent : []\n    };\n  }\n  async getCredentials() {\n    var _a, _b;\n    const token = await ((_b = (_a = this.result).getIdToken) == null ? void 0 : _b.call(_a));\n    return { token };\n  }\n  async signOut() {\n    var _a, _b;\n    return (_b = (_a = this.result).signOut) == null ? void 0 : _b.call(_a);\n  }\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass UserIdentity {\n  constructor(identity, authApi, profile) {\n    this.identity = identity;\n    this.authApi = authApi;\n    this.profile = profile;\n    __publicField(this, \"profilePromise\");\n  }\n  /**\n   * Creates a new IdentityApi that acts as a Guest User.\n   *\n   * @public\n   */\n  static createGuest() {\n    return new GuestUserIdentity();\n  }\n  /**\n   * Creates a new IdentityApi using a legacy SignInResult object.\n   *\n   * @public\n   */\n  static fromLegacy(result) {\n    return LegacyUserIdentity.fromResult(result);\n  }\n  /**\n   * Creates a new IdentityApi implementation using a user identity\n   * and an auth API that will be used to request backstage tokens.\n   *\n   * @public\n   */\n  static create(options) {\n    return new UserIdentity(options.identity, options.authApi, options.profile);\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getUserId} */\n  getUserId() {\n    const ref = this.identity.userEntityRef;\n    const match = /^([^:/]+:)?([^:/]+\\/)?([^:/]+)$/.exec(ref);\n    if (!match) {\n      throw new TypeError(`Invalid user entity reference \"${ref}\"`);\n    }\n    return match[3];\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getIdToken} */\n  async getIdToken() {\n    const identity = await this.authApi.getBackstageIdentity();\n    return identity.token;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfile} */\n  getProfile() {\n    if (!this.profile) {\n      throw new Error(\n        \"The identity API does not implement synchronous profile fetching, use getProfileInfo() instead\"\n      );\n    }\n    return this.profile;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfileInfo} */\n  async getProfileInfo() {\n    if (this.profilePromise) {\n      return await this.profilePromise;\n    }\n    try {\n      this.profilePromise = this.authApi.getProfile();\n      return await this.profilePromise;\n    } catch (ex) {\n      this.profilePromise = void 0;\n      throw ex;\n    }\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getBackstageIdentity} */\n  async getBackstageIdentity() {\n    return this.identity;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getCredentials} */\n  async getCredentials() {\n    const identity = await this.authApi.getBackstageIdentity();\n    return { token: identity.token };\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.signOut} */\n  async signOut() {\n    return this.authApi.signOut();\n  }\n}\n\nconst useStyles = makeStyles(\n  {\n    container: {\n      padding: 0,\n      listStyle: \"none\"\n    },\n    item: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      width: \"100%\",\n      maxWidth: \"400px\",\n      margin: 0,\n      padding: 0\n    }\n  },\n  { name: \"BackstageSignInPage\" }\n);\nconst GridItem = ({ children }) => {\n  const classes = useStyles();\n  return /* @__PURE__ */ React.createElement(Grid, { component: \"li\", item: true, classes }, children);\n};\n\nconst Component$2 = ({\n  config,\n  onSignInStarted,\n  onSignInSuccess,\n  onSignInFailure\n}) => {\n  const { apiRef, title, message } = config;\n  const authApi = useApi(apiRef);\n  const errorApi = useApi(errorApiRef);\n  const handleLogin = async () => {\n    try {\n      onSignInStarted();\n      const identityResponse = await authApi.getBackstageIdentity({\n        instantPopup: true\n      });\n      if (!identityResponse) {\n        onSignInFailure();\n        throw new Error(\n          `The ${title} provider is not configured to support sign-in`\n        );\n      }\n      const profile = await authApi.getProfile();\n      onSignInSuccess(\n        UserIdentity.create({\n          identity: identityResponse.identity,\n          profile,\n          authApi\n        })\n      );\n    } catch (error) {\n      onSignInFailure();\n      errorApi.post(new ForwardedError(\"Login failed\", error));\n    }\n  };\n  return /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      variant: \"fullHeight\",\n      title,\n      actions: /* @__PURE__ */ React.createElement(Button$1, { color: \"primary\", variant: \"outlined\", onClick: handleLogin }, \"Sign In\")\n    },\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, message)\n  ));\n};\nconst loader$2 = async (apis, apiRef) => {\n  const authApi = apis.get(apiRef);\n  const identityResponse = await authApi.getBackstageIdentity({\n    optional: true\n  });\n  if (!identityResponse) {\n    return void 0;\n  }\n  const profile = await authApi.getProfile();\n  return UserIdentity.create({\n    identity: identityResponse.identity,\n    profile,\n    authApi\n  });\n};\nconst commonProvider = { Component: Component$2, loader: loader$2 };\n\nconst Component$1 = ({ onSignInStarted, onSignInSuccess }) => /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(\n  InfoCard,\n  {\n    title: \"Guest\",\n    variant: \"fullHeight\",\n    actions: /* @__PURE__ */ React.createElement(\n      Button$1,\n      {\n        color: \"primary\",\n        variant: \"outlined\",\n        onClick: () => {\n          onSignInStarted();\n          onSignInSuccess(new GuestUserIdentity());\n        }\n      },\n      \"Enter\"\n    )\n  },\n  /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"Enter as a Guest User.\", /* @__PURE__ */ React.createElement(\"br\", null), \"You will not have a verified identity,\", /* @__PURE__ */ React.createElement(\"br\", null), \"meaning some features might be unavailable.\")\n));\nconst loader$1 = async () => {\n  return new GuestUserIdentity();\n};\nconst guestProvider = { Component: Component$1, loader: loader$1 };\n\nconst ID_TOKEN_REGEX = /^[a-z0-9_\\-]+\\.[a-z0-9_\\-]+\\.[a-z0-9_\\-]+$/i;\nconst useFormStyles = makeStyles(\n  (theme) => ({\n    form: {\n      display: \"flex\",\n      flexFlow: \"column nowrap\"\n    },\n    button: {\n      alignSelf: \"center\",\n      marginTop: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageCustomProvider\" }\n);\nconst asInputRef = (renderResult) => {\n  const { ref, ...rest } = renderResult;\n  return {\n    inputRef: ref,\n    ...rest\n  };\n};\nconst Component = ({ onSignInStarted, onSignInSuccess }) => {\n  const classes = useFormStyles();\n  const { register, handleSubmit, formState } = useForm({\n    mode: \"onChange\"\n  });\n  const { errors } = formState;\n  const handleResult = ({ userId, idToken }) => {\n    onSignInStarted();\n    onSignInSuccess(\n      UserIdentity.fromLegacy({\n        userId,\n        getIdToken: idToken !== void 0 ? async () => idToken : void 0,\n        profile: {\n          email: `${userId}@example.com`\n        }\n      })\n    );\n  };\n  return /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(InfoCard, { title: \"Custom User\", variant: \"fullHeight\" }, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"Enter your own User ID and credentials.\", /* @__PURE__ */ React.createElement(\"br\", null), \"This selection will not be stored.\"), /* @__PURE__ */ React.createElement(\"form\", { className: classes.form, onSubmit: handleSubmit(handleResult) }, /* @__PURE__ */ React.createElement(FormControl, null, /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      ...asInputRef(register(\"userId\", { required: true })),\n      label: \"User ID\",\n      margin: \"normal\",\n      error: Boolean(errors.userId)\n    }\n  ), errors.userId && /* @__PURE__ */ React.createElement(FormHelperText, { error: true }, errors.userId.message)), /* @__PURE__ */ React.createElement(FormControl, null, /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      ...asInputRef(\n        register(\"idToken\", {\n          required: false,\n          validate: (token) => !token || ID_TOKEN_REGEX.test(token) || \"Token is not a valid OpenID Connect JWT Token\"\n        })\n      ),\n      label: \"ID Token (optional)\",\n      margin: \"normal\",\n      autoComplete: \"off\",\n      error: Boolean(errors.idToken)\n    }\n  ), errors.idToken && /* @__PURE__ */ React.createElement(FormHelperText, { error: true }, errors.idToken.message)), /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      type: \"submit\",\n      color: \"primary\",\n      variant: \"outlined\",\n      className: classes.button,\n      disabled: !(formState == null ? void 0 : formState.isDirty) || !isEmpty(errors)\n    },\n    \"Continue\"\n  ))));\n};\nconst loader = async () => void 0;\nconst customProvider = { Component, loader };\n\nclass IdentityApiSignOutProxy {\n  constructor(config) {\n    this.config = config;\n  }\n  static from(config) {\n    return new IdentityApiSignOutProxy(config);\n  }\n  getUserId() {\n    if (!this.config.identityApi.getUserId) {\n      throw new Error(`SignOutProxy IdentityApi.getUserId is not implemented`);\n    }\n    return this.config.identityApi.getUserId();\n  }\n  getIdToken() {\n    if (!this.config.identityApi.getIdToken) {\n      throw new Error(`SignOutProxy IdentityApi.getIdToken is not implemented`);\n    }\n    return this.config.identityApi.getIdToken();\n  }\n  getProfile() {\n    if (!this.config.identityApi.getProfile) {\n      throw new Error(`SignOutProxy IdentityApi.getProfile is not implemented`);\n    }\n    return this.config.identityApi.getProfile();\n  }\n  getProfileInfo() {\n    return this.config.identityApi.getProfileInfo();\n  }\n  getBackstageIdentity() {\n    return this.config.identityApi.getBackstageIdentity();\n  }\n  getCredentials() {\n    return this.config.identityApi.getCredentials();\n  }\n  signOut() {\n    return this.config.signOut();\n  }\n}\n\nconst PROVIDER_STORAGE_KEY = \"@backstage/core:SignInPage:provider\";\nconst signInProviders = {\n  guest: guestProvider,\n  custom: customProvider,\n  common: commonProvider\n};\nfunction validateIDs(id, providers) {\n  if (id in providers)\n    throw new Error(\n      `\"${id}\" ID is duplicated. IDs of identity providers have to be unique.`\n    );\n}\nfunction getSignInProviders(identityProviders) {\n  const providers = identityProviders.reduce(\n    (acc, config) => {\n      if (typeof config === \"string\") {\n        validateIDs(config, acc);\n        acc[config] = { components: signInProviders[config], id: config };\n        return acc;\n      }\n      const { id } = config;\n      validateIDs(id, acc);\n      acc[id] = { components: signInProviders.common, id, config };\n      return acc;\n    },\n    {}\n  );\n  return providers;\n}\nconst useSignInProviders = (providers, onSignInSuccess) => {\n  const errorApi = useApi(errorApiRef);\n  const apiHolder = useApiHolder();\n  const [loading, setLoading] = useState(true);\n  const handleWrappedResult = useCallback(\n    (identityApi) => {\n      onSignInSuccess(\n        IdentityApiSignOutProxy.from({\n          identityApi,\n          signOut: async () => {\n            var _a;\n            localStorage.removeItem(PROVIDER_STORAGE_KEY);\n            await ((_a = identityApi.signOut) == null ? void 0 : _a.call(identityApi));\n          }\n        })\n      );\n    },\n    [onSignInSuccess]\n  );\n  useLayoutEffect(() => {\n    var _a;\n    if (!loading) {\n      return void 0;\n    }\n    const selectedProviderId = localStorage.getItem(\n      PROVIDER_STORAGE_KEY\n    );\n    if (selectedProviderId === null) {\n      setLoading(false);\n      return void 0;\n    }\n    const provider = providers[selectedProviderId];\n    if (!provider) {\n      setLoading(false);\n      return void 0;\n    }\n    let didCancel = false;\n    provider.components.loader(apiHolder, (_a = provider.config) == null ? void 0 : _a.apiRef).then((result) => {\n      if (didCancel) {\n        localStorage.removeItem(PROVIDER_STORAGE_KEY);\n        return;\n      }\n      if (result) {\n        handleWrappedResult(result);\n      } else {\n        setLoading(false);\n      }\n    }).catch((error) => {\n      localStorage.removeItem(PROVIDER_STORAGE_KEY);\n      if (didCancel) {\n        return;\n      }\n      errorApi.post(error);\n      setLoading(false);\n    });\n    return () => {\n      didCancel = true;\n    };\n  }, [\n    loading,\n    errorApi,\n    onSignInSuccess,\n    apiHolder,\n    providers,\n    handleWrappedResult\n  ]);\n  const elements = useMemo(\n    () => Object.keys(providers).map((key) => {\n      const provider = providers[key];\n      const { Component } = provider.components;\n      const handleSignInSuccess = (result) => {\n        handleWrappedResult(result);\n      };\n      const handleSignInStarted = () => {\n        var _a;\n        localStorage.setItem(\n          PROVIDER_STORAGE_KEY,\n          ((_a = provider == null ? void 0 : provider.config) == null ? void 0 : _a.id) || provider.id\n        );\n      };\n      const handleSignInFailure = () => {\n        localStorage.removeItem(PROVIDER_STORAGE_KEY);\n      };\n      return /* @__PURE__ */ React.createElement(\n        Component,\n        {\n          key: provider.id,\n          config: provider.config,\n          onSignInStarted: handleSignInStarted,\n          onSignInSuccess: handleSignInSuccess,\n          onSignInFailure: handleSignInFailure\n        }\n      );\n    }),\n    [providers, handleWrappedResult]\n  );\n  return [loading, elements];\n};\n\nconst MultiSignInPage = ({\n  onSignInSuccess,\n  providers = [],\n  title,\n  align = \"left\"\n}) => {\n  const configApi = useApi(configApiRef);\n  const classes = useStyles();\n  const signInProviders = getSignInProviders(providers);\n  const [loading, providerElements] = useSignInProviders(\n    signInProviders,\n    onSignInSuccess\n  );\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"home\" }, /* @__PURE__ */ React.createElement(Header, { title: configApi.getString(\"app.title\") }), /* @__PURE__ */ React.createElement(Content, null, title && /* @__PURE__ */ React.createElement(ContentHeader, { title, textAlign: align }), /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      justifyContent: align === \"center\" ? align : \"flex-start\",\n      spacing: 2,\n      component: \"ul\",\n      classes\n    },\n    providerElements\n  )));\n};\nconst SingleSignInPage = ({\n  provider,\n  auto,\n  onSignInSuccess\n}) => {\n  const classes = useStyles();\n  const authApi = useApi(provider.apiRef);\n  const configApi = useApi(configApiRef);\n  const [error, setError] = useState();\n  const [showLoginPage, setShowLoginPage] = useState(false);\n  const login = async ({ checkExisting, showPopup }) => {\n    try {\n      let identityResponse;\n      if (checkExisting) {\n        identityResponse = await authApi.getBackstageIdentity({\n          optional: true\n        });\n      }\n      if (!identityResponse && (showPopup || auto)) {\n        setShowLoginPage(true);\n        identityResponse = await authApi.getBackstageIdentity({\n          instantPopup: true\n        });\n        if (!identityResponse) {\n          throw new Error(\n            `The ${provider.title} provider is not configured to support sign-in`\n          );\n        }\n      }\n      if (!identityResponse) {\n        setShowLoginPage(true);\n        return;\n      }\n      const profile = await authApi.getProfile();\n      onSignInSuccess(\n        UserIdentity.create({\n          identity: identityResponse.identity,\n          authApi,\n          profile\n        })\n      );\n    } catch (err) {\n      setError(err);\n      setShowLoginPage(true);\n    }\n  };\n  useMountEffect(() => login({ checkExisting: true }));\n  return showLoginPage ? /* @__PURE__ */ React.createElement(Page, { themeId: \"home\" }, /* @__PURE__ */ React.createElement(Header, { title: configApi.getString(\"app.title\") }), /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      justifyContent: \"center\",\n      spacing: 2,\n      component: \"ul\",\n      classes\n    },\n    /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(\n      InfoCard,\n      {\n        variant: \"fullHeight\",\n        title: provider.title,\n        actions: /* @__PURE__ */ React.createElement(\n          Button$1,\n          {\n            color: \"primary\",\n            variant: \"outlined\",\n            onClick: () => {\n              login({ showPopup: true });\n            }\n          },\n          \"Sign In\"\n        )\n      },\n      /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, provider.message),\n      error && error.name !== \"PopupRejectedError\" && /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\", color: \"error\" }, error.message)\n    ))\n  ))) : /* @__PURE__ */ React.createElement(Progress, null);\n};\nfunction SignInPage(props) {\n  if (\"provider\" in props) {\n    return /* @__PURE__ */ React.createElement(SingleSignInPage, { ...props });\n  }\n  return /* @__PURE__ */ React.createElement(MultiSignInPage, { ...props });\n}\n\nconst useTabsStyles = makeStyles(\n  (theme) => ({\n    root: {\n      padding: theme.spacing(0, 2, 0, 2.5),\n      minHeight: theme.spacing(3)\n    },\n    indicator: {\n      backgroundColor: theme.palette.info.main,\n      height: theme.spacing(0.3)\n    }\n  }),\n  { name: \"BackstageTabbedCard\" }\n);\nconst BoldHeader = withStyles(\n  (theme) => ({\n    root: { padding: theme.spacing(2, 2, 2, 2.5), display: \"inline-block\" },\n    title: { fontWeight: 700 },\n    subheader: { paddingTop: theme.spacing(1) }\n  }),\n  { name: \"BackstageTabbedCardBoldHeader\" }\n)(CardHeader);\nfunction TabbedCard(props) {\n  const {\n    slackChannel,\n    errorBoundaryProps,\n    children,\n    title,\n    deepLink,\n    value,\n    onChange\n  } = props;\n  const tabsClasses = useTabsStyles();\n  const [selectedIndex, selectIndex] = useState(0);\n  const handleChange = onChange ? onChange : (_ev, newSelectedIndex) => selectIndex(newSelectedIndex);\n  let selectedTabContent;\n  if (!value) {\n    React.Children.map(children, (child, index) => {\n      if (React.isValidElement(child) && index === selectedIndex) {\n        selectedTabContent = child == null ? void 0 : child.props.children;\n      }\n    });\n  } else {\n    React.Children.map(children, (child) => {\n      if (React.isValidElement(\n        child\n      ) && (child == null ? void 0 : child.props.value) === value) {\n        selectedTabContent = child == null ? void 0 : child.props.children;\n      }\n    });\n  }\n  const errProps = errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n  return /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(ErrorBoundary, { ...errProps }, title && /* @__PURE__ */ React.createElement(BoldHeader, { title }), /* @__PURE__ */ React.createElement(\n    Tabs,\n    {\n      classes: tabsClasses,\n      value: value || selectedIndex,\n      onChange: handleChange\n    },\n    children\n  ), /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(CardContent, null, selectedTabContent), deepLink && /* @__PURE__ */ React.createElement(BottomLink, { ...deepLink })));\n}\nconst useCardTabStyles = makeStyles(\n  (theme) => ({\n    root: {\n      minWidth: theme.spacing(6),\n      minHeight: theme.spacing(3),\n      margin: theme.spacing(0, 2, 0, 0),\n      padding: theme.spacing(0.5, 0, 0.5, 0),\n      textTransform: \"none\",\n      \"&:hover\": {\n        opacity: 1,\n        backgroundColor: \"transparent\",\n        color: theme.palette.text.primary\n      }\n    },\n    selected: {\n      fontWeight: theme.typography.fontWeightBold\n    }\n  }),\n  { name: \"BackstageCardTab\" }\n);\nfunction CardTab(props) {\n  const { children, ...restProps } = props;\n  const classes = useCardTabStyles();\n  return /* @__PURE__ */ React.createElement(TabUI, { disableRipple: true, classes, ...restProps });\n}\n\nexport { AlertDisplay, AutoLogout, Avatar, BottomLink, Breadcrumbs, BrokenImageIcon, Button, CardTab, CatalogIcon, ChatIcon, CodeSnippet, Content, ContentHeader, CopyTextButton, CreateButton, DashboardIcon, DependencyGraph, DependencyGraphTypes, DismissableBanner, DocsIcon, EmailIcon, EmptyState, ErrorBoundary, ErrorPage, ErrorPanel, FeatureCalloutCircular, Gauge, GaugeCard, GitHubIcon, GroupIcon, Header, HeaderActionMenu, HeaderIconLinkRow, HeaderLabel, HeaderTabs, HelpIcon, HorizontalScrollGrid, IconLinkVertical, InfoCard, ItemCard, ItemCardGrid, ItemCardHeader, Lifecycle, LinearGauge, Link, LinkButton, LogViewer, MarkdownContent, MissingAnnotationEmptyState, MobileSidebar, OAuthRequestDialog, OverflowTooltip, Page, PageWithHeader, Progress, ProxiedSignInPage, ResponseErrorPanel, RoutedTabs, SIDEBAR_INTRO_LOCAL_STORAGE, SelectComponent as Select, Sidebar, LegacySidebarContext as SidebarContext, SidebarDivider, SidebarExpandButton, SidebarGroup, SidebarItem, SidebarOpenStateProvider, SidebarPage, LegacySidebarPinStateContext as SidebarPinStateContext, SidebarPinStateProvider, SidebarScrollWrapper, SidebarSearchField, SidebarSpace, SidebarSpacer, SidebarSubmenu, SidebarSubmenuItem, SignInPage, SimpleStepper, SimpleStepperStep, StatusAborted, StatusError, StatusOK, StatusPending, StatusRunning, StatusWarning, StructuredMetadataTable, SubvalueCell, SupportButton, TabbedCard, TabbedLayout, Table, TrendLine, UserIcon, UserIdentity, WarningIcon, WarningPanel, sidebarConfig, useContent, useQueryParamState, useSidebarOpenState, useSidebarPinState, useSupportConfig };\n//# sourceMappingURL=index.esm.js.map\n","import { useState, useMemo, useCallback, useEffect, useRef } from 'react';\nimport { u as useApi, r as errorApiRef } from './esm/StorageApi-c8a5e616.esm.js';\nimport { createApiRef } from '@backstage/core-plugin-api';\nimport '@backstage/version-bridge';\nimport '@backstage/errors';\n\nfunction createTranslationMessages(options) {\n  return {\n    $$type: \"@backstage/TranslationMessages\",\n    id: options.ref.id,\n    full: Boolean(options.full),\n    messages: options.messages\n  };\n}\n\nfunction createTranslationResource(options) {\n  return {\n    $$type: \"@backstage/TranslationResource\",\n    version: \"v1\",\n    id: options.ref.id,\n    resources: Object.entries(options.translations).map(\n      ([language, loader]) => ({\n        language,\n        loader: () => loader().then((m) => {\n          const value = m.default;\n          return {\n            messages: (value == null ? void 0 : value.$$type) === \"@backstage/TranslationMessages\" ? value.messages : value\n          };\n        })\n      })\n    )\n  };\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _id, _messages, _resources;\nfunction flattenMessages(nested) {\n  const entries = new Array();\n  function visit(obj, prefix) {\n    for (const [key, value] of Object.entries(obj)) {\n      if (typeof value === \"string\") {\n        entries.push([prefix + key, value]);\n      } else {\n        visit(value, `${prefix}${key}.`);\n      }\n    }\n  }\n  visit(nested, \"\");\n  return Object.fromEntries(entries);\n}\nclass TranslationRefImpl {\n  constructor(options) {\n    __privateAdd(this, _id, void 0);\n    __privateAdd(this, _messages, void 0);\n    __privateAdd(this, _resources, void 0);\n    __publicField(this, \"$$type\", \"@backstage/TranslationRef\");\n    __publicField(this, \"version\", \"v1\");\n    __privateSet(this, _id, options.id);\n    __privateSet(this, _messages, flattenMessages(\n      options.messages\n    ));\n  }\n  get id() {\n    return __privateGet(this, _id);\n  }\n  get T() {\n    throw new Error(\"Not implemented\");\n  }\n  getDefaultMessages() {\n    return __privateGet(this, _messages);\n  }\n  setDefaultResource(resources) {\n    __privateSet(this, _resources, resources);\n  }\n  getDefaultResource() {\n    return __privateGet(this, _resources);\n  }\n  toString() {\n    return `TranslationRef{id=${this.id}}`;\n  }\n}\n_id = new WeakMap();\n_messages = new WeakMap();\n_resources = new WeakMap();\nfunction createTranslationRef(config) {\n  const ref = new TranslationRefImpl(config);\n  if (config.translations) {\n    ref.setDefaultResource(\n      createTranslationResource({\n        ref,\n        translations: config.translations\n      })\n    );\n  }\n  return ref;\n}\n\nconst translationApiRef = createApiRef({\n  id: \"core.translation\"\n});\n\nconst appLanguageApiRef = createApiRef({\n  id: \"core.applanguage\"\n});\n\nconst loggedRefs = /* @__PURE__ */ new WeakSet();\nconst useTranslationRef = (translationRef) => {\n  const errorApi = useApi(errorApiRef);\n  const translationApi = useApi(translationApiRef);\n  const [snapshot, setSnapshot] = useState(\n    () => translationApi.getTranslation(translationRef)\n  );\n  const observable = useMemo(\n    () => translationApi.translation$(translationRef),\n    [translationApi, translationRef]\n  );\n  const onError = useCallback(\n    (error) => {\n      if (!loggedRefs.has(translationRef)) {\n        const errMsg = `Failed to load translation resource '${translationRef.id}'; caused by ${error}`;\n        console.error(errMsg);\n        errorApi.post(new Error(errMsg));\n        loggedRefs.add(translationRef);\n      }\n    },\n    [errorApi, translationRef]\n  );\n  useEffect(() => {\n    const subscription = observable.subscribe({\n      next(next) {\n        if (next.ready) {\n          setSnapshot(next);\n        }\n      },\n      error(error) {\n        onError(error);\n      }\n    });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [observable, onError]);\n  const initialRenderRef = useRef(true);\n  useEffect(() => {\n    if (initialRenderRef.current) {\n      initialRenderRef.current = false;\n    } else {\n      setSnapshot(translationApi.getTranslation(translationRef));\n    }\n  }, [translationApi, translationRef]);\n  if (!snapshot.ready) {\n    throw new Promise((resolve) => {\n      const subscription = observable.subscribe({\n        next(next) {\n          if (next.ready) {\n            subscription.unsubscribe();\n            resolve();\n          }\n        },\n        error(error) {\n          subscription.unsubscribe();\n          onError(error);\n          resolve();\n        }\n      });\n    });\n  }\n  return { t: snapshot.t };\n};\n\nexport { appLanguageApiRef, createTranslationMessages, createTranslationRef, createTranslationResource, translationApiRef, useTranslationRef };\n//# sourceMappingURL=alpha.esm.js.map\n","import React from 'react';\nimport { useVersionedContext } from '@backstage/version-bridge';\nimport { NotImplementedError } from '@backstage/errors';\n\nfunction useApiHolder() {\n  const versionedHolder = useVersionedContext(\"api-context\");\n  if (!versionedHolder) {\n    throw new NotImplementedError(\"API context is not available\");\n  }\n  const apiHolder = versionedHolder.atVersion(1);\n  if (!apiHolder) {\n    throw new NotImplementedError(\"ApiContext v1 not available\");\n  }\n  return apiHolder;\n}\nfunction useApi(apiRef) {\n  const apiHolder = useApiHolder();\n  const api = apiHolder.get(apiRef);\n  if (!api) {\n    throw new NotImplementedError(`No implementation available for ${apiRef}`);\n  }\n  return api;\n}\nfunction withApis(apis) {\n  return function withApisWrapper(WrappedComponent) {\n    const Hoc = (props) => {\n      const apiHolder = useApiHolder();\n      const impls = {};\n      for (const key in apis) {\n        if (apis.hasOwnProperty(key)) {\n          const ref = apis[key];\n          const api = apiHolder.get(ref);\n          if (!api) {\n            throw new NotImplementedError(\n              `No implementation available for ${ref}`\n            );\n          }\n          impls[key] = api;\n        }\n      }\n      return /* @__PURE__ */ React.createElement(WrappedComponent, { ...props, ...impls });\n    };\n    const displayName = WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n    Hoc.displayName = `withApis(${displayName})`;\n    return Hoc;\n  };\n}\n\nclass ApiRefImpl {\n  constructor(config) {\n    this.config = config;\n    const valid = config.id.split(\".\").flatMap((part) => part.split(\"-\")).every((part) => part.match(/^[a-z][a-z0-9]*$/));\n    if (!valid) {\n      throw new Error(\n        `API id must only contain period separated lowercase alphanum tokens with dashes, got '${config.id}'`\n      );\n    }\n  }\n  get id() {\n    return this.config.id;\n  }\n  // Utility for getting type of an api, using `typeof apiRef.T`\n  get T() {\n    throw new Error(`tried to read ApiRef.T of ${this}`);\n  }\n  toString() {\n    return `apiRef{${this.config.id}}`;\n  }\n}\nfunction createApiRef(config) {\n  return new ApiRefImpl(config);\n}\n\nvar SessionState = /* @__PURE__ */ ((SessionState2) => {\n  SessionState2[\"SignedIn\"] = \"SignedIn\";\n  SessionState2[\"SignedOut\"] = \"SignedOut\";\n  return SessionState2;\n})(SessionState || {});\nconst googleAuthApiRef = createApiRef({\n  id: \"core.auth.google\"\n});\nconst githubAuthApiRef = createApiRef({\n  id: \"core.auth.github\"\n});\nconst oktaAuthApiRef = createApiRef({\n  id: \"core.auth.okta\"\n});\nconst gitlabAuthApiRef = createApiRef({\n  id: \"core.auth.gitlab\"\n});\nconst microsoftAuthApiRef = createApiRef({\n  id: \"core.auth.microsoft\"\n});\nconst oneloginAuthApiRef = createApiRef({\n  id: \"core.auth.onelogin\"\n});\nconst bitbucketAuthApiRef = createApiRef({\n  id: \"core.auth.bitbucket\"\n});\nconst bitbucketServerAuthApiRef = createApiRef({\n  id: \"core.auth.bitbucket-server\"\n});\nconst atlassianAuthApiRef = createApiRef({\n  id: \"core.auth.atlassian\"\n});\nconst vmwareCloudAuthApiRef = createApiRef({\n  id: \"core.auth.vmware-cloud\"\n});\n\nconst alertApiRef = createApiRef({\n  id: \"core.alert\"\n});\n\nconst analyticsApiRef = createApiRef({\n  id: \"core.analytics\"\n});\n\nconst appThemeApiRef = createApiRef({\n  id: \"core.apptheme\"\n});\n\nconst configApiRef = createApiRef({\n  id: \"core.config\"\n});\n\nconst discoveryApiRef = createApiRef({\n  id: \"core.discovery\"\n});\n\nconst errorApiRef = createApiRef({\n  id: \"core.error\"\n});\n\nvar FeatureFlagState = /* @__PURE__ */ ((FeatureFlagState2) => {\n  FeatureFlagState2[FeatureFlagState2[\"None\"] = 0] = \"None\";\n  FeatureFlagState2[FeatureFlagState2[\"Active\"] = 1] = \"Active\";\n  return FeatureFlagState2;\n})(FeatureFlagState || {});\nconst featureFlagsApiRef = createApiRef({\n  id: \"core.featureflags\"\n});\n\nconst fetchApiRef = createApiRef({\n  id: \"core.fetch\"\n});\n\nconst identityApiRef = createApiRef({\n  id: \"core.identity\"\n});\n\nconst oauthRequestApiRef = createApiRef({\n  id: \"core.oauthrequest\"\n});\n\nconst storageApiRef = createApiRef({\n  id: \"core.storage\"\n});\n\nexport { FeatureFlagState as F, SessionState as S, analyticsApiRef as a, useApiHolder as b, createApiRef as c, githubAuthApiRef as d, gitlabAuthApiRef as e, featureFlagsApiRef as f, googleAuthApiRef as g, oneloginAuthApiRef as h, bitbucketAuthApiRef as i, bitbucketServerAuthApiRef as j, atlassianAuthApiRef as k, alertApiRef as l, microsoftAuthApiRef as m, appThemeApiRef as n, oktaAuthApiRef as o, configApiRef as p, discoveryApiRef as q, errorApiRef as r, fetchApiRef as s, identityApiRef as t, useApi as u, vmwareCloudAuthApiRef as v, withApis as w, oauthRequestApiRef as x, storageApiRef as y };\n//# sourceMappingURL=StorageApi-c8a5e616.esm.js.map\n","import { createVersionedContext, createVersionedValueMap, getOrCreateGlobalSingleton, useVersionedContext } from '@backstage/version-bridge';\nimport React, { useContext, useRef, useMemo, lazy, Suspense, useEffect, Children, isValidElement, Fragment } from 'react';\nimport { u as useApi, a as analyticsApiRef, f as featureFlagsApiRef } from './esm/StorageApi-c8a5e616.esm.js';\nexport { F as FeatureFlagState, S as SessionState, l as alertApiRef, a as analyticsApiRef, n as appThemeApiRef, k as atlassianAuthApiRef, i as bitbucketAuthApiRef, j as bitbucketServerAuthApiRef, p as configApiRef, c as createApiRef, q as discoveryApiRef, r as errorApiRef, f as featureFlagsApiRef, s as fetchApiRef, d as githubAuthApiRef, e as gitlabAuthApiRef, g as googleAuthApiRef, t as identityApiRef, m as microsoftAuthApiRef, x as oauthRequestApiRef, o as oktaAuthApiRef, h as oneloginAuthApiRef, y as storageApiRef, u as useApi, b as useApiHolder, v as vmwareCloudAuthApiRef, w as withApis } from './esm/StorageApi-c8a5e616.esm.js';\nimport { useLocation, useParams } from 'react-router-dom';\nimport '@backstage/errors';\n\nconst AnalyticsReactContext = createVersionedContext(\"analytics-context\");\nconst useAnalyticsContext = () => {\n  const theContext = useContext(AnalyticsReactContext);\n  if (theContext === void 0) {\n    return {\n      routeRef: \"unknown\",\n      pluginId: \"root\",\n      extension: \"App\"\n    };\n  }\n  const theValue = theContext.atVersion(1);\n  if (theValue === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return theValue;\n};\nconst AnalyticsContext = (options) => {\n  const { attributes, children } = options;\n  const parentValues = useAnalyticsContext();\n  const combinedValue = {\n    ...parentValues,\n    ...attributes\n  };\n  const versionedCombinedValue = createVersionedValueMap({ 1: combinedValue });\n  return /* @__PURE__ */ React.createElement(AnalyticsReactContext.Provider, { value: versionedCombinedValue }, children);\n};\n\nfunction createApiFactory(factory, instance) {\n  if (\"id\" in factory) {\n    return {\n      api: factory,\n      deps: {},\n      factory: () => instance\n    };\n  }\n  return factory;\n}\n\nconst globalEvents = getOrCreateGlobalSingleton(\n  \"core-plugin-api:analytics-tracker-events\",\n  () => ({\n    mostRecentGatheredNavigation: void 0,\n    mostRecentRoutableExtensionRender: void 0,\n    beforeUnloadRegistered: false\n  })\n);\nconst routableExtensionRenderedEvent = \"_ROUTABLE-EXTENSION-RENDERED\";\nclass Tracker {\n  constructor(analyticsApi, context = {\n    routeRef: \"unknown\",\n    pluginId: \"root\",\n    extension: \"App\"\n  }) {\n    this.analyticsApi = analyticsApi;\n    this.context = context;\n    if (!globalEvents.beforeUnloadRegistered) {\n      addEventListener(\n        \"beforeunload\",\n        () => {\n          if (globalEvents.mostRecentGatheredNavigation) {\n            this.analyticsApi.captureEvent({\n              ...globalEvents.mostRecentGatheredNavigation,\n              ...globalEvents.mostRecentRoutableExtensionRender\n            });\n            globalEvents.mostRecentGatheredNavigation = void 0;\n            globalEvents.mostRecentRoutableExtensionRender = void 0;\n          }\n        },\n        { once: true, passive: true }\n      );\n      globalEvents.beforeUnloadRegistered = true;\n    }\n  }\n  setContext(context) {\n    this.context = context;\n  }\n  captureEvent(action, subject, {\n    value,\n    attributes\n  } = {}) {\n    const { _routeNodeType, ...context } = this.context;\n    if (action === routableExtensionRenderedEvent) {\n      if (globalEvents.mostRecentGatheredNavigation) {\n        globalEvents.mostRecentRoutableExtensionRender = {\n          context: {\n            ...context,\n            extension: \"App\"\n          }\n        };\n      }\n      return;\n    }\n    if (globalEvents.mostRecentGatheredNavigation) {\n      try {\n        this.analyticsApi.captureEvent({\n          ...globalEvents.mostRecentGatheredNavigation,\n          ...globalEvents.mostRecentRoutableExtensionRender\n        });\n      } catch (e) {\n        console.warn(\"Error during analytics event capture. %o\", e);\n      }\n      globalEvents.mostRecentGatheredNavigation = void 0;\n      globalEvents.mostRecentRoutableExtensionRender = void 0;\n    }\n    if (action === \"navigate\" && _routeNodeType === \"gathered\" && context.pluginId === \"root\") {\n      globalEvents.mostRecentGatheredNavigation = {\n        action,\n        subject,\n        value,\n        attributes,\n        context\n      };\n      return;\n    }\n    try {\n      this.analyticsApi.captureEvent({\n        action,\n        subject,\n        value,\n        attributes,\n        context\n      });\n    } catch (e) {\n      console.warn(\"Error during analytics event capture. %o\", e);\n    }\n  }\n}\n\nfunction useAnalyticsApi() {\n  try {\n    return useApi(analyticsApiRef);\n  } catch {\n    return { captureEvent: () => {\n    } };\n  }\n}\nfunction useAnalytics() {\n  const trackerRef = useRef(null);\n  const context = useAnalyticsContext();\n  const analyticsApi = useAnalyticsApi();\n  function getTracker() {\n    if (trackerRef.current === null) {\n      trackerRef.current = new Tracker(analyticsApi);\n    }\n    return trackerRef.current;\n  }\n  const tracker = getTracker();\n  tracker.setContext(context);\n  return tracker;\n}\n\nconst useApp = () => {\n  const versionedContext = useVersionedContext(\n    \"app-context\"\n  );\n  if (!versionedContext) {\n    throw new Error(\"App context is not available\");\n  }\n  const appContext = versionedContext.atVersion(1);\n  if (!appContext) {\n    throw new Error(\"AppContext v1 not available\");\n  }\n  return appContext;\n};\n\nconst globalStore = getOrCreateGlobalSingleton(\n  \"component-data-store\",\n  () => /* @__PURE__ */ new WeakMap()\n);\nconst componentDataKey = \"__backstage_data\";\nfunction attachComponentData(component, type, data) {\n  var _a;\n  const dataComponent = component;\n  let container = (_a = dataComponent[componentDataKey]) != null ? _a : globalStore.get(component);\n  if (!container) {\n    container = { map: /* @__PURE__ */ new Map() };\n    Object.defineProperty(dataComponent, componentDataKey, {\n      enumerable: false,\n      configurable: true,\n      writable: false,\n      value: container\n    });\n    globalStore.set(component, container);\n  }\n  if (container.map.has(type)) {\n    const name = component.displayName || component.name;\n    throw new Error(\n      `Attempted to attach duplicate data \"${type}\" to component \"${name}\"`\n    );\n  }\n  container.map.set(type, data);\n}\nfunction getComponentData(node, type) {\n  var _a;\n  if (!node) {\n    return void 0;\n  }\n  const component = node.type;\n  if (!component) {\n    return void 0;\n  }\n  const container = (_a = component[componentDataKey]) != null ? _a : globalStore.get(component);\n  if (!container) {\n    return void 0;\n  }\n  return container.map.get(type);\n}\n\nconst routeRefType = getOrCreateGlobalSingleton(\n  \"route-ref-type\",\n  () => Symbol(\"route-ref-type\")\n);\n\nvar __defProp$3 = Object.defineProperty;\nvar __defNormalProp$3 = (obj, key, value) => key in obj ? __defProp$3(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$3 = (obj, key, value) => {\n  __defNormalProp$3(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar _a$2;\nclass RouteRefImpl {\n  constructor(id, params) {\n    this.id = id;\n    this.params = params;\n    __publicField$3(this, _a$2, \"absolute\");\n  }\n  get title() {\n    return this.id;\n  }\n  toString() {\n    return `routeRef{type=absolute,id=${this.id}}`;\n  }\n}\n_a$2 = routeRefType;\nfunction createRouteRef(config) {\n  var _a2;\n  return new RouteRefImpl(\n    config.id,\n    (_a2 = config.params) != null ? _a2 : []\n  );\n}\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar _a$1;\nconst PARAM_PATTERN = /^\\w+$/;\nclass SubRouteRefImpl {\n  constructor(id, path, parent, params) {\n    this.id = id;\n    this.path = path;\n    this.parent = parent;\n    this.params = params;\n    __publicField$2(this, _a$1, \"sub\");\n  }\n  toString() {\n    return `routeRef{type=sub,id=${this.id}}`;\n  }\n}\n_a$1 = routeRefType;\nfunction createSubRouteRef(config) {\n  const { id, path, parent } = config;\n  const pathParams = path.split(\"/\").filter((p) => p.startsWith(\":\")).map((p) => p.substring(1));\n  const params = [...parent.params, ...pathParams];\n  if (parent.params.some((p) => pathParams.includes(p))) {\n    throw new Error(\n      \"SubRouteRef may not have params that overlap with its parent\"\n    );\n  }\n  if (!path.startsWith(\"/\")) {\n    throw new Error(`SubRouteRef path must start with '/', got '${path}'`);\n  }\n  if (path.endsWith(\"/\")) {\n    throw new Error(`SubRouteRef path must not end with '/', got '${path}'`);\n  }\n  for (const param of pathParams) {\n    if (!PARAM_PATTERN.test(param)) {\n      throw new Error(`SubRouteRef path has invalid param, got '${param}'`);\n    }\n  }\n  const subRouteRef = new SubRouteRefImpl(\n    id,\n    path,\n    parent,\n    params\n  );\n  return subRouteRef;\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar _a;\nclass ExternalRouteRefImpl {\n  constructor(id, params, optional) {\n    this.id = id;\n    this.params = params;\n    this.optional = optional;\n    __publicField$1(this, _a, \"external\");\n  }\n  toString() {\n    return `routeRef{type=external,id=${this.id}}`;\n  }\n}\n_a = routeRefType;\nfunction createExternalRouteRef(options) {\n  var _a2;\n  return new ExternalRouteRefImpl(\n    options.id,\n    (_a2 = options.params) != null ? _a2 : [],\n    Boolean(options.optional)\n  );\n}\n\nfunction useRouteRef(routeRef) {\n  const { pathname } = useLocation();\n  const versionedContext = useVersionedContext(\n    \"routing-context\"\n  );\n  if (!versionedContext) {\n    throw new Error(\"Routing context is not available\");\n  }\n  const resolver = versionedContext.atVersion(1);\n  const routeFunc = useMemo(\n    () => resolver && resolver.resolve(routeRef, { pathname }),\n    [resolver, routeRef, pathname]\n  );\n  if (!versionedContext) {\n    throw new Error(\"useRouteRef used outside of routing context\");\n  }\n  if (!resolver) {\n    throw new Error(\"RoutingContext v1 not available\");\n  }\n  const isOptional = \"optional\" in routeRef && routeRef.optional;\n  if (!routeFunc && !isOptional) {\n    throw new Error(`No path for ${routeRef}`);\n  }\n  return routeFunc;\n}\n\nfunction useRouteRefParams(_routeRef) {\n  return useParams();\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass PluginErrorBoundary extends React.Component {\n  constructor() {\n    super(...arguments);\n    __publicField(this, \"state\", { error: void 0 });\n    __publicField(this, \"handleErrorReset\", () => {\n      this.setState({ error: void 0 });\n    });\n  }\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n  render() {\n    const { error } = this.state;\n    const { app, plugin } = this.props;\n    const { ErrorBoundaryFallback } = app.getComponents();\n    if (error) {\n      return /* @__PURE__ */ React.createElement(\n        ErrorBoundaryFallback,\n        {\n          error,\n          resetError: this.handleErrorReset,\n          plugin\n        }\n      );\n    }\n    return this.props.children;\n  }\n}\n\nfunction createRoutableExtension(options) {\n  const { component, mountPoint, name } = options;\n  return createReactExtension({\n    component: {\n      lazy: () => component().then(\n        (InnerComponent) => {\n          const RoutableExtensionWrapper = (props) => {\n            const analytics = useAnalytics();\n            try {\n              useRouteRef(mountPoint);\n            } catch (error) {\n              if (typeof error === \"object\" && error !== null) {\n                const { message } = error;\n                if (typeof message === \"string\" && message.startsWith(\"No path for \")) {\n                  throw new Error(\n                    `Routable extension component with mount point ${mountPoint} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`\n                  );\n                }\n              }\n              throw error;\n            }\n            useEffect(() => {\n              analytics.captureEvent(routableExtensionRenderedEvent, \"\");\n            }, [analytics]);\n            return /* @__PURE__ */ React.createElement(InnerComponent, { ...props });\n          };\n          const componentName = name || InnerComponent.displayName || InnerComponent.name || \"LazyComponent\";\n          RoutableExtensionWrapper.displayName = `RoutableExtension(${componentName})`;\n          return RoutableExtensionWrapper;\n        },\n        (error) => {\n          const RoutableExtensionWrapper = (_) => {\n            const app = useApp();\n            const { BootErrorPage } = app.getComponents();\n            return /* @__PURE__ */ React.createElement(BootErrorPage, { step: \"load-chunk\", error });\n          };\n          return RoutableExtensionWrapper;\n        }\n      )\n    },\n    data: {\n      \"core.mountPoint\": mountPoint\n    },\n    name\n  });\n}\nfunction createComponentExtension(options) {\n  const { component, name } = options;\n  return createReactExtension({ component, name });\n}\nfunction createReactExtension(options) {\n  const { data = {}, name } = options;\n  if (!name) {\n    console.warn(\n      \"Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.\"\n    );\n  }\n  let Component;\n  if (\"lazy\" in options.component) {\n    const lazyLoader = options.component.lazy;\n    Component = lazy(\n      () => lazyLoader().then((component) => ({ default: component }))\n    );\n  } else {\n    Component = options.component.sync;\n  }\n  const componentName = name || Component.displayName || Component.name || \"Component\";\n  return {\n    expose(plugin) {\n      const Result = (props) => {\n        const app = useApp();\n        const { Progress } = app.getComponents();\n        const mountPoint = data == null ? void 0 : data[\"core.mountPoint\"];\n        return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(PluginErrorBoundary, { app, plugin }, /* @__PURE__ */ React.createElement(\n          AnalyticsContext,\n          {\n            attributes: {\n              pluginId: plugin.getId(),\n              ...name && { extension: name },\n              ...mountPoint && { routeRef: mountPoint.id }\n            }\n          },\n          /* @__PURE__ */ React.createElement(Component, { ...props })\n        )));\n      };\n      attachComponentData(Result, \"core.plugin\", plugin);\n      attachComponentData(Result, \"core.extensionName\", name);\n      for (const [key, value] of Object.entries(data)) {\n        attachComponentData(Result, key, value);\n      }\n      Result.displayName = `Extension(${componentName})`;\n      return Result;\n    }\n  };\n}\n\nfunction selectChildren(rootNode, featureFlagsApi, selector, strictError) {\n  return Children.toArray(rootNode).flatMap((node) => {\n    if (!isValidElement(node)) {\n      return [];\n    }\n    if (node.type === Fragment) {\n      return selectChildren(\n        node.props.children,\n        featureFlagsApi,\n        selector,\n        strictError\n      );\n    }\n    if (getComponentData(node, \"core.featureFlagged\")) {\n      const props = node.props;\n      const isEnabled = \"with\" in props ? featureFlagsApi.isActive(props.with) : !featureFlagsApi.isActive(props.without);\n      if (isEnabled) {\n        return selectChildren(\n          node.props.children,\n          featureFlagsApi,\n          selector,\n          strictError\n        );\n      }\n      return [];\n    }\n    if (selector === void 0 || selector(node)) {\n      return [node];\n    }\n    if (strictError) {\n      throw new Error(strictError);\n    }\n    return selectChildren(\n      node.props.children,\n      featureFlagsApi,\n      selector,\n      strictError\n    );\n  });\n}\nclass Collection {\n  constructor(node, featureFlagsApi) {\n    this.node = node;\n    this.featureFlagsApi = featureFlagsApi;\n  }\n  selectByComponentData(query) {\n    const selection = selectChildren(\n      this.node,\n      this.featureFlagsApi,\n      (node) => getComponentData(node, query.key) !== void 0,\n      query.withStrictError\n    );\n    return new Collection(selection, this.featureFlagsApi);\n  }\n  findComponentData(query) {\n    const selection = selectChildren(\n      this.node,\n      this.featureFlagsApi,\n      (node) => getComponentData(node, query.key) !== void 0\n    );\n    return selection.map((node) => getComponentData(node, query.key)).filter((data) => data !== void 0);\n  }\n  getElements() {\n    return selectChildren(this.node, this.featureFlagsApi);\n  }\n}\nfunction useElementFilter(node, filterFn, dependencies = []) {\n  const featureFlagsApi = useApi(featureFlagsApiRef);\n  const elements = new Collection(node, featureFlagsApi);\n  return useMemo(() => filterFn(elements), [node, ...dependencies]);\n}\n\nclass PluginImpl {\n  constructor(config) {\n    this.config = config;\n  }\n  getId() {\n    return this.config.id;\n  }\n  getApis() {\n    var _a;\n    return (_a = this.config.apis) != null ? _a : [];\n  }\n  getFeatureFlags() {\n    var _a, _b;\n    return (_b = (_a = this.config.featureFlags) == null ? void 0 : _a.slice()) != null ? _b : [];\n  }\n  get routes() {\n    var _a;\n    return (_a = this.config.routes) != null ? _a : {};\n  }\n  get externalRoutes() {\n    var _a;\n    return (_a = this.config.externalRoutes) != null ? _a : {};\n  }\n  provide(extension) {\n    return extension.expose(this);\n  }\n  toString() {\n    return `plugin{${this.config.id}}`;\n  }\n}\nfunction createPlugin(config) {\n  return new PluginImpl(config);\n}\n\nexport { AnalyticsContext, attachComponentData, createApiFactory, createComponentExtension, createExternalRouteRef, createPlugin, createReactExtension, createRoutableExtension, createRouteRef, createSubRouteRef, getComponentData, useAnalytics, useApp, useElementFilter, useRouteRef, useRouteRefParams };\n//# sourceMappingURL=index.esm.js.map\n","import { serializeError as serializeError$1, deserializeError as deserializeError$1 } from 'serialize-error';\n\nfunction isError(value) {\n  if (typeof value !== \"object\" || value === null || Array.isArray(value)) {\n    return false;\n  }\n  const maybe = value;\n  if (typeof maybe.name !== \"string\" || maybe.name === \"\") {\n    return false;\n  }\n  if (typeof maybe.message !== \"string\") {\n    return false;\n  }\n  return true;\n}\nfunction assertError(value) {\n  if (typeof value !== \"object\" || value === null || Array.isArray(value)) {\n    throw new Error(`Encountered invalid error, not an object, got '${value}'`);\n  }\n  const maybe = value;\n  if (typeof maybe.name !== \"string\" || maybe.name === \"\") {\n    throw new Error(`Encountered error object without a name, got '${value}'`);\n  }\n  if (typeof maybe.message !== \"string\") {\n    throw new Error(\n      `Encountered error object without a message, got '${value}'`\n    );\n  }\n}\n\nfunction serializeError(error, options) {\n  const serialized = serializeError$1(error);\n  const result = {\n    name: \"Unknown\",\n    message: \"<no reason given>\",\n    ...serialized\n  };\n  if (!(options == null ? void 0 : options.includeStack)) {\n    delete result.stack;\n  }\n  return result;\n}\nfunction deserializeError(data) {\n  const result = deserializeError$1(data);\n  if (!data.stack) {\n    result.stack = void 0;\n  }\n  return result;\n}\nfunction stringifyError(error) {\n  if (isError(error)) {\n    const str = String(error);\n    return str !== \"[object Object]\" ? str : `${error.name}: ${error.message}`;\n  }\n  return `unknown error '${error}'`;\n}\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass CustomErrorBase extends Error {\n  constructor(message, cause) {\n    var _a;\n    let fullMessage = message;\n    if (cause !== void 0) {\n      const causeStr = stringifyError(cause);\n      if (fullMessage) {\n        fullMessage += `; caused by ${causeStr}`;\n      } else {\n        fullMessage = `caused by ${causeStr}`;\n      }\n    }\n    super(fullMessage);\n    /**\n     * An inner error that caused this error to be thrown, if any.\n     */\n    __publicField$2(this, \"cause\");\n    (_a = Error.captureStackTrace) == null ? void 0 : _a.call(Error, this, this.constructor);\n    if (!this.name || this.name === \"Error\") {\n      const baseName = this.constructor.name;\n      if (baseName !== \"Error\") {\n        this.name = this.constructor.name;\n      }\n    }\n    this.cause = isError(cause) ? cause : void 0;\n  }\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass InputError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"InputError\");\n  }\n}\nclass AuthenticationError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"AuthenticationError\");\n  }\n}\nclass NotAllowedError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"NotAllowedError\");\n  }\n}\nclass NotFoundError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"NotFoundError\");\n  }\n}\nclass ConflictError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"ConflictError\");\n  }\n}\nclass NotModifiedError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"NotModifiedError\");\n  }\n}\nclass NotImplementedError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"NotImplementedError\");\n  }\n}\nclass ServiceUnavailableError extends CustomErrorBase {\n}\nclass ForwardedError extends CustomErrorBase {\n  constructor(message, cause) {\n    super(message, cause);\n    this.name = isError(cause) ? cause.name : \"Error\";\n  }\n}\n\nasync function parseErrorResponseBody(response) {\n  var _a;\n  try {\n    const text = await response.text();\n    if (text) {\n      if ((_a = response.headers.get(\"content-type\")) == null ? void 0 : _a.startsWith(\"application/json\")) {\n        try {\n          const body = JSON.parse(text);\n          if (body.error && body.response) {\n            return body;\n          }\n        } catch {\n        }\n      }\n      return {\n        error: {\n          name: \"Error\",\n          message: `Request failed with status ${response.status} ${response.statusText}, ${text}`\n        },\n        response: {\n          statusCode: response.status\n        }\n      };\n    }\n  } catch {\n  }\n  return {\n    error: {\n      name: \"Error\",\n      message: `Request failed with status ${response.status} ${response.statusText}`\n    },\n    response: {\n      statusCode: response.status\n    }\n  };\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ResponseError extends Error {\n  constructor(props) {\n    super(props.message);\n    /**\n     * The actual response, as seen by the client.\n     *\n     * Note that the body of this response is always consumed. Its parsed form is\n     * in the `body` field.\n     */\n    __publicField(this, \"response\");\n    /**\n     * The parsed JSON error body, as sent by the server.\n     */\n    __publicField(this, \"body\");\n    /**\n     * The Error cause, as seen by the remote server. This is parsed out of the\n     * JSON error body.\n     *\n     * This error always has the plain Error constructor, however all\n     * serializable enumerable fields on the remote error including its name are\n     * preserved. Therefore, if you want to check the error type, use its name\n     * property rather than checking typeof or its constructor or prototype.\n     */\n    __publicField(this, \"cause\");\n    this.name = \"ResponseError\";\n    this.response = props.response;\n    this.body = props.data;\n    this.cause = props.cause;\n  }\n  /**\n   * Constructs a ResponseError based on a failed response.\n   *\n   * Assumes that the response has already been checked to be not ok. This\n   * function consumes the body of the response, and assumes that it hasn't\n   * been consumed before.\n   */\n  static async fromResponse(response) {\n    const data = await parseErrorResponseBody(response);\n    const status = data.response.statusCode || response.status;\n    const statusText = data.error.name || response.statusText;\n    const message = `Request failed with ${status} ${statusText}`;\n    const cause = deserializeError(data.error);\n    return new ResponseError({\n      message,\n      response,\n      data,\n      cause\n    });\n  }\n}\n\nexport { AuthenticationError, ConflictError, CustomErrorBase, ForwardedError, InputError, NotAllowedError, NotFoundError, NotImplementedError, NotModifiedError, ResponseError, ServiceUnavailableError, assertError, deserializeError, isError, parseErrorResponseBody, serializeError, stringifyError };\n//# sourceMappingURL=index.esm.js.map\n","import { createApiRef, createApiFactory, githubAuthApiRef, gitlabAuthApiRef, microsoftAuthApiRef, bitbucketAuthApiRef, useApp } from '@backstage/core-plugin-api';\nimport { ScmIntegrations } from '@backstage/integration';\nimport CodeIcon from '@material-ui/icons/Code';\nimport React from 'react';\n\nconst scmAuthApiRef = createApiRef({\n  id: \"core.scmauth\"\n});\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _providers, _api, _host, _scopeMapping, _providerName;\nclass ScmAuthMux {\n  constructor(providers) {\n    __privateAdd(this, _providers, void 0);\n    __privateSet(this, _providers, providers);\n  }\n  async getCredentials(options) {\n    const url = new URL(options.url);\n    const provider = __privateGet(this, _providers).find((p) => p.isUrlSupported(url));\n    if (!provider) {\n      throw new Error(\n        `No auth provider available for '${options.url}', see https://backstage.io/link?scm-auth`\n      );\n    }\n    return provider.getCredentials(options);\n  }\n}\n_providers = new WeakMap();\nconst _ScmAuth = class _ScmAuth {\n  constructor(providerName, api, host, scopeMapping) {\n    __privateAdd(this, _api, void 0);\n    __privateAdd(this, _host, void 0);\n    __privateAdd(this, _scopeMapping, void 0);\n    __privateAdd(this, _providerName, void 0);\n    __privateSet(this, _api, api);\n    __privateSet(this, _host, host);\n    __privateSet(this, _scopeMapping, scopeMapping);\n    __privateSet(this, _providerName, providerName);\n  }\n  /**\n   * Creates an API factory that enables auth for each of the default SCM providers.\n   */\n  static createDefaultApiFactory() {\n    return createApiFactory({\n      api: scmAuthApiRef,\n      deps: {\n        github: githubAuthApiRef,\n        gitlab: gitlabAuthApiRef,\n        azure: microsoftAuthApiRef,\n        bitbucket: bitbucketAuthApiRef\n      },\n      factory: ({ github, gitlab, azure, bitbucket }) => _ScmAuth.merge(\n        _ScmAuth.forGithub(github),\n        _ScmAuth.forGitlab(gitlab),\n        _ScmAuth.forAzure(azure),\n        _ScmAuth.forBitbucket(bitbucket)\n      )\n    });\n  }\n  /**\n   * Creates a general purpose ScmAuth instance with a custom scope mapping.\n   */\n  static forAuthApi(authApi, options) {\n    return new _ScmAuth(\"generic\", authApi, options.host, options.scopeMapping);\n  }\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards GitHub.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `github.com`.\n   *\n   * The default scopes are:\n   *\n   * `repo read:org read:user`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `gist`\n   */\n  static forGithub(githubAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"github.com\";\n    return new _ScmAuth(\"github\", githubAuthApi, host, {\n      default: [\"repo\", \"read:org\", \"read:user\"],\n      repoWrite: [\"gist\"]\n    });\n  }\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards GitLab.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `gitlab.com`.\n   *\n   * The default scopes are:\n   *\n   * `read_user read_api read_repository`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `write_repository api`\n   */\n  static forGitlab(gitlabAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"gitlab.com\";\n    return new _ScmAuth(\"gitlab\", gitlabAuthApi, host, {\n      default: [\"read_user\", \"read_api\", \"read_repository\"],\n      repoWrite: [\"write_repository\", \"api\"]\n    });\n  }\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards Azure.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `dev.azure.com`.\n   *\n   * The default scopes are:\n   *\n   * `vso.build vso.code vso.graph vso.project vso.profile`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `vso.code_manage`\n   */\n  static forAzure(microsoftAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"dev.azure.com\";\n    return new _ScmAuth(\"azure\", microsoftAuthApi, host, {\n      default: [\n        \"vso.build\",\n        \"vso.code\",\n        \"vso.graph\",\n        \"vso.project\",\n        \"vso.profile\"\n      ],\n      repoWrite: [\"vso.code_manage\"]\n    });\n  }\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards Bitbucket.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `bitbucket.org`.\n   *\n   * The default scopes are:\n   *\n   * `account team pullrequest snippet issue`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `pullrequest:write snippet:write issue:write`\n   */\n  static forBitbucket(bitbucketAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"bitbucket.org\";\n    return new _ScmAuth(\"bitbucket\", bitbucketAuthApi, host, {\n      default: [\"account\", \"team\", \"pullrequest\", \"snippet\", \"issue\"],\n      repoWrite: [\"pullrequest:write\", \"snippet:write\", \"issue:write\"]\n    });\n  }\n  /**\n   * Merges together multiple ScmAuth instances into one that\n   * routes requests to the correct instance based on the URL.\n   */\n  static merge(...providers) {\n    return new ScmAuthMux(providers);\n  }\n  /**\n   * Checks whether the implementation is able to provide authentication for the given URL.\n   */\n  isUrlSupported(url) {\n    return url.host === __privateGet(this, _host);\n  }\n  getAdditionalScopesForProvider(additionalScopes) {\n    var _a, _b;\n    if (!(additionalScopes == null ? void 0 : additionalScopes.customScopes) || __privateGet(this, _providerName) === \"generic\") {\n      return [];\n    }\n    return (_b = (_a = additionalScopes.customScopes) == null ? void 0 : _a[__privateGet(this, _providerName)]) != null ? _b : [];\n  }\n  /**\n   * Fetches credentials for the given resource.\n   */\n  async getCredentials(options) {\n    const { url, additionalScope, ...restOptions } = options;\n    const scopes = __privateGet(this, _scopeMapping).default.slice();\n    if (additionalScope == null ? void 0 : additionalScope.repoWrite) {\n      scopes.push(...__privateGet(this, _scopeMapping).repoWrite);\n    }\n    const additionalScopes = this.getAdditionalScopesForProvider(additionalScope);\n    if (additionalScopes.length) {\n      scopes.push(...additionalScopes);\n    }\n    const uniqueScopes = [...new Set(scopes)];\n    const token = await __privateGet(this, _api).getAccessToken(uniqueScopes, restOptions);\n    return {\n      token,\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n  }\n};\n_api = new WeakMap();\n_host = new WeakMap();\n_scopeMapping = new WeakMap();\n_providerName = new WeakMap();\nlet ScmAuth = _ScmAuth;\n\nclass ScmIntegrationsApi {\n  /**\n   * Instantiates an {@link @backstage/integration#ScmIntegrationRegistry}.\n   *\n   * @param config - The root of the config hierarchy.\n   */\n  static fromConfig(config) {\n    return ScmIntegrations.fromConfig(config);\n  }\n}\nconst scmIntegrationsApiRef = createApiRef({\n  id: \"integration.scmintegrations\"\n});\n\nconst ScmIntegrationIcon = (props) => {\n  var _a;\n  const { type } = props;\n  const app = useApp();\n  const DefaultIcon = CodeIcon;\n  const Icon = type ? (_a = app.getSystemIcon(type)) != null ? _a : DefaultIcon : DefaultIcon;\n  return /* @__PURE__ */ React.createElement(Icon, null);\n};\n\nexport { ScmAuth, ScmIntegrationIcon, ScmIntegrationsApi, scmAuthApiRef, scmIntegrationsApiRef };\n//# sourceMappingURL=index.esm.js.map\n","import parseGitUrl from 'git-url-parse';\nimport { trimEnd, trimStart } from 'lodash';\nimport { ManagedIdentityCredential, ClientSecretCredential, DefaultAzureCredential } from '@azure/identity';\nimport fetch from 'cross-fetch';\nimport { createAppAuth } from '@octokit/auth-app';\nimport { Octokit } from '@octokit/rest';\nimport { DateTime } from 'luxon';\n\nfunction isValidHost(host) {\n  const check = new URL(\"http://example.com\");\n  check.host = host;\n  return check.host === host;\n}\nfunction isValidUrl(url) {\n  try {\n    new URL(url);\n    return true;\n  } catch {\n    return false;\n  }\n}\nfunction basicIntegrations(integrations, getHost) {\n  return {\n    list() {\n      return integrations;\n    },\n    byUrl(url) {\n      try {\n        const parsed = typeof url === \"string\" ? new URL(url) : url;\n        return integrations.find((i) => getHost(i) === parsed.host);\n      } catch {\n        return void 0;\n      }\n    },\n    byHost(host) {\n      return integrations.find((i) => getHost(i) === host);\n    }\n  };\n}\nfunction defaultScmResolveUrl(options) {\n  const { url, base, lineNumber } = options;\n  try {\n    new URL(url);\n    return url;\n  } catch {\n  }\n  let updated;\n  if (url.startsWith(\"/\")) {\n    const { filepath } = parseGitUrl(base);\n    updated = new URL(base);\n    const repoRootPath = trimEnd(\n      updated.pathname.substring(0, updated.pathname.length - filepath.length),\n      \"/\"\n    );\n    updated.pathname = `${repoRootPath}${url}`;\n  } else {\n    updated = new URL(url, base);\n  }\n  updated.search = new URL(base).search;\n  if (lineNumber) {\n    updated.hash = `L${lineNumber}`;\n  }\n  return updated.toString();\n}\n\nconst AMAZON_AWS_HOST = \"amazonaws.com\";\nfunction readAwsS3IntegrationConfig(config) {\n  var _a, _b;\n  const endpoint = config.getOptionalString(\"endpoint\");\n  const s3ForcePathStyle = (_a = config.getOptionalBoolean(\"s3ForcePathStyle\")) != null ? _a : false;\n  let host;\n  let pathname;\n  if (endpoint) {\n    try {\n      const url = new URL(endpoint);\n      host = url.host;\n      pathname = url.pathname;\n    } catch {\n      throw new Error(\n        `invalid awsS3 integration config, endpoint '${endpoint}' is not a valid URL`\n      );\n    }\n    if (pathname !== \"/\") {\n      throw new Error(\n        `invalid awsS3 integration config, endpoints cannot contain path, got '${endpoint}'`\n      );\n    }\n  } else {\n    host = AMAZON_AWS_HOST;\n  }\n  const accessKeyId = config.getOptionalString(\"accessKeyId\");\n  const secretAccessKey = (_b = config.getOptionalString(\"secretAccessKey\")) == null ? void 0 : _b.trim();\n  const roleArn = config.getOptionalString(\"roleArn\");\n  const externalId = config.getOptionalString(\"externalId\");\n  return {\n    host,\n    endpoint,\n    s3ForcePathStyle,\n    accessKeyId,\n    secretAccessKey,\n    roleArn,\n    externalId\n  };\n}\nfunction readAwsS3IntegrationConfigs(configs) {\n  const result = configs.map(readAwsS3IntegrationConfig);\n  if (!result.some((c) => c.host === AMAZON_AWS_HOST)) {\n    result.push({\n      host: AMAZON_AWS_HOST\n    });\n  }\n  return result;\n}\n\nvar __defProp$d = Object.defineProperty;\nvar __defNormalProp$d = (obj, key, value) => key in obj ? __defProp$d(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$d = (obj, key, value) => {\n  __defNormalProp$d(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _AwsS3Integration = class _AwsS3Integration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"awsS3\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const resolved = defaultScmResolveUrl(options);\n    return resolved;\n  }\n  resolveEditUrl(url) {\n    return url;\n  }\n};\n__publicField$d(_AwsS3Integration, \"factory\", ({ config }) => {\n  var _a;\n  const configs = readAwsS3IntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.awsS3\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _AwsS3Integration(c)),\n    (i) => i.config.host\n  );\n});\nlet AwsS3Integration = _AwsS3Integration;\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _origin, _owner, _project, _repo, _path, _ref, _baseUrl;\nconst VERSION_PREFIX_GIT_BRANCH = \"GB\";\nconst _AzureUrl = class _AzureUrl {\n  constructor(origin, owner, project, repo, path, ref) {\n    __privateAdd(this, _origin, void 0);\n    __privateAdd(this, _owner, void 0);\n    __privateAdd(this, _project, void 0);\n    __privateAdd(this, _repo, void 0);\n    __privateAdd(this, _path, void 0);\n    __privateAdd(this, _ref, void 0);\n    __privateAdd(this, _baseUrl, (...parts) => {\n      const url = new URL(__privateGet(this, _origin));\n      url.pathname = parts.map((part) => encodeURIComponent(part)).join(\"/\");\n      return url;\n    });\n    __privateSet(this, _origin, origin);\n    __privateSet(this, _owner, owner);\n    __privateSet(this, _project, project);\n    __privateSet(this, _repo, repo);\n    __privateSet(this, _path, path);\n    __privateSet(this, _ref, ref);\n  }\n  /**\n   * Parses an azure URL as copied from the browser address bar.\n   *\n   * Throws an error if the URL is not a valid azure repo URL.\n   */\n  static fromRepoUrl(repoUrl) {\n    var _a;\n    const url = new URL(repoUrl);\n    let owner;\n    let project;\n    let repo;\n    const parts = url.pathname.split(\"/\").map((part) => decodeURIComponent(part));\n    if (parts[2] === \"_git\") {\n      owner = parts[1];\n      project = repo = parts[3];\n    } else if (parts[3] === \"_git\") {\n      owner = parts[1];\n      project = parts[2];\n      repo = parts[4];\n    } else if (parts[4] === \"_git\") {\n      owner = `${parts[1]}/${parts[2]}`;\n      project = parts[3];\n      repo = parts[5];\n    }\n    if (!owner || !project || !repo) {\n      throw new Error(\"Azure URL must point to a git repository\");\n    }\n    const path = (_a = url.searchParams.get(\"path\")) != null ? _a : void 0;\n    let ref;\n    const version = url.searchParams.get(\"version\");\n    if (version) {\n      const prefix = version.slice(0, 2);\n      if (prefix !== \"GB\") {\n        throw new Error(\"Azure URL version must point to a git branch\");\n      }\n      ref = version.slice(2);\n    }\n    return new _AzureUrl(url.origin, owner, project, repo, path, ref);\n  }\n  /**\n   * Returns a repo URL that can be used to navigate to the resource in azure.\n   *\n   * Throws an error if the URL is not a valid azure repo URL.\n   */\n  toRepoUrl() {\n    let url;\n    if (__privateGet(this, _project) === __privateGet(this, _repo)) {\n      url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), \"_git\", __privateGet(this, _repo));\n    } else {\n      url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_git\", __privateGet(this, _repo));\n    }\n    if (__privateGet(this, _path)) {\n      url.searchParams.set(\"path\", __privateGet(this, _path));\n    }\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"version\", VERSION_PREFIX_GIT_BRANCH + __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  /**\n   * Returns the file download URL for this azure resource.\n   *\n   * Throws an error if the URL does not point to a file.\n   */\n  toFileUrl() {\n    if (!__privateGet(this, _path)) {\n      throw new Error(\n        \"Azure URL must point to a specific path to be able to download a file\"\n      );\n    }\n    const url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_apis\", \"git\", \"repositories\", __privateGet(this, _repo), \"items\");\n    url.searchParams.set(\"api-version\", \"6.0\");\n    url.searchParams.set(\"path\", __privateGet(this, _path));\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"version\", __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  /**\n   * Returns the archive download URL for this azure resource.\n   *\n   * Throws an error if the URL does not point to a repo.\n   */\n  toArchiveUrl() {\n    const url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_apis\", \"git\", \"repositories\", __privateGet(this, _repo), \"items\");\n    url.searchParams.set(\"recursionLevel\", \"full\");\n    url.searchParams.set(\"download\", \"true\");\n    url.searchParams.set(\"api-version\", \"6.0\");\n    if (__privateGet(this, _path)) {\n      url.searchParams.set(\"scopePath\", __privateGet(this, _path));\n    }\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"version\", __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  /**\n   * Returns the API url for fetching commits from a branch for this azure resource.\n   *\n   * Throws an error if the URL does not point to a commit.\n   */\n  toCommitsUrl() {\n    const url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_apis\", \"git\", \"repositories\", __privateGet(this, _repo), \"commits\");\n    url.searchParams.set(\"api-version\", \"6.0\");\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"searchCriteria.itemVersion.version\", __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  /**\n   * Returns the name of the owner, a user or an organization.\n   */\n  getOwner() {\n    return __privateGet(this, _owner);\n  }\n  /**\n   * Returns the name of the project.\n   */\n  getProject() {\n    return __privateGet(this, _project);\n  }\n  /**\n   * Returns the name of the repo.\n   */\n  getRepo() {\n    return __privateGet(this, _repo);\n  }\n  /**\n   * Returns the file path within the repo if the URL contains one.\n   */\n  getPath() {\n    return __privateGet(this, _path);\n  }\n  /**\n   * Returns the git ref in the repo if the URL contains one.\n   */\n  getRef() {\n    return __privateGet(this, _ref);\n  }\n};\n_origin = new WeakMap();\n_owner = new WeakMap();\n_project = new WeakMap();\n_repo = new WeakMap();\n_path = new WeakMap();\n_ref = new WeakMap();\n_baseUrl = new WeakMap();\nlet AzureUrl = _AzureUrl;\n\nconst AZURE_HOST = \"dev.azure.com\";\nconst AzureDevOpsCredentialFields = [\n  \"clientId\",\n  \"clientSecret\",\n  \"tenantId\",\n  \"personalAccessToken\"\n];\nconst AzureDevopsCredentialFieldMap = /* @__PURE__ */ new Map([\n  [\"ClientSecret\", [\"clientId\", \"clientSecret\", \"tenantId\"]],\n  [\"ManagedIdentity\", [\"clientId\"]],\n  [\"PersonalAccessToken\", [\"personalAccessToken\"]]\n]);\nfunction asAzureDevOpsCredential(credential) {\n  for (const entry of AzureDevopsCredentialFieldMap.entries()) {\n    const [kind, requiredFields] = entry;\n    const forbiddenFields = AzureDevOpsCredentialFields.filter(\n      (field) => !requiredFields.includes(field)\n    );\n    if (requiredFields.every((field) => credential[field] !== void 0) && forbiddenFields.every((field) => credential[field] === void 0)) {\n      return {\n        kind,\n        organizations: credential.organizations,\n        ...requiredFields.reduce((acc, field) => {\n          acc[field] = credential[field];\n          return acc;\n        }, {})\n      };\n    }\n  }\n  throw new Error(\"is not a valid credential\");\n}\nfunction readAzureIntegrationConfig(config) {\n  var _a, _b, _c, _d, _e, _f, _g;\n  const host = (_a = config.getOptionalString(\"host\")) != null ? _a : AZURE_HOST;\n  let credentialConfigs = (_b = config.getOptionalConfigArray(\"credentials\")) == null ? void 0 : _b.map((credential) => {\n    var _a2, _b2;\n    const result = {\n      organizations: credential.getOptionalStringArray(\"organizations\"),\n      personalAccessToken: (_a2 = credential.getOptionalString(\"personalAccessToken\")) == null ? void 0 : _a2.trim(),\n      tenantId: credential.getOptionalString(\"tenantId\"),\n      clientId: credential.getOptionalString(\"clientId\"),\n      clientSecret: (_b2 = credential.getOptionalString(\"clientSecret\")) == null ? void 0 : _b2.trim()\n    };\n    return result;\n  });\n  const token = (_c = config.getOptionalString(\"token\")) == null ? void 0 : _c.trim();\n  if (config.getOptional(\"credential\") !== void 0 && config.getOptional(\"credentials\") !== void 0) {\n    throw new Error(\n      `Invalid Azure integration config, 'credential' and 'credentials' cannot be used together. Use 'credentials' instead.`\n    );\n  }\n  if (config.getOptional(\"token\") !== void 0 && config.getOptional(\"credentials\") !== void 0) {\n    throw new Error(\n      `Invalid Azure integration config, 'token' and 'credentials' cannot be used together. Use 'credentials' instead.`\n    );\n  }\n  if (token !== void 0) {\n    const mapped = [{ personalAccessToken: token }];\n    credentialConfigs = (_d = credentialConfigs == null ? void 0 : credentialConfigs.concat(mapped)) != null ? _d : mapped;\n  }\n  if (config.getOptional(\"credential\") !== void 0) {\n    const mapped = [\n      {\n        organizations: config.getOptionalStringArray(\n          \"credential.organizations\"\n        ),\n        token: (_e = config.getOptionalString(\"credential.token\")) == null ? void 0 : _e.trim(),\n        tenantId: config.getOptionalString(\"credential.tenantId\"),\n        clientId: config.getOptionalString(\"credential.clientId\"),\n        clientSecret: (_f = config.getOptionalString(\"credential.clientSecret\")) == null ? void 0 : _f.trim()\n      }\n    ];\n    credentialConfigs = (_g = credentialConfigs == null ? void 0 : credentialConfigs.concat(mapped)) != null ? _g : mapped;\n  }\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Azure integration config, '${host}' is not a valid host`\n    );\n  }\n  let credentials = void 0;\n  if (credentialConfigs !== void 0) {\n    const errors = credentialConfigs == null ? void 0 : credentialConfigs.reduce((acc, credentialConfig, index) => {\n      let error = void 0;\n      try {\n        asAzureDevOpsCredential(credentialConfig);\n      } catch (e) {\n        error = e.message;\n      }\n      if (error !== void 0) {\n        acc.push(`credential at position ${index + 1} ${error}`);\n      }\n      return acc;\n    }, Array.of()).concat(\n      Object.entries(\n        credentialConfigs.filter(\n          (credential) => credential.organizations !== void 0 && credential.organizations.length > 0\n        ).reduce((acc, credential, index) => {\n          var _a2;\n          (_a2 = credential.organizations) == null ? void 0 : _a2.forEach((organization) => {\n            if (!acc[organization]) {\n              acc[organization] = [];\n            }\n            acc[organization].push(index + 1);\n          });\n          return acc;\n        }, {})\n      ).filter(([_, indexes]) => indexes.length > 1).reduce((acc, [org, indexes]) => {\n        acc.push(\n          `organization ${org} is specified multiple times in credentials at positions ${indexes.slice(0, indexes.length - 1).join(\", \")} and ${indexes[indexes.length - 1]}`\n        );\n        return acc;\n      }, Array.of())\n    );\n    if ((errors == null ? void 0 : errors.length) > 0) {\n      throw new Error(\n        `Invalid Azure integration config for ${host}: ${errors.join(\"; \")}`\n      );\n    }\n    credentials = credentialConfigs.map(\n      (credentialConfig) => asAzureDevOpsCredential(credentialConfig)\n    );\n    if (credentials.some(\n      (credential) => credential.kind !== \"PersonalAccessToken\"\n    ) && host !== AZURE_HOST) {\n      throw new Error(\n        `Invalid Azure integration config for ${host}, only personal access tokens can be used with hosts other than ${AZURE_HOST}`\n      );\n    }\n    if (credentials.filter(\n      (credential) => credential.organizations === void 0 || credential.organizations.length === 0\n    ).length > 1) {\n      throw new Error(\n        `Invalid Azure integration config for ${host}, you cannot specify multiple credentials without organizations`\n      );\n    }\n  }\n  return {\n    host,\n    credentials\n  };\n}\nfunction readAzureIntegrationConfigs(configs) {\n  const result = configs.map(readAzureIntegrationConfig);\n  if (!result.some((c) => c.host === AZURE_HOST)) {\n    result.push({ host: AZURE_HOST });\n  }\n  return result;\n}\n\nvar __defProp$c = Object.defineProperty;\nvar __defNormalProp$c = (obj, key, value) => key in obj ? __defProp$c(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$c = (obj, key, value) => {\n  __defNormalProp$c(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _AzureIntegration = class _AzureIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"azure\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  /*\n   * Azure repo URLs on the form with a `path` query param are treated specially.\n   *\n   * Example base URL: https://dev.azure.com/organization/project/_git/repository?path=%2Fcatalog-info.yaml\n   */\n  resolveUrl(options) {\n    var _a;\n    const { url, base } = options;\n    if (isValidUrl(url)) {\n      return url;\n    }\n    try {\n      const azureUrl = AzureUrl.fromRepoUrl(base);\n      const newUrl = new URL(base);\n      const mockBaseUrl = new URL(`https://a.com${(_a = azureUrl.getPath()) != null ? _a : \"\"}`);\n      const updatedPath = new URL(url, mockBaseUrl).pathname;\n      newUrl.searchParams.set(\"path\", updatedPath);\n      if (options.lineNumber) {\n        newUrl.searchParams.set(\"line\", String(options.lineNumber));\n        newUrl.searchParams.set(\"lineEnd\", String(options.lineNumber + 1));\n        newUrl.searchParams.set(\"lineStartColumn\", \"1\");\n        newUrl.searchParams.set(\"lineEndColumn\", \"1\");\n      }\n      return newUrl.toString();\n    } catch {\n      return new URL(url, base).toString();\n    }\n  }\n  resolveEditUrl(url) {\n    return url;\n  }\n};\n__publicField$c(_AzureIntegration, \"factory\", ({ config }) => {\n  var _a;\n  const configs = readAzureIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.azure\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _AzureIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet AzureIntegration = _AzureIntegration;\n\nfunction getAzureFileFetchUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toFileUrl();\n}\nfunction getAzureDownloadUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toArchiveUrl();\n}\nfunction getAzureCommitsUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toCommitsUrl();\n}\n\nvar __defProp$b = Object.defineProperty;\nvar __defNormalProp$b = (obj, key, value) => key in obj ? __defProp$b(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$b = (obj, key, value) => {\n  __defNormalProp$b(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst tenMinutes = 1e3 * 60 * 10;\nclass CachedAzureDevOpsCredentialsProvider {\n  constructor(credential) {\n    this.credential = credential;\n    __publicField$b(this, \"azureDevOpsScope\", \"499b84ac-1321-427f-aa17-267ca6975798/.default\");\n    __publicField$b(this, \"cached\");\n  }\n  static fromAzureDevOpsCredential(credential) {\n    switch (credential.kind) {\n      case \"PersonalAccessToken\":\n        return CachedAzureDevOpsCredentialsProvider.fromPersonalAccessTokenCredential(\n          credential\n        );\n      case \"ClientSecret\":\n        return CachedAzureDevOpsCredentialsProvider.fromTokenCredential(\n          new ClientSecretCredential(\n            credential.tenantId,\n            credential.clientId,\n            credential.clientSecret\n          )\n        );\n      case \"ManagedIdentity\":\n        return CachedAzureDevOpsCredentialsProvider.fromTokenCredential(\n          new ManagedIdentityCredential(credential.clientId)\n        );\n      default:\n        throw new Error(\n          `Credential kind '${credential.kind}' not supported`\n        );\n    }\n  }\n  static fromTokenCredential(credential) {\n    return new CachedAzureDevOpsCredentialsProvider(credential);\n  }\n  static fromPersonalAccessTokenCredential(credential) {\n    return new CachedAzureDevOpsCredentialsProvider(\n      credential.personalAccessToken\n    );\n  }\n  async getCredentials() {\n    if (this.cached === void 0 || this.cached.expiresAt !== void 0 && Date.now() > this.cached.expiresAt) {\n      if (typeof this.credential === \"string\") {\n        this.cached = {\n          headers: {\n            Authorization: `Basic ${btoa(`:${this.credential}`)}`\n          },\n          type: \"pat\",\n          token: this.credential\n        };\n      } else {\n        const accessToken = await this.credential.getToken(\n          this.azureDevOpsScope\n        );\n        if (!accessToken) {\n          throw new Error(\"Failed to retrieve access token\");\n        }\n        this.cached = {\n          expiresAt: accessToken.expiresOnTimestamp - tenMinutes,\n          headers: {\n            Authorization: `Bearer ${accessToken.token}`\n          },\n          type: \"bearer\",\n          token: accessToken.token\n        };\n      }\n    }\n    return this.cached;\n  }\n}\n\nclass DefaultAzureDevOpsCredentialsProvider {\n  constructor(providers) {\n    this.providers = providers;\n  }\n  static fromIntegrations(integrations) {\n    const providers = integrations.azure.list().reduce((acc, integration) => {\n      var _a;\n      (_a = integration.config.credentials) == null ? void 0 : _a.forEach((credential) => {\n        var _a2;\n        if (credential.organizations === void 0 || credential.organizations.length === 0) {\n          if (acc.get(integration.config.host) === void 0) {\n            acc.set(\n              integration.config.host,\n              CachedAzureDevOpsCredentialsProvider.fromAzureDevOpsCredential(\n                credential\n              )\n            );\n          }\n        } else {\n          const provider = CachedAzureDevOpsCredentialsProvider.fromAzureDevOpsCredential(\n            credential\n          );\n          (_a2 = credential.organizations) == null ? void 0 : _a2.forEach((organization) => {\n            acc.set(`${integration.config.host}/${organization}`, provider);\n          });\n        }\n      });\n      if (integration.config.host === \"dev.azure.com\" && acc.get(integration.config.host) === void 0) {\n        acc.set(\n          integration.config.host,\n          CachedAzureDevOpsCredentialsProvider.fromTokenCredential(\n            new DefaultAzureCredential()\n          )\n        );\n      }\n      return acc;\n    }, /* @__PURE__ */ new Map());\n    return new DefaultAzureDevOpsCredentialsProvider(providers);\n  }\n  forAzureDevOpsServerOrganization(url) {\n    const parts = url.pathname.split(\"/\").filter((part) => part !== \"\");\n    if (url.host !== \"dev.azure.com\" && parts.length > 0) {\n      if (parts[0] !== \"tfs\") {\n        return this.providers.get(`${url.host}/${parts[0]}`);\n      } else if (parts[0] === \"tfs\" && parts.length > 1) {\n        return this.providers.get(`${url.host}/${parts[1]}`);\n      }\n    }\n    return void 0;\n  }\n  forAzureDevOpsOrganization(url) {\n    const parts = url.pathname.split(\"/\").filter((part) => part !== \"\");\n    if (url.host === \"dev.azure.com\" && parts.length > 0) {\n      return this.providers.get(`${url.host}/${parts[0]}`);\n    }\n    return void 0;\n  }\n  forHost(url) {\n    return this.providers.get(url.host);\n  }\n  async getCredentials(opts) {\n    var _a, _b;\n    const url = new URL(opts.url);\n    const provider = (_b = (_a = this.forAzureDevOpsOrganization(url)) != null ? _a : this.forAzureDevOpsServerOrganization(url)) != null ? _b : this.forHost(url);\n    if (provider === void 0) {\n      return void 0;\n    }\n    return provider.getCredentials(opts);\n  }\n}\n\nasync function getAzureRequestOptions(config, additionalHeaders) {\n  var _a;\n  const headers = additionalHeaders ? { ...additionalHeaders } : {};\n  const credentialConfig = (_a = config.credentials) == null ? void 0 : _a.filter(\n    (credential) => credential.organizations === void 0 || credential.organizations.length === 0\n  )[0];\n  if (credentialConfig) {\n    const credentialsProvider = CachedAzureDevOpsCredentialsProvider.fromAzureDevOpsCredential(\n      credentialConfig\n    );\n    const credentials = await credentialsProvider.getCredentials();\n    return {\n      headers: {\n        ...credentials == null ? void 0 : credentials.headers,\n        ...headers\n      }\n    };\n  }\n  return { headers };\n}\n\nconst BITBUCKET_HOST = \"bitbucket.org\";\nconst BITBUCKET_API_BASE_URL = \"https://api.bitbucket.org/2.0\";\nfunction readBitbucketIntegrationConfig(config) {\n  var _a, _b, _c;\n  const host = (_a = config.getOptionalString(\"host\")) != null ? _a : BITBUCKET_HOST;\n  let apiBaseUrl = config.getOptionalString(\"apiBaseUrl\");\n  const token = (_b = config.getOptionalString(\"token\")) == null ? void 0 : _b.trim();\n  const username = config.getOptionalString(\"username\");\n  const appPassword = (_c = config.getOptionalString(\"appPassword\")) == null ? void 0 : _c.trim();\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Bitbucket integration config, '${host}' is not a valid host`\n    );\n  }\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, \"/\");\n  } else if (host === BITBUCKET_HOST) {\n    apiBaseUrl = BITBUCKET_API_BASE_URL;\n  } else {\n    apiBaseUrl = `https://${host}/rest/api/1.0`;\n  }\n  return {\n    host,\n    apiBaseUrl,\n    token,\n    username,\n    appPassword\n  };\n}\nfunction readBitbucketIntegrationConfigs(configs) {\n  const result = configs.map(readBitbucketIntegrationConfig);\n  if (!result.some((c) => c.host === BITBUCKET_HOST)) {\n    result.push({\n      host: BITBUCKET_HOST,\n      apiBaseUrl: BITBUCKET_API_BASE_URL\n    });\n  }\n  return result;\n}\n\nvar __defProp$a = Object.defineProperty;\nvar __defNormalProp$a = (obj, key, value) => key in obj ? __defProp$a(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$a = (obj, key, value) => {\n  __defNormalProp$a(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _BitbucketIntegration = class _BitbucketIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"bitbucket\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const resolved = defaultScmResolveUrl(options);\n    if (!options.lineNumber) {\n      return resolved;\n    }\n    const url = new URL(resolved);\n    if (this.integrationConfig.host === \"bitbucket.org\") {\n      url.hash = `lines-${options.lineNumber}`;\n    } else {\n      url.hash = `${options.lineNumber}`;\n    }\n    return url.toString();\n  }\n  resolveEditUrl(url) {\n    const urlData = parseGitUrl(url);\n    const editUrl = new URL(url);\n    editUrl.searchParams.set(\"mode\", \"edit\");\n    editUrl.searchParams.set(\"spa\", \"0\");\n    editUrl.searchParams.set(\"at\", urlData.ref);\n    return editUrl.toString();\n  }\n};\n__publicField$a(_BitbucketIntegration, \"factory\", ({\n  config\n}) => {\n  var _a, _b, _c;\n  const configs = readBitbucketIntegrationConfigs(\n    (_c = config.getOptionalConfigArray(\"integrations.bitbucket\")) != null ? _c : [\n      // if integrations.bitbucket was not used assume the use was migrated to the new configs\n      // and backport for the deprecated integration to be usable for other parts of the system\n      // until these got migrated\n      ...(_a = config.getOptionalConfigArray(\"integrations.bitbucketCloud\")) != null ? _a : [],\n      ...(_b = config.getOptionalConfigArray(\"integrations.bitbucketServer\")) != null ? _b : []\n    ]\n  );\n  return basicIntegrations(\n    configs.map((c) => new _BitbucketIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet BitbucketIntegration = _BitbucketIntegration;\n\nasync function getBitbucketDefaultBranch(url, config) {\n  const { name: repoName, owner: project, resource } = parseGitUrl(url);\n  const isHosted = resource === \"bitbucket.org\";\n  let branchUrl = isHosted ? `${config.apiBaseUrl}/repositories/${project}/${repoName}` : `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/default-branch`;\n  let response = await fetch(branchUrl, getBitbucketRequestOptions(config));\n  if (response.status === 404 && !isHosted) {\n    branchUrl = `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/branches/default`;\n    response = await fetch(branchUrl, getBitbucketRequestOptions(config));\n  }\n  if (!response.ok) {\n    const message = `Failed to retrieve default branch from ${branchUrl}, ${response.status} ${response.statusText}`;\n    throw new Error(message);\n  }\n  let defaultBranch;\n  if (isHosted) {\n    const repoInfo = await response.json();\n    defaultBranch = repoInfo.mainbranch.name;\n  } else {\n    const { displayId } = await response.json();\n    defaultBranch = displayId;\n  }\n  if (!defaultBranch) {\n    throw new Error(\n      `Failed to read default branch from ${branchUrl}. Response ${response.status} ${response.json()}`\n    );\n  }\n  return defaultBranch;\n}\nasync function getBitbucketDownloadUrl(url, config) {\n  const {\n    name: repoName,\n    owner: project,\n    ref,\n    protocol,\n    resource,\n    filepath\n  } = parseGitUrl(url);\n  const isHosted = resource === \"bitbucket.org\";\n  let branch = ref;\n  if (!branch) {\n    branch = await getBitbucketDefaultBranch(url, config);\n  }\n  const path = filepath ? `&path=${encodeURIComponent(decodeURIComponent(filepath))}` : \"\";\n  const archiveUrl = isHosted ? `${protocol}://${resource}/${project}/${repoName}/get/${branch}.tar.gz` : `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/archive?format=tgz&at=${branch}&prefix=${project}-${repoName}${path}`;\n  return archiveUrl;\n}\nfunction getBitbucketFileFetchUrl(url, config) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || filepathtype !== \"browse\" && filepathtype !== \"raw\" && filepathtype !== \"src\") {\n      throw new Error(\"Invalid Bitbucket URL or file path\");\n    }\n    const pathWithoutSlash = filepath.replace(/^\\//, \"\");\n    if (config.host === \"bitbucket.org\") {\n      if (!ref) {\n        throw new Error(\"Invalid Bitbucket URL or file path\");\n      }\n      return `${config.apiBaseUrl}/repositories/${owner}/${name}/src/${ref}/${pathWithoutSlash}`;\n    }\n    return `${config.apiBaseUrl}/projects/${owner}/repos/${name}/raw/${pathWithoutSlash}?at=${ref}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getBitbucketRequestOptions(config) {\n  const headers = {};\n  if (config.token) {\n    headers.Authorization = `Bearer ${config.token}`;\n  } else if (config.username && config.appPassword) {\n    const buffer = Buffer.from(\n      `${config.username}:${config.appPassword}`,\n      \"utf8\"\n    );\n    headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  }\n  return {\n    headers\n  };\n}\n\nconst BITBUCKET_CLOUD_HOST = \"bitbucket.org\";\nconst BITBUCKET_CLOUD_API_BASE_URL = \"https://api.bitbucket.org/2.0\";\nfunction readBitbucketCloudIntegrationConfig(config) {\n  var _a;\n  const host = BITBUCKET_CLOUD_HOST;\n  const apiBaseUrl = BITBUCKET_CLOUD_API_BASE_URL;\n  const username = config.getString(\"username\");\n  const appPassword = (_a = config.getString(\"appPassword\")) == null ? void 0 : _a.trim();\n  return {\n    host,\n    apiBaseUrl,\n    username,\n    appPassword\n  };\n}\nfunction readBitbucketCloudIntegrationConfigs(configs) {\n  const result = configs.map(readBitbucketCloudIntegrationConfig);\n  if (result.length === 0) {\n    result.push({\n      host: BITBUCKET_CLOUD_HOST,\n      apiBaseUrl: BITBUCKET_CLOUD_API_BASE_URL\n    });\n  }\n  return result;\n}\n\nvar __defProp$9 = Object.defineProperty;\nvar __defNormalProp$9 = (obj, key, value) => key in obj ? __defProp$9(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$9 = (obj, key, value) => {\n  __defNormalProp$9(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _BitbucketCloudIntegration = class _BitbucketCloudIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"bitbucketCloud\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const resolved = defaultScmResolveUrl(options);\n    if (options.lineNumber) {\n      const url = new URL(resolved);\n      url.hash = `lines-${options.lineNumber}`;\n      return url.toString();\n    }\n    return resolved;\n  }\n  resolveEditUrl(url) {\n    const urlData = parseGitUrl(url);\n    const editUrl = new URL(url);\n    editUrl.searchParams.set(\"mode\", \"edit\");\n    editUrl.searchParams.set(\"at\", urlData.ref);\n    return editUrl.toString();\n  }\n};\n__publicField$9(_BitbucketCloudIntegration, \"factory\", ({\n  config\n}) => {\n  var _a;\n  const configs = readBitbucketCloudIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.bitbucketCloud\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _BitbucketCloudIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet BitbucketCloudIntegration = _BitbucketCloudIntegration;\n\nasync function getBitbucketCloudDefaultBranch(url, config) {\n  const { name: repoName, owner: project } = parseGitUrl(url);\n  const branchUrl = `${config.apiBaseUrl}/repositories/${project}/${repoName}`;\n  const response = await fetch(\n    branchUrl,\n    getBitbucketCloudRequestOptions(config)\n  );\n  if (!response.ok) {\n    const message = `Failed to retrieve default branch from ${branchUrl}, ${response.status} ${response.statusText}`;\n    throw new Error(message);\n  }\n  const repoInfo = await response.json();\n  const defaultBranch = repoInfo.mainbranch.name;\n  if (!defaultBranch) {\n    throw new Error(\n      `Failed to read default branch from ${branchUrl}. Response ${response.status} ${response.json()}`\n    );\n  }\n  return defaultBranch;\n}\nasync function getBitbucketCloudDownloadUrl(url, config) {\n  const {\n    name: repoName,\n    owner: project,\n    ref,\n    protocol,\n    resource\n  } = parseGitUrl(url);\n  let branch = ref;\n  if (!branch) {\n    branch = await getBitbucketCloudDefaultBranch(url, config);\n  }\n  return `${protocol}://${resource}/${project}/${repoName}/get/${branch}.tar.gz`;\n}\nfunction getBitbucketCloudFileFetchUrl(url, config) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || filepathtype !== \"src\" && filepathtype !== \"raw\") {\n      throw new Error(\"Invalid Bitbucket Cloud URL or file path\");\n    }\n    const pathWithoutSlash = filepath.replace(/^\\//, \"\");\n    if (!ref) {\n      throw new Error(\"Invalid Bitbucket Cloud URL or file path\");\n    }\n    return `${config.apiBaseUrl}/repositories/${owner}/${name}/src/${ref}/${pathWithoutSlash}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getBitbucketCloudRequestOptions(config) {\n  const headers = {};\n  if (config.username && config.appPassword) {\n    const buffer = Buffer.from(\n      `${config.username}:${config.appPassword}`,\n      \"utf8\"\n    );\n    headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  }\n  return {\n    headers\n  };\n}\n\nfunction readBitbucketServerIntegrationConfig(config) {\n  var _a;\n  const host = config.getString(\"host\");\n  let apiBaseUrl = config.getOptionalString(\"apiBaseUrl\");\n  const token = (_a = config.getOptionalString(\"token\")) == null ? void 0 : _a.trim();\n  const username = config.getOptionalString(\"username\");\n  const password = config.getOptionalString(\"password\");\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Bitbucket Server integration config, '${host}' is not a valid host`\n    );\n  }\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, \"/\");\n  } else {\n    apiBaseUrl = `https://${host}/rest/api/1.0`;\n  }\n  return {\n    host,\n    apiBaseUrl,\n    token,\n    username,\n    password\n  };\n}\nfunction readBitbucketServerIntegrationConfigs(configs) {\n  return configs.map(readBitbucketServerIntegrationConfig);\n}\n\nvar __defProp$8 = Object.defineProperty;\nvar __defNormalProp$8 = (obj, key, value) => key in obj ? __defProp$8(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$8 = (obj, key, value) => {\n  __defNormalProp$8(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _BitbucketServerIntegration = class _BitbucketServerIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"bitbucketServer\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const resolved = defaultScmResolveUrl(options);\n    if (options.lineNumber) {\n      const url = new URL(resolved);\n      url.hash = options.lineNumber.toString();\n      return url.toString();\n    }\n    return resolved;\n  }\n  resolveEditUrl(url) {\n    if (url.includes(\"?\")) {\n      return url.substring(0, url.indexOf(\"?\"));\n    }\n    return url;\n  }\n};\n__publicField$8(_BitbucketServerIntegration, \"factory\", ({\n  config\n}) => {\n  var _a;\n  const configs = readBitbucketServerIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.bitbucketServer\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _BitbucketServerIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet BitbucketServerIntegration = _BitbucketServerIntegration;\n\nasync function getBitbucketServerDefaultBranch(url, config) {\n  const { name: repoName, owner: project } = parseGitUrl(url);\n  let branchUrl = `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/default-branch`;\n  let response = await fetch(\n    branchUrl,\n    getBitbucketServerRequestOptions(config)\n  );\n  if (response.status === 404) {\n    branchUrl = `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/branches/default`;\n    response = await fetch(branchUrl, getBitbucketServerRequestOptions(config));\n  }\n  if (!response.ok) {\n    const message = `Failed to retrieve default branch from ${branchUrl}, ${response.status} ${response.statusText}`;\n    throw new Error(message);\n  }\n  const { displayId } = await response.json();\n  const defaultBranch = displayId;\n  if (!defaultBranch) {\n    throw new Error(\n      `Failed to read default branch from ${branchUrl}. Response ${response.status} ${response.json()}`\n    );\n  }\n  return defaultBranch;\n}\nasync function getBitbucketServerDownloadUrl(url, config) {\n  const { name: repoName, owner: project, ref, filepath } = parseGitUrl(url);\n  let branch = ref;\n  if (!branch) {\n    branch = await getBitbucketServerDefaultBranch(url, config);\n  }\n  const path = filepath ? `&path=${encodeURIComponent(decodeURIComponent(filepath))}` : \"\";\n  return `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/archive?format=tgz&at=${branch}&prefix=${project}-${repoName}${path}`;\n}\nfunction getBitbucketServerFileFetchUrl(url, config) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || filepathtype !== \"browse\" && filepathtype !== \"raw\" && filepathtype !== \"src\") {\n      throw new Error(\"Invalid Bitbucket Server URL or file path\");\n    }\n    const pathWithoutSlash = filepath.replace(/^\\//, \"\");\n    return `${config.apiBaseUrl}/projects/${owner}/repos/${name}/raw/${pathWithoutSlash}?at=${ref}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getBitbucketServerRequestOptions(config) {\n  const headers = {};\n  if (config.token) {\n    headers.Authorization = `Bearer ${config.token}`;\n  } else if (config.username && config.password) {\n    const buffer = Buffer.from(`${config.username}:${config.password}`, \"utf8\");\n    headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  }\n  return {\n    headers\n  };\n}\n\nfunction readGerritIntegrationConfig(config) {\n  var _a;\n  const host = config.getString(\"host\");\n  let baseUrl = config.getOptionalString(\"baseUrl\");\n  let cloneUrl = config.getOptionalString(\"cloneUrl\");\n  let gitilesBaseUrl = config.getOptionalString(\"gitilesBaseUrl\");\n  const username = config.getOptionalString(\"username\");\n  const password = (_a = config.getOptionalString(\"password\")) == null ? void 0 : _a.trim();\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${host}' is not a valid host`\n    );\n  } else if (baseUrl && !isValidUrl(baseUrl)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${baseUrl}' is not a valid baseUrl`\n    );\n  } else if (cloneUrl && !isValidUrl(cloneUrl)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${cloneUrl}' is not a valid cloneUrl`\n    );\n  } else if (gitilesBaseUrl && !isValidUrl(gitilesBaseUrl)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${gitilesBaseUrl}' is not a valid gitilesBaseUrl`\n    );\n  }\n  if (baseUrl) {\n    baseUrl = trimEnd(baseUrl, \"/\");\n  } else {\n    baseUrl = `https://${host}`;\n  }\n  if (gitilesBaseUrl) {\n    gitilesBaseUrl = trimEnd(gitilesBaseUrl, \"/\");\n  } else {\n    gitilesBaseUrl = `https://${host}`;\n  }\n  if (cloneUrl) {\n    cloneUrl = trimEnd(cloneUrl, \"/\");\n  } else {\n    cloneUrl = baseUrl;\n  }\n  return {\n    host,\n    baseUrl,\n    cloneUrl,\n    gitilesBaseUrl,\n    username,\n    password\n  };\n}\nfunction readGerritIntegrationConfigs(configs) {\n  return configs.map(readGerritIntegrationConfig);\n}\n\nconst GERRIT_BODY_PREFIX = \")]}'\";\nfunction parseGerritGitilesUrl(config, url) {\n  const baseUrlParse = new URL(config.gitilesBaseUrl);\n  const urlParse = new URL(url);\n  const urlPath = urlParse.pathname.substring(urlParse.pathname.startsWith(\"/a/\") ? 2 : 0).replace(baseUrlParse.pathname, \"\");\n  const parts = urlPath.split(\"/\").filter((p) => !!p);\n  const projectEndIndex = parts.indexOf(\"+\");\n  if (projectEndIndex <= 0) {\n    throw new Error(`Unable to parse project from url: ${url}`);\n  }\n  const project = trimStart(parts.slice(0, projectEndIndex).join(\"/\"), \"/\");\n  const branchIndex = parts.indexOf(\"heads\");\n  if (branchIndex <= 0) {\n    throw new Error(`Unable to parse branch from url: ${url}`);\n  }\n  const branch = parts[branchIndex + 1];\n  const filePath = parts.slice(branchIndex + 2).join(\"/\");\n  return {\n    branch,\n    filePath: filePath === \"\" ? \"/\" : filePath,\n    project\n  };\n}\nfunction buildGerritGitilesUrl(config, project, branch, filePath) {\n  return `${config.gitilesBaseUrl}/${project}/+/refs/heads/${branch}/${trimStart(filePath, \"/\")}`;\n}\nfunction buildGerritGitilesArchiveUrl(config, project, branch, filePath) {\n  const archiveName = filePath === \"/\" || filePath === \"\" ? \".tar.gz\" : `/${filePath}.tar.gz`;\n  return `${getGitilesAuthenticationUrl(\n    config\n  )}/${project}/+archive/refs/heads/${branch}${archiveName}`;\n}\nfunction getAuthenticationPrefix(config) {\n  return config.password ? \"/a/\" : \"/\";\n}\nfunction getGitilesAuthenticationUrl(config) {\n  if (!config.baseUrl || !config.gitilesBaseUrl) {\n    throw new Error(\n      \"Unexpected Gerrit config values. baseUrl or gitilesBaseUrl not set.\"\n    );\n  }\n  if (config.gitilesBaseUrl.startsWith(config.baseUrl)) {\n    return config.gitilesBaseUrl.replace(\n      config.baseUrl.concat(\"/\"),\n      config.baseUrl.concat(getAuthenticationPrefix(config))\n    );\n  }\n  if (config.password) {\n    throw new Error(\n      \"Since the baseUrl (Gerrit) is not part of the gitilesBaseUrl, an authentication URL could not be constructed.\"\n    );\n  }\n  return config.gitilesBaseUrl;\n}\nfunction getGerritBranchApiUrl(config, url) {\n  const { branch, project } = parseGerritGitilesUrl(config, url);\n  return `${config.baseUrl}${getAuthenticationPrefix(\n    config\n  )}projects/${encodeURIComponent(project)}/branches/${branch}`;\n}\nfunction getGerritCloneRepoUrl(config, url) {\n  const { project } = parseGerritGitilesUrl(config, url);\n  return `${config.cloneUrl}${getAuthenticationPrefix(config)}${project}`;\n}\nfunction getGerritFileContentsApiUrl(config, url) {\n  const { branch, filePath, project } = parseGerritGitilesUrl(config, url);\n  return `${config.baseUrl}${getAuthenticationPrefix(\n    config\n  )}projects/${encodeURIComponent(\n    project\n  )}/branches/${branch}/files/${encodeURIComponent(filePath)}/content`;\n}\nfunction getGerritProjectsApiUrl(config) {\n  return `${config.baseUrl}${getAuthenticationPrefix(config)}projects/`;\n}\nfunction getGerritRequestOptions(config) {\n  const headers = {};\n  if (!config.password) {\n    return headers;\n  }\n  const buffer = Buffer.from(`${config.username}:${config.password}`, \"utf8\");\n  headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  return {\n    headers\n  };\n}\nasync function parseGerritJsonResponse(response) {\n  const responseBody = await response.text();\n  if (responseBody.startsWith(GERRIT_BODY_PREFIX)) {\n    try {\n      return JSON.parse(responseBody.slice(GERRIT_BODY_PREFIX.length));\n    } catch (ex) {\n      throw new Error(\n        `Invalid response from Gerrit: ${responseBody.slice(0, 10)} - ${ex}`\n      );\n    }\n  }\n  throw new Error(\n    `Gerrit JSON body prefix missing. Found: ${responseBody.slice(0, 10)}`\n  );\n}\n\nvar __defProp$7 = Object.defineProperty;\nvar __defNormalProp$7 = (obj, key, value) => key in obj ? __defProp$7(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$7 = (obj, key, value) => {\n  __defNormalProp$7(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _GerritIntegration = class _GerritIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"gerrit\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const { url, base, lineNumber } = options;\n    let updated;\n    if (url.startsWith(\"/\")) {\n      const { branch, project } = parseGerritGitilesUrl(this.config, base);\n      return buildGerritGitilesUrl(this.config, project, branch, url);\n    }\n    if (url) {\n      updated = new URL(url, base);\n    } else {\n      updated = new URL(base);\n    }\n    if (lineNumber) {\n      updated.hash = lineNumber.toString();\n    }\n    return updated.toString();\n  }\n  resolveEditUrl(url) {\n    return url;\n  }\n};\n__publicField$7(_GerritIntegration, \"factory\", ({ config }) => {\n  var _a;\n  const configs = readGerritIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.gerrit\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _GerritIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet GerritIntegration = _GerritIntegration;\n\nfunction readGiteaConfig(config) {\n  var _a;\n  const host = config.getString(\"host\");\n  let baseUrl = config.getOptionalString(\"baseUrl\");\n  const username = config.getOptionalString(\"username\");\n  const password = (_a = config.getOptionalString(\"password\")) == null ? void 0 : _a.trim();\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Gitea integration config, '${host}' is not a valid host`\n    );\n  } else if (baseUrl && !isValidUrl(baseUrl)) {\n    throw new Error(\n      `Invalid Gitea integration config, '${baseUrl}' is not a valid baseUrl`\n    );\n  }\n  if (baseUrl) {\n    baseUrl = trimEnd(baseUrl, \"/\");\n  } else {\n    baseUrl = `https://${host}`;\n  }\n  return {\n    host,\n    baseUrl,\n    username,\n    password\n  };\n}\n\nfunction getGiteaEditContentsUrl(config, url) {\n  const giteaUrl = parseGiteaUrl(config, url);\n  return `${giteaUrl.url}/${giteaUrl.owner}/${giteaUrl.name}/_edit/${giteaUrl.ref}/${giteaUrl.path}`;\n}\nfunction getGiteaFileContentsUrl(config, url) {\n  const giteaUrl = parseGiteaUrl(config, url);\n  return `${giteaUrl.url}/api/v1/repos/${giteaUrl.owner}/${giteaUrl.name}/contents/${giteaUrl.path}?ref=${giteaUrl.ref}`;\n}\nfunction getGiteaArchiveUrl(config, url) {\n  const giteaUrl = parseGiteaUrl(config, url);\n  return `${giteaUrl.url}/api/v1/repos/${giteaUrl.owner}/${giteaUrl.name}/archive/${giteaUrl.ref}.tar.gz`;\n}\nfunction getGiteaLatestCommitUrl(config, url) {\n  const giteaUrl = parseGiteaUrl(config, url);\n  return `${giteaUrl.url}/api/v1/repos/${giteaUrl.owner}/${giteaUrl.name}/git/commits/${giteaUrl.ref}`;\n}\nfunction getGiteaRequestOptions(config) {\n  const headers = {};\n  const { username, password } = config;\n  if (!password) {\n    return headers;\n  }\n  if (username) {\n    headers.Authorization = `basic ${Buffer.from(\n      `${username}:${password}`\n    ).toString(\"base64\")}`;\n  } else {\n    headers.Authorization = `token ${password}`;\n  }\n  return {\n    headers\n  };\n}\nfunction parseGiteaUrl(config, url) {\n  var _a;\n  const baseUrl = (_a = config.baseUrl) != null ? _a : `https://${config.host}`;\n  try {\n    const [_blank, owner, name, _src, _branch, ref, ...path] = url.replace(baseUrl, \"\").split(\"/\");\n    const pathWithoutSlash = path.join(\"/\").replace(/^\\//, \"\");\n    return {\n      url: baseUrl,\n      owner,\n      name,\n      ref,\n      path: pathWithoutSlash\n    };\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\n\nvar __defProp$6 = Object.defineProperty;\nvar __defNormalProp$6 = (obj, key, value) => key in obj ? __defProp$6(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$6 = (obj, key, value) => {\n  __defNormalProp$6(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _GiteaIntegration = class _GiteaIntegration {\n  constructor(config) {\n    this.config = config;\n  }\n  get type() {\n    return \"gitea\";\n  }\n  get title() {\n    return this.config.host;\n  }\n  resolveUrl(options) {\n    return defaultScmResolveUrl(options);\n  }\n  resolveEditUrl(url) {\n    return getGiteaEditContentsUrl(this.config, url);\n  }\n};\n__publicField$6(_GiteaIntegration, \"factory\", ({ config }) => {\n  var _a;\n  const configs = (_a = config.getOptionalConfigArray(\"integrations.gitea\")) != null ? _a : [];\n  const giteaConfigs = configs.map((c) => readGiteaConfig(c));\n  return basicIntegrations(\n    giteaConfigs.map((c) => new _GiteaIntegration(c)),\n    (gitea) => gitea.config.host\n  );\n});\nlet GiteaIntegration = _GiteaIntegration;\n\nconst GITHUB_HOST = \"github.com\";\nconst GITHUB_API_BASE_URL = \"https://api.github.com\";\nconst GITHUB_RAW_BASE_URL = \"https://raw.githubusercontent.com\";\nfunction readGithubIntegrationConfig(config) {\n  var _a, _b, _c;\n  const host = (_a = config.getOptionalString(\"host\")) != null ? _a : GITHUB_HOST;\n  let apiBaseUrl = config.getOptionalString(\"apiBaseUrl\");\n  let rawBaseUrl = config.getOptionalString(\"rawBaseUrl\");\n  const token = (_b = config.getOptionalString(\"token\")) == null ? void 0 : _b.trim();\n  const apps = (_c = config.getOptionalConfigArray(\"apps\")) == null ? void 0 : _c.map((c) => ({\n    appId: c.getNumber(\"appId\"),\n    clientId: c.getString(\"clientId\"),\n    clientSecret: c.getString(\"clientSecret\"),\n    webhookSecret: c.getString(\"webhookSecret\"),\n    privateKey: c.getString(\"privateKey\"),\n    allowedInstallationOwners: c.getOptionalStringArray(\n      \"allowedInstallationOwners\"\n    )\n  }));\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid GitHub integration config, '${host}' is not a valid host`\n    );\n  }\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, \"/\");\n  } else if (host === GITHUB_HOST) {\n    apiBaseUrl = GITHUB_API_BASE_URL;\n  }\n  if (rawBaseUrl) {\n    rawBaseUrl = trimEnd(rawBaseUrl, \"/\");\n  } else if (host === GITHUB_HOST) {\n    rawBaseUrl = GITHUB_RAW_BASE_URL;\n  }\n  return { host, apiBaseUrl, rawBaseUrl, token, apps };\n}\nfunction readGithubIntegrationConfigs(configs) {\n  const result = configs.map(readGithubIntegrationConfig);\n  if (!result.some((c) => c.host === GITHUB_HOST)) {\n    result.push({\n      host: GITHUB_HOST,\n      apiBaseUrl: GITHUB_API_BASE_URL,\n      rawBaseUrl: GITHUB_RAW_BASE_URL\n    });\n  }\n  return result;\n}\n\nfunction getGithubFileFetchUrl(url, config, credentials) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || !ref || // GitHub is automatically redirecting tree urls to blob urls so it's\n    // fine to pass a tree url.\n    filepathtype !== \"blob\" && filepathtype !== \"raw\" && filepathtype !== \"tree\") {\n      throw new Error(\"Invalid GitHub URL or file path\");\n    }\n    const pathWithoutSlash = filepath.replace(/^\\//, \"\");\n    if (chooseEndpoint(config, credentials) === \"api\") {\n      return `${config.apiBaseUrl}/repos/${owner}/${name}/contents/${pathWithoutSlash}?ref=${ref}`;\n    }\n    return `${config.rawBaseUrl}/${owner}/${name}/${ref}/${pathWithoutSlash}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getGitHubRequestOptions(config, credentials) {\n  const headers = {};\n  if (chooseEndpoint(config, credentials) === \"api\") {\n    headers.Accept = \"application/vnd.github.v3.raw\";\n  }\n  if (credentials.token) {\n    headers.Authorization = `token ${credentials.token}`;\n  }\n  return { headers };\n}\nfunction chooseEndpoint(config, credentials) {\n  if (config.apiBaseUrl && (credentials.token || !config.rawBaseUrl)) {\n    return \"api\";\n  }\n  return \"raw\";\n}\n\nvar __defProp$5 = Object.defineProperty;\nvar __defNormalProp$5 = (obj, key, value) => key in obj ? __defProp$5(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$5 = (obj, key, value) => {\n  __defNormalProp$5(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass Cache {\n  constructor() {\n    __publicField$5(this, \"tokenCache\", /* @__PURE__ */ new Map());\n    __publicField$5(this, \"isExpired\", (date) => DateTime.local() > date);\n  }\n  async getOrCreateToken(owner, repo, supplier) {\n    let existingInstallationData = this.tokenCache.get(owner);\n    if (!existingInstallationData || this.isExpired(existingInstallationData.expiresAt)) {\n      existingInstallationData = await supplier();\n      existingInstallationData.expiresAt = existingInstallationData.expiresAt.minus({ minutes: 10 });\n      this.tokenCache.set(owner, existingInstallationData);\n    }\n    if (!this.appliesToRepo(existingInstallationData, repo)) {\n      throw new Error(\n        `The Backstage GitHub application used in the ${owner} organization does not have access to a repository with the name ${repo}`\n      );\n    }\n    return { accessToken: existingInstallationData.token };\n  }\n  appliesToRepo(tokenData, repo) {\n    if (repo === void 0) {\n      return true;\n    }\n    if (tokenData.repositories !== void 0) {\n      return tokenData.repositories.includes(repo);\n    }\n    return true;\n  }\n}\nconst HEADERS = {\n  Accept: \"application/vnd.github.machine-man-preview+json\"\n};\nclass GithubAppManager {\n  // undefined allows all installations\n  constructor(config, baseUrl) {\n    __publicField$5(this, \"appClient\");\n    __publicField$5(this, \"baseUrl\");\n    __publicField$5(this, \"baseAuthConfig\");\n    __publicField$5(this, \"cache\", new Cache());\n    __publicField$5(this, \"allowedInstallationOwners\");\n    this.allowedInstallationOwners = config.allowedInstallationOwners;\n    this.baseUrl = baseUrl;\n    this.baseAuthConfig = {\n      appId: config.appId,\n      privateKey: config.privateKey.replace(/\\\\n/gm, \"\\n\")\n    };\n    this.appClient = new Octokit({\n      baseUrl,\n      headers: HEADERS,\n      authStrategy: createAppAuth,\n      auth: this.baseAuthConfig\n    });\n  }\n  async getInstallationCredentials(owner, repo) {\n    var _a;\n    if (this.allowedInstallationOwners) {\n      if (!((_a = this.allowedInstallationOwners) == null ? void 0 : _a.includes(owner))) {\n        return { accessToken: void 0 };\n      }\n    }\n    return this.cache.getOrCreateToken(owner, repo, async () => {\n      var _a2;\n      const { installationId, suspended } = await this.getInstallationData(\n        owner\n      );\n      if (suspended) {\n        throw new Error(`The GitHub application for ${owner} is suspended`);\n      }\n      const result = await this.appClient.apps.createInstallationAccessToken({\n        installation_id: installationId,\n        headers: HEADERS\n      });\n      let repositoryNames;\n      if (result.data.repository_selection === \"selected\") {\n        const installationClient = new Octokit({\n          baseUrl: this.baseUrl,\n          auth: result.data.token\n        });\n        const repos = await installationClient.paginate(\n          installationClient.apps.listReposAccessibleToInstallation\n        );\n        const repositories = (_a2 = repos.repositories) != null ? _a2 : repos;\n        repositoryNames = repositories.map((repository) => repository.name);\n      }\n      return {\n        token: result.data.token,\n        expiresAt: DateTime.fromISO(result.data.expires_at),\n        repositories: repositoryNames\n      };\n    });\n  }\n  getInstallations() {\n    return this.appClient.paginate(this.appClient.apps.listInstallations);\n  }\n  async getInstallationData(owner) {\n    const allInstallations = await this.getInstallations();\n    const installation = allInstallations.find(\n      (inst) => {\n        var _a;\n        return inst.account && \"login\" in inst.account && ((_a = inst.account.login) == null ? void 0 : _a.toLocaleLowerCase(\"en-US\")) === owner.toLocaleLowerCase(\"en-US\");\n      }\n    );\n    if (installation) {\n      return {\n        installationId: installation.id,\n        suspended: Boolean(installation.suspended_by)\n      };\n    }\n    const notFoundError = new Error(\n      `No app installation found for ${owner} in ${this.baseAuthConfig.appId}`\n    );\n    notFoundError.name = \"NotFoundError\";\n    throw notFoundError;\n  }\n}\nclass GithubAppCredentialsMux {\n  constructor(config) {\n    __publicField$5(this, \"apps\");\n    var _a, _b;\n    this.apps = (_b = (_a = config.apps) == null ? void 0 : _a.map((ac) => new GithubAppManager(ac, config.apiBaseUrl))) != null ? _b : [];\n  }\n  async getAllInstallations() {\n    if (!this.apps.length) {\n      return [];\n    }\n    const installs = await Promise.all(\n      this.apps.map((app) => app.getInstallations())\n    );\n    return installs.flat();\n  }\n  async getAppToken(owner, repo) {\n    if (this.apps.length === 0) {\n      return void 0;\n    }\n    const results = await Promise.all(\n      this.apps.map(\n        (app) => app.getInstallationCredentials(owner, repo).then(\n          (credentials) => ({ credentials, error: void 0 }),\n          (error) => ({ credentials: void 0, error })\n        )\n      )\n    );\n    const result = results.find(\n      (resultItem) => {\n        var _a;\n        return (_a = resultItem.credentials) == null ? void 0 : _a.accessToken;\n      }\n    );\n    if (result) {\n      return result.credentials.accessToken;\n    }\n    const errors = results.map((r) => r.error);\n    const notNotFoundError = errors.find((err) => (err == null ? void 0 : err.name) !== \"NotFoundError\");\n    if (notNotFoundError) {\n      throw notNotFoundError;\n    }\n    return void 0;\n  }\n}\nconst _SingleInstanceGithubCredentialsProvider = class _SingleInstanceGithubCredentialsProvider {\n  constructor(githubAppCredentialsMux, token) {\n    this.githubAppCredentialsMux = githubAppCredentialsMux;\n    this.token = token;\n  }\n  /**\n   * Returns {@link GithubCredentials} for a given URL.\n   *\n   * @remarks\n   *\n   * Consecutive calls to this method with the same URL will return cached\n   * credentials.\n   *\n   * The shortest lifetime for a token returned is 10 minutes.\n   *\n   * @example\n   * ```ts\n   * const { token, headers } = await getCredentials({\n   *   url: 'github.com/backstage/foobar'\n   * })\n   * ```\n   *\n   * @param opts - The organization or repository URL\n   * @returns A promise of {@link GithubCredentials}.\n   */\n  async getCredentials(opts) {\n    const parsed = parseGitUrl(opts.url);\n    const owner = parsed.owner || parsed.name;\n    const repo = parsed.owner ? parsed.name : void 0;\n    let type = \"app\";\n    let token = await this.githubAppCredentialsMux.getAppToken(owner, repo);\n    if (!token) {\n      type = \"token\";\n      token = this.token;\n    }\n    return {\n      headers: token ? { Authorization: `Bearer ${token}` } : void 0,\n      token,\n      type\n    };\n  }\n};\n__publicField$5(_SingleInstanceGithubCredentialsProvider, \"create\", (config) => {\n  return new _SingleInstanceGithubCredentialsProvider(\n    new GithubAppCredentialsMux(config),\n    config.token\n  );\n});\nlet SingleInstanceGithubCredentialsProvider = _SingleInstanceGithubCredentialsProvider;\n\nclass DefaultGithubCredentialsProvider {\n  constructor(providers) {\n    this.providers = providers;\n  }\n  static fromIntegrations(integrations) {\n    const credentialsProviders = /* @__PURE__ */ new Map();\n    integrations.github.list().forEach((integration) => {\n      const credentialsProvider = SingleInstanceGithubCredentialsProvider.create(integration.config);\n      credentialsProviders.set(integration.config.host, credentialsProvider);\n    });\n    return new DefaultGithubCredentialsProvider(credentialsProviders);\n  }\n  /**\n   * Returns {@link GithubCredentials} for a given URL.\n   *\n   * @remarks\n   *\n   * Consecutive calls to this method with the same URL will return cached\n   * credentials.\n   *\n   * The shortest lifetime for a token returned is 10 minutes.\n   *\n   * @example\n   * ```ts\n   * const { token, headers } = await getCredentials({\n   *   url: 'https://github.com/backstage/foobar'\n   * })\n   *\n   * const { token, headers } = await getCredentials({\n   *   url: 'https://github.com/backstage'\n   * })\n   * ```\n   *\n   * @param opts - The organization or repository URL\n   * @returns A promise of {@link GithubCredentials}.\n   */\n  async getCredentials(opts) {\n    const parsed = new URL(opts.url);\n    const provider = this.providers.get(parsed.host);\n    if (!provider) {\n      throw new Error(\n        `There is no GitHub integration that matches ${opts.url}. Please add a configuration for an integration.`\n      );\n    }\n    return provider.getCredentials(opts);\n  }\n}\n\nvar __defProp$4 = Object.defineProperty;\nvar __defNormalProp$4 = (obj, key, value) => key in obj ? __defProp$4(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$4 = (obj, key, value) => {\n  __defNormalProp$4(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _GithubIntegration = class _GithubIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"github\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    return replaceGithubUrlType(defaultScmResolveUrl(options), \"tree\");\n  }\n  resolveEditUrl(url) {\n    return replaceGithubUrlType(url, \"edit\");\n  }\n  parseRateLimitInfo(response) {\n    return {\n      isRateLimited: response.status === 429 || response.status === 403 && response.headers.get(\"x-ratelimit-remaining\") === \"0\"\n    };\n  }\n};\n__publicField$4(_GithubIntegration, \"factory\", ({ config }) => {\n  var _a;\n  const configs = readGithubIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.github\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _GithubIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet GithubIntegration = _GithubIntegration;\nfunction replaceGithubUrlType(url, type) {\n  return url.replace(\n    /\\/\\/([^/]+)\\/([^/]+)\\/([^/]+)\\/(blob|tree|edit)\\//,\n    (_, host, owner, repo) => {\n      return `//${host}/${owner}/${repo}/${type}/`;\n    }\n  );\n}\n\nvar __defProp$3 = Object.defineProperty;\nvar __defNormalProp$3 = (obj, key, value) => key in obj ? __defProp$3(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$3 = (obj, key, value) => {\n  __defNormalProp$3(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst getGitHubFileFetchUrl = getGithubFileFetchUrl;\nclass GitHubIntegration extends GithubIntegration {\n  constructor(integrationConfig) {\n    super(integrationConfig);\n  }\n  get config() {\n    return super.config;\n  }\n}\n__publicField$3(GitHubIntegration, \"factory\", GithubIntegration.factory);\nconst readGitHubIntegrationConfig = readGithubIntegrationConfig;\nconst readGitHubIntegrationConfigs = readGithubIntegrationConfigs;\nconst replaceGitHubUrlType = replaceGithubUrlType;\n\nconst GITLAB_HOST = \"gitlab.com\";\nconst GITLAB_API_BASE_URL = \"https://gitlab.com/api/v4\";\nfunction readGitLabIntegrationConfig(config) {\n  var _a;\n  const host = config.getString(\"host\");\n  let apiBaseUrl = config.getOptionalString(\"apiBaseUrl\");\n  const token = (_a = config.getOptionalString(\"token\")) == null ? void 0 : _a.trim();\n  let baseUrl = config.getOptionalString(\"baseUrl\");\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, \"/\");\n  } else if (host === GITLAB_HOST) {\n    apiBaseUrl = GITLAB_API_BASE_URL;\n  }\n  if (baseUrl) {\n    baseUrl = trimEnd(baseUrl, \"/\");\n  } else {\n    baseUrl = `https://${host}`;\n  }\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid GitLab integration config, '${host}' is not a valid host`\n    );\n  } else if (!apiBaseUrl || !isValidUrl(apiBaseUrl)) {\n    throw new Error(\n      `Invalid GitLab integration config, '${apiBaseUrl}' is not a valid apiBaseUrl`\n    );\n  } else if (!isValidUrl(baseUrl)) {\n    throw new Error(\n      `Invalid GitLab integration config, '${baseUrl}' is not a valid baseUrl`\n    );\n  }\n  return { host, token, apiBaseUrl, baseUrl };\n}\nfunction readGitLabIntegrationConfigs(configs) {\n  const result = configs.map(readGitLabIntegrationConfig);\n  if (!result.some((c) => c.host === GITLAB_HOST)) {\n    result.push({\n      host: GITLAB_HOST,\n      apiBaseUrl: GITLAB_API_BASE_URL,\n      baseUrl: `https://${GITLAB_HOST}`\n    });\n  }\n  return result;\n}\nfunction getGitLabIntegrationRelativePath(config) {\n  let relativePath = \"\";\n  if (config.host !== GITLAB_HOST) {\n    relativePath = new URL(config.baseUrl).pathname;\n  }\n  return trimEnd(relativePath, \"/\");\n}\n\nasync function getGitLabFileFetchUrl(url, config) {\n  const projectID = await getProjectId(url, config);\n  return buildProjectUrl(url, projectID, config).toString();\n}\nfunction getGitLabRequestOptions(config) {\n  const { token = \"\" } = config;\n  return {\n    headers: {\n      \"PRIVATE-TOKEN\": token\n    }\n  };\n}\nfunction buildProjectUrl(target, projectID, config) {\n  try {\n    const url = new URL(target);\n    const branchAndFilePath = url.pathname.split(\"/blob/\").slice(1).join(\"/blob/\");\n    const [branch, ...filePath] = branchAndFilePath.split(\"/\");\n    const relativePath = getGitLabIntegrationRelativePath(config);\n    url.pathname = [\n      ...relativePath ? [relativePath] : [],\n      \"api/v4/projects\",\n      projectID,\n      \"repository/files\",\n      encodeURIComponent(decodeURIComponent(filePath.join(\"/\"))),\n      \"raw\"\n    ].join(\"/\");\n    url.search = `?ref=${branch}`;\n    return url;\n  } catch (e) {\n    throw new Error(`Incorrect url: ${target}, ${e}`);\n  }\n}\nasync function getProjectId(target, config) {\n  const url = new URL(target);\n  if (!url.pathname.includes(\"/blob/\")) {\n    throw new Error(\"Please provide full path to yaml file from GitLab\");\n  }\n  try {\n    let repo = url.pathname.split(\"/-/blob/\")[0].split(\"/blob/\")[0];\n    const relativePath = getGitLabIntegrationRelativePath(config);\n    if (relativePath) {\n      repo = repo.replace(relativePath, \"\");\n    }\n    const repoIDLookup = new URL(\n      `${url.origin}${relativePath}/api/v4/projects/${encodeURIComponent(\n        repo.replace(/^\\//, \"\")\n      )}`\n    );\n    const response = await fetch(\n      repoIDLookup.toString(),\n      getGitLabRequestOptions(config)\n    );\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(\n        `GitLab Error '${data.error}', ${data.error_description}`\n      );\n    }\n    return Number(data.id);\n  } catch (e) {\n    throw new Error(`Could not get GitLab project ID for: ${target}, ${e}`);\n  }\n}\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _GitLabIntegration = class _GitLabIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"gitlab\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    return defaultScmResolveUrl(options);\n  }\n  resolveEditUrl(url) {\n    return replaceGitLabUrlType(url, \"edit\");\n  }\n};\n__publicField$2(_GitLabIntegration, \"factory\", ({ config }) => {\n  var _a;\n  const configs = readGitLabIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.gitlab\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _GitLabIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet GitLabIntegration = _GitLabIntegration;\nfunction replaceGitLabUrlType(url, type) {\n  return url.replace(/\\/\\-\\/(blob|tree|edit)\\//, `/-/${type}/`);\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _SingleInstanceGitlabCredentialsProvider = class _SingleInstanceGitlabCredentialsProvider {\n  constructor(token) {\n    this.token = token;\n  }\n  async getCredentials(_opts) {\n    if (!this.token) {\n      return {};\n    }\n    return {\n      headers: {\n        Authorization: `Bearer ${this.token}`\n      },\n      token: this.token\n    };\n  }\n};\n__publicField$1(_SingleInstanceGitlabCredentialsProvider, \"create\", (config) => {\n  return new _SingleInstanceGitlabCredentialsProvider(config.token);\n});\nlet SingleInstanceGitlabCredentialsProvider = _SingleInstanceGitlabCredentialsProvider;\n\nclass DefaultGitlabCredentialsProvider {\n  constructor(providers) {\n    this.providers = providers;\n  }\n  static fromIntegrations(integrations) {\n    const credentialsProviders = /* @__PURE__ */ new Map();\n    integrations.gitlab.list().forEach((integration) => {\n      const credentialsProvider = SingleInstanceGitlabCredentialsProvider.create(integration.config);\n      credentialsProviders.set(integration.config.host, credentialsProvider);\n    });\n    return new DefaultGitlabCredentialsProvider(credentialsProviders);\n  }\n  async getCredentials(opts) {\n    const parsed = new URL(opts.url);\n    const provider = this.providers.get(parsed.host);\n    if (!provider) {\n      throw new Error(\n        `There is no GitLab integration that matches ${opts.url}. Please add a configuration for an integration.`\n      );\n    }\n    return provider.getCredentials(opts);\n  }\n}\n\nfunction readGoogleGcsIntegrationConfig(config) {\n  if (!config) {\n    return {};\n  }\n  if (!config.has(\"clientEmail\") && !config.has(\"privateKey\")) {\n    return {};\n  }\n  const privateKey = config.getString(\"privateKey\").split(\"\\\\n\").join(\"\\n\");\n  const clientEmail = config.getString(\"clientEmail\");\n  return { clientEmail, privateKey };\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ScmIntegrations {\n  constructor(integrationsByType) {\n    __publicField(this, \"byType\");\n    this.byType = integrationsByType;\n  }\n  static fromConfig(config) {\n    return new ScmIntegrations({\n      awsS3: AwsS3Integration.factory({ config }),\n      azure: AzureIntegration.factory({ config }),\n      bitbucket: BitbucketIntegration.factory({ config }),\n      bitbucketCloud: BitbucketCloudIntegration.factory({ config }),\n      bitbucketServer: BitbucketServerIntegration.factory({ config }),\n      gerrit: GerritIntegration.factory({ config }),\n      github: GithubIntegration.factory({ config }),\n      gitlab: GitLabIntegration.factory({ config }),\n      gitea: GiteaIntegration.factory({ config })\n    });\n  }\n  get awsS3() {\n    return this.byType.awsS3;\n  }\n  get azure() {\n    return this.byType.azure;\n  }\n  /**\n   * @deprecated in favor of `bitbucketCloud()` and `bitbucketServer()`\n   */\n  get bitbucket() {\n    return this.byType.bitbucket;\n  }\n  get bitbucketCloud() {\n    return this.byType.bitbucketCloud;\n  }\n  get bitbucketServer() {\n    return this.byType.bitbucketServer;\n  }\n  get gerrit() {\n    return this.byType.gerrit;\n  }\n  get github() {\n    return this.byType.github;\n  }\n  get gitlab() {\n    return this.byType.gitlab;\n  }\n  get gitea() {\n    return this.byType.gitea;\n  }\n  list() {\n    return Object.values(this.byType).flatMap(\n      (i) => i.list()\n    );\n  }\n  byUrl(url) {\n    let candidates = Object.values(this.byType).map((i) => i.byUrl(url)).filter(Boolean);\n    if (candidates.length > 1) {\n      const filteredCandidates = candidates.filter(\n        (x) => !(x instanceof BitbucketIntegration)\n      );\n      if (filteredCandidates.length !== 0) {\n        candidates = filteredCandidates;\n      }\n    }\n    return candidates[0];\n  }\n  byHost(host) {\n    return Object.values(this.byType).map((i) => i.byHost(host)).find(Boolean);\n  }\n  resolveUrl(options) {\n    const integration = this.byUrl(options.base);\n    if (!integration) {\n      return defaultScmResolveUrl(options);\n    }\n    return integration.resolveUrl(options);\n  }\n  resolveEditUrl(url) {\n    const integration = this.byUrl(url);\n    if (!integration) {\n      return url;\n    }\n    return integration.resolveEditUrl(url);\n  }\n}\n\nexport { AwsS3Integration, AzureIntegration, BitbucketCloudIntegration, BitbucketIntegration, BitbucketServerIntegration, DefaultAzureDevOpsCredentialsProvider, DefaultGithubCredentialsProvider, DefaultGitlabCredentialsProvider, GerritIntegration, GitHubIntegration, GitLabIntegration, GiteaIntegration, GithubAppCredentialsMux, GithubIntegration, ScmIntegrations, SingleInstanceGithubCredentialsProvider, buildGerritGitilesArchiveUrl, defaultScmResolveUrl, getAzureCommitsUrl, getAzureDownloadUrl, getAzureFileFetchUrl, getAzureRequestOptions, getBitbucketCloudDefaultBranch, getBitbucketCloudDownloadUrl, getBitbucketCloudFileFetchUrl, getBitbucketCloudRequestOptions, getBitbucketDefaultBranch, getBitbucketDownloadUrl, getBitbucketFileFetchUrl, getBitbucketRequestOptions, getBitbucketServerDefaultBranch, getBitbucketServerDownloadUrl, getBitbucketServerFileFetchUrl, getBitbucketServerRequestOptions, getGerritBranchApiUrl, getGerritCloneRepoUrl, getGerritFileContentsApiUrl, getGerritProjectsApiUrl, getGerritRequestOptions, getGitHubFileFetchUrl, getGitHubRequestOptions, getGitLabFileFetchUrl, getGitLabIntegrationRelativePath, getGitLabRequestOptions, getGiteaArchiveUrl, getGiteaEditContentsUrl, getGiteaFileContentsUrl, getGiteaLatestCommitUrl, getGiteaRequestOptions, getGithubFileFetchUrl, parseGerritGitilesUrl, parseGerritJsonResponse, parseGiteaUrl, readAwsS3IntegrationConfig, readAwsS3IntegrationConfigs, readAzureIntegrationConfig, readAzureIntegrationConfigs, readBitbucketCloudIntegrationConfig, readBitbucketCloudIntegrationConfigs, readBitbucketIntegrationConfig, readBitbucketIntegrationConfigs, readBitbucketServerIntegrationConfig, readBitbucketServerIntegrationConfigs, readGerritIntegrationConfig, readGerritIntegrationConfigs, readGitHubIntegrationConfig, readGitHubIntegrationConfigs, readGitLabIntegrationConfig, readGitLabIntegrationConfigs, readGiteaConfig, readGithubIntegrationConfig, readGithubIntegrationConfigs, readGoogleGcsIntegrationConfig, replaceGitHubUrlType, replaceGitLabUrlType, replaceGithubUrlType };\n//# sourceMappingURL=index.esm.js.map\n","import { createRouteRef, createExternalRouteRef, createApiRef } from '@backstage/core-plugin-api';\nimport React, { Suspense } from 'react';\nimport { Progress, CodeSnippet } from '@backstage/core-components';\nimport { useTheme } from '@material-ui/core/styles';\n\nconst rootRoute = createRouteRef({\n  id: \"api-docs\"\n});\nconst registerComponentRouteRef = createExternalRouteRef({\n  id: \"register-component\",\n  optional: true\n});\n\nconst apiDocsConfigRef = createApiRef({\n  id: \"plugin.api-docs.config\"\n});\n\nconst LazyAsyncApiDefinition = React.lazy(\n  () => import('./AsyncApiDefinition-ffed9c50.esm.js').then((m) => ({\n    default: m.AsyncApiDefinition\n  }))\n);\nconst AsyncApiDefinitionWidget = (props) => {\n  return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(LazyAsyncApiDefinition, { ...props }));\n};\n\nconst LazyGraphQlDefinition = React.lazy(\n  () => import('./GraphQlDefinition-49cc2c3b.esm.js').then((m) => ({\n    default: m.GraphQlDefinition\n  }))\n);\nconst GraphQlDefinitionWidget = (props) => {\n  return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(LazyGraphQlDefinition, { ...props }));\n};\n\nconst LazyOpenApiDefinition = React.lazy(\n  () => import('./OpenApiDefinition-20ae2e8c.esm.js').then((m) => ({\n    default: m.OpenApiDefinition\n  }))\n);\nconst OpenApiDefinitionWidget = (props) => {\n  var _a;\n  const validSubmitMethods = (_a = props.supportedSubmitMethods) == null ? void 0 : _a.map(\n    (method) => method.toLocaleLowerCase()\n  );\n  return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(\n    LazyOpenApiDefinition,\n    {\n      ...props,\n      supportedSubmitMethods: validSubmitMethods\n    }\n  ));\n};\n\nconst GrpcApiDefinitionWidget = (props) => {\n  const theme = useTheme();\n  return /* @__PURE__ */ React.createElement(\n    CodeSnippet,\n    {\n      customStyle: { backgroundColor: theme.palette.background.default },\n      text: props.definition,\n      language: \"protobuf\",\n      showCopyCodeButton: true\n    }\n  );\n};\n\nconst TrpcApiDefinitionWidget = (props) => {\n  const { definition } = props;\n  const theme = useTheme();\n  return /* @__PURE__ */ React.createElement(\n    CodeSnippet,\n    {\n      customStyle: { backgroundColor: theme.palette.background.default },\n      text: definition,\n      language: \"typescript\",\n      showCopyCodeButton: true\n    }\n  );\n};\n\nfunction defaultDefinitionWidgets() {\n  return [\n    {\n      type: \"openapi\",\n      title: \"OpenAPI\",\n      rawLanguage: \"yaml\",\n      component: (definition) => /* @__PURE__ */ React.createElement(OpenApiDefinitionWidget, { definition })\n    },\n    {\n      type: \"asyncapi\",\n      title: \"AsyncAPI\",\n      rawLanguage: \"yaml\",\n      component: (definition) => /* @__PURE__ */ React.createElement(AsyncApiDefinitionWidget, { definition })\n    },\n    {\n      type: \"graphql\",\n      title: \"GraphQL\",\n      rawLanguage: \"graphql\",\n      component: (definition) => /* @__PURE__ */ React.createElement(GraphQlDefinitionWidget, { definition })\n    },\n    {\n      type: \"grpc\",\n      title: \"gRPC\",\n      component: (definition) => /* @__PURE__ */ React.createElement(GrpcApiDefinitionWidget, { definition })\n    },\n    {\n      type: \"trpc\",\n      title: \"tRPC\",\n      component: (definition) => /* @__PURE__ */ React.createElement(TrpcApiDefinitionWidget, { definition })\n    }\n  ];\n}\n\nexport { AsyncApiDefinitionWidget as A, GraphQlDefinitionWidget as G, OpenApiDefinitionWidget as O, TrpcApiDefinitionWidget as T, apiDocsConfigRef as a, registerComponentRouteRef as b, defaultDefinitionWidgets as d, rootRoute as r };\n//# sourceMappingURL=ApiDefinitionWidget-798ee85f.esm.js.map\n","export { A as ApiExplorerIndexPage, D as DefaultApiExplorerPage } from './esm/ApiExplorerPage-ce544a95.esm.js';\nexport { A as ApiDefinitionCard } from './esm/ApiDefinitionCard-504c2432.esm.js';\nimport { r as rootRoute, a as apiDocsConfigRef, b as registerComponentRouteRef, d as defaultDefinitionWidgets } from './esm/ApiDefinitionWidget-798ee85f.esm.js';\nexport { A as AsyncApiDefinitionWidget, G as GraphQlDefinitionWidget, O as OpenApiDefinitionWidget, T as TrpcApiDefinitionWidget, a as apiDocsConfigRef, d as defaultDefinitionWidgets } from './esm/ApiDefinitionWidget-798ee85f.esm.js';\nexport { A as ApiTypeTitle, P as PlainApiDefinitionWidget } from './esm/ApiTypeTitle-cc79a2f3.esm.js';\nexport { A as ApiDefinitionDialog, C as ConsumedApisCard, H as HasApisCard, P as ProvidedApisCard } from './esm/ProvidedApisCard-e92fbd29.esm.js';\nexport { C as ConsumingComponentsCard, P as ProvidingComponentsCard } from './esm/ProvidingComponentsCard-5b679445.esm.js';\nimport '@backstage/plugin-catalog-react';\nimport '@material-ui/lab';\nimport 'react';\nimport '@backstage/core-components';\nimport { createPlugin, createApiFactory, createRoutableExtension, createComponentExtension } from '@backstage/core-plugin-api';\nimport '@material-ui/core/Typography';\nimport 'react-router-dom';\nimport '@backstage/plugin-catalog';\nimport '@backstage/plugin-permission-react';\nimport '@backstage/plugin-catalog-common/alpha';\nimport '@material-ui/core/styles';\nimport '@backstage/catalog-model';\nimport '@material-ui/core';\nimport '@material-ui/icons/Extension';\n\nconst apiDocsPlugin = createPlugin({\n  id: \"api-docs\",\n  routes: {\n    root: rootRoute\n  },\n  apis: [\n    createApiFactory({\n      api: apiDocsConfigRef,\n      deps: {},\n      factory: () => {\n        const definitionWidgets = defaultDefinitionWidgets();\n        return {\n          getApiDefinitionWidget: (apiEntity) => {\n            return definitionWidgets.find((d) => d.type === apiEntity.spec.type);\n          }\n        };\n      }\n    })\n  ],\n  externalRoutes: {\n    registerApi: registerComponentRouteRef\n  }\n});\nconst ApiExplorerPage = apiDocsPlugin.provide(\n  createRoutableExtension({\n    name: \"ApiExplorerPage\",\n    component: () => import('./esm/index-435dfc01.esm.js').then((m) => m.ApiExplorerIndexPage),\n    mountPoint: rootRoute\n  })\n);\nconst EntityApiDefinitionCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityApiDefinitionCard\",\n    component: {\n      lazy: () => import('./esm/index-6f21bd2e.esm.js').then((m) => m.ApiDefinitionCard)\n    }\n  })\n);\nconst EntityConsumedApisCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityConsumedApisCard\",\n    component: {\n      lazy: () => import('./esm/index-5f0727eb.esm.js').then((m) => m.ConsumedApisCard)\n    }\n  })\n);\nconst EntityConsumingComponentsCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityConsumingComponentsCard\",\n    component: {\n      lazy: () => import('./esm/index-c969ed3d.esm.js').then(\n        (m) => m.ConsumingComponentsCard\n      )\n    }\n  })\n);\nconst EntityProvidedApisCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityProvidedApisCard\",\n    component: {\n      lazy: () => import('./esm/index-5f0727eb.esm.js').then((m) => m.ProvidedApisCard)\n    }\n  })\n);\nconst EntityProvidingComponentsCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityProvidingComponentsCard\",\n    component: {\n      lazy: () => import('./esm/index-c969ed3d.esm.js').then(\n        (m) => m.ProvidingComponentsCard\n      )\n    }\n  })\n);\nconst EntityHasApisCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasApisCard\",\n    component: {\n      lazy: () => import('./esm/index-5f0727eb.esm.js').then((m) => m.HasApisCard)\n    }\n  })\n);\n\nexport { ApiExplorerPage, EntityApiDefinitionCard, EntityConsumedApisCard, EntityConsumingComponentsCard, EntityHasApisCard, EntityProvidedApisCard, EntityProvidingComponentsCard, apiDocsPlugin, apiDocsPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","import { createRouteRef, createApiRef, createPlugin, createApiFactory, identityApiRef, discoveryApiRef, fetchApiRef, createRoutableExtension, useApi, alertApiRef, useElementFilter, useRouteRef } from '@backstage/core-plugin-api';\nimport { stringifyEntityRef, parseEntityRef } from '@backstage/catalog-model';\nimport { ResponseError } from '@backstage/errors';\nimport React, { useState, useEffect } from 'react';\nimport { StatusWarning, StatusOK, Avatar, Link, HeaderIconLinkRow, ItemCardHeader, ErrorPanel, InfoCard, Content, SupportButton } from '@backstage/core-components';\nimport { TextField, IconButton, makeStyles, Typography, Dialog, Button, Grid, Card, CardContent, DialogContent as DialogContent$1, DialogActions as DialogActions$1, CardHeader, Divider, CardActionArea, Box, TablePagination, FormControl as FormControl$1, Select as Select$1, MenuItem as MenuItem$1 } from '@material-ui/core';\nimport { DateTime } from 'luxon';\nimport Typography$1 from '@material-ui/core/Typography';\nimport EditIcon from '@material-ui/icons/Edit';\nimport ChatIcon from '@material-ui/icons/Chat';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport InsertLinkIcon from '@material-ui/icons/InsertLink';\nimport DashboardIcon from '@material-ui/icons/Dashboard';\nimport CloseIcon from '@material-ui/icons/Close';\nimport LinkOffIcon from '@material-ui/icons/LinkOff';\nimport Description from '@material-ui/icons/Description';\nimport { Controller, useForm } from 'react-hook-form';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport { MuiPickersUtilsProvider, KeyboardDatePicker } from '@material-ui/pickers';\nimport LuxonUtils from '@date-io/luxon';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport IconButton$1 from '@material-ui/core/IconButton';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport { withStyles, createStyles } from '@material-ui/core/styles';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport MuiDialogActions from '@material-ui/core/DialogActions';\nimport Button$1 from '@material-ui/core/Button';\nimport Dialog$1 from '@material-ui/core/Dialog';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport { Autocomplete, Alert } from '@material-ui/lab';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport { entityRouteRef, catalogApiRef, useEntity } from '@backstage/plugin-catalog-react';\nimport StorefrontIcon from '@material-ui/icons/Storefront';\nimport SearchBar from 'material-ui-search-bar';\n\nconst rootRouteRef = createRouteRef({\n  id: \"bazaar\"\n});\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst bazaarApiRef = createApiRef({\n  id: \"bazaar\"\n});\nconst isBazaarAvailable = async (entity, context) => {\n  const bazaarClient = context.apis.get(bazaarApiRef);\n  if (bazaarClient === void 0) {\n    return false;\n  }\n  const entityRef = stringifyEntityRef({\n    kind: entity.kind,\n    name: entity.metadata.name,\n    namespace: entity.metadata.namespace\n  });\n  const response = await bazaarClient.getProjectByRef(entityRef);\n  const project = await response.json();\n  return project.data.length > 0;\n};\nclass BazaarClient {\n  constructor(options) {\n    __publicField(this, \"identityApi\");\n    __publicField(this, \"discoveryApi\");\n    __publicField(this, \"fetchApi\");\n    this.identityApi = options.identityApi;\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = options.fetchApi;\n  }\n  async updateProject(bazaarProject) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"bazaar\");\n    return await this.fetchApi.fetch(`${baseUrl}/projects`, {\n      method: \"PUT\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(bazaarProject)\n    }).then((resp) => resp.json());\n  }\n  async addProject(bazaarProject) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"bazaar\");\n    return await this.fetchApi.fetch(`${baseUrl}/projects`, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(bazaarProject)\n    }).then((resp) => resp.json());\n  }\n  async getProjectById(id) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"bazaar\");\n    const response = await this.fetchApi.fetch(\n      `${baseUrl}/projects/${encodeURIComponent(id)}`\n    );\n    return response.ok ? response : null;\n  }\n  async getProjectByRef(entityRef) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"bazaar\");\n    const response = await this.fetchApi.fetch(\n      `${baseUrl}/projects/${encodeURIComponent(entityRef)}`\n    );\n    return response.ok ? response : null;\n  }\n  async getMembers(id) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"bazaar\");\n    return await this.fetchApi.fetch(`${baseUrl}/projects/${encodeURIComponent(id)}/members`).then((resp) => resp.json());\n  }\n  async addMember(id, userId) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"bazaar\");\n    const { picture } = await this.identityApi.getProfileInfo();\n    await this.fetchApi.fetch(\n      `${baseUrl}/projects/${encodeURIComponent(\n        id\n      )}/member/${encodeURIComponent(userId)}`,\n      {\n        method: \"PUT\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({ picture })\n      }\n    );\n  }\n  async deleteMember(id, userId) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"bazaar\");\n    await this.fetchApi.fetch(\n      `${baseUrl}/projects/${encodeURIComponent(\n        id\n      )}/member/${encodeURIComponent(userId)}`,\n      { method: \"DELETE\" }\n    );\n  }\n  async getProjects(limit, order) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"bazaar\");\n    const params = {\n      ...limit ? { limit: limit.toString() } : {},\n      ...order ? { order } : {}\n    };\n    const query = new URLSearchParams(params);\n    const url = `projects?${query.toString()}`;\n    const data = await this.fetchApi.fetch(`${baseUrl}/${url}`);\n    if (!data.ok) {\n      throw await ResponseError.fromResponse(data);\n    }\n    return data.json();\n  }\n  async deleteProject(id) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"bazaar\");\n    await this.fetchApi.fetch(`${baseUrl}/projects/${encodeURIComponent(id)}`, {\n      method: \"DELETE\"\n    });\n  }\n}\n\nconst bazaarPlugin = createPlugin({\n  id: \"bazaar\",\n  routes: {\n    root: rootRouteRef\n  },\n  apis: [\n    createApiFactory({\n      api: bazaarApiRef,\n      deps: {\n        identityApi: identityApiRef,\n        discoveryApi: discoveryApiRef,\n        fetchApi: fetchApiRef\n      },\n      factory: ({ identityApi, discoveryApi, fetchApi }) => new BazaarClient({ identityApi, discoveryApi, fetchApi })\n    })\n  ]\n});\nconst BazaarPage = bazaarPlugin.provide(\n  createRoutableExtension({\n    name: \"BazaarPage\",\n    component: () => import('./esm/index-ff0e32d9.esm.js').then((m) => m.HomePage),\n    mountPoint: rootRouteRef\n  })\n);\n\nconst statuses = {\n  proposed: /* @__PURE__ */ React.createElement(StatusWarning, null, \"proposed\"),\n  ongoing: /* @__PURE__ */ React.createElement(StatusOK, null, \"ongoing\")\n};\nconst StatusTag = ({ status, styles }) => {\n  return /* @__PURE__ */ React.createElement(\"div\", { className: styles }, statuses[status]);\n};\n\nconst InputField = ({\n  inputType,\n  error,\n  control,\n  helperText,\n  placeholder,\n  rules\n}) => {\n  const label = inputType.charAt(0).toLocaleUpperCase(\"en-US\") + inputType.slice(1);\n  return /* @__PURE__ */ React.createElement(\n    Controller,\n    {\n      name: inputType,\n      control,\n      rules,\n      render: ({ field }) => /* @__PURE__ */ React.createElement(\n        TextField,\n        {\n          ...field,\n          required: rules == null ? void 0 : rules.required,\n          margin: \"dense\",\n          multiline: true,\n          id: \"title\",\n          type: \"text\",\n          fullWidth: true,\n          label,\n          placeholder,\n          error: !!error,\n          helperText: error && helperText\n        }\n      )\n    }\n  );\n};\n\nconst InputSelector = ({ name, options, control, error }) => {\n  const label = name.charAt(0).toLocaleUpperCase(\"en-US\") + name.slice(1);\n  return /* @__PURE__ */ React.createElement(\n    Controller,\n    {\n      name,\n      control,\n      rules: {\n        required: true\n      },\n      render: ({ field }) => /* @__PURE__ */ React.createElement(FormControl, { fullWidth: true }, /* @__PURE__ */ React.createElement(\n        InputLabel,\n        {\n          required: true,\n          htmlFor: \"demo-simple-select-outlined\",\n          id: \"demo-simple-select-outlined-label\",\n          style: {\n            marginTop: \"0.25rem\"\n          }\n        },\n        label\n      ), /* @__PURE__ */ React.createElement(\n        Select,\n        {\n          ...field,\n          labelId: \"demo-simple-select-outlined-label\",\n          id: \"demo-simple-select-outlined\",\n          label,\n          error: !!error\n        },\n        options.map((option) => {\n          return /* @__PURE__ */ React.createElement(MenuItem, { key: option, value: option }, option);\n        })\n      ))\n    }\n  );\n};\n\nconst DateSelector = ({ name, control, setValue }) => {\n  const label = `${name.charAt(0).toLocaleUpperCase(\"en-US\") + name.slice(1, name.indexOf(\"D\"))} date`;\n  return /* @__PURE__ */ React.createElement(\n    Controller,\n    {\n      name,\n      control,\n      render: ({ field }) => /* @__PURE__ */ React.createElement(FormControl, null, /* @__PURE__ */ React.createElement(MuiPickersUtilsProvider, { utils: LuxonUtils }, /* @__PURE__ */ React.createElement(\n        KeyboardDatePicker,\n        {\n          disableToolbar: true,\n          format: \"dd-MM-yyyy\",\n          label,\n          value: field.value,\n          onChange: (date) => {\n            setValue(name, date == null ? void 0 : date.toISO());\n          },\n          InputProps: {\n            endAdornment: /* @__PURE__ */ React.createElement(IconButton, { onClick: () => setValue(name, null) }, /* @__PURE__ */ React.createElement(ClearIcon, null))\n          },\n          InputAdornmentProps: {\n            position: \"start\"\n          }\n        }\n      )))\n    }\n  );\n};\n\nconst useStyles$a = makeStyles({\n  container: {\n    marginTop: \"0.25rem\",\n    textAlign: \"center\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\"\n  },\n  startDate: {\n    float: \"left\"\n  },\n  endDate: {\n    float: \"right\"\n  },\n  dash: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    fontSize: \"1.5rem\",\n    margin: \"0 1rem\"\n  }\n});\nconst DoubleDateSelector = ({ control, setValue }) => {\n  const classes = useStyles$a();\n  return /* @__PURE__ */ React.createElement(\"div\", { className: classes.container }, /* @__PURE__ */ React.createElement(\"div\", { className: classes.startDate }, /* @__PURE__ */ React.createElement(DateSelector, { name: \"startDate\", control, setValue })), /* @__PURE__ */ React.createElement(Typography, { className: classes.dash }, \"-\"), /* @__PURE__ */ React.createElement(\"div\", { className: classes.endDate }, /* @__PURE__ */ React.createElement(DateSelector, { name: \"endDate\", control, setValue })));\n};\n\nconst styles = (theme) => createStyles({\n  root: {\n    margin: 0,\n    padding: theme.spacing(2)\n  },\n  closeButton: {\n    position: \"absolute\",\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500]\n  }\n});\nconst DialogContent = withStyles((theme) => ({\n  root: {\n    padding: theme.spacing(2)\n  }\n}))(MuiDialogContent);\nconst DialogActions = withStyles((theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(1)\n  }\n}))(MuiDialogActions);\nconst CustomDialogTitle = withStyles(styles)(\n  (props) => {\n    const { children, classes, onClose, ...other } = props;\n    return /* @__PURE__ */ React.createElement(MuiDialogTitle, { disableTypography: true, className: classes.root, ...other }, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"h6\" }, children), onClose ? /* @__PURE__ */ React.createElement(\n      IconButton$1,\n      {\n        \"aria-label\": \"close\",\n        className: classes.closeButton,\n        onClick: onClose\n      },\n      /* @__PURE__ */ React.createElement(CloseIcon, null)\n    ) : null);\n  }\n);\n\nconst ProjectDialog = ({\n  handleSave,\n  isAddForm,\n  title,\n  defaultValues,\n  open,\n  projectSelector,\n  deleteButton,\n  handleClose\n}) => {\n  const {\n    handleSubmit,\n    reset,\n    control,\n    getValues,\n    formState: { errors },\n    setValue\n  } = useForm({\n    mode: \"onChange\",\n    defaultValues\n  });\n  const handleSaveForm = () => {\n    handleSave(getValues, reset);\n  };\n  const handleCloseDialog = () => {\n    handleClose();\n    reset(defaultValues);\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\n    Dialog,\n    {\n      fullWidth: true,\n      maxWidth: \"xs\",\n      onClose: handleCloseDialog,\n      \"aria-labelledby\": \"customized-dialog-title\",\n      open\n    },\n    /* @__PURE__ */ React.createElement(\n      CustomDialogTitle,\n      {\n        id: \"customized-dialog-title\",\n        onClose: handleCloseDialog\n      },\n      title\n    ),\n    /* @__PURE__ */ React.createElement(DialogContent, { style: { padding: \"1rem\", paddingTop: \"0rem\" }, dividers: true }, /* @__PURE__ */ React.createElement(\n      InputField,\n      {\n        error: errors.title,\n        control,\n        rules: {\n          required: true\n        },\n        inputType: \"title\",\n        helperText: \"Please enter a title for your project\"\n      }\n    ), /* @__PURE__ */ React.createElement(\n      InputField,\n      {\n        error: errors.description,\n        control,\n        rules: {\n          required: true\n        },\n        inputType: \"description\",\n        helperText: \"Please enter a description\"\n      }\n    ), /* @__PURE__ */ React.createElement(\n      InputSelector,\n      {\n        control,\n        name: \"status\",\n        options: [\"proposed\", \"ongoing\"]\n      }\n    ), /* @__PURE__ */ React.createElement(\n      InputSelector,\n      {\n        control,\n        name: \"size\",\n        options: [\"small\", \"medium\", \"large\"]\n      }\n    ), /* @__PURE__ */ React.createElement(\n      InputField,\n      {\n        error: errors.responsible,\n        control,\n        rules: {\n          required: true\n        },\n        inputType: \"responsible\",\n        helperText: \"Please enter a contact person\",\n        placeholder: \"Contact person of the project\"\n      }\n    ), isAddForm && projectSelector, /* @__PURE__ */ React.createElement(\n      InputField,\n      {\n        error: errors.community,\n        control,\n        rules: {\n          required: false,\n          pattern: RegExp(\"^(https?)://\")\n        },\n        inputType: \"community\",\n        helperText: \"Please enter a link starting with http/https\",\n        placeholder: \"Community link to e.g. Teams or Discord\"\n      }\n    ), /* @__PURE__ */ React.createElement(\n      InputField,\n      {\n        error: errors.docs,\n        control,\n        rules: {\n          required: false,\n          pattern: RegExp(\"^(https?)://\")\n        },\n        inputType: \"docs\",\n        helperText: \"Please enter a link starting with http/https\",\n        placeholder: \"Project docs link\"\n      }\n    ), /* @__PURE__ */ React.createElement(DoubleDateSelector, { setValue, control })),\n    /* @__PURE__ */ React.createElement(DialogActions, null, !isAddForm && deleteButton, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        onClick: handleSubmit(handleSaveForm),\n        color: \"primary\",\n        type: \"submit\"\n      },\n      \"Submit\"\n    ))\n  ));\n};\n\nconst ConfirmationDialog = ({\n  open,\n  handleClose,\n  message,\n  type,\n  handleSubmit\n}) => {\n  return /* @__PURE__ */ React.createElement(\n    Dialog$1,\n    {\n      fullWidth: true,\n      maxWidth: \"xs\",\n      onClose: handleClose,\n      \"aria-labelledby\": \"customized-dialog-title\",\n      open\n    },\n    /* @__PURE__ */ React.createElement(CustomDialogTitle, { id: \"customized-dialog-title\", onClose: handleClose }, type.charAt(0).toLocaleUpperCase(\"en-US\") + type.slice(1), \" project\"),\n    /* @__PURE__ */ React.createElement(DialogContent, { dividers: true }, message),\n    /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(Button$1, { onClick: handleSubmit, color: \"primary\", type: \"submit\" }, type))\n  );\n};\n\nconst useStyles$9 = makeStyles({\n  button: {\n    marginLeft: \"0\",\n    marginRight: \"auto\"\n  },\n  wordBreak: {\n    wordBreak: \"break-all\",\n    whiteSpace: \"normal\",\n    margin: \"-0.25rem 0\"\n  }\n});\nconst EditProjectDialog = ({\n  bazaarProject,\n  openEdit,\n  handleEditClose,\n  handleCardClose,\n  fetchBazaarProject\n}) => {\n  var _a, _b;\n  const classes = useStyles$9();\n  const bazaarApi = useApi(bazaarApiRef);\n  const alertApi = useApi(alertApiRef);\n  const [openDelete, setOpenDelete] = useState(false);\n  const [defaultValues, setDefaultValues] = useState({\n    ...bazaarProject,\n    startDate: (_a = bazaarProject.startDate) != null ? _a : null,\n    endDate: (_b = bazaarProject.endDate) != null ? _b : null\n  });\n  const handleDeleteClose = () => {\n    setOpenDelete(false);\n    handleEditClose();\n    if (handleCardClose)\n      handleCardClose();\n  };\n  const handleDeleteSubmit = async () => {\n    await bazaarApi.deleteProject(bazaarProject.id);\n    handleDeleteClose();\n    fetchBazaarProject();\n    alertApi.post({\n      message: `Deleted project '${bazaarProject.title}' from the Bazaar list`,\n      severity: \"success\",\n      display: \"transient\"\n    });\n  };\n  useEffect(() => {\n    var _a2, _b2;\n    setDefaultValues({\n      ...bazaarProject,\n      startDate: (_a2 = bazaarProject.startDate) != null ? _a2 : null,\n      endDate: (_b2 = bazaarProject.endDate) != null ? _b2 : null\n    });\n  }, [bazaarProject]);\n  const handleEditSubmit = async (getValues) => {\n    var _a2, _b2;\n    const formValues = getValues();\n    const updateResponse = await bazaarApi.updateProject({\n      ...formValues,\n      id: bazaarProject.id,\n      entityRef: bazaarProject.entityRef,\n      membersCount: bazaarProject.membersCount,\n      startDate: (_a2 = formValues == null ? void 0 : formValues.startDate) != null ? _a2 : null,\n      endDate: (_b2 = formValues == null ? void 0 : formValues.endDate) != null ? _b2 : null\n    });\n    if (updateResponse.status === \"ok\")\n      fetchBazaarProject();\n    handleEditClose();\n    alertApi.post({\n      message: `Updated project '${formValues.title}' in the Bazaar list`,\n      severity: \"success\",\n      display: \"transient\"\n    });\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\n    ConfirmationDialog,\n    {\n      open: openDelete,\n      handleClose: handleDeleteClose,\n      message: [\n        \"Are you sure you want to delete \",\n        /* @__PURE__ */ React.createElement(\"b\", { key: bazaarProject.id, className: classes.wordBreak }, bazaarProject.title),\n        \" from the Bazaar?\"\n      ],\n      type: \"delete\",\n      handleSubmit: handleDeleteSubmit\n    }\n  ), /* @__PURE__ */ React.createElement(\n    ProjectDialog,\n    {\n      title: \"Edit project\",\n      handleSave: handleEditSubmit,\n      isAddForm: false,\n      defaultValues,\n      open: openEdit,\n      handleClose: handleEditClose,\n      deleteButton: /* @__PURE__ */ React.createElement(\n        Button,\n        {\n          color: \"primary\",\n          type: \"submit\",\n          className: classes.button,\n          onClick: () => {\n            setOpenDelete(true);\n          }\n        },\n        \"Delete project\"\n      )\n    }\n  ));\n};\n\nconst useStyles$8 = makeStyles((theme) => ({\n  value: {\n    fontWeight: \"bold\",\n    overflow: \"hidden\",\n    lineHeight: \"24px\",\n    wordBreak: \"break-word\"\n  },\n  label: {\n    color: theme.palette.text.secondary,\n    textTransform: \"uppercase\",\n    fontSize: \"10px\",\n    fontWeight: \"bold\",\n    letterSpacing: 0.5,\n    overflow: \"hidden\",\n    whiteSpace: \"nowrap\"\n  }\n}));\nfunction AboutField(props) {\n  const { label, value, gridSizes, children } = props;\n  const classes = useStyles$8();\n  const childElements = useElementFilter(children, (c) => c.getElements());\n  const content = childElements.length > 0 ? childElements : /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", className: classes.value }, value || `unknown`);\n  return /* @__PURE__ */ React.createElement(Grid, { item: true, ...gridSizes }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h2\", className: classes.label }, label), content);\n}\n\nconst CardContentFields = ({\n  bazaarProject,\n  members,\n  descriptionSize,\n  membersSize\n}) => {\n  var _a, _b;\n  const catalogEntityRoute = useRouteRef(entityRouteRef);\n  return /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(Grid, { container: true }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: descriptionSize }, /* @__PURE__ */ React.createElement(AboutField, { label: \"Description\" }, bazaarProject.description.split(\"\\n\").map((str, i) => /* @__PURE__ */ React.createElement(Typography, { key: i, variant: \"body2\", paragraph: true }, str)))), /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      style: {\n        display: \"flex\",\n        justifyContent: \"flex-end\"\n      },\n      item: true,\n      xs: membersSize\n    },\n    /* @__PURE__ */ React.createElement(AboutField, { label: \"Latest members\" }, members.length ? members.slice(0, 7).map((member) => {\n      return /* @__PURE__ */ React.createElement(\n        \"div\",\n        {\n          style: {\n            textAlign: \"left\",\n            backgroundColor: \"\",\n            marginBottom: \"0.3rem\",\n            marginTop: \"0.3rem\",\n            display: \"block\"\n          },\n          key: member.userId\n        },\n        /* @__PURE__ */ React.createElement(\n          Avatar,\n          {\n            displayName: member.userId,\n            customStyles: {\n              width: \"19px\",\n              height: \"19px\",\n              fontSize: \"8px\",\n              float: \"left\",\n              marginRight: \"0.3rem\",\n              marginTop: \"0rem\",\n              marginBottom: \"0rem\",\n              alignItems: \"left\",\n              textAlign: \"left\"\n            },\n            picture: member.picture\n          }\n        ),\n        /* @__PURE__ */ React.createElement(\n          Link,\n          {\n            target: \"_blank\",\n            to: member.userRef ? `${catalogEntityRoute(\n              parseEntityRef(member.userRef)\n            )}` : `http://github.com/${member.userId}`\n          },\n          member == null ? void 0 : member.userId\n        )\n      );\n    }) : /* @__PURE__ */ React.createElement(\"div\", null))\n  ), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 2 }, /* @__PURE__ */ React.createElement(AboutField, { label: \"Status\" }, /* @__PURE__ */ React.createElement(StatusTag, { status: bazaarProject.status }))), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 2 }, /* @__PURE__ */ React.createElement(AboutField, { label: \"size\" }, /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\" }, bazaarProject.size))), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 2 }, /* @__PURE__ */ React.createElement(AboutField, { label: \"Start date\" }, /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\" }, ((_a = bazaarProject.startDate) == null ? void 0 : _a.substring(0, 10)) || \"\"))), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 2 }, /* @__PURE__ */ React.createElement(AboutField, { label: \"End date\" }, /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\" }, ((_b = bazaarProject.endDate) == null ? void 0 : _b.substring(0, 10)) || \"\"))), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 4 }, /* @__PURE__ */ React.createElement(AboutField, { label: \"Responsible\" }, /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\" }, bazaarProject.responsible || \"\")))))));\n};\n\nconst useStyles$7 = makeStyles({\n  container: { width: \"100%\", minWidth: \"22rem\" },\n  autocomplete: { overflow: \"hidden\" }\n});\nconst ProjectSelector = ({\n  catalogEntities,\n  onChange,\n  disableClearable,\n  defaultValue,\n  label\n}) => {\n  const classes = useStyles$7();\n  return /* @__PURE__ */ React.createElement(\"div\", { className: classes.container }, /* @__PURE__ */ React.createElement(\n    Autocomplete,\n    {\n      className: classes.autocomplete,\n      fullWidth: true,\n      disableClearable,\n      defaultValue,\n      options: catalogEntities,\n      getOptionLabel: (option) => {\n        var _a;\n        return (_a = option == null ? void 0 : option.metadata) == null ? void 0 : _a.name;\n      },\n      renderOption: (option) => {\n        var _a;\n        return /* @__PURE__ */ React.createElement(Typography$1, { component: \"span\" }, (_a = option == null ? void 0 : option.metadata) == null ? void 0 : _a.name);\n      },\n      renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, { ...params, label }),\n      onChange: (_, data) => {\n        onChange(data);\n      }\n    }\n  ));\n};\n\nconst useStyles$6 = makeStyles({\n  content: { padding: \"0 1rem\" }\n});\nconst LinkProjectDialog = ({\n  openProjectSelector,\n  handleProjectSelectorClose,\n  catalogEntities,\n  bazaarProject,\n  fetchBazaarProject,\n  initEntity\n}) => {\n  const classes = useStyles$6();\n  const bazaarApi = useApi(bazaarApiRef);\n  const alertApi = useApi(alertApiRef);\n  const [selectedEntity, setSelectedEntity] = useState(initEntity);\n  const [selectedEntityName, setSelectedEntityName] = useState(\"\");\n  const handleEntityClick = (entity) => {\n    setSelectedEntity(entity);\n    setSelectedEntityName(entity.metadata.name);\n  };\n  const handleSubmit = async () => {\n    handleProjectSelectorClose();\n    const updateResponse = await bazaarApi.updateProject({\n      ...bazaarProject,\n      entityRef: stringifyEntityRef(selectedEntity)\n    });\n    if (updateResponse.status === \"ok\") {\n      fetchBazaarProject();\n      alertApi.post({\n        message: `linked entity '${selectedEntityName}' to the project ${bazaarProject.title}`,\n        severity: \"success\",\n        display: \"transient\"\n      });\n    }\n  };\n  return /* @__PURE__ */ React.createElement(Dialog, { onClose: handleProjectSelectorClose, open: openProjectSelector }, /* @__PURE__ */ React.createElement(\n    CustomDialogTitle,\n    {\n      id: \"customized-dialog-title\",\n      onClose: handleProjectSelectorClose\n    },\n    \"Select entity\"\n  ), /* @__PURE__ */ React.createElement(DialogContent$1, { className: classes.content, dividers: true }, /* @__PURE__ */ React.createElement(\n    ProjectSelector,\n    {\n      label: \"\",\n      onChange: handleEntityClick,\n      catalogEntities: catalogEntities || [],\n      disableClearable: true,\n      defaultValue: catalogEntities[0] || null\n    }\n  )), /* @__PURE__ */ React.createElement(DialogActions$1, null, /* @__PURE__ */ React.createElement(Button, { onClick: handleSubmit, color: \"primary\", type: \"submit\" }, \"OK\")));\n};\n\nconst sortMembers = (m1, m2) => {\n  return new Date(m2.joinDate).getTime() - new Date(m1.joinDate).getTime();\n};\nconst sortByDate = (a, b) => {\n  const dateA = new Date(a.updatedAt).getTime();\n  const dateB = new Date(b.updatedAt).getTime();\n  return dateB - dateA;\n};\nconst sortByTitle = (a, b) => {\n  return a.title.localeCompare(b.title);\n};\nconst sortByTitleDescending = (a, b) => {\n  return b.title.localeCompare(a.title);\n};\nconst sortByMembers = (a, b) => {\n  return b.membersCount - a.membersCount;\n};\n\nconst parseBazaarProject = (metadata) => {\n  return {\n    id: metadata.id,\n    entityRef: metadata.entity_ref,\n    title: metadata.title,\n    community: metadata.community,\n    description: metadata.description,\n    status: metadata.status,\n    updatedAt: metadata.updated_at,\n    membersCount: metadata.members_count,\n    size: metadata.size,\n    startDate: metadata.start_date,\n    endDate: metadata.end_date,\n    responsible: metadata.responsible,\n    docs: metadata.docs\n  };\n};\nconst parseMember = (member) => {\n  return {\n    itemId: member.item_id,\n    userId: member.user_id,\n    userRef: member.user_ref,\n    joinDate: member.join_date,\n    picture: member.picture\n  };\n};\nconst parseBazaarResponse = async (response) => {\n  if (response) {\n    const metadata = await response.json().then((resp) => resp.data[0]);\n    if (metadata) {\n      return parseBazaarProject(metadata);\n    }\n  }\n  return null;\n};\n\nconst fetchProjectMembers = async (bazaarApi, project) => {\n  const response = await bazaarApi.getMembers(project.id);\n  if (response.data.length > 0) {\n    const dbMembers = response.data.map((member) => {\n      return parseMember(member);\n    });\n    dbMembers.sort(sortMembers);\n    return dbMembers;\n  }\n  return [];\n};\nconst fetchCatalogItems = async (catalogApi) => {\n  const entities = await catalogApi.getEntities({\n    filter: {\n      kind: [\"Component\", \"Resource\"]\n    },\n    fields: [\"kind\", \"metadata.name\", \"metadata.namespace\"]\n  });\n  return entities.items;\n};\n\nconst useStyles$5 = makeStyles({\n  wordBreak: {\n    wordBreak: \"break-all\",\n    whiteSpace: \"normal\",\n    margin: \"-0.25rem 0\"\n  }\n});\nconst HomePageBazaarInfoCard = ({\n  initProject,\n  handleClose,\n  initEntity\n}) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n;\n  const classes = useStyles$5();\n  const entityLink = useRouteRef(entityRouteRef);\n  const bazaarApi = useApi(bazaarApiRef);\n  const identity = useApi(identityApiRef);\n  const alertApi = useApi(alertApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const [openEdit, setOpenEdit] = useState(false);\n  const [openProjectSelector, setOpenProjectSelector] = useState(false);\n  const [openUnlink, setOpenUnlink] = useState(false);\n  const [isMember, setIsMember] = useState(false);\n  const [catalogEntities, fetchCatalogEntities] = useAsyncFn(async () => {\n    const entities = await fetchCatalogItems(catalogApi);\n    const bazaarProjects = await bazaarApi.getProjects();\n    const bazaarLinkedRefs = bazaarProjects.data.filter((entity) => entity.entity_ref !== null).map((entity) => entity.entity_ref);\n    return entities.filter(\n      (entity) => !bazaarLinkedRefs.includes(stringifyEntityRef(entity))\n    );\n  });\n  const [bazaarProject, fetchBazaarProject] = useAsyncFn(async () => {\n    const response = await bazaarApi.getProjectById(initProject.id);\n    return await parseBazaarResponse(response);\n  });\n  const [members, fetchMembers] = useAsyncFn(async () => {\n    var _a2;\n    return fetchProjectMembers(bazaarApi, (_a2 = bazaarProject.value) != null ? _a2 : initProject);\n  });\n  const [userId, fetchUserId] = useAsyncFn(async () => {\n    return await (await identity.getProfileInfo()).displayName;\n  });\n  useEffect(() => {\n    fetchMembers();\n    fetchBazaarProject();\n    fetchCatalogEntities();\n    fetchUserId();\n  }, [fetchMembers, fetchBazaarProject, fetchCatalogEntities, fetchUserId]);\n  useEffect(() => {\n    var _a2;\n    if (members.value && userId.value) {\n      setIsMember(\n        ((_a2 = members.value) == null ? void 0 : _a2.map((member) => member.userId).indexOf(userId.value)) >= 0\n      );\n    }\n  }, [bazaarProject.value, members, identity, userId.value]);\n  const handleMembersClick = async () => {\n    if (userId.value) {\n      if (!isMember) {\n        await bazaarApi.addMember(bazaarProject.value.id, userId.value);\n      } else {\n        await bazaarApi.deleteMember(bazaarProject.value.id, userId.value);\n      }\n      setIsMember(!isMember);\n      fetchMembers();\n    }\n  };\n  const getEntityPageLink = () => {\n    var _a2;\n    if ((_a2 = bazaarProject == null ? void 0 : bazaarProject.value) == null ? void 0 : _a2.entityRef) {\n      const { name, kind, namespace } = parseEntityRef(\n        bazaarProject.value.entityRef\n      );\n      return entityLink({ kind, namespace, name });\n    }\n    return \"\";\n  };\n  const handleLink = () => {\n    var _a2;\n    if ((_a2 = bazaarProject.value) == null ? void 0 : _a2.entityRef) {\n      setOpenUnlink(true);\n    } else {\n      fetchCatalogEntities();\n      setOpenProjectSelector(true);\n    }\n  };\n  const links = [\n    {\n      label: \"Entity page\",\n      icon: /* @__PURE__ */ React.createElement(DashboardIcon, null),\n      href: ((_a = bazaarProject.value) == null ? void 0 : _a.entityRef) ? getEntityPageLink() : \"\",\n      disabled: ((_b = bazaarProject.value) == null ? void 0 : _b.entityRef) === null\n    },\n    {\n      label: ((_c = bazaarProject.value) == null ? void 0 : _c.entityRef) ? \"Unlink project\" : \"Link project\",\n      icon: ((_d = bazaarProject.value) == null ? void 0 : _d.entityRef) ? /* @__PURE__ */ React.createElement(LinkOffIcon, null) : /* @__PURE__ */ React.createElement(InsertLinkIcon, null),\n      onClick: handleLink\n    },\n    {\n      label: isMember ? \"Leave\" : \"Join\",\n      icon: isMember ? /* @__PURE__ */ React.createElement(ExitToAppIcon, null) : /* @__PURE__ */ React.createElement(PersonAddIcon, null),\n      href: \"\",\n      onClick: async () => {\n        handleMembersClick();\n      }\n    },\n    {\n      label: \"Community\",\n      icon: /* @__PURE__ */ React.createElement(ChatIcon, null),\n      href: (_e = bazaarProject.value) == null ? void 0 : _e.community,\n      disabled: !((_f = bazaarProject.value) == null ? void 0 : _f.community) || !isMember\n    },\n    {\n      label: \"Docs\",\n      icon: /* @__PURE__ */ React.createElement(Description, null),\n      href: (_g = bazaarProject.value) == null ? void 0 : _g.docs,\n      disabled: ((_h = bazaarProject.value) == null ? void 0 : _h.docs) === null || ((_i = bazaarProject.value) == null ? void 0 : _i.docs) === \"\"\n    }\n  ];\n  const handleUnlinkSubmit = async () => {\n    var _a2, _b2;\n    const updateResponse = await bazaarApi.updateProject({\n      ...bazaarProject.value,\n      entityRef: null\n    });\n    if (updateResponse.status === \"ok\") {\n      setOpenUnlink(false);\n      fetchBazaarProject();\n      alertApi.post({\n        message: `Unlinked entity '${parseEntityRef((_a2 = bazaarProject.value) == null ? void 0 : _a2.entityRef).name}' from the project ${(_b2 = bazaarProject.value) == null ? void 0 : _b2.title}`,\n        severity: \"success\",\n        display: \"transient\"\n      });\n    }\n  };\n  if (bazaarProject.error) {\n    return /* @__PURE__ */ React.createElement(Alert, { severity: \"error\" }, (_j = bazaarProject == null ? void 0 : bazaarProject.error) == null ? void 0 : _j.message);\n  } else if (members.error) {\n    return /* @__PURE__ */ React.createElement(Alert, { severity: \"error\" }, (_k = members == null ? void 0 : members.error) == null ? void 0 : _k.message);\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\n    LinkProjectDialog,\n    {\n      openProjectSelector,\n      handleProjectSelectorClose: () => setOpenProjectSelector(false),\n      catalogEntities: catalogEntities.value || [],\n      bazaarProject: bazaarProject.value || initProject,\n      fetchBazaarProject,\n      initEntity\n    }\n  ), openUnlink && /* @__PURE__ */ React.createElement(\n    ConfirmationDialog,\n    {\n      open: openUnlink,\n      handleClose: () => setOpenUnlink(false),\n      message: [\n        \"Are you sure you want to unlink \",\n        /* @__PURE__ */ React.createElement(\"b\", { className: classes.wordBreak }, parseEntityRef((_l = bazaarProject.value) == null ? void 0 : _l.entityRef).name),\n        \" from \",\n        /* @__PURE__ */ React.createElement(\"b\", { className: classes.wordBreak }, (_m = bazaarProject.value) == null ? void 0 : _m.title),\n        \" ?\"\n      ],\n      type: \"unlink\",\n      handleSubmit: handleUnlinkSubmit\n    }\n  ), /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(\n    EditProjectDialog,\n    {\n      bazaarProject: bazaarProject.value || initProject,\n      openEdit,\n      handleEditClose: () => setOpenEdit(false),\n      handleCardClose: handleClose,\n      fetchBazaarProject\n    }\n  ), /* @__PURE__ */ React.createElement(\n    CardHeader,\n    {\n      title: /* @__PURE__ */ React.createElement(Typography$1, { paragraph: true, className: classes.wordBreak }, ((_n = bazaarProject.value) == null ? void 0 : _n.title) || initProject.title),\n      action: /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(IconButton, { onClick: () => setOpenEdit(true) }, /* @__PURE__ */ React.createElement(EditIcon, null)), /* @__PURE__ */ React.createElement(IconButton, { onClick: handleClose }, /* @__PURE__ */ React.createElement(CloseIcon, null))),\n      subheader: /* @__PURE__ */ React.createElement(HeaderIconLinkRow, { links })\n    }\n  ), /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(\n    CardContentFields,\n    {\n      bazaarProject: bazaarProject.value || initProject,\n      members: members.value || [],\n      descriptionSize: 9,\n      membersSize: 3\n    }\n  )));\n};\n\nconst useStyles$4 = makeStyles((theme) => ({\n  description: (props) => ({\n    height: props.height === \"large\" ? \"10rem\" : \"4rem\",\n    WebkitBackgroundClip: \"text\",\n    backgroundImage: `linear-gradient(180deg, ${theme.palette.textContrast} 0%, ${theme.palette.textContrast} 60%, transparent 100%)`,\n    color: \"transparent\"\n  }),\n  statusTag: {\n    display: \"inline-block\",\n    whiteSpace: \"nowrap\",\n    marginBottom: \"0.8rem\"\n  },\n  memberCount: {\n    float: \"right\"\n  },\n  header: {\n    whiteSpace: \"nowrap\",\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    height: \"5rem\"\n  }\n}));\nconst ProjectCard = ({\n  project,\n  fetchBazaarProjects,\n  catalogEntities,\n  height\n}) => {\n  const classes = useStyles$4({ height });\n  const [openCard, setOpenCard] = useState(false);\n  const { id, title, status, updatedAt, description, membersCount } = project;\n  const handleClose = () => {\n    setOpenCard(false);\n    fetchBazaarProjects();\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(Dialog, { fullWidth: true, onClose: handleClose, open: openCard }, /* @__PURE__ */ React.createElement(\n    HomePageBazaarInfoCard,\n    {\n      initProject: project,\n      handleClose,\n      initEntity: catalogEntities[0] || null\n    }\n  )), /* @__PURE__ */ React.createElement(Card, { key: id }, /* @__PURE__ */ React.createElement(CardActionArea, { onClick: () => setOpenCard(true) }, /* @__PURE__ */ React.createElement(\n    ItemCardHeader,\n    {\n      classes: { root: classes.header },\n      title,\n      subtitle: `updated ${DateTime.fromISO(\n        new Date(updatedAt).toISOString()\n      ).toRelative({\n        base: DateTime.now()\n      })}`\n    }\n  ), /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(StatusTag, { styles: classes.statusTag, status }), /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", className: classes.memberCount }, Number(membersCount) === Number(1) ? `${membersCount} member` : `${membersCount} members`), /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", className: classes.description }, description)))));\n};\n\nconst useStyles$3 = makeStyles({\n  content: {\n    width: \"100%\",\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    alignItems: \"center\"\n  },\n  empty: {\n    height: \"10rem\",\n    textAlign: \"center\",\n    verticalAlign: \"middle\",\n    lineHeight: \"10rem\"\n  },\n  pagination: {\n    marginTop: \"1rem\",\n    marginLeft: \"auto\",\n    marginRight: \"0\"\n  }\n});\nconst ProjectPreview = ({\n  bazaarProjects,\n  fetchBazaarProjects,\n  catalogEntities,\n  useTablePagination = true,\n  gridSize = 2,\n  height = \"large\"\n}) => {\n  const classes = useStyles$3();\n  const [page, setPage] = useState(1);\n  const [rows, setRows] = useState(12);\n  const handlePageChange = (_, newPage) => {\n    setPage(newPage + 1);\n  };\n  const handleRowChange = (event) => {\n    setRows(parseInt(event.target.value, 10));\n    setPage(1);\n  };\n  if (!bazaarProjects.length) {\n    return /* @__PURE__ */ React.createElement(\"div\", { className: classes.empty }, \"Please add projects to the Bazaar.\");\n  }\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.content }, /* @__PURE__ */ React.createElement(Grid, { wrap: \"wrap\", container: true, spacing: 3 }, bazaarProjects.slice((page - 1) * rows, rows * page).map((bazaarProject, i) => {\n    return /* @__PURE__ */ React.createElement(Grid, { key: i, item: true, xs: gridSize }, /* @__PURE__ */ React.createElement(\n      ProjectCard,\n      {\n        project: bazaarProject,\n        key: i,\n        fetchBazaarProjects,\n        catalogEntities,\n        height\n      }\n    ));\n  })), useTablePagination && /* @__PURE__ */ React.createElement(\n    TablePagination,\n    {\n      component: \"div\",\n      className: classes.pagination,\n      rowsPerPageOptions: [12, 24, 48, 96],\n      count: bazaarProjects == null ? void 0 : bazaarProjects.length,\n      page: page - 1,\n      onPageChange: handlePageChange,\n      rowsPerPage: rows,\n      onRowsPerPageChange: handleRowChange,\n      backIconButtonProps: { disabled: page === 1 },\n      nextIconButtonProps: {\n        disabled: rows * page >= bazaarProjects.length\n      }\n    }\n  ));\n};\n\nconst getUnlinkedCatalogEntities$1 = (bazaarProjects, catalogEntities) => {\n  const bazaarProjectRefs = bazaarProjects.map(\n    (project) => project.entityRef\n  );\n  return catalogEntities.filter((entity) => {\n    return !(bazaarProjectRefs == null ? void 0 : bazaarProjectRefs.includes(stringifyEntityRef(entity)));\n  });\n};\nconst BazaarOverviewCard = (props) => {\n  var _a;\n  const { title, order, fullWidth = false, fullHeight = false } = props;\n  const bazaarApi = useApi(bazaarApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const root = useRouteRef(bazaarPlugin.routes.root);\n  const defaultTitle = order === \"latest\" ? \"Bazaar Latest Projects\" : \"Bazaar Random Projects\";\n  const bazaarLink = {\n    title: \"Go to Bazaar\",\n    link: `${root()}`\n  };\n  const [unlinkedCatalogEntities, setUnlinkedCatalogEntities] = useState();\n  const [catalogEntities, fetchCatalogEntities] = useAsyncFn(async () => {\n    return await fetchCatalogItems(catalogApi);\n  });\n  const [bazaarProjects, fetchBazaarProjects] = useAsyncFn(async () => {\n    const limit = fullWidth ? 6 : 3;\n    const response = await bazaarApi.getProjects(limit, order);\n    return response.data.map(parseBazaarProject);\n  });\n  const catalogEntityRefs = (_a = catalogEntities.value) == null ? void 0 : _a.map(\n    (project) => stringifyEntityRef(project)\n  );\n  useEffect(() => {\n    const filterBrokenLinks = () => {\n      var _a2;\n      if (catalogEntityRefs) {\n        (_a2 = bazaarProjects.value) == null ? void 0 : _a2.forEach(async (project) => {\n          if (project.entityRef) {\n            if (!(catalogEntityRefs == null ? void 0 : catalogEntityRefs.includes(project.entityRef))) {\n              await bazaarApi.updateProject({\n                ...project,\n                entityRef: null\n              });\n            }\n          }\n        });\n      }\n    };\n    filterBrokenLinks();\n  }, [\n    bazaarApi,\n    bazaarProjects.value,\n    catalogEntityRefs,\n    catalogEntities.value\n  ]);\n  useEffect(() => {\n    fetchCatalogEntities();\n    fetchBazaarProjects();\n  }, [fetchBazaarProjects, fetchCatalogEntities]);\n  useEffect(() => {\n    const unlinkedCEntities = getUnlinkedCatalogEntities$1(\n      bazaarProjects.value || [],\n      catalogEntities.value || []\n    );\n    if (unlinkedCEntities) {\n      setUnlinkedCatalogEntities(unlinkedCEntities);\n    }\n  }, [bazaarProjects, catalogEntities]);\n  if (catalogEntities.error) {\n    return /* @__PURE__ */ React.createElement(ErrorPanel, { error: catalogEntities.error });\n  }\n  if (bazaarProjects.error) {\n    return /* @__PURE__ */ React.createElement(ErrorPanel, { error: bazaarProjects.error });\n  }\n  return /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title: title != null ? title : defaultTitle,\n      action: /* @__PURE__ */ React.createElement(IconButton, null, /* @__PURE__ */ React.createElement(Link, { to: bazaarLink.link, title: bazaarLink.title }, /* @__PURE__ */ React.createElement(StorefrontIcon, null)))\n    },\n    /* @__PURE__ */ React.createElement(\n      ProjectPreview,\n      {\n        bazaarProjects: bazaarProjects.value || [],\n        fetchBazaarProjects,\n        catalogEntities: unlinkedCatalogEntities || [],\n        useTablePagination: false,\n        gridSize: fullWidth ? 2 : 4,\n        height: fullHeight ? \"large\" : \"small\"\n      }\n    )\n  );\n};\n\nconst useStyles$2 = makeStyles({\n  wordBreak: {\n    wordBreak: \"break-all\",\n    whiteSpace: \"normal\",\n    margin: \"-0.25rem 0\"\n  }\n});\nconst EntityBazaarInfoContent = ({\n  bazaarProject,\n  fetchBazaarProject\n}) => {\n  var _a;\n  const classes = useStyles$2();\n  const bazaarApi = useApi(bazaarApiRef);\n  const identity = useApi(identityApiRef);\n  const [openEdit, setOpenEdit] = useState(false);\n  const [isMember, setIsMember] = useState(false);\n  const [openUnlink, setOpenUnlink] = useState(false);\n  const [members, fetchMembers] = useAsyncFn(async () => {\n    return bazaarProject ? await fetchProjectMembers(bazaarApi, bazaarProject) : [];\n  });\n  const [userId, fetchUserId] = useAsyncFn(async () => {\n    return await (await identity.getProfileInfo()).displayName;\n  });\n  useEffect(() => {\n    fetchMembers();\n    fetchUserId();\n  }, [fetchMembers, fetchUserId]);\n  useEffect(() => {\n    var _a2;\n    if (members.value && userId.value) {\n      setIsMember(\n        ((_a2 = members.value) == null ? void 0 : _a2.map((member) => member.userId).indexOf(userId.value)) >= 0\n      );\n    }\n  }, [bazaarProject, members, identity, userId.value]);\n  const handleMembersClick = async () => {\n    if (userId.value) {\n      if (!isMember) {\n        await bazaarApi.addMember(bazaarProject == null ? void 0 : bazaarProject.id, userId.value);\n      } else {\n        await bazaarApi.deleteMember(bazaarProject.id, userId.value);\n      }\n      setIsMember(!isMember);\n      fetchMembers();\n    }\n  };\n  const links = [\n    {\n      label: \"Entity page\",\n      icon: /* @__PURE__ */ React.createElement(DashboardIcon, null),\n      disabled: true\n    },\n    {\n      label: \"Unlink project\",\n      icon: /* @__PURE__ */ React.createElement(LinkOffIcon, null),\n      disabled: false,\n      onClick: () => {\n        setOpenUnlink(true);\n      }\n    },\n    {\n      label: isMember ? \"Leave\" : \"Join\",\n      icon: isMember ? /* @__PURE__ */ React.createElement(ExitToAppIcon, null) : /* @__PURE__ */ React.createElement(PersonAddIcon, null),\n      href: \"\",\n      onClick: async () => {\n        handleMembersClick();\n      }\n    },\n    {\n      label: \"Community\",\n      icon: /* @__PURE__ */ React.createElement(ChatIcon, null),\n      href: bazaarProject == null ? void 0 : bazaarProject.community,\n      disabled: (bazaarProject == null ? void 0 : bazaarProject.community) === \"\" || !isMember\n    },\n    {\n      label: \"Docs\",\n      icon: /* @__PURE__ */ React.createElement(Description, null),\n      href: bazaarProject == null ? void 0 : bazaarProject.docs,\n      disabled: (bazaarProject == null ? void 0 : bazaarProject.docs) === null || (bazaarProject == null ? void 0 : bazaarProject.docs) === \"\"\n    }\n  ];\n  const handleEditClose = () => {\n    setOpenEdit(false);\n  };\n  const handleUnlinkClose = () => {\n    setOpenUnlink(false);\n  };\n  const handleUnlinkSubmit = async () => {\n    const updateResponse = await bazaarApi.updateProject({\n      ...bazaarProject,\n      entityRef: null\n    });\n    if (updateResponse.status === \"ok\") {\n      handleUnlinkClose();\n      fetchBazaarProject();\n    }\n  };\n  if (members.error) {\n    return /* @__PURE__ */ React.createElement(Alert, { severity: \"error\" }, (_a = members == null ? void 0 : members.error) == null ? void 0 : _a.message);\n  }\n  if (bazaarProject) {\n    return /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\n      EditProjectDialog,\n      {\n        bazaarProject,\n        openEdit,\n        handleEditClose,\n        fetchBazaarProject\n      }\n    ), openUnlink && /* @__PURE__ */ React.createElement(\n      ConfirmationDialog,\n      {\n        open: openUnlink,\n        handleClose: handleUnlinkClose,\n        message: [\n          \"Are you sure you want to unlink \",\n          /* @__PURE__ */ React.createElement(\"b\", { className: classes.wordBreak }, parseEntityRef(bazaarProject.entityRef).name),\n          \" from \",\n          /* @__PURE__ */ React.createElement(\"b\", { className: classes.wordBreak }, bazaarProject.title),\n          \" ?\"\n        ],\n        type: \"unlink\",\n        handleSubmit: handleUnlinkSubmit\n      }\n    ), /* @__PURE__ */ React.createElement(\n      CardHeader,\n      {\n        title: /* @__PURE__ */ React.createElement(Typography$1, { paragraph: true, className: classes.wordBreak }, bazaarProject == null ? void 0 : bazaarProject.title),\n        action: /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\n          IconButton,\n          {\n            onClick: () => {\n              setOpenEdit(true);\n            }\n          },\n          /* @__PURE__ */ React.createElement(EditIcon, null)\n        )),\n        subheader: /* @__PURE__ */ React.createElement(HeaderIconLinkRow, { links })\n      }\n    ), /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(\n      CardContentFields,\n      {\n        bazaarProject,\n        members: members.value || [],\n        descriptionSize: 10,\n        membersSize: 2\n      }\n    ));\n  }\n  return null;\n};\n\nconst EntityBazaarInfoCard = () => {\n  var _a;\n  const { entity } = useEntity();\n  const bazaarApi = useApi(bazaarApiRef);\n  const [bazaarProject, fetchBazaarProject] = useAsyncFn(async () => {\n    const response = await bazaarApi.getProjectByRef(\n      stringifyEntityRef(entity)\n    );\n    return await parseBazaarResponse(response);\n  });\n  const [isBazaar, setIsBazaar] = useState((_a = bazaarProject.value) != null ? _a : false);\n  useEffect(() => {\n    fetchBazaarProject();\n  }, [fetchBazaarProject]);\n  useEffect(() => {\n    const isBazaarProject = bazaarProject.value !== void 0;\n    setIsBazaar(isBazaarProject);\n  }, [bazaarProject.value]);\n  if (isBazaar) {\n    return /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(\n      EntityBazaarInfoContent,\n      {\n        bazaarProject: bazaarProject.value,\n        fetchBazaarProject\n      }\n    ));\n  }\n  return null;\n};\n\nconst AddProjectDialog = ({\n  catalogEntities,\n  open,\n  handleClose,\n  fetchBazaarProjects,\n  fetchCatalogEntities\n}) => {\n  const bazaarApi = useApi(bazaarApiRef);\n  const alertApi = useApi(alertApiRef);\n  const [selectedEntity, setSelectedEntity] = useState(null);\n  const defaultValues = {\n    title: \"\",\n    community: \"\",\n    description: \"\",\n    docs: \"\",\n    status: \"proposed\",\n    size: \"medium\",\n    responsible: \"\",\n    startDate: null,\n    endDate: null\n  };\n  const handleEntityClick = (entity) => {\n    setSelectedEntity(entity);\n  };\n  const handleSubmit = async (getValues, reset) => {\n    var _a, _b;\n    const formValues = getValues();\n    const response = await bazaarApi.addProject({\n      ...formValues,\n      entityRef: selectedEntity ? stringifyEntityRef(selectedEntity) : null,\n      startDate: (_a = formValues.startDate) != null ? _a : null,\n      endDate: (_b = formValues.endDate) != null ? _b : null\n    });\n    if (response.status === \"ok\") {\n      fetchBazaarProjects();\n      fetchCatalogEntities();\n      alertApi.post({\n        message: `Added project '${formValues.title}' to the Bazaar list`,\n        severity: \"success\",\n        display: \"transient\"\n      });\n    }\n    handleClose();\n    reset(defaultValues);\n  };\n  return /* @__PURE__ */ React.createElement(\n    ProjectDialog,\n    {\n      handleSave: handleSubmit,\n      title: \"Add project\",\n      isAddForm: true,\n      defaultValues,\n      open,\n      projectSelector: /* @__PURE__ */ React.createElement(\n        ProjectSelector,\n        {\n          onChange: handleEntityClick,\n          catalogEntities: catalogEntities || [],\n          disableClearable: false,\n          defaultValue: null,\n          label: \"Select a project\"\n        }\n      ),\n      handleClose\n    }\n  );\n};\n\nconst useStyles$1 = makeStyles({\n  select: {\n    fontSize: \"xx-large\",\n    fontWeight: \"bold\",\n    width: \"16rem\"\n  }\n});\nconst SortMethodSelector = ({\n  sortMethodNbr,\n  handleSortMethodChange\n}) => {\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(FormControl$1, { fullWidth: true }, /* @__PURE__ */ React.createElement(\n    Select$1,\n    {\n      className: classes.select,\n      disableUnderline: true,\n      value: sortMethodNbr,\n      onChange: handleSortMethodChange\n    },\n    /* @__PURE__ */ React.createElement(MenuItem$1, { value: 0 }, \"Latest updated\"),\n    /* @__PURE__ */ React.createElement(MenuItem$1, { value: 1 }, \"A-Z\"),\n    /* @__PURE__ */ React.createElement(MenuItem$1, { value: 2 }, \"Z-A\"),\n    /* @__PURE__ */ React.createElement(MenuItem$1, { value: 3 }, \"Most members\")\n  ));\n};\n\nconst useStyles = makeStyles({\n  button: { minWidth: \"11rem\" },\n  container: {\n    marginTop: \"2rem\"\n  },\n  header: {\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    margin: \"0 auto\",\n    marginBottom: \"1.2rem\"\n  },\n  search: {\n    marginRight: \"1rem\",\n    height: \"2.5rem\",\n    width: \"35rem\"\n  }\n});\nconst getUnlinkedCatalogEntities = (bazaarProjects, catalogEntities) => {\n  const bazaarProjectRefs = bazaarProjects.map(\n    (project) => project.entityRef\n  );\n  return catalogEntities.filter((entity) => {\n    return !(bazaarProjectRefs == null ? void 0 : bazaarProjectRefs.includes(stringifyEntityRef(entity)));\n  });\n};\nconst SortView = (props) => {\n  var _a;\n  const { fullWidth = true, fullHeight = true } = props;\n  const bazaarApi = useApi(bazaarApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const classes = useStyles();\n  const sortMethods = [\n    sortByDate,\n    sortByTitle,\n    sortByTitleDescending,\n    sortByMembers\n  ];\n  const [sortMethodNbr, setSortMethodNbr] = useState(0);\n  const [openAdd, setOpenAdd] = useState(false);\n  const [searchValue, setSearchValue] = useState(\"\");\n  const [unlinkedCatalogEntities, setUnlinkedCatalogEntities] = useState();\n  const [catalogEntities, fetchCatalogEntities] = useAsyncFn(async () => {\n    return await fetchCatalogItems(catalogApi);\n  });\n  const [bazaarProjects, fetchBazaarProjects] = useAsyncFn(async () => {\n    const response = await bazaarApi.getProjects();\n    const dbProjects = [];\n    response.data.forEach((project) => {\n      dbProjects.push(parseBazaarProject(project));\n    });\n    return dbProjects;\n  });\n  const catalogEntityRefs = (_a = catalogEntities.value) == null ? void 0 : _a.map(\n    (project) => stringifyEntityRef(project)\n  );\n  const getSearchResults = () => {\n    var _a2;\n    return (_a2 = bazaarProjects.value) == null ? void 0 : _a2.filter((project) => project.title.includes(searchValue)).sort(sortMethods[sortMethodNbr]);\n  };\n  useEffect(() => {\n    const filterBrokenLinks = () => {\n      var _a2;\n      if (catalogEntityRefs) {\n        (_a2 = bazaarProjects.value) == null ? void 0 : _a2.forEach(async (project) => {\n          if (project.entityRef) {\n            if (!(catalogEntityRefs == null ? void 0 : catalogEntityRefs.includes(project.entityRef))) {\n              await bazaarApi.updateProject({\n                ...project,\n                entityRef: null\n              });\n            }\n          }\n        });\n      }\n    };\n    filterBrokenLinks();\n  }, [\n    bazaarApi,\n    bazaarProjects.value,\n    catalogEntityRefs,\n    catalogEntities.value\n  ]);\n  useEffect(() => {\n    fetchCatalogEntities();\n    fetchBazaarProjects();\n  }, [fetchBazaarProjects, fetchCatalogEntities]);\n  useEffect(() => {\n    const unlinkedCEntities = getUnlinkedCatalogEntities(\n      bazaarProjects.value || [],\n      catalogEntities.value || []\n    );\n    if (unlinkedCEntities) {\n      setUnlinkedCatalogEntities(unlinkedCEntities);\n    }\n  }, [bazaarProjects, catalogEntities]);\n  const handleSortMethodChange = (event) => {\n    setSortMethodNbr(\n      typeof event.target.value === \"number\" ? event.target.value : 0\n    );\n  };\n  if (catalogEntities.error)\n    return /* @__PURE__ */ React.createElement(Alert, { severity: \"error\" }, catalogEntities.error.message);\n  if (bazaarProjects.error)\n    return /* @__PURE__ */ React.createElement(Alert, { severity: \"error\" }, bazaarProjects.error.message);\n  return /* @__PURE__ */ React.createElement(Content, { noPadding: true }, /* @__PURE__ */ React.createElement(\"div\", { className: classes.header }, /* @__PURE__ */ React.createElement(\n    SortMethodSelector,\n    {\n      sortMethodNbr,\n      handleSortMethodChange\n    }\n  ), /* @__PURE__ */ React.createElement(\n    SearchBar,\n    {\n      className: classes.search,\n      value: searchValue,\n      onChange: (newSortMethod) => {\n        setSearchValue(newSortMethod);\n      },\n      onCancelSearch: () => {\n        setSearchValue(\"\");\n      }\n    }\n  ), /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      className: classes.button,\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: () => {\n        setOpenAdd(true);\n      }\n    },\n    \"Add project\"\n  ), /* @__PURE__ */ React.createElement(\n    AddProjectDialog,\n    {\n      catalogEntities: unlinkedCatalogEntities || [],\n      handleClose: () => {\n        setOpenAdd(false);\n      },\n      open: openAdd,\n      fetchBazaarProjects,\n      fetchCatalogEntities\n    }\n  ), /* @__PURE__ */ React.createElement(SupportButton, null)), /* @__PURE__ */ React.createElement(\n    ProjectPreview,\n    {\n      bazaarProjects: getSearchResults() || [],\n      fetchBazaarProjects,\n      catalogEntities: unlinkedCatalogEntities || [],\n      gridSize: fullWidth ? 2 : 4,\n      height: fullHeight ? \"large\" : \"small\"\n    }\n  ), /* @__PURE__ */ React.createElement(Content, { noPadding: true, className: classes.container }));\n};\n\nexport { BazaarOverviewCard, BazaarPage, EntityBazaarInfoCard, SortView, bazaarPlugin, isBazaarAvailable };\n//# sourceMappingURL=index.esm.js.map\n","import { createPermission } from '@backstage/plugin-permission-common';\n\nconst RESOURCE_TYPE_CATALOG_ENTITY = \"catalog-entity\";\nconst catalogEntityReadPermission = createPermission({\n  name: \"catalog.entity.read\",\n  attributes: {\n    action: \"read\"\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY\n});\nconst catalogEntityCreatePermission = createPermission({\n  name: \"catalog.entity.create\",\n  attributes: {\n    action: \"create\"\n  }\n});\nconst catalogEntityDeletePermission = createPermission({\n  name: \"catalog.entity.delete\",\n  attributes: {\n    action: \"delete\"\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY\n});\nconst catalogEntityRefreshPermission = createPermission({\n  name: \"catalog.entity.refresh\",\n  attributes: {\n    action: \"update\"\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY\n});\nconst catalogLocationReadPermission = createPermission({\n  name: \"catalog.location.read\",\n  attributes: {\n    action: \"read\"\n  }\n});\nconst catalogLocationCreatePermission = createPermission({\n  name: \"catalog.location.create\",\n  attributes: {\n    action: \"create\"\n  }\n});\nconst catalogLocationDeletePermission = createPermission({\n  name: \"catalog.location.delete\",\n  attributes: {\n    action: \"delete\"\n  }\n});\nconst catalogPermissions = [\n  catalogEntityReadPermission,\n  catalogEntityCreatePermission,\n  catalogEntityDeletePermission,\n  catalogEntityRefreshPermission,\n  catalogLocationReadPermission,\n  catalogLocationCreatePermission,\n  catalogLocationDeletePermission\n];\n\nexport { RESOURCE_TYPE_CATALOG_ENTITY, catalogEntityCreatePermission, catalogEntityDeletePermission, catalogEntityReadPermission, catalogEntityRefreshPermission, catalogLocationCreatePermission, catalogLocationDeletePermission, catalogLocationReadPermission, catalogPermissions };\n//# sourceMappingURL=alpha.esm.js.map\n","import { DEFAULT_NAMESPACE, RELATION_OWNER_OF, RELATION_OWNED_BY, RELATION_CONSUMES_API, RELATION_API_CONSUMED_BY, RELATION_API_PROVIDED_BY, RELATION_PROVIDES_API, RELATION_HAS_PART, RELATION_PART_OF, RELATION_PARENT_OF, RELATION_CHILD_OF, RELATION_HAS_MEMBER, RELATION_MEMBER_OF, RELATION_DEPENDS_ON, RELATION_DEPENDENCY_OF, stringifyEntityRef } from '@backstage/catalog-model';\nimport { DependencyGraph, DependencyGraphTypes } from '@backstage/core-components';\nimport { useApp, useApi, errorApiRef, createRouteRef, createExternalRouteRef } from '@backstage/core-plugin-api';\nimport { makeStyles as makeStyles$2, useTheme, CircularProgress } from '@material-ui/core';\nimport classNames from 'classnames';\nimport React, { useState, useRef, useLayoutEffect, useCallback, useEffect, useMemo } from 'react';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { humanizeEntityRef, catalogApiRef } from '@backstage/plugin-catalog-react';\nimport { makeStyles as makeStyles$1 } from '@material-ui/core/styles';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\n\nconst useStyles$2 = makeStyles(\n  (theme) => ({\n    text: {\n      fill: theme.palette.textContrast\n    },\n    secondary: {\n      fill: theme.palette.textSubtle\n    }\n  }),\n  { name: \"PluginCatalogGraphCustomLabel\" }\n);\nfunction DefaultRenderLabel({\n  edge: { relations }\n}) {\n  const classes = useStyles$2();\n  return /* @__PURE__ */ React.createElement(\"text\", { className: classes.text, textAnchor: \"middle\" }, relations.map((r, i) => /* @__PURE__ */ React.createElement(\"tspan\", { key: r, className: classNames(i > 0 && classes.secondary) }, i > 0 && /* @__PURE__ */ React.createElement(\"tspan\", null, \" / \"), r)));\n}\n\nfunction EntityKindIcon({\n  kind,\n  ...props\n}) {\n  var _a;\n  const app = useApp();\n  const Icon = (_a = app.getSystemIcon(`kind:${kind.toLocaleLowerCase(\"en-US\")}`)) != null ? _a : SvgIcon;\n  return /* @__PURE__ */ React.createElement(Icon, { ...props });\n}\n\nconst useStyles$1 = makeStyles$1(\n  (theme) => ({\n    node: {\n      fill: theme.palette.grey[300],\n      stroke: theme.palette.grey[300],\n      \"&.primary\": {\n        fill: theme.palette.primary.light,\n        stroke: theme.palette.primary.light\n      },\n      \"&.secondary\": {\n        fill: theme.palette.secondary.light,\n        stroke: theme.palette.secondary.light\n      }\n    },\n    text: {\n      fill: theme.palette.getContrastText(theme.palette.grey[300]),\n      \"&.primary\": {\n        fill: theme.palette.primary.contrastText\n      },\n      \"&.secondary\": {\n        fill: theme.palette.secondary.contrastText\n      },\n      \"&.focused\": {\n        fontWeight: \"bold\"\n      }\n    },\n    clickable: {\n      cursor: \"pointer\"\n    }\n  }),\n  { name: \"PluginCatalogGraphCustomNode\" }\n);\nfunction DefaultRenderNode({\n  node: { id, entity, color = \"default\", focused, onClick }\n}) {\n  const classes = useStyles$1();\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n  const app = useApp();\n  const idRef = useRef(null);\n  useLayoutEffect(() => {\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n  const {\n    kind,\n    metadata: { name, namespace = DEFAULT_NAMESPACE, title }\n  } = entity;\n  const hasKindIcon = app.getSystemIcon(\n    `kind:${kind.toLocaleLowerCase(\"en-US\")}`\n  );\n  const padding = 10;\n  const iconSize = height;\n  const paddedIconWidth = hasKindIcon ? iconSize + padding : 0;\n  const paddedWidth = paddedIconWidth + width + padding * 2;\n  const paddedHeight = height + padding * 2;\n  const displayTitle = title != null ? title : kind && name && namespace ? humanizeEntityRef({ kind, name, namespace }) : id;\n  return /* @__PURE__ */ React.createElement(\"g\", { onClick, className: classNames(onClick && classes.clickable) }, /* @__PURE__ */ React.createElement(\n    \"rect\",\n    {\n      className: classNames(\n        classes.node,\n        color === \"primary\" && \"primary\",\n        color === \"secondary\" && \"secondary\"\n      ),\n      width: paddedWidth,\n      height: paddedHeight,\n      rx: 10\n    }\n  ), hasKindIcon && /* @__PURE__ */ React.createElement(\n    EntityKindIcon,\n    {\n      kind,\n      y: padding,\n      x: padding,\n      width: iconSize,\n      height: iconSize,\n      className: classNames(\n        classes.text,\n        focused && \"focused\",\n        color === \"primary\" && \"primary\",\n        color === \"secondary\" && \"secondary\"\n      )\n    }\n  ), /* @__PURE__ */ React.createElement(\n    \"text\",\n    {\n      ref: idRef,\n      className: classNames(\n        classes.text,\n        focused && \"focused\",\n        color === \"primary\" && \"primary\",\n        color === \"secondary\" && \"secondary\"\n      ),\n      y: paddedHeight / 2,\n      x: paddedIconWidth + (width + padding * 2) / 2,\n      textAnchor: \"middle\",\n      alignmentBaseline: \"middle\"\n    },\n    displayTitle\n  ));\n}\n\nconst ALL_RELATION_PAIRS = [\n  [RELATION_OWNER_OF, RELATION_OWNED_BY],\n  [RELATION_CONSUMES_API, RELATION_API_CONSUMED_BY],\n  [RELATION_API_PROVIDED_BY, RELATION_PROVIDES_API],\n  [RELATION_HAS_PART, RELATION_PART_OF],\n  [RELATION_PARENT_OF, RELATION_CHILD_OF],\n  [RELATION_HAS_MEMBER, RELATION_MEMBER_OF],\n  [RELATION_DEPENDS_ON, RELATION_DEPENDENCY_OF]\n];\n\nvar Direction = /* @__PURE__ */ ((Direction2) => {\n  Direction2[\"TOP_BOTTOM\"] = \"TB\";\n  Direction2[\"BOTTOM_TOP\"] = \"BT\";\n  Direction2[\"LEFT_RIGHT\"] = \"LR\";\n  Direction2[\"RIGHT_LEFT\"] = \"RL\";\n  return Direction2;\n})(Direction || {});\n\nfunction useEntityStore() {\n  const catalogClient = useApi(catalogApiRef);\n  const state = useRef({\n    requestedEntities: /* @__PURE__ */ new Set(),\n    outstandingEntities: /* @__PURE__ */ new Map(),\n    cachedEntities: /* @__PURE__ */ new Map()\n  });\n  const [entities, setEntities] = useState({});\n  const updateEntities = useCallback(() => {\n    const { cachedEntities, requestedEntities } = state.current;\n    const filteredEntities = {};\n    requestedEntities.forEach((entityRef) => {\n      const entity = cachedEntities.get(entityRef);\n      if (entity) {\n        filteredEntities[entityRef] = entity;\n      }\n    });\n    setEntities(filteredEntities);\n  }, [state, setEntities]);\n  const [asyncState, fetch] = useAsyncFn(async () => {\n    const { requestedEntities, cachedEntities } = state.current;\n    const entityRefs = Array.from(requestedEntities).filter(\n      (entityRef) => !cachedEntities.has(entityRef)\n    );\n    if (entityRefs.length === 0) {\n      updateEntities();\n      return;\n    }\n    const { items } = await catalogClient.getEntitiesByRefs({ entityRefs });\n    items.forEach((ent) => {\n      if (ent) {\n        const entityRef = stringifyEntityRef(ent);\n        cachedEntities.set(entityRef, ent);\n      }\n    });\n    updateEntities();\n  }, [state, updateEntities]);\n  const { loading, error } = asyncState;\n  const requestEntities = useCallback(\n    (entityRefs) => {\n      const n = new Set(entityRefs);\n      const { requestedEntities } = state.current;\n      if (n.size !== requestedEntities.size || Array.from(n).some((e) => !requestedEntities.has(e))) {\n        state.current.requestedEntities = n;\n        fetch();\n        updateEntities();\n      }\n    },\n    [state, fetch, updateEntities]\n  );\n  return {\n    entities,\n    loading,\n    error,\n    requestEntities\n  };\n}\n\nfunction useEntityRelationGraph({\n  rootEntityRefs,\n  filter: { maxDepth = Number.POSITIVE_INFINITY, relations, kinds } = {}\n}) {\n  const { entities, loading, error, requestEntities } = useEntityStore();\n  useEffect(() => {\n    const expectedEntities = /* @__PURE__ */ new Set([...rootEntityRefs]);\n    const processedEntityRefs = /* @__PURE__ */ new Set();\n    let nextDepthRefQueue = [...rootEntityRefs];\n    let depth = 0;\n    while (nextDepthRefQueue.length > 0 && (!isFinite(maxDepth) || depth < maxDepth)) {\n      const entityRefQueue = nextDepthRefQueue;\n      nextDepthRefQueue = [];\n      while (entityRefQueue.length > 0) {\n        const entityRef = entityRefQueue.shift();\n        const entity = entities[entityRef];\n        processedEntityRefs.add(entityRef);\n        if (entity && entity.relations) {\n          for (const rel of entity.relations) {\n            if ((!relations || relations.includes(rel.type)) && (!kinds || kinds.some(\n              (kind) => rel.targetRef.startsWith(\n                `${kind.toLocaleLowerCase(\"en-US\")}:`\n              )\n            ))) {\n              if (!processedEntityRefs.has(rel.targetRef)) {\n                nextDepthRefQueue.push(rel.targetRef);\n                expectedEntities.add(rel.targetRef);\n              }\n            }\n          }\n        }\n      }\n      ++depth;\n    }\n    requestEntities([...expectedEntities]);\n  }, [entities, rootEntityRefs, maxDepth, relations, kinds, requestEntities]);\n  return {\n    entities,\n    loading,\n    error\n  };\n}\n\nfunction useEntityRelationNodesAndEdges({\n  rootEntityRefs,\n  maxDepth = Number.POSITIVE_INFINITY,\n  unidirectional = true,\n  mergeRelations = true,\n  kinds,\n  relations,\n  onNodeClick,\n  relationPairs = ALL_RELATION_PAIRS\n}) {\n  const [nodesAndEdges, setNodesAndEdges] = useState({});\n  const { entities, loading, error } = useEntityRelationGraph({\n    rootEntityRefs,\n    filter: {\n      maxDepth,\n      kinds,\n      relations\n    }\n  });\n  useDebounce(\n    () => {\n      var _a;\n      if (!entities || Object.keys(entities).length === 0) {\n        setNodesAndEdges({});\n        return;\n      }\n      const nodes = Object.entries(entities).map(([entityRef, entity]) => {\n        const focused = rootEntityRefs.includes(entityRef);\n        const node = {\n          id: entityRef,\n          entity,\n          focused,\n          color: focused ? \"secondary\" : \"primary\",\n          // @deprecated\n          kind: entity.kind,\n          name: entity.metadata.name,\n          namespace: entity.metadata.namespace || DEFAULT_NAMESPACE,\n          title: entity.metadata.title,\n          spec: entity.spec\n        };\n        if (onNodeClick) {\n          node.onClick = (event) => onNodeClick(node, event);\n        }\n        return node;\n      });\n      const edges = [];\n      const visitedNodes = /* @__PURE__ */ new Set();\n      const nodeQueue = [...rootEntityRefs];\n      while (nodeQueue.length > 0) {\n        const entityRef = nodeQueue.pop();\n        const entity = entities[entityRef];\n        visitedNodes.add(entityRef);\n        if (entity) {\n          (_a = entity == null ? void 0 : entity.relations) == null ? void 0 : _a.forEach((rel) => {\n            var _a2;\n            if (!entities[rel.targetRef]) {\n              return;\n            }\n            if (relations && !relations.includes(rel.type)) {\n              return;\n            }\n            if (kinds && !kinds.some(\n              (kind) => rel.targetRef.startsWith(`${kind.toLocaleLowerCase(\"en-US\")}:`)\n            )) {\n              return;\n            }\n            if (!unidirectional || !visitedNodes.has(rel.targetRef)) {\n              if (mergeRelations) {\n                const pair = (_a2 = relationPairs.find(\n                  ([l, r]) => l === rel.type || r === rel.type\n                )) != null ? _a2 : [rel.type];\n                const [left] = pair;\n                edges.push({\n                  from: left === rel.type ? entityRef : rel.targetRef,\n                  to: left === rel.type ? rel.targetRef : entityRef,\n                  relations: pair,\n                  label: \"visible\"\n                });\n              } else {\n                edges.push({\n                  from: entityRef,\n                  to: rel.targetRef,\n                  relations: [rel.type],\n                  label: \"visible\"\n                });\n              }\n            }\n            if (!visitedNodes.has(rel.targetRef)) {\n              nodeQueue.push(rel.targetRef);\n              visitedNodes.add(rel.targetRef);\n            }\n          });\n        }\n      }\n      setNodesAndEdges({ nodes, edges });\n    },\n    100,\n    [\n      entities,\n      rootEntityRefs,\n      kinds,\n      relations,\n      unidirectional,\n      mergeRelations,\n      onNodeClick,\n      relationPairs\n    ]\n  );\n  return {\n    loading,\n    error,\n    ...nodesAndEdges\n  };\n}\n\nconst useStyles = makeStyles$2(\n  (theme) => ({\n    progress: {\n      position: \"absolute\",\n      left: \"50%\",\n      top: \"50%\",\n      marginLeft: \"-20px\",\n      marginTop: \"-20px\"\n    },\n    container: {\n      position: \"relative\",\n      width: \"100%\",\n      display: \"flex\",\n      flexDirection: \"column\"\n    },\n    graph: {\n      width: \"100%\",\n      flex: 1,\n      // Right now there is no good way to style edges between nodes, we have to\n      // fall back to these hacks:\n      \"& path[marker-end]\": {\n        transition: \"filter 0.1s ease-in-out\"\n      },\n      \"& path[marker-end]:hover\": {\n        filter: `drop-shadow(2px 2px 4px ${theme.palette.primary.dark});`\n      },\n      \"& g[data-testid=label]\": {\n        transition: \"transform 0s\"\n      }\n    }\n  }),\n  { name: \"PluginCatalogGraphEntityRelationsGraph\" }\n);\nconst EntityRelationsGraph = (props) => {\n  const {\n    rootEntityNames,\n    maxDepth = 2,\n    unidirectional = true,\n    mergeRelations = true,\n    kinds,\n    relations,\n    direction = Direction.LEFT_RIGHT,\n    onNodeClick,\n    relationPairs = ALL_RELATION_PAIRS,\n    className,\n    zoom = \"enabled\",\n    renderNode,\n    renderLabel,\n    curve,\n    showArrowHeads\n  } = props;\n  const theme = useTheme();\n  const classes = useStyles();\n  const rootEntityRefs = useMemo(\n    () => (Array.isArray(rootEntityNames) ? rootEntityNames : [rootEntityNames]).map((e) => stringifyEntityRef(e)),\n    [rootEntityNames]\n  );\n  const errorApi = useApi(errorApiRef);\n  const { loading, error, nodes, edges } = useEntityRelationNodesAndEdges({\n    rootEntityRefs,\n    maxDepth,\n    unidirectional,\n    mergeRelations,\n    kinds,\n    relations,\n    onNodeClick,\n    relationPairs\n  });\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [errorApi, error]);\n  return /* @__PURE__ */ React.createElement(\"div\", { className: classNames(classes.container, className) }, loading && /* @__PURE__ */ React.createElement(CircularProgress, { className: classes.progress }), nodes && edges && /* @__PURE__ */ React.createElement(\n    DependencyGraph,\n    {\n      nodes,\n      edges,\n      renderNode: renderNode || DefaultRenderNode,\n      renderLabel: renderLabel || DefaultRenderLabel,\n      direction,\n      className: classes.graph,\n      paddingX: theme.spacing(4),\n      paddingY: theme.spacing(4),\n      labelPosition: DependencyGraphTypes.LabelPosition.RIGHT,\n      labelOffset: theme.spacing(1),\n      zoom,\n      curve,\n      showArrowHeads\n    }\n  ));\n};\n\nconst catalogGraphRouteRef = createRouteRef({\n  id: \"catalog-graph\"\n});\nconst catalogEntityRouteRef = createExternalRouteRef({\n  id: \"catalog-entity\",\n  params: [\"namespace\", \"kind\", \"name\"],\n  optional: true\n});\n\nexport { ALL_RELATION_PAIRS as A, Direction as D, EntityRelationsGraph as E, catalogEntityRouteRef as a, catalogGraphRouteRef as c };\n//# sourceMappingURL=routes-c6756725.esm.js.map\n","import { c as catalogGraphRouteRef, a as catalogEntityRouteRef } from './esm/routes-c6756725.esm.js';\nexport { A as ALL_RELATION_PAIRS, D as Direction, E as EntityRelationsGraph, c as catalogGraphRouteRef } from './esm/routes-c6756725.esm.js';\nimport { createPlugin, createComponentExtension, createRoutableExtension } from '@backstage/core-plugin-api';\nimport '@backstage/catalog-model';\nimport '@backstage/core-components';\nimport '@material-ui/core';\nimport 'classnames';\nimport 'react';\nimport '@material-ui/core/styles/makeStyles';\nimport '@backstage/plugin-catalog-react';\nimport '@material-ui/core/styles';\nimport '@material-ui/core/SvgIcon';\nimport 'react-use/lib/useDebounce';\nimport 'react-use/lib/useAsyncFn';\n\nconst catalogGraphPlugin = createPlugin({\n  id: \"catalog-graph\",\n  routes: {\n    catalogGraph: catalogGraphRouteRef\n  },\n  externalRoutes: {\n    catalogEntity: catalogEntityRouteRef\n  }\n});\n\nconst EntityCatalogGraphCard = catalogGraphPlugin.provide(\n  createComponentExtension({\n    name: \"EntityCatalogGraphCard\",\n    component: {\n      lazy: () => import('./esm/index-4d97d76b.esm.js').then((m) => m.CatalogGraphCard)\n    }\n  })\n);\nconst CatalogGraphPage = catalogGraphPlugin.provide(\n  createRoutableExtension({\n    name: \"CatalogGraphPage\",\n    component: () => import('./esm/index-201fbff6.esm.js').then((m) => m.CatalogGraphPage),\n    mountPoint: catalogGraphRouteRef\n  })\n);\n\nexport { CatalogGraphPage, EntityCatalogGraphCard, catalogGraphPlugin };\n//# sourceMappingURL=index.esm.js.map\n","import { createApiRef, createRouteRef, createPlugin, createApiFactory, discoveryApiRef, identityApiRef, configApiRef, createRoutableExtension } from '@backstage/core-plugin-api';\nimport { scmAuthApiRef, scmIntegrationsApiRef } from '@backstage/integration-react';\nimport { catalogApiRef } from '@backstage/plugin-catalog-react';\nimport { Octokit } from '@octokit/rest';\nimport { Base64 } from 'js-base64';\nimport parseGitUrl from 'git-url-parse';\n\nconst catalogImportApiRef = createApiRef({\n  id: \"plugin.catalog-import.service\"\n});\n\nconst getGithubIntegrationConfig = (scmIntegrationsApi, location) => {\n  const integration = scmIntegrationsApi.github.byUrl(location);\n  if (!integration) {\n    return void 0;\n  }\n  const { name: repo, owner } = parseGitUrl(location);\n  return {\n    repo,\n    owner,\n    githubIntegrationConfig: integration.config\n  };\n};\n\nfunction asInputRef(renderResult) {\n  const { ref, ...rest } = renderResult;\n  return {\n    inputRef: ref,\n    ...rest\n  };\n}\nfunction getCatalogFilename(config) {\n  var _a;\n  return (_a = config.getOptionalString(\"catalog.import.entityFilename\")) != null ? _a : \"catalog-info.yaml\";\n}\nfunction getBranchName(config) {\n  var _a;\n  return (_a = config.getOptionalString(\"catalog.import.pullRequestBranchName\")) != null ? _a : \"backstage-integration\";\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass CatalogImportClient {\n  constructor(options) {\n    __publicField(this, \"discoveryApi\");\n    __publicField(this, \"identityApi\");\n    __publicField(this, \"scmAuthApi\");\n    __publicField(this, \"scmIntegrationsApi\");\n    __publicField(this, \"catalogApi\");\n    __publicField(this, \"configApi\");\n    this.discoveryApi = options.discoveryApi;\n    this.scmAuthApi = options.scmAuthApi;\n    this.identityApi = options.identityApi;\n    this.scmIntegrationsApi = options.scmIntegrationsApi;\n    this.catalogApi = options.catalogApi;\n    this.configApi = options.configApi;\n  }\n  async analyzeUrl(url) {\n    var _a;\n    if (new URL(url).pathname.match(/\\.ya?ml$/) || ((_a = new URL(url).searchParams.get(\"path\")) == null ? void 0 : _a.match(/.ya?ml$/))) {\n      const location = await this.catalogApi.addLocation({\n        type: \"url\",\n        target: url,\n        dryRun: true\n      });\n      return {\n        type: \"locations\",\n        locations: [\n          {\n            exists: location.exists,\n            target: location.location.target,\n            entities: location.entities.map((e) => {\n              var _a2;\n              return {\n                kind: e.kind,\n                namespace: (_a2 = e.metadata.namespace) != null ? _a2 : \"default\",\n                name: e.metadata.name\n              };\n            })\n          }\n        ]\n      };\n    }\n    const ghConfig = getGithubIntegrationConfig(this.scmIntegrationsApi, url);\n    if (!ghConfig) {\n      const other = this.scmIntegrationsApi.byUrl(url);\n      const catalogFilename = getCatalogFilename(this.configApi);\n      if (other) {\n        throw new Error(\n          `The ${other.title} integration only supports full URLs to ${catalogFilename} files. Did you try to pass in the URL of a directory instead?`\n        );\n      }\n      throw new Error(\n        `This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${catalogFilename} file instead.`\n      );\n    }\n    const analyzation = await this.analyzeLocation({\n      repo: url\n    });\n    if (analyzation.existingEntityFiles.length > 0) {\n      const locations = analyzation.existingEntityFiles.reduce((state, curr) => {\n        var _a2;\n        state[curr.location.target] = {\n          target: curr.location.target,\n          exists: curr.isRegistered,\n          entities: [\n            ...curr.location.target in state ? state[curr.location.target].entities : [],\n            {\n              name: curr.entity.metadata.name,\n              namespace: (_a2 = curr.entity.metadata.namespace) != null ? _a2 : \"default\",\n              kind: curr.entity.kind\n            }\n          ]\n        };\n        return state;\n      }, {});\n      return {\n        type: \"locations\",\n        locations: Object.values(locations)\n      };\n    }\n    return {\n      type: \"repository\",\n      integrationType: \"github\",\n      url,\n      generatedEntities: analyzation.generateEntities.map((x) => x.entity)\n    };\n  }\n  async preparePullRequest() {\n    var _a;\n    const appTitle = (_a = this.configApi.getOptionalString(\"app.title\")) != null ? _a : \"Backstage\";\n    const appBaseUrl = this.configApi.getString(\"app.baseUrl\");\n    const catalogFilename = getCatalogFilename(this.configApi);\n    return {\n      title: `Add ${catalogFilename} config file`,\n      body: `This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${appTitle} software catalog](${appBaseUrl}).\n\nAfter this pull request is merged, the component will become available.\n\nFor more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`\n    };\n  }\n  async submitPullRequest(options) {\n    const { repositoryUrl, fileContent, title, body } = options;\n    const ghConfig = getGithubIntegrationConfig(\n      this.scmIntegrationsApi,\n      repositoryUrl\n    );\n    if (ghConfig) {\n      return await this.submitGitHubPrToRepo({\n        ...ghConfig,\n        repositoryUrl,\n        fileContent,\n        title,\n        body\n      });\n    }\n    throw new Error(\"unimplemented!\");\n  }\n  // TODO: this could be part of the catalog api\n  async analyzeLocation(options) {\n    const { token } = await this.identityApi.getCredentials();\n    const response = await fetch(\n      `${await this.discoveryApi.getBaseUrl(\"catalog\")}/analyze-location`,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...token && { Authorization: `Bearer ${token}` }\n        },\n        method: \"POST\",\n        body: JSON.stringify({\n          location: { type: \"url\", target: options.repo },\n          ...this.configApi.getOptionalString(\n            \"catalog.import.entityFilename\"\n          ) && {\n            catalogFilename: this.configApi.getOptionalString(\n              \"catalog.import.entityFilename\"\n            )\n          }\n        })\n      }\n    ).catch((e) => {\n      throw new Error(`Failed to generate entity definitions, ${e.message}`);\n    });\n    if (!response.ok) {\n      throw new Error(\n        `Failed to generate entity definitions. Received http response ${response.status}: ${response.statusText}`\n      );\n    }\n    const payload = await response.json();\n    return payload;\n  }\n  // TODO: extract this function and implement for non-github\n  async submitGitHubPrToRepo(options) {\n    const {\n      owner,\n      repo,\n      title,\n      body,\n      fileContent,\n      repositoryUrl,\n      githubIntegrationConfig\n    } = options;\n    const { token } = await this.scmAuthApi.getCredentials({\n      url: repositoryUrl,\n      additionalScope: {\n        repoWrite: true\n      }\n    });\n    const octo = new Octokit({\n      auth: token,\n      baseUrl: githubIntegrationConfig.apiBaseUrl\n    });\n    const branchName = getBranchName(this.configApi);\n    const fileName = getCatalogFilename(this.configApi);\n    const repoData = await octo.repos.get({\n      owner,\n      repo\n    }).catch((e) => {\n      throw new Error(formatHttpErrorMessage(\"Couldn't fetch repo data\", e));\n    });\n    const parentRef = await octo.git.getRef({\n      owner,\n      repo,\n      ref: `heads/${repoData.data.default_branch}`\n    }).catch((e) => {\n      throw new Error(\n        formatHttpErrorMessage(\"Couldn't fetch default branch data\", e)\n      );\n    });\n    await octo.git.createRef({\n      owner,\n      repo,\n      ref: `refs/heads/${branchName}`,\n      sha: parentRef.data.object.sha\n    }).catch((e) => {\n      throw new Error(\n        formatHttpErrorMessage(\n          `Couldn't create a new branch with name '${branchName}'`,\n          e\n        )\n      );\n    });\n    await octo.repos.createOrUpdateFileContents({\n      owner,\n      repo,\n      path: fileName,\n      message: title,\n      content: Base64.encode(fileContent),\n      branch: branchName\n    }).catch((e) => {\n      throw new Error(\n        formatHttpErrorMessage(\n          `Couldn't create a commit with ${fileName} file added`,\n          e\n        )\n      );\n    });\n    const pullRequestResponse = await octo.pulls.create({\n      owner,\n      repo,\n      title,\n      head: branchName,\n      body,\n      base: repoData.data.default_branch\n    }).catch((e) => {\n      throw new Error(\n        formatHttpErrorMessage(\n          `Couldn't create a pull request for ${branchName} branch`,\n          e\n        )\n      );\n    });\n    return {\n      link: pullRequestResponse.data.html_url,\n      location: `https://${githubIntegrationConfig.host}/${owner}/${repo}/blob/${repoData.data.default_branch}/${fileName}`\n    };\n  }\n}\nfunction formatHttpErrorMessage(message, error) {\n  return `${message}, received http response status code ${error.status}: ${error.message}`;\n}\n\nconst rootRouteRef = createRouteRef({\n  id: \"catalog-import\"\n});\nconst catalogImportPlugin = createPlugin({\n  id: \"catalog-import\",\n  apis: [\n    createApiFactory({\n      api: catalogImportApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        scmAuthApi: scmAuthApiRef,\n        identityApi: identityApiRef,\n        scmIntegrationsApi: scmIntegrationsApiRef,\n        catalogApi: catalogApiRef,\n        configApi: configApiRef\n      },\n      factory: ({\n        discoveryApi,\n        scmAuthApi,\n        identityApi,\n        scmIntegrationsApi,\n        catalogApi,\n        configApi\n      }) => new CatalogImportClient({\n        discoveryApi,\n        scmAuthApi,\n        scmIntegrationsApi,\n        identityApi,\n        catalogApi,\n        configApi\n      })\n    })\n  ],\n  routes: {\n    importPage: rootRouteRef\n  }\n});\nconst CatalogImportPage = catalogImportPlugin.provide(\n  createRoutableExtension({\n    name: \"CatalogImportPage\",\n    component: () => import('./index-6cc6851a.esm.js').then((m) => m.ImportPage),\n    mountPoint: rootRouteRef\n  })\n);\n\nexport { CatalogImportPage as C, catalogImportApiRef as a, CatalogImportClient as b, catalogImportPlugin as c, asInputRef as d, getCatalogFilename as g, rootRouteRef as r };\n//# sourceMappingURL=plugin-5ca30662.esm.js.map\n","import { createVersionedContext, createVersionedValueMap, getOrCreateGlobalSingleton } from '@backstage/version-bridge';\nimport React, { useContext, useRef, Component, Suspense, useEffect, lazy, useMemo } from 'react';\nimport { createApiRef, useApi, AnalyticsContext as AnalyticsContext$1, useAnalytics as useAnalytics$1 } from '@backstage/core-plugin-api';\nexport { SessionState, alertApiRef, appThemeApiRef, atlassianAuthApiRef, bitbucketAuthApiRef, bitbucketServerAuthApiRef, configApiRef, createApiFactory, createApiRef, discoveryApiRef, errorApiRef, featureFlagsApiRef, fetchApiRef, githubAuthApiRef, gitlabAuthApiRef, googleAuthApiRef, identityApiRef, microsoftAuthApiRef, oauthRequestApiRef, oktaAuthApiRef, oneloginAuthApiRef, storageApiRef, useApi, useApiHolder, vmwareCloudAuthApiRef, withApis } from '@backstage/core-plugin-api';\nimport { z } from 'zod';\nimport zodToJsonSchema from 'zod-to-json-schema';\nimport { useLocation, useParams } from 'react-router-dom';\nexport { createTranslationMessages, createTranslationRef, createTranslationResource, useTranslationRef } from '@backstage/core-plugin-api/alpha';\n\nconst AnalyticsReactContext = createVersionedContext(\"analytics-context\");\nconst useAnalyticsContext = () => {\n  const theContext = useContext(AnalyticsReactContext);\n  if (theContext === void 0) {\n    return {\n      pluginId: \"app\",\n      extensionId: \"app\"\n    };\n  }\n  const theValue = theContext.atVersion(1);\n  if (theValue === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return theValue;\n};\nconst AnalyticsContext = (options) => {\n  const { attributes, children } = options;\n  const parentValues = useAnalyticsContext();\n  const combinedValue = {\n    ...parentValues,\n    ...attributes\n  };\n  const versionedCombinedValue = createVersionedValueMap({ 1: combinedValue });\n  return /* @__PURE__ */ React.createElement(AnalyticsReactContext.Provider, { value: versionedCombinedValue }, children);\n};\n\nconst appTreeApiRef = createApiRef({ id: \"core.app-tree\" });\n\nconst componentsApiRef = createApiRef({\n  id: \"core.components\"\n});\nfunction useComponentRef(ref) {\n  const componentsApi = useApi(componentsApiRef);\n  return componentsApi.getComponent(ref);\n}\n\nconst iconsApiRef = createApiRef({\n  id: \"core.icons\"\n});\n\nconst routeResolutionApiRef = createApiRef({\n  id: \"core.route-resolution\"\n});\n\nconst analyticsApiRef = createApiRef({\n  id: \"core.analytics\"\n});\n\nconst globalEvents = getOrCreateGlobalSingleton(\n  \"core-plugin-api:analytics-tracker-events\",\n  () => ({\n    mostRecentGatheredNavigation: void 0,\n    mostRecentRoutableExtensionRender: void 0,\n    beforeUnloadRegistered: false\n  })\n);\nconst routableExtensionRenderedEvent$1 = \"_ROUTABLE-EXTENSION-RENDERED\";\nclass Tracker {\n  constructor(analyticsApi, context = {\n    pluginId: \"root\",\n    extensionId: \"App\"\n  }) {\n    this.analyticsApi = analyticsApi;\n    this.context = context;\n    if (!globalEvents.beforeUnloadRegistered) {\n      addEventListener(\n        \"beforeunload\",\n        () => {\n          if (globalEvents.mostRecentGatheredNavigation) {\n            this.analyticsApi.captureEvent({\n              ...globalEvents.mostRecentGatheredNavigation,\n              ...globalEvents.mostRecentRoutableExtensionRender\n            });\n            globalEvents.mostRecentGatheredNavigation = void 0;\n            globalEvents.mostRecentRoutableExtensionRender = void 0;\n          }\n        },\n        { once: true, passive: true }\n      );\n      globalEvents.beforeUnloadRegistered = true;\n    }\n  }\n  setContext(context) {\n    this.context = context;\n  }\n  captureEvent(action, subject, {\n    value,\n    attributes\n  } = {}) {\n    const context = this.context;\n    if (action === routableExtensionRenderedEvent$1) {\n      if (globalEvents.mostRecentGatheredNavigation) {\n        globalEvents.mostRecentRoutableExtensionRender = {\n          context: {\n            ...context,\n            extensionId: \"App\"\n          }\n        };\n      }\n      return;\n    }\n    if (globalEvents.mostRecentGatheredNavigation) {\n      try {\n        this.analyticsApi.captureEvent({\n          ...globalEvents.mostRecentGatheredNavigation,\n          ...globalEvents.mostRecentRoutableExtensionRender\n        });\n      } catch (e) {\n        console.warn(\"Error during analytics event capture. %o\", e);\n      }\n      globalEvents.mostRecentGatheredNavigation = void 0;\n      globalEvents.mostRecentRoutableExtensionRender = void 0;\n    }\n    if (action === \"navigate\" && context.pluginId === \"root\") {\n      globalEvents.mostRecentGatheredNavigation = {\n        action,\n        subject,\n        value,\n        attributes,\n        context\n      };\n      return;\n    }\n    try {\n      this.analyticsApi.captureEvent({\n        action,\n        subject,\n        value,\n        attributes,\n        context\n      });\n    } catch (e) {\n      console.warn(\"Error during analytics event capture. %o\", e);\n    }\n  }\n}\n\nfunction useAnalyticsApi() {\n  try {\n    return useApi(analyticsApiRef);\n  } catch (error) {\n    if (error.name === \"NotImplementedError\") {\n      return { captureEvent: () => {\n      } };\n    }\n    throw error;\n  }\n}\nfunction useAnalytics() {\n  const trackerRef = useRef(null);\n  const context = useAnalyticsContext();\n  const analyticsApi = useAnalyticsApi();\n  function getTracker() {\n    if (trackerRef.current === null) {\n      trackerRef.current = new Tracker(analyticsApi);\n    }\n    return trackerRef.current;\n  }\n  const tracker = getTracker();\n  tracker.setContext(context);\n  return tracker;\n}\n\nvar __defProp$3 = Object.defineProperty;\nvar __defNormalProp$3 = (obj, key, value) => key in obj ? __defProp$3(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$3 = (obj, key, value) => {\n  __defNormalProp$3(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ErrorBoundary extends Component {\n  constructor() {\n    super(...arguments);\n    __publicField$3(this, \"state\", { error: void 0 });\n    __publicField$3(this, \"handleErrorReset\", () => {\n      this.setState({ error: void 0 });\n    });\n  }\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n  render() {\n    const { error } = this.state;\n    const { plugin, children, Fallback } = this.props;\n    if (error) {\n      return /* @__PURE__ */ React.createElement(\n        Fallback,\n        {\n          plugin,\n          error,\n          resetError: this.handleErrorReset\n        }\n      );\n    }\n    return children;\n  }\n}\n\ngetOrCreateGlobalSingleton(\n  \"core-plugin-api:analytics-tracker-events\",\n  () => ({\n    mostRecentGatheredNavigation: void 0,\n    mostRecentRoutableExtensionRender: void 0,\n    beforeUnloadRegistered: false\n  })\n);\nconst routableExtensionRenderedEvent = \"_ROUTABLE-EXTENSION-RENDERED\";\n\nfunction createComponentRef(options) {\n  const { id } = options;\n  return {\n    id,\n    toString() {\n      return `ComponentRef{id=${id}}`;\n    }\n  };\n}\n\nconst coreProgressComponentRef = createComponentRef({\n  id: \"core.components.progress\"\n});\nconst coreNotFoundErrorPageComponentRef = createComponentRef({\n  id: \"core.components.notFoundErrorPage\"\n});\nconst coreErrorBoundaryFallbackComponentRef = createComponentRef({\n  id: \"core.components.errorBoundaryFallback\"\n});\nconst coreComponentRefs = {\n  progress: coreProgressComponentRef,\n  notFoundErrorPage: coreNotFoundErrorPageComponentRef,\n  errorBoundaryFallback: coreErrorBoundaryFallbackComponentRef\n};\n\nconst RouteTracker = (props) => {\n  const { disableTracking, children } = props;\n  const analytics = useAnalytics$1();\n  useEffect(() => {\n    if (disableTracking)\n      return;\n    analytics.captureEvent(routableExtensionRenderedEvent, \"\");\n  }, [analytics, disableTracking]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n};\nfunction ExtensionBoundary(props) {\n  var _a, _b;\n  const { node, routable, children } = props;\n  const plugin = node.spec.source;\n  const Progress = useComponentRef(coreComponentRefs.progress);\n  const fallback = useComponentRef(coreComponentRefs.errorBoundaryFallback);\n  const attributes = {\n    extensionId: node.spec.id,\n    pluginId: (_b = (_a = node.spec.source) == null ? void 0 : _a.id) != null ? _b : \"app\"\n  };\n  return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(ErrorBoundary, { plugin, Fallback: fallback }, /* @__PURE__ */ React.createElement(AnalyticsContext$1, { attributes }, /* @__PURE__ */ React.createElement(RouteTracker, { disableTracking: !routable }, children))));\n}\n\nfunction createExtensionDataRef(id) {\n  return {\n    id,\n    $$type: \"@backstage/ExtensionDataRef\",\n    config: {},\n    optional() {\n      return {\n        ...this,\n        config: { ...this.config, optional: true }\n      };\n    },\n    toString() {\n      const optional = Boolean(this.config.optional);\n      return `ExtensionDataRef{id=${id},optional=${optional}}`;\n    }\n  };\n}\n\nconst coreExtensionData = {\n  reactElement: createExtensionDataRef(\"core.reactElement\"),\n  routePath: createExtensionDataRef(\"core.routing.path\"),\n  routeRef: createExtensionDataRef(\"core.routing.ref\")\n};\n\nfunction toInternalExtensionDefinition(overrides) {\n  const internal = overrides;\n  if (internal.$$type !== \"@backstage/ExtensionDefinition\") {\n    throw new Error(\n      `Invalid extension definition instance, bad type '${internal.$$type}'`\n    );\n  }\n  if (internal.version !== \"v1\") {\n    throw new Error(\n      `Invalid extension definition instance, bad version '${internal.version}'`\n    );\n  }\n  return internal;\n}\nfunction createExtension(options) {\n  var _a, _b;\n  return {\n    $$type: \"@backstage/ExtensionDefinition\",\n    version: \"v1\",\n    kind: options.kind,\n    namespace: options.namespace,\n    name: options.name,\n    attachTo: options.attachTo,\n    disabled: (_a = options.disabled) != null ? _a : false,\n    inputs: (_b = options.inputs) != null ? _b : {},\n    output: options.output,\n    configSchema: options.configSchema,\n    factory({ inputs, ...rest }) {\n      return options.factory({\n        inputs,\n        ...rest\n      });\n    },\n    toString() {\n      const parts = [];\n      if (options.kind) {\n        parts.push(`kind=${options.kind}`);\n      }\n      if (options.namespace) {\n        parts.push(`namespace=${options.namespace}`);\n      }\n      if (options.name) {\n        parts.push(`name=${options.name}`);\n      }\n      parts.push(`attachTo=${options.attachTo.id}@${options.attachTo.input}`);\n      return `ExtensionDefinition{${parts.join(\",\")}}`;\n    }\n  };\n}\n\nfunction createExtensionInput(extensionData, config) {\n  return {\n    $$type: \"@backstage/ExtensionInput\",\n    extensionData,\n    config: {\n      singleton: Boolean(config == null ? void 0 : config.singleton),\n      optional: Boolean(config == null ? void 0 : config.optional)\n    }\n  };\n}\n\nfunction resolveExtensionDefinition(definition, context) {\n  var _a;\n  const internalDefinition = toInternalExtensionDefinition(definition);\n  const { name, kind, namespace: _, ...rest } = internalDefinition;\n  const namespace = (_a = internalDefinition.namespace) != null ? _a : context == null ? void 0 : context.namespace;\n  const namePart = name && namespace ? `${namespace}/${name}` : namespace || name;\n  if (!namePart) {\n    throw new Error(\n      `Extension must declare an explicit namespace or name as it could not be resolved from context, kind=${kind} namespace=${namespace} name=${name}`\n    );\n  }\n  const id = kind ? `${kind}:${namePart}` : namePart;\n  return {\n    ...rest,\n    $$type: \"@backstage/Extension\",\n    version: \"v1\",\n    id,\n    toString() {\n      return `Extension{id=${id}}`;\n    }\n  };\n}\n\nfunction createPlugin(options) {\n  var _a, _b, _c, _d;\n  const extensions = ((_a = options.extensions) != null ? _a : []).map(\n    (def) => resolveExtensionDefinition(def, { namespace: options.id })\n  );\n  const extensionIds = extensions.map((e) => e.id);\n  if (extensionIds.length !== new Set(extensionIds).size) {\n    const duplicates = Array.from(\n      new Set(\n        extensionIds.filter((id, index) => extensionIds.indexOf(id) !== index)\n      )\n    );\n    throw new Error(\n      `Plugin '${options.id}' provided duplicate extensions: ${duplicates.join(\n        \", \"\n      )}`\n    );\n  }\n  return {\n    $$type: \"@backstage/BackstagePlugin\",\n    version: \"v1\",\n    id: options.id,\n    routes: (_b = options.routes) != null ? _b : {},\n    externalRoutes: (_c = options.externalRoutes) != null ? _c : {},\n    featureFlags: (_d = options.featureFlags) != null ? _d : [],\n    extensions,\n    toString() {\n      return `Plugin{id=${options.id}}`;\n    }\n  };\n}\n\nfunction createExtensionOverrides(options) {\n  var _a;\n  const extensions = options.extensions.map(\n    (def) => resolveExtensionDefinition(def)\n  );\n  const featureFlags = (_a = options.featureFlags) != null ? _a : [];\n  return {\n    $$type: \"@backstage/ExtensionOverrides\",\n    version: \"v1\",\n    extensions,\n    featureFlags,\n    toString() {\n      const ex = extensions.map(String).join(\",\");\n      const ff = featureFlags.map((f) => f.name).join(\",\");\n      return `ExtensionOverrides{extensions=[${ex}],featureFlags=[${ff}]}`;\n    }\n  };\n}\n\nfunction createApiExtension(options) {\n  const { factory, configSchema, inputs: extensionInputs } = options;\n  const apiRef = \"api\" in options ? options.api : factory.api;\n  return createExtension({\n    kind: \"api\",\n    // Since ApiRef IDs use a global namespace we use the namespace here in order to override\n    // potential plugin IDs and always end up with the format `api:<api-ref-id>`\n    namespace: apiRef.id,\n    attachTo: { id: \"app\", input: \"apis\" },\n    inputs: extensionInputs,\n    configSchema,\n    output: {\n      api: createApiExtension.factoryDataRef\n    },\n    factory({ config, inputs }) {\n      if (typeof factory === \"function\") {\n        return { api: factory({ config, inputs }) };\n      }\n      return { api: factory };\n    }\n  });\n}\n((createApiExtension2) => {\n  createApiExtension2.factoryDataRef = createExtensionDataRef(\"core.api.factory\");\n})(createApiExtension || (createApiExtension = {}));\n\nfunction createAppRootElementExtension(options) {\n  var _a;\n  return createExtension({\n    kind: \"app-root-element\",\n    namespace: options.namespace,\n    name: options.name,\n    attachTo: (_a = options.attachTo) != null ? _a : { id: \"app/root\", input: \"elements\" },\n    configSchema: options.configSchema,\n    disabled: options.disabled,\n    inputs: options.inputs,\n    output: {\n      element: coreExtensionData.reactElement\n    },\n    factory({ inputs, config }) {\n      return {\n        element: typeof options.element === \"function\" ? options.element({ inputs, config }) : options.element\n      };\n    }\n  });\n}\n\nfunction createAppRootWrapperExtension(options) {\n  var _a;\n  return createExtension({\n    kind: \"app-root-wrapper\",\n    namespace: options.namespace,\n    name: options.name,\n    attachTo: (_a = options.attachTo) != null ? _a : { id: \"app/root\", input: \"wrappers\" },\n    configSchema: options.configSchema,\n    disabled: options.disabled,\n    inputs: options.inputs,\n    output: {\n      component: createAppRootWrapperExtension.componentDataRef\n    },\n    factory({ inputs, config }) {\n      const Component = (props) => {\n        return /* @__PURE__ */ React.createElement(options.Component, { inputs, config }, props.children);\n      };\n      return {\n        component: Component\n      };\n    }\n  });\n}\n((createAppRootWrapperExtension2) => {\n  createAppRootWrapperExtension2.componentDataRef = createExtensionDataRef(\n    \"app.root.wrapper\"\n  );\n})(createAppRootWrapperExtension || (createAppRootWrapperExtension = {}));\n\nfunction createRouterExtension(options) {\n  var _a;\n  return createExtension({\n    kind: \"app-router-component\",\n    namespace: options.namespace,\n    name: options.name,\n    attachTo: (_a = options.attachTo) != null ? _a : { id: \"app/root\", input: \"router\" },\n    configSchema: options.configSchema,\n    disabled: options.disabled,\n    inputs: options.inputs,\n    output: {\n      component: createRouterExtension.componentDataRef\n    },\n    factory({ inputs, config }) {\n      const Component = (props) => {\n        return /* @__PURE__ */ React.createElement(options.Component, { inputs, config }, props.children);\n      };\n      return {\n        component: Component\n      };\n    }\n  });\n}\n((createRouterExtension2) => {\n  createRouterExtension2.componentDataRef = createExtensionDataRef(\n    \"app.router.wrapper\"\n  );\n})(createRouterExtension || (createRouterExtension = {}));\n\nfunction createSchemaFromZod(schemaCreator) {\n  const schema = schemaCreator(z);\n  return {\n    // TODO: Types allow z.array etc here but it will break stuff\n    parse: (input) => {\n      const result = schema.safeParse(input);\n      if (result.success) {\n        return result.data;\n      }\n      throw new Error(result.error.issues.map(formatIssue).join(\"; \"));\n    },\n    // TODO: Verify why we are not compatible with the latest zodToJsonSchema.\n    schema: zodToJsonSchema(schema)\n  };\n}\nfunction formatIssue(issue) {\n  if (issue.code === \"invalid_union\") {\n    return formatIssue(issue.unionErrors[0].issues[0]);\n  }\n  let message = issue.message;\n  if (message === \"Required\") {\n    message = `Missing required value`;\n  }\n  if (issue.path.length) {\n    message += ` at '${issue.path.join(\".\")}'`;\n  }\n  return message;\n}\n\nfunction createPageExtension(options) {\n  var _a;\n  const configSchema = \"configSchema\" in options ? options.configSchema : createSchemaFromZod(\n    (z) => z.object({ path: z.string().default(options.defaultPath) })\n  );\n  return createExtension({\n    kind: \"page\",\n    namespace: options.namespace,\n    name: options.name,\n    attachTo: (_a = options.attachTo) != null ? _a : { id: \"app/routes\", input: \"routes\" },\n    configSchema,\n    inputs: options.inputs,\n    disabled: options.disabled,\n    output: {\n      element: coreExtensionData.reactElement,\n      path: coreExtensionData.routePath,\n      routeRef: coreExtensionData.routeRef.optional()\n    },\n    factory({ config, inputs, node }) {\n      const ExtensionComponent = lazy(\n        () => options.loader({ config, inputs }).then((element) => ({ default: () => element }))\n      );\n      return {\n        path: config.path,\n        routeRef: options.routeRef,\n        element: /* @__PURE__ */ React.createElement(ExtensionBoundary, { node, routable: true }, /* @__PURE__ */ React.createElement(ExtensionComponent, null))\n      };\n    }\n  });\n}\n\nfunction createNavItemExtension(options) {\n  const { routeRef, title, icon, namespace, name } = options;\n  return createExtension({\n    namespace,\n    name,\n    kind: \"nav-item\",\n    attachTo: { id: \"app/nav\", input: \"items\" },\n    configSchema: createSchemaFromZod(\n      (z) => z.object({\n        title: z.string().default(title)\n      })\n    ),\n    output: {\n      navTarget: createNavItemExtension.targetDataRef\n    },\n    factory: ({ config }) => ({\n      navTarget: {\n        title: config.title,\n        icon,\n        routeRef\n      }\n    })\n  });\n}\n((createNavItemExtension2) => {\n  createNavItemExtension2.targetDataRef = createExtensionDataRef(\"core.nav-item.target\");\n})(createNavItemExtension || (createNavItemExtension = {}));\n\nfunction createNavLogoExtension(options) {\n  const { logoIcon, logoFull } = options;\n  return createExtension({\n    kind: \"nav-logo\",\n    name: options == null ? void 0 : options.name,\n    namespace: options == null ? void 0 : options.namespace,\n    attachTo: { id: \"app/nav\", input: \"logos\" },\n    output: {\n      logos: createNavLogoExtension.logoElementsDataRef\n    },\n    factory: () => {\n      return {\n        logos: {\n          logoIcon,\n          logoFull\n        }\n      };\n    }\n  });\n}\n((createNavLogoExtension2) => {\n  createNavLogoExtension2.logoElementsDataRef = createExtensionDataRef(\"core.nav-logo.logo-elements\");\n})(createNavLogoExtension || (createNavLogoExtension = {}));\n\nfunction createSignInPageExtension(options) {\n  var _a;\n  return createExtension({\n    kind: \"sign-in-page\",\n    namespace: options == null ? void 0 : options.namespace,\n    name: options == null ? void 0 : options.name,\n    attachTo: (_a = options.attachTo) != null ? _a : { id: \"app/root\", input: \"signInPage\" },\n    configSchema: options.configSchema,\n    inputs: options.inputs,\n    disabled: options.disabled,\n    output: {\n      component: createSignInPageExtension.componentDataRef\n    },\n    factory({ config, inputs, node }) {\n      const ExtensionComponent = lazy(\n        () => options.loader({ config, inputs }).then((component) => ({ default: component }))\n      );\n      return {\n        component: (props) => /* @__PURE__ */ React.createElement(ExtensionBoundary, { node, routable: true }, /* @__PURE__ */ React.createElement(ExtensionComponent, { ...props }))\n      };\n    }\n  });\n}\n((createSignInPageExtension2) => {\n  createSignInPageExtension2.componentDataRef = createExtensionDataRef(\"core.sign-in-page.component\");\n})(createSignInPageExtension || (createSignInPageExtension = {}));\n\nfunction createThemeExtension(theme) {\n  return createExtension({\n    kind: \"theme\",\n    namespace: \"app\",\n    name: theme.id,\n    attachTo: { id: \"app\", input: \"themes\" },\n    output: {\n      theme: createThemeExtension.themeDataRef\n    },\n    factory: () => ({ theme })\n  });\n}\n((createThemeExtension2) => {\n  createThemeExtension2.themeDataRef = createExtensionDataRef(\"core.theme.theme\");\n})(createThemeExtension || (createThemeExtension = {}));\n\nfunction createComponentExtension(options) {\n  return createExtension({\n    kind: \"component\",\n    namespace: options.ref.id,\n    name: options.name,\n    attachTo: { id: \"app\", input: \"components\" },\n    inputs: options.inputs,\n    disabled: options.disabled,\n    configSchema: options.configSchema,\n    output: {\n      component: createComponentExtension.componentDataRef\n    },\n    factory({ config, inputs }) {\n      if (\"sync\" in options.loader) {\n        return {\n          component: {\n            ref: options.ref,\n            impl: options.loader.sync({ config, inputs })\n          }\n        };\n      }\n      const lazyLoader = options.loader.lazy;\n      const ExtensionComponent = lazy(\n        () => lazyLoader({ config, inputs }).then((Component) => ({\n          default: Component\n        }))\n      );\n      return {\n        component: {\n          ref: options.ref,\n          impl: ExtensionComponent\n        }\n      };\n    }\n  });\n}\n((createComponentExtension2) => {\n  createComponentExtension2.componentDataRef = createExtensionDataRef(\"core.component.component\");\n})(createComponentExtension || (createComponentExtension = {}));\n\nfunction createTranslationExtension(options) {\n  return createExtension({\n    kind: \"translation\",\n    namespace: options.resource.id,\n    name: options.name,\n    attachTo: { id: \"app\", input: \"translations\" },\n    output: {\n      resource: createTranslationExtension.translationDataRef\n    },\n    factory: () => ({ resource: options.resource })\n  });\n}\n((createTranslationExtension2) => {\n  createTranslationExtension2.translationDataRef = createExtensionDataRef(\"core.translation.translation\");\n})(createTranslationExtension || (createTranslationExtension = {}));\n\nconst MESSAGE_MARKER = \"eHgtF5hmbrXyiEvo\";\nfunction describeParentCallSite(ErrorConstructor = Error) {\n  const { stack } = new ErrorConstructor(MESSAGE_MARKER);\n  if (!stack) {\n    return \"<unknown>\";\n  }\n  const startIndex = stack.includes(MESSAGE_MARKER) ? stack.indexOf(\"\\n\") + 1 : 0;\n  const secondEntryStart = stack.indexOf(\"\\n\", stack.indexOf(\"\\n\", startIndex) + 1) + 1;\n  const secondEntryEnd = stack.indexOf(\"\\n\", secondEntryStart);\n  const line = stack.substring(secondEntryStart, secondEntryEnd).trim();\n  if (!line) {\n    return \"unknown\";\n  }\n  if (line.includes(\"(\")) {\n    return line.substring(line.indexOf(\"(\") + 1, line.indexOf(\")\"));\n  }\n  if (line.includes(\"@\")) {\n    return line.substring(line.indexOf(\"@\") + 1);\n  }\n  return line;\n}\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck$1 = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$1 = (obj, member, getter) => {\n  __accessCheck$1(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$1 = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$1 = (obj, member, value, setter) => {\n  __accessCheck$1(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _id, _params$1, _creationSite, _name, name_get;\nfunction toInternalRouteRef(resource) {\n  const r = resource;\n  if (r.$$type !== \"@backstage/RouteRef\") {\n    throw new Error(`Invalid RouteRef, bad type '${r.$$type}'`);\n  }\n  return r;\n}\nclass RouteRefImpl {\n  constructor(params = [], creationSite) {\n    this.params = params;\n    __privateAdd$1(this, _name);\n    __publicField$2(this, \"$$type\", \"@backstage/RouteRef\");\n    __publicField$2(this, \"version\", \"v1\");\n    __privateAdd$1(this, _id, void 0);\n    __privateAdd$1(this, _params$1, void 0);\n    __privateAdd$1(this, _creationSite, void 0);\n    __privateSet$1(this, _params$1, params);\n    __privateSet$1(this, _creationSite, creationSite);\n  }\n  getParams() {\n    return __privateGet$1(this, _params$1);\n  }\n  getDescription() {\n    if (__privateGet$1(this, _id)) {\n      return __privateGet$1(this, _id);\n    }\n    return `created at '${__privateGet$1(this, _creationSite)}'`;\n  }\n  setId(id) {\n    if (!id) {\n      throw new Error(`${__privateGet$1(this, _name, name_get)} id must be a non-empty string`);\n    }\n    if (__privateGet$1(this, _id)) {\n      throw new Error(\n        `${__privateGet$1(this, _name, name_get)} was referenced twice as both '${__privateGet$1(this, _id)}' and '${id}'`\n      );\n    }\n    __privateSet$1(this, _id, id);\n  }\n  toString() {\n    return `${__privateGet$1(this, _name, name_get)}{${this.getDescription()}}`;\n  }\n}\n_id = new WeakMap();\n_params$1 = new WeakMap();\n_creationSite = new WeakMap();\n_name = new WeakSet();\nname_get = function() {\n  return this.$$type.slice(\"@backstage/\".length);\n};\nfunction createRouteRef(config) {\n  return new RouteRefImpl(\n    config == null ? void 0 : config.params,\n    describeParentCallSite()\n  );\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _params, _parent;\nconst PARAM_PATTERN = /^\\w+$/;\nclass SubRouteRefImpl {\n  constructor(path, params, parent) {\n    this.path = path;\n    __publicField$1(this, \"$$type\", \"@backstage/SubRouteRef\");\n    __publicField$1(this, \"version\", \"v1\");\n    __privateAdd(this, _params, void 0);\n    __privateAdd(this, _parent, void 0);\n    __privateSet(this, _params, params);\n    __privateSet(this, _parent, parent);\n  }\n  getParams() {\n    return __privateGet(this, _params);\n  }\n  getParent() {\n    return __privateGet(this, _parent);\n  }\n  getDescription() {\n    const parent = toInternalRouteRef(__privateGet(this, _parent));\n    return `at ${this.path} with parent ${parent.getDescription()}`;\n  }\n  toString() {\n    return `SubRouteRef{${this.getDescription()}}`;\n  }\n}\n_params = new WeakMap();\n_parent = new WeakMap();\nfunction createSubRouteRef(config) {\n  const { path, parent } = config;\n  const internalParent = toInternalRouteRef(parent);\n  const parentParams = internalParent.getParams();\n  const pathParams = path.split(\"/\").filter((p) => p.startsWith(\":\")).map((p) => p.substring(1));\n  const params = [...parentParams, ...pathParams];\n  if (parentParams.some((p) => pathParams.includes(p))) {\n    throw new Error(\n      \"SubRouteRef may not have params that overlap with its parent\"\n    );\n  }\n  if (!path.startsWith(\"/\")) {\n    throw new Error(`SubRouteRef path must start with '/', got '${path}'`);\n  }\n  if (path.endsWith(\"/\")) {\n    throw new Error(`SubRouteRef path must not end with '/', got '${path}'`);\n  }\n  for (const param of pathParams) {\n    if (!PARAM_PATTERN.test(param)) {\n      throw new Error(`SubRouteRef path has invalid param, got '${param}'`);\n    }\n  }\n  const subRouteRef = new SubRouteRefImpl(\n    path,\n    params,\n    parent\n  );\n  return subRouteRef;\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ExternalRouteRefImpl extends RouteRefImpl {\n  constructor(optional, params = [], defaultTarget, creationSite) {\n    super(params, creationSite);\n    this.optional = optional;\n    this.params = params;\n    this.defaultTarget = defaultTarget;\n    __publicField(this, \"$$type\", \"@backstage/ExternalRouteRef\");\n  }\n  getDefaultTarget() {\n    return this.defaultTarget;\n  }\n}\nfunction createExternalRouteRef(options) {\n  return new ExternalRouteRefImpl(\n    Boolean(options == null ? void 0 : options.optional),\n    options == null ? void 0 : options.params,\n    options == null ? void 0 : options.defaultTarget,\n    describeParentCallSite()\n  );\n}\n\nfunction useRouteRef(routeRef) {\n  const { pathname } = useLocation();\n  const routeResolutionApi = useApi(routeResolutionApiRef);\n  const routeFunc = useMemo(\n    () => routeResolutionApi.resolve(routeRef, { sourcePath: pathname }),\n    [routeResolutionApi, routeRef, pathname]\n  );\n  const isOptional = \"optional\" in routeRef && routeRef.optional;\n  if (!routeFunc && !isOptional) {\n    throw new Error(`No path for ${routeRef}`);\n  }\n  return routeFunc;\n}\n\nfunction useRouteRefParams(_routeRef) {\n  return useParams();\n}\n\nexport { AnalyticsContext, ExtensionBoundary, analyticsApiRef, appTreeApiRef, componentsApiRef, coreComponentRefs, coreExtensionData, createApiExtension, createAppRootElementExtension, createAppRootWrapperExtension, createComponentExtension, createComponentRef, createExtension, createExtensionDataRef, createExtensionInput, createExtensionOverrides, createExternalRouteRef, createNavItemExtension, createNavLogoExtension, createPageExtension, createPlugin, createRouteRef, createRouterExtension, createSchemaFromZod, createSignInPageExtension, createSubRouteRef, createThemeExtension, createTranslationExtension, iconsApiRef, routeResolutionApiRef, useAnalytics, useComponentRef, useRouteRef, useRouteRefParams };\n//# sourceMappingURL=index.esm.js.map\n","import { createExtensionDataRef, createSchemaFromZod, createExtension, coreExtensionData, ExtensionBoundary } from '@backstage/frontend-plugin-api';\nimport React, { lazy } from 'react';\nimport { RELATION_MEMBER_OF, getCompoundEntityRef, stringifyEntityRef, RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport { usePermission } from '@backstage/plugin-permission-react';\nimport { g as getEntityRelations, a as useAsyncEntity } from './esm/useEntity-de64059a.esm.js';\nimport '@backstage/core-plugin-api';\nimport '@backstage/version-bridge';\n\nfunction isOwnerOf(owner, entity) {\n  const possibleOwners = new Set(\n    [\n      ...getEntityRelations(owner, RELATION_MEMBER_OF, { kind: \"group\" }),\n      ...owner ? [getCompoundEntityRef(owner)] : []\n    ].map(stringifyEntityRef)\n  );\n  const owners = getEntityRelations(entity, RELATION_OWNED_BY).map(\n    stringifyEntityRef\n  );\n  for (const ownerItem of owners) {\n    if (possibleOwners.has(ownerItem)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction useEntityPermission(permission) {\n  const {\n    entity,\n    loading: loadingEntity,\n    error: entityError\n  } = useAsyncEntity();\n  const {\n    allowed,\n    loading: loadingPermission,\n    error: permissionError\n  } = usePermission({\n    permission,\n    resourceRef: entity ? stringifyEntityRef(entity) : void 0\n  });\n  if (loadingEntity || loadingPermission) {\n    return { loading: true, allowed: false };\n  }\n  if (entityError) {\n    return { loading: false, allowed: false, error: entityError };\n  }\n  return { loading: false, allowed, error: permissionError };\n}\n\nconst catalogExtensionData = {\n  entityContentTitle: createExtensionDataRef(\n    \"catalog.entity-content-title\"\n  ),\n  entityFilterFunction: createExtensionDataRef(\n    \"catalog.entity-filter-function\"\n  ),\n  entityFilterExpression: createExtensionDataRef(\n    \"catalog.entity-filter-expression\"\n  )\n};\nfunction createEntityCardExtension(options) {\n  var _a, _b;\n  const configSchema = \"configSchema\" in options ? options.configSchema : createSchemaFromZod(\n    (z) => z.object({\n      filter: z.string().optional()\n    })\n  );\n  return createExtension({\n    kind: \"entity-card\",\n    namespace: options.namespace,\n    name: options.name,\n    attachTo: (_a = options.attachTo) != null ? _a : {\n      id: \"entity-content:catalog/overview\",\n      input: \"cards\"\n    },\n    disabled: (_b = options.disabled) != null ? _b : true,\n    output: {\n      element: coreExtensionData.reactElement,\n      filterFunction: catalogExtensionData.entityFilterFunction.optional(),\n      filterExpression: catalogExtensionData.entityFilterExpression.optional()\n    },\n    inputs: options.inputs,\n    configSchema,\n    factory({ config, inputs, node }) {\n      const ExtensionComponent = lazy(\n        () => options.loader({ inputs, config }).then((element) => ({ default: () => element }))\n      );\n      return {\n        element: /* @__PURE__ */ React.createElement(ExtensionBoundary, { node }, /* @__PURE__ */ React.createElement(ExtensionComponent, null)),\n        ...mergeFilters({ config, options })\n      };\n    }\n  });\n}\nfunction createEntityContentExtension(options) {\n  var _a, _b;\n  return createExtension({\n    kind: \"entity-content\",\n    namespace: options.namespace,\n    name: options.name,\n    attachTo: (_a = options.attachTo) != null ? _a : {\n      id: \"page:catalog/entity\",\n      input: \"contents\"\n    },\n    disabled: (_b = options.disabled) != null ? _b : true,\n    output: {\n      element: coreExtensionData.reactElement,\n      path: coreExtensionData.routePath,\n      routeRef: coreExtensionData.routeRef.optional(),\n      title: catalogExtensionData.entityContentTitle,\n      filterFunction: catalogExtensionData.entityFilterFunction.optional(),\n      filterExpression: catalogExtensionData.entityFilterExpression.optional()\n    },\n    inputs: options.inputs,\n    configSchema: createSchemaFromZod(\n      (z) => z.object({\n        path: z.string().default(options.defaultPath),\n        title: z.string().default(options.defaultTitle),\n        filter: z.string().optional()\n      })\n    ),\n    factory({ config, inputs, node }) {\n      const ExtensionComponent = lazy(\n        () => options.loader({ inputs }).then((element) => ({ default: () => element }))\n      );\n      return {\n        path: config.path,\n        title: config.title,\n        routeRef: options.routeRef,\n        element: /* @__PURE__ */ React.createElement(ExtensionBoundary, { node, routable: true }, /* @__PURE__ */ React.createElement(ExtensionComponent, null)),\n        ...mergeFilters({ config, options })\n      };\n    }\n  });\n}\nfunction mergeFilters(inputs) {\n  const { options, config } = inputs;\n  if (config.filter) {\n    return { filterExpression: config.filter };\n  } else if (typeof options.filter === \"string\") {\n    return { filterExpression: options.filter };\n  } else if (typeof options.filter === \"function\") {\n    return { filterFunction: options.filter };\n  }\n  return {};\n}\n\nexport { catalogExtensionData, createEntityCardExtension, createEntityContentExtension, isOwnerOf, useEntityPermission };\n//# sourceMappingURL=alpha.esm.js.map\n","import { parseEntityRef, stringifyEntityRef } from '@backstage/catalog-model';\nimport { AnalyticsContext } from '@backstage/core-plugin-api';\nimport { createVersionedContext, createVersionedValueMap, useVersionedContext } from '@backstage/version-bridge';\nimport React from 'react';\n\nfunction getEntityRelations(entity, relationType, filter) {\n  var _a;\n  let entityNames = ((_a = entity == null ? void 0 : entity.relations) == null ? void 0 : _a.filter((r) => r.type === relationType).map((r) => parseEntityRef(r.targetRef))) || [];\n  if (filter == null ? void 0 : filter.kind) {\n    entityNames = entityNames.filter(\n      (e) => e.kind.toLocaleLowerCase(\"en-US\") === filter.kind.toLocaleLowerCase(\"en-US\")\n    );\n  }\n  return entityNames;\n}\n\nconst NewEntityContext = createVersionedContext(\n  \"entity-context\"\n);\nconst AsyncEntityProvider = (props) => {\n  const { children, entity, loading, error, refresh } = props;\n  const value = { entity, loading, error, refresh };\n  return /* @__PURE__ */ React.createElement(NewEntityContext.Provider, { value: createVersionedValueMap({ 1: value }) }, /* @__PURE__ */ React.createElement(\n    AnalyticsContext,\n    {\n      attributes: {\n        ...entity ? { entityRef: stringifyEntityRef(entity) } : void 0\n      }\n    },\n    children\n  ));\n};\nconst EntityProvider = (props) => /* @__PURE__ */ React.createElement(\n  AsyncEntityProvider,\n  {\n    entity: props.entity,\n    loading: !Boolean(props.entity),\n    error: void 0,\n    refresh: void 0,\n    children: props.children\n  }\n);\nfunction useEntity() {\n  const versionedHolder = useVersionedContext(\n    \"entity-context\"\n  );\n  if (!versionedHolder) {\n    throw new Error(\"Entity context is not available\");\n  }\n  const value = versionedHolder.atVersion(1);\n  if (!value) {\n    throw new Error(\"EntityContext v1 not available\");\n  }\n  if (!value.entity) {\n    throw new Error(\n      \"useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.\"\n    );\n  }\n  return { entity: value.entity };\n}\nfunction useAsyncEntity() {\n  const versionedHolder = useVersionedContext(\n    \"entity-context\"\n  );\n  if (!versionedHolder) {\n    throw new Error(\"Entity context is not available\");\n  }\n  const value = versionedHolder.atVersion(1);\n  if (!value) {\n    throw new Error(\"EntityContext v1 not available\");\n  }\n  const { entity, loading, error, refresh } = value;\n  return { entity, loading, error, refresh };\n}\n\nexport { AsyncEntityProvider as A, EntityProvider as E, useAsyncEntity as a, getEntityRelations as g, useEntity as u };\n//# sourceMappingURL=useEntity-de64059a.esm.js.map\n","export { CATALOG_FILTER_EXISTS } from '@backstage/catalog-client';\nimport { createApiRef, useApiHolder, useApi, identityApiRef, alertApiRef, createRouteRef, useRouteRef, useApp, configApiRef } from '@backstage/core-plugin-api';\nimport { stringifyEntityRef, DEFAULT_NAMESPACE, ANNOTATION_SOURCE_LOCATION, parseLocationRef, parseEntityRef, RELATION_OWNED_BY, getCompoundEntityRef, isUserEntity, isGroupEntity, RELATION_PART_OF, ANNOTATION_LOCATION, ANNOTATION_ORIGIN_LOCATION } from '@backstage/catalog-model';\nimport get from 'lodash/get';\nimport React, { useState, useEffect, useMemo, createContext, useCallback, useContext, useRef, memo, forwardRef, useLayoutEffect, Fragment } from 'react';\nimport ObservableImpl from 'zen-observable';\nimport { Grid, useMediaQuery, useTheme, Button, Drawer, Box, Typography, FormControlLabel, Checkbox, makeStyles, TextField, Tooltip, IconButton, Card, CardContent, Chip, CardActions, Toolbar, FormControl, Input, InputAdornment, withStyles as withStyles$1, DialogContentText, ListItemText as ListItemText$1, ListSubheader as ListSubheader$1, ListItem, ListItemIcon, List, ListItemSecondaryAction, Dialog, DialogTitle, DialogContent, Tabs, Tab, DialogActions, Divider, MenuItem } from '@material-ui/core';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport { Select, Link, ResponseErrorPanel, Progress, OverflowTooltip, Table, DependencyGraph, DependencyGraphTypes, CodeSnippet, CopyTextButton, EmptyState } from '@backstage/core-components';\nimport { g as getEntityRelations, u as useEntity } from './esm/useEntity-de64059a.esm.js';\nexport { A as AsyncEntityProvider, E as EntityProvider, g as getEntityRelations, a as useAsyncEntity, u as useEntity } from './esm/useEntity-de64059a.esm.js';\nimport { compact, isEqual, debounce, intersection } from 'lodash';\nimport qs from 'qs';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport useMountedState from 'react-use/lib/useMountedState';\nimport useAsync from 'react-use/lib/useAsync';\nimport isEqual$1 from 'lodash/isEqual';\nimport sortBy from 'lodash/sortBy';\nimport useObservable from 'react-use/lib/useObservable';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Autocomplete, Alert } from '@material-ui/lab';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport classNames from 'classnames';\nimport { useMountEffect, useDebouncedEffect } from '@react-hookz/web';\nimport PersonIcon from '@material-ui/icons/Person';\nimport GroupIcon from '@material-ui/icons/Group';\nimport { withStyles, makeStyles as makeStyles$1 } from '@material-ui/core/styles';\nimport { getOrCreateGlobalSingleton } from '@backstage/version-bridge';\nimport HoverPopover from 'material-ui-popup-state/HoverPopover';\nimport { usePopupState, bindHover, bindPopover } from 'material-ui-popup-state/hooks';\nimport InfoIcon from '@material-ui/icons/Info';\nimport EmailIcon from '@material-ui/icons/Email';\nimport Clear from '@material-ui/icons/Clear';\nimport Search from '@material-ui/icons/Search';\nimport Star from '@material-ui/icons/Star';\nimport StarBorder from '@material-ui/icons/StarBorder';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\nimport groupBy from 'lodash/groupBy';\nimport DialogContentText$1 from '@material-ui/core/DialogContentText';\nimport YAML from 'yaml';\nimport Alert$1 from '@material-ui/lab/Alert';\nimport { assertError } from '@backstage/errors';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport useDeepCompareEffect from 'react-use/lib/useDeepCompareEffect';\nimport Box$1 from '@material-ui/core/Box';\nimport Button$1 from '@material-ui/core/Button';\nimport Typography$1 from '@material-ui/core/Typography';\n\nconst catalogApiRef = createApiRef({\n  id: \"plugin.catalog.service\"\n});\n\nconst entityPresentationApiRef = createApiRef({\n  id: \"plugin.catalog.entity-presentation\"\n});\n\nfunction defaultEntityPresentation(entityOrRef, context) {\n  const { kind, namespace, name, title, description, displayName, type } = getParts(entityOrRef);\n  const entityRef = stringifyEntityRef({\n    kind: kind || \"unknown\",\n    namespace: namespace || DEFAULT_NAMESPACE,\n    name: name || \"unknown\"\n  });\n  const shortRef = getShortRef({ kind, namespace, name, context });\n  const primary = [displayName, title, shortRef].find(\n    (candidate) => candidate && typeof candidate === \"string\"\n  );\n  const secondary = [\n    primary !== entityRef ? entityRef : void 0,\n    type,\n    description\n  ].filter((candidate) => candidate && typeof candidate === \"string\").join(\" | \");\n  return {\n    entityRef,\n    primaryTitle: primary,\n    secondaryTitle: secondary || void 0,\n    Icon: void 0\n    // leave it up to the presentation API to handle\n  };\n}\nfunction getParts(entityOrRef) {\n  if (typeof entityOrRef === \"string\") {\n    let colonI = entityOrRef.indexOf(\":\");\n    const slashI = entityOrRef.indexOf(\"/\");\n    if (slashI !== -1 && slashI < colonI) {\n      colonI = -1;\n    }\n    const kind = colonI === -1 ? void 0 : entityOrRef.slice(0, colonI);\n    const namespace = slashI === -1 ? void 0 : entityOrRef.slice(colonI + 1, slashI);\n    const name = entityOrRef.slice(Math.max(colonI + 1, slashI + 1));\n    return { kind, namespace, name };\n  }\n  if (typeof entityOrRef === \"object\" && entityOrRef !== null) {\n    const kind = [get(entityOrRef, \"kind\")].find(\n      (candidate) => candidate && typeof candidate === \"string\"\n    );\n    const namespace = [\n      get(entityOrRef, \"metadata.namespace\"),\n      get(entityOrRef, \"namespace\")\n    ].find((candidate) => candidate && typeof candidate === \"string\");\n    const name = [\n      get(entityOrRef, \"metadata.name\"),\n      get(entityOrRef, \"name\")\n    ].find((candidate) => candidate && typeof candidate === \"string\");\n    const title = [get(entityOrRef, \"metadata.title\")].find(\n      (candidate) => candidate && typeof candidate === \"string\"\n    );\n    const description = [get(entityOrRef, \"metadata.description\")].find(\n      (candidate) => candidate && typeof candidate === \"string\"\n    );\n    const displayName = [get(entityOrRef, \"spec.profile.displayName\")].find(\n      (candidate) => candidate && typeof candidate === \"string\"\n    );\n    const type = [get(entityOrRef, \"spec.type\")].find(\n      (candidate) => candidate && typeof candidate === \"string\"\n    );\n    return { kind, namespace, name, title, description, displayName, type };\n  }\n  return {};\n}\nfunction getShortRef(options) {\n  var _a, _b, _c, _d, _e;\n  const kind = ((_a = options.kind) == null ? void 0 : _a.toLocaleLowerCase(\"en-US\")) || \"unknown\";\n  const namespace = options.namespace || DEFAULT_NAMESPACE;\n  const name = options.name || \"unknown\";\n  const defaultKindLower = (_c = (_b = options.context) == null ? void 0 : _b.defaultKind) == null ? void 0 : _c.toLocaleLowerCase(\"en-US\");\n  const defaultNamespaceLower = (_e = (_d = options.context) == null ? void 0 : _d.defaultNamespace) == null ? void 0 : _e.toLocaleLowerCase(\"en-US\");\n  let result = name;\n  if (defaultNamespaceLower && namespace.toLocaleLowerCase(\"en-US\") !== defaultNamespaceLower || namespace !== DEFAULT_NAMESPACE) {\n    result = `${namespace}/${result}`;\n  }\n  if (defaultKindLower && kind.toLocaleLowerCase(\"en-US\") !== defaultKindLower) {\n    result = `${kind}:${result}`;\n  }\n  return result;\n}\n\nfunction useUpdatingObservable(value, observable, deps) {\n  const [snapshot, setSnapshot] = useState(value);\n  useEffect(() => {\n    setSnapshot(value);\n    const subscription = observable == null ? void 0 : observable.subscribe({\n      next: (updatedValue) => {\n        setSnapshot(updatedValue);\n      },\n      complete: () => {\n        subscription == null ? void 0 : subscription.unsubscribe();\n      }\n    });\n    return () => {\n      subscription == null ? void 0 : subscription.unsubscribe();\n    };\n  }, deps);\n  return snapshot;\n}\n\nfunction useEntityPresentation(entityOrRef, context) {\n  const apis = useApiHolder();\n  const entityPresentationApi = apis.get(entityPresentationApiRef);\n  const deps = [\n    entityPresentationApi,\n    JSON.stringify(entityOrRef),\n    JSON.stringify(context || null)\n  ];\n  const presentation = useMemo(\n    () => {\n      if (!entityPresentationApi) {\n        return { snapshot: defaultEntityPresentation(entityOrRef, context) };\n      }\n      return entityPresentationApi.forEntity(\n        typeof entityOrRef === \"string\" || \"metadata\" in entityOrRef ? entityOrRef : stringifyEntityRef(entityOrRef),\n        context\n      );\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    deps\n  );\n  return useUpdatingObservable(presentation.snapshot, presentation.update$, [\n    presentation\n  ]);\n}\n\nconst starredEntitiesApiRef = createApiRef({\n  id: \"catalog-react.starred-entities\"\n});\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass MockStarredEntitiesApi {\n  constructor() {\n    __publicField$1(this, \"starredEntities\", /* @__PURE__ */ new Set());\n    __publicField$1(this, \"subscribers\", /* @__PURE__ */ new Set());\n    __publicField$1(this, \"observable\", new ObservableImpl((subscriber) => {\n      subscriber.next(new Set(this.starredEntities));\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    }));\n  }\n  async toggleStarred(entityRef) {\n    if (!this.starredEntities.delete(entityRef)) {\n      this.starredEntities.add(entityRef);\n    }\n    for (const subscription of this.subscribers) {\n      subscription.next(new Set(this.starredEntities));\n    }\n  }\n  starredEntitie$() {\n    return this.observable;\n  }\n}\n\nconst Filters = (props) => {\n  var _a, _b;\n  const isScreenSmallerThanBreakpoint = useMediaQuery(\n    (theme2) => {\n      var _a2, _b2;\n      return theme2.breakpoints.down((_b2 = (_a2 = props.options) == null ? void 0 : _a2.drawerBreakpoint) != null ? _b2 : \"md\");\n    }\n  );\n  const theme = useTheme();\n  const [filterDrawerOpen, setFilterDrawerOpen] = useState(false);\n  return isScreenSmallerThanBreakpoint ? /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      style: { marginTop: theme.spacing(1), marginLeft: theme.spacing(1) },\n      onClick: () => setFilterDrawerOpen(true),\n      startIcon: /* @__PURE__ */ React.createElement(FilterListIcon, null)\n    },\n    \"Filters\"\n  ), /* @__PURE__ */ React.createElement(\n    Drawer,\n    {\n      open: filterDrawerOpen,\n      onClose: () => setFilterDrawerOpen(false),\n      anchor: (_b = (_a = props.options) == null ? void 0 : _a.drawerAnchor) != null ? _b : \"left\",\n      disableAutoFocus: true,\n      keepMounted: true,\n      variant: \"temporary\"\n    },\n    /* @__PURE__ */ React.createElement(Box, { m: 2 }, /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        variant: \"h6\",\n        component: \"h2\",\n        style: { marginBottom: theme.spacing(1) }\n      },\n      \"Filters\"\n    ), props.children)\n  )) : /* @__PURE__ */ React.createElement(Grid, { item: true, lg: 2 }, props.children);\n};\nconst Content = (props) => {\n  return /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, lg: 10 }, props.children);\n};\nconst CatalogFilterLayout = (props) => {\n  return /* @__PURE__ */ React.createElement(Grid, { container: true, style: { position: \"relative\" } }, props.children);\n};\nCatalogFilterLayout.Filters = Filters;\nCatalogFilterLayout.Content = Content;\n\nfunction isEntityTextFilter(t) {\n  return !!t.getFullTextFilters;\n}\nfunction reduceCatalogFilters(filters) {\n  var _a;\n  const condensedFilters = filters.reduce(\n    (compoundFilter, filter) => {\n      return {\n        ...compoundFilter,\n        ...filter.getCatalogFilters ? filter.getCatalogFilters() : {}\n      };\n    },\n    {}\n  );\n  const fullTextFilter = (_a = filters.find(isEntityTextFilter)) == null ? void 0 : _a.getFullTextFilters();\n  return { filter: condensedFilters, fullTextFilter };\n}\nfunction reduceBackendCatalogFilters(filters) {\n  const backendCatalogFilters = {};\n  filters.forEach((filter) => {\n    var _a;\n    if (filter instanceof EntityTagFilter || filter instanceof EntityOwnerFilter || filter instanceof EntityLifecycleFilter || filter instanceof EntityNamespaceFilter || filter instanceof EntityUserFilter || filter instanceof EntityOrphanFilter || filter instanceof EntityTextFilter || filter instanceof UserListFilter) {\n      return;\n    }\n    Object.assign(backendCatalogFilters, ((_a = filter.getCatalogFilters) == null ? void 0 : _a.call(filter)) || {});\n  });\n  return backendCatalogFilters;\n}\nfunction reduceEntityFilters(filters) {\n  return (entity) => filters.every(\n    (filter) => !filter.filterEntity || filter.filterEntity(entity)\n  );\n}\n\nfunction getEntitySourceLocation(entity, scmIntegrationsApi) {\n  var _a;\n  const sourceLocation = (_a = entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_SOURCE_LOCATION];\n  if (!sourceLocation) {\n    return void 0;\n  }\n  try {\n    const sourceLocationRef = parseLocationRef(sourceLocation);\n    const integration = scmIntegrationsApi.byUrl(sourceLocationRef.target);\n    return {\n      locationTargetUrl: sourceLocationRef.target,\n      integrationType: integration == null ? void 0 : integration.type\n    };\n  } catch {\n    return void 0;\n  }\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass EntityKindFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  getCatalogFilters() {\n    return { kind: this.value };\n  }\n  toQueryValue() {\n    return this.value;\n  }\n}\nclass EntityTypeFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  // Simplify `string | string[]` for consumers, always returns an array\n  getTypes() {\n    return Array.isArray(this.value) ? this.value : [this.value];\n  }\n  getCatalogFilters() {\n    return { \"spec.type\": this.getTypes() };\n  }\n  toQueryValue() {\n    return this.getTypes();\n  }\n}\nclass EntityTagFilter {\n  constructor(values) {\n    this.values = values;\n  }\n  filterEntity(entity) {\n    return this.values.every((v) => {\n      var _a;\n      return ((_a = entity.metadata.tags) != null ? _a : []).includes(v);\n    });\n  }\n  getCatalogFilters() {\n    return { \"metadata.tags\": this.values };\n  }\n  toQueryValue() {\n    return this.values;\n  }\n}\nclass EntityTextFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  filterEntity(entity) {\n    const words = this.toUpperArray(this.value.split(/\\s/));\n    const exactMatch = this.toUpperArray([entity.metadata.tags]);\n    const partialMatch = this.toUpperArray([\n      entity.metadata.name,\n      entity.metadata.title\n    ]);\n    for (const word of words) {\n      if (exactMatch.every((m) => m !== word) && partialMatch.every((m) => !m.includes(word))) {\n        return false;\n      }\n    }\n    return true;\n  }\n  getFullTextFilters() {\n    return {\n      term: this.value,\n      // Update this to be more dynamic based on table columns.\n      fields: [\"metadata.name\", \"metadata.title\", \"spec.profile.displayName\"]\n    };\n  }\n  toUpperArray(value) {\n    return value.flat().filter((m) => Boolean(m)).map((m) => m.toLocaleUpperCase(\"en-US\"));\n  }\n}\nclass EntityOwnerFilter {\n  constructor(values) {\n    __publicField(this, \"values\");\n    this.values = values.reduce((fullRefs, ref) => {\n      try {\n        fullRefs.push(\n          stringifyEntityRef(parseEntityRef(ref, { defaultKind: \"Group\" }))\n        );\n        return fullRefs;\n      } catch (err) {\n        return fullRefs;\n      }\n    }, []);\n  }\n  getCatalogFilters() {\n    return { \"relations.ownedBy\": this.values };\n  }\n  filterEntity(entity) {\n    return this.values.some(\n      (v) => getEntityRelations(entity, RELATION_OWNED_BY).some(\n        (o) => stringifyEntityRef(o) === v\n      )\n    );\n  }\n  /**\n   * Get the URL query parameter value. May be a mix of full and humanized entity refs.\n   * @returns list of entity refs.\n   */\n  toQueryValue() {\n    return this.values;\n  }\n}\nclass EntityLifecycleFilter {\n  constructor(values) {\n    this.values = values;\n  }\n  getCatalogFilters() {\n    return { \"spec.lifecycle\": this.values };\n  }\n  filterEntity(entity) {\n    return this.values.some((v) => {\n      var _a;\n      return ((_a = entity.spec) == null ? void 0 : _a.lifecycle) === v;\n    });\n  }\n  toQueryValue() {\n    return this.values;\n  }\n}\nclass EntityNamespaceFilter {\n  constructor(values) {\n    this.values = values;\n  }\n  getCatalogFilters() {\n    return { \"metadata.namespace\": this.values };\n  }\n  filterEntity(entity) {\n    return this.values.some((v) => entity.metadata.namespace === v);\n  }\n  toQueryValue() {\n    return this.values;\n  }\n}\nclass EntityUserFilter {\n  constructor(value, refs) {\n    this.value = value;\n    this.refs = refs;\n  }\n  static owned(ownershipEntityRefs) {\n    return new EntityUserFilter(\"owned\", ownershipEntityRefs);\n  }\n  static all() {\n    return new EntityUserFilter(\"all\");\n  }\n  static starred(starredEntityRefs) {\n    return new EntityUserFilter(\"starred\", starredEntityRefs);\n  }\n  getCatalogFilters() {\n    var _a, _b, _c;\n    if (this.value === \"owned\") {\n      return { \"relations.ownedBy\": (_a = this.refs) != null ? _a : [] };\n    }\n    if (this.value === \"starred\") {\n      return {\n        \"metadata.name\": (_c = (_b = this.refs) == null ? void 0 : _b.map((e) => parseEntityRef(e).name)) != null ? _c : []\n      };\n    }\n    return {};\n  }\n  filterEntity(entity) {\n    var _a, _b, _c, _d;\n    if (this.value === \"starred\") {\n      return (_b = (_a = this.refs) == null ? void 0 : _a.includes(stringifyEntityRef(entity))) != null ? _b : true;\n    }\n    if (this.value === \"owned\") {\n      const relations = getEntityRelations(entity, RELATION_OWNED_BY);\n      return (_d = (_c = this.refs) == null ? void 0 : _c.some(\n        (v) => relations.some((o) => stringifyEntityRef(o) === v)\n      )) != null ? _d : false;\n    }\n    return true;\n  }\n  toQueryValue() {\n    return this.value;\n  }\n}\nclass UserListFilter {\n  constructor(value, isOwnedEntity, isStarredEntity) {\n    this.value = value;\n    this.isOwnedEntity = isOwnedEntity;\n    this.isStarredEntity = isStarredEntity;\n  }\n  filterEntity(entity) {\n    switch (this.value) {\n      case \"owned\":\n        return this.isOwnedEntity(entity);\n      case \"starred\":\n        return this.isStarredEntity(entity);\n      default:\n        return true;\n    }\n  }\n  toQueryValue() {\n    return this.value;\n  }\n}\nclass EntityOrphanFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  getCatalogFilters() {\n    if (this.value) {\n      return { \"metadata.annotations.backstage.io/orphan\": String(this.value) };\n    }\n    return {};\n  }\n  filterEntity(entity) {\n    var _a;\n    const orphan = (_a = entity.metadata.annotations) == null ? void 0 : _a[\"backstage.io/orphan\"];\n    return orphan !== void 0 && this.value.toString() === orphan;\n  }\n}\nclass EntityErrorFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  filterEntity(entity) {\n    var _a, _b;\n    const error = ((_b = (_a = entity == null ? void 0 : entity.status) == null ? void 0 : _a.items) == null ? void 0 : _b.length) > 0;\n    return error !== void 0 && this.value === error;\n  }\n}\n\nconst EntityListContext = createContext(void 0);\nconst EntityListProvider = (props) => {\n  const isMounted = useMountedState();\n  const catalogApi = useApi(catalogApiRef);\n  const [requestedFilters, setRequestedFilters] = useState(\n    {}\n  );\n  const location = useLocation();\n  const enablePagination = props.pagination === true || typeof props.pagination === \"object\";\n  const limit = props.pagination && typeof props.pagination === \"object\" && typeof props.pagination.limit === \"number\" ? props.pagination.limit : 20;\n  const { queryParameters, cursor: initialCursor } = useMemo(() => {\n    var _a;\n    const parsed = qs.parse(location.search, {\n      ignoreQueryPrefix: true\n    });\n    return {\n      queryParameters: (_a = parsed.filters) != null ? _a : {},\n      cursor: typeof parsed.cursor === \"string\" ? parsed.cursor : void 0\n    };\n  }, [location]);\n  const [cursor, setCursor] = useState(initialCursor);\n  const [outputState, setOutputState] = useState(\n    () => {\n      return {\n        appliedFilters: {},\n        entities: [],\n        backendEntities: [],\n        pageInfo: enablePagination ? {} : void 0\n      };\n    }\n  );\n  const [{ loading, error }, refresh] = useAsyncFn(\n    async () => {\n      var _a;\n      const compacted = compact(Object.values(requestedFilters));\n      const queryParams = Object.keys(requestedFilters).reduce(\n        (params, key) => {\n          const filter = requestedFilters[key];\n          if (filter == null ? void 0 : filter.toQueryValue) {\n            params[key] = filter.toQueryValue();\n          }\n          return params;\n        },\n        {}\n      );\n      if (enablePagination) {\n        if (cursor) {\n          if (cursor !== outputState.appliedCursor) {\n            const entityFilter = reduceEntityFilters(compacted);\n            const response = await catalogApi.queryEntities({\n              cursor,\n              limit\n            });\n            setOutputState({\n              appliedFilters: requestedFilters,\n              appliedCursor: cursor,\n              backendEntities: response.items,\n              entities: response.items.filter(entityFilter),\n              pageInfo: response.pageInfo\n            });\n          }\n        } else {\n          const entityFilter = reduceEntityFilters(compacted);\n          const backendFilter = reduceCatalogFilters(compacted);\n          const previousBackendFilter = reduceCatalogFilters(\n            compact(Object.values(outputState.appliedFilters))\n          );\n          if (!isEqual(previousBackendFilter, backendFilter)) {\n            const response = await catalogApi.queryEntities({\n              ...backendFilter,\n              limit,\n              orderFields: [{ field: \"metadata.name\", order: \"asc\" }]\n            });\n            setOutputState({\n              appliedFilters: requestedFilters,\n              backendEntities: response.items,\n              entities: response.items.filter(entityFilter),\n              pageInfo: response.pageInfo\n            });\n          }\n        }\n      } else {\n        const entityFilter = reduceEntityFilters(compacted);\n        const backendFilter = reduceBackendCatalogFilters(compacted);\n        const previousBackendFilter = reduceBackendCatalogFilters(\n          compact(Object.values(outputState.appliedFilters))\n        );\n        if (!isEqual(previousBackendFilter, backendFilter)) {\n          const response = await catalogApi.getEntities({\n            filter: backendFilter\n          });\n          setOutputState({\n            appliedFilters: requestedFilters,\n            backendEntities: response.items,\n            entities: response.items.filter(entityFilter)\n          });\n        } else {\n          setOutputState({\n            appliedFilters: requestedFilters,\n            backendEntities: outputState.backendEntities,\n            entities: outputState.backendEntities.filter(entityFilter)\n          });\n        }\n      }\n      if (isMounted()) {\n        const oldParams = qs.parse(location.search, {\n          ignoreQueryPrefix: true\n        });\n        const newParams = qs.stringify(\n          { ...oldParams, filters: queryParams, cursor },\n          { addQueryPrefix: true, arrayFormat: \"repeat\" }\n        );\n        const newUrl = `${window.location.pathname}${newParams}`;\n        (_a = window.history) == null ? void 0 : _a.replaceState(null, document.title, newUrl);\n      }\n    },\n    [\n      catalogApi,\n      queryParameters,\n      requestedFilters,\n      outputState,\n      cursor,\n      enablePagination\n    ],\n    { loading: true }\n  );\n  useDebounce(refresh, 10, [requestedFilters, cursor]);\n  const updateFilters = useCallback(\n    (update) => {\n      setCursor(void 0);\n      setRequestedFilters((prevFilters) => {\n        const newFilters = typeof update === \"function\" ? update(prevFilters) : update;\n        return { ...prevFilters, ...newFilters };\n      });\n    },\n    []\n  );\n  const pageInfo = useMemo(() => {\n    var _a, _b;\n    if (!enablePagination) {\n      return void 0;\n    }\n    const prevCursor = (_a = outputState.pageInfo) == null ? void 0 : _a.prevCursor;\n    const nextCursor = (_b = outputState.pageInfo) == null ? void 0 : _b.nextCursor;\n    return {\n      prev: prevCursor ? () => setCursor(prevCursor) : void 0,\n      next: nextCursor ? () => setCursor(nextCursor) : void 0\n    };\n  }, [enablePagination, outputState.pageInfo]);\n  const value = useMemo(\n    () => ({\n      filters: outputState.appliedFilters,\n      entities: outputState.entities,\n      backendEntities: outputState.backendEntities,\n      updateFilters,\n      queryParameters,\n      loading,\n      error,\n      pageInfo\n    }),\n    [outputState, updateFilters, queryParameters, loading, error, pageInfo]\n  );\n  return /* @__PURE__ */ React.createElement(EntityListContext.Provider, { value }, props.children);\n};\nfunction useEntityList() {\n  const context = useContext(EntityListContext);\n  if (!context)\n    throw new Error(\"useEntityList must be used within EntityListProvider\");\n  return context;\n}\n\nfunction useEntityTypeFilter() {\n  var _a;\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    filters: { kind: kindFilter, type: typeFilter },\n    queryParameters: { type: typeParameter },\n    updateFilters\n  } = useEntityList();\n  const flattenedQueryTypes = useMemo(\n    () => [typeParameter].flat().filter(Boolean),\n    [typeParameter]\n  );\n  const [selectedTypes, setSelectedTypes] = useState(\n    flattenedQueryTypes.length ? flattenedQueryTypes : (_a = typeFilter == null ? void 0 : typeFilter.getTypes()) != null ? _a : []\n  );\n  useEffect(() => {\n    if (flattenedQueryTypes.length) {\n      setSelectedTypes(flattenedQueryTypes);\n    }\n  }, [flattenedQueryTypes]);\n  const [availableTypes, setAvailableTypes] = useState([]);\n  const kind = useMemo(() => kindFilter == null ? void 0 : kindFilter.value, [kindFilter]);\n  const {\n    error,\n    loading,\n    value: facets\n  } = useAsync(async () => {\n    if (kind) {\n      const items = await catalogApi.getEntityFacets({\n        filter: { kind },\n        facets: [\"spec.type\"]\n      }).then((response) => response.facets[\"spec.type\"] || []);\n      return items;\n    }\n    return [];\n  }, [kind, catalogApi]);\n  const facetsRef = useRef(facets);\n  useEffect(() => {\n    const oldFacets = facetsRef.current;\n    facetsRef.current = facets;\n    if (loading || !kind || oldFacets === facets || !facets) {\n      return;\n    }\n    const newTypes = [\n      ...new Set(\n        sortBy(facets, (f) => -f.count).map(\n          (f) => f.value.toLocaleLowerCase(\"en-US\")\n        )\n      )\n    ];\n    setAvailableTypes(newTypes);\n    const stillValidTypes = selectedTypes.filter(\n      (value) => newTypes.includes(value)\n    );\n    if (!isEqual$1(selectedTypes, stillValidTypes)) {\n      setSelectedTypes(stillValidTypes);\n    }\n  }, [loading, kind, selectedTypes, setSelectedTypes, facets]);\n  useEffect(() => {\n    updateFilters({\n      type: selectedTypes.length ? new EntityTypeFilter(selectedTypes) : void 0\n    });\n  }, [selectedTypes, updateFilters]);\n  return {\n    loading,\n    error,\n    availableTypes,\n    selectedTypes,\n    setSelectedTypes\n  };\n}\n\nfunction useRelatedEntities(entity, relationFilter) {\n  var _a, _b;\n  const filterByTypeLower = (_a = relationFilter == null ? void 0 : relationFilter.type) == null ? void 0 : _a.toLocaleLowerCase(\"en-US\");\n  const filterByKindLower = (_b = relationFilter == null ? void 0 : relationFilter.kind) == null ? void 0 : _b.toLocaleLowerCase(\"en-US\");\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    loading,\n    value: entities,\n    error\n  } = useAsync(async () => {\n    var _a2;\n    const relations = (_a2 = entity.relations) == null ? void 0 : _a2.filter(\n      (r) => (!filterByTypeLower || r.type.toLocaleLowerCase(\"en-US\") === filterByTypeLower) && (!filterByKindLower || parseEntityRef(r.targetRef).kind === filterByKindLower)\n    );\n    if (!(relations == null ? void 0 : relations.length)) {\n      return [];\n    }\n    const { items } = await catalogApi.getEntitiesByRefs({\n      entityRefs: relations.map((r) => r.targetRef)\n    });\n    return items.filter((x) => Boolean(x));\n  }, [entity, filterByTypeLower, filterByKindLower]);\n  return {\n    entities,\n    loading,\n    error\n  };\n}\n\nfunction getEntityRef$1(entityOrRef) {\n  return typeof entityOrRef === \"string\" ? entityOrRef : stringifyEntityRef(entityOrRef);\n}\nfunction useStarredEntities() {\n  const starredEntitiesApi = useApi(starredEntitiesApiRef);\n  const starredEntities = useObservable(\n    useMemo(() => starredEntitiesApi.starredEntitie$(), [starredEntitiesApi]),\n    /* @__PURE__ */ new Set()\n  );\n  const isStarredEntity = useCallback(\n    (entityOrRef) => starredEntities.has(getEntityRef$1(entityOrRef)),\n    [starredEntities]\n  );\n  const toggleStarredEntity = useCallback(\n    (entityOrRef) => starredEntitiesApi.toggleStarred(getEntityRef$1(entityOrRef)).then(),\n    [starredEntitiesApi]\n  );\n  return {\n    starredEntities,\n    toggleStarredEntity,\n    isStarredEntity\n  };\n}\n\nfunction getEntityRef(entityOrRef) {\n  return typeof entityOrRef === \"string\" ? entityOrRef : stringifyEntityRef(entityOrRef);\n}\nfunction useStarredEntity(entityOrRef) {\n  const starredEntitiesApi = useApi(starredEntitiesApiRef);\n  const [isStarredEntity, setIsStarredEntity] = useState(false);\n  useEffect(() => {\n    const subscription = starredEntitiesApi.starredEntitie$().subscribe({\n      next(starredEntities) {\n        setIsStarredEntity(starredEntities.has(getEntityRef(entityOrRef)));\n      }\n    });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [entityOrRef, starredEntitiesApi]);\n  const toggleStarredEntity = useCallback(\n    () => starredEntitiesApi.toggleStarred(getEntityRef(entityOrRef)).then(),\n    [entityOrRef, starredEntitiesApi]\n  );\n  return {\n    toggleStarredEntity,\n    isStarredEntity\n  };\n}\n\nfunction useEntityOwnership() {\n  const identityApi = useApi(identityApiRef);\n  const { loading, value: refs } = useAsync(\n    async () => {\n      const { ownershipEntityRefs } = await identityApi.getBackstageIdentity();\n      return ownershipEntityRefs;\n    },\n    // load only on mount\n    []\n  );\n  const isOwnedEntity = useMemo(() => {\n    const myOwnerRefs = new Set(refs != null ? refs : []);\n    return (entity) => {\n      const entityOwnerRefs = getEntityRelations(entity, RELATION_OWNED_BY).map(\n        stringifyEntityRef\n      );\n      for (const ref of entityOwnerRefs) {\n        if (myOwnerRefs.has(ref)) {\n          return true;\n        }\n      }\n      return false;\n    };\n  }, [refs]);\n  return { loading, isOwnedEntity };\n}\n\nfunction useAllKinds() {\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    error,\n    loading,\n    value: allKinds\n  } = useAsync(async () => {\n    const items = await catalogApi.getEntityFacets({ facets: [\"kind\"] }).then((response) => {\n      var _a;\n      return ((_a = response.facets.kind) == null ? void 0 : _a.map((f) => f.value).sort()) || [];\n    });\n    return items;\n  }, [catalogApi]);\n  return { loading, error, allKinds: allKinds != null ? allKinds : [] };\n}\nfunction filterKinds(allKinds, allowedKinds, forcedKinds) {\n  let availableKinds = allKinds;\n  if (allowedKinds) {\n    availableKinds = availableKinds.filter(\n      (k) => allowedKinds.some(\n        (a) => a.toLocaleLowerCase(\"en-US\") === k.toLocaleLowerCase(\"en-US\")\n      )\n    );\n  }\n  if (forcedKinds && !allKinds.some(\n    (a) => a.toLocaleLowerCase(\"en-US\") === forcedKinds.toLocaleLowerCase(\"en-US\")\n  )) {\n    availableKinds = availableKinds.concat([forcedKinds]);\n  }\n  const kindsMap = availableKinds.sort().reduce((acc, kind) => {\n    acc[kind.toLocaleLowerCase(\"en-US\")] = kind;\n    return acc;\n  }, {});\n  return kindsMap;\n}\n\nfunction useEntityKindFilter(opts) {\n  var _a, _b;\n  const {\n    filters,\n    queryParameters: { kind: kindParameter },\n    updateFilters\n  } = useEntityList();\n  const queryParamKind = useMemo(\n    () => [kindParameter].flat()[0],\n    [kindParameter]\n  );\n  const [selectedKind, setSelectedKind] = useState(\n    (_b = queryParamKind != null ? queryParamKind : (_a = filters.kind) == null ? void 0 : _a.value) != null ? _b : opts.initialFilter\n  );\n  useEffect(() => {\n    if (queryParamKind) {\n      setSelectedKind(queryParamKind);\n    }\n  }, [queryParamKind]);\n  useEffect(() => {\n    var _a2, _b2;\n    if ((_a2 = filters.kind) == null ? void 0 : _a2.value) {\n      setSelectedKind((_b2 = filters.kind) == null ? void 0 : _b2.value);\n    }\n  }, [filters.kind]);\n  useEffect(() => {\n    updateFilters({\n      kind: selectedKind ? new EntityKindFilter(selectedKind) : void 0\n    });\n  }, [selectedKind, updateFilters]);\n  const { allKinds, loading, error } = useAllKinds();\n  return {\n    loading,\n    error,\n    allKinds: allKinds != null ? allKinds : [],\n    selectedKind,\n    setSelectedKind\n  };\n}\nconst EntityKindPicker = (props) => {\n  const { allowedKinds, hidden, initialFilter = \"component\" } = props;\n  const alertApi = useApi(alertApiRef);\n  const { error, allKinds, selectedKind, setSelectedKind } = useEntityKindFilter({\n    initialFilter\n  });\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: `Failed to load entity kinds`,\n        severity: \"error\"\n      });\n    }\n  }, [error, alertApi]);\n  if (error)\n    return null;\n  const options = filterKinds(allKinds, allowedKinds, selectedKind);\n  const items = Object.keys(options).map((key) => ({\n    value: key,\n    label: options[key]\n  }));\n  return hidden ? null : /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      label: \"Kind\",\n      items,\n      selected: selectedKind.toLocaleLowerCase(\"en-US\"),\n      onChange: (value) => setSelectedKind(String(value))\n    }\n  ));\n};\n\nconst icon$2 = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\" });\nconst checkedIcon$2 = /* @__PURE__ */ React.createElement(CheckBoxIcon, { fontSize: \"small\" });\nfunction OptionCheckbox({ selected }) {\n  return /* @__PURE__ */ React.createElement(Checkbox, { icon: icon$2, checkedIcon: checkedIcon$2, checked: selected });\n}\nconst EntityAutocompletePickerOption = memo((props) => {\n  const { selected, value, availableOptions, showCounts } = props;\n  const label = showCounts ? `${value} (${availableOptions == null ? void 0 : availableOptions[value]})` : value;\n  return /* @__PURE__ */ React.createElement(\n    FormControlLabel,\n    {\n      control: /* @__PURE__ */ React.createElement(OptionCheckbox, { selected }),\n      label,\n      onClick: (event) => event.preventDefault()\n    }\n  );\n});\n\nconst useStyles$h = makeStyles(\n  {\n    input: {}\n  },\n  {\n    name: \"CatalogReactEntityAutocompletePickerInput\"\n  }\n);\nfunction EntityAutocompletePickerInput(params) {\n  const classes = useStyles$h();\n  return /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      variant: \"outlined\",\n      ...params,\n      className: classNames(classes.input, params.className)\n    }\n  );\n}\n\nfunction EntityAutocompletePicker(props) {\n  var _a, _b;\n  const {\n    label,\n    name,\n    path,\n    showCounts,\n    Filter,\n    InputProps,\n    initialSelectedOptions = []\n  } = props;\n  const {\n    updateFilters,\n    filters,\n    queryParameters: { [name]: queryParameter }\n  } = useEntityList();\n  const catalogApi = useApi(catalogApiRef);\n  const { value: availableValues } = useAsync(async () => {\n    var _a2;\n    const facet = path;\n    const { facets } = await catalogApi.getEntityFacets({\n      facets: [facet],\n      filter: (_a2 = filters.kind) == null ? void 0 : _a2.getCatalogFilters()\n    });\n    return Object.fromEntries(\n      facets[facet].map(({ value, count }) => [value, count])\n    );\n  }, [filters.kind]);\n  const queryParameters = useMemo(\n    () => [queryParameter].flat().filter(Boolean),\n    [queryParameter]\n  );\n  const [selectedOptions, setSelectedOptions] = useState(\n    queryParameters.length ? queryParameters : (_b = (_a = filters[name]) == null ? void 0 : _a.values) != null ? _b : initialSelectedOptions\n  );\n  useEffect(() => {\n    if (queryParameters.length) {\n      setSelectedOptions(queryParameters);\n    }\n  }, [queryParameters]);\n  const availableOptions = Object.keys(availableValues != null ? availableValues : {});\n  const shouldAddFilter = selectedOptions.length && availableOptions.length;\n  useEffect(() => {\n    updateFilters({\n      [name]: shouldAddFilter ? new Filter(selectedOptions) : void 0\n    });\n  }, [name, shouldAddFilter, selectedOptions, Filter, updateFilters]);\n  const filter = filters[name];\n  if (filter && typeof filter === \"object\" && !(\"values\" in filter) || !availableOptions.length) {\n    return null;\n  }\n  if (availableOptions.length <= 1)\n    return null;\n  return /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"button\", component: \"label\" }, label, /* @__PURE__ */ React.createElement(\n    Autocomplete,\n    {\n      multiple: true,\n      disableCloseOnSelect: true,\n      options: availableOptions,\n      value: selectedOptions,\n      onChange: (_event, options) => setSelectedOptions(options),\n      renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(\n        EntityAutocompletePickerOption,\n        {\n          selected,\n          value: option,\n          availableOptions: availableValues,\n          showCounts: !!showCounts\n        }\n      ),\n      size: \"small\",\n      popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, { \"data-testid\": `${String(name)}-picker-expand` }),\n      renderInput: (params) => /* @__PURE__ */ React.createElement(EntityAutocompletePickerInput, { ...params, ...InputProps })\n    }\n  )));\n}\n\nconst useStyles$g = makeStyles(\n  {\n    input: {}\n  },\n  {\n    name: \"CatalogReactEntityLifecyclePicker\"\n  }\n);\nconst EntityLifecyclePicker = (props) => {\n  const { initialFilter = [] } = props;\n  const classes = useStyles$g();\n  return /* @__PURE__ */ React.createElement(\n    EntityAutocompletePicker,\n    {\n      label: \"Lifecycle\",\n      name: \"lifecycles\",\n      path: \"spec.lifecycle\",\n      Filter: EntityLifecycleFilter,\n      InputProps: { className: classes.input },\n      initialSelectedOptions: initialFilter\n    }\n  );\n};\n\nfunction humanizeEntityRef(entityRef, opts) {\n  const defaultKind = opts == null ? void 0 : opts.defaultKind;\n  let kind;\n  let namespace;\n  let name;\n  if (\"metadata\" in entityRef) {\n    kind = entityRef.kind;\n    namespace = entityRef.metadata.namespace;\n    name = entityRef.metadata.name;\n  } else {\n    kind = entityRef.kind;\n    namespace = entityRef.namespace;\n    name = entityRef.name;\n  }\n  if (namespace === void 0 || namespace === \"\") {\n    namespace = DEFAULT_NAMESPACE;\n  }\n  if ((opts == null ? void 0 : opts.defaultNamespace) !== void 0) {\n    if ((opts == null ? void 0 : opts.defaultNamespace) === namespace) {\n      namespace = void 0;\n    }\n  } else if (namespace === DEFAULT_NAMESPACE) {\n    namespace = void 0;\n  }\n  kind = kind.toLocaleLowerCase(\"en-US\");\n  kind = defaultKind && defaultKind.toLocaleLowerCase(\"en-US\") === kind ? void 0 : kind;\n  return `${kind ? `${kind}:` : \"\"}${namespace ? `${namespace}/` : \"\"}${name}`;\n}\nfunction humanizeEntity(entity, defaultName) {\n  for (const path of [\"spec.profile.displayName\", \"metadata.title\"]) {\n    const value = get(entity, path);\n    if (value && typeof value === \"string\") {\n      return value;\n    }\n  }\n  return defaultName;\n}\n\nfunction useFacetsEntities({ enabled }) {\n  const catalogApi = useApi(catalogApiRef);\n  const [facetsPromise] = useState(async () => {\n    if (!enabled) {\n      return [];\n    }\n    const facet = \"relations.ownedBy\";\n    return catalogApi.getEntityFacets({ facets: [facet] }).then(\n      (response) => response.facets[facet].map((e) => e.value).map((ref) => {\n        const { kind, name, namespace } = parseEntityRef(ref);\n        return {\n          apiVersion: \"backstage.io/v1beta1\",\n          kind,\n          metadata: { name, namespace }\n        };\n      }).sort(\n        (a, b) => (a.metadata.namespace || \"\").localeCompare(\n          b.metadata.namespace || \"\",\n          \"en-US\"\n        ) || a.metadata.name.localeCompare(b.metadata.name, \"en-US\") || a.kind.localeCompare(b.kind, \"en-US\")\n      )\n    ).catch(() => []);\n  });\n  return useAsyncFn(\n    async (request, options) => {\n      var _a;\n      const facets = await facetsPromise;\n      if (!facets) {\n        return {\n          items: []\n        };\n      }\n      const limit = (_a = options == null ? void 0 : options.limit) != null ? _a : 20;\n      const { text, start } = decodeCursor(request);\n      const filteredRefs = facets.filter((e) => filterEntity(text, e));\n      const end = start + limit;\n      return {\n        items: filteredRefs.slice(0, end),\n        ...encodeCursor({\n          entities: filteredRefs,\n          limit: end,\n          payload: {\n            text,\n            start: end\n          }\n        })\n      };\n    },\n    [facetsPromise],\n    { loading: true, value: { items: [] } }\n  );\n}\nfunction decodeCursor(request) {\n  if (isFacetsResponse(request) && request.cursor) {\n    return JSON.parse(atob(request.cursor));\n  }\n  return {\n    text: request.text || \"\",\n    start: 0\n  };\n}\nfunction isFacetsResponse(request) {\n  return !!request.cursor;\n}\nfunction encodeCursor({\n  entities,\n  limit,\n  payload\n}) {\n  if (entities.length > limit) {\n    return { cursor: btoa(JSON.stringify(payload)) };\n  }\n  return {};\n}\nfunction filterEntity(text, entity) {\n  var _a;\n  const normalizedText = text.trim();\n  return entity.kind.includes(normalizedText) || ((_a = entity.metadata.namespace) == null ? void 0 : _a.includes(normalizedText)) || entity.metadata.name.includes(normalizedText);\n}\n\nfunction useQueryEntities() {\n  const catalogApi = useApi(catalogApiRef);\n  return useAsyncFn(\n    async (request, options) => {\n      var _a;\n      const initialRequest = request;\n      const cursorRequest = request;\n      const limit = (_a = options == null ? void 0 : options.limit) != null ? _a : 20;\n      if (cursorRequest.cursor) {\n        const response2 = await catalogApi.queryEntities({\n          cursor: cursorRequest.cursor,\n          limit\n        });\n        return {\n          cursor: response2.pageInfo.nextCursor,\n          items: [...cursorRequest.items, ...response2.items]\n        };\n      }\n      const response = await catalogApi.queryEntities({\n        fullTextFilter: {\n          term: initialRequest.text || \"\",\n          fields: [\n            \"metadata.name\",\n            \"kind\",\n            \"spec.profile.displayname\",\n            \"metadata.title\"\n          ]\n        },\n        filter: { kind: [\"User\", \"Group\"] },\n        orderFields: [{ field: \"metadata.name\", order: \"asc\" }],\n        limit\n      });\n      return {\n        cursor: response.pageInfo.nextCursor,\n        items: response.items\n      };\n    },\n    [],\n    { loading: true }\n  );\n}\n\nfunction useFetchEntities({\n  mode,\n  initialSelectedOwnersRefs\n}) {\n  const isOwnersOnlyMode = mode === \"owners-only\";\n  const queryEntitiesResponse = useQueryEntities();\n  const facetsEntitiesResponse = useFacetsEntities({\n    enabled: isOwnersOnlyMode\n  });\n  const [state, handleFetch] = isOwnersOnlyMode ? facetsEntitiesResponse : queryEntitiesResponse;\n  return [\n    state,\n    handleFetch,\n    useSelectedOwners({\n      enabled: !isOwnersOnlyMode,\n      initialSelectedOwnersRefs\n    })\n  ];\n}\nfunction useSelectedOwners({\n  enabled,\n  initialSelectedOwnersRefs\n}) {\n  const allEntities = useRef({});\n  const catalogApi = useApi(catalogApiRef);\n  const [, handleFetch] = useAsyncFn(async () => {\n    const initialSelectedEntities = await catalogApi.getEntitiesByRefs({\n      entityRefs: initialSelectedOwnersRefs\n    });\n    initialSelectedEntities.items.forEach((e) => {\n      if (e) {\n        allEntities.current[stringifyEntityRef(e)] = e;\n      }\n    });\n  }, []);\n  useMountEffect(() => {\n    if (enabled && initialSelectedOwnersRefs.length > 0) {\n      handleFetch();\n    }\n  });\n  return {\n    getEntity: (entityRef) => allEntities.current[entityRef],\n    setEntity: (entity) => {\n      allEntities.current[stringifyEntityRef(entity)] = entity;\n    }\n  };\n}\n\nconst useStyles$f = makeStyles(\n  {\n    input: {},\n    fullWidth: { width: \"100%\" },\n    boxLabel: {\n      width: \"100%\",\n      textOverflow: \"ellipsis\",\n      overflow: \"hidden\"\n    }\n  },\n  {\n    name: \"CatalogReactEntityOwnerPicker\"\n  }\n);\nconst FixedWidthFormControlLabel = withStyles(\n  (_theme) => ({\n    label: {\n      width: \"100%\"\n    },\n    root: {\n      width: \"90%\"\n    }\n  }),\n  { name: \"FixedWidthFormControlLabel\" }\n)(FormControlLabel);\nconst icon$1 = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\" });\nconst checkedIcon$1 = /* @__PURE__ */ React.createElement(CheckBoxIcon, { fontSize: \"small\" });\nfunction RenderOptionLabel(props) {\n  const classes = useStyles$f();\n  const isGroup = props.entity.kind.toLocaleLowerCase(\"en-US\") === \"group\";\n  const { primaryTitle: title } = useEntityPresentation(props.entity);\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.fullWidth }, /* @__PURE__ */ React.createElement(\n    FixedWidthFormControlLabel,\n    {\n      className: classes.fullWidth,\n      control: /* @__PURE__ */ React.createElement(\n        Checkbox,\n        {\n          icon: icon$1,\n          checkedIcon: checkedIcon$1,\n          checked: props.isSelected\n        }\n      ),\n      onClick: (event) => event.preventDefault(),\n      label: /* @__PURE__ */ React.createElement(Tooltip, { title }, /* @__PURE__ */ React.createElement(Box, { display: \"flex\", alignItems: \"center\" }, isGroup ? /* @__PURE__ */ React.createElement(GroupIcon, { fontSize: \"small\" }) : /* @__PURE__ */ React.createElement(PersonIcon, { fontSize: \"small\" }), \"\\xA0\", /* @__PURE__ */ React.createElement(Box, { className: classes.boxLabel }, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, title))))\n    }\n  ));\n}\nconst EntityOwnerPicker = (props) => {\n  var _a, _b, _c;\n  const classes = useStyles$f();\n  const { mode = \"owners-only\" } = props || {};\n  const {\n    updateFilters,\n    filters,\n    queryParameters: { owners: ownersParameter }\n  } = useEntityList();\n  const [text, setText] = useState(\"\");\n  const queryParamOwners = useMemo(\n    () => [ownersParameter].flat().filter(Boolean),\n    [ownersParameter]\n  );\n  const [selectedOwners, setSelectedOwners] = useState(\n    queryParamOwners.length ? queryParamOwners : (_b = (_a = filters.owners) == null ? void 0 : _a.values) != null ? _b : []\n  );\n  const [{ value, loading }, handleFetch, cache] = useFetchEntities({\n    mode,\n    initialSelectedOwnersRefs: selectedOwners\n  });\n  useDebouncedEffect(() => handleFetch({ text }), [text, handleFetch], 250);\n  const availableOwners = (value == null ? void 0 : value.items) || [];\n  useEffect(() => {\n    if (queryParamOwners.length) {\n      const filter = new EntityOwnerFilter(queryParamOwners);\n      setSelectedOwners(filter.values);\n    }\n  }, [queryParamOwners]);\n  useEffect(() => {\n    updateFilters({\n      owners: selectedOwners.length ? new EntityOwnerFilter(selectedOwners) : void 0\n    });\n  }, [selectedOwners, updateFilters]);\n  if ([\"user\", \"group\"].includes(\n    ((_c = filters.kind) == null ? void 0 : _c.value.toLocaleLowerCase(\"en-US\")) || \"\"\n  )) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"button\", component: \"label\" }, \"Owner\", /* @__PURE__ */ React.createElement(\n    Autocomplete,\n    {\n      multiple: true,\n      disableCloseOnSelect: true,\n      loading,\n      options: availableOwners,\n      value: selectedOwners,\n      getOptionSelected: (o, v) => {\n        if (typeof v === \"string\") {\n          return stringifyEntityRef(o) === v;\n        }\n        return o === v;\n      },\n      getOptionLabel: (o) => {\n        const entity = typeof o === \"string\" ? cache.getEntity(o) || parseEntityRef(o, {\n          defaultKind: \"group\",\n          defaultNamespace: \"default\"\n        }) : o;\n        return humanizeEntity(entity, humanizeEntityRef(entity));\n      },\n      onChange: (_, owners) => {\n        setText(\"\");\n        setSelectedOwners(\n          owners.map((e) => {\n            const entityRef = typeof e === \"string\" ? e : stringifyEntityRef(e);\n            if (typeof e !== \"string\") {\n              cache.setEntity(e);\n            }\n            return entityRef;\n          })\n        );\n      },\n      filterOptions: (x) => x,\n      renderOption: (entity, { selected }) => {\n        return /* @__PURE__ */ React.createElement(RenderOptionLabel, { entity, isSelected: selected });\n      },\n      size: \"small\",\n      popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, { \"data-testid\": \"owner-picker-expand\" }),\n      renderInput: (params) => /* @__PURE__ */ React.createElement(\n        TextField,\n        {\n          ...params,\n          className: classes.input,\n          onChange: (e) => {\n            setText(e.currentTarget.value);\n          },\n          variant: \"outlined\"\n        }\n      ),\n      ListboxProps: {\n        onScroll: (e) => {\n          const element = e.currentTarget;\n          const hasReachedEnd = Math.abs(\n            element.scrollHeight - element.clientHeight - element.scrollTop\n          ) < 1;\n          if (hasReachedEnd && (value == null ? void 0 : value.cursor)) {\n            handleFetch({ items: value.items, cursor: value.cursor });\n          }\n        },\n        \"data-testid\": \"owner-picker-listbox\"\n      }\n    }\n  )));\n};\n\nconst useStyles$e = makeStyles(\n  (theme) => ({\n    root: {\n      display: \"inline-flex\",\n      alignItems: \"center\"\n    },\n    icon: {\n      marginRight: theme.spacing(0.5),\n      color: theme.palette.text.secondary,\n      lineHeight: 0\n    }\n  }),\n  { name: \"CatalogReactEntityDisplayName\" }\n);\nconst EntityDisplayName = (props) => {\n  const { entityRef, hideIcon, disableTooltip, defaultKind, defaultNamespace } = props;\n  const classes = useStyles$e();\n  const { primaryTitle, secondaryTitle, Icon } = useEntityPresentation(\n    entityRef,\n    { defaultKind, defaultNamespace }\n  );\n  let content = /* @__PURE__ */ React.createElement(React.Fragment, null, primaryTitle);\n  content = /* @__PURE__ */ React.createElement(Box, { component: \"span\", className: classes.root }, Icon && !hideIcon ? /* @__PURE__ */ React.createElement(Box, { component: \"span\", className: classes.icon }, /* @__PURE__ */ React.createElement(Icon, { fontSize: \"inherit\" })) : null, content);\n  if (secondaryTitle && !disableTooltip) {\n    content = /* @__PURE__ */ React.createElement(Tooltip, { enterDelay: 1500, title: secondaryTitle }, content);\n  }\n  return content;\n};\n\nconst entityRouteRef = getOrCreateGlobalSingleton(\n  \"catalog:entity-route-ref\",\n  () => createRouteRef({\n    id: \"catalog:entity\",\n    params: [\"namespace\", \"kind\", \"name\"]\n  })\n);\nfunction entityRouteParams(entity) {\n  var _a, _b;\n  return {\n    kind: entity.kind.toLocaleLowerCase(\"en-US\"),\n    namespace: (_b = (_a = entity.metadata.namespace) == null ? void 0 : _a.toLocaleLowerCase(\"en-US\")) != null ? _b : DEFAULT_NAMESPACE,\n    name: entity.metadata.name\n  };\n}\n\nconst EntityRefLink = forwardRef(\n  (props, ref) => {\n    var _a;\n    const {\n      entityRef,\n      defaultKind,\n      defaultNamespace,\n      title,\n      children,\n      hideIcon,\n      ...linkProps\n    } = props;\n    const entityRoute = useEntityRoute(props.entityRef);\n    const content = (_a = children != null ? children : title) != null ? _a : /* @__PURE__ */ React.createElement(\n      EntityDisplayName,\n      {\n        entityRef,\n        defaultKind,\n        defaultNamespace,\n        hideIcon\n      }\n    );\n    return /* @__PURE__ */ React.createElement(Link, { ...linkProps, ref, to: entityRoute }, content);\n  }\n);\nfunction useEntityRoute(entityRef) {\n  var _a;\n  const entityRoute = useRouteRef(entityRouteRef);\n  let kind;\n  let namespace;\n  let name;\n  if (typeof entityRef === \"string\") {\n    const parsed = parseEntityRef(entityRef);\n    kind = parsed.kind;\n    namespace = parsed.namespace;\n    name = parsed.name;\n  } else if (\"metadata\" in entityRef) {\n    kind = entityRef.kind;\n    namespace = entityRef.metadata.namespace;\n    name = entityRef.metadata.name;\n  } else {\n    kind = entityRef.kind;\n    namespace = entityRef.namespace;\n    name = entityRef.name;\n  }\n  kind = kind.toLocaleLowerCase(\"en-US\");\n  namespace = (_a = namespace == null ? void 0 : namespace.toLocaleLowerCase(\"en-US\")) != null ? _a : DEFAULT_NAMESPACE;\n  const routeParams = {\n    kind: encodeURIComponent(kind),\n    namespace: encodeURIComponent(namespace),\n    name: encodeURIComponent(name)\n  };\n  return entityRoute(routeParams);\n}\n\nfunction EntityRefLinks(props) {\n  const { entityRefs, hideIcons, ...linkProps } = props;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, entityRefs.map((r, i) => {\n    const entityRefString = typeof r === \"string\" ? r : stringifyEntityRef(r);\n    return /* @__PURE__ */ React.createElement(React.Fragment, { key: `${i}.${entityRefString}` }, i > 0 && \", \", /* @__PURE__ */ React.createElement(EntityRefLink, { ...linkProps, entityRef: r, hideIcon: hideIcons }));\n  }));\n}\n\nconst EntityCardActions = (props) => {\n  const entityRoute = useRouteRef(entityRouteRef);\n  return /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      component: Link,\n      \"aria-label\": \"Show\",\n      title: \"Show details\",\n      to: entityRoute(getCompoundEntityRef(props.entity))\n    },\n    /* @__PURE__ */ React.createElement(InfoIcon, null)\n  );\n};\n\nconst EmailCardAction = (props) => {\n  return /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      component: Link,\n      \"aria-label\": \"Email\",\n      title: `Email ${props.email}`,\n      to: `mailto:${props.email}`\n    },\n    /* @__PURE__ */ React.createElement(EmailIcon, null)\n  );\n};\n\nconst GroupCardActions = (props) => {\n  var _a;\n  const email = (_a = props.entity.spec.profile) == null ? void 0 : _a.email;\n  return email ? /* @__PURE__ */ React.createElement(EmailCardAction, { email }) : null;\n};\n\nconst UserCardActions = (props) => {\n  var _a;\n  const email = (_a = props.entity.spec.profile) == null ? void 0 : _a.email;\n  return email ? /* @__PURE__ */ React.createElement(EmailCardAction, { email }) : null;\n};\n\nconst useStyles$d = makeStyles(() => {\n  return {\n    popoverPaper: {\n      width: \"30em\"\n    },\n    descriptionTypography: {\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\",\n      display: \"-webkit-box\",\n      WebkitLineClamp: 2,\n      WebkitBoxOrient: \"vertical\"\n    }\n  };\n});\nconst maxTagChips = 4;\nconst EntityPeekAheadPopover = (props) => {\n  var _a, _b, _c, _d;\n  const { entityRef, children, delayTime = 500 } = props;\n  const classes = useStyles$d();\n  const apiHolder = useApiHolder();\n  const popupState = usePopupState({\n    variant: \"popover\",\n    popupId: \"entity-peek-ahead\"\n  });\n  const [isHovered, setIsHovered] = useState(false);\n  const debouncedHandleMouseEnter = useMemo(\n    () => debounce(() => setIsHovered(true), delayTime),\n    [delayTime]\n  );\n  const [{ loading, error, value: entity }, load] = useAsyncFn(async () => {\n    const catalogApi = apiHolder.get(catalogApiRef);\n    if (catalogApi) {\n      const retrievedEntity = await catalogApi.getEntityByRef(entityRef);\n      if (!retrievedEntity) {\n        throw new Error(`${entityRef} not found`);\n      }\n      return retrievedEntity;\n    }\n    return void 0;\n  }, [apiHolder, entityRef]);\n  const handleOnMouseLeave = () => {\n    setIsHovered(false);\n    debouncedHandleMouseEnter.cancel();\n  };\n  useEffect(() => {\n    if (popupState.isOpen && !entity && !error && !loading) {\n      load();\n    }\n  }, [popupState.isOpen, load, entity, error, loading]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { component: \"span\", onMouseEnter: debouncedHandleMouseEnter }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      \"data-testid\": \"trigger\",\n      ...bindHover(popupState)\n    },\n    children\n  )), isHovered && /* @__PURE__ */ React.createElement(\n    HoverPopover,\n    {\n      PaperProps: {\n        className: classes.popoverPaper\n      },\n      ...bindPopover(popupState),\n      anchorOrigin: {\n        vertical: \"bottom\",\n        horizontal: \"center\"\n      },\n      transformOrigin: {\n        vertical: \"top\",\n        horizontal: \"center\"\n      },\n      onMouseLeave: handleOnMouseLeave\n    },\n    /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(CardContent, null, error && /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error }), loading && /* @__PURE__ */ React.createElement(Progress, null), entity && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { color: \"textSecondary\" }, entity.metadata.namespace), /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\", component: \"div\" }, entity.metadata.name), /* @__PURE__ */ React.createElement(Typography, { color: \"textSecondary\", gutterBottom: true }, entity.kind), entity.metadata.description && /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        className: classes.descriptionTypography,\n        paragraph: true\n      },\n      entity.metadata.description\n    ), /* @__PURE__ */ React.createElement(Typography, null, (_b = (_a = entity.spec) == null ? void 0 : _a.type) == null ? void 0 : _b.toString()), /* @__PURE__ */ React.createElement(Box, { marginTop: \"0.5em\" }, (entity.metadata.tags || []).slice(0, maxTagChips).map((tag) => {\n      return /* @__PURE__ */ React.createElement(Chip, { key: tag, size: \"small\", label: tag });\n    }), ((_c = entity.metadata.tags) == null ? void 0 : _c.length) && ((_d = entity.metadata.tags) == null ? void 0 : _d.length) > maxTagChips && /* @__PURE__ */ React.createElement(Tooltip, { title: \"Drill into the entity to see all of the tags.\" }, /* @__PURE__ */ React.createElement(Chip, { key: \"other-tags\", size: \"small\", label: \"...\" }))))), !error && entity && /* @__PURE__ */ React.createElement(CardActions, null, /* @__PURE__ */ React.createElement(React.Fragment, null, isUserEntity(entity) && /* @__PURE__ */ React.createElement(UserCardActions, { entity }), isGroupEntity(entity) && /* @__PURE__ */ React.createElement(GroupCardActions, { entity }), /* @__PURE__ */ React.createElement(EntityCardActions, { entity }))))\n  ));\n};\n\nconst useStyles$c = makeStyles(\n  (_theme) => ({\n    searchToolbar: {\n      paddingLeft: 0,\n      paddingRight: 0\n    },\n    input: {}\n  }),\n  {\n    name: \"CatalogReactEntitySearchBar\"\n  }\n);\nconst EntitySearchBar = () => {\n  var _a, _b;\n  const classes = useStyles$c();\n  const { filters, updateFilters } = useEntityList();\n  const [search, setSearch] = useState((_b = (_a = filters.text) == null ? void 0 : _a.value) != null ? _b : \"\");\n  useDebounce(\n    () => {\n      updateFilters({\n        text: search.length ? new EntityTextFilter(search) : void 0\n      });\n    },\n    250,\n    [search, updateFilters]\n  );\n  return /* @__PURE__ */ React.createElement(Toolbar, { className: classes.searchToolbar }, /* @__PURE__ */ React.createElement(FormControl, null, /* @__PURE__ */ React.createElement(\n    Input,\n    {\n      \"aria-label\": \"search\",\n      id: \"input-with-icon-adornment\",\n      className: classes.input,\n      placeholder: \"Search\",\n      autoComplete: \"off\",\n      onChange: (event) => setSearch(event.target.value),\n      value: search,\n      startAdornment: /* @__PURE__ */ React.createElement(InputAdornment, { position: \"start\" }, /* @__PURE__ */ React.createElement(Search, null)),\n      endAdornment: /* @__PURE__ */ React.createElement(InputAdornment, { position: \"end\" }, /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          \"aria-label\": \"clear search\",\n          onClick: () => setSearch(\"\"),\n          edge: \"end\",\n          disabled: search.length === 0\n        },\n        /* @__PURE__ */ React.createElement(Clear, null)\n      ))\n    }\n  )));\n};\n\nconst columnFactories = Object.freeze({\n  createEntityRefColumn(options) {\n    const { defaultKind } = options;\n    function formatContent(entity) {\n      var _a;\n      return ((_a = entity.metadata) == null ? void 0 : _a.title) || humanizeEntityRef(entity, {\n        defaultKind\n      });\n    }\n    return {\n      title: \"Name\",\n      highlight: true,\n      customFilterAndSearch(filter, entity) {\n        return formatContent(entity).includes(filter);\n      },\n      customSort(entity1, entity2) {\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: (entity) => {\n        var _a;\n        return /* @__PURE__ */ React.createElement(\n          EntityRefLink,\n          {\n            entityRef: entity,\n            defaultKind,\n            title: (_a = entity.metadata) == null ? void 0 : _a.title\n          }\n        );\n      }\n    };\n  },\n  createEntityRelationColumn(options) {\n    const { title, relation, defaultKind, filter: entityFilter } = options;\n    function getRelations(entity) {\n      return getEntityRelations(entity, relation, entityFilter);\n    }\n    function formatContent(entity) {\n      return getRelations(entity).map((r) => humanizeEntityRef(r, { defaultKind })).join(\", \");\n    }\n    return {\n      title,\n      customFilterAndSearch(filter, entity) {\n        return formatContent(entity).includes(filter);\n      },\n      customSort(entity1, entity2) {\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: (entity) => {\n        return /* @__PURE__ */ React.createElement(\n          EntityRefLinks,\n          {\n            entityRefs: getRelations(entity),\n            defaultKind\n          }\n        );\n      }\n    };\n  },\n  createOwnerColumn() {\n    return this.createEntityRelationColumn({\n      title: \"Owner\",\n      relation: RELATION_OWNED_BY,\n      defaultKind: \"group\"\n    });\n  },\n  createDomainColumn() {\n    return this.createEntityRelationColumn({\n      title: \"Domain\",\n      relation: RELATION_PART_OF,\n      defaultKind: \"domain\",\n      filter: {\n        kind: \"domain\"\n      }\n    });\n  },\n  createSystemColumn() {\n    return this.createEntityRelationColumn({\n      title: \"System\",\n      relation: RELATION_PART_OF,\n      defaultKind: \"system\",\n      filter: {\n        kind: \"system\"\n      }\n    });\n  },\n  createMetadataDescriptionColumn() {\n    return {\n      title: \"Description\",\n      field: \"metadata.description\",\n      render: (entity) => /* @__PURE__ */ React.createElement(\n        OverflowTooltip,\n        {\n          text: entity.metadata.description,\n          placement: \"bottom-start\",\n          line: 2\n        }\n      )\n    };\n  },\n  createSpecLifecycleColumn() {\n    return {\n      title: \"Lifecycle\",\n      field: \"spec.lifecycle\"\n    };\n  },\n  createSpecTypeColumn() {\n    return {\n      title: \"Type\",\n      field: \"spec.type\"\n    };\n  }\n});\n\nconst systemEntityColumns = [\n  columnFactories.createEntityRefColumn({ defaultKind: \"system\" }),\n  columnFactories.createDomainColumn(),\n  columnFactories.createOwnerColumn(),\n  columnFactories.createMetadataDescriptionColumn()\n];\nconst componentEntityColumns = [\n  columnFactories.createEntityRefColumn({ defaultKind: \"component\" }),\n  columnFactories.createSystemColumn(),\n  columnFactories.createOwnerColumn(),\n  columnFactories.createSpecTypeColumn(),\n  columnFactories.createSpecLifecycleColumn(),\n  columnFactories.createMetadataDescriptionColumn()\n];\n\nconst useStyles$b = makeStyles((theme) => ({\n  empty: {\n    padding: theme.spacing(2),\n    display: \"flex\",\n    justifyContent: \"center\"\n  }\n}));\nconst EntityTable = (props) => {\n  const {\n    entities,\n    title,\n    emptyContent,\n    variant = \"gridItem\",\n    columns,\n    tableOptions = {}\n  } = props;\n  const classes = useStyles$b();\n  const tableStyle = {\n    minWidth: \"0\",\n    width: \"100%\"\n  };\n  if (variant === \"gridItem\") {\n    tableStyle.height = \"calc(100% - 10px)\";\n  }\n  return /* @__PURE__ */ React.createElement(\n    Table,\n    {\n      columns,\n      title,\n      style: tableStyle,\n      emptyContent: emptyContent && /* @__PURE__ */ React.createElement(\"div\", { className: classes.empty }, emptyContent),\n      options: {\n        // TODO: Toolbar padding if off compared to other cards, should be: padding: 16px 24px;\n        search: false,\n        paging: false,\n        actionsColumnIndex: -1,\n        padding: \"dense\",\n        draggable: false,\n        ...tableOptions\n      },\n      data: entities\n    }\n  );\n};\nEntityTable.columns = columnFactories;\nEntityTable.systemEntityColumns = systemEntityColumns;\nEntityTable.componentEntityColumns = componentEntityColumns;\n\nconst useStyles$a = makeStyles(\n  { input: {} },\n  { name: \"CatalogReactEntityTagPicker\" }\n);\nconst EntityTagPicker = (props) => {\n  const classes = useStyles$a();\n  return /* @__PURE__ */ React.createElement(\n    EntityAutocompletePicker,\n    {\n      label: \"Tags\",\n      name: \"tags\",\n      path: \"metadata.tags\",\n      Filter: EntityTagFilter,\n      showCounts: props.showCounts,\n      InputProps: { className: classes.input }\n    }\n  );\n};\n\nconst EntityTypePicker = (props) => {\n  var _a;\n  const { hidden, initialFilter } = props;\n  const alertApi = useApi(alertApiRef);\n  const { error, availableTypes, selectedTypes, setSelectedTypes } = useEntityTypeFilter();\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: `Failed to load entity types`,\n        severity: \"error\"\n      });\n    }\n    if (initialFilter) {\n      setSelectedTypes([initialFilter]);\n    }\n  }, [error, alertApi, initialFilter, setSelectedTypes]);\n  if (availableTypes.length === 0 || error)\n    return null;\n  const items = [\n    { value: \"all\", label: \"all\" },\n    ...availableTypes.map((type) => ({\n      value: type,\n      label: type\n    }))\n  ];\n  return hidden ? null : /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      label: \"Type\",\n      items,\n      selected: (_a = items.length > 1 ? selectedTypes[0] : void 0) != null ? _a : \"all\",\n      onChange: (value) => setSelectedTypes(value === \"all\" ? [] : [String(value)])\n    }\n  ));\n};\n\nconst YellowStar = withStyles$1({\n  root: {\n    color: \"#f3ba37\"\n  }\n})(Star);\nconst FavoriteEntity = (props) => {\n  const { toggleStarredEntity, isStarredEntity } = useStarredEntity(\n    props.entity\n  );\n  return /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      \"aria-label\": \"favorite\",\n      color: \"inherit\",\n      ...props,\n      onClick: () => toggleStarredEntity()\n    },\n    /* @__PURE__ */ React.createElement(\n      Tooltip,\n      {\n        title: isStarredEntity ? \"Remove from favorites\" : \"Add to favorites\"\n      },\n      isStarredEntity ? /* @__PURE__ */ React.createElement(YellowStar, null) : /* @__PURE__ */ React.createElement(StarBorder, null)\n    )\n  );\n};\n\nconst DEFAULT_ICON = SvgIcon;\nfunction getKind(kind, entityRef) {\n  if (kind) {\n    return kind.toLocaleLowerCase(\"en-US\");\n  }\n  if (entityRef) {\n    try {\n      return parseEntityRef(entityRef).kind.toLocaleLowerCase(\"en-US\");\n    } catch {\n      return void 0;\n    }\n  }\n  return void 0;\n}\nfunction useIcon(kind, entityRef) {\n  const app = useApp();\n  const actualKind = getKind(kind, entityRef);\n  if (!actualKind) {\n    return DEFAULT_ICON;\n  }\n  const icon = app.getSystemIcon(`kind:${actualKind}`);\n  return icon || DEFAULT_ICON;\n}\nfunction EntityKindIcon(props) {\n  const { kind, entityRef, ...otherProps } = props;\n  const Icon = useIcon(kind, entityRef);\n  return /* @__PURE__ */ React.createElement(Icon, { ...otherProps });\n}\n\nconst useStyles$9 = makeStyles((theme) => ({\n  node: {\n    fill: theme.palette.grey[300],\n    stroke: theme.palette.grey[300],\n    \"&.primary\": {\n      fill: theme.palette.primary.light,\n      stroke: theme.palette.primary.light\n    },\n    \"&.secondary\": {\n      fill: theme.palette.secondary.light,\n      stroke: theme.palette.secondary.light\n    }\n  },\n  text: {\n    fill: theme.palette.getContrastText(theme.palette.grey[300]),\n    \"&.primary\": {\n      fill: theme.palette.primary.contrastText\n    },\n    \"&.secondary\": {\n      fill: theme.palette.secondary.contrastText\n    },\n    \"&.focused\": {\n      fontWeight: \"bold\"\n    }\n  },\n  clickable: {\n    cursor: \"pointer\"\n  }\n}));\nfunction useAncestry(root) {\n  const catalogClient = useApi(catalogApiRef);\n  const entityRef = stringifyEntityRef(root);\n  const { loading, error, value } = useAsync(async () => {\n    const response = await catalogClient.getEntityAncestors({ entityRef });\n    const nodes = new Array();\n    const edges = new Array();\n    for (const current of response.items) {\n      const currentRef = stringifyEntityRef(current.entity);\n      const isRootNode = currentRef === response.rootEntityRef;\n      nodes.push({ id: currentRef, root: isRootNode, ...current.entity });\n      for (const parentRef of current.parentEntityRefs) {\n        edges.push({ from: currentRef, to: parentRef });\n      }\n    }\n    return { nodes, edges };\n  }, [entityRef]);\n  return {\n    loading,\n    error,\n    nodes: (value == null ? void 0 : value.nodes) || [],\n    edges: (value == null ? void 0 : value.edges) || []\n  };\n}\nfunction CustomNode({ node }) {\n  const classes = useStyles$9();\n  const navigate = useNavigate();\n  const entityRoute = useRouteRef(entityRouteRef);\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n  const app = useApp();\n  const idRef = useRef(null);\n  useLayoutEffect(() => {\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n  const hasKindIcon = app.getSystemIcon(\n    `kind:${node.kind.toLocaleLowerCase(\"en-US\")}`\n  );\n  const padding = 10;\n  const iconSize = height;\n  const paddedIconWidth = hasKindIcon ? iconSize + padding : 0;\n  const paddedWidth = paddedIconWidth + width + padding * 2;\n  const paddedHeight = height + padding * 2;\n  const displayTitle = node.metadata.title || (node.kind && node.metadata.name && node.metadata.namespace ? humanizeEntityRef({\n    kind: node.kind,\n    name: node.metadata.name,\n    namespace: node.metadata.namespace || \"\"\n  }) : node.id);\n  const onClick = () => {\n    navigate(\n      entityRoute({\n        kind: node.kind,\n        namespace: node.metadata.namespace || DEFAULT_NAMESPACE,\n        name: node.metadata.name\n      })\n    );\n  };\n  return /* @__PURE__ */ React.createElement(\"g\", { onClick, className: classes.clickable }, /* @__PURE__ */ React.createElement(\n    \"rect\",\n    {\n      className: classNames(\n        classes.node,\n        node.root ? \"secondary\" : \"primary\"\n      ),\n      width: paddedWidth,\n      height: paddedHeight,\n      rx: 10\n    }\n  ), hasKindIcon && /* @__PURE__ */ React.createElement(\n    EntityKindIcon,\n    {\n      kind: node.kind,\n      y: padding,\n      x: padding,\n      width: iconSize,\n      height: iconSize,\n      className: classNames(\n        classes.text,\n        node.root ? \"secondary\" : \"primary\"\n      )\n    }\n  ), /* @__PURE__ */ React.createElement(\n    \"text\",\n    {\n      ref: idRef,\n      className: classNames(\n        classes.text,\n        node.root ? \"secondary\" : \"primary\"\n      ),\n      y: paddedHeight / 2,\n      x: paddedIconWidth + (width + padding * 2) / 2,\n      textAnchor: \"middle\",\n      alignmentBaseline: \"middle\"\n    },\n    displayTitle\n  ));\n}\nfunction AncestryPage(props) {\n  const { loading, error, nodes, edges } = useAncestry(props.entity);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error });\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, { variant: \"h2\" }, \"Ancestry\"), /* @__PURE__ */ React.createElement(DialogContentText, { gutterBottom: true }, \"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where\", \" \", /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/life-of-an-entity\" }, \"processors emitted\"), \" \", \"child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations.\"), /* @__PURE__ */ React.createElement(Box, { mt: 4 }, /* @__PURE__ */ React.createElement(\n    DependencyGraph,\n    {\n      nodes,\n      edges,\n      renderNode: CustomNode,\n      direction: DependencyGraphTypes.Direction.BOTTOM_TOP,\n      zoom: \"enable-on-click\"\n    }\n  )));\n}\n\nconst useStyles$8 = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  marginTop: {\n    marginTop: theme.spacing(2)\n  },\n  helpIcon: {\n    marginLeft: theme.spacing(1),\n    color: theme.palette.text.disabled\n  },\n  monospace: {\n    fontFamily: \"monospace\"\n  }\n}));\nfunction ListItemText(props) {\n  const classes = useStyles$8();\n  return /* @__PURE__ */ React.createElement(\n    ListItemText$1,\n    {\n      ...props,\n      primaryTypographyProps: { className: classes.monospace },\n      secondaryTypographyProps: { className: classes.monospace }\n    }\n  );\n}\nfunction ListSubheader(props) {\n  const classes = useStyles$8();\n  return /* @__PURE__ */ React.createElement(ListSubheader$1, { className: classes.monospace }, props.children);\n}\nfunction Container(props) {\n  return /* @__PURE__ */ React.createElement(Box, { mt: 2 }, /* @__PURE__ */ React.createElement(Card, { variant: \"outlined\" }, /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\", gutterBottom: true }, props.title, props.helpLink && /* @__PURE__ */ React.createElement(HelpIcon, { to: props.helpLink })), props.children)));\n}\nfunction findLink(value) {\n  if (value.match(/^url:https?:\\/\\//)) {\n    return value.slice(\"url:\".length);\n  }\n  if (value.match(/^https?:\\/\\//)) {\n    return value;\n  }\n  return void 0;\n}\nfunction KeyValueListItem(props) {\n  const [key, value] = props.entry;\n  const link = findLink(value);\n  return /* @__PURE__ */ React.createElement(ListItem, null, props.indent && /* @__PURE__ */ React.createElement(ListItemIcon, null), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: key,\n      secondary: link ? /* @__PURE__ */ React.createElement(Link, { to: link }, value) : value\n    }\n  ));\n}\nfunction HelpIcon(props) {\n  const classes = useStyles$8();\n  return /* @__PURE__ */ React.createElement(Link, { to: props.to, className: classes.helpIcon }, /* @__PURE__ */ React.createElement(HelpOutlineIcon, { fontSize: \"inherit\" }));\n}\n\nconst useStyles$7 = makeStyles({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  }\n});\nfunction useColocated(entity) {\n  var _a, _b;\n  const catalogApi = useApi(catalogApiRef);\n  const currentEntityRef = stringifyEntityRef(entity);\n  const location = (_a = entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_LOCATION];\n  const origin = (_b = entity.metadata.annotations) == null ? void 0 : _b[ANNOTATION_ORIGIN_LOCATION];\n  const { loading, error, value } = useAsync(async () => {\n    if (!location && !origin) {\n      return [];\n    }\n    const response = await catalogApi.getEntities({\n      filter: [\n        ...location ? [{ [`metadata.annotations.${ANNOTATION_LOCATION}`]: location }] : [],\n        ...origin ? [{ [`metadata.annotations.${ANNOTATION_ORIGIN_LOCATION}`]: origin }] : []\n      ]\n    });\n    return response.items;\n  }, [location, origin]);\n  return {\n    loading,\n    error,\n    location,\n    originLocation: origin,\n    colocatedEntities: value == null ? void 0 : value.filter(\n      (colocated) => stringifyEntityRef(colocated) !== currentEntityRef\n    )\n  };\n}\nfunction EntityList(props) {\n  return /* @__PURE__ */ React.createElement(List, { dense: true }, props.header && /* @__PURE__ */ React.createElement(KeyValueListItem, { key: \"header\", entry: props.header }), props.entities.map((entity) => /* @__PURE__ */ React.createElement(ListItem, { key: stringifyEntityRef(entity) }, /* @__PURE__ */ React.createElement(ListItemText, { primary: /* @__PURE__ */ React.createElement(EntityRefLink, { entityRef: entity }) }))));\n}\nfunction Contents$1(props) {\n  const { entity } = props;\n  const { loading, error, location, originLocation, colocatedEntities } = useColocated(entity);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error });\n  }\n  if (!location && !originLocation) {\n    return /* @__PURE__ */ React.createElement(Alert, { severity: \"warning\" }, \"Entity had no location information.\");\n  } else if (!(colocatedEntities == null ? void 0 : colocatedEntities.length)) {\n    return /* @__PURE__ */ React.createElement(Alert, { severity: \"info\" }, \"There were no other entities on this location.\");\n  }\n  if (location === originLocation) {\n    return /* @__PURE__ */ React.createElement(EntityList, { entities: colocatedEntities });\n  }\n  const atLocation = colocatedEntities.filter(\n    (e) => {\n      var _a;\n      return ((_a = e.metadata.annotations) == null ? void 0 : _a[ANNOTATION_LOCATION]) === location;\n    }\n  );\n  const atOrigin = colocatedEntities.filter(\n    (e) => {\n      var _a;\n      return ((_a = e.metadata.annotations) == null ? void 0 : _a[ANNOTATION_ORIGIN_LOCATION]) === originLocation;\n    }\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, atLocation.length > 0 && /* @__PURE__ */ React.createElement(\n    EntityList,\n    {\n      entities: atLocation,\n      header: [\"At the same location\", location]\n    }\n  ), atOrigin.length > 0 && /* @__PURE__ */ React.createElement(\n    EntityList,\n    {\n      entities: atOrigin,\n      header: [\"At the same origin\", originLocation]\n    }\n  ));\n}\nfunction ColocatedPage(props) {\n  const classes = useStyles$7();\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, { variant: \"h2\" }, \"Colocated\"), /* @__PURE__ */ React.createElement(DialogContentText, null, \"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL).\"), /* @__PURE__ */ React.createElement(\"div\", { className: classes.root }, /* @__PURE__ */ React.createElement(Contents$1, { entity: props.entity })));\n}\n\nfunction sortKeys(data) {\n  return Object.fromEntries(\n    [...Object.entries(data)].sort((a, b) => a[0] < b[0] ? -1 : 1)\n  );\n}\n\nfunction JsonPage(props) {\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, { variant: \"h2\" }, \"Entity as JSON\"), /* @__PURE__ */ React.createElement(DialogContentText, null, \"This is the raw entity data as received from the catalog, on JSON form.\"), /* @__PURE__ */ React.createElement(DialogContentText, null, /* @__PURE__ */ React.createElement(\"div\", { style: { fontSize: \"75%\" }, \"data-testid\": \"code-snippet\" }, /* @__PURE__ */ React.createElement(\n    CodeSnippet,\n    {\n      text: JSON.stringify(sortKeys(props.entity), void 0, 2),\n      language: \"json\",\n      showCopyCodeButton: true\n    }\n  ))));\n}\n\nconst useStyles$6 = makeStyles({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  }\n});\nfunction OverviewPage(props) {\n  var _a, _b, _c;\n  const classes = useStyles$6();\n  const {\n    apiVersion,\n    kind,\n    metadata,\n    spec,\n    relations = [],\n    status = {}\n  } = props.entity;\n  const groupedRelations = groupBy(\n    sortBy(relations, (r) => r.targetRef),\n    \"type\"\n  );\n  const entityRef = stringifyEntityRef(props.entity);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, { variant: \"h2\" }, \"Overview\"), /* @__PURE__ */ React.createElement(\"div\", { className: classes.root }, /* @__PURE__ */ React.createElement(Container, { title: \"Identity\" }, /* @__PURE__ */ React.createElement(List, { dense: true }, /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, { primary: \"apiVersion\", secondary: apiVersion })), /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, { primary: \"kind\", secondary: kind })), (spec == null ? void 0 : spec.type) && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: \"spec.type\",\n      secondary: (_a = spec.type) == null ? void 0 : _a.toString()\n    }\n  )), metadata.uid && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, { primary: \"uid\", secondary: metadata.uid }), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(CopyTextButton, { text: metadata.uid }))), metadata.etag && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, { primary: \"etag\", secondary: metadata.etag }), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(CopyTextButton, { text: metadata.etag }))), /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, { primary: \"entityRef\", secondary: entityRef }), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(CopyTextButton, { text: entityRef }))))), /* @__PURE__ */ React.createElement(Container, { title: \"Metadata\" }, !!Object.keys(metadata.annotations || {}).length && /* @__PURE__ */ React.createElement(\n    List,\n    {\n      dense: true,\n      subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, \"Annotations\", /* @__PURE__ */ React.createElement(HelpIcon, { to: \"https://backstage.io/docs/features/software-catalog/well-known-annotations\" }))\n    },\n    Object.entries(metadata.annotations).map((entry) => /* @__PURE__ */ React.createElement(KeyValueListItem, { key: entry[0], indent: true, entry }))\n  ), !!Object.keys(metadata.labels || {}).length && /* @__PURE__ */ React.createElement(List, { dense: true, subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, \"Labels\") }, Object.entries(metadata.labels).map((entry) => /* @__PURE__ */ React.createElement(KeyValueListItem, { key: entry[0], indent: true, entry }))), !!((_b = metadata.tags) == null ? void 0 : _b.length) && /* @__PURE__ */ React.createElement(List, { dense: true, subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, \"Tags\") }, metadata.tags.map((tag, index) => /* @__PURE__ */ React.createElement(ListItem, { key: `${tag}-${index}` }, /* @__PURE__ */ React.createElement(ListItemIcon, null), /* @__PURE__ */ React.createElement(ListItemText, { primary: tag }))))), !!relations.length && /* @__PURE__ */ React.createElement(\n    Container,\n    {\n      title: \"Relations\",\n      helpLink: \"https://backstage.io/docs/features/software-catalog/well-known-relations\"\n    },\n    Object.entries(groupedRelations).map(\n      ([type, groupRelations], index) => /* @__PURE__ */ React.createElement(\"div\", { key: index }, /* @__PURE__ */ React.createElement(List, { dense: true, subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, type) }, groupRelations.map((group) => /* @__PURE__ */ React.createElement(ListItem, { key: group.targetRef }, /* @__PURE__ */ React.createElement(\n        ListItemText,\n        {\n          primary: /* @__PURE__ */ React.createElement(EntityRefLink, { entityRef: group.targetRef })\n        }\n      )))))\n    )\n  ), !!((_c = status.items) == null ? void 0 : _c.length) && /* @__PURE__ */ React.createElement(\n    Container,\n    {\n      title: \"Status\",\n      helpLink: \"https://backstage.io/docs/features/software-catalog/well-known-statuses\"\n    },\n    status.items.map((item, index) => /* @__PURE__ */ React.createElement(\"div\", { key: index }, /* @__PURE__ */ React.createElement(Typography, null, item.level, \": \", item.type), /* @__PURE__ */ React.createElement(Box, { ml: 2 }, item.message)))\n  )));\n}\n\nfunction YamlPage(props) {\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText$1, { variant: \"h2\" }, \"Entity as YAML\"), /* @__PURE__ */ React.createElement(DialogContentText$1, null, \"This is the raw entity data as received from the catalog, on YAML form.\"), /* @__PURE__ */ React.createElement(DialogContentText$1, null, /* @__PURE__ */ React.createElement(\"div\", { style: { fontSize: \"75%\" }, \"data-testid\": \"code-snippet\" }, /* @__PURE__ */ React.createElement(\n    CodeSnippet,\n    {\n      text: YAML.stringify(sortKeys(props.entity)),\n      language: \"yaml\",\n      showCopyCodeButton: true\n    }\n  ))));\n}\n\nconst useStyles$5 = makeStyles((theme) => ({\n  fullHeightDialog: {\n    height: \"calc(100% - 64px)\"\n  },\n  root: {\n    display: \"flex\",\n    flexGrow: 1,\n    width: \"100%\",\n    backgroundColor: theme.palette.background.paper\n  },\n  tabs: {\n    borderRight: `1px solid ${theme.palette.divider}`,\n    flexShrink: 0\n  },\n  tabContents: {\n    flexGrow: 1,\n    overflowX: \"auto\"\n  }\n}));\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n  const classes = useStyles$5();\n  return /* @__PURE__ */ React.createElement(\n    \"div\",\n    {\n      role: \"tabpanel\",\n      hidden: value !== index,\n      id: `vertical-tabpanel-${index}`,\n      \"aria-labelledby\": `vertical-tab-${index}`,\n      className: classes.tabContents,\n      ...other\n    },\n    value === index && /* @__PURE__ */ React.createElement(Box, { pl: 3, pr: 3 }, children)\n  );\n}\nfunction a11yProps(index) {\n  return {\n    id: `vertical-tab-${index}`,\n    \"aria-controls\": `vertical-tabpanel-${index}`\n  };\n}\nfunction InspectEntityDialog(props) {\n  const classes = useStyles$5();\n  const [activeTab, setActiveTab] = React.useState(0);\n  useEffect(() => {\n    setActiveTab(0);\n  }, [props.open]);\n  if (!props.entity) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(\n    Dialog,\n    {\n      fullWidth: true,\n      maxWidth: \"xl\",\n      open: props.open,\n      onClose: props.onClose,\n      \"aria-labelledby\": \"entity-inspector-dialog-title\",\n      PaperProps: { className: classes.fullHeightDialog }\n    },\n    /* @__PURE__ */ React.createElement(DialogTitle, { id: \"entity-inspector-dialog-title\" }, \"Entity Inspector\"),\n    /* @__PURE__ */ React.createElement(DialogContent, { dividers: true }, /* @__PURE__ */ React.createElement(\"div\", { className: classes.root }, /* @__PURE__ */ React.createElement(\n      Tabs,\n      {\n        orientation: \"vertical\",\n        variant: \"scrollable\",\n        value: activeTab,\n        onChange: (_, newValue) => setActiveTab(newValue),\n        \"aria-label\": \"Inspector options\",\n        className: classes.tabs\n      },\n      /* @__PURE__ */ React.createElement(Tab, { label: \"Overview\", ...a11yProps(0) }),\n      /* @__PURE__ */ React.createElement(Tab, { label: \"Ancestry\", ...a11yProps(1) }),\n      /* @__PURE__ */ React.createElement(Tab, { label: \"Colocated\", ...a11yProps(2) }),\n      /* @__PURE__ */ React.createElement(Tab, { label: \"Raw JSON\", ...a11yProps(3) }),\n      /* @__PURE__ */ React.createElement(Tab, { label: \"Raw YAML\", ...a11yProps(4) })\n    ), /* @__PURE__ */ React.createElement(TabPanel, { value: activeTab, index: 0 }, /* @__PURE__ */ React.createElement(OverviewPage, { entity: props.entity })), /* @__PURE__ */ React.createElement(TabPanel, { value: activeTab, index: 1 }, /* @__PURE__ */ React.createElement(AncestryPage, { entity: props.entity })), /* @__PURE__ */ React.createElement(TabPanel, { value: activeTab, index: 2 }, /* @__PURE__ */ React.createElement(ColocatedPage, { entity: props.entity })), /* @__PURE__ */ React.createElement(TabPanel, { value: activeTab, index: 3 }, /* @__PURE__ */ React.createElement(JsonPage, { entity: props.entity })), /* @__PURE__ */ React.createElement(TabPanel, { value: activeTab, index: 4 }, /* @__PURE__ */ React.createElement(YamlPage, { entity: props.entity })))),\n    /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(Button, { onClick: props.onClose, color: \"primary\" }, \"Close\"))\n  );\n}\n\nfunction useUnregisterEntityDialogState(entity) {\n  var _a;\n  const catalogApi = useApi(catalogApiRef);\n  const locationRef = (_a = entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_ORIGIN_LOCATION];\n  const uid = entity.metadata.uid;\n  const isBootstrap = locationRef === \"bootstrap:bootstrap\";\n  const prerequisites = useAsync(async () => {\n    const locationPromise = catalogApi.getLocationByRef(locationRef);\n    let colocatedEntitiesPromise;\n    if (!locationRef) {\n      colocatedEntitiesPromise = Promise.resolve([]);\n    } else {\n      const locationAnnotationFilter = `metadata.annotations.${ANNOTATION_ORIGIN_LOCATION}`;\n      colocatedEntitiesPromise = catalogApi.getEntities({\n        filter: { [locationAnnotationFilter]: locationRef },\n        fields: [\n          \"kind\",\n          \"metadata.uid\",\n          \"metadata.name\",\n          \"metadata.namespace\"\n        ]\n      }).then((response) => response.items);\n    }\n    return Promise.all([locationPromise, colocatedEntitiesPromise]).then(\n      ([location2, colocatedEntities2]) => ({\n        location: location2,\n        colocatedEntities: colocatedEntities2\n      })\n    );\n  }, [catalogApi, entity]);\n  const unregisterLocation = useCallback(\n    async function unregisterLocationFn() {\n      const { location: location2 } = prerequisites.value;\n      await catalogApi.removeLocationById(location2.id);\n    },\n    [catalogApi, prerequisites]\n  );\n  const deleteEntity = useCallback(\n    async function deleteEntityFn() {\n      await catalogApi.removeEntityByUid(uid);\n    },\n    [catalogApi, uid]\n  );\n  if (isBootstrap) {\n    return { type: \"bootstrap\", location: locationRef, deleteEntity };\n  }\n  const { loading, error, value } = prerequisites;\n  if (loading) {\n    return { type: \"loading\" };\n  } else if (error) {\n    return { type: \"error\", error };\n  }\n  const { location, colocatedEntities } = value;\n  if (!location) {\n    return { type: \"only-delete\", deleteEntity };\n  }\n  return {\n    type: \"unregister\",\n    location: locationRef,\n    colocatedEntities: colocatedEntities.map(getCompoundEntityRef),\n    unregisterLocation,\n    deleteEntity\n  };\n}\n\nconst useStyles$4 = makeStyles({\n  advancedButton: {\n    fontSize: \"0.7em\"\n  },\n  dialogActions: {\n    display: \"inline-block\"\n  }\n});\nconst Contents = ({\n  entity,\n  onConfirm,\n  onClose\n}) => {\n  var _a;\n  const alertApi = useApi(alertApiRef);\n  const configApi = useApi(configApiRef);\n  const classes = useStyles$4();\n  const state = useUnregisterEntityDialogState(entity);\n  const [showDelete, setShowDelete] = useState(false);\n  const [busy, setBusy] = useState(false);\n  const appTitle = (_a = configApi.getOptionalString(\"app.title\")) != null ? _a : \"Backstage\";\n  const onUnregister = useCallback(\n    async function onUnregisterFn() {\n      if (\"unregisterLocation\" in state) {\n        setBusy(true);\n        try {\n          await state.unregisterLocation();\n          onConfirm();\n        } catch (err) {\n          assertError(err);\n          alertApi.post({ message: err.message });\n        } finally {\n          setBusy(false);\n        }\n      }\n    },\n    [alertApi, onConfirm, state]\n  );\n  const onDelete = useCallback(\n    async function onDeleteFn() {\n      var _a2;\n      if (\"deleteEntity\" in state) {\n        setBusy(true);\n        try {\n          await state.deleteEntity();\n          const entityName = (_a2 = entity.metadata.title) != null ? _a2 : entity.metadata.name;\n          onConfirm();\n          alertApi.post({\n            message: `Removed entity ${entityName}`,\n            severity: \"success\",\n            display: \"transient\"\n          });\n        } catch (err) {\n          assertError(err);\n          alertApi.post({ message: err.message });\n        } finally {\n          setBusy(false);\n        }\n      }\n    },\n    [alertApi, onConfirm, state, entity]\n  );\n  const DialogActionsPanel = () => /* @__PURE__ */ React.createElement(DialogActions, { className: classes.dialogActions }, /* @__PURE__ */ React.createElement(Button, { onClick: onClose, color: \"primary\" }, \"Cancel\"));\n  if (state.type === \"loading\") {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (state.type === \"error\") {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error: state.error });\n  }\n  if (state.type === \"bootstrap\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Alert$1, { severity: \"info\" }, 'You cannot unregister this entity, since it originates from a protected Backstage configuration (location \"', state.location, '\"). If you believe this is in error, please contact the ', appTitle, \" \", \"integrator.\"), /* @__PURE__ */ React.createElement(Box, { marginTop: 2 }, !showDelete && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"text\",\n        size: \"small\",\n        color: \"primary\",\n        className: classes.advancedButton,\n        onClick: () => setShowDelete(true)\n      },\n      \"Advanced Options\"\n    ), /* @__PURE__ */ React.createElement(DialogActionsPanel, null)), showDelete && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, null, \"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog.\"), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"secondary\",\n        disabled: busy,\n        onClick: onDelete\n      },\n      \"Delete Entity\"\n    ), /* @__PURE__ */ React.createElement(DialogActionsPanel, null))));\n  }\n  if (state.type === \"only-delete\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, null, \"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog.\"), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"secondary\",\n        disabled: busy,\n        onClick: onDelete\n      },\n      \"Delete Entity\"\n    ), /* @__PURE__ */ React.createElement(DialogActionsPanel, null));\n  }\n  if (state.type === \"unregister\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, null, \"This action will unregister the following entities:\"), /* @__PURE__ */ React.createElement(DialogContentText, { component: \"ul\" }, state.colocatedEntities.map((e) => /* @__PURE__ */ React.createElement(\"li\", { key: `${e.kind}:${e.namespace}/${e.name}` }, /* @__PURE__ */ React.createElement(EntityRefLink, { entityRef: e })))), /* @__PURE__ */ React.createElement(DialogContentText, null, \"Located at the following location:\"), /* @__PURE__ */ React.createElement(DialogContentText, { component: \"ul\" }, /* @__PURE__ */ React.createElement(\"li\", null, state.location)), /* @__PURE__ */ React.createElement(DialogContentText, null, \"To undo, just re-register the entity in \", appTitle, \".\"), /* @__PURE__ */ React.createElement(Box, { marginTop: 2 }, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"secondary\",\n        disabled: busy,\n        onClick: onUnregister\n      },\n      \"Unregister Location\"\n    ), !showDelete && /* @__PURE__ */ React.createElement(Box, { component: \"span\", marginLeft: 2 }, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"text\",\n        size: \"small\",\n        color: \"primary\",\n        className: classes.advancedButton,\n        onClick: () => setShowDelete(true)\n      },\n      \"Advanced Options\"\n    ))), showDelete && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { paddingTop: 4, paddingBottom: 4 }, /* @__PURE__ */ React.createElement(Divider, null)), /* @__PURE__ */ React.createElement(DialogContentText, null, \"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog.\"), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"secondary\",\n        disabled: busy,\n        onClick: onDelete\n      },\n      \"Delete Entity\"\n    )));\n  }\n  return /* @__PURE__ */ React.createElement(Alert$1, { severity: \"error\" }, \"Internal error: Unknown state\");\n};\nconst UnregisterEntityDialog = (props) => {\n  const { open, onConfirm, onClose, entity } = props;\n  return /* @__PURE__ */ React.createElement(Dialog, { open, onClose }, /* @__PURE__ */ React.createElement(DialogTitle, { id: \"responsive-dialog-title\" }, \"Are you sure you want to unregister this entity?\"), /* @__PURE__ */ React.createElement(DialogContent, null, /* @__PURE__ */ React.createElement(Contents, { entity, onConfirm, onClose })));\n};\n\nfunction useOwnedEntitiesCount() {\n  const identityApi = useApi(identityApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const { filters } = useEntityList();\n  const { value: ownershipEntityRefs, loading: loadingEntityRefs } = useAsync(\n    async () => (await identityApi.getBackstageIdentity()).ownershipEntityRefs,\n    // load only on mount\n    []\n  );\n  const { user, owners, ...allFilters } = filters;\n  const catalogFilters = reduceCatalogFilters(\n    compact(Object.values(allFilters))\n  );\n  const [{ value: count, loading: loadingEntityOwnership }, fetchEntities] = useAsyncFn(\n    async (req) => {\n      const ownedClaims = getOwnedCountClaims(\n        req.owners,\n        req.ownershipEntityRefs\n      );\n      if (ownedClaims === void 0) {\n        return 0;\n      }\n      const { [\"metadata.name\"]: metadata, ...filter } = req.filter.filter;\n      const { totalItems } = await catalogApi.queryEntities({\n        ...req.filter,\n        filter: {\n          ...filter,\n          \"relations.ownedBy\": ownedClaims\n        },\n        limit: 0\n      });\n      return totalItems;\n    },\n    [],\n    { loading: true }\n  );\n  useDeepCompareEffect(() => {\n    if (Object.keys(catalogFilters.filter).length === 0) {\n      return;\n    }\n    if (ownershipEntityRefs === void 0) {\n      return;\n    }\n    fetchEntities({\n      ownershipEntityRefs,\n      owners,\n      filter: catalogFilters\n    });\n  }, [ownershipEntityRefs, owners, catalogFilters]);\n  const loading = loadingEntityRefs || loadingEntityOwnership;\n  return {\n    count,\n    loading,\n    filter: useMemo(\n      () => EntityUserFilter.owned(ownershipEntityRefs != null ? ownershipEntityRefs : []),\n      [ownershipEntityRefs]\n    ),\n    ownershipEntityRefs\n  };\n}\nfunction getOwnedCountClaims(owners, ownershipEntityRefs) {\n  var _a;\n  if (ownershipEntityRefs === void 0) {\n    return void 0;\n  }\n  const ownersRefs = (_a = owners == null ? void 0 : owners.values) != null ? _a : [];\n  if (ownersRefs.length) {\n    const commonOwnedBy = intersection(ownersRefs, ownershipEntityRefs);\n    if (commonOwnedBy.length === 0) {\n      return void 0;\n    }\n    return commonOwnedBy;\n  }\n  return ownershipEntityRefs;\n}\n\nfunction useAllEntitiesCount() {\n  const catalogApi = useApi(catalogApiRef);\n  const { filters } = useEntityList();\n  const prevRequest = useRef();\n  const request = useMemo(() => {\n    const { user, ...allFilters } = filters;\n    const compacted = compact(Object.values(allFilters));\n    const catalogFilters = reduceCatalogFilters(compacted);\n    const newRequest = {\n      ...catalogFilters,\n      limit: 0\n    };\n    if (Object.keys(catalogFilters.filter).length === 0) {\n      prevRequest.current = void 0;\n      return prevRequest.current;\n    }\n    if (isEqual(newRequest, prevRequest.current)) {\n      return prevRequest.current;\n    }\n    prevRequest.current = newRequest;\n    return newRequest;\n  }, [filters]);\n  const { value: count, loading } = useAsync(async () => {\n    if (request === void 0) {\n      return 0;\n    }\n    const { totalItems } = await catalogApi.queryEntities(request);\n    return totalItems;\n  }, [request]);\n  return { count, loading };\n}\n\nfunction useStarredEntitiesCount() {\n  const catalogApi = useApi(catalogApiRef);\n  const { filters } = useEntityList();\n  const { starredEntities } = useStarredEntities();\n  const prevRequest = useRef();\n  const request = useMemo(() => {\n    const { user, ...allFilters } = filters;\n    const compacted = compact(Object.values(allFilters));\n    const catalogFilters = reduceCatalogFilters(compacted);\n    const facet = \"metadata.name\";\n    const newRequest = {\n      ...catalogFilters,\n      filter: {\n        ...catalogFilters.filter,\n        /**\n         * here we are filtering entities by `name`. Given this filter,\n         * the response might contain more entities than expected, in case multiple entities\n         * of different kind or namespace share the same name. Those extra entities are filtered out\n         * client side by `EntityUserFilter`, so they won't be visible to the user.\n         */\n        [facet]: Array.from(starredEntities).map((e) => parseEntityRef(e).name)\n      },\n      /**\n       * limit is set to a high value as we are not expecting many starred entities\n       */\n      limit: 1e3\n    };\n    if (isEqual(newRequest, prevRequest.current)) {\n      return prevRequest.current;\n    }\n    prevRequest.current = newRequest;\n    return newRequest;\n  }, [filters, starredEntities]);\n  const { value: count, loading } = useAsync(async () => {\n    if (!starredEntities.size) {\n      return 0;\n    }\n    const response = await catalogApi.queryEntities(request);\n    return response.items.map(\n      (e) => stringifyEntityRef({\n        kind: e.kind,\n        namespace: e.metadata.namespace,\n        name: e.metadata.name\n      })\n    ).filter((e) => starredEntities.has(e)).length;\n  }, [request, starredEntities]);\n  const filter = useMemo(\n    () => EntityUserFilter.starred(Array.from(starredEntities)),\n    [starredEntities]\n  );\n  return { count, loading, filter };\n}\n\nconst useStyles$3 = makeStyles(\n  (theme) => ({\n    root: {\n      backgroundColor: \"rgba(0, 0, 0, .11)\",\n      boxShadow: \"none\",\n      margin: theme.spacing(1, 0, 1, 0)\n    },\n    title: {\n      margin: theme.spacing(1, 0, 0, 1),\n      textTransform: \"uppercase\",\n      fontSize: 12,\n      fontWeight: \"bold\"\n    },\n    listIcon: {\n      minWidth: 30,\n      color: theme.palette.text.primary\n    },\n    menuItem: {\n      minHeight: theme.spacing(6)\n    },\n    groupWrapper: {\n      margin: theme.spacing(1, 1, 2, 1)\n    }\n  }),\n  {\n    name: \"CatalogReactUserListPicker\"\n  }\n);\nfunction getFilterGroups(orgName) {\n  return [\n    {\n      name: \"Personal\",\n      items: [\n        {\n          id: \"owned\",\n          label: \"Owned\",\n          icon: SettingsIcon\n        },\n        {\n          id: \"starred\",\n          label: \"Starred\",\n          icon: Star\n        }\n      ]\n    },\n    {\n      name: orgName != null ? orgName : \"Company\",\n      items: [\n        {\n          id: \"all\",\n          label: \"All\"\n        }\n      ]\n    }\n  ];\n}\nconst UserListPicker = (props) => {\n  var _a;\n  const { initialFilter, availableFilters } = props;\n  const classes = useStyles$3();\n  const configApi = useApi(configApiRef);\n  const orgName = (_a = configApi.getOptionalString(\"organization.name\")) != null ? _a : \"Company\";\n  const {\n    filters,\n    updateFilters,\n    queryParameters: { kind: kindParameter, user: userParameter }\n  } = useEntityList();\n  const userAndGroupFilterIds = [\"starred\", \"all\"];\n  const filterGroups = getFilterGroups(orgName).map((filterGroup) => ({\n    ...filterGroup,\n    items: filterGroup.items.filter(\n      ({ id }) => (\n        // TODO: avoid hardcoding kinds here\n        [\"group\", \"user\"].some((kind) => kind === kindParameter) ? userAndGroupFilterIds.includes(id) : !availableFilters || availableFilters.includes(id)\n      )\n    )\n  })).filter(({ items }) => !!items.length);\n  const {\n    count: ownedEntitiesCount,\n    loading: loadingOwnedEntities,\n    filter: ownedEntitiesFilter\n  } = useOwnedEntitiesCount();\n  const { count: allCount } = useAllEntitiesCount();\n  const {\n    count: starredEntitiesCount,\n    filter: starredEntitiesFilter,\n    loading: loadingStarredEntities\n  } = useStarredEntitiesCount();\n  const queryParamUserFilter = useMemo(\n    () => [userParameter].flat()[0],\n    [userParameter]\n  );\n  const [selectedUserFilter, setSelectedUserFilter] = useState(\n    queryParamUserFilter != null ? queryParamUserFilter : initialFilter\n  );\n  const filterCounts = useMemo(() => {\n    return {\n      all: allCount,\n      starred: starredEntitiesCount,\n      owned: ownedEntitiesCount\n    };\n  }, [starredEntitiesCount, ownedEntitiesCount, allCount]);\n  useEffect(() => {\n    if (queryParamUserFilter) {\n      setSelectedUserFilter(queryParamUserFilter);\n    }\n  }, [queryParamUserFilter]);\n  const loading = loadingOwnedEntities || loadingStarredEntities;\n  useEffect(() => {\n    if (!loading && !!selectedUserFilter && selectedUserFilter !== \"all\" && filterCounts[selectedUserFilter] === 0) {\n      setSelectedUserFilter(\"all\");\n    }\n  }, [loading, filterCounts, selectedUserFilter, setSelectedUserFilter]);\n  useEffect(() => {\n    if (!selectedUserFilter) {\n      return;\n    }\n    if (loading) {\n      return;\n    }\n    const getFilter = () => {\n      if (selectedUserFilter === \"owned\") {\n        return ownedEntitiesFilter;\n      }\n      if (selectedUserFilter === \"starred\") {\n        return starredEntitiesFilter;\n      }\n      return EntityUserFilter.all();\n    };\n    updateFilters({ user: getFilter() });\n  }, [\n    selectedUserFilter,\n    starredEntitiesFilter,\n    ownedEntitiesFilter,\n    updateFilters,\n    loading\n  ]);\n  return /* @__PURE__ */ React.createElement(Card, { className: classes.root }, filterGroups.map((group) => /* @__PURE__ */ React.createElement(Fragment, { key: group.name }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      variant: \"subtitle2\",\n      component: \"span\",\n      className: classes.title\n    },\n    group.name\n  ), /* @__PURE__ */ React.createElement(Card, { className: classes.groupWrapper }, /* @__PURE__ */ React.createElement(List, { disablePadding: true, dense: true, role: \"menu\", \"aria-label\": group.name }, group.items.map((item) => {\n    var _a2, _b;\n    return /* @__PURE__ */ React.createElement(\n      MenuItem,\n      {\n        role: \"none presentation\",\n        key: item.id,\n        divider: true,\n        onClick: () => setSelectedUserFilter(item.id),\n        selected: item.id === ((_a2 = filters.user) == null ? void 0 : _a2.value),\n        className: classes.menuItem,\n        disabled: filterCounts[item.id] === 0,\n        \"data-testid\": `user-picker-${item.id}`,\n        tabIndex: 0,\n        ContainerProps: { role: \"menuitem\" }\n      },\n      item.icon && /* @__PURE__ */ React.createElement(ListItemIcon, { className: classes.listIcon }, /* @__PURE__ */ React.createElement(item.icon, { fontSize: \"small\" })),\n      /* @__PURE__ */ React.createElement(ListItemText$1, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, item.label, \" \")),\n      /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, (_b = filterCounts[item.id]) != null ? _b : \"-\")\n    );\n  }))))));\n};\n\nconst useStyles$2 = makeStyles(\n  {\n    input: {}\n  },\n  {\n    name: \"CatalogReactEntityProcessingStatusPickerPicker\"\n  }\n);\nconst icon = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\" });\nconst checkedIcon = /* @__PURE__ */ React.createElement(CheckBoxIcon, { fontSize: \"small\" });\nconst EntityProcessingStatusPicker = () => {\n  const classes = useStyles$2();\n  const { updateFilters } = useEntityList();\n  const [selectedAdvancedItems, setSelectedAdvancedItems] = useState(\n    []\n  );\n  function orphanChange(value) {\n    updateFilters({\n      orphan: value ? new EntityOrphanFilter(value) : void 0\n    });\n  }\n  function errorChange(value) {\n    updateFilters({\n      error: value ? new EntityErrorFilter(value) : void 0\n    });\n  }\n  const availableAdvancedItems = [\"Is Orphan\", \"Has Error\"];\n  return /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"button\", component: \"label\" }, \"Processing Status\", /* @__PURE__ */ React.createElement(\n    Autocomplete,\n    {\n      multiple: true,\n      disableCloseOnSelect: true,\n      options: availableAdvancedItems,\n      value: selectedAdvancedItems,\n      onChange: (_, value) => {\n        setSelectedAdvancedItems(value);\n        orphanChange(value.includes(\"Is Orphan\"));\n        errorChange(value.includes(\"Has Error\"));\n      },\n      renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(\n        FormControlLabel,\n        {\n          control: /* @__PURE__ */ React.createElement(\n            Checkbox,\n            {\n              icon,\n              checkedIcon,\n              checked: selected\n            }\n          ),\n          onClick: (event) => event.preventDefault(),\n          label: option\n        }\n      ),\n      size: \"small\",\n      popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, { \"data-testid\": \"processing-status-picker-expand\" }),\n      renderInput: (params) => /* @__PURE__ */ React.createElement(\n        TextField,\n        {\n          ...params,\n          className: classes.input,\n          variant: \"outlined\"\n        }\n      )\n    }\n  )));\n};\n\nconst useStyles$1 = makeStyles(\n  {\n    input: {}\n  },\n  {\n    name: \"CatalogReactEntityNamespacePicker\"\n  }\n);\nconst EntityNamespacePicker = () => {\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(\n    EntityAutocompletePicker,\n    {\n      label: \"Namespace\",\n      name: \"namespace\",\n      path: \"metadata.namespace\",\n      Filter: EntityNamespaceFilter,\n      InputProps: { className: classes.input }\n    }\n  );\n};\n\nconst useStyles = makeStyles$1(\n  (theme) => ({\n    code: {\n      borderRadius: 6,\n      margin: theme.spacing(2, 0),\n      background: theme.palette.type === \"dark\" ? \"#444\" : theme.palette.common.white\n    }\n  }),\n  { name: \"BackstageMissingAnnotationEmptyState\" }\n);\nfunction generateYamlExample(annotations, entity) {\n  var _a, _b;\n  const kind = (entity == null ? void 0 : entity.kind) || \"Component\";\n  const name = (entity == null ? void 0 : entity.metadata.name) || \"example\";\n  const type = ((_a = entity == null ? void 0 : entity.spec) == null ? void 0 : _a.type) || \"website\";\n  const owner = ((_b = entity == null ? void 0 : entity.spec) == null ? void 0 : _b.owner) || \"user:default/guest\";\n  const yamlText = `apiVersion: backstage.io/v1alpha1\nkind: ${kind}\nmetadata:\n  name: ${name}\n  annotations:${annotations.map((ann) => `\n    ${ann}: value`).join(\"\")}\nspec:\n  type: ${type}\n  owner: ${owner}`;\n  let line = 6;\n  const lineNumbers = [];\n  annotations.forEach(() => {\n    lineNumbers.push(line);\n    line++;\n  });\n  return {\n    yamlText,\n    lineNumbers\n  };\n}\nfunction generateDescription(annotations, entityKind = \"Component\") {\n  const isSingular = annotations.length <= 1;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, \"The \", isSingular ? \"annotation\" : \"annotations\", \" \", annotations.map((ann) => /* @__PURE__ */ React.createElement(\"code\", null, ann)).reduce((prev, curr) => /* @__PURE__ */ React.createElement(React.Fragment, null, prev, \", \", curr)), \" \", isSingular ? \"is\" : \"are\", \" missing. You need to add the\", \" \", isSingular ? \"annotation\" : \"annotations\", \" to your \", entityKind, \" if you want to enable this tool.\");\n}\nfunction MissingAnnotationEmptyState(props) {\n  let entity;\n  try {\n    const entityContext = useEntity();\n    entity = entityContext.entity;\n  } catch (err) {\n  }\n  const { annotation, readMoreUrl } = props;\n  const annotations = Array.isArray(annotation) ? annotation : [annotation];\n  const url = readMoreUrl || \"https://backstage.io/docs/features/software-catalog/well-known-annotations\";\n  const classes = useStyles();\n  const entityKind = (entity == null ? void 0 : entity.kind) || \"Component\";\n  const { yamlText, lineNumbers } = generateYamlExample(annotations, entity);\n  return /* @__PURE__ */ React.createElement(\n    EmptyState,\n    {\n      missing: \"field\",\n      title: \"Missing Annotation\",\n      description: generateDescription(annotations, entityKind),\n      action: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body1\" }, \"Add the annotation to your \", entityKind, \" YAML as shown in the highlighted example below:\"), /* @__PURE__ */ React.createElement(Box$1, { className: classes.code }, /* @__PURE__ */ React.createElement(\n        CodeSnippet,\n        {\n          text: yamlText,\n          language: \"yaml\",\n          showLineNumbers: true,\n          highlightedNumbers: lineNumbers,\n          customStyle: { background: \"inherit\", fontSize: \"115%\" }\n        }\n      )), /* @__PURE__ */ React.createElement(Button$1, { color: \"primary\", component: Link, to: url }, \"Read more\"))\n    }\n  );\n}\n\nfunction MockEntityListContextProvider(props) {\n  var _a;\n  const { children, value } = props;\n  const [filters, setFilters] = useState((_a = value == null ? void 0 : value.filters) != null ? _a : {});\n  const updateFilters = useCallback(\n    (update) => {\n      setFilters((prevFilters) => {\n        const newFilters = typeof update === \"function\" ? update(prevFilters) : update;\n        return { ...prevFilters, ...newFilters };\n      });\n    },\n    []\n  );\n  const defaultValues = useMemo(\n    () => ({\n      entities: [],\n      backendEntities: [],\n      queryParameters: {}\n    }),\n    []\n  );\n  const resolvedValue = useMemo(\n    () => {\n      var _a2, _b, _c, _d, _e;\n      return {\n        entities: (_a2 = value == null ? void 0 : value.entities) != null ? _a2 : defaultValues.entities,\n        backendEntities: (_b = value == null ? void 0 : value.backendEntities) != null ? _b : defaultValues.backendEntities,\n        updateFilters: (_c = value == null ? void 0 : value.updateFilters) != null ? _c : updateFilters,\n        filters,\n        loading: (_d = value == null ? void 0 : value.loading) != null ? _d : false,\n        queryParameters: (_e = value == null ? void 0 : value.queryParameters) != null ? _e : defaultValues.queryParameters,\n        error: value == null ? void 0 : value.error\n      };\n    },\n    [value, defaultValues, filters, updateFilters]\n  );\n  return /* @__PURE__ */ React.createElement(EntityListContext.Provider, { value: resolvedValue }, children);\n}\n\nexport { CatalogFilterLayout, EntityAutocompletePicker, EntityDisplayName, EntityErrorFilter, EntityKindFilter, EntityKindPicker, EntityLifecycleFilter, EntityLifecyclePicker, EntityListContext, EntityListProvider, EntityNamespaceFilter, EntityNamespacePicker, EntityOrphanFilter, EntityOwnerFilter, EntityOwnerPicker, EntityPeekAheadPopover, EntityProcessingStatusPicker, EntityRefLink, EntityRefLinks, EntitySearchBar, EntityTable, EntityTagFilter, EntityTagPicker, EntityTextFilter, EntityTypeFilter, EntityTypePicker, EntityUserFilter, FavoriteEntity, InspectEntityDialog, MissingAnnotationEmptyState, MockEntityListContextProvider, MockStarredEntitiesApi, UnregisterEntityDialog, UserListFilter, UserListPicker, catalogApiRef, columnFactories, defaultEntityPresentation, entityPresentationApiRef, entityRouteParams, entityRouteRef, getEntitySourceLocation, humanizeEntityRef, starredEntitiesApiRef, useEntityList, useEntityOwnership, useEntityPresentation, useEntityTypeFilter, useRelatedEntities, useStarredEntities, useStarredEntity };\n//# sourceMappingURL=index.esm.js.map\n","import { DEFAULT_NAMESPACE, RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport { Page, Header, Progress, RoutedTabs, Content, WarningPanel, Link, HeaderLabel } from '@backstage/core-components';\nimport { useApi, alertApiRef, attachComponentData, useRouteRefParams, useElementFilter, useRouteRef } from '@backstage/core-plugin-api';\nimport { entityRouteRef, useAsyncEntity, UnregisterEntityDialog, InspectEntityDialog, EntityDisplayName, FavoriteEntity, getEntityRelations, EntityRefLinks } from '@backstage/plugin-catalog-react';\nimport { MenuItem, ListItemIcon, ListItemText, Divider, Tooltip, IconButton, Popover, MenuList, Box } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport React, { useState, useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport FileCopyTwoToneIcon from '@material-ui/icons/FileCopyTwoTone';\nimport { useEntityPermission } from '@backstage/plugin-catalog-react/alpha';\nimport { catalogEntityDeletePermission } from '@backstage/plugin-catalog-common/alpha';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\nimport { r as rootRouteRef, u as unregisterRedirectRouteRef } from './routes-6e97578f.esm.js';\n\nfunction UnregisterEntity(props) {\n  var _a;\n  const {\n    unregisterEntityOptions,\n    isUnregisterAllowed,\n    onUnregisterEntity,\n    onClose\n  } = props;\n  const isBoolean = typeof (unregisterEntityOptions == null ? void 0 : unregisterEntityOptions.disableUnregister) === \"boolean\";\n  const isDisabled = (_a = !isUnregisterAllowed || (isBoolean ? !!(unregisterEntityOptions == null ? void 0 : unregisterEntityOptions.disableUnregister) : (unregisterEntityOptions == null ? void 0 : unregisterEntityOptions.disableUnregister) === \"disable\")) != null ? _a : false;\n  let unregisterButton = /* @__PURE__ */ React.createElement(React.Fragment, null);\n  if ((unregisterEntityOptions == null ? void 0 : unregisterEntityOptions.disableUnregister) !== \"hidden\") {\n    unregisterButton = /* @__PURE__ */ React.createElement(\n      MenuItem,\n      {\n        onClick: () => {\n          onClose();\n          onUnregisterEntity();\n        },\n        disabled: isDisabled\n      },\n      /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(CancelIcon, { fontSize: \"small\" })),\n      /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Unregister entity\" })\n    );\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, unregisterButton);\n}\n\nconst useStyles = makeStyles(\n  (theme) => {\n    return {\n      button: {\n        color: theme.page.fontColor\n      }\n    };\n  },\n  { name: \"PluginCatalogEntityContextMenu\" }\n);\nfunction EntityContextMenu(props) {\n  const {\n    UNSTABLE_extraContextMenuItems,\n    UNSTABLE_contextMenuOptions,\n    onUnregisterEntity,\n    onInspectEntity\n  } = props;\n  const [anchorEl, setAnchorEl] = useState();\n  const classes = useStyles();\n  const unregisterPermission = useEntityPermission(\n    catalogEntityDeletePermission\n  );\n  const isAllowed = unregisterPermission.allowed;\n  const onOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const onClose = () => {\n    setAnchorEl(void 0);\n  };\n  const alertApi = useApi(alertApiRef);\n  const [copyState, copyToClipboard] = useCopyToClipboard();\n  useEffect(() => {\n    if (!copyState.error && copyState.value) {\n      alertApi.post({\n        message: \"Copied!\",\n        severity: \"info\",\n        display: \"transient\"\n      });\n    }\n  }, [copyState, alertApi]);\n  const extraItems = UNSTABLE_extraContextMenuItems && [\n    ...UNSTABLE_extraContextMenuItems.map((item) => /* @__PURE__ */ React.createElement(\n      MenuItem,\n      {\n        key: item.title,\n        onClick: () => {\n          onClose();\n          item.onClick();\n        }\n      },\n      /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(item.Icon, { fontSize: \"small\" })),\n      /* @__PURE__ */ React.createElement(ListItemText, { primary: item.title })\n    )),\n    /* @__PURE__ */ React.createElement(Divider, { key: \"the divider is here!\" })\n  ];\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Tooltip, { title: \"More\", arrow: true }, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      \"aria-label\": \"more\",\n      \"aria-controls\": \"long-menu\",\n      \"aria-haspopup\": \"true\",\n      \"aria-expanded\": !!anchorEl,\n      role: \"button\",\n      onClick: onOpen,\n      \"data-testid\": \"menu-button\",\n      className: classes.button,\n      id: \"long-menu\"\n    },\n    /* @__PURE__ */ React.createElement(MoreVert, null)\n  )), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      open: Boolean(anchorEl),\n      onClose,\n      anchorEl,\n      anchorOrigin: { vertical: \"bottom\", horizontal: \"right\" },\n      transformOrigin: { vertical: \"top\", horizontal: \"right\" },\n      \"aria-labelledby\": \"long-menu\"\n    },\n    /* @__PURE__ */ React.createElement(MenuList, { autoFocusItem: Boolean(anchorEl) }, extraItems, /* @__PURE__ */ React.createElement(\n      UnregisterEntity,\n      {\n        unregisterEntityOptions: UNSTABLE_contextMenuOptions,\n        isUnregisterAllowed: isAllowed,\n        onUnregisterEntity,\n        onClose\n      }\n    ), /* @__PURE__ */ React.createElement(\n      MenuItem,\n      {\n        onClick: () => {\n          onClose();\n          onInspectEntity();\n        }\n      },\n      /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(BugReportIcon, { fontSize: \"small\" })),\n      /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Inspect entity\" })\n    ), /* @__PURE__ */ React.createElement(\n      MenuItem,\n      {\n        onClick: () => {\n          onClose();\n          copyToClipboard(window.location.toString());\n        }\n      },\n      /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(FileCopyTwoToneIcon, { fontSize: \"small\" })),\n      /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Copy entity URL\" })\n    ))\n  ));\n}\n\nconst dataKey = \"plugin.catalog.entityLayoutRoute\";\nconst Route = () => null;\nattachComponentData(Route, dataKey, true);\nattachComponentData(Route, \"core.gatherMountPoints\", true);\nfunction EntityLayoutTitle(props) {\n  const { entity, title } = props;\n  return /* @__PURE__ */ React.createElement(Box, { display: \"inline-flex\", alignItems: \"center\", height: \"1em\", maxWidth: \"100%\" }, /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      component: \"span\",\n      textOverflow: \"ellipsis\",\n      whiteSpace: \"nowrap\",\n      overflow: \"hidden\"\n    },\n    entity ? /* @__PURE__ */ React.createElement(EntityDisplayName, { entityRef: entity, hideIcon: true }) : title\n  ), entity && /* @__PURE__ */ React.createElement(FavoriteEntity, { entity }));\n}\nfunction headerProps(paramKind, paramNamespace, paramName, entity) {\n  var _a, _b, _c, _d, _e;\n  const kind = (_a = paramKind != null ? paramKind : entity == null ? void 0 : entity.kind) != null ? _a : \"\";\n  const namespace = (_b = paramNamespace != null ? paramNamespace : entity == null ? void 0 : entity.metadata.namespace) != null ? _b : \"\";\n  const name = (_e = (_d = (_c = entity == null ? void 0 : entity.metadata.title) != null ? _c : paramName) != null ? _d : entity == null ? void 0 : entity.metadata.name) != null ? _e : \"\";\n  return {\n    headerTitle: `${name}${namespace && namespace !== DEFAULT_NAMESPACE ? ` in ${namespace}` : \"\"}`,\n    headerType: (() => {\n      let t = kind.toLocaleLowerCase(\"en-US\");\n      if (entity && entity.spec && \"type\" in entity.spec) {\n        t += \" \\u2014 \";\n        t += entity.spec.type.toLocaleLowerCase(\"en-US\");\n      }\n      return t;\n    })()\n  };\n}\nfunction EntityLabels(props) {\n  var _a, _b;\n  const { entity } = props;\n  const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, ownedByRelations.length > 0 && /* @__PURE__ */ React.createElement(\n    HeaderLabel,\n    {\n      label: \"Owner\",\n      contentTypograpyRootComponent: \"p\",\n      value: /* @__PURE__ */ React.createElement(\n        EntityRefLinks,\n        {\n          entityRefs: ownedByRelations,\n          defaultKind: \"Group\",\n          color: \"inherit\"\n        }\n      )\n    }\n  ), ((_a = entity.spec) == null ? void 0 : _a.lifecycle) && /* @__PURE__ */ React.createElement(\n    HeaderLabel,\n    {\n      label: \"Lifecycle\",\n      value: (_b = entity.spec.lifecycle) == null ? void 0 : _b.toString()\n    }\n  ));\n}\nconst EntityLayout = (props) => {\n  var _a, _b, _c;\n  const {\n    UNSTABLE_extraContextMenuItems,\n    UNSTABLE_contextMenuOptions,\n    children,\n    NotFoundComponent\n  } = props;\n  const { kind, namespace, name } = useRouteRefParams(entityRouteRef);\n  const { entity, loading, error } = useAsyncEntity();\n  const location = useLocation();\n  const routes = useElementFilter(\n    children,\n    (elements) => elements.selectByComponentData({\n      key: dataKey,\n      withStrictError: \"Child of EntityLayout must be an EntityLayout.Route\"\n    }).getElements().flatMap(({ props: elementProps }) => {\n      if (!entity) {\n        return [];\n      } else if (elementProps.if && !elementProps.if(entity)) {\n        return [];\n      }\n      return [\n        {\n          path: elementProps.path,\n          title: elementProps.title,\n          children: elementProps.children,\n          tabProps: elementProps.tabProps\n        }\n      ];\n    }),\n    [entity]\n  );\n  const { headerTitle, headerType } = headerProps(\n    kind,\n    namespace,\n    name,\n    entity\n  );\n  const [confirmationDialogOpen, setConfirmationDialogOpen] = useState(false);\n  const [inspectionDialogOpen, setInspectionDialogOpen] = useState(false);\n  const navigate = useNavigate();\n  const catalogRoute = useRouteRef(rootRouteRef);\n  const unregisterRedirectRoute = useRouteRef(unregisterRedirectRouteRef);\n  const cleanUpAfterRemoval = async () => {\n    setConfirmationDialogOpen(false);\n    setInspectionDialogOpen(false);\n    navigate(\n      unregisterRedirectRoute ? unregisterRedirectRoute() : catalogRoute()\n    );\n  };\n  useEffect(() => {\n    setConfirmationDialogOpen(false);\n    setInspectionDialogOpen(false);\n  }, [location.pathname]);\n  return /* @__PURE__ */ React.createElement(Page, { themeId: (_c = (_b = (_a = entity == null ? void 0 : entity.spec) == null ? void 0 : _a.type) == null ? void 0 : _b.toString()) != null ? _c : \"home\" }, /* @__PURE__ */ React.createElement(\n    Header,\n    {\n      title: /* @__PURE__ */ React.createElement(EntityLayoutTitle, { title: headerTitle, entity }),\n      pageTitleOverride: headerTitle,\n      type: headerType\n    },\n    entity && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(EntityLabels, { entity }), /* @__PURE__ */ React.createElement(\n      EntityContextMenu,\n      {\n        UNSTABLE_extraContextMenuItems,\n        UNSTABLE_contextMenuOptions,\n        onUnregisterEntity: () => setConfirmationDialogOpen(true),\n        onInspectEntity: () => setInspectionDialogOpen(true)\n      }\n    ))\n  ), loading && /* @__PURE__ */ React.createElement(Progress, null), entity && /* @__PURE__ */ React.createElement(RoutedTabs, { routes }), error && /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Alert, { severity: \"error\" }, error.toString())), !loading && !error && !entity && /* @__PURE__ */ React.createElement(Content, null, NotFoundComponent ? NotFoundComponent : /* @__PURE__ */ React.createElement(WarningPanel, { title: \"Entity not found\" }, \"There is no \", kind, \" with the requested\", \" \", /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/references\" }, \"kind, namespace, and name\"), \".\")), /* @__PURE__ */ React.createElement(\n    UnregisterEntityDialog,\n    {\n      open: confirmationDialogOpen,\n      entity,\n      onConfirm: cleanUpAfterRemoval,\n      onClose: () => setConfirmationDialogOpen(false)\n    }\n  ), /* @__PURE__ */ React.createElement(\n    InspectEntityDialog,\n    {\n      open: inspectionDialogOpen,\n      entity,\n      onClose: () => setInspectionDialogOpen(false)\n    }\n  ));\n};\nEntityLayout.Route = Route;\n\nexport { EntityLayout as E };\n//# sourceMappingURL=EntityLayout-51caff9c.esm.js.map\n","import { catalogApiRef, useEntity, EntityRefLink, useAsyncEntity } from '@backstage/plugin-catalog-react';\nimport { Alert } from '@material-ui/lab';\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Dialog, DialogTitle, DialogActions, Button, Box } from '@material-ui/core';\nimport { useApi, alertApiRef, useRouteRef, attachComponentData, useApiHolder, useElementFilter } from '@backstage/core-plugin-api';\nimport { assertError } from '@backstage/errors';\nimport { r as rootRouteRef } from './routes-6e97578f.esm.js';\nimport useAsync from 'react-use/lib/useAsync';\nimport { ResponseErrorPanel } from '@backstage/core-components';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\nimport { ENTITY_STATUS_CATALOG_PROCESSING_TYPE } from '@backstage/catalog-client';\n\nfunction DeleteEntityDialog(props) {\n  const { open, onClose, onConfirm, entity } = props;\n  const [busy, setBusy] = useState(false);\n  const catalogApi = useApi(catalogApiRef);\n  const alertApi = useApi(alertApiRef);\n  const onDelete = async () => {\n    setBusy(true);\n    try {\n      const uid = entity.metadata.uid;\n      await catalogApi.removeEntityByUid(uid);\n      onConfirm();\n    } catch (err) {\n      assertError(err);\n      alertApi.post({ message: err.message });\n    } finally {\n      setBusy(false);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(Dialog, { open, onClose }, /* @__PURE__ */ React.createElement(DialogTitle, { id: \"responsive-dialog-title\" }, \"Are you sure you want to delete this entity?\"), /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      variant: \"contained\",\n      color: \"secondary\",\n      disabled: busy,\n      onClick: onDelete\n    },\n    \"Delete\"\n  ), /* @__PURE__ */ React.createElement(Button, { onClick: onClose, color: \"primary\" }, \"Cancel\")));\n}\n\nfunction isOrphan(entity) {\n  var _a, _b;\n  return ((_b = (_a = entity == null ? void 0 : entity.metadata) == null ? void 0 : _a.annotations) == null ? void 0 : _b[\"backstage.io/orphan\"]) === \"true\";\n}\nfunction EntityOrphanWarning() {\n  const navigate = useNavigate();\n  const catalogLink = useRouteRef(rootRouteRef);\n  const [confirmationDialogOpen, setConfirmationDialogOpen] = useState(false);\n  const { entity } = useEntity();\n  const cleanUpAfterRemoval = async () => {\n    setConfirmationDialogOpen(false);\n    navigate(catalogLink());\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Alert, { severity: \"warning\", onClick: () => setConfirmationDialogOpen(true) }, \"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete.\"), /* @__PURE__ */ React.createElement(\n    DeleteEntityDialog,\n    {\n      open: confirmationDialogOpen,\n      entity,\n      onConfirm: cleanUpAfterRemoval,\n      onClose: () => setConfirmationDialogOpen(false)\n    }\n  ));\n}\n\nasync function getRelationWarnings(entity, catalogApi) {\n  var _a;\n  const entityRefRelations = (_a = entity.relations) == null ? void 0 : _a.map(\n    (relation) => relation.targetRef\n  );\n  if (!entityRefRelations || (entityRefRelations == null ? void 0 : entityRefRelations.length) < 1 || entityRefRelations.length > 1e3) {\n    return [];\n  }\n  const relatedEntities = await catalogApi.getEntitiesByRefs({\n    entityRefs: entityRefRelations,\n    fields: [\"kind\", \"metadata.name\", \"metadata.namespace\"]\n  });\n  return entityRefRelations.filter(\n    (_, index) => relatedEntities.items[index] === void 0\n  );\n}\nasync function hasRelationWarnings(entity, context) {\n  const catalogApi = context.apis.get(catalogApiRef);\n  if (!catalogApi) {\n    throw new Error(`No implementation available for ${catalogApiRef}`);\n  }\n  const relatedEntitiesMissing = await getRelationWarnings(entity, catalogApi);\n  return relatedEntitiesMissing.length > 0;\n}\nfunction EntityRelationWarning() {\n  const { entity } = useEntity();\n  const catalogApi = useApi(catalogApiRef);\n  const { loading, error, value } = useAsync(async () => {\n    return getRelationWarnings(entity, catalogApi);\n  }, [entity, catalogApi]);\n  if (error) {\n    return /* @__PURE__ */ React.createElement(Box, { mb: 1 }, /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error }));\n  }\n  if (loading || !value || value.length === 0) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Alert, { severity: \"warning\" }, \"This entity has relations to other entities, which can't be found in the catalog. \", /* @__PURE__ */ React.createElement(\"br\", null), \"Entities not found are: \", value.join(\", \")));\n}\n\nconst errorFilter = (i) => i.error && i.level === \"error\" && i.type === ENTITY_STATUS_CATALOG_PROCESSING_TYPE;\nasync function getOwnAndAncestorsErrors(entityRef, catalogApi) {\n  const ancestors = await catalogApi.getEntityAncestors({ entityRef });\n  const items = ancestors.items.map((item) => {\n    var _a, _b;\n    const statuses = (_b = (_a = item.entity.status) == null ? void 0 : _a.items) != null ? _b : [];\n    const errors = statuses.filter(errorFilter).map((e) => e.error).filter((e) => Boolean(e));\n    return { errors, entity: item.entity };\n  }).filter((item) => item.errors.length > 0);\n  return { items };\n}\nasync function hasCatalogProcessingErrors(entity, context) {\n  const catalogApi = context.apis.get(catalogApiRef);\n  if (!catalogApi) {\n    throw new Error(`No implementation available for ${catalogApiRef}`);\n  }\n  const errors = await getOwnAndAncestorsErrors(\n    stringifyEntityRef(entity),\n    catalogApi\n  );\n  return errors.items.length > 0;\n}\nfunction EntityProcessingErrorsPanel() {\n  const { entity } = useEntity();\n  const entityRef = stringifyEntityRef(entity);\n  const catalogApi = useApi(catalogApiRef);\n  const { loading, error, value } = useAsync(async () => {\n    return getOwnAndAncestorsErrors(entityRef, catalogApi);\n  }, [entityRef, catalogApi]);\n  if (error) {\n    return /* @__PURE__ */ React.createElement(Box, { mb: 1 }, /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error }));\n  }\n  if (loading || !value) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, value.items.map((ancestorError, index) => /* @__PURE__ */ React.createElement(Box, { key: index, mb: 1 }, stringifyEntityRef(entity) !== stringifyEntityRef(ancestorError.entity) && /* @__PURE__ */ React.createElement(Box, { p: 1 }, \"The error below originates from\", \" \", /* @__PURE__ */ React.createElement(EntityRefLink, { entityRef: ancestorError.entity })), ancestorError.errors.map((e, i) => /* @__PURE__ */ React.createElement(ResponseErrorPanel, { key: i, error: e })))));\n}\n\nconst ENTITY_SWITCH_KEY = \"core.backstage.entitySwitch\";\nconst EntitySwitchCaseComponent = (_props) => null;\nattachComponentData(EntitySwitchCaseComponent, ENTITY_SWITCH_KEY, true);\nconst EntitySwitch = (props) => {\n  var _a, _b;\n  const { entity, loading } = useAsyncEntity();\n  const apis = useApiHolder();\n  const results = useElementFilter(\n    props.children,\n    (collection) => collection.selectByComponentData({\n      key: ENTITY_SWITCH_KEY,\n      withStrictError: \"Child of EntitySwitch is not an EntitySwitch.Case\"\n    }).getElements().flatMap((element) => {\n      if (loading && !entity) {\n        return [];\n      }\n      const { if: condition, children: elementsChildren } = element.props;\n      if (!entity) {\n        return [\n          {\n            if: condition === void 0,\n            children: elementsChildren\n          }\n        ];\n      }\n      return [\n        {\n          if: condition == null ? void 0 : condition(entity, { apis }),\n          children: elementsChildren\n        }\n      ];\n    }),\n    [apis, entity, loading]\n  );\n  const hasAsyncCases = results.some(\n    (r) => typeof r.if === \"object\" && \"then\" in r.if\n  );\n  if (hasAsyncCases) {\n    return /* @__PURE__ */ React.createElement(\n      AsyncEntitySwitch,\n      {\n        results,\n        renderMultipleMatches: props.renderMultipleMatches\n      }\n    );\n  }\n  if (props.renderMultipleMatches === \"all\") {\n    const children = results.filter((r) => r.if).map((r) => r.children);\n    if (children.length === 0) {\n      return getDefaultChildren(results);\n    }\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  }\n  return (_b = (_a = results.find((r) => r.if)) == null ? void 0 : _a.children) != null ? _b : getDefaultChildren(results);\n};\nfunction AsyncEntitySwitch({\n  results,\n  renderMultipleMatches\n}) {\n  const { loading, value } = useAsync(async () => {\n    var _a;\n    const promises = results.map(\n      async ({ if: condition, children: output }) => {\n        try {\n          if (await condition) {\n            return output;\n          }\n        } catch {\n        }\n        return null;\n      }\n    );\n    if (renderMultipleMatches === \"all\") {\n      const children = (await Promise.all(promises)).filter(Boolean);\n      if (children.length === 0) {\n        return getDefaultChildren(results);\n      }\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n    }\n    return (_a = (await Promise.all(promises)).find(Boolean)) != null ? _a : getDefaultChildren(results);\n  }, [results]);\n  if (loading || !value) {\n    return null;\n  }\n  return value;\n}\nfunction getDefaultChildren(results) {\n  var _a, _b;\n  return (_b = (_a = results.filter((r) => r.if === void 0)[0]) == null ? void 0 : _a.children) != null ? _b : null;\n}\nEntitySwitch.Case = EntitySwitchCaseComponent;\n\nexport { EntityOrphanWarning as E, EntityRelationWarning as a, EntityProcessingErrorsPanel as b, hasCatalogProcessingErrors as c, EntitySwitch as d, hasRelationWarnings as h, isOrphan as i };\n//# sourceMappingURL=EntitySwitch-b8889a58.esm.js.map\n","function durationToMilliseconds(duration) {\n  const {\n    years = 0,\n    months = 0,\n    weeks = 0,\n    days = 0,\n    hours = 0,\n    minutes = 0,\n    seconds = 0,\n    milliseconds = 0\n  } = duration;\n  const totalDays = years * 365 + months * 30 + weeks * 7 + days;\n  const totalHours = totalDays * 24 + hours;\n  const totalMinutes = totalHours * 60 + minutes;\n  const totalSeconds = totalMinutes * 60 + seconds;\n  const totalMilliseconds = totalSeconds * 1e3 + milliseconds;\n  return totalMilliseconds;\n}\n\nexport { durationToMilliseconds };\n//# sourceMappingURL=index.esm.js.map\n","import { stringifyEntityRef, parseEntityRef } from '@backstage/catalog-model';\nimport { durationToMilliseconds } from '@backstage/types';\nimport DataLoader from 'dataloader';\nimport ExpiryMap from 'expiry-map';\nimport ObservableImpl from 'zen-observable';\nimport { defaultEntityPresentation } from '@backstage/plugin-catalog-react';\nimport ApartmentIcon from '@material-ui/icons/Apartment';\nimport CategoryIcon from '@material-ui/icons/Category';\nimport ExtensionIcon from '@material-ui/icons/Extension';\nimport FeaturedPlayListIcon from '@material-ui/icons/FeaturedPlayList';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport MemoryIcon from '@material-ui/icons/Memory';\nimport PeopleIcon from '@material-ui/icons/People';\nimport PersonIcon from '@material-ui/icons/Person';\nimport StorageIcon from '@material-ui/icons/Storage';\nimport { isArray, isString } from 'lodash';\nimport { createExternalRouteRef, createRouteRef } from '@backstage/core-plugin-api';\n\nconst DEFAULT_CACHE_TTL = { seconds: 10 };\nconst DEFAULT_BATCH_DELAY = { milliseconds: 50 };\nconst DEFAULT_ICONS = {\n  api: ExtensionIcon,\n  component: MemoryIcon,\n  system: CategoryIcon,\n  resource: StorageIcon,\n  domain: ApartmentIcon,\n  location: LocationOnIcon,\n  user: PersonIcon,\n  group: PeopleIcon,\n  template: FeaturedPlayListIcon\n};\nfunction createDefaultRenderer(options) {\n  return {\n    async: options.async,\n    render: ({ entityRef, entity, context }) => {\n      const presentation = defaultEntityPresentation(\n        entity || entityRef,\n        context\n      );\n      return {\n        snapshot: presentation,\n        loadEntity: options.async\n      };\n    }\n  };\n}\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck(obj, member, \"access private method\");\n  return method;\n};\nvar _cache, _cacheTtlMs, _loader, _kindIcons, _renderer, _getEntityForInitialRender, getEntityForInitialRender_fn, _createLoader, createLoader_fn, _maybeFallbackIcon, maybeFallbackIcon_fn;\nconst _DefaultEntityPresentationApi = class _DefaultEntityPresentationApi {\n  constructor(options) {\n    __privateAdd(this, _getEntityForInitialRender);\n    __privateAdd(this, _createLoader);\n    __privateAdd(this, _maybeFallbackIcon);\n    // This cache holds on to all entity data ever loaded, no matter how old. Each\n    // entry is tagged with a timestamp of when it was inserted. We use this map\n    // to be able to always render SOME data even though the information is old.\n    // Entities change very rarely, so it's likely that the rendered information\n    // was perfectly fine in the first place.\n    __privateAdd(this, _cache, void 0);\n    __privateAdd(this, _cacheTtlMs, void 0);\n    __privateAdd(this, _loader, void 0);\n    __privateAdd(this, _kindIcons, void 0);\n    // lowercased kinds\n    __privateAdd(this, _renderer, void 0);\n    var _a, _b, _c, _d;\n    const cacheTtl = (_a = options.cacheTtl) != null ? _a : DEFAULT_CACHE_TTL;\n    const batchDelay = (_b = options.batchDelay) != null ? _b : DEFAULT_BATCH_DELAY;\n    const renderer = (_c = options.renderer) != null ? _c : createDefaultRenderer({ async: true });\n    const kindIcons = {};\n    Object.entries(DEFAULT_ICONS).forEach(([kind, icon]) => {\n      kindIcons[kind.toLocaleLowerCase(\"en-US\")] = icon;\n    });\n    Object.entries((_d = options.kindIcons) != null ? _d : {}).forEach(([kind, icon]) => {\n      kindIcons[kind.toLocaleLowerCase(\"en-US\")] = icon;\n    });\n    if (renderer.async) {\n      if (!options.catalogApi) {\n        throw new TypeError(`Asynchronous rendering requires a catalog API`);\n      }\n      __privateSet(this, _loader, __privateMethod(this, _createLoader, createLoader_fn).call(this, {\n        cacheTtl,\n        batchDelay,\n        renderer,\n        catalogApi: options.catalogApi\n      }));\n    }\n    __privateSet(this, _cacheTtlMs, durationToMilliseconds(cacheTtl));\n    __privateSet(this, _cache, /* @__PURE__ */ new Map());\n    __privateSet(this, _kindIcons, kindIcons);\n    __privateSet(this, _renderer, renderer);\n  }\n  /**\n   * Creates a new presentation API that does not reach out to the catalog.\n   */\n  static createLocal() {\n    return new _DefaultEntityPresentationApi({\n      renderer: createDefaultRenderer({ async: false })\n    });\n  }\n  /**\n   * Creates a new presentation API that calls out to the catalog as needed to\n   * get additional information about entities.\n   */\n  static create(options) {\n    return new _DefaultEntityPresentationApi(options);\n  }\n  /** {@inheritdoc @backstage/plugin-catalog-react#EntityPresentationApi.forEntity} */\n  forEntity(entityOrRef, context) {\n    const { entityRef, kind, entity, needsLoad } = __privateMethod(this, _getEntityForInitialRender, getEntityForInitialRender_fn).call(this, entityOrRef);\n    const render = (options) => {\n      const { snapshot } = __privateGet(this, _renderer).render({\n        entityRef,\n        loading: options.loading,\n        entity: options.entity,\n        context: context || {}\n      });\n      return {\n        ...snapshot,\n        entityRef,\n        Icon: __privateMethod(this, _maybeFallbackIcon, maybeFallbackIcon_fn).call(this, snapshot.Icon, kind)\n      };\n    };\n    let initialSnapshot;\n    try {\n      initialSnapshot = render({\n        loading: needsLoad,\n        entity\n      });\n    } catch {\n      initialSnapshot = {\n        primaryTitle: entityRef,\n        entityRef\n      };\n    }\n    const observable = !needsLoad ? void 0 : new ObservableImpl((subscriber) => {\n      let aborted = false;\n      Promise.resolve().then(() => {\n        var _a;\n        return (_a = __privateGet(this, _loader)) == null ? void 0 : _a.load(entityRef);\n      }).then((newEntity) => {\n        if (!aborted && newEntity && newEntity.metadata.etag !== (entity == null ? void 0 : entity.metadata.etag)) {\n          const updatedSnapshot = render({\n            loading: false,\n            entity: newEntity\n          });\n          subscriber.next(updatedSnapshot);\n        }\n      }).catch(() => {\n      }).finally(() => {\n        if (!aborted) {\n          subscriber.complete();\n        }\n      });\n      return () => {\n        aborted = true;\n      };\n    });\n    return {\n      snapshot: initialSnapshot,\n      update$: observable\n    };\n  }\n};\n_cache = new WeakMap();\n_cacheTtlMs = new WeakMap();\n_loader = new WeakMap();\n_kindIcons = new WeakMap();\n_renderer = new WeakMap();\n_getEntityForInitialRender = new WeakSet();\ngetEntityForInitialRender_fn = function(entityOrRef) {\n  if (typeof entityOrRef !== \"string\") {\n    return {\n      entity: entityOrRef,\n      kind: entityOrRef.kind,\n      entityRef: stringifyEntityRef(entityOrRef),\n      needsLoad: false\n    };\n  }\n  const cached = __privateGet(this, _cache).get(entityOrRef);\n  const cachedEntity = cached == null ? void 0 : cached.entity;\n  const cacheNeedsUpdate = !cached || Date.now() - cached.updatedAt > __privateGet(this, _cacheTtlMs);\n  const needsLoad = cacheNeedsUpdate && __privateGet(this, _renderer).async !== false && __privateGet(this, _loader) !== void 0;\n  return {\n    entity: cachedEntity,\n    kind: parseEntityRef(entityOrRef).kind,\n    entityRef: entityOrRef,\n    needsLoad\n  };\n};\n_createLoader = new WeakSet();\ncreateLoader_fn = function(options) {\n  const cacheTtlMs = durationToMilliseconds(options.cacheTtl);\n  const batchDelayMs = durationToMilliseconds(options.batchDelay);\n  return new DataLoader(\n    async (entityRefs) => {\n      const { items } = await options.catalogApi.getEntitiesByRefs({\n        entityRefs\n      });\n      const now = Date.now();\n      entityRefs.forEach((entityRef, index) => {\n        __privateGet(this, _cache).set(entityRef, {\n          updatedAt: now,\n          entity: items[index]\n        });\n      });\n      return items;\n    },\n    {\n      name: \"DefaultEntityPresentationApi\",\n      // This cache is the one that the data loader uses internally for\n      // memoizing requests; essentially what it achieves is that multiple\n      // requests for the same entity ref will be batched up into a single\n      // request and then the resulting promises are held on to. We put an\n      // expiring map here, which makes it so that it re-fetches data with the\n      // expiry cadence of that map. Otherwise it would only fetch a given ref\n      // once and then never try again. This cache does therefore not fulfill\n      // the same purpose as the one that is in the root of the class.\n      cacheMap: new ExpiryMap(cacheTtlMs),\n      maxBatchSize: 100,\n      batchScheduleFn: batchDelayMs ? (cb) => setTimeout(cb, batchDelayMs) : void 0\n    }\n  );\n};\n_maybeFallbackIcon = new WeakSet();\nmaybeFallbackIcon_fn = function(renderedIcon, kind) {\n  if (renderedIcon) {\n    return renderedIcon;\n  } else if (renderedIcon === false) {\n    return false;\n  }\n  return __privateGet(this, _kindIcons)[kind.toLocaleLowerCase(\"en-US\")];\n};\nlet DefaultEntityPresentationApi = _DefaultEntityPresentationApi;\n\nasync function performMigrationToTheNewBucket({\n  storageApi\n}) {\n  var _a;\n  const source = storageApi.forBucket(\"settings\");\n  const target = storageApi.forBucket(\"starredEntities\");\n  const oldStarredEntities = source.snapshot(\"starredEntities\").value;\n  if (!isArray(oldStarredEntities)) {\n    return;\n  }\n  const targetEntities = new Set(\n    (_a = target.snapshot(\"entityRefs\").value) != null ? _a : []\n  );\n  oldStarredEntities.filter(isString).map((old) => old.split(\":\")).filter((split) => split.length === 4 && split[0] === \"entity\").map(\n    ([_, kind, namespace, name]) => stringifyEntityRef({ kind, namespace, name })\n  ).forEach((e) => targetEntities.add(e));\n  await target.set(\"entityRefs\", Array.from(targetEntities));\n  await source.remove(\"starredEntities\");\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass DefaultStarredEntitiesApi {\n  constructor(opts) {\n    __publicField(this, \"settingsStore\");\n    __publicField(this, \"starredEntities\");\n    __publicField(this, \"subscribers\", /* @__PURE__ */ new Set());\n    __publicField(this, \"observable\", new ObservableImpl((subscriber) => {\n      subscriber.next(new Set(this.starredEntities));\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    }));\n    var _a;\n    performMigrationToTheNewBucket(opts).then();\n    this.settingsStore = opts.storageApi.forBucket(\"starredEntities\");\n    this.starredEntities = new Set(\n      (_a = this.settingsStore.snapshot(\"entityRefs\").value) != null ? _a : []\n    );\n    this.settingsStore.observe$(\"entityRefs\").subscribe({\n      next: (next) => {\n        var _a2;\n        this.starredEntities = new Set((_a2 = next.value) != null ? _a2 : []);\n        this.notifyChanges();\n      }\n    });\n  }\n  async toggleStarred(entityRef) {\n    if (this.starredEntities.has(entityRef)) {\n      this.starredEntities.delete(entityRef);\n    } else {\n      this.starredEntities.add(entityRef);\n    }\n    await this.settingsStore.set(\n      \"entityRefs\",\n      Array.from(this.starredEntities)\n    );\n  }\n  starredEntitie$() {\n    return this.observable;\n  }\n  notifyChanges() {\n    for (const subscription of this.subscribers) {\n      subscription.next(new Set(this.starredEntities));\n    }\n  }\n}\n\nconst createComponentRouteRef = createExternalRouteRef({\n  id: \"create-component\",\n  optional: true\n});\nconst viewTechDocRouteRef = createExternalRouteRef({\n  id: \"view-techdoc\",\n  optional: true,\n  params: [\"namespace\", \"kind\", \"name\"]\n});\nconst createFromTemplateRouteRef = createExternalRouteRef({\n  id: \"create-from-template\",\n  optional: true,\n  params: [\"namespace\", \"templateName\"]\n});\nconst unregisterRedirectRouteRef = createExternalRouteRef({\n  id: \"catalog:unregister-redirect\",\n  optional: true\n});\nconst rootRouteRef = createRouteRef({\n  id: \"catalog\"\n});\n\nexport { DefaultStarredEntitiesApi as D, DefaultEntityPresentationApi as a, createFromTemplateRouteRef as b, createComponentRouteRef as c, rootRouteRef as r, unregisterRedirectRouteRef as u, viewTechDocRouteRef as v };\n//# sourceMappingURL=routes-6e97578f.esm.js.map\n","import { D as DefaultStarredEntitiesApi, a as DefaultEntityPresentationApi, r as rootRouteRef, c as createComponentRouteRef, v as viewTechDocRouteRef, b as createFromTemplateRouteRef, u as unregisterRedirectRouteRef } from './esm/routes-6e97578f.esm.js';\nexport { a as DefaultEntityPresentationApi, D as DefaultStarredEntitiesApi } from './esm/routes-6e97578f.esm.js';\nexport { A as AboutContent, a as AboutField } from './esm/AboutCard-4c4d6a9e.esm.js';\nimport React, { useMemo, useState, useEffect } from 'react';\nimport { makeStyles, createStyles, Select, InputBase, MenuItem } from '@material-ui/core';\nimport { catalogApiRef, useEntityList, EntityKindFilter, CatalogFilterLayout, starredEntitiesApiRef, entityPresentationApiRef, entityRouteRef } from '@backstage/plugin-catalog-react';\nimport pluralize from 'pluralize';\nimport { useApi, createPlugin, createApiFactory, discoveryApiRef, fetchApiRef, storageApiRef, createRoutableExtension, createComponentExtension } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nexport { C as CatalogTable } from './esm/CatalogTable-c38b6560.esm.js';\nexport { E as EntityLayout } from './esm/EntityLayout-51caff9c.esm.js';\nexport { E as EntityOrphanWarning, b as EntityProcessingErrorsPanel, a as EntityRelationWarning, d as EntitySwitch, c as hasCatalogProcessingErrors, h as hasRelationWarnings, i as isOrphan } from './esm/EntitySwitch-b8889a58.esm.js';\nexport { h as hasLabels } from './esm/conditions-7e166d27.esm.js';\nimport { CatalogClient } from '@backstage/catalog-client';\nimport { createSearchResultListItemExtension } from '@backstage/plugin-search-react';\nimport '@backstage/catalog-model';\nimport '@backstage/types';\nimport 'dataloader';\nimport 'expiry-map';\nimport 'zen-observable';\nimport '@material-ui/icons/Apartment';\nimport '@material-ui/icons/Category';\nimport '@material-ui/icons/Extension';\nimport '@material-ui/icons/FeaturedPlayList';\nimport '@material-ui/icons/LocationOn';\nimport '@material-ui/icons/Memory';\nimport '@material-ui/icons/People';\nimport '@material-ui/icons/Person';\nimport '@material-ui/icons/Storage';\nimport 'lodash';\nimport '@backstage/core-components';\nimport '@backstage/integration-react';\nimport './esm/LinksGridList-c9dd074c.esm.js';\nimport '@material-ui/icons/Language';\nimport '@material-ui/icons/Cached';\nimport '@material-ui/icons/AddCircleOutline';\nimport '@material-ui/icons/Description';\nimport '@material-ui/icons/Edit';\nimport '@backstage/plugin-scaffolder-common';\nimport '@backstage/plugin-catalog-react/alpha';\nimport '@backstage/plugin-catalog-common/alpha';\nimport '@material-ui/core/Typography';\nimport '@material-ui/core/styles';\nimport '@mui/utils';\nimport '@material-ui/icons/OpenInNew';\nimport '@material-ui/icons/Star';\nimport '@material-ui/icons/StarBorder';\nimport '@material-ui/lab';\nimport 'react-router-dom';\nimport '@material-ui/icons/BugReport';\nimport '@material-ui/icons/MoreVert';\nimport '@material-ui/icons/FileCopyTwoTone';\nimport '@material-ui/icons/Cancel';\nimport 'react-use/lib/useCopyToClipboard';\nimport '@backstage/errors';\n\nfunction useAllKinds() {\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    error,\n    loading,\n    value: allKinds\n  } = useAsync(async () => {\n    const items = await catalogApi.getEntityFacets({ facets: [\"kind\"] }).then((response) => {\n      var _a;\n      return ((_a = response.facets.kind) == null ? void 0 : _a.map((f) => f.value).sort()) || [];\n    });\n    return items;\n  }, [catalogApi]);\n  return { loading, error, allKinds: allKinds != null ? allKinds : [] };\n}\nfunction filterKinds(allKinds, allowedKinds, forcedKinds) {\n  let availableKinds = allKinds;\n  if (allowedKinds) {\n    availableKinds = availableKinds.filter(\n      (k) => allowedKinds.some(\n        (a) => a.toLocaleLowerCase(\"en-US\") === k.toLocaleLowerCase(\"en-US\")\n      )\n    );\n  }\n  if (forcedKinds && !allKinds.some(\n    (a) => a.toLocaleLowerCase(\"en-US\") === forcedKinds.toLocaleLowerCase(\"en-US\")\n  )) {\n    availableKinds = availableKinds.concat([forcedKinds]);\n  }\n  const kindsMap = availableKinds.sort().reduce((acc, kind) => {\n    acc[kind.toLocaleLowerCase(\"en-US\")] = kind;\n    return acc;\n  }, {});\n  return kindsMap;\n}\n\nconst useStyles = makeStyles(\n  (theme) => createStyles({\n    root: {\n      ...theme.typography.h4\n    }\n  })\n);\nfunction CatalogKindHeader(props) {\n  var _a, _b;\n  const { initialFilter = \"component\", allowedKinds } = props;\n  const classes = useStyles();\n  const { allKinds } = useAllKinds();\n  const {\n    filters,\n    updateFilters,\n    queryParameters: { kind: kindParameter }\n  } = useEntityList();\n  const queryParamKind = useMemo(\n    () => [kindParameter].flat()[0],\n    [kindParameter]\n  );\n  const [selectedKind, setSelectedKind] = useState(\n    (_b = queryParamKind != null ? queryParamKind : (_a = filters.kind) == null ? void 0 : _a.value) != null ? _b : initialFilter\n  );\n  useEffect(() => {\n    if (queryParamKind) {\n      setSelectedKind(queryParamKind);\n    }\n  }, [queryParamKind]);\n  useEffect(() => {\n    var _a2, _b2;\n    if ((_a2 = filters.kind) == null ? void 0 : _a2.value) {\n      setSelectedKind((_b2 = filters.kind) == null ? void 0 : _b2.value);\n    }\n  }, [filters.kind]);\n  useEffect(() => {\n    updateFilters({\n      kind: selectedKind ? new EntityKindFilter(selectedKind) : void 0\n    });\n  }, [selectedKind, updateFilters]);\n  const options = filterKinds(allKinds, allowedKinds, selectedKind);\n  return /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      input: /* @__PURE__ */ React.createElement(InputBase, null),\n      value: selectedKind.toLocaleLowerCase(\"en-US\"),\n      onChange: (e) => setSelectedKind(e.target.value),\n      classes\n    },\n    Object.keys(options).map((kind) => /* @__PURE__ */ React.createElement(MenuItem, { value: kind, key: kind }, `${pluralize(options[kind])}`))\n  );\n}\n\nfunction strCmp(a, b) {\n  return Boolean(\n    a && typeof a === \"string\" && (a == null ? void 0 : a.toLocaleLowerCase(\"en-US\")) === (b == null ? void 0 : b.toLocaleLowerCase(\"en-US\"))\n  );\n}\nfunction strCmpAll(value, cmpValues) {\n  return typeof cmpValues === \"string\" ? strCmp(value, cmpValues) : cmpValues.length === 0 || cmpValues.some((cmpVal) => strCmp(value, cmpVal));\n}\nfunction isKind(kinds) {\n  return isEntityWith({ kind: kinds });\n}\nfunction isComponentType(types) {\n  return isEntityWith({ kind: \"component\", type: types });\n}\nfunction isResourceType(types) {\n  return isEntityWith({ kind: \"resource\", type: types });\n}\nfunction isEntityWith(predicate) {\n  return (entity) => {\n    var _a;\n    if (predicate.kind && !strCmpAll(entity.kind, predicate.kind)) {\n      return false;\n    }\n    if (predicate.type && !strCmpAll((_a = entity.spec) == null ? void 0 : _a.type, predicate.type)) {\n      return false;\n    }\n    return true;\n  };\n}\nfunction isNamespace(namespaces) {\n  return (entity) => {\n    var _a;\n    return strCmpAll((_a = entity.metadata) == null ? void 0 : _a.namespace, namespaces);\n  };\n}\n\nconst FilteredEntityLayout = CatalogFilterLayout;\nconst FilterContainer = CatalogFilterLayout.Filters;\nconst EntityListContainer = CatalogFilterLayout.Content;\n\nconst catalogPlugin = createPlugin({\n  id: \"catalog\",\n  apis: [\n    createApiFactory({\n      api: catalogApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        fetchApi: fetchApiRef\n      },\n      factory: ({ discoveryApi, fetchApi }) => new CatalogClient({ discoveryApi, fetchApi })\n    }),\n    createApiFactory({\n      api: starredEntitiesApiRef,\n      deps: { storageApi: storageApiRef },\n      factory: ({ storageApi }) => new DefaultStarredEntitiesApi({ storageApi })\n    }),\n    createApiFactory({\n      api: entityPresentationApiRef,\n      deps: { catalogApi: catalogApiRef },\n      factory: ({ catalogApi }) => DefaultEntityPresentationApi.create({ catalogApi })\n    })\n  ],\n  routes: {\n    catalogIndex: rootRouteRef,\n    catalogEntity: entityRouteRef\n  },\n  externalRoutes: {\n    createComponent: createComponentRouteRef,\n    viewTechDoc: viewTechDocRouteRef,\n    createFromTemplate: createFromTemplateRouteRef,\n    unregisterRedirect: unregisterRedirectRouteRef\n  }\n});\nconst CatalogIndexPage = catalogPlugin.provide(\n  createRoutableExtension({\n    name: \"CatalogIndexPage\",\n    component: () => import('./esm/index-25ea000b.esm.js').then((m) => m.CatalogPage),\n    mountPoint: rootRouteRef\n  })\n);\nconst CatalogEntityPage = catalogPlugin.provide(\n  createRoutableExtension({\n    name: \"CatalogEntityPage\",\n    component: () => import('./esm/index-1fe355f9.esm.js').then((m) => m.CatalogEntityPage),\n    mountPoint: entityRouteRef\n  })\n);\nconst EntityAboutCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityAboutCard\",\n    component: {\n      lazy: () => import('./esm/index-fcc6ada1.esm.js').then((m) => m.AboutCard)\n    }\n  })\n);\nconst EntityLinksCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityLinksCard\",\n    component: {\n      lazy: () => import('./esm/index-a2f43c63.esm.js').then((m) => m.EntityLinksCard)\n    }\n  })\n);\nconst EntityLabelsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityLabelsCard\",\n    component: {\n      lazy: () => import('./esm/index-1819df86.esm.js').then((m) => m.EntityLabelsCard)\n    }\n  })\n);\nconst EntityHasSystemsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasSystemsCard\",\n    component: {\n      lazy: () => import('./esm/index-b87e664e.esm.js').then((m) => m.HasSystemsCard)\n    }\n  })\n);\nconst EntityHasComponentsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasComponentsCard\",\n    component: {\n      lazy: () => import('./esm/index-151a7b53.esm.js').then((m) => m.HasComponentsCard)\n    }\n  })\n);\nconst EntityHasSubcomponentsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasSubcomponentsCard\",\n    component: {\n      lazy: () => import('./esm/index-df2397a2.esm.js').then(\n        (m) => m.HasSubcomponentsCard\n      )\n    }\n  })\n);\nconst EntityHasResourcesCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasResourcesCard\",\n    component: {\n      lazy: () => import('./esm/index-457f1bef.esm.js').then((m) => m.HasResourcesCard)\n    }\n  })\n);\nconst EntityDependsOnComponentsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityDependsOnComponentsCard\",\n    component: {\n      lazy: () => import('./esm/index-5d579387.esm.js').then(\n        (m) => m.DependsOnComponentsCard\n      )\n    }\n  })\n);\nconst EntityDependencyOfComponentsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityDependencyOfComponentsCard\",\n    component: {\n      lazy: () => import('./esm/index-226f1855.esm.js').then(\n        (m) => m.DependencyOfComponentsCard\n      )\n    }\n  })\n);\nconst EntityDependsOnResourcesCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityDependsOnResourcesCard\",\n    component: {\n      lazy: () => import('./esm/index-2ae6a112.esm.js').then(\n        (m) => m.DependsOnResourcesCard\n      )\n    }\n  })\n);\nconst RelatedEntitiesCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"RelatedEntitiesCard\",\n    component: {\n      lazy: () => import('./esm/index-87a68cf7.esm.js').then(\n        (m) => m.RelatedEntitiesCard\n      )\n    }\n  })\n);\nconst CatalogSearchResultListItem = catalogPlugin.provide(\n  createSearchResultListItemExtension({\n    name: \"CatalogSearchResultListItem\",\n    component: () => import('./esm/index-a73e6d8d.esm.js').then(\n      (m) => m.CatalogSearchResultListItem\n    ),\n    predicate: (result) => result.type === \"software-catalog\"\n  })\n);\n\nexport { CatalogEntityPage, CatalogIndexPage, CatalogKindHeader, CatalogSearchResultListItem, EntityAboutCard, EntityDependencyOfComponentsCard, EntityDependsOnComponentsCard, EntityDependsOnResourcesCard, EntityHasComponentsCard, EntityHasResourcesCard, EntityHasSubcomponentsCard, EntityHasSystemsCard, EntityLabelsCard, EntityLinksCard, EntityListContainer, FilterContainer, FilteredEntityLayout, RelatedEntitiesCard, catalogPlugin, isComponentType, isEntityWith, isKind, isNamespace, isResourceType };\n//# sourceMappingURL=index.esm.js.map\n","import { createApiRef, createRouteRef, createSubRouteRef, createPlugin, createApiFactory, configApiRef, createRoutableExtension, createComponentExtension, useApi, useRouteRefParams, errorApiRef, useRouteRef } from '@backstage/core-plugin-api';\nimport { readGithubIntegrationConfigs } from '@backstage/integration';\nimport { Octokit } from '@octokit/rest';\nimport { scmAuthApiRef } from '@backstage/integration-react';\nimport React, { useState, useEffect } from 'react';\nimport { useEntity, MissingAnnotationEmptyState } from '@backstage/plugin-catalog-react';\nimport { Link as Link$1, Routes, Route } from 'react-router-dom';\nimport { makeStyles, Accordion, AccordionSummary, Typography, CircularProgress, Tooltip, Zoom, Modal, Fade, LinearProgress, Box, TableContainer, Paper, Table, TableBody, TableRow, TableCell, AccordionDetails, ListItemText, createStyles, Grid, Button, Select, MenuItem, Chip, ButtonGroup, IconButton, TablePagination, TextField } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ExternalLinkIcon from '@material-ui/icons/Launch';\nimport { DateTime } from 'luxon';\nimport { StatusPending, StatusOK, StatusError, StatusWarning, StatusAborted, StatusRunning, LogViewer, Breadcrumbs, Link, EmptyState, InfoCard, MarkdownContent, Table as Table$1, StructuredMetadataTable, ErrorPanel } from '@backstage/core-components';\nimport useAsync from 'react-use/lib/useAsync';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport { ANNOTATION_SOURCE_LOCATION, ANNOTATION_LOCATION } from '@backstage/catalog-model';\nimport gitUrlParse from 'git-url-parse';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport RetryIcon from '@material-ui/icons/Replay';\nimport SyncIcon from '@material-ui/icons/Sync';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { Alert } from '@material-ui/lab';\n\nconst githubActionsApiRef = createApiRef({\n  id: \"plugin.githubactions.service\"\n});\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass GithubActionsClient {\n  constructor(options) {\n    __publicField(this, \"configApi\");\n    __publicField(this, \"scmAuthApi\");\n    this.configApi = options.configApi;\n    this.scmAuthApi = options.scmAuthApi;\n  }\n  async getOctokit(hostname = \"github.com\") {\n    var _a;\n    const { token } = await this.scmAuthApi.getCredentials({\n      url: `https://${hostname}/`,\n      additionalScope: {\n        customScopes: {\n          github: [\"repo\"]\n        }\n      }\n    });\n    const configs = readGithubIntegrationConfigs(\n      (_a = this.configApi.getOptionalConfigArray(\"integrations.github\")) != null ? _a : []\n    );\n    const githubIntegrationConfig = configs.find((v) => v.host === hostname);\n    const baseUrl = githubIntegrationConfig == null ? void 0 : githubIntegrationConfig.apiBaseUrl;\n    return new Octokit({ auth: token, baseUrl });\n  }\n  async reRunWorkflow(options) {\n    const { hostname, owner, repo, runId } = options;\n    const octokit = await this.getOctokit(hostname);\n    return octokit.actions.reRunWorkflow({\n      owner,\n      repo,\n      run_id: runId\n    });\n  }\n  async listWorkflowRuns(options) {\n    const { hostname, owner, repo, pageSize = 100, page = 0, branch } = options;\n    const octokit = await this.getOctokit(hostname);\n    const workflowRuns = await octokit.actions.listWorkflowRunsForRepo({\n      owner,\n      repo,\n      per_page: pageSize,\n      page,\n      ...branch ? { branch } : {}\n    });\n    return workflowRuns.data;\n  }\n  async getWorkflow(options) {\n    const { hostname, owner, repo, id } = options;\n    const octokit = await this.getOctokit(hostname);\n    const workflow = await octokit.actions.getWorkflow({\n      owner,\n      repo,\n      workflow_id: id\n    });\n    return workflow.data;\n  }\n  async getWorkflowRun(options) {\n    const { hostname, owner, repo, id } = options;\n    const octokit = await this.getOctokit(hostname);\n    const run = await octokit.actions.getWorkflowRun({\n      owner,\n      repo,\n      run_id: id\n    });\n    return run.data;\n  }\n  async listJobsForWorkflowRun(options) {\n    const { hostname, owner, repo, id, pageSize = 100, page = 0 } = options;\n    const octokit = await this.getOctokit(hostname);\n    const jobs = await octokit.actions.listJobsForWorkflowRun({\n      owner,\n      repo,\n      run_id: id,\n      per_page: pageSize,\n      page\n    });\n    return jobs.data;\n  }\n  async downloadJobLogsForWorkflowRun(options) {\n    const { hostname, owner, repo, runId } = options;\n    const octokit = await this.getOctokit(hostname);\n    const workflow = await octokit.actions.downloadJobLogsForWorkflowRun({\n      owner,\n      repo,\n      job_id: runId\n    });\n    return workflow.data;\n  }\n  async listBranches(options) {\n    const { hostname, owner, repo, page = 0 } = options;\n    const octokit = await this.getOctokit(hostname);\n    const response = await octokit.rest.repos.listBranches({\n      owner,\n      repo,\n      per_page: 100,\n      page\n    });\n    return response.data;\n  }\n  async getDefaultBranch(options) {\n    const { hostname, owner, repo } = options;\n    const octokit = await this.getOctokit(hostname);\n    const response = await octokit.rest.repos.get({\n      owner,\n      repo\n    });\n    return response.data.default_branch;\n  }\n}\n\nvar BuildStatus = /* @__PURE__ */ ((BuildStatus2) => {\n  BuildStatus2[BuildStatus2[\"success\"] = 0] = \"success\";\n  BuildStatus2[BuildStatus2[\"failure\"] = 1] = \"failure\";\n  BuildStatus2[BuildStatus2[\"pending\"] = 2] = \"pending\";\n  BuildStatus2[BuildStatus2[\"running\"] = 3] = \"running\";\n  return BuildStatus2;\n})(BuildStatus || {});\n\nconst rootRouteRef = createRouteRef({\n  id: \"github-actions\"\n});\nconst buildRouteRef = createSubRouteRef({\n  id: \"github-actions/build\",\n  path: \"/:id\",\n  parent: rootRouteRef\n});\n\nconst githubActionsPlugin = createPlugin({\n  id: \"github-actions\",\n  apis: [\n    createApiFactory({\n      api: githubActionsApiRef,\n      deps: { configApi: configApiRef, scmAuthApi: scmAuthApiRef },\n      factory: ({ configApi, scmAuthApi }) => new GithubActionsClient({ configApi, scmAuthApi })\n    })\n  ],\n  routes: {\n    entityContent: rootRouteRef\n  }\n});\nconst EntityGithubActionsContent = githubActionsPlugin.provide(\n  createRoutableExtension({\n    name: \"EntityGithubActionsContent\",\n    component: () => Promise.resolve().then(function () { return Router$1; }).then((m) => m.Router),\n    mountPoint: rootRouteRef\n  })\n);\nconst EntityLatestGithubActionRunCard = githubActionsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityLatestGithubActionRunCard\",\n    component: {\n      lazy: () => import('./esm/index-36d0a162.esm.js').then((m) => m.LatestWorkflowRunCard)\n    }\n  })\n);\nconst EntityLatestGithubActionsForBranchCard = githubActionsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityLatestGithubActionsForBranchCard\",\n    component: {\n      lazy: () => import('./esm/index-36d0a162.esm.js').then(\n        (m) => m.LatestWorkflowsForBranchCard\n      )\n    }\n  })\n);\nconst EntityRecentGithubActionsRunsCard = githubActionsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityRecentGithubActionsRunsCard\",\n    component: {\n      lazy: () => import('./esm/index-36d0a162.esm.js').then((m) => m.RecentWorkflowRunsCard)\n    }\n  })\n);\n\nconst GITHUB_ACTIONS_ANNOTATION = \"github.com/project-slug\";\nconst getProjectNameFromEntity = (entity) => {\n  var _a, _b;\n  return (_b = (_a = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _a[GITHUB_ACTIONS_ANNOTATION]) != null ? _b : \"\";\n};\n\nconst WorkflowRunStatus = (props) => {\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(WorkflowIcon, { ...props }), getStatusDescription(props));\n};\nfunction WorkflowIcon({\n  status,\n  conclusion\n}) {\n  if (status === void 0)\n    return null;\n  switch (status.toLocaleLowerCase(\"en-US\")) {\n    case \"queued\":\n      return /* @__PURE__ */ React.createElement(StatusPending, null);\n    case \"in_progress\":\n      return /* @__PURE__ */ React.createElement(StatusRunning, null);\n    case \"completed\":\n      switch (conclusion == null ? void 0 : conclusion.toLocaleLowerCase(\"en-US\")) {\n        case \"skipped\":\n          return /* @__PURE__ */ React.createElement(StatusAborted, null);\n        case \"timed_out\":\n          return /* @__PURE__ */ React.createElement(StatusWarning, null);\n        case \"failure\":\n          return /* @__PURE__ */ React.createElement(StatusError, null);\n        default:\n          return /* @__PURE__ */ React.createElement(StatusOK, null);\n      }\n    default:\n      return /* @__PURE__ */ React.createElement(StatusPending, null);\n  }\n}\nfunction getStatusDescription({\n  status,\n  conclusion\n}) {\n  if (status === void 0)\n    return \"\";\n  switch (status.toLocaleLowerCase(\"en-US\")) {\n    case \"queued\":\n      return \"Queued\";\n    case \"in_progress\":\n      return \"In progress\";\n    case \"completed\":\n      switch (conclusion == null ? void 0 : conclusion.toLocaleLowerCase(\"en-US\")) {\n        case \"skipped\":\n          return \"Aborted\";\n        case \"timed_out\":\n          return \"Timed out\";\n        case \"failure\":\n          return \"Error\";\n        default:\n          return \"Completed\";\n      }\n    default:\n      return \"Pending\";\n  }\n}\n\nconst useWorkflowRunJobs = ({\n  hostname,\n  owner,\n  repo\n}) => {\n  const api = useApi(githubActionsApiRef);\n  const { id } = useRouteRefParams(buildRouteRef);\n  return useAsync(async () => {\n    if (!repo || !owner) {\n      throw new Error(\"No repo/owner provided\");\n    }\n    const jobs = await api.listJobsForWorkflowRun({\n      hostname,\n      owner,\n      repo,\n      id: parseInt(id, 10)\n    });\n    return {\n      total_count: jobs.total_count,\n      jobs: jobs.jobs.map((job) => {\n        var _a, _b, _c, _d;\n        return {\n          html_url: (_a = job.html_url) != null ? _a : void 0,\n          status: job.status,\n          conclusion: (_b = job.conclusion) != null ? _b : void 0,\n          started_at: job.started_at,\n          completed_at: (_c = job.completed_at) != null ? _c : void 0,\n          id: job.id,\n          name: job.name,\n          steps: (_d = job.steps) == null ? void 0 : _d.map((step) => {\n            var _a2, _b2, _c2;\n            return {\n              name: step.name,\n              status: step.status,\n              conclusion: (_a2 = step.conclusion) != null ? _a2 : void 0,\n              number: step.number,\n              started_at: (_b2 = step.started_at) != null ? _b2 : void 0,\n              completed_at: (_c2 = step.completed_at) != null ? _c2 : void 0\n            };\n          })\n        };\n      })\n    };\n  }, [repo, owner, id]);\n};\n\nconst useWorkflowRunsDetails = ({\n  hostname,\n  owner,\n  repo\n}) => {\n  const api = useApi(githubActionsApiRef);\n  const { id } = useRouteRefParams(buildRouteRef);\n  const details = useAsync(async () => {\n    return repo && owner ? api.getWorkflowRun({\n      hostname,\n      owner,\n      repo,\n      id: parseInt(id, 10)\n    }) : Promise.reject(new Error(\"No repo/owner provided\"));\n  }, [repo, owner, id]);\n  return details;\n};\n\nconst useDownloadWorkflowRunLogs = ({\n  hostname,\n  owner,\n  repo,\n  id\n}) => {\n  const api = useApi(githubActionsApiRef);\n  const details = useAsync(async () => {\n    return repo && owner ? api.downloadJobLogsForWorkflowRun({\n      hostname,\n      owner,\n      repo,\n      runId: id\n    }) : Promise.reject(\"No repo/owner provided\");\n  }, [repo, owner, id]);\n  return details;\n};\n\nconst getHostnameFromEntity = (entity) => {\n  var _a, _b, _c;\n  const location = (_c = (_a = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_SOURCE_LOCATION]) != null ? _c : (_b = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _b[ANNOTATION_LOCATION];\n  return (location == null ? void 0 : location.startsWith(\"url:\")) ? gitUrlParse(location.slice(4)).resource : void 0;\n};\n\nconst useStyles$3 = makeStyles((theme) => ({\n  button: {\n    order: -1,\n    marginRight: 0,\n    marginLeft: \"-20px\"\n  },\n  modal: {\n    display: \"flex\",\n    alignItems: \"center\",\n    width: \"85%\",\n    height: \"85%\",\n    justifyContent: \"center\",\n    margin: \"auto\"\n  },\n  normalLogContainer: {\n    height: \"75vh\",\n    width: \"100%\"\n  },\n  modalLogContainer: {\n    height: \"100%\",\n    width: \"100%\"\n  },\n  log: {\n    background: theme.palette.background.default\n  }\n}));\nconst WorkflowRunLogs = ({\n  entity,\n  runId,\n  inProgress\n}) => {\n  const classes = useStyles$3();\n  const projectName = getProjectNameFromEntity(entity);\n  const hostname = getHostnameFromEntity(entity);\n  const [owner, repo] = projectName && projectName.split(\"/\") || [];\n  const jobLogs = useDownloadWorkflowRunLogs({\n    hostname,\n    owner,\n    repo,\n    id: runId\n  });\n  const logText = jobLogs.value ? String(jobLogs.value) : void 0;\n  const [open, setOpen] = React.useState(false);\n  const handleOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  return /* @__PURE__ */ React.createElement(Accordion, { TransitionProps: { unmountOnExit: true }, disabled: inProgress }, /* @__PURE__ */ React.createElement(\n    AccordionSummary,\n    {\n      expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, null),\n      IconButtonProps: {\n        className: classes.button\n      }\n    },\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"button\" }, jobLogs.loading ? /* @__PURE__ */ React.createElement(CircularProgress, null) : \"Job Log\"),\n    /* @__PURE__ */ React.createElement(Tooltip, { title: \"Open Log\", TransitionComponent: Zoom, arrow: true }, /* @__PURE__ */ React.createElement(\n      DescriptionIcon,\n      {\n        onClick: (event) => {\n          event.stopPropagation();\n          handleOpen();\n        },\n        style: { marginLeft: \"auto\" }\n      }\n    )),\n    /* @__PURE__ */ React.createElement(\n      Modal,\n      {\n        className: classes.modal,\n        onClick: (event) => event.stopPropagation(),\n        open,\n        onClose: handleClose\n      },\n      /* @__PURE__ */ React.createElement(Fade, { in: open }, /* @__PURE__ */ React.createElement(\"div\", { className: classes.modalLogContainer }, /* @__PURE__ */ React.createElement(\n        LogViewer,\n        {\n          text: logText != null ? logText : \"No Values Found\",\n          classes: { root: classes.log }\n        }\n      )))\n    )\n  ), logText && /* @__PURE__ */ React.createElement(\"div\", { className: classes.normalLogContainer }, /* @__PURE__ */ React.createElement(LogViewer, { text: logText, classes: { root: classes.log } })));\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  root: {\n    maxWidth: 720,\n    margin: theme.spacing(2)\n  },\n  title: {\n    padding: theme.spacing(1, 0, 2, 0)\n  },\n  table: {\n    padding: theme.spacing(1)\n  },\n  accordionDetails: {\n    padding: 0\n  },\n  button: {\n    order: -1,\n    marginRight: 0,\n    marginLeft: \"-20px\"\n  },\n  externalLinkIcon: {\n    fontSize: \"inherit\",\n    verticalAlign: \"bottom\"\n  }\n}));\nconst getElapsedTime = (start, end) => {\n  if (!start || !end) {\n    return \"\";\n  }\n  const startDate = DateTime.fromISO(start);\n  const endDate = end ? DateTime.fromISO(end) : DateTime.now();\n  const diff = endDate.diff(startDate);\n  const timeElapsed = diff.toFormat(`m 'minutes' s 'seconds'`);\n  return timeElapsed;\n};\nconst StepView = ({ step }) => {\n  var _a;\n  return /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: step.name,\n      secondary: getElapsedTime(step.started_at, step.completed_at)\n    }\n  )), /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(\n    WorkflowRunStatus,\n    {\n      status: step.status.toLocaleUpperCase(\"en-US\"),\n      conclusion: (_a = step.conclusion) == null ? void 0 : _a.toLocaleUpperCase(\"en-US\")\n    }\n  )));\n};\nconst JobListItem = ({\n  job,\n  className,\n  entity\n}) => {\n  var _a;\n  const classes = useStyles$2();\n  return /* @__PURE__ */ React.createElement(Accordion, { TransitionProps: { unmountOnExit: true }, className }, /* @__PURE__ */ React.createElement(\n    AccordionSummary,\n    {\n      expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, null),\n      IconButtonProps: {\n        className: classes.button\n      }\n    },\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"button\" }, job.name, \" (\", getElapsedTime(job.started_at, job.completed_at), \")\")\n  ), /* @__PURE__ */ React.createElement(AccordionDetails, { className: classes.accordionDetails }, /* @__PURE__ */ React.createElement(TableContainer, null, /* @__PURE__ */ React.createElement(Table, null, (_a = job.steps) == null ? void 0 : _a.map((step) => /* @__PURE__ */ React.createElement(StepView, { key: step.number, step }))))), job.status === \"queued\" || job.status === \"in_progress\" ? /* @__PURE__ */ React.createElement(WorkflowRunLogs, { runId: job.id, inProgress: true, entity }) : /* @__PURE__ */ React.createElement(WorkflowRunLogs, { runId: job.id, inProgress: false, entity }));\n};\nconst JobsList = ({ jobs, entity }) => {\n  const classes = useStyles$2();\n  return /* @__PURE__ */ React.createElement(Box, null, jobs && jobs.total_count > 0 && jobs.jobs.map((job) => /* @__PURE__ */ React.createElement(\n    JobListItem,\n    {\n      key: job.id,\n      job,\n      className: job.status !== \"success\" ? classes.failed : classes.success,\n      entity\n    }\n  )));\n};\nconst WorkflowRunDetails = ({ entity }) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o;\n  const projectName = getProjectNameFromEntity(entity);\n  const hostname = getHostnameFromEntity(entity);\n  const [owner, repo] = projectName && projectName.split(\"/\") || [];\n  const details = useWorkflowRunsDetails({ hostname, owner, repo });\n  const jobs = useWorkflowRunJobs({ hostname, owner, repo });\n  const classes = useStyles$2();\n  if (details.error && details.error.message) {\n    return /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\", color: \"error\" }, \"Failed to load build, \", details.error.message);\n  } else if (details.loading) {\n    return /* @__PURE__ */ React.createElement(LinearProgress, null);\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", { className: classes.root }, /* @__PURE__ */ React.createElement(Box, { mb: 3 }, /* @__PURE__ */ React.createElement(Breadcrumbs, { \"aria-label\": \"breadcrumb\" }, /* @__PURE__ */ React.createElement(Link, { to: \"..\" }, \"Workflow runs\"), /* @__PURE__ */ React.createElement(Typography, null, \"Workflow run details\"))), /* @__PURE__ */ React.createElement(TableContainer, { component: Paper, className: classes.table }, /* @__PURE__ */ React.createElement(Table, null, /* @__PURE__ */ React.createElement(TableBody, null, /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Branch\")), /* @__PURE__ */ React.createElement(TableCell, null, (_a = details.value) == null ? void 0 : _a.head_branch)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Message\")), /* @__PURE__ */ React.createElement(TableCell, null, (_c = (_b = details.value) == null ? void 0 : _b.head_commit) == null ? void 0 : _c.message)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Commit ID\")), /* @__PURE__ */ React.createElement(TableCell, null, (_e = (_d = details.value) == null ? void 0 : _d.head_commit) == null ? void 0 : _e.id)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Workflow\")), /* @__PURE__ */ React.createElement(TableCell, null, (_f = details.value) == null ? void 0 : _f.name)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Status\")), /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(\n    WorkflowRunStatus,\n    {\n      status: ((_g = details.value) == null ? void 0 : _g.status) || void 0,\n      conclusion: ((_h = details.value) == null ? void 0 : _h.conclusion) || void 0\n    }\n  ))), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Author\")), /* @__PURE__ */ React.createElement(TableCell, null, `${(_k = (_j = (_i = details.value) == null ? void 0 : _i.head_commit) == null ? void 0 : _j.author) == null ? void 0 : _k.name} (${(_n = (_m = (_l = details.value) == null ? void 0 : _l.head_commit) == null ? void 0 : _m.author) == null ? void 0 : _n.email})`)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Links\")), /* @__PURE__ */ React.createElement(TableCell, null, ((_o = details.value) == null ? void 0 : _o.html_url) && /* @__PURE__ */ React.createElement(Link, { to: details.value.html_url }, \"Workflow runs on GitHub\", \" \", /* @__PURE__ */ React.createElement(ExternalLinkIcon, { className: classes.externalLinkIcon })))), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, { colSpan: 2 }, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Jobs\"), jobs.loading ? /* @__PURE__ */ React.createElement(CircularProgress, null) : /* @__PURE__ */ React.createElement(JobsList, { jobs: jobs.value, entity })))))));\n};\n\nfunction useWorkflowRuns({\n  hostname,\n  owner,\n  repo,\n  branch,\n  initialPageSize = 6\n}) {\n  const api = useApi(githubActionsApiRef);\n  const errorApi = useApi(errorApiRef);\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(0);\n  const [pageSize, setPageSize] = useState(initialPageSize);\n  const [branches, setBranches] = useState([]);\n  const [defaultBranch, setDefaultBranch] = useState(\"\");\n  const {\n    loading,\n    value: runs,\n    retry,\n    error\n  } = useAsyncRetry(async () => {\n    const fetchedDefaultBranch = await api.getDefaultBranch({\n      hostname,\n      owner,\n      repo\n    });\n    setDefaultBranch(fetchedDefaultBranch);\n    let selectedBranch = branch;\n    if (branch === \"default\") {\n      selectedBranch = fetchedDefaultBranch;\n    }\n    const fetchBranches = async () => {\n      let next = true;\n      let iteratePage = 0;\n      const branchSet2 = [];\n      while (next) {\n        const branchesData = await api.listBranches({\n          hostname,\n          owner,\n          repo,\n          page: iteratePage\n        });\n        if (branchesData.length === 0) {\n          next = false;\n        }\n        iteratePage++;\n        branchSet2.push(...branchesData);\n      }\n      return branchSet2;\n    };\n    const branchSet = await fetchBranches();\n    setBranches(branchSet);\n    const workflowRunsData = await api.listWorkflowRuns({\n      hostname,\n      owner,\n      repo,\n      pageSize,\n      page: page + 1,\n      branch: selectedBranch\n    });\n    setTotal(workflowRunsData.total_count);\n    return workflowRunsData.workflow_runs.map((run) => {\n      var _a, _b, _c, _d, _e, _f, _g, _h, _i;\n      return {\n        workflowName: (_a = run.name) != null ? _a : void 0,\n        message: (_b = run.head_commit) == null ? void 0 : _b.message,\n        id: `${run.id}`,\n        onReRunClick: async () => {\n          try {\n            await api.reRunWorkflow({\n              hostname,\n              owner,\n              repo,\n              runId: run.id\n            });\n          } catch (e) {\n            errorApi.post(\n              new Error(`Failed to rerun the workflow: ${e.message}`)\n            );\n          }\n        },\n        source: {\n          branchName: (_c = run.head_branch) != null ? _c : void 0,\n          commit: {\n            hash: (_d = run.head_commit) == null ? void 0 : _d.id,\n            url: (_g = (_e = run.head_repository) == null ? void 0 : _e.branches_url) == null ? void 0 : _g.replace(\n              \"{/branch}\",\n              (_f = run.head_branch) != null ? _f : \"\"\n            )\n          }\n        },\n        status: (_h = run.status) != null ? _h : void 0,\n        conclusion: (_i = run.conclusion) != null ? _i : void 0,\n        url: run.url,\n        githubUrl: run.html_url\n      };\n    });\n  }, [page, pageSize, repo, owner]);\n  return [\n    {\n      page,\n      pageSize,\n      loading,\n      runs,\n      branches,\n      defaultBranch,\n      projectName: `${owner}/${repo}`,\n      total,\n      error\n    },\n    {\n      runs,\n      setPage,\n      setPageSize,\n      retry\n    }\n  ];\n}\n\nconst useStyles$1 = makeStyles(\n  (theme) => createStyles({\n    card: {\n      border: `1px solid ${theme.palette.divider}`,\n      boxShadow: theme.shadows[2],\n      borderRadius: \"4px\",\n      overflow: \"visible\",\n      position: \"relative\",\n      margin: theme.spacing(4, 1, 1),\n      flex: \"1\",\n      minWidth: \"0px\"\n    },\n    externalLinkIcon: {\n      fontSize: \"inherit\",\n      verticalAlign: \"middle\"\n    },\n    bottomline: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      marginTop: \"-5px\"\n    },\n    pagination: {\n      width: \"100%\"\n    }\n  })\n);\nconst statusColors = {\n  skipped: \"warning\",\n  canceled: \"info\",\n  timed_out: \"error\",\n  failure: \"error\",\n  success: \"success\"\n};\nconst matchesSearchTerm = (run, searchTerm) => {\n  var _a, _b, _c, _d;\n  const lowerCaseSearchTerm = searchTerm.toLocaleLowerCase();\n  return ((_a = run.workflowName) == null ? void 0 : _a.toLocaleLowerCase().includes(lowerCaseSearchTerm)) || ((_b = run.source.branchName) == null ? void 0 : _b.toLocaleLowerCase().includes(lowerCaseSearchTerm)) || ((_c = run.status) == null ? void 0 : _c.toLocaleLowerCase().includes(lowerCaseSearchTerm)) || ((_d = run.id) == null ? void 0 : _d.toLocaleLowerCase().includes(lowerCaseSearchTerm));\n};\nconst WorkflowRunsCardView = ({\n  runs,\n  searchTerm,\n  loading,\n  onChangePageSize,\n  onChangePage,\n  page,\n  total,\n  pageSize\n}) => {\n  const classes = useStyles$1();\n  const routeLink = useRouteRef(buildRouteRef);\n  const filteredRuns = runs == null ? void 0 : runs.filter((run) => matchesSearchTerm(run, searchTerm));\n  return /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 3 }, filteredRuns && (runs == null ? void 0 : runs.length) !== 0 ? filteredRuns.map((run) => {\n    var _a, _b;\n    return /* @__PURE__ */ React.createElement(Grid, { key: run.id, item: true, container: true, xs: 12, sm: 4, md: 4, xl: 4 }, /* @__PURE__ */ React.createElement(Box, { className: classes.card }, /* @__PURE__ */ React.createElement(\n      Box,\n      {\n        display: \"flex\",\n        flexDirection: \"column\",\n        m: 3,\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      },\n      /* @__PURE__ */ React.createElement(Box, { pt: 2, sx: { width: \"100%\" }, textAlign: \"center\" }, /* @__PURE__ */ React.createElement(\n        Tooltip,\n        {\n          title: (_a = run.status) != null ? _a : \"No Status\",\n          placement: \"top-start\"\n        },\n        /* @__PURE__ */ React.createElement(\n          Alert,\n          {\n            variant: \"outlined\",\n            severity: statusColors[run.conclusion],\n            style: { alignItems: \"center\" }\n          },\n          /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, /* @__PURE__ */ React.createElement(Link, { to: routeLink({ id: run.id }) }, /* @__PURE__ */ React.createElement(Typography, { color: \"primary\", variant: \"h6\" }, run.workflowName)))\n        )\n      ), /* @__PURE__ */ React.createElement(Tooltip, { title: (_b = run.message) != null ? _b : \"No run message\" }, /* @__PURE__ */ React.createElement(\n        Typography,\n        {\n          variant: \"body2\",\n          component: \"span\",\n          style: { fontSize: \"smaller\" }\n        },\n        /* @__PURE__ */ React.createElement(\n          MarkdownContent,\n          {\n            content: `Commit ID : ${run.source.commit.hash}`\n          }\n        )\n      )), run.source.branchName && /* @__PURE__ */ React.createElement(\n        MarkdownContent,\n        {\n          content: `Branch : ${run.source.branchName}`\n        }\n      ), /* @__PURE__ */ React.createElement(\n        Chip,\n        {\n          key: run.id,\n          size: \"small\",\n          label: `Workflow ID : ${run.id}`\n        }\n      ), /* @__PURE__ */ React.createElement(\n        Chip,\n        {\n          size: \"small\",\n          label: /* @__PURE__ */ React.createElement(Box, { display: \"flex\", alignItems: \"center\" }, /* @__PURE__ */ React.createElement(\n            WorkflowRunStatus,\n            {\n              status: run.status,\n              conclusion: run.conclusion\n            }\n          ))\n        }\n      ), /* @__PURE__ */ React.createElement(\"div\", { className: classes.bottomline }, run.githubUrl && /* @__PURE__ */ React.createElement(Link, { to: run.githubUrl }, \"Workflow runs on GitHub\", \" \", /* @__PURE__ */ React.createElement(\n        ExternalLinkIcon,\n        {\n          className: classes.externalLinkIcon\n        }\n      )), /* @__PURE__ */ React.createElement(ButtonGroup, null, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Rerun workflow\" }, /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          onClick: run.onReRunClick,\n          style: { fontSize: \"12px\" }\n        },\n        /* @__PURE__ */ React.createElement(RetryIcon, null)\n      )))))\n    )));\n  }) : /* @__PURE__ */ React.createElement(Box, { p: 2 }, loading ? /* @__PURE__ */ React.createElement(CircularProgress, null) : \"No matching runs found.\"), /* @__PURE__ */ React.createElement(\"div\", { className: classes.pagination }, /* @__PURE__ */ React.createElement(\n    TablePagination,\n    {\n      component: \"div\",\n      count: total,\n      page,\n      rowsPerPage: pageSize,\n      onPageChange: (_, newPage) => onChangePage(newPage),\n      onRowsPerPageChange: (event) => onChangePageSize(parseInt(event.target.value, 6)),\n      labelRowsPerPage: \"Workflows per page\",\n      rowsPerPageOptions: [6, 12, 18, { label: \"All\", value: -1 }]\n    }\n  )));\n};\nconst WorkflowRunsCardSearch = ({\n  searchTerm,\n  handleSearch,\n  retry\n}) => {\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { flexGrow: 1 }), /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      type: \"search\",\n      label: \"Search\",\n      value: searchTerm,\n      onChange: handleSearch,\n      \"data-testid\": \"search-control\",\n      style: { marginRight: \"20px\" }\n    }\n  ), /* @__PURE__ */ React.createElement(ButtonGroup, null, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Reload workflow runs\" }, /* @__PURE__ */ React.createElement(IconButton, { onClick: retry }, /* @__PURE__ */ React.createElement(SyncIcon, null)))));\n};\nconst WorkflowRunsCard = ({ entity }) => {\n  const projectName = getProjectNameFromEntity(entity);\n  const hostname = getHostnameFromEntity(entity);\n  const [owner, repo] = (projectName != null ? projectName : \"/\").split(\"/\");\n  const [branch, setBranch] = useState(\"default\");\n  const [runs, setRuns] = useState([]);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const handleSearch = (event) => {\n    setSearchTerm(event.target.value);\n  };\n  const [\n    { runs: runsData, branches, defaultBranch, ...cardProps },\n    { retry, setPage, setPageSize }\n  ] = useWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    branch: branch === \"all\" ? void 0 : branch\n  });\n  const githubHost = hostname || \"github.com\";\n  const hasNoRuns = !cardProps.loading && !runsData;\n  const handleMenuChange = (event) => {\n    const selectedValue = event.target.value;\n    setBranch(selectedValue);\n    setPage(0);\n    retry();\n  };\n  useEffect(() => {\n    setRuns(runsData);\n  }, [runsData, branch]);\n  useEffect(() => {\n    setBranch(defaultBranch);\n  }, [defaultBranch]);\n  return /* @__PURE__ */ React.createElement(Grid, { item: true }, hasNoRuns ? /* @__PURE__ */ React.createElement(\n    EmptyState,\n    {\n      missing: \"data\",\n      title: \"No Workflow Data\",\n      description: \"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.\",\n      action: /* @__PURE__ */ React.createElement(\n        Button,\n        {\n          variant: \"contained\",\n          color: \"primary\",\n          href: `https://${githubHost}/${projectName}/actions/new`\n        },\n        \"Create new Workflow\"\n      )\n    }\n  ) : /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title: /* @__PURE__ */ React.createElement(Box, { display: \"flex\", alignItems: \"center\" }, /* @__PURE__ */ React.createElement(GitHubIcon, null), /* @__PURE__ */ React.createElement(Box, { mr: 1 }), /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, projectName), /* @__PURE__ */ React.createElement(\n        Select,\n        {\n          value: branch,\n          key: branch,\n          label: \"Branch\",\n          onChange: handleMenuChange,\n          \"data-testid\": \"menu-control\",\n          style: {\n            marginLeft: \"30px\",\n            marginRight: \"20px\",\n            width: \"230px\"\n          }\n        },\n        branches.map((branchItem) => /* @__PURE__ */ React.createElement(MenuItem, { key: branchItem.name, value: branchItem.name }, branchItem.name === defaultBranch ? /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", component: \"span\" }, branchItem.name, \" \", /* @__PURE__ */ React.createElement(\n          Typography,\n          {\n            variant: \"body2\",\n            component: \"span\",\n            style: { color: \"lightgray\", fontSize: \"x-small\" }\n          },\n          \"(default)\"\n        )) : branchItem.name)),\n        /* @__PURE__ */ React.createElement(\n          MenuItem,\n          {\n            value: \"all\",\n            key: \"all\",\n            style: { color: \"lightGrey\", fontSize: \"small\" }\n          },\n          \"select all branches\"\n        )\n      ), /* @__PURE__ */ React.createElement(\n        WorkflowRunsCardSearch,\n        {\n          searchTerm,\n          handleSearch,\n          retry\n        }\n      ))\n    },\n    /* @__PURE__ */ React.createElement(\n      WorkflowRunsCardView,\n      {\n        runs,\n        loading: cardProps.loading,\n        onChangePageSize: setPageSize,\n        onChangePage: setPage,\n        page: cardProps.page,\n        total: cardProps.total,\n        pageSize: cardProps.pageSize,\n        searchTerm,\n        projectName\n      }\n    )\n  ));\n};\n\nconst generatedColumns = [\n  {\n    title: \"ID\",\n    field: \"id\",\n    type: \"numeric\",\n    width: \"150px\"\n  },\n  {\n    title: \"Message\",\n    field: \"message\",\n    highlight: true,\n    render: (row) => {\n      const LinkWrapper = () => {\n        const routeLink = useRouteRef(buildRouteRef);\n        return /* @__PURE__ */ React.createElement(Link, { component: Link$1, to: routeLink({ id: row.id }) }, row.message);\n      };\n      return /* @__PURE__ */ React.createElement(LinkWrapper, null);\n    }\n  },\n  {\n    title: \"Source\",\n    render: (row) => {\n      var _a, _b;\n      return /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", noWrap: true }, /* @__PURE__ */ React.createElement(Typography, { paragraph: true, variant: \"body2\" }, (_a = row.source) == null ? void 0 : _a.branchName), /* @__PURE__ */ React.createElement(Typography, { paragraph: true, variant: \"body2\" }, (_b = row.source) == null ? void 0 : _b.commit.hash));\n    }\n  },\n  {\n    title: \"Workflow\",\n    field: \"workflowName\"\n  },\n  {\n    title: \"Status\",\n    customSort: (d1, d2) => {\n      return getStatusDescription(d1).localeCompare(getStatusDescription(d2));\n    },\n    render: (row) => /* @__PURE__ */ React.createElement(Box, { display: \"flex\", alignItems: \"center\" }, /* @__PURE__ */ React.createElement(WorkflowRunStatus, { status: row.status, conclusion: row.conclusion }))\n  },\n  {\n    title: \"Actions\",\n    render: (row) => /* @__PURE__ */ React.createElement(Tooltip, { title: \"Rerun workflow\" }, /* @__PURE__ */ React.createElement(IconButton, { onClick: row.onReRunClick }, /* @__PURE__ */ React.createElement(RetryIcon, null))),\n    width: \"10%\"\n  }\n];\nconst WorkflowRunsTableView = ({\n  projectName,\n  loading,\n  pageSize,\n  page,\n  retry,\n  runs,\n  onChangePage,\n  onChangePageSize,\n  total\n}) => {\n  return /* @__PURE__ */ React.createElement(\n    Table$1,\n    {\n      isLoading: loading,\n      options: { paging: true, pageSize, padding: \"dense\" },\n      totalCount: total,\n      page,\n      actions: [\n        {\n          icon: () => /* @__PURE__ */ React.createElement(SyncIcon, null),\n          tooltip: \"Reload workflow runs\",\n          isFreeAction: true,\n          onClick: () => retry()\n        }\n      ],\n      data: runs != null ? runs : [],\n      onPageChange: onChangePage,\n      onRowsPerPageChange: onChangePageSize,\n      style: { width: \"100%\" },\n      title: /* @__PURE__ */ React.createElement(Box, { display: \"flex\", alignItems: \"center\" }, /* @__PURE__ */ React.createElement(GitHubIcon, null), /* @__PURE__ */ React.createElement(Box, { mr: 1 }), /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, projectName)),\n      columns: generatedColumns\n    }\n  );\n};\nconst WorkflowRunsTable = ({\n  entity,\n  branch\n}) => {\n  const projectName = getProjectNameFromEntity(entity);\n  const hostname = getHostnameFromEntity(entity);\n  const [owner, repo] = (projectName != null ? projectName : \"/\").split(\"/\");\n  const [{ runs, ...tableProps }, { retry, setPage, setPageSize }] = useWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    branch\n  });\n  const githubHost = hostname || \"github.com\";\n  const hasNoRuns = !tableProps.loading && !runs;\n  return hasNoRuns ? /* @__PURE__ */ React.createElement(\n    EmptyState,\n    {\n      missing: \"data\",\n      title: \"No Workflow Data\",\n      description: \"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.\",\n      action: /* @__PURE__ */ React.createElement(\n        Button,\n        {\n          variant: \"contained\",\n          color: \"primary\",\n          href: `https://${githubHost}/${projectName}/actions/new`\n        },\n        \"Create new Workflow\"\n      )\n    }\n  ) : /* @__PURE__ */ React.createElement(\n    WorkflowRunsTableView,\n    {\n      ...tableProps,\n      runs,\n      loading: tableProps.loading,\n      retry,\n      onChangePageSize: setPageSize,\n      onChangePage: setPage\n    }\n  );\n};\n\nconst isGithubActionsAvailable = (entity) => {\n  var _a;\n  return Boolean((_a = entity.metadata.annotations) == null ? void 0 : _a[GITHUB_ACTIONS_ANNOTATION]);\n};\nconst Router = (props) => {\n  const { view = \"table\" } = props;\n  const { entity } = useEntity();\n  if (!isGithubActionsAvailable(entity)) {\n    return /* @__PURE__ */ React.createElement(MissingAnnotationEmptyState, { annotation: GITHUB_ACTIONS_ANNOTATION });\n  }\n  const workflowRunsComponent = view === \"cards\" ? /* @__PURE__ */ React.createElement(WorkflowRunsCard, { entity }) : /* @__PURE__ */ React.createElement(WorkflowRunsTable, { entity });\n  return /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, { path: \"/\", element: workflowRunsComponent }), /* @__PURE__ */ React.createElement(\n    Route,\n    {\n      path: `${buildRouteRef.path}`,\n      element: /* @__PURE__ */ React.createElement(WorkflowRunDetails, { entity })\n    }\n  ));\n};\n\nvar Router$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  isGithubActionsAvailable: isGithubActionsAvailable,\n  Router: Router\n});\n\nconst useStyles = makeStyles({\n  externalLinkIcon: {\n    fontSize: \"inherit\",\n    verticalAlign: \"bottom\"\n  }\n});\nconst WidgetContent = (props) => {\n  var _a;\n  const { error, loading, lastRun, branch } = props;\n  const classes = useStyles();\n  if (error)\n    return /* @__PURE__ */ React.createElement(Typography, null, \"Couldn't fetch latest \", branch, \" run\");\n  if (loading)\n    return /* @__PURE__ */ React.createElement(LinearProgress, null);\n  return /* @__PURE__ */ React.createElement(\n    StructuredMetadataTable,\n    {\n      metadata: {\n        status: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n          WorkflowRunStatus,\n          {\n            status: lastRun.status,\n            conclusion: lastRun.conclusion\n          }\n        )),\n        message: lastRun.message,\n        url: /* @__PURE__ */ React.createElement(Link, { to: (_a = lastRun.githubUrl) != null ? _a : \"\" }, \"See more on GitHub\", \" \", /* @__PURE__ */ React.createElement(ExternalLinkIcon, { className: classes.externalLinkIcon }))\n      }\n    }\n  );\n};\nconst LatestWorkflowRunCard = (props) => {\n  var _a, _b, _c;\n  const { branch = \"master\", variant } = props;\n  const { entity } = useEntity();\n  const errorApi = useApi(errorApiRef);\n  const hostname = getHostnameFromEntity(entity);\n  const [owner, repo] = ((_b = (_a = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _a[GITHUB_ACTIONS_ANNOTATION]) != null ? _b : \"/\").split(\"/\");\n  const [{ runs, loading, error }] = useWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    branch\n  });\n  const lastRun = (_c = runs == null ? void 0 : runs[0]) != null ? _c : {};\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: `Last ${branch} build`, variant }, /* @__PURE__ */ React.createElement(\n    WidgetContent,\n    {\n      error,\n      loading,\n      branch,\n      lastRun\n    }\n  ));\n};\nconst LatestWorkflowsForBranchCard = (props) => {\n  const { branch = \"master\", variant } = props;\n  const { entity } = useEntity();\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: `Last ${branch} build`, variant }, /* @__PURE__ */ React.createElement(WorkflowRunsTable, { branch, entity }));\n};\n\nconst firstLine = (message) => message.split(\"\\n\")[0];\nconst RecentWorkflowRunsCard = (props) => {\n  var _a, _b;\n  const { branch, dense = false, limit = 5, variant } = props;\n  const { entity } = useEntity();\n  const errorApi = useApi(errorApiRef);\n  const hostname = getHostnameFromEntity(entity);\n  const [owner, repo] = ((_b = (_a = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _a[GITHUB_ACTIONS_ANNOTATION]) != null ? _b : \"/\").split(\"/\");\n  const [{ runs = [], loading, error }] = useWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    branch,\n    initialPageSize: limit\n  });\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  const githubHost = hostname || \"github.com\";\n  const routeLink = useRouteRef(buildRouteRef);\n  if (error) {\n    return /* @__PURE__ */ React.createElement(ErrorPanel, { title: error.message, error });\n  }\n  return /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title: \"Recent Workflow Runs\",\n      subheader: branch ? `Branch: ${branch}` : \"All Branches\",\n      noPadding: true,\n      variant\n    },\n    !runs.length ? /* @__PURE__ */ React.createElement(\"div\", { style: { textAlign: \"center\" } }, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"This component has GitHub Actions enabled, but no workflows were found.\"), /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\" }, /* @__PURE__ */ React.createElement(Link, { to: `https://${githubHost}/${owner}/${repo}/actions/new` }, \"Create a new workflow\"))) : /* @__PURE__ */ React.createElement(\n      Table$1,\n      {\n        isLoading: loading,\n        options: {\n          search: false,\n          paging: false,\n          padding: dense ? \"dense\" : \"default\",\n          toolbar: false\n        },\n        columns: [\n          {\n            title: \"Commit Message\",\n            field: \"message\",\n            render: (data) => {\n              var _a2;\n              return /* @__PURE__ */ React.createElement(Link, { component: Link$1, to: routeLink({ id: data.id }) }, firstLine((_a2 = data.message) != null ? _a2 : \"\"));\n            }\n          },\n          { title: \"Branch\", field: \"source.branchName\" },\n          { title: \"Status\", field: \"status\", render: WorkflowRunStatus }\n        ],\n        data: runs\n      }\n    )\n  );\n};\n\nexport { BuildStatus, EntityGithubActionsContent, EntityLatestGithubActionRunCard, EntityLatestGithubActionsForBranchCard, EntityRecentGithubActionsRunsCard, GITHUB_ACTIONS_ANNOTATION, GithubActionsClient, LatestWorkflowRunCard, LatestWorkflowsForBranchCard, RecentWorkflowRunsCard, Router, githubActionsApiRef, githubActionsPlugin, isGithubActionsAvailable, isGithubActionsAvailable as isPluginApplicableToEntity, githubActionsPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","import React, { Suspense } from 'react';\nimport { Dialog, DialogTitle, DialogContent, DialogActions, Button, IconButton } from '@material-ui/core';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { InfoCard } from '@backstage/core-components';\nimport { createReactExtension, useApp } from '@backstage/core-plugin-api';\n\nconst SettingsModal = (props) => {\n  const { open, close, componentName, children } = props;\n  return /* @__PURE__ */ React.createElement(Dialog, { open, onClose: () => close() }, /* @__PURE__ */ React.createElement(DialogTitle, null, componentName ? `Settings - ${componentName}` : \"Settings\"), /* @__PURE__ */ React.createElement(DialogContent, null, children), /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(Button, { onClick: () => close(), color: \"primary\", variant: \"contained\" }, \"Close\")));\n};\n\nfunction createCardExtension(options) {\n  const { title, components, name, description, layout, settings } = options;\n  const isCustomizable = (settings == null ? void 0 : settings.schema) !== void 0;\n  return createReactExtension({\n    name,\n    data: { title, description, \"home.widget.config\": { layout, settings } },\n    component: {\n      lazy: () => components().then((componentParts) => {\n        return (props) => {\n          return /* @__PURE__ */ React.createElement(\n            CardExtension,\n            {\n              ...props,\n              ...componentParts,\n              title: props.title || title,\n              isCustomizable\n            }\n          );\n        };\n      })\n    }\n  });\n}\nfunction CardExtension(props) {\n  const {\n    Renderer,\n    Content,\n    Settings,\n    Actions,\n    ContextProvider,\n    isCustomizable,\n    title,\n    ...childProps\n  } = props;\n  const app = useApp();\n  const { Progress } = app.getComponents();\n  const [settingsOpen, setSettingsOpen] = React.useState(false);\n  if (Renderer) {\n    return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(\n      Renderer,\n      {\n        ...title && { title },\n        ...{\n          Content,\n          ...Actions ? { Actions } : {},\n          ...Settings && !isCustomizable ? { Settings } : {},\n          ...ContextProvider ? { ContextProvider } : {},\n          ...childProps\n        }\n      }\n    ));\n  }\n  const cardProps = {\n    ...title && { title },\n    ...Settings && !isCustomizable ? {\n      action: /* @__PURE__ */ React.createElement(IconButton, { onClick: () => setSettingsOpen(true) }, /* @__PURE__ */ React.createElement(SettingsIcon, null, \"Settings\"))\n    } : {},\n    ...Actions ? {\n      actions: /* @__PURE__ */ React.createElement(Actions, null)\n    } : {}\n  };\n  const innerContent = /* @__PURE__ */ React.createElement(InfoCard, { ...cardProps }, Settings && !isCustomizable && /* @__PURE__ */ React.createElement(\n    SettingsModal,\n    {\n      open: settingsOpen,\n      componentName: title,\n      close: () => setSettingsOpen(false)\n    },\n    /* @__PURE__ */ React.createElement(Settings, null)\n  ), /* @__PURE__ */ React.createElement(Content, { ...childProps }));\n  return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, ContextProvider ? /* @__PURE__ */ React.createElement(ContextProvider, { ...childProps }, innerContent) : innerContent);\n}\n\nexport { SettingsModal, createCardExtension };\n//# sourceMappingURL=index.esm.js.map\n","import React, { useMemo, useCallback, useEffect } from 'react';\nimport { WidthProvider, Responsive } from 'react-grid-layout';\nimport { createApiRef, useElementFilter, useApi, storageApiRef, getComponentData } from '@backstage/core-plugin-api';\nimport 'react-grid-layout/css/styles.css';\nimport 'react-resizable/css/styles.css';\nimport { makeStyles, createStyles, Dialog, DialogContent, Grid, Tooltip, DialogTitle, ListItemAvatar, useTheme } from '@material-ui/core';\nimport { compact } from 'lodash';\nimport useObservable from 'react-use/lib/useObservable';\nimport { ContentHeader, ErrorBoundary } from '@backstage/core-components';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { withTheme } from '@rjsf/core';\nimport { Theme } from '@rjsf/material-ui';\nimport validator from '@rjsf/validator-ajv8';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport AddIcon from '@material-ui/icons/Add';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Button from '@material-ui/core/Button';\nimport SaveIcon from '@material-ui/icons/Save';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport { z } from 'zod';\nimport { useLocation } from 'react-router-dom';\nimport '@backstage/core-app-api';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\n\nconst isOperator = (s) => {\n  return [\"<\", \"<=\", \"==\", \"!=\", \">\", \">=\", \"contains\"].includes(s);\n};\nconst visitsApiRef = createApiRef({\n  id: \"homepage.visits\"\n});\n\nconst Form = withTheme(Theme);\nconst useStyles$2 = makeStyles(\n  (theme) => createStyles({\n    iconGrid: {\n      height: \"100%\",\n      \"& *\": {\n        padding: 0\n      }\n    },\n    settingsOverlay: {\n      position: \"absolute\",\n      backgroundColor: \"rgba(40, 40, 40, 0.93)\",\n      width: \"100%\",\n      height: \"100%\",\n      top: 0,\n      left: 0,\n      padding: theme.spacing(2),\n      color: \"white\"\n    }\n  })\n);\nconst WidgetSettingsOverlay = (props) => {\n  const { id, widget, settings, handleRemove, handleSettingsSave, deletable } = props;\n  const [settingsDialogOpen, setSettingsDialogOpen] = React.useState(false);\n  const styles = useStyles$2();\n  return /* @__PURE__ */ React.createElement(\"div\", { className: styles.settingsOverlay }, widget.settingsSchema && /* @__PURE__ */ React.createElement(\n    Dialog,\n    {\n      open: settingsDialogOpen,\n      className: \"widgetSettingsDialog\",\n      onClose: () => setSettingsDialogOpen(false)\n    },\n    /* @__PURE__ */ React.createElement(DialogContent, null, /* @__PURE__ */ React.createElement(\n      Form,\n      {\n        validator,\n        showErrorList: false,\n        schema: widget.settingsSchema,\n        uiSchema: widget.uiSchema,\n        noHtml5Validate: true,\n        formData: settings,\n        formContext: { settings },\n        onSubmit: ({ formData, errors }) => {\n          if (errors.length === 0) {\n            handleSettingsSave(id, formData);\n            setSettingsDialogOpen(false);\n          }\n        },\n        experimental_defaultFormStateBehavior: {\n          allOf: \"populateDefaults\"\n        }\n      }\n    ))\n  ), /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      className: styles.iconGrid,\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    widget.settingsSchema && /* @__PURE__ */ React.createElement(Grid, { item: true, className: \"overlayGridItem\" }, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Edit settings\" }, /* @__PURE__ */ React.createElement(\n      IconButton,\n      {\n        color: \"primary\",\n        onClick: () => setSettingsDialogOpen(true)\n      },\n      /* @__PURE__ */ React.createElement(SettingsIcon, { fontSize: \"large\" })\n    ))),\n    deletable !== false && /* @__PURE__ */ React.createElement(Grid, { item: true, className: \"overlayGridItem\" }, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Delete widget\" }, /* @__PURE__ */ React.createElement(IconButton, { color: \"secondary\", onClick: () => handleRemove(id) }, /* @__PURE__ */ React.createElement(DeleteIcon, { fontSize: \"large\" }))))\n  ));\n};\n\nconst getTitle = (widget) => {\n  return widget.title || widget.name;\n};\nconst AddWidgetDialog = (props) => {\n  const { widgets, handleAdd } = props;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogTitle, null, \"Add new widget to dashboard\"), /* @__PURE__ */ React.createElement(DialogContent, null, /* @__PURE__ */ React.createElement(List, { dense: true }, widgets.map((widget) => {\n    return /* @__PURE__ */ React.createElement(\n      ListItem,\n      {\n        key: widget.name,\n        button: true,\n        onClick: () => handleAdd(widget)\n      },\n      /* @__PURE__ */ React.createElement(ListItemAvatar, null, /* @__PURE__ */ React.createElement(AddIcon, null)),\n      /* @__PURE__ */ React.createElement(\n        ListItemText,\n        {\n          secondary: widget.description && /* @__PURE__ */ React.createElement(\n            Typography,\n            {\n              component: \"span\",\n              variant: \"caption\",\n              color: \"textPrimary\"\n            },\n            widget.description\n          ),\n          primary: /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\", color: \"textPrimary\" }, getTitle(widget))\n        }\n      )\n    );\n  }))));\n};\n\nconst useStyles$1 = makeStyles(\n  (theme) => createStyles({\n    contentHeaderBtn: {\n      marginLeft: theme.spacing(2)\n    },\n    widgetWrapper: {\n      \"& > *:first-child\": {\n        width: \"100%\",\n        height: \"100%\"\n      }\n    }\n  })\n);\nconst CustomHomepageButtons = (props) => {\n  const {\n    editMode,\n    numWidgets,\n    clearLayout,\n    setAddWidgetDialogOpen,\n    changeEditMode,\n    defaultConfigAvailable,\n    restoreDefault\n  } = props;\n  const styles = useStyles$1();\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, !editMode && numWidgets > 0 ? /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: () => changeEditMode(true),\n      size: \"small\",\n      startIcon: /* @__PURE__ */ React.createElement(EditIcon, null)\n    },\n    \"Edit\"\n  ) : /* @__PURE__ */ React.createElement(React.Fragment, null, defaultConfigAvailable && /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      variant: \"contained\",\n      className: styles.contentHeaderBtn,\n      onClick: restoreDefault,\n      size: \"small\",\n      startIcon: /* @__PURE__ */ React.createElement(CancelIcon, null)\n    },\n    \"Restore defaults\"\n  ), numWidgets > 0 && /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      variant: \"contained\",\n      color: \"secondary\",\n      className: styles.contentHeaderBtn,\n      onClick: clearLayout,\n      size: \"small\",\n      startIcon: /* @__PURE__ */ React.createElement(DeleteIcon, null)\n    },\n    \"Clear all\"\n  ), /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      variant: \"contained\",\n      className: styles.contentHeaderBtn,\n      onClick: () => setAddWidgetDialogOpen(true),\n      size: \"small\",\n      startIcon: /* @__PURE__ */ React.createElement(AddIcon, null)\n    },\n    \"Add widget\"\n  ), numWidgets > 0 && /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      className: styles.contentHeaderBtn,\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: () => changeEditMode(false),\n      size: \"small\",\n      startIcon: /* @__PURE__ */ React.createElement(SaveIcon, null)\n    },\n    \"Save\"\n  )));\n};\n\nconst RSJFTypeSchema = z.any();\nconst RSJFTypeUiSchema = z.any();\nconst ReactElementSchema = z.any();\nconst LayoutSchema = z.any();\nconst LayoutConfigurationSchema = z.object({\n  component: ReactElementSchema,\n  x: z.number().nonnegative(\"x must be positive number\"),\n  y: z.number().nonnegative(\"y must be positive number\"),\n  width: z.number().positive(\"width must be positive number\"),\n  height: z.number().positive(\"height must be positive number\"),\n  movable: z.boolean().optional(),\n  deletable: z.boolean().optional(),\n  resizable: z.boolean().optional()\n});\nconst WidgetSchema = z.object({\n  name: z.string(),\n  title: z.string().optional(),\n  description: z.string().optional(),\n  component: ReactElementSchema,\n  width: z.number().positive(\"width must be positive number\").optional(),\n  height: z.number().positive(\"height must be positive number\").optional(),\n  minWidth: z.number().positive(\"minWidth must be positive number\").optional(),\n  maxWidth: z.number().positive(\"maxWidth must be positive number\").optional(),\n  minHeight: z.number().positive(\"minHeight must be positive number\").optional(),\n  maxHeight: z.number().positive(\"maxHeight must be positive number\").optional(),\n  settingsSchema: RSJFTypeSchema.optional(),\n  uiSchema: RSJFTypeUiSchema.optional(),\n  movable: z.boolean().optional(),\n  deletable: z.boolean().optional(),\n  resizable: z.boolean().optional()\n});\nconst GridWidgetSchema = z.object({\n  id: z.string(),\n  layout: LayoutSchema,\n  settings: z.record(z.string(), z.any()),\n  movable: z.boolean().optional(),\n  deletable: z.boolean().optional(),\n  resizable: z.boolean().optional()\n});\nconst CustomHomepageGridStateV1Schema = z.object({\n  version: z.literal(1),\n  pages: z.record(z.string(), z.array(GridWidgetSchema))\n});\n\nconst ResponsiveGrid = WidthProvider(Responsive);\nconst useStyles = makeStyles(\n  (theme) => createStyles({\n    responsiveGrid: {\n      \"& .react-grid-item > .react-resizable-handle:after\": {\n        position: \"absolute\",\n        content: '\"\"',\n        borderStyle: \"solid\",\n        borderWidth: \"0 0 20px 20px\",\n        borderColor: `transparent transparent ${theme.palette.primary.light} transparent`\n      }\n    },\n    contentHeaderBtn: {\n      marginLeft: theme.spacing(2)\n    },\n    widgetWrapper: {\n      '& > div[class*=\"MuiCard-root\"]': {\n        width: \"100%\",\n        height: \"100%\"\n      },\n      '& div[class*=\"MuiCardContent-root\"]': {\n        overflow: \"auto\"\n      },\n      \"& + .react-grid-placeholder\": {\n        backgroundColor: theme.palette.primary.light\n      },\n      \"&.edit > :active\": {\n        cursor: \"move\"\n      }\n    }\n  })\n);\nfunction useHomeStorage(defaultWidgets) {\n  const key = \"home\";\n  const storageApi = useApi(storageApiRef).forBucket(\"home.customHomepage\");\n  const setWidgets = useCallback(\n    (value) => {\n      const grid = {\n        version: 1,\n        pages: {\n          default: value\n        }\n      };\n      storageApi.set(key, JSON.stringify(grid));\n    },\n    [key, storageApi]\n  );\n  const homeSnapshot = useObservable(\n    storageApi.observe$(key),\n    storageApi.snapshot(key)\n  );\n  const widgets = useMemo(() => {\n    if (homeSnapshot.presence === \"absent\") {\n      return defaultWidgets;\n    }\n    try {\n      const grid = JSON.parse(homeSnapshot.value);\n      return CustomHomepageGridStateV1Schema.parse(grid).pages.default;\n    } catch (e) {\n      return defaultWidgets;\n    }\n  }, [homeSnapshot, defaultWidgets]);\n  return [widgets, setWidgets];\n}\nconst convertConfigToDefaultWidgets = (config, availableWidgets) => {\n  const ret = config.map((conf, i) => {\n    var _a, _b;\n    const c = LayoutConfigurationSchema.parse(conf);\n    const name = React.isValidElement(c.component) ? getComponentData(c.component, \"core.extensionName\") : c.component;\n    if (!name) {\n      return null;\n    }\n    const widget = availableWidgets.find((w) => w.name === name);\n    if (!widget) {\n      return null;\n    }\n    const widgetId = `${widget.name}__${i}${Math.random().toString(36).slice(2)}`;\n    return {\n      id: widgetId,\n      layout: {\n        i: widgetId,\n        x: c.x,\n        y: c.y,\n        w: Math.min((_a = widget.maxWidth) != null ? _a : Number.MAX_VALUE, c.width),\n        h: Math.min((_b = widget.maxHeight) != null ? _b : Number.MAX_VALUE, c.height),\n        minW: widget.minWidth,\n        maxW: widget.maxWidth,\n        minH: widget.minHeight,\n        maxH: widget.maxHeight,\n        isDraggable: false,\n        isResizable: false\n      },\n      settings: {},\n      movable: conf.movable,\n      deletable: conf.deletable,\n      resizable: conf.resizable\n    };\n  });\n  return compact(ret);\n};\nconst availableWidgetsFilter = (elements) => {\n  return elements.selectByComponentData({\n    key: \"core.extensionName\"\n  }).getElements().flatMap((elem) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n;\n    const config = getComponentData(elem, \"home.widget.config\");\n    return [\n      WidgetSchema.parse({\n        component: elem,\n        name: getComponentData(elem, \"core.extensionName\"),\n        title: getComponentData(elem, \"title\"),\n        description: getComponentData(elem, \"description\"),\n        settingsSchema: (_a = config == null ? void 0 : config.settings) == null ? void 0 : _a.schema,\n        uiSchema: (_b = config == null ? void 0 : config.settings) == null ? void 0 : _b.uiSchema,\n        width: (_d = (_c = config == null ? void 0 : config.layout) == null ? void 0 : _c.width) == null ? void 0 : _d.defaultColumns,\n        minWidth: (_f = (_e = config == null ? void 0 : config.layout) == null ? void 0 : _e.width) == null ? void 0 : _f.minColumns,\n        maxWidth: (_h = (_g = config == null ? void 0 : config.layout) == null ? void 0 : _g.width) == null ? void 0 : _h.maxColumns,\n        height: (_j = (_i = config == null ? void 0 : config.layout) == null ? void 0 : _i.height) == null ? void 0 : _j.defaultRows,\n        minHeight: (_l = (_k = config == null ? void 0 : config.layout) == null ? void 0 : _k.height) == null ? void 0 : _l.minRows,\n        maxHeight: (_n = (_m = config == null ? void 0 : config.layout) == null ? void 0 : _m.height) == null ? void 0 : _n.maxRows\n      })\n    ];\n  });\n};\nconst CustomHomepageGrid = (props) => {\n  var _a;\n  const styles = useStyles();\n  const theme = useTheme();\n  const availableWidgets = useElementFilter(\n    props.children,\n    availableWidgetsFilter,\n    [props]\n  );\n  const defaultLayout = useMemo(() => {\n    return props.config ? convertConfigToDefaultWidgets(props.config, availableWidgets) : [];\n  }, [props.config, availableWidgets]);\n  const [widgets, setWidgets] = useHomeStorage(defaultLayout);\n  const [addWidgetDialogOpen, setAddWidgetDialogOpen] = React.useState(false);\n  const editModeOn = widgets.find((w) => w.layout.isResizable) !== void 0;\n  const [editMode, setEditMode] = React.useState(editModeOn);\n  const getWidgetByName = (name) => {\n    return availableWidgets.find((widget) => widget.name === name);\n  };\n  const getWidgetNameFromKey = (key) => {\n    return key.split(\"__\")[0];\n  };\n  const handleAdd = (widget) => {\n    var _a2, _b, _c, _d;\n    const widgetId = `${widget.name}__${widgets.length + 1}${Math.random().toString(36).slice(2)}`;\n    setWidgets([\n      ...widgets,\n      {\n        id: widgetId,\n        layout: {\n          i: widgetId,\n          x: 0,\n          y: Math.max(...widgets.map((w) => w.layout.y + w.layout.h)) + 1,\n          w: Math.min((_a2 = widget.maxWidth) != null ? _a2 : Number.MAX_VALUE, (_b = widget.width) != null ? _b : 12),\n          h: Math.min((_c = widget.maxHeight) != null ? _c : Number.MAX_VALUE, (_d = widget.height) != null ? _d : 4),\n          minW: widget.minWidth,\n          maxW: widget.maxWidth,\n          minH: widget.minHeight,\n          maxH: widget.maxHeight,\n          isResizable: editMode,\n          isDraggable: editMode\n        },\n        settings: {},\n        movable: widget.movable,\n        deletable: widget.deletable,\n        resizable: widget.resizable\n      }\n    ]);\n    setAddWidgetDialogOpen(false);\n  };\n  const handleRemove = (widgetId) => {\n    setWidgets(widgets.filter((w) => w.id !== widgetId));\n  };\n  const handleSettingsSave = (widgetId, widgetSettings) => {\n    const idx = widgets.findIndex((w) => w.id === widgetId);\n    if (idx >= 0) {\n      const widget = widgets[idx];\n      widget.settings = widgetSettings;\n      widgets[idx] = widget;\n      setWidgets(widgets);\n    }\n  };\n  const clearLayout = () => {\n    setWidgets([]);\n  };\n  const changeEditMode = (mode) => {\n    setEditMode(mode);\n    setWidgets(\n      widgets.map((w) => {\n        const resizable = w.resizable === false ? false : mode;\n        const movable = w.movable === false ? false : mode;\n        return {\n          ...w,\n          layout: { ...w.layout, isDraggable: movable, isResizable: resizable }\n        };\n      })\n    );\n  };\n  const handleLayoutChange = (newLayout, _) => {\n    if (editMode) {\n      const newWidgets = newLayout.map((l) => {\n        const widget = widgets.find((w) => w.id === l.i);\n        return {\n          ...widget,\n          layout: l\n        };\n      });\n      setWidgets(newWidgets);\n    }\n  };\n  const handleRestoreDefaultConfig = () => {\n    setWidgets(\n      defaultLayout.map((w) => {\n        const resizable = w.resizable === false ? false : editMode;\n        const movable = w.movable === false ? false : editMode;\n        return {\n          ...w,\n          layout: {\n            ...w.layout,\n            isDraggable: movable,\n            isResizable: resizable\n          }\n        };\n      })\n    );\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ContentHeader, { title: \"\" }, /* @__PURE__ */ React.createElement(\n    CustomHomepageButtons,\n    {\n      editMode,\n      numWidgets: widgets.length,\n      clearLayout,\n      setAddWidgetDialogOpen,\n      changeEditMode,\n      defaultConfigAvailable: props.config !== void 0,\n      restoreDefault: handleRestoreDefaultConfig\n    }\n  )), /* @__PURE__ */ React.createElement(\n    Dialog,\n    {\n      open: addWidgetDialogOpen,\n      onClose: () => setAddWidgetDialogOpen(false)\n    },\n    /* @__PURE__ */ React.createElement(AddWidgetDialog, { widgets: availableWidgets, handleAdd })\n  ), !editMode && widgets.length === 0 && /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\", align: \"center\" }, \"No widgets added. Start by clicking the 'Add widget' button.\"), /* @__PURE__ */ React.createElement(\n    ResponsiveGrid,\n    {\n      className: styles.responsiveGrid,\n      measureBeforeMount: true,\n      compactType: props.compactType,\n      style: props.style,\n      allowOverlap: props.allowOverlap,\n      preventCollision: props.preventCollision,\n      draggableCancel: \".overlayGridItem,.widgetSettingsDialog,.disabled\",\n      containerPadding: props.containerPadding,\n      margin: props.containerMargin,\n      breakpoints: props.breakpoints ? props.breakpoints : theme.breakpoints.values,\n      cols: props.cols ? props.cols : { xl: 12, lg: 12, md: 10, sm: 6, xs: 4, xxs: 2 },\n      rowHeight: (_a = props.rowHeight) != null ? _a : 60,\n      onLayoutChange: handleLayoutChange,\n      layouts: { xl: widgets.map((w) => w.layout) }\n    },\n    widgets.map((w) => {\n      var _a2;\n      const l = w.layout;\n      const widgetName = getWidgetNameFromKey(l.i);\n      const widget = getWidgetByName(widgetName);\n      if (!widget || !widget.component) {\n        return null;\n      }\n      const widgetProps = {\n        ...widget.component.props,\n        ...(_a2 = w.settings) != null ? _a2 : {}\n      };\n      return /* @__PURE__ */ React.createElement(\n        \"div\",\n        {\n          key: l.i,\n          className: `${styles.widgetWrapper} ${editMode && \"edit\"} ${w.movable === false && \"disabled\"}`\n        },\n        /* @__PURE__ */ React.createElement(ErrorBoundary, null, /* @__PURE__ */ React.createElement(widget.component.type, { ...widgetProps })),\n        editMode && /* @__PURE__ */ React.createElement(\n          WidgetSettingsOverlay,\n          {\n            id: l.i,\n            widget,\n            handleRemove,\n            handleSettingsSave,\n            settings: w.settings,\n            deletable: w.deletable\n          }\n        )\n      );\n    })\n  ));\n};\n\nconst getToEntityRef = ({\n  rootPath = \"catalog\",\n  stringifyEntityRefImpl = stringifyEntityRef\n} = {}) => ({ pathname }) => {\n  const regex = new RegExp(\n    `^/${rootPath}/(?<namespace>[^/]+)/(?<kind>[^/]+)/(?<name>[^/]+)`\n  );\n  const result = regex.exec(pathname);\n  if (!result || !(result == null ? void 0 : result.groups))\n    return void 0;\n  const entity = {\n    namespace: result.groups.namespace,\n    kind: result.groups.kind,\n    name: result.groups.name\n  };\n  return stringifyEntityRefImpl(entity);\n};\nconst getVisitName = ({ rootPath = \"catalog\", document = global.document } = {}) => ({ pathname }) => {\n  const regex = new RegExp(\n    `^/${rootPath}/(?<namespace>[^/]+)/(?<kind>[^/]+)/(?<name>[^/]+)`\n  );\n  let result = regex.exec(pathname);\n  if (result && (result == null ? void 0 : result.groups))\n    return result.groups.name;\n  result = /^\\/(?<name>[^\\/]+)$/.exec(pathname);\n  if (result && (result == null ? void 0 : result.groups))\n    return result.groups.name;\n  return document.title;\n};\nconst VisitListener = ({\n  children,\n  toEntityRef,\n  visitName\n}) => {\n  const visitsApi = useApi(visitsApiRef);\n  const { pathname } = useLocation();\n  const toEntityRefImpl = toEntityRef != null ? toEntityRef : getToEntityRef();\n  const visitNameImpl = visitName != null ? visitName : getVisitName();\n  useEffect(() => {\n    const requestId = requestAnimationFrame(() => {\n      visitsApi.save({\n        visit: {\n          name: visitNameImpl({ pathname }),\n          pathname,\n          entityRef: toEntityRefImpl({ pathname })\n        }\n      });\n    });\n    return () => cancelAnimationFrame(requestId);\n  }, [visitsApi, pathname, toEntityRefImpl, visitNameImpl]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n};\n\nexport { CustomHomepageGrid as C, VisitListener as V, isOperator as i, visitsApiRef as v };\n//# sourceMappingURL=VisitListener-7a513ef0.esm.js.map\n","import { createRouteRef, createPlugin, createApiFactory, storageApiRef, identityApiRef, createRoutableExtension, createComponentExtension } from '@backstage/core-plugin-api';\nimport { createCardExtension as createCardExtension$1, SettingsModal as SettingsModal$1 } from '@backstage/plugin-home-react';\nimport { WebStorage } from '@backstage/core-app-api';\nimport { v as visitsApiRef } from './esm/VisitListener-7a513ef0.esm.js';\nexport { C as CustomHomepageGrid, V as VisitListener, i as isOperator, v as visitsApiRef } from './esm/VisitListener-7a513ef0.esm.js';\nimport React from 'react';\nimport 'react-router-dom';\nimport { makeStyles } from '@material-ui/core';\nimport 'react-grid-layout';\nimport 'react-grid-layout/css/styles.css';\nimport 'react-resizable/css/styles.css';\nimport 'lodash';\nimport 'react-use/lib/useObservable';\nimport '@backstage/core-components';\nimport '@material-ui/core/Typography';\nimport '@material-ui/core/IconButton';\nimport '@material-ui/icons/Settings';\nimport '@material-ui/icons/Delete';\nimport '@rjsf/core';\nimport '@rjsf/material-ui';\nimport '@rjsf/validator-ajv8';\nimport '@material-ui/core/List';\nimport '@material-ui/core/ListItem';\nimport '@material-ui/icons/Add';\nimport '@material-ui/core/ListItemText';\nimport '@material-ui/core/Button';\nimport '@material-ui/icons/Save';\nimport '@material-ui/icons/Edit';\nimport '@material-ui/icons/Cancel';\nimport 'zod';\nimport '@backstage/catalog-model';\n\nconst rootRouteRef = createRouteRef({\n  id: \"home\"\n});\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass VisitsStorageApi {\n  constructor(options) {\n    __publicField(this, \"limit\");\n    __publicField(this, \"storageApi\");\n    __publicField(this, \"storageKeyPrefix\", \"@backstage/plugin-home:visits\");\n    __publicField(this, \"identityApi\");\n    var _a;\n    this.limit = Math.abs((_a = options.limit) != null ? _a : 100);\n    this.storageApi = options.storageApi;\n    this.identityApi = options.identityApi;\n  }\n  static create(options) {\n    return new VisitsStorageApi(options);\n  }\n  /**\n   * Returns a list of visits through the visitsApi\n   */\n  async list(queryParams) {\n    var _a, _b;\n    let visits = [...await this.retrieveAll()];\n    ((_a = queryParams == null ? void 0 : queryParams.orderBy) != null ? _a : []).reverse().forEach((order) => {\n      if (order.direction === \"asc\") {\n        visits.sort((a, b) => this.compare(order, a, b));\n      } else {\n        visits.sort((a, b) => this.compare(order, b, a));\n      }\n    });\n    ((_b = queryParams == null ? void 0 : queryParams.filterBy) != null ? _b : []).reverse().forEach((filter) => {\n      visits = visits.filter((visit) => {\n        const field = visit[filter.field];\n        if (filter.operator === \">\")\n          return field > filter.value;\n        if (filter.operator === \">=\")\n          return field >= filter.value;\n        if (filter.operator === \"<\")\n          return field < filter.value;\n        if (filter.operator === \"<=\")\n          return field <= filter.value;\n        if (filter.operator === \"==\")\n          return field === filter.value;\n        if (filter.operator === \"!=\")\n          return field !== filter.value;\n        if (filter.operator === \"contains\")\n          return `${field}`.includes(`${filter.value}`);\n        return false;\n      });\n    });\n    return visits;\n  }\n  /**\n   * Saves a visit through the visitsApi\n   */\n  async save(saveParams) {\n    const visits = [...await this.retrieveAll()];\n    const visit = {\n      ...saveParams.visit,\n      id: window.crypto.randomUUID(),\n      hits: 1,\n      timestamp: Date.now()\n    };\n    const visitIndex = visits.findIndex((e) => e.pathname === visit.pathname);\n    if (visitIndex >= 0) {\n      visit.id = visits[visitIndex].id;\n      visit.hits = visits[visitIndex].hits + 1;\n      visits[visitIndex] = visit;\n    } else {\n      visits.push(visit);\n    }\n    visits.sort((a, b) => b.timestamp - a.timestamp);\n    await this.persistAll(visits.splice(0, this.limit));\n    return visit;\n  }\n  async persistAll(visits) {\n    const storageKey = await this.getStorageKey();\n    return this.storageApi.set(storageKey, visits);\n  }\n  async retrieveAll() {\n    var _a;\n    const storageKey = await this.getStorageKey();\n    const snapshot = this.storageApi.snapshot(storageKey);\n    if ((snapshot == null ? void 0 : snapshot.presence) !== \"unknown\") {\n      return (_a = snapshot == null ? void 0 : snapshot.value) != null ? _a : [];\n    }\n    return new Promise((resolve, reject) => {\n      const subscription = this.storageApi.observe$(storageKey).subscribe({\n        next: (next) => {\n          var _a2;\n          const visits = (_a2 = next.value) != null ? _a2 : [];\n          subscription.unsubscribe();\n          resolve(visits);\n        },\n        error: (err) => {\n          subscription.unsubscribe();\n          reject(err);\n        }\n      });\n    });\n  }\n  async getStorageKey() {\n    const { userEntityRef } = await this.identityApi.getBackstageIdentity();\n    const storageKey = `${this.storageKeyPrefix}:${userEntityRef}`;\n    return storageKey;\n  }\n  // This assumes Visit fields are either numbers or strings\n  compare(order, a, b) {\n    const isNumber = typeof a[order.field] === \"number\";\n    return isNumber ? a[order.field] - b[order.field] : `${a[order.field]}`.localeCompare(`${b[order.field]}`);\n  }\n}\n\nclass VisitsWebStorageApi {\n  static create(options) {\n    return VisitsStorageApi.create({\n      limit: options.limit,\n      identityApi: options.identityApi,\n      storageApi: WebStorage.create({ errorApi: options.errorApi })\n    });\n  }\n}\n\nconst homePlugin = createPlugin({\n  id: \"home\",\n  apis: [\n    createApiFactory({\n      api: visitsApiRef,\n      deps: {\n        storageApi: storageApiRef,\n        identityApi: identityApiRef\n      },\n      factory: ({ storageApi, identityApi }) => VisitsStorageApi.create({ storageApi, identityApi })\n    })\n  ],\n  routes: {\n    root: rootRouteRef\n  }\n});\nconst HomepageCompositionRoot = homePlugin.provide(\n  createRoutableExtension({\n    name: \"HomepageCompositionRoot\",\n    component: () => import('./esm/index-abfba912.esm.js').then((m) => m.HomepageCompositionRoot),\n    mountPoint: rootRouteRef\n  })\n);\nconst ComponentAccordion = homePlugin.provide(\n  createComponentExtension({\n    name: \"ComponentAccordion\",\n    component: {\n      lazy: () => import('./esm/index-3155d776.esm.js').then((m) => m.ComponentAccordion)\n    }\n  })\n);\nconst ComponentTabs = homePlugin.provide(\n  createComponentExtension({\n    name: \"ComponentTabs\",\n    component: {\n      lazy: () => import('./esm/index-3155d776.esm.js').then((m) => m.ComponentTabs)\n    }\n  })\n);\nconst ComponentTab = homePlugin.provide(\n  createComponentExtension({\n    name: \"ComponentTab\",\n    component: {\n      lazy: () => import('./esm/index-3155d776.esm.js').then((m) => m.ComponentTab)\n    }\n  })\n);\nconst WelcomeTitle = homePlugin.provide(\n  createComponentExtension({\n    name: \"WelcomeTitle\",\n    component: {\n      lazy: () => import('./esm/index-c91caa6e.esm.js').then((m) => m.WelcomeTitle)\n    }\n  })\n);\nconst HomePageCompanyLogo = homePlugin.provide(\n  createComponentExtension({\n    name: \"CompanyLogo\",\n    component: {\n      lazy: () => import('./esm/index-476343c1.esm.js').then((m) => m.CompanyLogo)\n    }\n  })\n);\nconst HomePageRandomJoke = homePlugin.provide(\n  createCardExtension$1({\n    name: \"HomePageRandomJoke\",\n    title: \"Random Joke\",\n    components: () => import('./esm/index-4517c5bc.esm.js'),\n    description: \"Shows a random joke about optional category\",\n    layout: {\n      height: { minRows: 4 },\n      width: { minColumns: 3 }\n    },\n    settings: {\n      schema: {\n        title: \"Random Joke settings\",\n        type: \"object\",\n        properties: {\n          defaultCategory: {\n            title: \"Category\",\n            type: \"string\",\n            enum: [\"any\", \"programming\", \"dad\"],\n            default: \"any\"\n          }\n        }\n      }\n    }\n  })\n);\nconst HomePageToolkit = homePlugin.provide(\n  createCardExtension$1({\n    name: \"HomePageToolkit\",\n    title: \"Toolkit\",\n    components: () => import('./esm/index-40d9ffac.esm.js')\n  })\n);\nconst HomePageStarredEntities = homePlugin.provide(\n  createCardExtension$1({\n    name: \"HomePageStarredEntities\",\n    title: \"Your Starred Entities\",\n    components: () => import('./esm/index-6d94aeff.esm.js')\n  })\n);\nconst HeaderWorldClock = homePlugin.provide(\n  createComponentExtension({\n    name: \"HeaderWorldClock\",\n    component: {\n      lazy: () => import('./esm/index-59fc0760.esm.js').then(\n        (m) => m.HeaderWorldClock\n      )\n    }\n  })\n);\nconst HomePageTopVisited = homePlugin.provide(\n  createCardExtension$1({\n    name: \"HomePageTopVisited\",\n    components: () => import('./esm/TopVisited-d22fb15d.esm.js')\n  })\n);\nconst HomePageRecentlyVisited = homePlugin.provide(\n  createCardExtension$1({\n    name: \"HomePageRecentlyVisited\",\n    components: () => import('./esm/RecentlyVisited-c0ca7307.esm.js')\n  })\n);\nconst FeaturedDocsCard = homePlugin.provide(\n  createCardExtension$1({\n    name: \"FeaturedDocsCard\",\n    title: \"Featured Docs\",\n    components: () => import('./esm/index-21ffb782.esm.js')\n  })\n);\n\nconst TemplateBackstageLogo = (props) => {\n  return /* @__PURE__ */ React.createElement(\n    \"svg\",\n    {\n      className: props.classes.svg,\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 2079.95 456.05\"\n    },\n    /* @__PURE__ */ React.createElement(\n      \"path\",\n      {\n        className: props.classes.path,\n        d: \"M302.9,180a80.62,80.62,0,0,0,13.44-10.37c.8-.77,1.55-1.54,2.31-2.31a81.89,81.89,0,0,0,7.92-9.37,62.37,62.37,0,0,0,6.27-10.77,48.6,48.6,0,0,0,4.36-16.4c1.49-19.39-10-38.67-35.62-54.22L198.42,14,78.16,129.22l-78.29,75,108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.69,49.69,0,0,0-6.8-8.87,89.78,89.78,0,0,0,19.28,2.15H259a85.09,85.09,0,0,0,31-5.79A80.88,80.88,0,0,0,302.9,180Zm-100.59,59.8c-19.32,18.51-50.4,21.24-75.7,5.9l-75.13-45.6,67.44-64.65,76.42,46.39C222.88,198.57,221.36,221.6,202.31,239.84Zm8.94-82.21L140.6,114.74,205,53l69.37,42.11c25.94,15.73,29.31,37.05,10.55,55A60.71,60.71,0,0,1,211.25,157.63Zm29.86,190c-19.57,18.75-46.17,29.08-74.88,29.08a123.84,123.84,0,0,1-64.11-18.19L-.13,296.51v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.85,87.85,0,0,1,241.11,347.67Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,257.52V282.2l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.79A86.86,86.86,0,0,1,241.11,308.68Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,218.54v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.12,19.68-41.49v-1.82A87.14,87.14,0,0,1,241.11,269.7Zm83.69,25.74a94.16,94.16,0,0,1-60.19,25.86h0V348a81.6,81.6,0,0,0,51.73-22.37c14-13.38,21.15-28.11,21-42.64v-2.2A95.14,95.14,0,0,1,324.8,295.44Zm-83.69,91.21c-19.57,18.75-46.17,29.09-74.88,29.09a123.76,123.76,0,0,1-64.11-18.2L-.13,335.49v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.35,87.35,0,0,1,241.11,386.65Zm85.75-210.21c-.68.69-1.35,1.38-2.06,2.05a99.19,99.19,0,0,1-22.23,15.69,94.53,94.53,0,0,1-26.24,8.71,97.84,97.84,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a52.7,52.7,0,0,1,1.13,12V231h.05A84.48,84.48,0,0,0,290,225.47a80.83,80.83,0,0,0,26.38-16.82c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,62.85,62.85,0,0,0,6.29-10.78,48.5,48.5,0,0,0,4.32-16.44c.09-1.23.2-2.47.19-3.7v-2c-.72,1-1.48,2.06-2.26,3.09A98,98,0,0,1,326.86,176.44Zm0,77.92c-.68.7-1.3,1.41-2,2.1a94.09,94.09,0,0,1-60.19,25.85h0V309h0a81.65,81.65,0,0,0,51.73-22.37,73.51,73.51,0,0,0,16.48-22.49,48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A95.81,95.81,0,0,1,326.82,254.36Zm0-39c-.68.7-1.3,1.41-2,2.1a92.22,92.22,0,0,1-10.62,8.65,93.53,93.53,0,0,1-11.63,7,95.63,95.63,0,0,1-37.94,10.18h-.05l0,26.67h0a81.63,81.63,0,0,0,51.73-22.37c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,63.16,63.16,0,0,0,6.29-10.77,48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A98.19,98.19,0,0,1,326.82,215.38Zm241-88.84q7.94,0,17.09.17t18.12,1a139.3,139.3,0,0,1,16.74,2.57,42.78,42.78,0,0,1,13.3,5.14,64.27,64.27,0,0,1,20.54,19.89Q662,168,662,186.54q0,19.54-9.49,33.78t-27.1,21.09v.68q22.78,4.82,34.87,20.58t12.08,38.4a72.62,72.62,0,0,1-4.83,26.06,65.29,65.29,0,0,1-14.33,22.46,71.57,71.57,0,0,1-23.47,15.78q-14,6-32.28,6H478.38V126.54Zm9,105.27q28,0,40.21-9.78t12.26-29.31q0-13-4.14-20.58a29.47,29.47,0,0,0-11.4-11.66A45,45,0,0,0,597,155.17a161.2,161.2,0,0,0-20.19-1.2h-65.6v77.84Zm16.57,112.13q21.74,0,34-11.66T639.59,300q0-12-4.48-19.88a34.85,34.85,0,0,0-11.91-12.52,50.14,50.14,0,0,0-17.09-6.52,105,105,0,0,0-20-1.88H511.17v84.7Zm274.79,26.74q-7.61,4.45-21.06,4.46-11.4,0-18.12-6.34t-6.74-20.75a70.17,70.17,0,0,1-28.13,20.75,97.87,97.87,0,0,1-57.65,3.6,53.51,53.51,0,0,1-18.82-8.58A41.19,41.19,0,0,1,705,348.56q-4.65-9.42-4.66-22.8,0-15.09,5.18-24.69a44.92,44.92,0,0,1,13.64-15.6,62.63,62.63,0,0,1,19.33-9.09q10.88-3.08,22.27-5.14,12.08-2.4,23-3.6a128,128,0,0,0,19.16-3.43c5.53-1.48,9.89-3.65,13.12-6.51s4.83-7,4.83-12.52q0-9.6-3.62-15.43a24.94,24.94,0,0,0-9.32-8.92,38.38,38.38,0,0,0-12.78-4.11,96.54,96.54,0,0,0-14-1q-18.63,0-31.07,7T736.6,249.29H707.26q.69-16.46,6.9-27.77a52.21,52.21,0,0,1,16.57-18.35,70,70,0,0,1,23.65-10.11A125.51,125.51,0,0,1,782.86,190a168.63,168.63,0,0,1,24,1.72,63.26,63.26,0,0,1,21.58,7A41.23,41.23,0,0,1,844,213.59q5.87,9.57,5.87,25v91q0,10.26,1.21,15.05t8.11,4.79a35.57,35.57,0,0,0,9-1.37Zm-47.64-90.87c-3.69,2.74-8.52,4.72-14.5,6s-12.26,2.27-18.82,3.07-13.17,1.71-19.85,2.73a73.7,73.7,0,0,0-18,4.94,32.62,32.62,0,0,0-12.94,9.73q-5,6.32-5,17.23a23.31,23.31,0,0,0,2.94,12.11,24.11,24.11,0,0,0,7.59,8,32,32,0,0,0,10.88,4.44,60.94,60.94,0,0,0,13.11,1.36q14.5,0,24.86-3.92a52.49,52.49,0,0,0,16.91-9.9,39.1,39.1,0,0,0,9.67-13,32.53,32.53,0,0,0,3.11-13.14ZM1002.07,225q-11.05-9.25-29.69-9.26-15.89,0-26.58,5.83A47.29,47.29,0,0,0,928.71,237a64.66,64.66,0,0,0-9.15,22.12A119.83,119.83,0,0,0,916.8,285a98.22,98.22,0,0,0,2.93,24,64.18,64.18,0,0,0,9.15,20.74,46.2,46.2,0,0,0,16.23,14.58q10,5.49,23.82,5.48,21.75,0,34-11.31t15-31.89h30q-4.83,32.91-24.68,50.75t-54,17.83q-20.37,0-36.07-6.52A69.86,69.86,0,0,1,907,350.11a79.92,79.92,0,0,1-15.88-28.63A118.64,118.64,0,0,1,885.73,285a129.41,129.41,0,0,1,5.18-37.21,85.63,85.63,0,0,1,15.71-30.17A73.46,73.46,0,0,1,933,197.35Q948.91,190,970,190a108.54,108.54,0,0,1,28.48,3.6,69.59,69.59,0,0,1,23.48,11.15,61,61,0,0,1,16.74,19q6.55,11.49,8.29,27.26h-30.38Q1013.11,234.21,1002.07,225Zm109.77-98.41v145l81.47-77.49h39.36l-70.77,64.46,75.95,112.82h-37.29l-61.1-92.59-27.62,25.38v67.21H1082.5V126.54Zm170.54,205.22a31.07,31.07,0,0,0,10.87,10.63,49,49,0,0,0,15.19,5.66,87.06,87.06,0,0,0,17.44,1.71,109.18,109.18,0,0,0,14.5-1,53.22,53.22,0,0,0,14-3.78,26.27,26.27,0,0,0,10.53-8q4.14-5.32,4.14-13.55,0-11.31-8.63-17.14a73.69,73.69,0,0,0-21.58-9.43q-12.94-3.6-28.13-6.52a146,146,0,0,1-28.14-8.23A58.16,58.16,0,0,1,1261,267.13q-8.64-9.6-8.63-26.75,0-13.38,6-23a49.26,49.26,0,0,1,15.53-15.61,71.76,71.76,0,0,1,21.4-8.91A99.41,99.41,0,0,1,1319,190a141.31,141.31,0,0,1,28,2.58,64.85,64.85,0,0,1,22.62,8.91,46.16,46.16,0,0,1,15.7,17.15q5.87,10.8,6.91,26.91h-29.35q-.69-8.57-4.48-14.23a29.36,29.36,0,0,0-9.67-9.08,44.16,44.16,0,0,0-12.94-5,67.68,67.68,0,0,0-14.33-1.54,87.29,87.29,0,0,0-13.29,1,45.28,45.28,0,0,0-12.26,3.6,24.49,24.49,0,0,0-9,6.86q-3.46,4.29-3.46,11.14a16.32,16.32,0,0,0,5.36,12.52,42.75,42.75,0,0,0,13.63,8.23,120,120,0,0,0,18.64,5.48q10.37,2.24,20.72,4.63,11,2.4,21.57,5.83A70.74,70.74,0,0,1,1382,284.1a44.55,44.55,0,0,1,13.12,14.23q5,8.58,5,21.26,0,16.13-6.73,26.75a52.5,52.5,0,0,1-17.61,17.14,73.89,73.89,0,0,1-24.51,9.09,146.3,146.3,0,0,1-27.1,2.57,126.24,126.24,0,0,1-28.31-3.09A69.56,69.56,0,0,1,1272,361.94a51.74,51.74,0,0,1-16.57-18.52q-6.21-11.49-6.9-27.95h29.34A32.65,32.65,0,0,0,1282.38,331.76Zm226.46-137.67v25.72h-35.56V329.88a31.37,31.37,0,0,0,.87,8.23,8.42,8.42,0,0,0,3.28,4.8,14.61,14.61,0,0,0,6.73,2.23,99.19,99.19,0,0,0,11.22.51h13.46v25.72H1486.4a105.8,105.8,0,0,1-19.5-1.55,28.65,28.65,0,0,1-13.12-5.65,24.09,24.09,0,0,1-7.42-11.66q-2.43-7.54-2.42-19.89V219.81h-30.38V194.09h30.38V140.94h29.34v53.15ZM1699.4,370.68q-7.61,4.45-21.06,4.46-11.4,0-18.12-6.34t-6.74-20.75a70.17,70.17,0,0,1-28.13,20.75,97.87,97.87,0,0,1-57.65,3.6,53.51,53.51,0,0,1-18.82-8.58,41.19,41.19,0,0,1-12.6-15.26q-4.65-9.42-4.66-22.8,0-15.09,5.18-24.69a44.92,44.92,0,0,1,13.64-15.6,62.63,62.63,0,0,1,19.33-9.09q10.88-3.08,22.27-5.14,12.07-2.4,23-3.6a128,128,0,0,0,19.16-3.43c5.53-1.48,9.89-3.65,13.12-6.51s4.83-7,4.83-12.52q0-9.6-3.62-15.43a24.94,24.94,0,0,0-9.32-8.92,38.38,38.38,0,0,0-12.78-4.11,96.54,96.54,0,0,0-14-1q-18.63,0-31.07,7t-13.46,26.57h-29.34q.67-16.46,6.9-27.77A52.21,52.21,0,0,1,1562,203.17a70,70,0,0,1,23.65-10.11,125.51,125.51,0,0,1,28.48-3.09,168.63,168.63,0,0,1,24,1.72,63.26,63.26,0,0,1,21.58,7,41.23,41.23,0,0,1,15.53,14.89q5.87,9.57,5.87,25v91q0,10.26,1.21,15.05t8.11,4.79a35.57,35.57,0,0,0,9-1.37Zm-47.64-90.87c-3.69,2.74-8.52,4.72-14.5,6s-12.26,2.27-18.82,3.07-13.17,1.71-19.85,2.73a73.7,73.7,0,0,0-17.95,4.94,32.62,32.62,0,0,0-12.94,9.73q-5,6.32-5,17.23a23.31,23.31,0,0,0,2.94,12.11,24.11,24.11,0,0,0,7.59,8,32,32,0,0,0,10.88,4.44,60.94,60.94,0,0,0,13.11,1.36q14.51,0,24.86-3.92a52.49,52.49,0,0,0,16.91-9.9,39.1,39.1,0,0,0,9.67-13,32.53,32.53,0,0,0,3.11-13.14Zm208.85,141.62q-20,21.6-62.83,21.6a122.11,122.11,0,0,1-25.37-2.74,78,78,0,0,1-23.48-8.92,54.41,54.41,0,0,1-17.43-16.11q-6.91-10-7.6-24.35h29.35a21.47,21.47,0,0,0,5,13.38,36.67,36.67,0,0,0,11.4,8.91,55.52,55.52,0,0,0,14.67,5,79.51,79.51,0,0,0,15.19,1.55q14.49,0,24.51-5A46,46,0,0,0,1840.59,401a56.53,56.53,0,0,0,9.49-21.09,117.46,117.46,0,0,0,2.94-27.09V341.19h-.7q-7.59,16.46-23,24.18a71.8,71.8,0,0,1-32.63,7.71q-20,0-34.86-7.2A72.88,72.88,0,0,1,1737,346.51a82.13,82.13,0,0,1-15-28.46,116.62,116.62,0,0,1-5-34.47,133.92,133.92,0,0,1,4.14-32.4A88.17,88.17,0,0,1,1735,221a75.49,75.49,0,0,1,25.55-22.29q15.87-8.75,39-8.75a66.21,66.21,0,0,1,31.07,7.38,52.13,52.13,0,0,1,22.09,22.11h.35V194.09h27.61V356.28Q1880.63,399.83,1860.61,421.43Zm-37.46-79.72a47.94,47.94,0,0,0,16.4-15.78,71.89,71.89,0,0,0,9.15-22.11,106.77,106.77,0,0,0,2.93-24.69,96.71,96.71,0,0,0-2.76-23,64,64,0,0,0-8.8-20.4,45.76,45.76,0,0,0-15.71-14.57q-9.66-5.49-23.47-5.49-14.16,0-24.17,5.32a46.77,46.77,0,0,0-16.4,14.23,60.14,60.14,0,0,0-9.32,20.57,99.69,99.69,0,0,0-2.93,24.35,120.63,120.63,0,0,0,2.42,24,67.5,67.5,0,0,0,8.28,21.77,46.37,46.37,0,0,0,15.54,15.78q9.66,6,24.16,6T1823.15,341.71Zm228,18.34q-20,15.09-50.41,15.09-21.4,0-37.11-6.86a73.16,73.16,0,0,1-26.41-19.2,81.52,81.52,0,0,1-16-29.49,141.12,141.12,0,0,1-6-37.38,106.1,106.1,0,0,1,6.21-37A88.56,88.56,0,0,1,1938.8,216a79.09,79.09,0,0,1,26.58-19.2A81.66,81.66,0,0,1,1999,190q23.82,0,39.53,9.78a78,78,0,0,1,25.2,24.86,98.18,98.18,0,0,1,13.12,32.91,140.6,140.6,0,0,1,2.93,34h-133.6a70,70,0,0,0,2.76,22.12,49.9,49.9,0,0,0,10,18.51A49.1,49.1,0,0,0,1976.6,345q10.7,4.82,25.2,4.8,18.65,0,30.55-8.57t15.71-26.06h29Q2071.18,345,2051.17,360.05Zm-7.08-113.84a50,50,0,0,0-10.7-16,53.1,53.1,0,0,0-56.62-10.63,47.48,47.48,0,0,0-15.71,10.81,51.69,51.69,0,0,0-10.35,15.94,60.18,60.18,0,0,0-4.49,19.37h102.53A59.47,59.47,0,0,0,2044.09,246.21ZM302.9,180a80.62,80.62,0,0,0,13.44-10.37c.8-.77,1.55-1.54,2.31-2.31a81.89,81.89,0,0,0,7.92-9.37,62.37,62.37,0,0,0,6.27-10.77,48.6,48.6,0,0,0,4.36-16.4c1.49-19.39-10-38.67-35.62-54.22L198.42,14,78.16,129.22l-78.29,75,108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.69,49.69,0,0,0-6.8-8.87,89.78,89.78,0,0,0,19.28,2.15H259a85.09,85.09,0,0,0,31-5.79A80.88,80.88,0,0,0,302.9,180Zm-100.59,59.8c-19.32,18.51-50.4,21.24-75.7,5.9l-75.13-45.6,67.44-64.65,76.42,46.39C222.88,198.57,221.36,221.6,202.31,239.84Zm8.94-82.21L140.6,114.74,205,53l69.37,42.11c25.94,15.73,29.31,37.05,10.55,55A60.71,60.71,0,0,1,211.25,157.63Zm29.86,190c-19.57,18.75-46.17,29.08-74.88,29.08a123.84,123.84,0,0,1-64.11-18.19L-.13,296.51v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.85,87.85,0,0,1,241.11,347.67Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,257.52V282.2l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.79A86.86,86.86,0,0,1,241.11,308.68Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,218.54v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.12,19.68-41.49v-1.82A87.14,87.14,0,0,1,241.11,269.7Zm83.69,25.74a94.16,94.16,0,0,1-60.19,25.86h0V348a81.6,81.6,0,0,0,51.73-22.37c14-13.38,21.15-28.11,21-42.64v-2.2A95.14,95.14,0,0,1,324.8,295.44Zm-83.69,91.21c-19.57,18.75-46.17,29.09-74.88,29.09a123.76,123.76,0,0,1-64.11-18.2L-.13,335.49v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.35,87.35,0,0,1,241.11,386.65Zm85.75-210.21c-.68.69-1.35,1.38-2.06,2.05a99.19,99.19,0,0,1-22.23,15.69,94.53,94.53,0,0,1-26.24,8.71,97.84,97.84,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a52.7,52.7,0,0,1,1.13,12V231h.05A84.48,84.48,0,0,0,290,225.47a80.83,80.83,0,0,0,26.38-16.82c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,62.85,62.85,0,0,0,6.29-10.78,48.5,48.5,0,0,0,4.32-16.44c.09-1.23.2-2.47.19-3.7v-2c-.72,1-1.48,2.06-2.26,3.09A98,98,0,0,1,326.86,176.44Zm0,77.92c-.68.7-1.3,1.41-2,2.1a94.09,94.09,0,0,1-60.19,25.85h0V309h0a81.65,81.65,0,0,0,51.73-22.37,73.51,73.51,0,0,0,16.48-22.49,48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A95.81,95.81,0,0,1,326.82,254.36Zm0-39c-.68.7-1.3,1.41-2,2.1a92.22,92.22,0,0,1-10.62,8.65,93.53,93.53,0,0,1-11.63,7,95.63,95.63,0,0,1-37.94,10.18h-.05l0,26.67h0a81.63,81.63,0,0,0,51.73-22.37c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,63.16,63.16,0,0,0,6.29-10.77,48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A98.19,98.19,0,0,1,326.82,215.38Z\"\n      }\n    )\n  );\n};\n\nconst useStyles = makeStyles({\n  svg: {\n    width: \"auto\",\n    height: 28\n  },\n  path: {\n    fill: \"#7df3e1\"\n  }\n});\nconst TemplateBackstageLogoIcon = () => {\n  const classes = useStyles();\n  return /* @__PURE__ */ React.createElement(\n    \"svg\",\n    {\n      className: classes.svg,\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 337.46 428.5\"\n    },\n    /* @__PURE__ */ React.createElement(\n      \"path\",\n      {\n        className: classes.path,\n        d: \"M303,166.05a80.69,80.69,0,0,0,13.45-10.37c.79-.77,1.55-1.53,2.3-2.3a83.12,83.12,0,0,0,7.93-9.38A63.69,63.69,0,0,0,333,133.23a48.58,48.58,0,0,0,4.35-16.4c1.49-19.39-10-38.67-35.62-54.22L198.56,0,78.3,115.23,0,190.25l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.22,49.22,0,0,0-6.8-8.87A89.17,89.17,0,0,0,259,178.29h.15a85.08,85.08,0,0,0,31-5.79A80.88,80.88,0,0,0,303,166.05ZM202.45,225.86c-19.32,18.51-50.4,21.23-75.7,5.9L51.61,186.15l67.45-64.64,76.41,46.38C223,184.58,221.49,207.61,202.45,225.86Zm8.93-82.22-70.65-42.89L205.14,39,274.51,81.1c25.94,15.72,29.31,37,10.55,55A60.69,60.69,0,0,1,211.38,143.64Zm29.86,190c-19.57,18.75-46.17,29.09-74.88,29.09a123.73,123.73,0,0,1-64.1-18.2L0,282.52v24.67L108.6,373.1a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.27,87.27,0,0,1,241.24,333.68Zm0-39c-19.57,18.75-46.17,29.08-74.88,29.08a123.81,123.81,0,0,1-64.1-18.19L0,243.53v24.68l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.5v-1.78A87.27,87.27,0,0,1,241.24,294.7Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.81,123.81,0,0,1-64.1-18.19L0,204.55v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.82A86.09,86.09,0,0,1,241.24,255.71Zm83.7,25.74a94.15,94.15,0,0,1-60.2,25.86h0V334a81.6,81.6,0,0,0,51.74-22.37c14-13.38,21.14-28.11,21-42.64v-2.19A94.92,94.92,0,0,1,324.94,281.45Zm-83.7,91.21c-19.57,18.76-46.17,29.09-74.88,29.09a123.73,123.73,0,0,1-64.1-18.2L0,321.5v24.68l108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A86.29,86.29,0,0,1,241.24,372.66ZM327,162.45c-.68.69-1.35,1.38-2.05,2.06a94.37,94.37,0,0,1-10.64,8.65,91.35,91.35,0,0,1-11.6,7,94.53,94.53,0,0,1-26.24,8.71,97.69,97.69,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a53.27,53.27,0,0,1,1.14,12V217h.05a84.41,84.41,0,0,0,25.35-5.55,81,81,0,0,0,26.39-16.82c.8-.77,1.5-1.56,2.26-2.34a82.08,82.08,0,0,0,7.93-9.38A63.76,63.76,0,0,0,333,172.17a48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7V150q-1.08,1.54-2.25,3.09A96.73,96.73,0,0,1,327,162.45Zm0,77.92c-.69.7-1.31,1.41-2,2.1a94.2,94.2,0,0,1-60.2,25.86h0l0,26.67h0a81.6,81.6,0,0,0,51.74-22.37A73.51,73.51,0,0,0,333,250.13a48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.47.19-3.71v-2.19c-.74,1.07-1.46,2.15-2.27,3.21A95.68,95.68,0,0,1,327,240.37Zm0-39c-.69.7-1.31,1.41-2,2.1a93.18,93.18,0,0,1-10.63,8.65,91.63,91.63,0,0,1-11.63,7,95.47,95.47,0,0,1-37.94,10.18h0V256h0a81.65,81.65,0,0,0,51.74-22.37c.8-.77,1.5-1.56,2.26-2.34a82.08,82.08,0,0,0,7.93-9.38A63.76,63.76,0,0,0,333,211.15a48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.46,2.16-2.27,3.22A95.68,95.68,0,0,1,327,201.39Z\"\n      }\n    )\n  );\n};\n\nconst createCardExtension = createCardExtension$1;\nconst SettingsModal = SettingsModal$1;\n\nexport { ComponentAccordion, ComponentTab, ComponentTabs, FeaturedDocsCard, HeaderWorldClock, HomePageCompanyLogo, HomePageRandomJoke, HomePageRecentlyVisited, HomePageStarredEntities, HomePageToolkit, HomePageTopVisited, HomepageCompositionRoot, SettingsModal, TemplateBackstageLogo, TemplateBackstageLogoIcon, VisitsStorageApi, VisitsWebStorageApi, WelcomeTitle, createCardExtension, homePlugin };\n//# sourceMappingURL=index.esm.js.map\n","import { createExternalRouteRef } from '@backstage/core-plugin-api';\n\nconst catalogIndexRouteRef = createExternalRouteRef({\n  id: \"catalog-index\"\n});\n\nexport { catalogIndexRouteRef as c };\n//# sourceMappingURL=routes-e3daad75.esm.js.map\n","import { createPlugin, createComponentExtension, useApi, identityApiRef, useRouteRef } from '@backstage/core-plugin-api';\nimport { c as catalogIndexRouteRef } from './esm/routes-e3daad75.esm.js';\nexport { MembersListCard } from './esm/MembersListCard-cb148b44.esm.js';\nexport { GroupProfileCard } from './esm/GroupProfileCard-d9207fd9.esm.js';\nexport { UserProfileCard } from './esm/UserProfileCard-d467b6e5.esm.js';\nexport { OwnershipCard } from './esm/OwnershipCard-9f8835e6.esm.js';\nimport React from 'react';\nimport { getCompoundEntityRef, DEFAULT_NAMESPACE, stringifyEntityRef } from '@backstage/catalog-model';\nimport { SidebarItem, SidebarSubmenu, SidebarSubmenuItem } from '@backstage/core-components';\nimport useAsync from 'react-use/lib/useAsync';\nimport { catalogApiRef, entityRouteRef } from '@backstage/plugin-catalog-react';\nimport '@material-ui/core';\nimport '@material-ui/lab/Pagination';\nimport '@material-ui/icons/AccountTree';\nimport '@material-ui/lab/Alert';\nimport '@material-ui/icons/Cached';\nimport '@material-ui/icons/Edit';\nimport '@material-ui/icons/Email';\nimport '@material-ui/icons/Group';\nimport './esm/LinksGroup-9fefd100.esm.js';\nimport '@material-ui/icons/Language';\nimport '@backstage/plugin-catalog-react/alpha';\nimport '@backstage/plugin-catalog-common/alpha';\nimport '@material-ui/icons/Person';\nimport 'pluralize';\nimport 'p-limit';\nimport 'qs';\nimport 'lodash';\n\nconst orgPlugin = createPlugin({\n  id: \"org\",\n  externalRoutes: {\n    catalogIndex: catalogIndexRouteRef\n  }\n});\nconst EntityGroupProfileCard = orgPlugin.provide(\n  createComponentExtension({\n    name: \"EntityGroupProfileCard\",\n    component: {\n      lazy: () => import('./esm/index-ad2d9b29.esm.js').then((m) => m.GroupProfileCard)\n    }\n  })\n);\nconst EntityMembersListCard = orgPlugin.provide(\n  createComponentExtension({\n    name: \"EntityMembersListCard\",\n    component: {\n      lazy: () => import('./esm/index-ad2d9b29.esm.js').then((m) => m.MembersListCard)\n    }\n  })\n);\nconst EntityOwnershipCard = orgPlugin.provide(\n  createComponentExtension({\n    name: \"EntityOwnershipCard\",\n    component: {\n      lazy: () => import('./esm/index-ad2d9b29.esm.js').then((m) => m.OwnershipCard)\n    }\n  })\n);\nconst EntityUserProfileCard = orgPlugin.provide(\n  createComponentExtension({\n    name: \"EntityUserProfileCard\",\n    component: {\n      lazy: () => import('./esm/index-ad2d9b29.esm.js').then((m) => m.UserProfileCard)\n    }\n  })\n);\n\nconst MyGroupsSidebarItem = (props) => {\n  const { singularTitle, pluralTitle, icon, filter } = props;\n  const identityApi = useApi(identityApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const catalogEntityRoute = useRouteRef(entityRouteRef);\n  const { value: groups } = useAsync(async () => {\n    const profile = await identityApi.getBackstageIdentity();\n    const response = await catalogApi.getEntities({\n      filter: [\n        {\n          kind: \"group\",\n          \"relations.hasMember\": profile.userEntityRef,\n          ...filter != null ? filter : {}\n        }\n      ],\n      fields: [\"metadata\", \"kind\"]\n    });\n    return response.items;\n  }, []);\n  if (!(groups == null ? void 0 : groups.length)) {\n    return null;\n  }\n  if (groups.length === 1) {\n    const group = groups[0];\n    return /* @__PURE__ */ React.createElement(\n      SidebarItem,\n      {\n        text: singularTitle,\n        to: catalogEntityRoute(getCompoundEntityRef(group)),\n        icon\n      }\n    );\n  }\n  return /* @__PURE__ */ React.createElement(SidebarItem, { icon, text: pluralTitle }, /* @__PURE__ */ React.createElement(SidebarSubmenu, { title: pluralTitle }, groups == null ? void 0 : groups.map(function groupsMap(group) {\n    return /* @__PURE__ */ React.createElement(\n      SidebarSubmenuItem,\n      {\n        title: group.metadata.title || group.metadata.name,\n        subtitle: group.metadata.namespace !== DEFAULT_NAMESPACE ? group.metadata.namespace : void 0,\n        to: catalogEntityRoute(getCompoundEntityRef(group)),\n        icon,\n        key: stringifyEntityRef(group)\n      }\n    );\n  })));\n};\n\nexport { EntityGroupProfileCard, EntityMembersListCard, EntityOwnershipCard, EntityUserProfileCard, MyGroupsSidebarItem, orgPlugin, orgPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","import { ResponseError } from '@backstage/errors';\nimport fetch from 'cross-fetch';\nimport * as uuid from 'uuid';\nimport { z } from 'zod';\n\nvar AuthorizeResult = /* @__PURE__ */ ((AuthorizeResult2) => {\n  AuthorizeResult2[\"DENY\"] = \"DENY\";\n  AuthorizeResult2[\"ALLOW\"] = \"ALLOW\";\n  AuthorizeResult2[\"CONDITIONAL\"] = \"CONDITIONAL\";\n  return AuthorizeResult2;\n})(AuthorizeResult || {});\n\nfunction isPermission(permission, comparedPermission) {\n  return permission.name === comparedPermission.name;\n}\nfunction isResourcePermission(permission, resourceType) {\n  if (!(\"resourceType\" in permission)) {\n    return false;\n  }\n  return !resourceType || permission.resourceType === resourceType;\n}\nfunction isCreatePermission(permission) {\n  return permission.attributes.action === \"create\";\n}\nfunction isReadPermission(permission) {\n  return permission.attributes.action === \"read\";\n}\nfunction isUpdatePermission(permission) {\n  return permission.attributes.action === \"update\";\n}\nfunction isDeletePermission(permission) {\n  return permission.attributes.action === \"delete\";\n}\nfunction toPermissionEvaluator(permissionAuthorizer) {\n  return {\n    authorize: async (requests, options) => {\n      const response = await permissionAuthorizer.authorize(requests, options);\n      return response;\n    },\n    authorizeConditional(requests, options) {\n      const parsedRequests = requests;\n      return permissionAuthorizer.authorize(parsedRequests, options);\n    }\n  };\n}\n\nfunction createPermission({\n  name,\n  attributes,\n  resourceType\n}) {\n  if (resourceType) {\n    return {\n      type: \"resource\",\n      name,\n      attributes,\n      resourceType\n    };\n  }\n  return {\n    type: \"basic\",\n    name,\n    attributes\n  };\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst permissionCriteriaSchema = z.lazy(\n  () => z.object({\n    rule: z.string(),\n    resourceType: z.string(),\n    params: z.record(z.any()).optional()\n  }).or(z.object({ anyOf: z.array(permissionCriteriaSchema).nonempty() })).or(z.object({ allOf: z.array(permissionCriteriaSchema).nonempty() })).or(z.object({ not: permissionCriteriaSchema }))\n);\nconst authorizePermissionResponseSchema = z.object({\n  result: z.literal(AuthorizeResult.ALLOW).or(z.literal(AuthorizeResult.DENY))\n});\nconst queryPermissionResponseSchema = z.union([\n  z.object({\n    result: z.literal(AuthorizeResult.ALLOW).or(z.literal(AuthorizeResult.DENY))\n  }),\n  z.object({\n    result: z.literal(AuthorizeResult.CONDITIONAL),\n    pluginId: z.string(),\n    resourceType: z.string(),\n    conditions: permissionCriteriaSchema\n  })\n]);\nconst responseSchema = (itemSchema, ids) => z.object({\n  items: z.array(\n    z.intersection(\n      z.object({\n        id: z.string()\n      }),\n      itemSchema\n    )\n  ).refine(\n    (items) => items.length === ids.size && items.every(({ id }) => ids.has(id)),\n    {\n      message: \"Items in response do not match request\"\n    }\n  )\n});\nclass PermissionClient {\n  constructor(options) {\n    __publicField(this, \"enabled\");\n    __publicField(this, \"discovery\");\n    var _a;\n    this.discovery = options.discovery;\n    this.enabled = (_a = options.config.getOptionalBoolean(\"permission.enabled\")) != null ? _a : false;\n  }\n  /**\n   * {@inheritdoc PermissionEvaluator.authorize}\n   */\n  async authorize(requests, options) {\n    return this.makeRequest(\n      requests,\n      authorizePermissionResponseSchema,\n      options\n    );\n  }\n  /**\n   * {@inheritdoc PermissionEvaluator.authorizeConditional}\n   */\n  async authorizeConditional(queries, options) {\n    return this.makeRequest(queries, queryPermissionResponseSchema, options);\n  }\n  async makeRequest(queries, itemSchema, options) {\n    if (!this.enabled) {\n      return queries.map((_) => ({ result: AuthorizeResult.ALLOW }));\n    }\n    const request = {\n      items: queries.map((query) => ({\n        id: uuid.v4(),\n        ...query\n      }))\n    };\n    const permissionApi = await this.discovery.getBaseUrl(\"permission\");\n    const response = await fetch(`${permissionApi}/authorize`, {\n      method: \"POST\",\n      body: JSON.stringify(request),\n      headers: {\n        ...this.getAuthorizationHeader(options == null ? void 0 : options.token),\n        \"content-type\": \"application/json\"\n      }\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const responseBody = await response.json();\n    const parsedResponse = responseSchema(\n      itemSchema,\n      new Set(request.items.map(({ id }) => id))\n    ).parse(responseBody);\n    const responsesById = parsedResponse.items.reduce((acc, r) => {\n      acc[r.id] = r;\n      return acc;\n    }, {});\n    return request.items.map((query) => responsesById[query.id]);\n  }\n  getAuthorizationHeader(token) {\n    return token ? { Authorization: `Bearer ${token}` } : {};\n  }\n}\n\nexport { AuthorizeResult, PermissionClient, createPermission, isCreatePermission, isDeletePermission, isPermission, isReadPermission, isResourcePermission, isUpdatePermission, toPermissionEvaluator };\n//# sourceMappingURL=index.esm.js.map\n","import React from 'react';\nimport { Route } from 'react-router-dom';\nimport { createApiRef, useApi, useApp } from '@backstage/core-plugin-api';\nimport { PermissionClient, isResourcePermission, AuthorizeResult } from '@backstage/plugin-permission-common';\nimport useSWR from 'swr';\n\nconst permissionApiRef = createApiRef({\n  id: \"plugin.permission.api\"\n});\n\nclass IdentityPermissionApi {\n  constructor(permissionClient, identityApi) {\n    this.permissionClient = permissionClient;\n    this.identityApi = identityApi;\n  }\n  static create(options) {\n    const { config, discovery, identity } = options;\n    const permissionClient = new PermissionClient({ discovery, config });\n    return new IdentityPermissionApi(permissionClient, identity);\n  }\n  async authorize(request) {\n    const response = await this.permissionClient.authorize(\n      [request],\n      await this.identityApi.getCredentials()\n    );\n    return response[0];\n  }\n}\n\nfunction usePermission(input) {\n  const permissionApi = useApi(permissionApiRef);\n  const { data, error } = useSWR(input, async (args) => {\n    if (isResourcePermission(args.permission) && !args.resourceRef) {\n      return AuthorizeResult.DENY;\n    }\n    const { result } = await permissionApi.authorize(args);\n    return result;\n  });\n  if (error) {\n    return { error, loading: false, allowed: false };\n  }\n  if (data === void 0) {\n    return { loading: true, allowed: false };\n  }\n  return { loading: false, allowed: data === AuthorizeResult.ALLOW };\n}\n\nconst PermissionedRoute = (props) => {\n  const { permission, resourceRef, errorComponent, ...otherProps } = props;\n  const permissionResult = usePermission(\n    isResourcePermission(permission) ? { permission, resourceRef } : { permission }\n  );\n  const app = useApp();\n  const { NotFoundErrorPage } = app.getComponents();\n  let shownElement = errorComponent === void 0 ? /* @__PURE__ */ React.createElement(NotFoundErrorPage, null) : errorComponent;\n  if (permissionResult.loading) {\n    shownElement = null;\n  } else if (permissionResult.allowed) {\n    shownElement = props.element;\n  }\n  return /* @__PURE__ */ React.createElement(Route, { ...otherProps, element: shownElement });\n};\n\nfunction RequirePermission(props) {\n  const { permission, resourceRef } = props;\n  const permissionResult = usePermission(\n    isResourcePermission(permission) ? { permission, resourceRef } : { permission }\n  );\n  const app = useApp();\n  if (permissionResult.loading) {\n    return null;\n  } else if (permissionResult.allowed) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, props.children);\n  }\n  if (props.errorPage) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, props.errorPage);\n  }\n  const { NotFoundErrorPage } = app.getComponents();\n  return /* @__PURE__ */ React.createElement(NotFoundErrorPage, null);\n}\n\nexport { IdentityPermissionApi, PermissionedRoute, RequirePermission, permissionApiRef, usePermission };\n//# sourceMappingURL=index.esm.js.map\n","import { entityKindSchemaValidator } from '@backstage/catalog-model';\n\nvar $schema = \"http://json-schema.org/draft-07/schema\";\nvar $id = \"TemplateV1beta3\";\nvar description = \"A Template describes a scaffolding task for use with the Scaffolder. It describes the required parameters as well as a series of steps that will be taken to execute the scaffolding task.\";\nvar examples = [\n\t{\n\t\tapiVersion: \"scaffolder.backstage.io/v1beta3\",\n\t\tkind: \"Template\",\n\t\tmetadata: {\n\t\t\tname: \"react-ssr-template\",\n\t\t\ttitle: \"React SSR Template\",\n\t\t\tdescription: \"Next.js application skeleton for creating isomorphic web applications.\",\n\t\t\ttags: [\n\t\t\t\t\"recommended\",\n\t\t\t\t\"react\"\n\t\t\t]\n\t\t},\n\t\tspec: {\n\t\t\towner: \"artist-relations-team\",\n\t\t\ttype: \"website\",\n\t\t\tparameters: {\n\t\t\t\trequired: [\n\t\t\t\t\t\"name\",\n\t\t\t\t\t\"description\",\n\t\t\t\t\t\"repoUrl\"\n\t\t\t\t],\n\t\t\t\t\"backstage:permissions\": {\n\t\t\t\t\ttags: [\n\t\t\t\t\t\t\"one\",\n\t\t\t\t\t\t\"two\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tproperties: {\n\t\t\t\t\tname: {\n\t\t\t\t\t\ttitle: \"Name\",\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"Unique name of the component\"\n\t\t\t\t\t},\n\t\t\t\t\tdescription: {\n\t\t\t\t\t\ttitle: \"Description\",\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"Description of the component\"\n\t\t\t\t\t},\n\t\t\t\t\trepoUrl: {\n\t\t\t\t\t\ttitle: \"Pick a repository\",\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\"ui:field\": \"RepoUrlPicker\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tsteps: [\n\t\t\t\t{\n\t\t\t\t\tid: \"fetch\",\n\t\t\t\t\tname: \"Fetch\",\n\t\t\t\t\taction: \"fetch:plain\",\n\t\t\t\t\tparameters: {\n\t\t\t\t\t\turl: \"./template\"\n\t\t\t\t\t},\n\t\t\t\t\t\"backstage:permissions\": {\n\t\t\t\t\t\ttags: [\n\t\t\t\t\t\t\t\"one\",\n\t\t\t\t\t\t\t\"two\"\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"publish\",\n\t\t\t\t\tname: \"Publish to GitHub\",\n\t\t\t\t\taction: \"publish:github\",\n\t\t\t\t\tparameters: {\n\t\t\t\t\t\trepoUrl: \"${{ parameters.repoUrl }}\"\n\t\t\t\t\t},\n\t\t\t\t\t\"if\": \"${{ parameters.repoUrl }}\"\n\t\t\t\t}\n\t\t\t],\n\t\t\toutput: {\n\t\t\t\tcatalogInfoUrl: \"${{ steps.publish.output.catalogInfoUrl }}\"\n\t\t\t}\n\t\t}\n\t}\n];\nvar allOf = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"scaffolder.backstage.io/v1beta3\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Template\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"steps\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of component created by the template. The software catalog accepts any type value, but an organization should take great care to establish a proper taxonomy for these. Tools including Backstage itself may read this field and behave differently depending on its value. For example, a website type component may present tooling in the Backstage interface that is specific to just websites.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"service\",\n\t\t\t\t\t\t\t\"website\",\n\t\t\t\t\t\t\t\"library\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The user (or group) owner of the template\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tparameters: {\n\t\t\t\t\t\toneOf: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\tdescription: \"The JSONSchema describing the inputs for the template.\",\n\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\"backstage:permissions\": {\n\t\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"Object used for authorizing the parameter\",\n\t\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t\ttags: {\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"string\"\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\tdescription: \"A list of separate forms to collect parameters.\",\n\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\tdescription: \"The JSONSchema describing the inputs for the template.\",\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t\"backstage:permissions\": {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Object used for authorizing the parameter\",\n\t\t\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t\t\ttags: {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"string\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\tpresentation: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tdescription: \"A way to redefine the labels for actionable buttons.\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tbackButtonText: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"A button which return the user to one step back.\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcreateButtonText: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"A button which start the execution of the template.\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\treviewButtonText: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"A button which open the review step to verify the input prior to start the execution.\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tEXPERIMENTAL_recovery: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tdescription: \"A task recovery section.\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tEXPERIMENTAL_strategy: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"Recovery strategy for your task (none or startOver). By default none\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tsteps: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"A list of steps to execute.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tdescription: \"A description of the step to execute.\",\n\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\"action\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"The ID of the step, which can be used to refer to its outputs.\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"The name of the step, which will be displayed in the UI during the scaffolding process.\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\taction: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"The name of the action to execute.\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tinput: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\tdescription: \"A templated object describing the inputs to the action.\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\"if\": {\n\t\t\t\t\t\t\t\t\ttype: [\n\t\t\t\t\t\t\t\t\t\t\"string\",\n\t\t\t\t\t\t\t\t\t\t\"boolean\"\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tdescription: \"A templated condition that skips the step when evaluated to false. If the condition is true or not defined, the step is executed. The condition is true, if the input is not `false`, `undefined`, `null`, `\\\"\\\"`, `0`, or `[]`.\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\"backstage:permissions\": {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\tdescription: \"Object used for authorizing the step\",\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\ttags: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"string\"\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\toutput: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tdescription: \"A templated object describing the outputs of the scaffolding task.\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tlinks: {\n\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\tdescription: \"A list of external hyperlinks, typically pointing to resources created or updated by the template\",\n\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\turl: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"A url in a standard uri format.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"https://github.com/my-org/my-new-repo\"\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tentityRef: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"An entity reference to an entity in the catalog.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"Component:default/my-app\"\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"A user friendly display name for the link.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"View new repo\"\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ticon: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"A key representing a visual icon to be displayed in the UI.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"dashboard\"\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttext: {\n\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\tdescription: \"A list of Markdown text blobs, like output data from the template.\",\n\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"A user friendly display name for the text.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"Output Content\"\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ticon: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"A key representing a visual icon to be displayed in the UI.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"dashboard\"\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"The text blob to display in the UI, rendered as Markdown.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"**hey** _I'm_ Markdown\"\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tadditionalProperties: {\n\t\t\t\t\t\t\ttype: \"string\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema = {\n\t$schema: $schema,\n\t$id: $id,\n\tdescription: description,\n\texamples: examples,\n\tallOf: allOf\n};\n\nconst validator = entityKindSchemaValidator(schema);\nconst templateEntityV1beta3Validator = {\n  // TODO(freben): Emulate the old KindValidator until we fix that type\n  async check(data) {\n    return validator(data) === data;\n  }\n};\nconst isTemplateEntityV1beta3 = (entity) => entity.apiVersion === \"scaffolder.backstage.io/v1beta3\" && entity.kind === \"Template\";\n\nexport { isTemplateEntityV1beta3, templateEntityV1beta3Validator };\n//# sourceMappingURL=index.esm.js.map\n","import { useApi, featureFlagsApiRef, useAnalytics, useApiHolder, useApp, errorApiRef, useRouteRef, alertApiRef } from '@backstage/core-plugin-api';\nimport { makeStyles, FormControl, Typography, createStyles, Paper, List, ListItem, ListItemIcon, ListItemText, LinearProgress, Stepper as Stepper$1, Step, StepLabel, Button, useTheme, Card, CardContent, Grid, Box, Divider, Chip, CardActions, CircularProgress, StepButton, FormControlLabel, Checkbox, TextField } from '@material-ui/core';\nimport React, { useState, useMemo, useCallback, useEffect } from 'react';\nimport { Draft07 } from 'json-schema-library';\nimport { parse, stringify } from 'flatted';\nimport { StructuredMetadataTable, MarkdownContent, ItemCardHeader, Link, UserIcon, Content, ItemCardGrid, ContentHeader, Progress, InfoCard, LogViewer } from '@backstage/core-components';\nimport validator from '@rjsf/validator-ajv8';\nimport qs from 'qs';\nimport useAsync from 'react-use/lib/useAsync';\nimport { s as scaffolderApiRef, S as SecretsContextProvider } from './esm/ref-e2ee478c.esm.js';\nimport cloneDeep from 'lodash/cloneDeep';\nimport { withTheme } from '@rjsf/core';\nimport { getUiOptions, getTemplate } from '@rjsf/utils';\nimport { Theme } from '@rjsf/material-ui';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport { RELATION_OWNED_BY, stringifyEntityRef, parseEntityRef } from '@backstage/catalog-model';\nimport { FavoriteEntity, getEntityRelations, EntityRefLinks, useEntityList, entityRouteRef, useEntityTypeFilter } from '@backstage/plugin-catalog-react';\nimport LanguageIcon from '@material-ui/icons/Language';\nimport { isTemplateEntityV1beta3 } from '@backstage/plugin-scaffolder-common';\nimport LinkIcon from '@material-ui/icons/Link';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport RemoveCircleOutline from '@material-ui/icons/RemoveCircleOutline';\nimport PanoramaFishEyeIcon from '@material-ui/icons/PanoramaFishEye';\nimport classNames from 'classnames';\nimport CheckCircleOutline from '@material-ui/icons/CheckCircleOutline';\nimport ErrorOutline from '@material-ui/icons/ErrorOutline';\nimport useInterval from 'react-use/lib/useInterval';\nimport { DateTime, Interval } from 'luxon';\nimport humanizeDuration from 'humanize-duration';\nimport { useMountEffect } from '@react-hookz/web';\nimport { makeStyles as makeStyles$1 } from '@material-ui/core/styles';\nimport capitalize from 'lodash/capitalize';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Autocomplete } from '@material-ui/lab';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemIcon$1 from '@material-ui/core/ListItemIcon';\nimport ListItemText$1 from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Popover from '@material-ui/core/Popover';\nimport CreateComponentIcon from '@material-ui/icons/AddCircleOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport List$1 from '@material-ui/icons/List';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport '@backstage/version-bridge';\n\nfunction isObject$1(value) {\n  return typeof value === \"object\" && value !== null && !Array.isArray(value);\n}\nfunction extractUiSchema(schema, uiSchema) {\n  if (!isObject$1(schema)) {\n    return;\n  }\n  const {\n    properties,\n    items,\n    anyOf,\n    oneOf,\n    allOf,\n    dependencies,\n    then,\n    else: _else\n  } = schema;\n  for (const propName in schema) {\n    if (!schema.hasOwnProperty(propName)) {\n      continue;\n    }\n    if (propName.startsWith(\"ui:\")) {\n      uiSchema[propName] = schema[propName];\n      delete schema[propName];\n    }\n  }\n  if (isObject$1(properties)) {\n    for (const propName in properties) {\n      if (!properties.hasOwnProperty(propName)) {\n        continue;\n      }\n      const schemaNode = properties[propName];\n      if (!isObject$1(schemaNode)) {\n        continue;\n      }\n      if (!isObject$1(uiSchema[propName])) {\n        const innerUiSchema = {};\n        uiSchema[propName] = innerUiSchema;\n      }\n      extractUiSchema(schemaNode, uiSchema[propName]);\n    }\n  }\n  if (isObject$1(items)) {\n    const innerUiSchema = {};\n    uiSchema.items = innerUiSchema;\n    extractUiSchema(items, innerUiSchema);\n  }\n  if (Array.isArray(anyOf)) {\n    for (const schemaNode of anyOf) {\n      if (!isObject$1(schemaNode)) {\n        continue;\n      }\n      extractUiSchema(schemaNode, uiSchema);\n    }\n  }\n  if (Array.isArray(oneOf)) {\n    for (const schemaNode of oneOf) {\n      if (!isObject$1(schemaNode)) {\n        continue;\n      }\n      extractUiSchema(schemaNode, uiSchema);\n    }\n  }\n  if (Array.isArray(allOf)) {\n    for (const schemaNode of allOf) {\n      if (!isObject$1(schemaNode)) {\n        continue;\n      }\n      extractUiSchema(schemaNode, uiSchema);\n    }\n  }\n  if (isObject$1(dependencies)) {\n    for (const depName of Object.keys(dependencies)) {\n      const schemaNode = dependencies[depName];\n      if (!isObject$1(schemaNode)) {\n        continue;\n      }\n      extractUiSchema(schemaNode, uiSchema);\n    }\n  }\n  if (isObject$1(then)) {\n    extractUiSchema(then, uiSchema);\n  }\n  if (isObject$1(_else)) {\n    extractUiSchema(_else, uiSchema);\n  }\n}\nconst extractSchemaFromStep = (inputStep) => {\n  const uiSchema = {};\n  const returnSchema = parse(stringify(inputStep));\n  extractUiSchema(returnSchema, uiSchema);\n  return { uiSchema, schema: returnSchema };\n};\nconst createFieldValidation = () => {\n  const fieldValidation = {\n    __errors: [],\n    addError: (message) => {\n      var _a;\n      (_a = fieldValidation.__errors) == null ? void 0 : _a.push(message);\n    }\n  };\n  return fieldValidation;\n};\n\nfunction isFieldValidation(error) {\n  return !!error && \"__errors\" in error;\n}\nfunction hasErrors(errors) {\n  var _a;\n  if (!errors) {\n    return false;\n  }\n  for (const error of Object.values(errors)) {\n    if (isFieldValidation(error)) {\n      if (((_a = error.__errors) != null ? _a : []).length > 0) {\n        return true;\n      }\n      continue;\n    }\n    if (hasErrors(error)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction isObject(value) {\n  return typeof value === \"object\" && value !== null && !Array.isArray(value);\n}\n\nconst createAsyncValidators = (rootSchema, validators, context) => {\n  async function validate(formData, pathPrefix = \"#\", current = formData) {\n    var _a, _b;\n    const parsedSchema = new Draft07(rootSchema);\n    const formValidation = {};\n    const validateForm = async (validatorName, key, value, schema, uiSchema) => {\n      const validator = validators[validatorName];\n      if (validator) {\n        const fieldValidation = createFieldValidation();\n        try {\n          await validator(value, fieldValidation, {\n            ...context,\n            formData,\n            schema,\n            uiSchema\n          });\n        } catch (ex) {\n          fieldValidation.addError(ex.message);\n        }\n        formValidation[key] = fieldValidation;\n      }\n    };\n    for (const [key, value] of Object.entries(current)) {\n      const path = `${pathPrefix}/${key}`;\n      const definitionInSchema = parsedSchema.getSchema(path, formData);\n      const { schema, uiSchema } = extractSchemaFromStep(definitionInSchema);\n      const hasItems = definitionInSchema && definitionInSchema.items;\n      const doValidateItem = async (propValue, itemSchema, itemUiSchema) => {\n        await validateForm(\n          propValue[\"ui:field\"],\n          key,\n          value,\n          itemSchema,\n          itemUiSchema\n        );\n      };\n      const doValidate = async (propValue) => {\n        if (\"ui:field\" in propValue) {\n          const { schema: itemsSchema, uiSchema: itemsUiSchema } = extractSchemaFromStep(definitionInSchema.items);\n          await doValidateItem(propValue, itemsSchema, itemsUiSchema);\n        }\n      };\n      if (definitionInSchema && \"ui:field\" in definitionInSchema) {\n        await doValidateItem(definitionInSchema, schema, uiSchema);\n      } else if (hasItems && \"ui:field\" in definitionInSchema.items) {\n        await doValidate(definitionInSchema.items);\n      } else if (hasItems && definitionInSchema.items.type === \"object\") {\n        const properties = (_b = (_a = definitionInSchema.items) == null ? void 0 : _a.properties) != null ? _b : [];\n        for (const [, propValue] of Object.entries(properties)) {\n          await doValidate(propValue);\n        }\n      } else if (isObject(value)) {\n        formValidation[key] = await validate(formData, path, value);\n      }\n    }\n    return formValidation;\n  }\n  return async (formData) => {\n    return await validate(formData);\n  };\n};\n\nconst ReviewState = (props) => {\n  const reviewData = Object.fromEntries(\n    Object.entries(props.formState).map(([key, value]) => {\n      var _a;\n      for (const step of props.schemas) {\n        const parsedSchema = new Draft07(step.mergedSchema);\n        const definitionInSchema = parsedSchema.getSchema(\n          `#/${key}`,\n          props.formState\n        );\n        if (definitionInSchema) {\n          const backstageReviewOptions = (_a = definitionInSchema[\"ui:backstage\"]) == null ? void 0 : _a.review;\n          if (backstageReviewOptions) {\n            if (backstageReviewOptions.mask) {\n              return [key, backstageReviewOptions.mask];\n            }\n            if (backstageReviewOptions.show === false) {\n              return [];\n            }\n          }\n          if (definitionInSchema[\"ui:widget\"] === \"password\") {\n            return [key, \"******\"];\n          }\n          if (definitionInSchema.enum && definitionInSchema.enumNames) {\n            return [\n              key,\n              definitionInSchema.enumNames[definitionInSchema.enum.indexOf(value)] || value\n            ];\n          }\n        }\n      }\n      return [key, value];\n    }).filter((prop) => prop.length > 0)\n  );\n  return /* @__PURE__ */ React.createElement(StructuredMetadataTable, { metadata: reviewData });\n};\n\nconst useTemplateSchema = (manifest) => {\n  const featureFlags = useApi(featureFlagsApiRef);\n  const steps = manifest.steps.map(({ title, description, schema }) => ({\n    title,\n    description,\n    mergedSchema: schema,\n    ...extractSchemaFromStep(schema)\n  }));\n  const returningSteps = steps.filter((step) => {\n    var _a;\n    const stepFeatureFlag = (_a = step.uiSchema[\"ui:backstage\"]) == null ? void 0 : _a.featureFlag;\n    return stepFeatureFlag ? featureFlags.isActive(stepFeatureFlag) : true;\n  }).map((step) => {\n    var _a, _b, _c, _d;\n    const strippedSchema = {\n      ...step,\n      schema: {\n        ...step.schema,\n        // Title is rendered at the top of the page, so let's ignore this from jsonschemaform\n        title: void 0\n      }\n    };\n    if (((_a = step.schema) == null ? void 0 : _a.properties) || !((_b = step.schema) == null ? void 0 : _b.dependencies)) {\n      strippedSchema.schema.properties = Object.fromEntries(\n        Object.entries((_d = (_c = step.schema) == null ? void 0 : _c.properties) != null ? _d : {}).filter(\n          ([key]) => {\n            var _a2, _b2;\n            const stepFeatureFlag = (_b2 = (_a2 = step.uiSchema[key]) == null ? void 0 : _a2[\"ui:backstage\"]) == null ? void 0 : _b2.featureFlag;\n            return stepFeatureFlag ? featureFlags.isActive(stepFeatureFlag) : true;\n          }\n        )\n      );\n    }\n    return strippedSchema;\n  });\n  return {\n    presentation: manifest.presentation,\n    steps: returningSteps\n  };\n};\n\nconst useFormDataFromQuery = (initialState) => {\n  return useState(() => {\n    if (initialState) {\n      return initialState;\n    }\n    const query = qs.parse(window.location.search, {\n      ignoreQueryPrefix: true\n    });\n    try {\n      return JSON.parse(query.formData);\n    } catch (e) {\n      return {};\n    }\n  });\n};\n\nconst useTemplateParameterSchema = (templateRef) => {\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const { value, loading, error } = useAsync(\n    () => scaffolderApi.getTemplateParameterSchema(templateRef),\n    [scaffolderApi, templateRef]\n  );\n  return {\n    manifest: value,\n    loading,\n    error\n  };\n};\n\nconst useFilteredSchemaProperties = (manifest) => {\n  const featureFlagKey = \"backstage:featureFlag\";\n  const featureFlagApi = useApi(featureFlagsApiRef);\n  if (!manifest) {\n    return void 0;\n  }\n  const filteredSteps = manifest == null ? void 0 : manifest.steps.filter((step) => {\n    const featureFlag = step.schema[featureFlagKey];\n    return typeof featureFlag !== \"string\" || featureFlagApi.isActive(featureFlag);\n  }).map((step) => {\n    var _a;\n    const filteredStep = cloneDeep(step);\n    const removedPropertyKeys = [];\n    if (filteredStep.schema.properties) {\n      filteredStep.schema.properties = Object.fromEntries(\n        Object.entries(filteredStep.schema.properties).filter(\n          ([key, value]) => {\n            if (value[featureFlagKey]) {\n              if (featureFlagApi.isActive(value[featureFlagKey])) {\n                return true;\n              }\n              removedPropertyKeys.push(key);\n              return false;\n            }\n            return true;\n          }\n        )\n      );\n      filteredStep.schema.required = Array.isArray(\n        filteredStep.schema.required\n      ) ? (_a = filteredStep.schema.required) == null ? void 0 : _a.filter(\n        (r) => !removedPropertyKeys.includes(r)\n      ) : filteredStep.schema.required;\n    }\n    return filteredStep;\n  });\n  return { ...manifest, steps: filteredSteps };\n};\n\nconst useTransformSchemaToProps = (step, options = {}) => {\n  var _a;\n  const { layouts = [] } = options;\n  const objectFieldTemplate = step == null ? void 0 : step.uiSchema[\"ui:ObjectFieldTemplate\"];\n  if (typeof objectFieldTemplate !== \"string\") {\n    return step;\n  }\n  const Layout = (_a = layouts.find(\n    (layout) => layout.name === objectFieldTemplate\n  )) == null ? void 0 : _a.component;\n  if (!Layout) {\n    return step;\n  }\n  return {\n    ...step,\n    uiSchema: {\n      ...step.uiSchema,\n      [\"ui:ObjectFieldTemplate\"]: Layout\n    }\n  };\n};\n\nconst DescriptionField = ({ description }) => description && /* @__PURE__ */ React.createElement(MarkdownContent, { content: description, linkTarget: \"_blank\" });\n\nvar FieldOverrides = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  DescriptionField: DescriptionField\n});\n\nconst useStyles$b = makeStyles((theme) => ({\n  markdownDescription: {\n    fontSize: theme.typography.caption.fontSize,\n    margin: 0,\n    color: theme.palette.text.secondary,\n    \"& :first-child\": {\n      margin: 0,\n      marginTop: \"3px\"\n      // to keep the standard browser padding\n    }\n  }\n}));\nconst ScaffolderField = (props) => {\n  const {\n    children,\n    displayLabel = true,\n    rawErrors = [],\n    errors,\n    help,\n    rawDescription,\n    required,\n    disabled\n  } = props;\n  const classes = useStyles$b();\n  return /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      fullWidth: true,\n      error: rawErrors.length ? true : false,\n      required,\n      disabled\n    },\n    children,\n    displayLabel && rawDescription ? /* @__PURE__ */ React.createElement(\n      MarkdownContent,\n      {\n        content: rawDescription,\n        className: classes.markdownDescription\n      }\n    ) : null,\n    errors,\n    help\n  );\n};\n\nconst FieldTemplate = (props) => {\n  const {\n    id,\n    children,\n    classNames,\n    style,\n    disabled,\n    displayLabel,\n    hidden,\n    label,\n    onDropPropertyClick,\n    onKeyChange,\n    readonly,\n    required,\n    rawErrors = [],\n    errors,\n    help,\n    rawDescription,\n    schema,\n    uiSchema,\n    registry\n  } = props;\n  const uiOptions = getUiOptions(uiSchema);\n  const WrapIfAdditionalTemplate = getTemplate(\"WrapIfAdditionalTemplate\", registry, uiOptions);\n  if (hidden) {\n    return /* @__PURE__ */ React.createElement(\"div\", { style: { display: \"none\" } }, children);\n  }\n  return /* @__PURE__ */ React.createElement(\n    WrapIfAdditionalTemplate,\n    {\n      classNames,\n      style,\n      disabled,\n      id,\n      label,\n      onDropPropertyClick,\n      onKeyChange,\n      readonly,\n      required,\n      schema,\n      uiSchema,\n      registry\n    },\n    /* @__PURE__ */ React.createElement(\n      ScaffolderField,\n      {\n        displayLabel,\n        rawErrors,\n        help,\n        disabled,\n        rawDescription,\n        errors,\n        required\n      },\n      children\n    )\n  );\n};\n\nconst useStyles$a = makeStyles((theme) => ({\n  markdownDescription: {\n    fontSize: theme.typography.caption.fontSize,\n    margin: 0,\n    color: theme.palette.text.secondary,\n    \"& :first-child\": {\n      margin: 0,\n      marginTop: \"3px\"\n      // to keep the standard browser padding\n    }\n  }\n}));\nconst DescriptionFieldTemplate = (props) => {\n  const { id, description } = props;\n  const classes = useStyles$a();\n  if (description) {\n    if (typeof description === \"string\") {\n      return /* @__PURE__ */ React.createElement(\n        MarkdownContent,\n        {\n          content: description,\n          className: classes.markdownDescription\n        }\n      );\n    }\n    return /* @__PURE__ */ React.createElement(Typography, { id, variant: \"subtitle2\", style: { marginTop: \"5px\" } }, description);\n  }\n  return null;\n};\n\nconst WrappedForm = withTheme(Theme);\nconst Form = (props) => {\n  const wrappedFields = React.useMemo(\n    () => {\n      var _a;\n      return Object.fromEntries(\n        Object.entries((_a = props.fields) != null ? _a : {}).map(([key, Component]) => [\n          key,\n          (wrapperProps) => {\n            var _a2, _b;\n            return /* @__PURE__ */ React.createElement(\n              Component,\n              {\n                ...wrapperProps,\n                uiSchema: (_a2 = wrapperProps.uiSchema) != null ? _a2 : {},\n                formData: wrapperProps.formData,\n                rawErrors: (_b = wrapperProps.rawErrors) != null ? _b : []\n              }\n            );\n          }\n        ])\n      );\n    },\n    [props.fields]\n  );\n  const templates = React.useMemo(\n    () => ({\n      FieldTemplate,\n      DescriptionFieldTemplate,\n      ...props.templates\n    }),\n    [props.templates]\n  );\n  return /* @__PURE__ */ React.createElement(WrappedForm, { ...props, templates, fields: wrappedFields });\n};\n\nconst useStyles$9 = makeStyles(\n  (_theme) => createStyles({\n    list: {\n      width: \"100%\"\n    },\n    text: {\n      textWrap: \"wrap\"\n    }\n  })\n);\nconst ErrorListTemplate = ({ errors }) => {\n  const classes = useStyles$9();\n  return /* @__PURE__ */ React.createElement(Paper, null, /* @__PURE__ */ React.createElement(List, { dense: true, className: classes.list }, errors.map((error, index) => /* @__PURE__ */ React.createElement(ListItem, { key: index }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(ErrorIcon, { color: \"error\" })), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      classes: { primary: classes.text },\n      primary: error.stack\n    }\n  )))));\n};\n\nconst useStyles$8 = makeStyles((theme) => ({\n  backButton: {\n    marginRight: theme.spacing(1)\n  },\n  footer: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"right\",\n    marginTop: theme.spacing(2)\n  },\n  formWrapper: {\n    padding: theme.spacing(2)\n  }\n}));\nconst Stepper = (stepperProps) => {\n  var _a, _b, _c, _d, _e, _f, _g;\n  const { layouts = [], components = {}, ...props } = stepperProps;\n  const {\n    ReviewStateComponent = ReviewState,\n    ReviewStepComponent,\n    backButtonText = \"Back\",\n    createButtonText = \"Create\",\n    reviewButtonText = \"Review\"\n  } = components;\n  const analytics = useAnalytics();\n  const { presentation, steps } = useTemplateSchema(props.manifest);\n  const apiHolder = useApiHolder();\n  const [activeStep, setActiveStep] = useState(0);\n  const [isValidating, setIsValidating] = useState(false);\n  const [formState, setFormState] = useFormDataFromQuery(props.initialState);\n  const [errors, setErrors] = useState();\n  const styles = useStyles$8();\n  const extensions = useMemo(() => {\n    return Object.fromEntries(\n      props.extensions.map(({ name, component }) => [name, component])\n    );\n  }, [props.extensions]);\n  const fields = useMemo(\n    () => ({ ...FieldOverrides, ...extensions }),\n    [extensions]\n  );\n  const validators = useMemo(() => {\n    return Object.fromEntries(\n      props.extensions.map(({ name, validation: validation2 }) => [name, validation2])\n    );\n  }, [props.extensions]);\n  const validation = useMemo(() => {\n    var _a2;\n    return createAsyncValidators((_a2 = steps[activeStep]) == null ? void 0 : _a2.mergedSchema, validators, {\n      apiHolder\n    });\n  }, [steps, activeStep, validators, apiHolder]);\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n  const handleChange = useCallback(\n    (e) => setFormState((current) => ({ ...current, ...e.formData })),\n    [setFormState]\n  );\n  const handleCreate = useCallback(() => {\n    var _a2;\n    props.onCreate(formState);\n    const name = typeof formState.name === \"string\" ? formState.name : void 0;\n    analytics.captureEvent(\"create\", (_a2 = name != null ? name : props.templateName) != null ? _a2 : \"unknown\");\n  }, [props, formState, analytics]);\n  const currentStep = useTransformSchemaToProps(steps[activeStep], { layouts });\n  const handleNext = async ({\n    formData = {}\n  }) => {\n    setErrors(void 0);\n    setIsValidating(true);\n    const returnedValidation = await validation(formData);\n    setIsValidating(false);\n    if (hasErrors(returnedValidation)) {\n      setErrors(returnedValidation);\n    } else {\n      setErrors(void 0);\n      setActiveStep((prevActiveStep) => {\n        const stepNum = prevActiveStep + 1;\n        analytics.captureEvent(\"click\", `Next Step (${stepNum})`);\n        return stepNum;\n      });\n    }\n    setFormState((current) => ({ ...current, ...formData }));\n  };\n  const backLabel = (_b = (_a = presentation == null ? void 0 : presentation.buttonLabels) == null ? void 0 : _a.backButtonText) != null ? _b : backButtonText;\n  const createLabel = (_d = (_c = presentation == null ? void 0 : presentation.buttonLabels) == null ? void 0 : _c.createButtonText) != null ? _d : createButtonText;\n  const reviewLabel = (_f = (_e = presentation == null ? void 0 : presentation.buttonLabels) == null ? void 0 : _e.reviewButtonText) != null ? _f : reviewButtonText;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, isValidating && /* @__PURE__ */ React.createElement(LinearProgress, { variant: \"indeterminate\" }), /* @__PURE__ */ React.createElement(\n    Stepper$1,\n    {\n      activeStep,\n      alternativeLabel: true,\n      variant: \"elevation\",\n      style: { overflowX: \"auto\" }\n    },\n    steps.map((step, index) => {\n      const isAllowedLabelClick = activeStep > index;\n      return /* @__PURE__ */ React.createElement(Step, { key: index }, /* @__PURE__ */ React.createElement(\n        StepLabel,\n        {\n          \"aria-label\": `Step ${index + 1}`,\n          style: { cursor: isAllowedLabelClick ? \"pointer\" : \"default\" },\n          onClick: () => {\n            if (isAllowedLabelClick)\n              setActiveStep(index);\n          }\n        },\n        step.title\n      ));\n    }),\n    /* @__PURE__ */ React.createElement(Step, null, /* @__PURE__ */ React.createElement(StepLabel, null, \"Review\"))\n  ), /* @__PURE__ */ React.createElement(\"div\", { className: styles.formWrapper }, activeStep < steps.length ? /* @__PURE__ */ React.createElement(\n    Form,\n    {\n      validator,\n      extraErrors: errors,\n      formData: formState,\n      formContext: { formData: formState },\n      schema: currentStep.schema,\n      uiSchema: currentStep.uiSchema,\n      onSubmit: handleNext,\n      fields,\n      showErrorList: \"top\",\n      templates: { ErrorListTemplate },\n      onChange: handleChange,\n      experimental_defaultFormStateBehavior: {\n        allOf: \"populateDefaults\"\n      },\n      ...(_g = props.formProps) != null ? _g : {}\n    },\n    /* @__PURE__ */ React.createElement(\"div\", { className: styles.footer }, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        onClick: handleBack,\n        className: styles.backButton,\n        disabled: activeStep < 1 || isValidating\n      },\n      backLabel\n    ), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"primary\",\n        type: \"submit\",\n        disabled: isValidating\n      },\n      activeStep === steps.length - 1 ? reviewLabel : \"Next\"\n    ))\n  ) : (\n    // TODO: potentially move away from this pattern, deprecate?\n    ReviewStepComponent ? /* @__PURE__ */ React.createElement(\n      ReviewStepComponent,\n      {\n        disableButtons: isValidating,\n        formData: formState,\n        handleBack,\n        handleReset: () => {\n        },\n        steps,\n        handleCreate\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ReviewStateComponent, { formState, schemas: steps }), /* @__PURE__ */ React.createElement(\"div\", { className: styles.footer }, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        onClick: handleBack,\n        className: styles.backButton,\n        disabled: activeStep < 1\n      },\n      \"Back\"\n    ), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: handleCreate\n      },\n      createLabel\n    )))\n  )));\n};\n\nconst useStyles$7 = makeStyles(() => ({\n  header: {\n    backgroundImage: ({ cardBackgroundImage }) => cardBackgroundImage,\n    color: ({ cardFontColor }) => cardFontColor\n  },\n  subtitleWrapper: {\n    display: \"flex\",\n    justifyContent: \"space-between\"\n  }\n}));\nconst CardHeader = (props) => {\n  const {\n    template: {\n      metadata: { title, name },\n      spec: { type }\n    }\n  } = props;\n  const { getPageTheme } = useTheme();\n  const themeForType = getPageTheme({ themeId: type });\n  const styles = useStyles$7({\n    cardFontColor: themeForType.fontColor,\n    cardBackgroundImage: themeForType.backgroundImage\n  });\n  const SubtitleComponent = /* @__PURE__ */ React.createElement(\"div\", { className: styles.subtitleWrapper }, /* @__PURE__ */ React.createElement(\"div\", null, type), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(FavoriteEntity, { entity: props.template, style: { padding: 0 } })));\n  return /* @__PURE__ */ React.createElement(\n    ItemCardHeader,\n    {\n      title: title != null ? title : name,\n      subtitle: SubtitleComponent,\n      classes: { root: styles.header }\n    }\n  );\n};\n\nconst useStyles$6 = makeStyles(() => ({\n  linkText: {\n    display: \"inline-flex\",\n    alignItems: \"center\"\n  }\n}));\nconst CardLink = ({ icon: Icon, text, url }) => {\n  const styles = useStyles$6();\n  return /* @__PURE__ */ React.createElement(\"div\", { className: styles.linkText }, /* @__PURE__ */ React.createElement(Icon, { fontSize: \"small\" }), /* @__PURE__ */ React.createElement(Link, { style: { marginLeft: \"8px\" }, to: url }, text || url));\n};\n\nconst useStyles$5 = makeStyles((theme) => ({\n  box: {\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    display: \"-webkit-box\",\n    \"-webkit-line-clamp\": 10,\n    \"-webkit-box-orient\": \"vertical\"\n  },\n  markdown: {\n    /** to make the styles for React Markdown not leak into the description */\n    \"& :first-child\": {\n      margin: 0\n    }\n  },\n  label: {\n    color: theme.palette.text.secondary,\n    textTransform: \"uppercase\",\n    fontWeight: \"bold\",\n    letterSpacing: 0.5,\n    lineHeight: 1,\n    fontSize: \"0.75rem\"\n  },\n  footer: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    flex: 1,\n    alignItems: \"center\"\n  },\n  ownedBy: {\n    display: \"flex\",\n    alignItems: \"center\",\n    flex: 1,\n    color: theme.palette.link\n  }\n}));\nconst TemplateCard = (props) => {\n  var _a, _b, _c, _d, _e, _f, _g;\n  const { template } = props;\n  const styles = useStyles$5();\n  const ownedByRelations = getEntityRelations(template, RELATION_OWNED_BY);\n  const app = useApp();\n  const iconResolver = (key) => {\n    var _a2;\n    return key ? (_a2 = app.getSystemIcon(key)) != null ? _a2 : LanguageIcon : LanguageIcon;\n  };\n  const hasTags = !!((_a = template.metadata.tags) == null ? void 0 : _a.length);\n  const hasLinks = !!((_b = props.additionalLinks) == null ? void 0 : _b.length) || !!((_c = template.metadata.links) == null ? void 0 : _c.length);\n  const displayDefaultDivider = !hasTags && !hasLinks;\n  return /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(CardHeader, { template }), /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 2 }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Box, { className: styles.box }, /* @__PURE__ */ React.createElement(\n    MarkdownContent,\n    {\n      className: styles.markdown,\n      content: (_d = template.metadata.description) != null ? _d : \"No description\"\n    }\n  ))), displayDefaultDivider && /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Divider, { \"data-testid\": \"template-card-separator\" })), hasTags && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Divider, { \"data-testid\": \"template-card-separator--tags\" })), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 2 }, (_e = template.metadata.tags) == null ? void 0 : _e.map((tag) => /* @__PURE__ */ React.createElement(Grid, { key: `grid-${tag}`, item: true }, /* @__PURE__ */ React.createElement(\n    Chip,\n    {\n      style: { margin: 0 },\n      size: \"small\",\n      label: tag,\n      key: tag\n    }\n  )))))), hasLinks && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Divider, { \"data-testid\": \"template-card-separator--links\" })), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 2 }, (_f = props.additionalLinks) == null ? void 0 : _f.map(({ icon, text, url }, index) => /* @__PURE__ */ React.createElement(Grid, { className: styles.linkText, item: true, xs: 6, key: index }, /* @__PURE__ */ React.createElement(CardLink, { icon, text, url }))), (_g = template.metadata.links) == null ? void 0 : _g.map(\n    ({ url, icon, title }, index) => /* @__PURE__ */ React.createElement(Grid, { className: styles.linkText, item: true, xs: 6, key: index }, /* @__PURE__ */ React.createElement(\n      CardLink,\n      {\n        icon: iconResolver(icon),\n        text: title || url,\n        url\n      }\n    ))\n  )))))), /* @__PURE__ */ React.createElement(CardActions, { style: { padding: \"16px\", flex: 1, alignItems: \"flex-end\" } }, /* @__PURE__ */ React.createElement(\"div\", { className: styles.footer }, /* @__PURE__ */ React.createElement(\"div\", { className: styles.ownedBy }, ownedByRelations.length > 0 && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(UserIcon, { fontSize: \"small\" }), /* @__PURE__ */ React.createElement(\n    EntityRefLinks,\n    {\n      style: { marginLeft: \"8px\" },\n      entityRefs: ownedByRelations,\n      defaultKind: \"Group\",\n      hideIcons: true\n    }\n  ))), /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      size: \"small\",\n      variant: \"outlined\",\n      color: \"primary\",\n      onClick: () => {\n        var _a2;\n        return (_a2 = props.onSelected) == null ? void 0 : _a2.call(props, template);\n      }\n    },\n    \"Choose\"\n  ))));\n};\n\nconst TemplateGroup = (props) => {\n  const {\n    templates,\n    title,\n    components: { CardComponent } = {},\n    onSelected\n  } = props;\n  const titleComponent = typeof title === \"string\" ? /* @__PURE__ */ React.createElement(ContentHeader, { title }) : title;\n  if (templates.length === 0) {\n    return null;\n  }\n  const Card = CardComponent || TemplateCard;\n  return /* @__PURE__ */ React.createElement(Content, null, titleComponent, /* @__PURE__ */ React.createElement(ItemCardGrid, null, templates.map(({ template, additionalLinks }) => /* @__PURE__ */ React.createElement(\n    Card,\n    {\n      key: stringifyEntityRef(template),\n      additionalLinks,\n      template,\n      onSelected\n    }\n  ))));\n};\n\nconst TemplateGroups = (props) => {\n  const { loading, error, entities } = useEntityList();\n  const { groups, templateFilter, TemplateCardComponent, onTemplateSelected } = props;\n  const errorApi = useApi(errorApiRef);\n  const onSelected = useCallback(\n    (template) => {\n      onTemplateSelected == null ? void 0 : onTemplateSelected(template);\n    },\n    [onTemplateSelected]\n  );\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (error) {\n    errorApi.post(error);\n    return null;\n  }\n  if (!entities || !entities.length) {\n    return /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\" }, \"No templates found that match your filter. Learn more about\", \" \", /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/software-templates/adding-templates\" }, \"adding templates\"), \".\");\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, groups.map(({ title, filter }, index) => {\n    const templates = entities.filter(isTemplateEntityV1beta3).filter((e) => templateFilter ? templateFilter(e) : true).filter(filter).map((template) => {\n      var _a, _b;\n      const additionalLinks = (_b = (_a = props.additionalLinksForEntity) == null ? void 0 : _a.call(props, template)) != null ? _b : [];\n      return {\n        template,\n        additionalLinks\n      };\n    });\n    return /* @__PURE__ */ React.createElement(\n      TemplateGroup,\n      {\n        key: index,\n        templates,\n        title,\n        components: { CardComponent: TemplateCardComponent },\n        onSelected\n      }\n    );\n  }));\n};\n\nconst useStyles$4 = makeStyles({\n  markdown: {\n    /** to make the styles for React Markdown not leak into the description */\n    \"& :first-child\": {\n      marginTop: 0\n    },\n    \"& :last-child\": {\n      marginBottom: 0\n    }\n  }\n});\nconst Workflow = (workflowProps) => {\n  var _a;\n  const { title, description, namespace, templateName, ...props } = workflowProps;\n  const styles = useStyles$4();\n  const templateRef = stringifyEntityRef({\n    kind: \"Template\",\n    namespace,\n    name: templateName\n  });\n  const errorApi = useApi(errorApiRef);\n  const { loading, manifest, error } = useTemplateParameterSchema(templateRef);\n  const sortedManifest = useFilteredSchemaProperties(manifest);\n  useEffect(() => {\n    if (error) {\n      errorApi.post(new Error(`Failed to load template, ${error}`));\n    }\n  }, [error, errorApi]);\n  if (error) {\n    return props.onError(error);\n  }\n  return /* @__PURE__ */ React.createElement(Content, null, loading && /* @__PURE__ */ React.createElement(Progress, null), sortedManifest && /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title: title != null ? title : sortedManifest.title,\n      subheader: /* @__PURE__ */ React.createElement(\n        MarkdownContent,\n        {\n          className: styles.markdown,\n          content: (_a = description != null ? description : sortedManifest.description) != null ? _a : \"No description\"\n        }\n      ),\n      noPadding: true,\n      titleTypographyProps: { component: \"h2\" }\n    },\n    /* @__PURE__ */ React.createElement(\n      Stepper,\n      {\n        manifest: sortedManifest,\n        templateName,\n        ...props\n      }\n    )\n  ));\n};\nconst EmbeddableWorkflow = (props) => /* @__PURE__ */ React.createElement(SecretsContextProvider, null, /* @__PURE__ */ React.createElement(Workflow, { ...props }));\n\nconst useStyles$3 = makeStyles({\n  root: {\n    \"&:hover\": {\n      textDecoration: \"none\"\n    }\n  }\n});\nconst LinkOutputs = (props) => {\n  const { links = [] } = props.output;\n  const classes = useStyles$3();\n  const app = useApp();\n  const entityRoute = useRouteRef(entityRouteRef);\n  const iconResolver = (key) => {\n    var _a;\n    return (_a = app.getSystemIcon(key)) != null ? _a : LinkIcon;\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, links.filter(({ url, entityRef }) => url || entityRef).map(({ url, entityRef, title, icon }) => {\n    if (entityRef) {\n      const entityName = parseEntityRef(entityRef);\n      const target = entityRoute(entityName);\n      return { title, icon, url: target };\n    }\n    return { title, icon, url };\n  }).map(({ url, title, icon }, i) => {\n    const Icon = iconResolver(icon);\n    return /* @__PURE__ */ React.createElement(Link, { to: url, key: i, classes: { root: classes.root } }, /* @__PURE__ */ React.createElement(Button, { startIcon: /* @__PURE__ */ React.createElement(Icon, null), component: \"div\", color: \"primary\" }, title));\n  }));\n};\n\nconst TextOutputs = (props) => {\n  const {\n    output: { text = [] },\n    index,\n    setIndex\n  } = props;\n  const app = useApp();\n  const iconResolver = (key) => {\n    var _a;\n    return (_a = app.getSystemIcon(key)) != null ? _a : DescriptionIcon;\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, text.filter(({ content }) => content !== void 0).map(({ title, icon }, i) => {\n    const Icon = iconResolver(icon);\n    return /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        key: i,\n        startIcon: /* @__PURE__ */ React.createElement(Icon, null),\n        component: \"div\",\n        color: \"primary\",\n        onClick: () => {\n          if (index !== i) {\n            setIndex == null ? void 0 : setIndex(i);\n          }\n        },\n        variant: index === i ? \"outlined\" : void 0\n      },\n      title\n    );\n  }));\n};\n\nconst DefaultTemplateOutputs = (props) => {\n  var _a, _b;\n  const { output } = props;\n  const [textOutputIndex, setTextOutputIndex] = useState(\n    void 0\n  );\n  useEffect(() => {\n    if (textOutputIndex === void 0 && (output == null ? void 0 : output.text)) {\n      const defaultIndex = output.text.findIndex(\n        (t) => t.default\n      );\n      setTextOutputIndex(defaultIndex >= 0 ? defaultIndex : 0);\n    }\n  }, [textOutputIndex, output]);\n  const textOutput = useMemo(\n    () => {\n      var _a2;\n      return textOutputIndex !== void 0 ? (_a2 = output == null ? void 0 : output.text) == null ? void 0 : _a2[textOutputIndex] : null;\n    },\n    [output, textOutputIndex]\n  );\n  if (!output) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { paddingBottom: 2 }, /* @__PURE__ */ React.createElement(Paper, null, /* @__PURE__ */ React.createElement(Box, { padding: 2, justifyContent: \"center\", display: \"flex\", gridGap: 16 }, /* @__PURE__ */ React.createElement(\n    TextOutputs,\n    {\n      output,\n      index: textOutputIndex,\n      setIndex: setTextOutputIndex\n    }\n  ), /* @__PURE__ */ React.createElement(LinkOutputs, { output })))), textOutput ? /* @__PURE__ */ React.createElement(Box, { paddingBottom: 2 }, /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title: (_a = textOutput.title) != null ? _a : \"Text Output\",\n      noPadding: true,\n      titleTypographyProps: { component: \"h2\" }\n    },\n    /* @__PURE__ */ React.createElement(Box, { padding: 2, height: \"100%\" }, /* @__PURE__ */ React.createElement(MarkdownContent, { content: (_b = textOutput.content) != null ? _b : \"\" }))\n  )) : null);\n};\n\nconst useStepIconStyles = makeStyles((theme) => ({\n  root: {\n    color: theme.palette.text.disabled\n  },\n  completed: {\n    color: theme.palette.status.ok\n  },\n  error: {\n    color: theme.palette.status.error\n  }\n}));\nconst StepIcon = (props) => {\n  const classes = useStepIconStyles();\n  const { active, completed, error, skipped } = props;\n  const getMiddle = () => {\n    if (active) {\n      return /* @__PURE__ */ React.createElement(CircularProgress, { size: \"20px\" });\n    }\n    if (completed) {\n      return /* @__PURE__ */ React.createElement(CheckCircleOutline, null);\n    }\n    if (error) {\n      return /* @__PURE__ */ React.createElement(ErrorOutline, null);\n    }\n    if (skipped) {\n      return /* @__PURE__ */ React.createElement(RemoveCircleOutline, null);\n    }\n    return /* @__PURE__ */ React.createElement(PanoramaFishEyeIcon, null);\n  };\n  return /* @__PURE__ */ React.createElement(\n    \"div\",\n    {\n      className: classNames(classes.root, {\n        [classes.completed]: completed,\n        [classes.error]: error\n      })\n    },\n    getMiddle()\n  );\n};\n\nconst StepTime = (props) => {\n  const [time, setTime] = useState(\"\");\n  const { step } = props;\n  const getDelay = () => {\n    if (step.startedAt && step.endedAt && time) {\n      return null;\n    }\n    if (step.startedAt && step.endedAt) {\n      return 1;\n    }\n    return 1e3;\n  };\n  const calculate = useCallback(() => {\n    if (!step.startedAt) {\n      setTime(\"\");\n      return;\n    }\n    const end = step.endedAt ? DateTime.fromISO(step.endedAt) : DateTime.local();\n    const startedAt = DateTime.fromISO(step.startedAt);\n    const formatted = Interval.fromDateTimes(startedAt, end).toDuration().valueOf();\n    setTime(humanizeDuration(formatted, { round: true }));\n  }, [step.endedAt, step.startedAt]);\n  useMountEffect(calculate);\n  useInterval(calculate, getDelay());\n  return /* @__PURE__ */ React.createElement(Typography, { variant: \"caption\" }, time);\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  failed: {\n    backgroundColor: theme.palette.error.main\n  },\n  success: {\n    backgroundColor: theme.palette.success.main\n  }\n}));\nconst TaskBorder = (props) => {\n  const styles = useStyles$2();\n  if (!props.isComplete) {\n    return /* @__PURE__ */ React.createElement(LinearProgress, { variant: \"indeterminate\" });\n  }\n  return /* @__PURE__ */ React.createElement(\n    LinearProgress,\n    {\n      variant: \"determinate\",\n      classes: { bar: props.isError ? styles.failed : styles.success },\n      value: 100\n    }\n  );\n};\n\nconst TaskSteps = (props) => {\n  var _a, _b;\n  return /* @__PURE__ */ React.createElement(Paper, { style: { position: \"relative\", overflow: \"hidden\" } }, /* @__PURE__ */ React.createElement(\n    TaskBorder,\n    {\n      isComplete: (_a = props.isComplete) != null ? _a : false,\n      isError: (_b = props.isError) != null ? _b : false\n    }\n  ), /* @__PURE__ */ React.createElement(Box, { padding: 2 }, /* @__PURE__ */ React.createElement(\n    Stepper$1,\n    {\n      activeStep: props.activeStep,\n      alternativeLabel: true,\n      variant: \"elevation\",\n      style: { overflowX: \"auto\" }\n    },\n    props.steps.map((step) => {\n      const isCompleted = step.status === \"completed\";\n      const isFailed = step.status === \"failed\";\n      const isActive = step.status === \"processing\";\n      const isSkipped = step.status === \"skipped\";\n      const stepIconProps = {\n        completed: isCompleted,\n        error: isFailed,\n        active: isActive,\n        skipped: isSkipped\n      };\n      return /* @__PURE__ */ React.createElement(Step, { key: step.id }, /* @__PURE__ */ React.createElement(StepButton, null, /* @__PURE__ */ React.createElement(\n        StepLabel,\n        {\n          StepIconProps: stepIconProps,\n          StepIconComponent: StepIcon,\n          \"data-testid\": \"step-label\"\n        },\n        /* @__PURE__ */ React.createElement(Box, null, step.name),\n        !isSkipped && /* @__PURE__ */ React.createElement(StepTime, { step })\n      )));\n    })\n  )));\n};\n\nconst useStyles$1 = makeStyles$1({\n  root: {\n    width: \"100%\",\n    height: \"100%\",\n    position: \"relative\"\n  }\n});\nconst TaskLogStream = (props) => {\n  const styles = useStyles$1();\n  return /* @__PURE__ */ React.createElement(\"div\", { className: styles.root }, /* @__PURE__ */ React.createElement(\n    LogViewer,\n    {\n      text: Object.values(props.logs).map((l) => l.join(\"\\n\")).filter(Boolean).join(\"\\n\")\n    }\n  ));\n};\n\nconst icon = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\" });\nconst checkedIcon = /* @__PURE__ */ React.createElement(CheckBoxIcon, { fontSize: \"small\" });\nconst TemplateCategoryPicker = () => {\n  const alertApi = useApi(alertApiRef);\n  const { error, loading, availableTypes, selectedTypes, setSelectedTypes } = useEntityTypeFilter();\n  if (loading)\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  if (error) {\n    alertApi.post({\n      message: `Failed to load entity types with error: ${error}`,\n      severity: \"error\"\n    });\n    return null;\n  }\n  if (!availableTypes)\n    return null;\n  return /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      variant: \"button\",\n      component: \"label\",\n      htmlFor: \"categories-picker\"\n    },\n    \"Categories\"\n  ), /* @__PURE__ */ React.createElement(\n    Autocomplete,\n    {\n      multiple: true,\n      id: \"categories-picker\",\n      options: availableTypes,\n      value: selectedTypes,\n      onChange: (_, value) => setSelectedTypes(value),\n      renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(\n        FormControlLabel,\n        {\n          control: /* @__PURE__ */ React.createElement(\n            Checkbox,\n            {\n              icon,\n              checkedIcon,\n              checked: selected\n            }\n          ),\n          label: capitalize(option)\n        }\n      ),\n      size: \"small\",\n      popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, null),\n      renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, { ...params, variant: \"outlined\" })\n    }\n  ));\n};\n\nconst useStyles = makeStyles$1((theme) => ({\n  button: {\n    color: theme.page.fontColor\n  }\n}));\nfunction ScaffolderPageContextMenu(props) {\n  const { onEditorClicked, onActionsClicked, onTasksClicked, onCreateClicked } = props;\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = useState();\n  if (!onEditorClicked && !onActionsClicked) {\n    return null;\n  }\n  const onOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const onClose = () => {\n    setAnchorEl(void 0);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      id: \"long-menu\",\n      \"aria-label\": \"more\",\n      \"aria-controls\": \"long-menu\",\n      \"aria-expanded\": !!anchorEl,\n      \"aria-haspopup\": \"true\",\n      role: \"button\",\n      onClick: onOpen,\n      \"data-testid\": \"menu-button\",\n      color: \"inherit\",\n      className: classes.button\n    },\n    /* @__PURE__ */ React.createElement(MoreVert, null)\n  ), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      \"aria-labelledby\": \"long-menu\",\n      open: Boolean(anchorEl),\n      onClose,\n      anchorEl,\n      anchorOrigin: { vertical: \"bottom\", horizontal: \"right\" },\n      transformOrigin: { vertical: \"top\", horizontal: \"right\" }\n    },\n    /* @__PURE__ */ React.createElement(MenuList, null, onCreateClicked && /* @__PURE__ */ React.createElement(MenuItem, { onClick: onCreateClicked }, /* @__PURE__ */ React.createElement(ListItemIcon$1, null, /* @__PURE__ */ React.createElement(CreateComponentIcon, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(ListItemText$1, { primary: \"Create\" })), onEditorClicked && /* @__PURE__ */ React.createElement(MenuItem, { onClick: onEditorClicked }, /* @__PURE__ */ React.createElement(ListItemIcon$1, null, /* @__PURE__ */ React.createElement(Edit, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(ListItemText$1, { primary: \"Template Editor\" })), onActionsClicked && /* @__PURE__ */ React.createElement(MenuItem, { onClick: onActionsClicked }, /* @__PURE__ */ React.createElement(ListItemIcon$1, null, /* @__PURE__ */ React.createElement(DescriptionIcon, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(ListItemText$1, { primary: \"Installed Actions\" })), onTasksClicked && /* @__PURE__ */ React.createElement(MenuItem, { onClick: onTasksClicked }, /* @__PURE__ */ React.createElement(ListItemIcon$1, null, /* @__PURE__ */ React.createElement(List$1, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(ListItemText$1, { primary: \"Task List\" })))\n  ));\n}\n\nexport { DefaultTemplateOutputs, EmbeddableWorkflow, Form, ReviewState, ScaffolderField, ScaffolderPageContextMenu, Stepper, TaskLogStream, TaskSteps, TemplateCard, TemplateCategoryPicker, TemplateGroup, TemplateGroups, Workflow, createAsyncValidators, createFieldValidation, extractSchemaFromStep, useFilteredSchemaProperties, useFormDataFromQuery, useTemplateParameterSchema, useTemplateSchema };\n//# sourceMappingURL=alpha.esm.js.map\n","import { createVersionedContext, createVersionedValueMap, getOrCreateGlobalSingleton } from '@backstage/version-bridge';\nimport React, { useState, useContext, useCallback } from 'react';\nimport { createApiRef } from '@backstage/core-plugin-api';\n\nconst SecretsContext = createVersionedContext(\"secrets-context\");\nconst SecretsContextProvider = (props) => {\n  const [secrets, setSecrets] = useState({});\n  return /* @__PURE__ */ React.createElement(\n    SecretsContext.Provider,\n    {\n      value: createVersionedValueMap({ 1: { secrets, setSecrets } })\n    },\n    props.children\n  );\n};\nconst useTemplateSecrets = () => {\n  var _a;\n  const value = (_a = useContext(SecretsContext)) == null ? void 0 : _a.atVersion(1);\n  if (!value) {\n    throw new Error(\n      \"useTemplateSecrets must be used within a SecretsContextProvider\"\n    );\n  }\n  const { setSecrets: updateSecrets, secrets = {} } = value;\n  const setSecrets = useCallback(\n    (input) => {\n      updateSecrets((currentSecrets) => ({ ...currentSecrets, ...input }));\n    },\n    [updateSecrets]\n  );\n  return { setSecrets, secrets };\n};\n\nconst scaffolderApiRef = getOrCreateGlobalSingleton(\n  \"scaffolder:scaffolder-api-ref\",\n  () => createApiRef({\n    id: \"plugin.scaffolder.service\"\n  })\n);\n\nexport { SecretsContextProvider as S, scaffolderApiRef as s, useTemplateSecrets as u };\n//# sourceMappingURL=ref-e2ee478c.esm.js.map\n","import { attachComponentData, useElementFilter, useApi } from '@backstage/core-plugin-api';\nimport { s as scaffolderApiRef } from './esm/ref-e2ee478c.esm.js';\nexport { S as SecretsContextProvider, s as scaffolderApiRef, u as useTemplateSecrets } from './esm/ref-e2ee478c.esm.js';\nimport { useImmerReducer } from 'use-immer';\nimport { useEffect } from 'react';\nimport '@backstage/version-bridge';\n\nconst FIELD_EXTENSION_WRAPPER_KEY = \"scaffolder.extensions.wrapper.v1\";\nconst FIELD_EXTENSION_KEY = \"scaffolder.extensions.field.v1\";\n\nfunction createScaffolderFieldExtension(options) {\n  return {\n    expose() {\n      const FieldExtensionDataHolder = () => null;\n      attachComponentData(\n        FieldExtensionDataHolder,\n        FIELD_EXTENSION_KEY,\n        options\n      );\n      return FieldExtensionDataHolder;\n    }\n  };\n}\nconst ScaffolderFieldExtensions = () => null;\nattachComponentData(\n  ScaffolderFieldExtensions,\n  FIELD_EXTENSION_WRAPPER_KEY,\n  true\n);\n\nconst useCustomFieldExtensions = (outlet) => {\n  return useElementFilter(\n    outlet,\n    (elements) => elements.selectByComponentData({\n      key: FIELD_EXTENSION_WRAPPER_KEY\n    }).findComponentData({\n      key: FIELD_EXTENSION_KEY\n    })\n  );\n};\n\nconst LAYOUTS_KEY = \"scaffolder.layout.v1\";\nconst LAYOUTS_WRAPPER_KEY = \"scaffolder.layouts.wrapper.v1\";\n\nconst useCustomLayouts = (outlet) => {\n  return useElementFilter(\n    outlet,\n    (elements) => elements.selectByComponentData({\n      key: LAYOUTS_WRAPPER_KEY\n    }).findComponentData({\n      key: LAYOUTS_KEY\n    })\n  );\n};\n\nfunction reducer(draft, action) {\n  var _a, _b, _c;\n  switch (action.type) {\n    case \"INIT\": {\n      draft.steps = action.data.spec.steps.reduce((current, next) => {\n        current[next.id] = { status: \"open\", id: next.id };\n        return current;\n      }, {});\n      draft.stepLogs = action.data.spec.steps.reduce((current, next) => {\n        current[next.id] = [];\n        return current;\n      }, {});\n      draft.loading = false;\n      draft.error = void 0;\n      draft.completed = false;\n      draft.task = action.data;\n      return;\n    }\n    case \"LOGS\": {\n      const entries = action.data;\n      for (const entry of entries) {\n        const logLine = `${entry.createdAt} ${entry.body.message}`;\n        if (!entry.body.stepId || !((_a = draft.steps) == null ? void 0 : _a[entry.body.stepId])) {\n          continue;\n        }\n        const currentStepLog = (_b = draft.stepLogs) == null ? void 0 : _b[entry.body.stepId];\n        const currentStep = (_c = draft.steps) == null ? void 0 : _c[entry.body.stepId];\n        if (currentStep) {\n          if (entry.body.status && entry.body.status !== currentStep.status) {\n            currentStep.status = entry.body.status;\n            if (currentStep.status === \"processing\") {\n              currentStep.startedAt = entry.createdAt;\n            }\n            if ([\"cancelled\", \"completed\", \"failed\"].includes(currentStep.status)) {\n              currentStep.endedAt = entry.createdAt;\n            }\n          }\n        }\n        currentStepLog == null ? void 0 : currentStepLog.push(logLine);\n      }\n      return;\n    }\n    case \"COMPLETED\": {\n      draft.completed = true;\n      draft.output = action.data.body.output;\n      draft.error = action.data.body.error;\n      return;\n    }\n    case \"CANCELLED\": {\n      draft.cancelled = true;\n      return;\n    }\n    case \"RECOVERED\": {\n      for (const stepId in draft.steps) {\n        if (draft.steps.hasOwnProperty(stepId)) {\n          draft.steps[stepId].startedAt = void 0;\n          draft.steps[stepId].endedAt = void 0;\n          draft.steps[stepId].status = \"open\";\n        }\n      }\n      return;\n    }\n    case \"ERROR\": {\n      draft.error = action.data;\n      draft.loading = false;\n      draft.completed = true;\n      return;\n    }\n    default:\n      return;\n  }\n}\nconst useTaskEventStream = (taskId) => {\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const [state, dispatch] = useImmerReducer(reducer, {\n    cancelled: false,\n    loading: true,\n    completed: false,\n    stepLogs: {},\n    steps: {}\n  });\n  useEffect(() => {\n    let didCancel = false;\n    let subscription;\n    let logPusher;\n    let retryCount = 1;\n    const startStreamLogProcess = () => scaffolderApi.getTask(taskId).then(\n      (task) => {\n        if (didCancel) {\n          return;\n        }\n        dispatch({ type: \"INIT\", data: task });\n        const observable = scaffolderApi.streamLogs({ taskId });\n        const collectedLogEvents = new Array();\n        function emitLogs() {\n          if (collectedLogEvents.length) {\n            const logs = collectedLogEvents.splice(\n              0,\n              collectedLogEvents.length\n            );\n            dispatch({ type: \"LOGS\", data: logs });\n          }\n        }\n        logPusher = setInterval(emitLogs, 500);\n        subscription = observable.subscribe({\n          next: (event) => {\n            retryCount = 1;\n            switch (event.type) {\n              case \"log\":\n                return collectedLogEvents.push(event);\n              case \"cancelled\":\n                dispatch({ type: \"CANCELLED\" });\n                return void 0;\n              case \"completion\":\n                emitLogs();\n                dispatch({ type: \"COMPLETED\", data: event });\n                return void 0;\n              case \"recovered\":\n                dispatch({ type: \"RECOVERED\", data: event });\n                return void 0;\n              default:\n                throw new Error(\n                  `Unhandled event type ${event.type} in observer`\n                );\n            }\n          },\n          error: (error) => {\n            emitLogs();\n            const maxRetries = 3;\n            if (!error.message) {\n              error.message = `We cannot connect at the moment, trying again in some seconds... Retrying (${retryCount > maxRetries ? maxRetries : retryCount}/${maxRetries} retries)`;\n            }\n            setTimeout(() => {\n              retryCount += 1;\n              void startStreamLogProcess();\n            }, 15e3);\n            dispatch({ type: \"ERROR\", data: error });\n          }\n        });\n      },\n      (error) => {\n        if (!didCancel) {\n          dispatch({ type: \"ERROR\", data: error });\n        }\n      }\n    );\n    void startStreamLogProcess();\n    return () => {\n      didCancel = true;\n      if (subscription) {\n        subscription.unsubscribe();\n      }\n      if (logPusher) {\n        clearInterval(logPusher);\n      }\n    };\n  }, [scaffolderApi, dispatch, taskId]);\n  return state;\n};\n\nfunction createScaffolderLayout(options) {\n  return {\n    expose() {\n      const LayoutDataHolder = () => null;\n      attachComponentData(LayoutDataHolder, LAYOUTS_KEY, options);\n      return LayoutDataHolder;\n    }\n  };\n}\nconst ScaffolderLayouts = () => null;\nattachComponentData(ScaffolderLayouts, LAYOUTS_WRAPPER_KEY, true);\n\nexport { ScaffolderFieldExtensions, ScaffolderLayouts, createScaffolderFieldExtension, createScaffolderLayout, useCustomFieldExtensions, useCustomLayouts, useTaskEventStream };\n//# sourceMappingURL=index.esm.js.map\n","import { parseEntityRef, stringifyEntityRef, KubernetesValidatorFunctions, RELATION_OWNED_BY, makeValidator } from '@backstage/catalog-model';\nimport React, { useCallback, useEffect, useState, useMemo } from 'react';\nimport { TextField, Box, Typography, Divider, FormControl as FormControl$1, makeStyles, useTheme, IconButton, Popover, MenuList, MenuItem, ListItemIcon, ListItemText, Paper, Button } from '@material-ui/core';\nimport { z } from 'zod';\nimport { CATALOG_FILTER_EXISTS } from '@backstage/catalog-client';\nimport { useApi, identityApiRef, errorApiRef, useRouteRef } from '@backstage/core-plugin-api';\nimport { catalogApiRef, humanizeEntityRef } from '@backstage/plugin-catalog-react';\nimport FormControl from '@material-ui/core/FormControl';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport useAsync from 'react-use/lib/useAsync';\nimport { scmIntegrationsApiRef, scmAuthApiRef } from '@backstage/integration-react';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport { Select, Progress, Page, Header, Content, ErrorPanel } from '@backstage/core-components';\nimport { scaffolderApiRef, useTemplateSecrets, useTaskEventStream } from '@backstage/plugin-scaffolder-react';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport useEffectOnce from 'react-use/lib/useEffectOnce';\nimport { Autocomplete as Autocomplete$1 } from '@material-ui/lab';\nimport zodToJsonSchema from 'zod-to-json-schema';\nimport { NotFoundError } from '@backstage/errors';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { s as selectedTemplateRouteRef } from './routes-1428737e.esm.js';\nimport qs from 'qs';\nimport { useAsync as useAsync$1 } from '@react-hookz/web';\nimport Cancel from '@material-ui/icons/Cancel';\nimport Retry from '@material-ui/icons/Repeat';\nimport Toc from '@material-ui/icons/Toc';\nimport ControlPointIcon from '@material-ui/icons/ControlPoint';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport { DefaultTemplateOutputs, TaskSteps, TaskLogStream } from '@backstage/plugin-scaffolder-react/alpha';\n\nfunction makeFieldSchemaFromZod(returnSchema, uiOptionsSchema) {\n  return {\n    schema: {\n      returnValue: zodToJsonSchema(returnSchema),\n      uiOptions: uiOptionsSchema ? zodToJsonSchema(uiOptionsSchema) : void 0\n    },\n    type: null,\n    uiOptionsType: null\n  };\n}\n\nconst entityQueryFilterExpressionSchema$1 = z.record(\n  z.string().or(z.object({ exists: z.boolean().optional() })).or(z.array(z.string()))\n);\nconst EntityPickerFieldSchema = makeFieldSchemaFromZod(\n  z.string(),\n  z.object({\n    /**\n     * @deprecated Use `catalogFilter` instead.\n     */\n    allowedKinds: z.array(z.string()).optional().describe(\n      \"DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from\"\n    ),\n    defaultKind: z.string().optional().describe(\n      \"The default entity kind. Options of this kind will not be prefixed.\"\n    ),\n    allowArbitraryValues: z.boolean().optional().describe(\"Whether to allow arbitrary user input. Defaults to true\"),\n    defaultNamespace: z.union([z.string(), z.literal(false)]).optional().describe(\n      \"The default namespace. Options with this namespace will not be prefixed.\"\n    ),\n    catalogFilter: z.array(entityQueryFilterExpressionSchema$1).or(entityQueryFilterExpressionSchema$1).optional().describe(\"List of key-value filter expression for entities\")\n  })\n);\nconst EntityPickerSchema = EntityPickerFieldSchema.schema;\n\nconst EntityPicker = (props) => {\n  var _a, _b, _c, _d, _e;\n  const {\n    onChange,\n    schema: { title = \"Entity\", description = \"An entity from the catalog\" },\n    required,\n    uiSchema,\n    rawErrors,\n    formData,\n    idSchema\n  } = props;\n  const catalogFilter = buildCatalogFilter$1(uiSchema);\n  const defaultKind = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.defaultKind;\n  const defaultNamespace = ((_b = uiSchema[\"ui:options\"]) == null ? void 0 : _b.defaultNamespace) || void 0;\n  const catalogApi = useApi(catalogApiRef);\n  const { value: entities, loading } = useAsync(async () => {\n    const fields = [\"metadata.name\", \"metadata.namespace\", \"kind\"];\n    const { items } = await catalogApi.getEntities(\n      catalogFilter ? { filter: catalogFilter, fields } : { filter: void 0, fields }\n    );\n    return items;\n  });\n  const allowArbitraryValues = (_d = (_c = uiSchema[\"ui:options\"]) == null ? void 0 : _c.allowArbitraryValues) != null ? _d : true;\n  const getLabel = useCallback(\n    (ref) => {\n      try {\n        return humanizeEntityRef(\n          parseEntityRef(ref, { defaultKind, defaultNamespace }),\n          {\n            defaultKind,\n            defaultNamespace\n          }\n        );\n      } catch (err) {\n        return ref;\n      }\n    },\n    [defaultKind, defaultNamespace]\n  );\n  const onSelect = useCallback(\n    (_, ref, reason) => {\n      if (typeof ref !== \"string\") {\n        onChange(ref ? stringifyEntityRef(ref) : void 0);\n      } else {\n        if (reason === \"blur\" || reason === \"create-option\") {\n          let entityRef = ref;\n          try {\n            entityRef = stringifyEntityRef(\n              parseEntityRef(ref, {\n                defaultKind,\n                defaultNamespace\n              })\n            );\n          } catch (err) {\n          }\n          if (formData !== ref || allowArbitraryValues) {\n            onChange(entityRef);\n          }\n        }\n      }\n    },\n    [onChange, formData, defaultKind, defaultNamespace, allowArbitraryValues]\n  );\n  const selectedEntity = (_e = entities == null ? void 0 : entities.find((e) => stringifyEntityRef(e) === formData)) != null ? _e : allowArbitraryValues && formData ? getLabel(formData) : \"\";\n  useEffect(() => {\n    if ((entities == null ? void 0 : entities.length) === 1 && selectedEntity === \"\") {\n      onChange(stringifyEntityRef(entities[0]));\n    }\n  }, [entities, onChange, selectedEntity]);\n  return /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !formData\n    },\n    /* @__PURE__ */ React.createElement(\n      Autocomplete,\n      {\n        disabled: (entities == null ? void 0 : entities.length) === 1,\n        id: idSchema == null ? void 0 : idSchema.$id,\n        value: selectedEntity,\n        loading,\n        onChange: onSelect,\n        options: entities || [],\n        getOptionLabel: (option) => (\n          // option can be a string due to freeSolo.\n          typeof option === \"string\" ? option : humanizeEntityRef(option, { defaultKind, defaultNamespace })\n        ),\n        autoSelect: true,\n        freeSolo: allowArbitraryValues,\n        renderInput: (params) => /* @__PURE__ */ React.createElement(\n          TextField,\n          {\n            ...params,\n            label: title,\n            margin: \"dense\",\n            helperText: description,\n            FormHelperTextProps: { margin: \"dense\", style: { marginLeft: 0 } },\n            variant: \"outlined\",\n            required,\n            InputProps: params.InputProps\n          }\n        )\n      }\n    )\n  );\n};\nfunction convertOpsValues$1(value) {\n  if (typeof value === \"object\" && value.exists) {\n    return CATALOG_FILTER_EXISTS;\n  }\n  return value == null ? void 0 : value.toString();\n}\nfunction convertSchemaFiltersToQuery$1(schemaFilters) {\n  const query = {};\n  for (const [key, value] of Object.entries(schemaFilters)) {\n    if (Array.isArray(value)) {\n      query[key] = value;\n    } else {\n      query[key] = convertOpsValues$1(value);\n    }\n  }\n  return query;\n}\nfunction buildCatalogFilter$1(uiSchema) {\n  var _a, _b;\n  const allowedKinds = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.allowedKinds;\n  const catalogFilter = ((_b = uiSchema[\"ui:options\"]) == null ? void 0 : _b.catalogFilter) || allowedKinds && { kind: allowedKinds };\n  if (!catalogFilter) {\n    return void 0;\n  }\n  if (Array.isArray(catalogFilter)) {\n    return catalogFilter.map(convertSchemaFiltersToQuery$1);\n  }\n  return convertSchemaFiltersToQuery$1(catalogFilter);\n}\n\nconst entityNamePickerValidation = (value, validation) => {\n  if (!KubernetesValidatorFunctions.isValidObjectName(value)) {\n    validation.addError(\n      \"Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.\"\n    );\n  }\n};\n\nconst EntityNamePickerFieldSchema = makeFieldSchemaFromZod(z.string());\nconst EntityNamePickerSchema = EntityNamePickerFieldSchema.schema;\n\nconst EntityNamePicker = (props) => {\n  const {\n    onChange,\n    required,\n    schema: { title = \"Name\", description = \"Unique name of the component\" },\n    rawErrors,\n    formData,\n    uiSchema: { \"ui:autofocus\": autoFocus },\n    idSchema,\n    placeholder\n  } = props;\n  return /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      id: idSchema == null ? void 0 : idSchema.$id,\n      label: title,\n      placeholder,\n      helperText: description,\n      required,\n      value: formData != null ? formData : \"\",\n      onChange: ({ target: { value } }) => onChange(value),\n      margin: \"normal\",\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !formData,\n      inputProps: { autoFocus }\n    }\n  );\n};\n\nconst OwnerPickerFieldSchema = makeFieldSchemaFromZod(\n  z.string(),\n  z.object({\n    /**\n     * @deprecated Use `catalogFilter` instead.\n     */\n    allowedKinds: z.array(z.string()).default([\"Group\", \"User\"]).optional().describe(\n      \"DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User\"\n    ),\n    allowArbitraryValues: z.boolean().optional().describe(\"Whether to allow arbitrary user input. Defaults to true\"),\n    defaultNamespace: z.union([z.string(), z.literal(false)]).optional().describe(\n      \"The default namespace. Options with this namespace will not be prefixed.\"\n    ),\n    catalogFilter: z.array(entityQueryFilterExpressionSchema$1).or(entityQueryFilterExpressionSchema$1).optional().describe(\"List of key-value filter expression for entities\")\n  })\n);\nconst OwnerPickerSchema = OwnerPickerFieldSchema.schema;\n\nconst OwnerPicker = (props) => {\n  var _a, _b, _c, _d, _e;\n  const {\n    schema: { title = \"Owner\", description = \"The owner of the component\" },\n    uiSchema,\n    ...restProps\n  } = props;\n  const defaultNamespace = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.defaultNamespace;\n  const allowedKinds = (_b = uiSchema[\"ui:options\"]) == null ? void 0 : _b.allowedKinds;\n  const catalogFilter = ((_c = uiSchema[\"ui:options\"]) == null ? void 0 : _c.catalogFilter) || {\n    kind: allowedKinds || [\"Group\", \"User\"]\n  };\n  const ownerUiSchema = {\n    ...uiSchema,\n    \"ui:options\": {\n      catalogFilter,\n      defaultKind: \"Group\",\n      allowArbitraryValues: (_e = (_d = uiSchema[\"ui:options\"]) == null ? void 0 : _d.allowArbitraryValues) != null ? _e : true,\n      ...defaultNamespace !== void 0 ? { defaultNamespace } : {}\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\n    EntityPicker,\n    {\n      ...restProps,\n      schema: { title, description },\n      uiSchema: ownerUiSchema\n    }\n  );\n};\n\nconst entityQueryFilterExpressionSchema = z.record(\n  z.string().or(z.object({ exists: z.boolean().optional() })).or(z.array(z.string()))\n);\nconst MultiEntityPickerFieldSchema = makeFieldSchemaFromZod(\n  z.array(z.string()),\n  z.object({\n    defaultKind: z.string().optional().describe(\n      \"The default entity kind. Options of this kind will not be prefixed.\"\n    ),\n    allowArbitraryValues: z.boolean().optional().describe(\"Whether to allow arbitrary user input. Defaults to true\"),\n    defaultNamespace: z.union([z.string(), z.literal(false)]).optional().describe(\n      \"The default namespace. Options with this namespace will not be prefixed.\"\n    ),\n    catalogFilter: z.array(entityQueryFilterExpressionSchema).or(entityQueryFilterExpressionSchema).optional().describe(\"List of key-value filter expression for entities\")\n  })\n);\nconst MultiEntityPickerSchema = MultiEntityPickerFieldSchema.schema;\n\nconst MultiEntityPicker = (props) => {\n  var _a, _b, _c, _d, _e;\n  const {\n    onChange,\n    schema: { title = \"Entity\", description = \"An entity from the catalog\" },\n    required,\n    uiSchema,\n    rawErrors,\n    formData,\n    idSchema\n  } = props;\n  const catalogFilter = buildCatalogFilter(uiSchema);\n  const defaultKind = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.defaultKind;\n  const defaultNamespace = ((_b = uiSchema[\"ui:options\"]) == null ? void 0 : _b.defaultNamespace) || void 0;\n  const catalogApi = useApi(catalogApiRef);\n  const { value: entities, loading } = useAsync(async () => {\n    const { items } = await catalogApi.getEntities(\n      catalogFilter ? { filter: catalogFilter } : void 0\n    );\n    return items;\n  });\n  const allowArbitraryValues = (_d = (_c = uiSchema[\"ui:options\"]) == null ? void 0 : _c.allowArbitraryValues) != null ? _d : true;\n  const getLabel = useCallback(\n    (ref) => {\n      try {\n        return humanizeEntityRef(\n          parseEntityRef(ref, { defaultKind, defaultNamespace }),\n          {\n            defaultKind,\n            defaultNamespace\n          }\n        );\n      } catch (err) {\n        return ref;\n      }\n    },\n    [defaultKind, defaultNamespace]\n  );\n  const onSelect = useCallback(\n    (_, refs, reason) => {\n      const values = refs.map((ref) => {\n        if (typeof ref !== \"string\") {\n          return ref ? stringifyEntityRef(ref) : void 0;\n        }\n        if (reason === \"blur\" || reason === \"create-option\") {\n          let entityRef = ref;\n          try {\n            entityRef = stringifyEntityRef(\n              parseEntityRef(ref, {\n                defaultKind,\n                defaultNamespace\n              })\n            );\n          } catch (err) {\n          }\n          if (formData.includes(ref) || allowArbitraryValues) {\n            return entityRef;\n          }\n        }\n        return void 0;\n      }).filter((ref) => ref !== void 0);\n      onChange(values);\n    },\n    [onChange, formData, defaultKind, defaultNamespace, allowArbitraryValues]\n  );\n  useEffect(() => {\n    if ((entities == null ? void 0 : entities.length) === 1) {\n      onChange([stringifyEntityRef(entities[0])]);\n    }\n  }, [entities, onChange]);\n  return /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !formData\n    },\n    /* @__PURE__ */ React.createElement(\n      Autocomplete,\n      {\n        multiple: true,\n        filterSelectedOptions: true,\n        disabled: (entities == null ? void 0 : entities.length) === 1,\n        id: idSchema == null ? void 0 : idSchema.$id,\n        value: (\n          // Since free solo can be enabled, attempt to parse as a full entity ref first, then fall\n          //  back to the given value.\n          (_e = entities == null ? void 0 : entities.filter(\n            (e) => formData && formData.includes(stringifyEntityRef(e))\n          )) != null ? _e : allowArbitraryValues && formData ? formData.map(getLabel) : []\n        ),\n        loading,\n        onChange: onSelect,\n        options: entities || [],\n        getOptionLabel: (option) => (\n          // option can be a string due to freeSolo.\n          typeof option === \"string\" ? option : humanizeEntityRef(option, { defaultKind, defaultNamespace })\n        ),\n        autoSelect: true,\n        freeSolo: allowArbitraryValues,\n        renderInput: (params) => /* @__PURE__ */ React.createElement(\n          TextField,\n          {\n            ...params,\n            label: title,\n            margin: \"dense\",\n            helperText: description,\n            FormHelperTextProps: { margin: \"dense\", style: { marginLeft: 0 } },\n            variant: \"outlined\",\n            required,\n            InputProps: params.InputProps\n          }\n        )\n      }\n    )\n  );\n};\nconst validateMultiEntityPickerValidation = (values, validation) => {\n  values.forEach((value) => {\n    try {\n      parseEntityRef(value);\n    } catch {\n      validation.addError(`${value} is not a valid entity ref`);\n    }\n  });\n};\nfunction convertOpsValues(value) {\n  if (typeof value === \"object\" && value.exists) {\n    return CATALOG_FILTER_EXISTS;\n  }\n  return value == null ? void 0 : value.toString();\n}\nfunction convertSchemaFiltersToQuery(schemaFilters) {\n  const query = {};\n  for (const [key, value] of Object.entries(schemaFilters)) {\n    if (Array.isArray(value)) {\n      query[key] = value;\n    } else {\n      query[key] = convertOpsValues(value);\n    }\n  }\n  return query;\n}\nfunction buildCatalogFilter(uiSchema) {\n  var _a;\n  const catalogFilter = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.catalogFilter;\n  if (!catalogFilter) {\n    return void 0;\n  }\n  if (Array.isArray(catalogFilter)) {\n    return catalogFilter.map(convertSchemaFiltersToQuery);\n  }\n  return convertSchemaFiltersToQuery(catalogFilter);\n}\n\nconst RepoUrlPickerFieldSchema = makeFieldSchemaFromZod(\n  z.string(),\n  z.object({\n    allowedHosts: z.array(z.string()).optional().describe(\"List of allowed SCM platform hosts\"),\n    allowedOrganizations: z.array(z.string()).optional().describe(\"List of allowed organizations in the given SCM platform\"),\n    allowedOwners: z.array(z.string()).optional().describe(\"List of allowed owners in the given SCM platform\"),\n    allowedProjects: z.array(z.string()).optional().describe(\"List of allowed projects in the given SCM platform\"),\n    allowedRepos: z.array(z.string()).optional().describe(\"List of allowed repos in the given SCM platform\"),\n    requestUserCredentials: z.object({\n      secretsKey: z.string().describe(\n        \"Key used within the template secrets context to store the credential\"\n      ),\n      additionalScopes: z.object({\n        gitea: z.array(z.string()).optional().describe(\"Additional Gitea scopes to request\"),\n        gerrit: z.array(z.string()).optional().describe(\"Additional Gerrit scopes to request\"),\n        github: z.array(z.string()).optional().describe(\"Additional GitHub scopes to request\"),\n        gitlab: z.array(z.string()).optional().describe(\"Additional GitLab scopes to request\"),\n        bitbucket: z.array(z.string()).optional().describe(\"Additional BitBucket scopes to request\"),\n        azure: z.array(z.string()).optional().describe(\"Additional Azure scopes to request\")\n      }).optional().describe(\"Additional permission scopes to request\")\n    }).optional().describe(\n      \"If defined will request user credentials to auth against the given SCM platform\"\n    )\n  })\n);\nconst RepoUrlPickerSchema = RepoUrlPickerFieldSchema.schema;\n\nconst repoPickerValidation = (value, validation, context) => {\n  var _a, _b;\n  try {\n    const { host, searchParams } = new URL(`https://${value}`);\n    const integrationApi = context.apiHolder.get(scmIntegrationsApiRef);\n    if (!host) {\n      validation.addError(\n        \"Incomplete repository location provided, host not provided\"\n      );\n    } else {\n      if (((_a = integrationApi == null ? void 0 : integrationApi.byHost(host)) == null ? void 0 : _a.type) === \"bitbucket\") {\n        if (host === \"bitbucket.org\" && !searchParams.get(\"workspace\")) {\n          validation.addError(\n            \"Incomplete repository location provided, workspace not provided\"\n          );\n        }\n        if (!searchParams.get(\"project\")) {\n          validation.addError(\n            \"Incomplete repository location provided, project not provided\"\n          );\n        }\n      } else if (((_b = integrationApi == null ? void 0 : integrationApi.byHost(host)) == null ? void 0 : _b.type) !== \"gerrit\") {\n        if (!searchParams.get(\"owner\")) {\n          validation.addError(\n            \"Incomplete repository location provided, owner not provided\"\n          );\n        }\n      }\n      if (!searchParams.get(\"repo\")) {\n        validation.addError(\n          \"Incomplete repository location provided, repo not provided\"\n        );\n      }\n    }\n  } catch {\n    validation.addError(\"Unable to parse the Repository URL\");\n  }\n};\n\nconst GithubRepoPicker = (props) => {\n  const { allowedOwners = [], rawErrors, state, onChange } = props;\n  const ownerItems = allowedOwners ? allowedOwners.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  const { owner } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !owner\n    },\n    (allowedOwners == null ? void 0 : allowedOwners.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Owner Available\",\n        onChange: (s) => onChange({ owner: String(Array.isArray(s) ? s[0] : s) }),\n        disabled: allowedOwners.length === 1,\n        selected: owner,\n        items: ownerItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"ownerInput\" }, \"Owner\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"ownerInput\",\n        onChange: (e) => onChange({ owner: e.target.value }),\n        value: owner\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The organization, user or project that this repo will belong to\")\n  ));\n};\n\nconst GiteaRepoPicker = (props) => {\n  const { allowedOwners = [], state, onChange, rawErrors } = props;\n  const ownerItems = allowedOwners ? allowedOwners.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  const { owner } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !owner\n    },\n    (allowedOwners == null ? void 0 : allowedOwners.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Owner Available\",\n        onChange: (selected) => onChange({\n          owner: String(Array.isArray(selected) ? selected[0] : selected)\n        }),\n        disabled: allowedOwners.length === 1,\n        selected: owner,\n        items: ownerItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"ownerInput\" }, \"Owner\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"ownerInput\",\n        onChange: (e) => onChange({ owner: e.target.value }),\n        value: owner\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"Gitea namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.\")\n  ));\n};\n\nconst GitlabRepoPicker = (props) => {\n  const { allowedOwners = [], state, onChange, rawErrors } = props;\n  const ownerItems = allowedOwners ? allowedOwners.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  const { owner } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !owner\n    },\n    (allowedOwners == null ? void 0 : allowedOwners.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Owner Available\",\n        onChange: (selected) => onChange({\n          owner: String(Array.isArray(selected) ? selected[0] : selected)\n        }),\n        disabled: allowedOwners.length === 1,\n        selected: owner,\n        items: ownerItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"ownerInput\" }, \"Owner\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"ownerInput\",\n        onChange: (e) => onChange({ owner: e.target.value }),\n        value: owner\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.\")\n  ));\n};\n\nconst AzureRepoPicker = (props) => {\n  const {\n    allowedOrganizations = [],\n    allowedOwners = [],\n    rawErrors,\n    state,\n    onChange\n  } = props;\n  const organizationItems = allowedOrganizations ? allowedOrganizations.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  const ownerItems = allowedOwners ? allowedOwners.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  const { organization, owner } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !organization\n    },\n    (allowedOrganizations == null ? void 0 : allowedOrganizations.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Organization\",\n        onChange: (s) => onChange({ organization: String(Array.isArray(s) ? s[0] : s) }),\n        disabled: allowedOrganizations.length === 1,\n        selected: organization,\n        items: organizationItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"orgInput\" }, \"Organization\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"orgInput\",\n        onChange: (e) => onChange({ organization: e.target.value }),\n        value: organization\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The Organization that this repo will belong to\")\n  ), /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !owner\n    },\n    (allowedOwners == null ? void 0 : allowedOwners.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Owner\",\n        onChange: (s) => onChange({ owner: String(Array.isArray(s) ? s[0] : s) }),\n        disabled: allowedOwners.length === 1,\n        selected: owner,\n        items: ownerItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"ownerInput\" }, \"Project\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"ownerInput\",\n        onChange: (e) => onChange({ owner: e.target.value }),\n        value: owner\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The Project that this repo will belong to\")\n  ));\n};\n\nconst BitbucketRepoPicker = (props) => {\n  const {\n    allowedOwners = [],\n    allowedProjects = [],\n    onChange,\n    rawErrors,\n    state\n  } = props;\n  const { host, workspace, project } = state;\n  const ownerItems = allowedOwners ? allowedOwners == null ? void 0 : allowedOwners.map((i) => ({ label: i, value: i })) : [];\n  const projectItems = allowedProjects ? allowedProjects == null ? void 0 : allowedProjects.map((i) => ({ label: i, value: i })) : [];\n  useEffect(() => {\n    if (host === \"bitbucket.org\" && allowedOwners.length) {\n      onChange({ workspace: allowedOwners[0] });\n    }\n  }, [allowedOwners, host, onChange]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, host === \"bitbucket.org\" && /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !workspace\n    },\n    (allowedOwners == null ? void 0 : allowedOwners.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Allowed Workspaces\",\n        onChange: (s) => onChange({ workspace: String(Array.isArray(s) ? s[0] : s) }),\n        disabled: allowedOwners.length === 1,\n        selected: workspace,\n        items: ownerItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"workspaceInput\" }, \"Workspace\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"workspaceInput\",\n        onChange: (e) => onChange({ workspace: e.target.value }),\n        value: workspace\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The Workspace that this repo will belong to\")\n  ), /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !project\n    },\n    (allowedProjects == null ? void 0 : allowedProjects.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Allowed Projects\",\n        onChange: (s) => onChange({ project: String(Array.isArray(s) ? s[0] : s) }),\n        disabled: allowedProjects.length === 1,\n        selected: project,\n        items: projectItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"projectInput\" }, \"Project\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"projectInput\",\n        onChange: (e) => onChange({ project: e.target.value }),\n        value: project\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The Project that this repo will belong to\")\n  ));\n};\n\nconst GerritRepoPicker = (props) => {\n  const { onChange, rawErrors, state } = props;\n  const { workspace, owner } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(FormControl, { margin: \"normal\", error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !workspace }, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"ownerInput\" }, \"Owner\"), /* @__PURE__ */ React.createElement(\n    Input,\n    {\n      id: \"ownerInput\",\n      onChange: (e) => onChange({ owner: e.target.value }),\n      value: owner\n    }\n  ), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The owner of the project (optional)\")), /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !workspace\n    },\n    /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"parentInput\" }, \"Parent\"),\n    /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"parentInput\",\n        onChange: (e) => onChange({ workspace: e.target.value }),\n        value: workspace\n      }\n    ),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The project parent that the repo will belong to\")\n  ));\n};\n\nconst RepoUrlPickerHost = (props) => {\n  const { host, hosts, onChange, rawErrors } = props;\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const { value: { integrations } = { integrations: [] }, loading } = useAsync(\n    async () => {\n      return await scaffolderApi.getIntegrationsList({\n        allowedHosts: hosts != null ? hosts : []\n      });\n    }\n  );\n  useEffect(() => {\n    if (!host) {\n      if (hosts == null ? void 0 : hosts.length) {\n        onChange(hosts[0]);\n      } else if (integrations == null ? void 0 : integrations.length) {\n        onChange(integrations[0].host);\n      }\n    }\n  }, [hosts, host, onChange, integrations]);\n  const hostsOptions = integrations ? integrations.filter((i) => (hosts == null ? void 0 : hosts.length) ? hosts == null ? void 0 : hosts.includes(i.host) : true).map((i) => ({ label: i.title, value: i.host })) : [{ label: \"Loading...\", value: \"loading\" }];\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !host\n    },\n    /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        disabled: (hosts == null ? void 0 : hosts.length) === 1,\n        label: \"Host\",\n        onChange: (s) => onChange(String(Array.isArray(s) ? s[0] : s)),\n        selected: host,\n        items: hostsOptions,\n        \"data-testid\": \"host-select\"\n      }\n    ),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The host where the repository will be created\")\n  ));\n};\n\nconst RepoUrlPickerRepoName = (props) => {\n  const { repoName, allowedRepos, onChange, rawErrors } = props;\n  useEffect(() => {\n    if (!repoName) {\n      if (allowedRepos == null ? void 0 : allowedRepos.length) {\n        onChange(allowedRepos[0]);\n      }\n    }\n  }, [allowedRepos, repoName, onChange]);\n  const repoItems = allowedRepos ? allowedRepos.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !repoName\n    },\n    (allowedRepos == null ? void 0 : allowedRepos.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Repositories Available\",\n        onChange: (selected) => onChange(String(Array.isArray(selected) ? selected[0] : selected)),\n        disabled: allowedRepos.length === 1,\n        selected: repoName,\n        items: repoItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"repoNameInput\" }, \"Repository\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"repoNameInput\",\n        onChange: (e) => onChange(String(e.target.value)),\n        value: repoName\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The name of the repository\")\n  ));\n};\n\nfunction serializeRepoPickerUrl(data) {\n  if (!data.host) {\n    return void 0;\n  }\n  const params = new URLSearchParams();\n  if (data.owner) {\n    params.set(\"owner\", data.owner);\n  }\n  if (data.repoName) {\n    params.set(\"repo\", data.repoName);\n  }\n  if (data.organization) {\n    params.set(\"organization\", data.organization);\n  }\n  if (data.workspace) {\n    params.set(\"workspace\", data.workspace);\n  }\n  if (data.project) {\n    params.set(\"project\", data.project);\n  }\n  return `${data.host}?${params.toString()}`;\n}\nfunction parseRepoPickerUrl(url) {\n  let host = \"\";\n  let owner = \"\";\n  let repoName = \"\";\n  let organization = \"\";\n  let workspace = \"\";\n  let project = \"\";\n  try {\n    if (url) {\n      const parsed = new URL(`https://${url}`);\n      host = parsed.host;\n      owner = parsed.searchParams.get(\"owner\") || \"\";\n      repoName = parsed.searchParams.get(\"repo\") || \"\";\n      organization = parsed.searchParams.get(\"organization\") || \"\";\n      workspace = parsed.searchParams.get(\"workspace\") || \"\";\n      project = parsed.searchParams.get(\"project\") || \"\";\n    }\n  } catch {\n  }\n  return { host, owner, repoName, organization, workspace, project };\n}\n\nconst RepoUrlPicker = (props) => {\n  var _a, _b;\n  const { uiSchema, onChange, rawErrors, formData, schema } = props;\n  const [state, setState] = useState(\n    parseRepoPickerUrl(formData)\n  );\n  const integrationApi = useApi(scmIntegrationsApiRef);\n  const scmAuthApi = useApi(scmAuthApiRef);\n  const { setSecrets } = useTemplateSecrets();\n  const allowedHosts = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedHosts) != null ? _b2 : [];\n    },\n    [uiSchema]\n  );\n  const allowedOrganizations = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedOrganizations) != null ? _b2 : [];\n    },\n    [uiSchema]\n  );\n  const allowedOwners = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedOwners) != null ? _b2 : [];\n    },\n    [uiSchema]\n  );\n  const allowedProjects = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedProjects) != null ? _b2 : [];\n    },\n    [uiSchema]\n  );\n  const allowedRepos = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedRepos) != null ? _b2 : [];\n    },\n    [uiSchema]\n  );\n  const { owner, organization, project, repoName } = state;\n  useEffect(() => {\n    onChange(serializeRepoPickerUrl(state));\n  }, [state, onChange]);\n  useEffect(() => {\n    if (allowedOrganizations.length > 0 && !organization) {\n      setState((prevState) => ({\n        ...prevState,\n        organization: allowedOrganizations[0]\n      }));\n    }\n  }, [setState, allowedOrganizations, organization]);\n  useEffect(() => {\n    if (allowedOwners.length > 0 && !owner) {\n      setState((prevState) => ({\n        ...prevState,\n        owner: allowedOwners[0]\n      }));\n    }\n  }, [setState, allowedOwners, owner]);\n  useEffect(() => {\n    if (allowedProjects.length > 0 && !project) {\n      setState((prevState) => ({\n        ...prevState,\n        project: allowedProjects[0]\n      }));\n    }\n  }, [setState, allowedProjects, project]);\n  useEffect(() => {\n    if (allowedRepos.length > 0 && !repoName) {\n      setState((prevState) => ({ ...prevState, repoName: allowedRepos[0] }));\n    }\n  }, [setState, allowedRepos, repoName]);\n  const updateLocalState = useCallback(\n    (newState) => {\n      setState((prevState) => ({ ...prevState, ...newState }));\n    },\n    [setState]\n  );\n  useDebounce(\n    async () => {\n      var _a2;\n      const { requestUserCredentials } = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) != null ? _a2 : {};\n      const workspace = state.owner ? state.owner : state.project;\n      if (!requestUserCredentials || !(state.host && workspace && state.repoName)) {\n        return;\n      }\n      const [encodedHost, encodedRepoName] = [state.host, state.repoName].map(\n        encodeURIComponent\n      );\n      const { token } = await scmAuthApi.getCredentials({\n        url: `https://${encodedHost}/${workspace}/${encodedRepoName}`,\n        additionalScope: {\n          repoWrite: true,\n          customScopes: requestUserCredentials.additionalScopes\n        }\n      });\n      setSecrets({ [requestUserCredentials.secretsKey]: token });\n    },\n    500,\n    [state, uiSchema]\n  );\n  const hostType = (_b = state.host && ((_a = integrationApi.byHost(state.host)) == null ? void 0 : _a.type)) != null ? _b : null;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, schema.title && /* @__PURE__ */ React.createElement(Box, { my: 1 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\" }, schema.title), /* @__PURE__ */ React.createElement(Divider, null)), schema.description && /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, schema.description), /* @__PURE__ */ React.createElement(\n    RepoUrlPickerHost,\n    {\n      host: state.host,\n      hosts: allowedHosts,\n      onChange: (host) => setState((prevState) => ({ ...prevState, host })),\n      rawErrors\n    }\n  ), hostType === \"github\" && /* @__PURE__ */ React.createElement(\n    GithubRepoPicker,\n    {\n      allowedOwners,\n      onChange: updateLocalState,\n      rawErrors,\n      state\n    }\n  ), hostType === \"gitea\" && /* @__PURE__ */ React.createElement(\n    GiteaRepoPicker,\n    {\n      allowedOwners,\n      allowedRepos,\n      rawErrors,\n      state,\n      onChange: updateLocalState\n    }\n  ), hostType === \"gitlab\" && /* @__PURE__ */ React.createElement(\n    GitlabRepoPicker,\n    {\n      allowedOwners,\n      rawErrors,\n      state,\n      onChange: updateLocalState\n    }\n  ), hostType === \"bitbucket\" && /* @__PURE__ */ React.createElement(\n    BitbucketRepoPicker,\n    {\n      allowedOwners,\n      allowedProjects,\n      rawErrors,\n      state,\n      onChange: updateLocalState\n    }\n  ), hostType === \"azure\" && /* @__PURE__ */ React.createElement(\n    AzureRepoPicker,\n    {\n      allowedOrganizations,\n      allowedOwners,\n      rawErrors,\n      state,\n      onChange: updateLocalState\n    }\n  ), hostType === \"gerrit\" && /* @__PURE__ */ React.createElement(\n    GerritRepoPicker,\n    {\n      rawErrors,\n      state,\n      onChange: updateLocalState\n    }\n  ), /* @__PURE__ */ React.createElement(\n    RepoUrlPickerRepoName,\n    {\n      repoName: state.repoName,\n      allowedRepos,\n      onChange: (repo) => setState((prevState) => ({ ...prevState, repoName: repo })),\n      rawErrors\n    }\n  ));\n};\n\nconst OwnedEntityPickerFieldSchema = makeFieldSchemaFromZod(\n  z.string(),\n  z.object({\n    allowedKinds: z.array(z.string()).optional().describe(\n      \"DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from\"\n    ),\n    defaultKind: z.string().optional().describe(\n      \"The default entity kind. Options of this kind will not be prefixed.\"\n    ),\n    allowArbitraryValues: z.boolean().optional().describe(\"Whether to allow arbitrary user input. Defaults to true\"),\n    defaultNamespace: z.union([z.string(), z.literal(false)]).optional().describe(\n      \"The default namespace. Options with this namespace will not be prefixed.\"\n    ),\n    catalogFilter: z.array(entityQueryFilterExpressionSchema$1).or(entityQueryFilterExpressionSchema$1).optional().describe(\"List of key-value filter expression for entities\")\n  })\n);\nconst OwnedEntityPickerSchema = OwnedEntityPickerFieldSchema.schema;\n\nconst OwnedEntityPicker = (props) => {\n  const {\n    schema: { title = \"Entity\", description = \"An entity from the catalog\" },\n    uiSchema,\n    required\n  } = props;\n  const identityApi = useApi(identityApiRef);\n  const { loading, value: identityRefs } = useAsync(async () => {\n    const identity = await identityApi.getBackstageIdentity();\n    return identity.ownershipEntityRefs;\n  });\n  if (loading)\n    return /* @__PURE__ */ React.createElement(\n      Autocomplete,\n      {\n        loading,\n        renderInput: (params) => /* @__PURE__ */ React.createElement(\n          TextField,\n          {\n            ...params,\n            label: title,\n            margin: \"dense\",\n            helperText: description,\n            FormHelperTextProps: { margin: \"dense\", style: { marginLeft: 0 } },\n            variant: \"outlined\",\n            required,\n            InputProps: params.InputProps\n          }\n        ),\n        options: []\n      }\n    );\n  const entityPickerUISchema = buildEntityPickerUISchema(\n    uiSchema,\n    identityRefs\n  );\n  return /* @__PURE__ */ React.createElement(EntityPicker, { ...props, uiSchema: entityPickerUISchema });\n};\nfunction buildEntityPickerUISchema(uiSchema, identityRefs) {\n  const uiOptions = (uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) || {};\n  const allowedKinds = uiOptions.allowedKinds;\n  const catalogFilter = {\n    ...uiOptions.catalogFilter,\n    ...allowedKinds ? {\n      kind: allowedKinds,\n      [`relations.${RELATION_OWNED_BY}`]: identityRefs || []\n    } : {\n      [`relations.${RELATION_OWNED_BY}`]: identityRefs || []\n    }\n  };\n  return {\n    \"ui:options\": {\n      catalogFilter\n    }\n  };\n}\n\nconst EntityTagsPickerFieldSchema = makeFieldSchemaFromZod(\n  z.array(z.string()),\n  z.object({\n    kinds: z.array(z.string()).optional().describe(\"List of kinds of entities to derive tags from\"),\n    showCounts: z.boolean().optional().describe(\"Whether to show usage counts per tag\"),\n    helperText: z.string().optional().describe(\"Helper text to display\")\n  })\n);\nconst EntityTagsPickerSchema = EntityTagsPickerFieldSchema.schema;\n\nconst EntityTagsPicker = (props) => {\n  var _a, _b, _c;\n  const { formData, onChange, uiSchema } = props;\n  const catalogApi = useApi(catalogApiRef);\n  const [tagOptions, setTagOptions] = useState([]);\n  const [inputValue, setInputValue] = useState(\"\");\n  const [inputError, setInputError] = useState(false);\n  const tagValidator = makeValidator().isValidTag;\n  const kinds = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.kinds;\n  const showCounts = (_b = uiSchema[\"ui:options\"]) == null ? void 0 : _b.showCounts;\n  const helperText = (_c = uiSchema[\"ui:options\"]) == null ? void 0 : _c.helperText;\n  const { loading, value: existingTags } = useAsync(async () => {\n    const facet = \"metadata.tags\";\n    const tagsRequest = { facets: [facet] };\n    if (kinds) {\n      tagsRequest.filter = { kind: kinds };\n    }\n    const { facets } = await catalogApi.getEntityFacets(tagsRequest);\n    const tagFacets = Object.fromEntries(\n      facets[facet].map(({ value, count }) => [value, count])\n    );\n    setTagOptions(\n      Object.keys(tagFacets).sort(\n        (a, b) => showCounts ? tagFacets[b] - tagFacets[a] : a.localeCompare(b)\n      )\n    );\n    return tagFacets;\n  });\n  const setTags = (_, values) => {\n    let hasError = false;\n    let addDuplicate = false;\n    const currentTags = formData || [];\n    if ((values == null ? void 0 : values.length) && currentTags.length < values.length) {\n      const newTag = values[values.length - 1] = values[values.length - 1].toLocaleLowerCase(\"en-US\").trim();\n      hasError = !tagValidator(newTag);\n      addDuplicate = currentTags.indexOf(newTag) !== -1;\n    }\n    setInputError(hasError);\n    setInputValue(!hasError ? \"\" : inputValue);\n    if (!hasError && !addDuplicate) {\n      onChange(values || []);\n    }\n  };\n  useEffectOnce(() => onChange(formData || []));\n  return /* @__PURE__ */ React.createElement(FormControl$1, { margin: \"normal\" }, /* @__PURE__ */ React.createElement(\n    Autocomplete$1,\n    {\n      multiple: true,\n      freeSolo: true,\n      filterSelectedOptions: true,\n      onChange: setTags,\n      value: formData || [],\n      inputValue,\n      loading,\n      options: tagOptions,\n      ChipProps: { size: \"small\" },\n      renderOption: (option) => showCounts ? `${option} (${existingTags == null ? void 0 : existingTags[option]})` : option,\n      renderInput: (params) => /* @__PURE__ */ React.createElement(\n        TextField,\n        {\n          ...params,\n          label: \"Tags\",\n          onChange: (e) => setInputValue(e.target.value),\n          error: inputError,\n          helperText: helperText != null ? helperText : \"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters\"\n        }\n      )\n    }\n  ));\n};\n\nconst MyGroupsPickerFieldSchema = makeFieldSchemaFromZod(\n  z.string(),\n  z.object({\n    title: z.string().default(\"Group\").describe(\"Group\"),\n    description: z.string().default(\"A group you are part of\").describe(\"The group to which the entity belongs\")\n  })\n);\nconst MyGroupsPickerSchema = MyGroupsPickerFieldSchema.schema;\n\nconst MyGroupsPicker = (props) => {\n  const {\n    schema: { title, description },\n    required,\n    rawErrors,\n    onChange\n  } = props;\n  const identityApi = useApi(identityApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const errorApi = useApi(errorApiRef);\n  const [groups, setGroups] = useState([]);\n  const [selectedGroup, setSelectedGroup] = useState(null);\n  useAsync(async () => {\n    const { userEntityRef } = await identityApi.getBackstageIdentity();\n    if (!userEntityRef) {\n      errorApi.post(new NotFoundError(\"No user entity ref found\"));\n      return;\n    }\n    const { items } = await catalogApi.getEntities({\n      filter: {\n        kind: \"Group\",\n        [\"relations.hasMember\"]: [userEntityRef]\n      }\n    });\n    const groupValues = items.filter((e) => Boolean(e)).map((item) => {\n      var _a;\n      return {\n        label: (_a = item.metadata.title) != null ? _a : item.metadata.name,\n        ref: stringifyEntityRef(item)\n      };\n    });\n    setGroups(groupValues);\n  });\n  const updateChange = (_, value) => {\n    var _a;\n    setSelectedGroup(value);\n    onChange((_a = value == null ? void 0 : value.ref) != null ? _a : \"\");\n  };\n  return /* @__PURE__ */ React.createElement(\n    FormControl$1,\n    {\n      margin: \"normal\",\n      required,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0\n    },\n    /* @__PURE__ */ React.createElement(\n      Autocomplete$1,\n      {\n        id: \"OwnershipEntityRefPicker-dropdown\",\n        options: groups || [],\n        value: selectedGroup,\n        onChange: updateChange,\n        getOptionLabel: (group) => group.label,\n        renderInput: (params) => /* @__PURE__ */ React.createElement(\n          TextField,\n          {\n            ...params,\n            label: title,\n            margin: \"dense\",\n            helperText: description,\n            FormHelperTextProps: { margin: \"dense\", style: { marginLeft: 0 } },\n            variant: \"outlined\",\n            required\n          }\n        )\n      }\n    )\n  );\n};\n\nconst useStyles$1 = makeStyles(() => ({\n  button: {\n    color: ({ fontColor }) => fontColor\n  }\n}));\nconst ContextMenu = (props) => {\n  const {\n    cancelEnabled,\n    logsVisible,\n    buttonBarVisible,\n    onStartOver,\n    onToggleLogs,\n    onToggleButtonBar,\n    taskId\n  } = props;\n  const { getPageTheme } = useTheme();\n  const pageTheme = getPageTheme({ themeId: \"website\" });\n  const classes = useStyles$1({ fontColor: pageTheme.fontColor });\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const [anchorEl, setAnchorEl] = useState();\n  const [{ status: cancelStatus }, { execute: cancel }] = useAsync$1(async () => {\n    if (taskId) {\n      await scaffolderApi.cancelTask(taskId);\n    }\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      \"aria-label\": \"more\",\n      \"aria-controls\": \"long-menu\",\n      \"aria-haspopup\": \"true\",\n      onClick: (event) => {\n        setAnchorEl(event.currentTarget);\n      },\n      \"data-testid\": \"menu-button\",\n      className: classes.button\n    },\n    /* @__PURE__ */ React.createElement(MoreVert, null)\n  ), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      open: Boolean(anchorEl),\n      onClose: () => setAnchorEl(void 0),\n      anchorEl,\n      anchorOrigin: { vertical: \"bottom\", horizontal: \"right\" },\n      transformOrigin: { vertical: \"top\", horizontal: \"right\" }\n    },\n    /* @__PURE__ */ React.createElement(MenuList, null, /* @__PURE__ */ React.createElement(MenuItem, { onClick: () => onToggleLogs == null ? void 0 : onToggleLogs(!logsVisible) }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Toc, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(ListItemText, { primary: logsVisible ? \"Hide Logs\" : \"Show Logs\" })), /* @__PURE__ */ React.createElement(MenuItem, { onClick: () => onToggleButtonBar == null ? void 0 : onToggleButtonBar(!buttonBarVisible) }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(ControlPointIcon, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        primary: buttonBarVisible ? \"Hide Button Bar\" : \"Show Button Bar\"\n      }\n    )), /* @__PURE__ */ React.createElement(MenuItem, { onClick: onStartOver }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Retry, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Start Over\" })), /* @__PURE__ */ React.createElement(\n      MenuItem,\n      {\n        onClick: cancel,\n        disabled: !cancelEnabled || cancelStatus !== \"not-executed\",\n        \"data-testid\": \"cancel-task\"\n      },\n      /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Cancel, { fontSize: \"small\" })),\n      /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Cancel\" })\n    ))\n  ));\n};\n\nconst useStyles = makeStyles((theme) => ({\n  contentWrapper: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  buttonBar: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"right\"\n  },\n  cancelButton: {\n    marginRight: theme.spacing(1)\n  },\n  logsVisibilityButton: {\n    marginRight: theme.spacing(1)\n  }\n}));\nconst OngoingTask = (props) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h;\n  const { taskId } = useParams();\n  const templateRouteRef = useRouteRef(selectedTemplateRouteRef);\n  const navigate = useNavigate();\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const taskStream = useTaskEventStream(taskId);\n  const classes = useStyles();\n  const steps = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = taskStream.task) == null ? void 0 : _a2.spec.steps.map((step) => {\n        var _a3;\n        return {\n          ...step,\n          ...(_a3 = taskStream == null ? void 0 : taskStream.steps) == null ? void 0 : _a3[step.id]\n        };\n      })) != null ? _b2 : [];\n    },\n    [taskStream]\n  );\n  const [logsVisible, setLogVisibleState] = useState(false);\n  const [buttonBarVisible, setButtonBarVisibleState] = useState(true);\n  useEffect(() => {\n    if (taskStream.error) {\n      setLogVisibleState(true);\n    }\n  }, [taskStream.error]);\n  useEffect(() => {\n    if (taskStream.completed && !taskStream.error) {\n      setButtonBarVisibleState(false);\n    }\n  }, [taskStream.error, taskStream.completed]);\n  const activeStep = useMemo(() => {\n    for (let i = steps.length - 1; i >= 0; i--) {\n      if (steps[i].status !== \"open\") {\n        return i;\n      }\n    }\n    return 0;\n  }, [steps]);\n  const startOver = useCallback(() => {\n    var _a2, _b2, _c2, _d2, _e2, _f2;\n    const { namespace, name } = (_d2 = (_c2 = (_b2 = (_a2 = taskStream.task) == null ? void 0 : _a2.spec.templateInfo) == null ? void 0 : _b2.entity) == null ? void 0 : _c2.metadata) != null ? _d2 : {};\n    const formData = (_f2 = (_e2 = taskStream.task) == null ? void 0 : _e2.spec.parameters) != null ? _f2 : {};\n    if (!namespace || !name) {\n      return;\n    }\n    navigate({\n      pathname: templateRouteRef({\n        namespace,\n        templateName: name\n      }),\n      search: `?${qs.stringify({ formData: JSON.stringify(formData) })}`\n    });\n  }, [\n    navigate,\n    (_a = taskStream.task) == null ? void 0 : _a.spec.parameters,\n    (_d = (_c = (_b = taskStream.task) == null ? void 0 : _b.spec.templateInfo) == null ? void 0 : _c.entity) == null ? void 0 : _d.metadata,\n    templateRouteRef\n  ]);\n  const [{ status: cancelStatus }, { execute: triggerCancel }] = useAsync$1(\n    async () => {\n      if (taskId) {\n        await scaffolderApi.cancelTask(taskId);\n      }\n    }\n  );\n  const Outputs = (_e = props.TemplateOutputsComponent) != null ? _e : DefaultTemplateOutputs;\n  const templateName = (_h = (_g = (_f = taskStream.task) == null ? void 0 : _f.spec.templateInfo) == null ? void 0 : _g.entity) == null ? void 0 : _h.metadata.name;\n  const cancelEnabled = !(taskStream.cancelled || taskStream.completed);\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"website\" }, /* @__PURE__ */ React.createElement(\n    Header,\n    {\n      pageTitleOverride: `Run of ${templateName}`,\n      title: /* @__PURE__ */ React.createElement(\"div\", null, \"Run of \", /* @__PURE__ */ React.createElement(\"code\", null, templateName)),\n      subtitle: `Task ${taskId}`\n    },\n    /* @__PURE__ */ React.createElement(\n      ContextMenu,\n      {\n        cancelEnabled,\n        logsVisible,\n        buttonBarVisible,\n        onStartOver: startOver,\n        onToggleLogs: setLogVisibleState,\n        onToggleButtonBar: setButtonBarVisibleState,\n        taskId\n      }\n    )\n  ), /* @__PURE__ */ React.createElement(Content, { className: classes.contentWrapper }, taskStream.error ? /* @__PURE__ */ React.createElement(Box, { paddingBottom: 2 }, /* @__PURE__ */ React.createElement(\n    ErrorPanel,\n    {\n      error: taskStream.error,\n      titleFormat: \"markdown\",\n      title: taskStream.error.message\n    }\n  )) : null, /* @__PURE__ */ React.createElement(Box, { paddingBottom: 2 }, /* @__PURE__ */ React.createElement(\n    TaskSteps,\n    {\n      steps,\n      activeStep,\n      isComplete: taskStream.completed,\n      isError: Boolean(taskStream.error)\n    }\n  )), /* @__PURE__ */ React.createElement(Outputs, { output: taskStream.output }), buttonBarVisible ? /* @__PURE__ */ React.createElement(Box, { paddingBottom: 2 }, /* @__PURE__ */ React.createElement(Paper, null, /* @__PURE__ */ React.createElement(Box, { padding: 2 }, /* @__PURE__ */ React.createElement(\"div\", { className: classes.buttonBar }, /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      className: classes.cancelButton,\n      disabled: !cancelEnabled || cancelStatus !== \"not-executed\",\n      onClick: triggerCancel,\n      \"data-testid\": \"cancel-button\"\n    },\n    \"Cancel\"\n  ), /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      className: classes.logsVisibilityButton,\n      color: \"primary\",\n      variant: \"outlined\",\n      onClick: () => setLogVisibleState(!logsVisible)\n    },\n    logsVisible ? \"Hide Logs\" : \"Show Logs\"\n  ), /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      variant: \"contained\",\n      color: \"primary\",\n      disabled: cancelEnabled,\n      onClick: startOver\n    },\n    \"Start Over\"\n  ))))) : null, logsVisible ? /* @__PURE__ */ React.createElement(Box, { paddingBottom: 2, height: \"100%\" }, /* @__PURE__ */ React.createElement(Paper, { style: { height: \"100%\" } }, /* @__PURE__ */ React.createElement(Box, { padding: 2, height: \"100%\" }, /* @__PURE__ */ React.createElement(TaskLogStream, { logs: taskStream.stepLogs })))) : null));\n};\n\nexport { EntityPicker as E, MultiEntityPicker as M, OwnerPicker as O, RepoUrlPicker as R, EntityPickerSchema as a, EntityNamePicker as b, EntityNamePickerSchema as c, MultiEntityPickerSchema as d, entityNamePickerValidation as e, RepoUrlPickerSchema as f, OwnerPickerSchema as g, MyGroupsPicker as h, MyGroupsPickerSchema as i, OwnedEntityPicker as j, OwnedEntityPickerSchema as k, EntityTagsPicker as l, EntityTagsPickerSchema as m, OngoingTask as n, makeFieldSchemaFromZod as o, EntityPickerFieldSchema as p, OwnerPickerFieldSchema as q, repoPickerValidation as r, RepoUrlPickerFieldSchema as s, OwnedEntityPickerFieldSchema as t, EntityTagsPickerFieldSchema as u, validateMultiEntityPickerValidation as v, MyGroupsPickerFieldSchema as w };\n//# sourceMappingURL=OngoingTask-5a95edc0.esm.js.map\n","import { parseEntityRef } from '@backstage/catalog-model';\nimport { ResponseError } from '@backstage/errors';\nimport qs from 'qs';\nimport ObservableImpl from 'zen-observable';\nimport { EventSourcePolyfill } from 'event-source-polyfill';\nimport { createExternalRouteRef, createRouteRef, createSubRouteRef } from '@backstage/core-plugin-api';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ScaffolderClient {\n  constructor(options) {\n    __publicField(this, \"discoveryApi\");\n    __publicField(this, \"scmIntegrationsApi\");\n    __publicField(this, \"fetchApi\");\n    __publicField(this, \"identityApi\");\n    __publicField(this, \"useLongPollingLogs\");\n    var _a, _b;\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = (_a = options.fetchApi) != null ? _a : { fetch };\n    this.scmIntegrationsApi = options.scmIntegrationsApi;\n    this.useLongPollingLogs = (_b = options.useLongPollingLogs) != null ? _b : false;\n    this.identityApi = options.identityApi;\n  }\n  async listTasks(options) {\n    if (!this.identityApi) {\n      throw new Error(\n        \"IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method\"\n      );\n    }\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const { userEntityRef } = await this.identityApi.getBackstageIdentity();\n    const query = qs.stringify(\n      options.filterByOwnership === \"owned\" ? { createdBy: userEntityRef } : {}\n    );\n    const response = await this.fetchApi.fetch(`${baseUrl}/v2/tasks?${query}`);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n  async getIntegrationsList(options) {\n    const integrations = [\n      ...this.scmIntegrationsApi.azure.list(),\n      ...this.scmIntegrationsApi.bitbucket.list().filter(\n        (item) => !this.scmIntegrationsApi.bitbucketCloud.byHost(item.config.host) && !this.scmIntegrationsApi.bitbucketServer.byHost(item.config.host)\n      ),\n      ...this.scmIntegrationsApi.bitbucketCloud.list(),\n      ...this.scmIntegrationsApi.bitbucketServer.list(),\n      ...this.scmIntegrationsApi.gerrit.list(),\n      ...this.scmIntegrationsApi.gitea.list(),\n      ...this.scmIntegrationsApi.github.list(),\n      ...this.scmIntegrationsApi.gitlab.list()\n    ].map((c) => ({ type: c.type, title: c.title, host: c.config.host })).filter((c) => options.allowedHosts.includes(c.host));\n    return {\n      integrations\n    };\n  }\n  async getTemplateParameterSchema(templateRef) {\n    const { namespace, kind, name } = parseEntityRef(templateRef, {\n      defaultKind: \"template\"\n    });\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const templatePath = [namespace, kind, name].map((s) => encodeURIComponent(s)).join(\"/\");\n    const url = `${baseUrl}/v2/templates/${templatePath}/parameter-schema`;\n    const response = await this.fetchApi.fetch(url);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const schema = await response.json();\n    return schema;\n  }\n  async scaffold(options) {\n    const { templateRef, values, secrets = {} } = options;\n    const url = `${await this.discoveryApi.getBaseUrl(\"scaffolder\")}/v2/tasks`;\n    const response = await this.fetchApi.fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        templateRef,\n        values: { ...values },\n        secrets\n      })\n    });\n    if (response.status !== 201) {\n      const status = `${response.status} ${response.statusText}`;\n      const body = await response.text();\n      throw new Error(`Backend request failed, ${status} ${body.trim()}`);\n    }\n    const { id } = await response.json();\n    return { taskId: id };\n  }\n  async getTask(taskId) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const url = `${baseUrl}/v2/tasks/${encodeURIComponent(taskId)}`;\n    const response = await this.fetchApi.fetch(url);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n  streamLogs(options) {\n    if (this.useLongPollingLogs) {\n      return this.streamLogsPolling(options);\n    }\n    return this.streamLogsEventStream(options);\n  }\n  async dryRun(options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const response = await this.fetchApi.fetch(`${baseUrl}/v2/dry-run`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        template: options.template,\n        values: options.values,\n        secrets: options.secrets,\n        directoryContents: options.directoryContents\n      })\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return response.json();\n  }\n  streamLogsEventStream({\n    taskId,\n    after\n  }) {\n    return new ObservableImpl((subscriber) => {\n      var _a;\n      const params = new URLSearchParams();\n      if (after !== void 0) {\n        params.set(\"after\", String(Number(after)));\n      }\n      Promise.all([\n        this.discoveryApi.getBaseUrl(\"scaffolder\"),\n        (_a = this.identityApi) == null ? void 0 : _a.getCredentials()\n      ]).then(\n        ([baseUrl, credentials]) => {\n          const url = `${baseUrl}/v2/tasks/${encodeURIComponent(\n            taskId\n          )}/eventstream`;\n          const processEvent = (event) => {\n            if (event.data) {\n              try {\n                subscriber.next(JSON.parse(event.data));\n              } catch (ex) {\n                subscriber.error(ex);\n              }\n            }\n          };\n          const eventSource = new EventSourcePolyfill(url, {\n            withCredentials: true,\n            headers: (credentials == null ? void 0 : credentials.token) ? { Authorization: `Bearer ${credentials.token}` } : {}\n          });\n          eventSource.addEventListener(\"log\", processEvent);\n          eventSource.addEventListener(\"recovered\", processEvent);\n          eventSource.addEventListener(\"cancelled\", processEvent);\n          eventSource.addEventListener(\"completion\", (event) => {\n            processEvent(event);\n            eventSource.close();\n            subscriber.complete();\n          });\n          eventSource.addEventListener(\"error\", (event) => {\n            subscriber.error(event);\n          });\n        },\n        (error) => {\n          subscriber.error(error);\n        }\n      );\n    });\n  }\n  streamLogsPolling({\n    taskId,\n    after: inputAfter\n  }) {\n    let after = inputAfter;\n    return new ObservableImpl((subscriber) => {\n      this.discoveryApi.getBaseUrl(\"scaffolder\").then(async (baseUrl) => {\n        while (!subscriber.closed) {\n          const url = `${baseUrl}/v2/tasks/${encodeURIComponent(\n            taskId\n          )}/events?${qs.stringify({ after })}`;\n          const response = await this.fetchApi.fetch(url);\n          if (!response.ok) {\n            await new Promise((resolve) => setTimeout(resolve, 1e3));\n            continue;\n          }\n          const logs = await response.json();\n          for (const event of logs) {\n            after = Number(event.id);\n            subscriber.next(event);\n            if (event.type === \"completion\") {\n              subscriber.complete();\n              return;\n            }\n          }\n        }\n      });\n    });\n  }\n  async listActions() {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const response = await this.fetchApi.fetch(`${baseUrl}/v2/actions`);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n  async cancelTask(taskId) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const url = `${baseUrl}/v2/tasks/${encodeURIComponent(taskId)}/cancel`;\n    const response = await this.fetchApi.fetch(url, {\n      method: \"POST\"\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n}\n\nconst registerComponentRouteRef = createExternalRouteRef({\n  id: \"register-component\",\n  optional: true\n});\nconst viewTechDocRouteRef = createExternalRouteRef({\n  id: \"view-techdoc\",\n  optional: true,\n  params: [\"namespace\", \"kind\", \"name\"]\n});\nconst rootRouteRef = createRouteRef({\n  id: \"scaffolder\"\n});\ncreateSubRouteRef({\n  id: \"scaffolder/legacy/selected-template\",\n  parent: rootRouteRef,\n  path: \"/templates/:templateName\"\n});\nconst selectedTemplateRouteRef = createSubRouteRef({\n  id: \"scaffolder/selected-template\",\n  parent: rootRouteRef,\n  path: \"/templates/:namespace/:templateName\"\n});\nconst scaffolderTaskRouteRef = createSubRouteRef({\n  id: \"scaffolder/task\",\n  parent: rootRouteRef,\n  path: \"/tasks/:taskId\"\n});\nconst scaffolderListTaskRouteRef = createSubRouteRef({\n  id: \"scaffolder/list-tasks\",\n  parent: rootRouteRef,\n  path: \"/tasks\"\n});\nconst actionsRouteRef = createSubRouteRef({\n  id: \"scaffolder/actions\",\n  parent: rootRouteRef,\n  path: \"/actions\"\n});\nconst editRouteRef = createSubRouteRef({\n  id: \"scaffolder/edit\",\n  parent: rootRouteRef,\n  path: \"/edit\"\n});\n\nexport { ScaffolderClient as S, scaffolderTaskRouteRef as a, actionsRouteRef as b, scaffolderListTaskRouteRef as c, registerComponentRouteRef as d, editRouteRef as e, rootRouteRef as r, selectedTemplateRouteRef as s, viewTechDocRouteRef as v };\n//# sourceMappingURL=routes-1428737e.esm.js.map\n","import { S as ScaffolderClient, r as rootRouteRef$1, s as selectedTemplateRouteRef, a as scaffolderTaskRouteRef, b as actionsRouteRef, c as scaffolderListTaskRouteRef, e as editRouteRef, d as registerComponentRouteRef, v as viewTechDocRouteRef } from './esm/routes-1428737e.esm.js';\nexport { S as ScaffolderClient } from './esm/routes-1428737e.esm.js';\nimport { scmIntegrationsApiRef } from '@backstage/integration-react';\nimport { scaffolderApiRef as scaffolderApiRef$1, createScaffolderFieldExtension as createScaffolderFieldExtension$1, ScaffolderFieldExtensions as ScaffolderFieldExtensions$1, useTemplateSecrets as useTemplateSecrets$1, createScaffolderLayout as createScaffolderLayout$1, ScaffolderLayouts as ScaffolderLayouts$1 } from '@backstage/plugin-scaffolder-react';\nimport { E as EntityPicker, a as EntityPickerSchema, b as EntityNamePicker, e as entityNamePickerValidation, c as EntityNamePickerSchema, M as MultiEntityPicker, d as MultiEntityPickerSchema, v as validateMultiEntityPickerValidation, R as RepoUrlPicker, r as repoPickerValidation, f as RepoUrlPickerSchema, O as OwnerPicker, g as OwnerPickerSchema, h as MyGroupsPicker, i as MyGroupsPickerSchema, j as OwnedEntityPicker, k as OwnedEntityPickerSchema, l as EntityTagsPicker, m as EntityTagsPickerSchema } from './esm/OngoingTask-5a95edc0.esm.js';\nexport { p as EntityPickerFieldSchema, u as EntityTagsPickerFieldSchema, w as MyGroupsPickerFieldSchema, i as MyGroupsPickerSchema, t as OwnedEntityPickerFieldSchema, q as OwnerPickerFieldSchema, s as RepoUrlPickerFieldSchema, n as TaskPage, o as makeFieldSchemaFromZod, r as repoPickerValidation } from './esm/OngoingTask-5a95edc0.esm.js';\nimport { createPlugin, createApiFactory, discoveryApiRef, fetchApiRef, identityApiRef, createRoutableExtension, useApi, alertApiRef } from '@backstage/core-plugin-api';\nimport React from 'react';\nimport capitalize from 'lodash/capitalize';\nimport { Progress } from '@backstage/core-components';\nimport { Box, Typography, FormControlLabel, Checkbox, TextField } from '@material-ui/core';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Autocomplete } from '@material-ui/lab';\nimport { useEntityTypeFilter } from '@backstage/plugin-catalog-react';\nimport '@backstage/catalog-model';\nimport '@backstage/errors';\nimport 'qs';\nimport 'zen-observable';\nimport 'event-source-polyfill';\nimport 'zod';\nimport '@backstage/catalog-client';\nimport '@material-ui/core/FormControl';\nimport '@material-ui/lab/Autocomplete';\nimport 'react-use/lib/useAsync';\nimport '@material-ui/core/FormHelperText';\nimport '@material-ui/core/Input';\nimport '@material-ui/core/InputLabel';\nimport 'react-use/lib/useDebounce';\nimport 'react-use/lib/useEffectOnce';\nimport 'zod-to-json-schema';\nimport 'react-router-dom';\nimport '@react-hookz/web';\nimport '@material-ui/icons/Cancel';\nimport '@material-ui/icons/Repeat';\nimport '@material-ui/icons/Toc';\nimport '@material-ui/icons/ControlPoint';\nimport '@material-ui/icons/MoreVert';\nimport '@backstage/plugin-scaffolder-react/alpha';\n\nconst scaffolderPlugin = createPlugin({\n  id: \"scaffolder\",\n  apis: [\n    createApiFactory({\n      api: scaffolderApiRef$1,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        scmIntegrationsApi: scmIntegrationsApiRef,\n        fetchApi: fetchApiRef,\n        identityApi: identityApiRef\n      },\n      factory: ({ discoveryApi, scmIntegrationsApi, fetchApi, identityApi }) => new ScaffolderClient({\n        discoveryApi,\n        scmIntegrationsApi,\n        fetchApi,\n        identityApi\n      })\n    })\n  ],\n  routes: {\n    root: rootRouteRef$1,\n    selectedTemplate: selectedTemplateRouteRef,\n    ongoingTask: scaffolderTaskRouteRef,\n    actions: actionsRouteRef,\n    listTasks: scaffolderListTaskRouteRef,\n    edit: editRouteRef\n  },\n  externalRoutes: {\n    registerComponent: registerComponentRouteRef,\n    viewTechDoc: viewTechDocRouteRef\n  }\n});\nconst EntityPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension$1({\n    component: EntityPicker,\n    name: \"EntityPicker\",\n    schema: EntityPickerSchema\n  })\n);\nconst EntityNamePickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension$1({\n    component: EntityNamePicker,\n    name: \"EntityNamePicker\",\n    validation: entityNamePickerValidation,\n    schema: EntityNamePickerSchema\n  })\n);\nconst MultiEntityPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension$1({\n    component: MultiEntityPicker,\n    name: \"MultiEntityPicker\",\n    schema: MultiEntityPickerSchema,\n    validation: validateMultiEntityPickerValidation\n  })\n);\nconst RepoUrlPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension$1({\n    component: RepoUrlPicker,\n    name: \"RepoUrlPicker\",\n    validation: repoPickerValidation,\n    schema: RepoUrlPickerSchema\n  })\n);\nconst OwnerPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension$1({\n    component: OwnerPicker,\n    name: \"OwnerPicker\",\n    schema: OwnerPickerSchema\n  })\n);\nconst MyGroupsPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension$1({\n    component: MyGroupsPicker,\n    name: \"MyGroupsPicker\",\n    schema: MyGroupsPickerSchema\n  })\n);\nconst ScaffolderPage = scaffolderPlugin.provide(\n  createRoutableExtension({\n    name: \"ScaffolderPage\",\n    component: () => import('./esm/index-72b0a968.esm.js').then((m) => m.Router),\n    mountPoint: rootRouteRef$1\n  })\n);\nconst OwnedEntityPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension$1({\n    component: OwnedEntityPicker,\n    name: \"OwnedEntityPicker\",\n    schema: OwnedEntityPickerSchema\n  })\n);\nconst EntityTagsPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension$1({\n    component: EntityTagsPicker,\n    name: \"EntityTagsPicker\",\n    schema: EntityTagsPickerSchema\n  })\n);\n\nconst icon = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\" });\nconst checkedIcon = /* @__PURE__ */ React.createElement(CheckBoxIcon, { fontSize: \"small\" });\nconst TemplateTypePicker = () => {\n  const alertApi = useApi(alertApiRef);\n  const { error, loading, availableTypes, selectedTypes, setSelectedTypes } = useEntityTypeFilter();\n  if (loading)\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  if (!availableTypes)\n    return null;\n  if (error) {\n    alertApi.post({\n      message: `Failed to load entity types`,\n      severity: \"error\"\n    });\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      variant: \"button\",\n      component: \"label\",\n      htmlFor: \"categories-picker\"\n    },\n    \"Categories\"\n  ), /* @__PURE__ */ React.createElement(\n    Autocomplete,\n    {\n      id: \"categories-picker\",\n      multiple: true,\n      options: availableTypes,\n      value: selectedTypes,\n      onChange: (_, value) => setSelectedTypes(value),\n      renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(\n        FormControlLabel,\n        {\n          control: /* @__PURE__ */ React.createElement(\n            Checkbox,\n            {\n              icon,\n              checkedIcon,\n              checked: selected\n            }\n          ),\n          label: capitalize(option)\n        }\n      ),\n      size: \"small\",\n      popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, { \"data-testid\": \"categories-picker-expand\" }),\n      renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, { ...params, variant: \"outlined\" })\n    }\n  ));\n};\n\nconst rootRouteRef = rootRouteRef$1;\nconst createScaffolderFieldExtension = createScaffolderFieldExtension$1;\nconst ScaffolderFieldExtensions = ScaffolderFieldExtensions$1;\nconst useTemplateSecrets = useTemplateSecrets$1;\nconst scaffolderApiRef = scaffolderApiRef$1;\nconst createScaffolderLayout = createScaffolderLayout$1;\nconst ScaffolderLayouts = ScaffolderLayouts$1;\n\nexport { EntityNamePickerFieldExtension, EntityPickerFieldExtension, EntityTagsPickerFieldExtension, MultiEntityPickerFieldExtension, MyGroupsPickerFieldExtension, OwnedEntityPickerFieldExtension, OwnerPickerFieldExtension, RepoUrlPickerFieldExtension, ScaffolderFieldExtensions, ScaffolderLayouts, ScaffolderPage, TemplateTypePicker, createScaffolderFieldExtension, createScaffolderLayout, rootRouteRef, scaffolderApiRef, scaffolderPlugin, useTemplateSecrets };\n//# sourceMappingURL=index.esm.js.map\n","/** @license\r\n * eventsource.js\r\n * Available under MIT License (MIT)\r\n * https://github.com/Yaffle/EventSource/\r\n */\r\n\r\n/*jslint indent: 2, vars: true, plusplus: true */\r\n/*global setTimeout, clearTimeout */\r\n\r\n(function (global) {\r\n  \"use strict\";\r\n\r\n  var setTimeout = global.setTimeout;\r\n  var clearTimeout = global.clearTimeout;\r\n  var XMLHttpRequest = global.XMLHttpRequest;\r\n  var XDomainRequest = global.XDomainRequest;\r\n  var ActiveXObject = global.ActiveXObject;\r\n  var NativeEventSource = global.EventSource;\r\n\r\n  var document = global.document;\r\n  var Promise = global.Promise;\r\n  var fetch = global.fetch;\r\n  var Response = global.Response;\r\n  var TextDecoder = global.TextDecoder;\r\n  var TextEncoder = global.TextEncoder;\r\n  var AbortController = global.AbortController;\r\n\r\n  if (typeof window !== \"undefined\" && typeof document !== \"undefined\" && !(\"readyState\" in document) && document.body == null) { // Firefox 2\r\n    document.readyState = \"loading\";\r\n    window.addEventListener(\"load\", function (event) {\r\n      document.readyState = \"complete\";\r\n    }, false);\r\n  }\r\n\r\n  if (XMLHttpRequest == null && ActiveXObject != null) { // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest_in_IE6\r\n    XMLHttpRequest = function () {\r\n      return new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n    };\r\n  }\r\n\r\n  if (Object.create == undefined) {\r\n    Object.create = function (C) {\r\n      function F(){}\r\n      F.prototype = C;\r\n      return new F();\r\n    };\r\n  }\r\n\r\n  if (!Date.now) {\r\n    Date.now = function now() {\r\n      return new Date().getTime();\r\n    };\r\n  }\r\n\r\n  // see #118 (Promise#finally with polyfilled Promise)\r\n  // see #123 (data URLs crash Edge)\r\n  // see #125 (CSP violations)\r\n  // see pull/#138\r\n  // => No way to polyfill Promise#finally\r\n\r\n  if (AbortController == undefined) {\r\n    var originalFetch2 = fetch;\r\n    fetch = function (url, options) {\r\n      var signal = options.signal;\r\n      return originalFetch2(url, {headers: options.headers, credentials: options.credentials, cache: options.cache}).then(function (response) {\r\n        var reader = response.body.getReader();\r\n        signal._reader = reader;\r\n        if (signal._aborted) {\r\n          signal._reader.cancel();\r\n        }\r\n        return {\r\n          status: response.status,\r\n          statusText: response.statusText,\r\n          headers: response.headers,\r\n          body: {\r\n            getReader: function () {\r\n              return reader;\r\n            }\r\n          }\r\n        };\r\n      });\r\n    };\r\n    AbortController = function () {\r\n      this.signal = {\r\n        _reader: null,\r\n        _aborted: false\r\n      };\r\n      this.abort = function () {\r\n        if (this.signal._reader != null) {\r\n          this.signal._reader.cancel();\r\n        }\r\n        this.signal._aborted = true;\r\n      };\r\n    };\r\n  }\r\n\r\n  function TextDecoderPolyfill() {\r\n    this.bitsNeeded = 0;\r\n    this.codePoint = 0;\r\n  }\r\n\r\n  TextDecoderPolyfill.prototype.decode = function (octets) {\r\n    function valid(codePoint, shift, octetsCount) {\r\n      if (octetsCount === 1) {\r\n        return codePoint >= 0x0080 >> shift && codePoint << shift <= 0x07FF;\r\n      }\r\n      if (octetsCount === 2) {\r\n        return codePoint >= 0x0800 >> shift && codePoint << shift <= 0xD7FF || codePoint >= 0xE000 >> shift && codePoint << shift <= 0xFFFF;\r\n      }\r\n      if (octetsCount === 3) {\r\n        return codePoint >= 0x010000 >> shift && codePoint << shift <= 0x10FFFF;\r\n      }\r\n      throw new Error();\r\n    }\r\n    function octetsCount(bitsNeeded, codePoint) {\r\n      if (bitsNeeded === 6 * 1) {\r\n        return codePoint >> 6 > 15 ? 3 : codePoint > 31 ? 2 : 1;\r\n      }\r\n      if (bitsNeeded === 6 * 2) {\r\n        return codePoint > 15 ? 3 : 2;\r\n      }\r\n      if (bitsNeeded === 6 * 3) {\r\n        return 3;\r\n      }\r\n      throw new Error();\r\n    }\r\n    var REPLACER = 0xFFFD;\r\n    var string = \"\";\r\n    var bitsNeeded = this.bitsNeeded;\r\n    var codePoint = this.codePoint;\r\n    for (var i = 0; i < octets.length; i += 1) {\r\n      var octet = octets[i];\r\n      if (bitsNeeded !== 0) {\r\n        if (octet < 128 || octet > 191 || !valid(codePoint << 6 | octet & 63, bitsNeeded - 6, octetsCount(bitsNeeded, codePoint))) {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n          string += String.fromCharCode(codePoint);\r\n        }\r\n      }\r\n      if (bitsNeeded === 0) {\r\n        if (octet >= 0 && octet <= 127) {\r\n          bitsNeeded = 0;\r\n          codePoint = octet;\r\n        } else if (octet >= 192 && octet <= 223) {\r\n          bitsNeeded = 6 * 1;\r\n          codePoint = octet & 31;\r\n        } else if (octet >= 224 && octet <= 239) {\r\n          bitsNeeded = 6 * 2;\r\n          codePoint = octet & 15;\r\n        } else if (octet >= 240 && octet <= 247) {\r\n          bitsNeeded = 6 * 3;\r\n          codePoint = octet & 7;\r\n        } else {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n        }\r\n        if (bitsNeeded !== 0 && !valid(codePoint, bitsNeeded, octetsCount(bitsNeeded, codePoint))) {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n        }\r\n      } else {\r\n        bitsNeeded -= 6;\r\n        codePoint = codePoint << 6 | octet & 63;\r\n      }\r\n      if (bitsNeeded === 0) {\r\n        if (codePoint <= 0xFFFF) {\r\n          string += String.fromCharCode(codePoint);\r\n        } else {\r\n          string += String.fromCharCode(0xD800 + (codePoint - 0xFFFF - 1 >> 10));\r\n          string += String.fromCharCode(0xDC00 + (codePoint - 0xFFFF - 1 & 0x3FF));\r\n        }\r\n      }\r\n    }\r\n    this.bitsNeeded = bitsNeeded;\r\n    this.codePoint = codePoint;\r\n    return string;\r\n  };\r\n\r\n  // Firefox < 38 throws an error with stream option\r\n  var supportsStreamOption = function () {\r\n    try {\r\n      return new TextDecoder().decode(new TextEncoder().encode(\"test\"), {stream: true}) === \"test\";\r\n    } catch (error) {\r\n      console.debug(\"TextDecoder does not support streaming option. Using polyfill instead: \" + error);\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // IE, Edge\r\n  if (TextDecoder == undefined || TextEncoder == undefined || !supportsStreamOption()) {\r\n    TextDecoder = TextDecoderPolyfill;\r\n  }\r\n\r\n  var k = function () {\r\n  };\r\n\r\n  function XHRWrapper(xhr) {\r\n    this.withCredentials = false;\r\n    this.readyState = 0;\r\n    this.status = 0;\r\n    this.statusText = \"\";\r\n    this.responseText = \"\";\r\n    this.onprogress = k;\r\n    this.onload = k;\r\n    this.onerror = k;\r\n    this.onreadystatechange = k;\r\n    this._contentType = \"\";\r\n    this._xhr = xhr;\r\n    this._sendTimeout = 0;\r\n    this._abort = k;\r\n  }\r\n\r\n  XHRWrapper.prototype.open = function (method, url) {\r\n    this._abort(true);\r\n\r\n    var that = this;\r\n    var xhr = this._xhr;\r\n    var state = 1;\r\n    var timeout = 0;\r\n\r\n    this._abort = function (silent) {\r\n      if (that._sendTimeout !== 0) {\r\n        clearTimeout(that._sendTimeout);\r\n        that._sendTimeout = 0;\r\n      }\r\n      if (state === 1 || state === 2 || state === 3) {\r\n        state = 4;\r\n        xhr.onload = k;\r\n        xhr.onerror = k;\r\n        xhr.onabort = k;\r\n        xhr.onprogress = k;\r\n        xhr.onreadystatechange = k;\r\n        // IE 8 - 9: XDomainRequest#abort() does not fire any event\r\n        // Opera < 10: XMLHttpRequest#abort() does not fire any event\r\n        xhr.abort();\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        if (!silent) {\r\n          that.readyState = 4;\r\n          that.onabort(null);\r\n          that.onreadystatechange();\r\n        }\r\n      }\r\n      state = 0;\r\n    };\r\n\r\n    var onStart = function () {\r\n      if (state === 1) {\r\n        //state = 2;\r\n        var status = 0;\r\n        var statusText = \"\";\r\n        var contentType = undefined;\r\n        if (!(\"contentType\" in xhr)) {\r\n          try {\r\n            status = xhr.status;\r\n            statusText = xhr.statusText;\r\n            contentType = xhr.getResponseHeader(\"Content-Type\");\r\n          } catch (error) {\r\n            // IE < 10 throws exception for `xhr.status` when xhr.readyState === 2 || xhr.readyState === 3\r\n            // Opera < 11 throws exception for `xhr.status` when xhr.readyState === 2\r\n            // https://bugs.webkit.org/show_bug.cgi?id=29121\r\n            status = 0;\r\n            statusText = \"\";\r\n            contentType = undefined;\r\n            // Firefox < 14, Chrome ?, Safari ?\r\n            // https://bugs.webkit.org/show_bug.cgi?id=29658\r\n            // https://bugs.webkit.org/show_bug.cgi?id=77854\r\n          }\r\n        } else {\r\n          status = 200;\r\n          statusText = \"OK\";\r\n          contentType = xhr.contentType;\r\n        }\r\n        if (status !== 0) {\r\n          state = 2;\r\n          that.readyState = 2;\r\n          that.status = status;\r\n          that.statusText = statusText;\r\n          that._contentType = contentType;\r\n          that.onreadystatechange();\r\n        }\r\n      }\r\n    };\r\n    var onProgress = function () {\r\n      onStart();\r\n      if (state === 2 || state === 3) {\r\n        state = 3;\r\n        var responseText = \"\";\r\n        try {\r\n          responseText = xhr.responseText;\r\n        } catch (error) {\r\n          // IE 8 - 9 with XMLHttpRequest\r\n        }\r\n        that.readyState = 3;\r\n        that.responseText = responseText;\r\n        that.onprogress();\r\n      }\r\n    };\r\n    var onFinish = function (type, event) {\r\n      if (event == null || event.preventDefault == null) {\r\n        event = {\r\n          preventDefault: k\r\n        };\r\n      }\r\n      // Firefox 52 fires \"readystatechange\" (xhr.readyState === 4) without final \"readystatechange\" (xhr.readyState === 3)\r\n      // IE 8 fires \"onload\" without \"onprogress\"\r\n      onProgress();\r\n      if (state === 1 || state === 2 || state === 3) {\r\n        state = 4;\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        that.readyState = 4;\r\n        if (type === \"load\") {\r\n          that.onload(event);\r\n        } else if (type === \"error\") {\r\n          that.onerror(event);\r\n        } else if (type === \"abort\") {\r\n          that.onabort(event);\r\n        } else {\r\n          throw new TypeError();\r\n        }\r\n        that.onreadystatechange();\r\n      }\r\n    };\r\n    var onReadyStateChange = function (event) {\r\n      if (xhr != undefined) { // Opera 12\r\n        if (xhr.readyState === 4) {\r\n          if (!(\"onload\" in xhr) || !(\"onerror\" in xhr) || !(\"onabort\" in xhr)) {\r\n            onFinish(xhr.responseText === \"\" ? \"error\" : \"load\", event);\r\n          }\r\n        } else if (xhr.readyState === 3) {\r\n          if (!(\"onprogress\" in xhr)) { // testing XMLHttpRequest#responseText too many times is too slow in IE 11\r\n            // and in Firefox 3.6\r\n            onProgress();\r\n          }\r\n        } else if (xhr.readyState === 2) {\r\n          onStart();\r\n        }\r\n      }\r\n    };\r\n    var onTimeout = function () {\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, 500);\r\n      if (xhr.readyState === 3) {\r\n        onProgress();\r\n      }\r\n    };\r\n\r\n    // XDomainRequest#abort removes onprogress, onerror, onload\r\n    if (\"onload\" in xhr) {\r\n      xhr.onload = function (event) {\r\n        onFinish(\"load\", event);\r\n      };\r\n    }\r\n    if (\"onerror\" in xhr) {\r\n      xhr.onerror = function (event) {\r\n        onFinish(\"error\", event);\r\n      };\r\n    }\r\n    // improper fix to match Firefox behaviour, but it is better than just ignore abort\r\n    // see https://bugzilla.mozilla.org/show_bug.cgi?id=768596\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=880200\r\n    // https://code.google.com/p/chromium/issues/detail?id=153570\r\n    // IE 8 fires \"onload\" without \"onprogress\r\n    if (\"onabort\" in xhr) {\r\n      xhr.onabort = function (event) {\r\n        onFinish(\"abort\", event);\r\n      };\r\n    }\r\n\r\n    if (\"onprogress\" in xhr) {\r\n      xhr.onprogress = onProgress;\r\n    }\r\n\r\n    // IE 8 - 9 (XMLHTTPRequest)\r\n    // Opera < 12\r\n    // Firefox < 3.5\r\n    // Firefox 3.5 - 3.6 - ? < 9.0\r\n    // onprogress is not fired sometimes or delayed\r\n    // see also #64 (significant lag in IE 11)\r\n    if (\"onreadystatechange\" in xhr) {\r\n      xhr.onreadystatechange = function (event) {\r\n        onReadyStateChange(event);\r\n      };\r\n    }\r\n\r\n    if (\"contentType\" in xhr || !(\"ontimeout\" in XMLHttpRequest.prototype)) {\r\n      url += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + \"padding=true\";\r\n    }\r\n    xhr.open(method, url, true);\r\n\r\n    if (\"readyState\" in xhr) {\r\n      // workaround for Opera 12 issue with \"progress\" events\r\n      // #91 (XMLHttpRequest onprogress not fired for streaming response in Edge 14-15-?)\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, 0);\r\n    }\r\n  };\r\n  XHRWrapper.prototype.abort = function () {\r\n    this._abort(false);\r\n  };\r\n  XHRWrapper.prototype.getResponseHeader = function (name) {\r\n    return this._contentType;\r\n  };\r\n  XHRWrapper.prototype.setRequestHeader = function (name, value) {\r\n    var xhr = this._xhr;\r\n    if (\"setRequestHeader\" in xhr) {\r\n      xhr.setRequestHeader(name, value);\r\n    }\r\n  };\r\n  XHRWrapper.prototype.getAllResponseHeaders = function () {\r\n    // XMLHttpRequest#getAllResponseHeaders returns null for CORS requests in Firefox 3.6.28\r\n    return this._xhr.getAllResponseHeaders != undefined ? this._xhr.getAllResponseHeaders() || \"\" : \"\";\r\n  };\r\n  XHRWrapper.prototype.send = function () {\r\n    // loading indicator in Safari < ? (6), Chrome < 14, Firefox\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=736723\r\n    if ((!(\"ontimeout\" in XMLHttpRequest.prototype) || (!(\"sendAsBinary\" in XMLHttpRequest.prototype) && !(\"mozAnon\" in XMLHttpRequest.prototype))) &&\r\n        document != undefined &&\r\n        document.readyState != undefined &&\r\n        document.readyState !== \"complete\") {\r\n      var that = this;\r\n      that._sendTimeout = setTimeout(function () {\r\n        that._sendTimeout = 0;\r\n        that.send();\r\n      }, 4);\r\n      return;\r\n    }\r\n\r\n    var xhr = this._xhr;\r\n    // withCredentials should be set after \"open\" for Safari and Chrome (< 19 ?)\r\n    if (\"withCredentials\" in xhr) {\r\n      xhr.withCredentials = this.withCredentials;\r\n    }\r\n    try {\r\n      // xhr.send(); throws \"Not enough arguments\" in Firefox 3.0\r\n      xhr.send(undefined);\r\n    } catch (error1) {\r\n      // Safari 5.1.7, Opera 12\r\n      throw error1;\r\n    }\r\n  };\r\n\r\n  function toLowerCase(name) {\r\n    return name.replace(/[A-Z]/g, function (c) {\r\n      return String.fromCharCode(c.charCodeAt(0) + 0x20);\r\n    });\r\n  }\r\n\r\n  function HeadersPolyfill(all) {\r\n    // Get headers: implemented according to mozilla's example code: https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\r\n    var map = Object.create(null);\r\n    var array = all.split(\"\\r\\n\");\r\n    for (var i = 0; i < array.length; i += 1) {\r\n      var line = array[i];\r\n      var parts = line.split(\": \");\r\n      var name = parts.shift();\r\n      var value = parts.join(\": \");\r\n      map[toLowerCase(name)] = value;\r\n    }\r\n    this._map = map;\r\n  }\r\n  HeadersPolyfill.prototype.get = function (name) {\r\n    return this._map[toLowerCase(name)];\r\n  };\r\n\r\n  if (XMLHttpRequest != null && XMLHttpRequest.HEADERS_RECEIVED == null) { // IE < 9, Firefox 3.6\r\n    XMLHttpRequest.HEADERS_RECEIVED = 2;\r\n  }\r\n\r\n  function XHRTransport() {\r\n  }\r\n\r\n  XHRTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\r\n    xhr.open(\"GET\", url);\r\n    var offset = 0;\r\n    xhr.onprogress = function () {\r\n      var responseText = xhr.responseText;\r\n      var chunk = responseText.slice(offset);\r\n      offset += chunk.length;\r\n      onProgressCallback(chunk);\r\n    };\r\n    xhr.onerror = function (event) {\r\n      event.preventDefault();\r\n      onFinishCallback(new Error(\"NetworkError\"));\r\n    };\r\n    xhr.onload = function () {\r\n      onFinishCallback(null);\r\n    };\r\n    xhr.onabort = function () {\r\n      onFinishCallback(null);\r\n    };\r\n    xhr.onreadystatechange = function () {\r\n      if (xhr.readyState === XMLHttpRequest.HEADERS_RECEIVED) {\r\n        var status = xhr.status;\r\n        var statusText = xhr.statusText;\r\n        var contentType = xhr.getResponseHeader(\"Content-Type\");\r\n        var headers = xhr.getAllResponseHeaders();\r\n        onStartCallback(status, statusText, contentType, new HeadersPolyfill(headers));\r\n      }\r\n    };\r\n    xhr.withCredentials = withCredentials;\r\n    for (var name in headers) {\r\n      if (Object.prototype.hasOwnProperty.call(headers, name)) {\r\n        xhr.setRequestHeader(name, headers[name]);\r\n      }\r\n    }\r\n    xhr.send();\r\n    return xhr;\r\n  };\r\n\r\n  function HeadersWrapper(headers) {\r\n    this._headers = headers;\r\n  }\r\n  HeadersWrapper.prototype.get = function (name) {\r\n    return this._headers.get(name);\r\n  };\r\n\r\n  function FetchTransport() {\r\n  }\r\n\r\n  FetchTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\r\n    var reader = null;\r\n    var controller = new AbortController();\r\n    var signal = controller.signal;\r\n    var textDecoder = new TextDecoder();\r\n    fetch(url, {\r\n      headers: headers,\r\n      credentials: withCredentials ? \"include\" : \"same-origin\",\r\n      signal: signal,\r\n      cache: \"no-store\"\r\n    }).then(function (response) {\r\n      reader = response.body.getReader();\r\n      onStartCallback(response.status, response.statusText, response.headers.get(\"Content-Type\"), new HeadersWrapper(response.headers));\r\n      // see https://github.com/promises-aplus/promises-spec/issues/179\r\n      return new Promise(function (resolve, reject) {\r\n        var readNextChunk = function () {\r\n          reader.read().then(function (result) {\r\n            if (result.done) {\r\n              //Note: bytes in textDecoder are ignored\r\n              resolve(undefined);\r\n            } else {\r\n              var chunk = textDecoder.decode(result.value, {stream: true});\r\n              onProgressCallback(chunk);\r\n              readNextChunk();\r\n            }\r\n          })[\"catch\"](function (error) {\r\n            reject(error);\r\n          });\r\n        };\r\n        readNextChunk();\r\n      });\r\n    })[\"catch\"](function (error) {\r\n      if (error.name === \"AbortError\") {\r\n        return undefined;\r\n      } else {\r\n        return error;\r\n      }\r\n    }).then(function (error) {\r\n      onFinishCallback(error);\r\n    });\r\n    return {\r\n      abort: function () {\r\n        if (reader != null) {\r\n          reader.cancel(); // https://bugzilla.mozilla.org/show_bug.cgi?id=1583815\r\n        }\r\n        controller.abort();\r\n      }\r\n    };\r\n  };\r\n\r\n  function EventTarget() {\r\n    this._listeners = Object.create(null);\r\n  }\r\n\r\n  function throwError(e) {\r\n    setTimeout(function () {\r\n      throw e;\r\n    }, 0);\r\n  }\r\n\r\n  EventTarget.prototype.dispatchEvent = function (event) {\r\n    event.target = this;\r\n    var typeListeners = this._listeners[event.type];\r\n    if (typeListeners != undefined) {\r\n      var length = typeListeners.length;\r\n      for (var i = 0; i < length; i += 1) {\r\n        var listener = typeListeners[i];\r\n        try {\r\n          if (typeof listener.handleEvent === \"function\") {\r\n            listener.handleEvent(event);\r\n          } else {\r\n            listener.call(this, event);\r\n          }\r\n        } catch (e) {\r\n          throwError(e);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  EventTarget.prototype.addEventListener = function (type, listener) {\r\n    type = String(type);\r\n    var listeners = this._listeners;\r\n    var typeListeners = listeners[type];\r\n    if (typeListeners == undefined) {\r\n      typeListeners = [];\r\n      listeners[type] = typeListeners;\r\n    }\r\n    var found = false;\r\n    for (var i = 0; i < typeListeners.length; i += 1) {\r\n      if (typeListeners[i] === listener) {\r\n        found = true;\r\n      }\r\n    }\r\n    if (!found) {\r\n      typeListeners.push(listener);\r\n    }\r\n  };\r\n  EventTarget.prototype.removeEventListener = function (type, listener) {\r\n    type = String(type);\r\n    var listeners = this._listeners;\r\n    var typeListeners = listeners[type];\r\n    if (typeListeners != undefined) {\r\n      var filtered = [];\r\n      for (var i = 0; i < typeListeners.length; i += 1) {\r\n        if (typeListeners[i] !== listener) {\r\n          filtered.push(typeListeners[i]);\r\n        }\r\n      }\r\n      if (filtered.length === 0) {\r\n        delete listeners[type];\r\n      } else {\r\n        listeners[type] = filtered;\r\n      }\r\n    }\r\n  };\r\n\r\n  function Event(type) {\r\n    this.type = type;\r\n    this.target = undefined;\r\n  }\r\n\r\n  function MessageEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.data = options.data;\r\n    this.lastEventId = options.lastEventId;\r\n  }\r\n\r\n  MessageEvent.prototype = Object.create(Event.prototype);\r\n\r\n  function ConnectionEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.status = options.status;\r\n    this.statusText = options.statusText;\r\n    this.headers = options.headers;\r\n  }\r\n\r\n  ConnectionEvent.prototype = Object.create(Event.prototype);\r\n\r\n  function ErrorEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.error = options.error;\r\n  }\r\n\r\n  ErrorEvent.prototype = Object.create(Event.prototype);\r\n\r\n  var WAITING = -1;\r\n  var CONNECTING = 0;\r\n  var OPEN = 1;\r\n  var CLOSED = 2;\r\n\r\n  var AFTER_CR = -1;\r\n  var FIELD_START = 0;\r\n  var FIELD = 1;\r\n  var VALUE_START = 2;\r\n  var VALUE = 3;\r\n\r\n  var contentTypeRegExp = /^text\\/event\\-stream(;.*)?$/i;\r\n\r\n  var MINIMUM_DURATION = 1000;\r\n  var MAXIMUM_DURATION = 18000000;\r\n\r\n  var parseDuration = function (value, def) {\r\n    var n = value == null ? def : parseInt(value, 10);\r\n    if (n !== n) {\r\n      n = def;\r\n    }\r\n    return clampDuration(n);\r\n  };\r\n  var clampDuration = function (n) {\r\n    return Math.min(Math.max(n, MINIMUM_DURATION), MAXIMUM_DURATION);\r\n  };\r\n\r\n  var fire = function (that, f, event) {\r\n    try {\r\n      if (typeof f === \"function\") {\r\n        f.call(that, event);\r\n      }\r\n    } catch (e) {\r\n      throwError(e);\r\n    }\r\n  };\r\n\r\n  function EventSourcePolyfill(url, options) {\r\n    EventTarget.call(this);\r\n    options = options || {};\r\n\r\n    this.onopen = undefined;\r\n    this.onmessage = undefined;\r\n    this.onerror = undefined;\r\n\r\n    this.url = undefined;\r\n    this.readyState = undefined;\r\n    this.withCredentials = undefined;\r\n    this.headers = undefined;\r\n\r\n    this._close = undefined;\r\n\r\n    start(this, url, options);\r\n  }\r\n\r\n  function getBestXHRTransport() {\r\n    return (XMLHttpRequest != undefined && (\"withCredentials\" in XMLHttpRequest.prototype)) || XDomainRequest == undefined\r\n        ? new XMLHttpRequest()\r\n        : new XDomainRequest();\r\n  }\r\n\r\n  var isFetchSupported = fetch != undefined && Response != undefined && \"body\" in Response.prototype;\r\n\r\n  function start(es, url, options) {\r\n    url = String(url);\r\n    var withCredentials = Boolean(options.withCredentials);\r\n    var lastEventIdQueryParameterName = options.lastEventIdQueryParameterName || \"lastEventId\";\r\n\r\n    var initialRetry = clampDuration(1000);\r\n    var heartbeatTimeout = parseDuration(options.heartbeatTimeout, 45000);\r\n\r\n    var lastEventId = \"\";\r\n    var retry = initialRetry;\r\n    var wasActivity = false;\r\n    var textLength = 0;\r\n    var headers = options.headers || {};\r\n    var TransportOption = options.Transport;\r\n    var xhr = isFetchSupported && TransportOption == undefined ? undefined : new XHRWrapper(TransportOption != undefined ? new TransportOption() : getBestXHRTransport());\r\n    var transport = TransportOption != null && typeof TransportOption !== \"string\" ? new TransportOption() : (xhr == undefined ? new FetchTransport() : new XHRTransport());\r\n    var abortController = undefined;\r\n    var timeout = 0;\r\n    var currentState = WAITING;\r\n    var dataBuffer = \"\";\r\n    var lastEventIdBuffer = \"\";\r\n    var eventTypeBuffer = \"\";\r\n\r\n    var textBuffer = \"\";\r\n    var state = FIELD_START;\r\n    var fieldStart = 0;\r\n    var valueStart = 0;\r\n\r\n    var onStart = function (status, statusText, contentType, headers) {\r\n      if (currentState === CONNECTING) {\r\n        if (status === 200 && contentType != undefined && contentTypeRegExp.test(contentType)) {\r\n          currentState = OPEN;\r\n          wasActivity = Date.now();\r\n          retry = initialRetry;\r\n          es.readyState = OPEN;\r\n          var event = new ConnectionEvent(\"open\", {\r\n            status: status,\r\n            statusText: statusText,\r\n            headers: headers\r\n          });\r\n          es.dispatchEvent(event);\r\n          fire(es, es.onopen, event);\r\n        } else {\r\n          var message = \"\";\r\n          if (status !== 200) {\r\n            if (statusText) {\r\n              statusText = statusText.replace(/\\s+/g, \" \");\r\n            }\r\n            message = \"EventSource's response has a status \" + status + \" \" + statusText + \" that is not 200. Aborting the connection.\";\r\n          } else {\r\n            message = \"EventSource's response has a Content-Type specifying an unsupported type: \" + (contentType == undefined ? \"-\" : contentType.replace(/\\s+/g, \" \")) + \". Aborting the connection.\";\r\n          }\r\n          close();\r\n          var event = new ConnectionEvent(\"error\", {\r\n            status: status,\r\n            statusText: statusText,\r\n            headers: headers\r\n          });\r\n          es.dispatchEvent(event);\r\n          fire(es, es.onerror, event);\r\n          console.error(message);\r\n        }\r\n      }\r\n    };\r\n\r\n    var onProgress = function (textChunk) {\r\n      if (currentState === OPEN) {\r\n        var n = -1;\r\n        for (var i = 0; i < textChunk.length; i += 1) {\r\n          var c = textChunk.charCodeAt(i);\r\n          if (c === \"\\n\".charCodeAt(0) || c === \"\\r\".charCodeAt(0)) {\r\n            n = i;\r\n          }\r\n        }\r\n        var chunk = (n !== -1 ? textBuffer : \"\") + textChunk.slice(0, n + 1);\r\n        textBuffer = (n === -1 ? textBuffer : \"\") + textChunk.slice(n + 1);\r\n        if (textChunk !== \"\") {\r\n          wasActivity = Date.now();\r\n          textLength += textChunk.length;\r\n        }\r\n        for (var position = 0; position < chunk.length; position += 1) {\r\n          var c = chunk.charCodeAt(position);\r\n          if (state === AFTER_CR && c === \"\\n\".charCodeAt(0)) {\r\n            state = FIELD_START;\r\n          } else {\r\n            if (state === AFTER_CR) {\r\n              state = FIELD_START;\r\n            }\r\n            if (c === \"\\r\".charCodeAt(0) || c === \"\\n\".charCodeAt(0)) {\r\n              if (state !== FIELD_START) {\r\n                if (state === FIELD) {\r\n                  valueStart = position + 1;\r\n                }\r\n                var field = chunk.slice(fieldStart, valueStart - 1);\r\n                var value = chunk.slice(valueStart + (valueStart < position && chunk.charCodeAt(valueStart) === \" \".charCodeAt(0) ? 1 : 0), position);\r\n                if (field === \"data\") {\r\n                  dataBuffer += \"\\n\";\r\n                  dataBuffer += value;\r\n                } else if (field === \"id\") {\r\n                  lastEventIdBuffer = value;\r\n                } else if (field === \"event\") {\r\n                  eventTypeBuffer = value;\r\n                } else if (field === \"retry\") {\r\n                  initialRetry = parseDuration(value, initialRetry);\r\n                  retry = initialRetry;\r\n                } else if (field === \"heartbeatTimeout\") {\r\n                  heartbeatTimeout = parseDuration(value, heartbeatTimeout);\r\n                  if (timeout !== 0) {\r\n                    clearTimeout(timeout);\r\n                    timeout = setTimeout(function () {\r\n                      onTimeout();\r\n                    }, heartbeatTimeout);\r\n                  }\r\n                }\r\n              }\r\n              if (state === FIELD_START) {\r\n                if (dataBuffer !== \"\") {\r\n                  lastEventId = lastEventIdBuffer;\r\n                  if (eventTypeBuffer === \"\") {\r\n                    eventTypeBuffer = \"message\";\r\n                  }\r\n                  var event = new MessageEvent(eventTypeBuffer, {\r\n                    data: dataBuffer.slice(1),\r\n                    lastEventId: lastEventIdBuffer\r\n                  });\r\n                  es.dispatchEvent(event);\r\n                  if (eventTypeBuffer === \"open\") {\r\n                    fire(es, es.onopen, event);\r\n                  } else if (eventTypeBuffer === \"message\") {\r\n                    fire(es, es.onmessage, event);\r\n                  } else if (eventTypeBuffer === \"error\") {\r\n                    fire(es, es.onerror, event);\r\n                  }\r\n                  if (currentState === CLOSED) {\r\n                    return;\r\n                  }\r\n                }\r\n                dataBuffer = \"\";\r\n                eventTypeBuffer = \"\";\r\n              }\r\n              state = c === \"\\r\".charCodeAt(0) ? AFTER_CR : FIELD_START;\r\n            } else {\r\n              if (state === FIELD_START) {\r\n                fieldStart = position;\r\n                state = FIELD;\r\n              }\r\n              if (state === FIELD) {\r\n                if (c === \":\".charCodeAt(0)) {\r\n                  valueStart = position + 1;\r\n                  state = VALUE_START;\r\n                }\r\n              } else if (state === VALUE_START) {\r\n                state = VALUE;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    var onFinish = function (error) {\r\n      if (currentState === OPEN || currentState === CONNECTING) {\r\n        currentState = WAITING;\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        timeout = setTimeout(function () {\r\n          onTimeout();\r\n        }, retry);\r\n        retry = clampDuration(Math.min(initialRetry * 16, retry * 2));\r\n\r\n        es.readyState = CONNECTING;\r\n        var event = new ErrorEvent(\"error\", {error: error});\r\n        es.dispatchEvent(event);\r\n        fire(es, es.onerror, event);\r\n        if (error != undefined) {\r\n          console.error(error);\r\n        }\r\n      }\r\n    };\r\n\r\n    var close = function () {\r\n      currentState = CLOSED;\r\n      if (abortController != undefined) {\r\n        abortController.abort();\r\n        abortController = undefined;\r\n      }\r\n      if (timeout !== 0) {\r\n        clearTimeout(timeout);\r\n        timeout = 0;\r\n      }\r\n      es.readyState = CLOSED;\r\n    };\r\n\r\n    var onTimeout = function () {\r\n      timeout = 0;\r\n\r\n      if (currentState !== WAITING) {\r\n        if (!wasActivity && abortController != undefined) {\r\n          onFinish(new Error(\"No activity within \" + heartbeatTimeout + \" milliseconds.\" + \" \" + (currentState === CONNECTING ? \"No response received.\" : textLength + \" chars received.\") + \" \" + \"Reconnecting.\"));\r\n          if (abortController != undefined) {\r\n            abortController.abort();\r\n            abortController = undefined;\r\n          }\r\n        } else {\r\n          var nextHeartbeat = Math.max((wasActivity || Date.now()) + heartbeatTimeout - Date.now(), 1);\r\n          wasActivity = false;\r\n          timeout = setTimeout(function () {\r\n            onTimeout();\r\n          }, nextHeartbeat);\r\n        }\r\n        return;\r\n      }\r\n\r\n      wasActivity = false;\r\n      textLength = 0;\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, heartbeatTimeout);\r\n\r\n      currentState = CONNECTING;\r\n      dataBuffer = \"\";\r\n      eventTypeBuffer = \"\";\r\n      lastEventIdBuffer = lastEventId;\r\n      textBuffer = \"\";\r\n      fieldStart = 0;\r\n      valueStart = 0;\r\n      state = FIELD_START;\r\n\r\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=428916\r\n      // Request header field Last-Event-ID is not allowed by Access-Control-Allow-Headers.\r\n      var requestURL = url;\r\n      if (url.slice(0, 5) !== \"data:\" && url.slice(0, 5) !== \"blob:\") {\r\n        if (lastEventId !== \"\") {\r\n          // Remove the lastEventId parameter if it's already part of the request URL.\r\n          var i = url.indexOf(\"?\");\r\n          requestURL = i === -1 ? url : url.slice(0, i + 1) + url.slice(i + 1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g, function (p, paramName) {\r\n            return paramName === lastEventIdQueryParameterName ? '' : p;\r\n          });\r\n          // Append the current lastEventId to the request URL.\r\n          requestURL += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + lastEventIdQueryParameterName +\"=\" + encodeURIComponent(lastEventId);\r\n        }\r\n      }\r\n      var withCredentials = es.withCredentials;\r\n      var requestHeaders = {};\r\n      requestHeaders[\"Accept\"] = \"text/event-stream\";\r\n      var headers = es.headers;\r\n      if (headers != undefined) {\r\n        for (var name in headers) {\r\n          if (Object.prototype.hasOwnProperty.call(headers, name)) {\r\n            requestHeaders[name] = headers[name];\r\n          }\r\n        }\r\n      }\r\n      try {\r\n        abortController = transport.open(xhr, onStart, onProgress, onFinish, requestURL, withCredentials, requestHeaders);\r\n      } catch (error) {\r\n        close();\r\n        throw error;\r\n      }\r\n    };\r\n\r\n    es.url = url;\r\n    es.readyState = CONNECTING;\r\n    es.withCredentials = withCredentials;\r\n    es.headers = headers;\r\n    es._close = close;\r\n\r\n    onTimeout();\r\n  }\r\n\r\n  EventSourcePolyfill.prototype = Object.create(EventTarget.prototype);\r\n  EventSourcePolyfill.prototype.CONNECTING = CONNECTING;\r\n  EventSourcePolyfill.prototype.OPEN = OPEN;\r\n  EventSourcePolyfill.prototype.CLOSED = CLOSED;\r\n  EventSourcePolyfill.prototype.close = function () {\r\n    this._close();\r\n  };\r\n\r\n  EventSourcePolyfill.CONNECTING = CONNECTING;\r\n  EventSourcePolyfill.OPEN = OPEN;\r\n  EventSourcePolyfill.CLOSED = CLOSED;\r\n  EventSourcePolyfill.prototype.withCredentials = undefined;\r\n\r\n  var R = NativeEventSource\r\n  if (XMLHttpRequest != undefined && (NativeEventSource == undefined || !(\"withCredentials\" in NativeEventSource.prototype))) {\r\n    // Why replace a native EventSource ?\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=444328\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=831392\r\n    // https://code.google.com/p/chromium/issues/detail?id=260144\r\n    // https://code.google.com/p/chromium/issues/detail?id=225654\r\n    // ...\r\n    R = EventSourcePolyfill;\r\n  }\r\n\r\n  (function (factory) {\r\n    if (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n      var v = factory(exports);\r\n      if (v !== undefined) module.exports = v;\r\n    }\r\n    else if (typeof define === \"function\" && define.amd) {\r\n      define([\"exports\"], factory);\r\n    }\r\n    else {\r\n      factory(global);\r\n    }\r\n  })(function (exports) {\r\n    exports.EventSourcePolyfill = EventSourcePolyfill;\r\n    exports.NativeEventSource = NativeEventSource;\r\n    exports.EventSource = R;\r\n  });\r\n}(typeof globalThis === 'undefined' ? (typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : this) : globalThis));\r\n","import React, { useMemo, useCallback, createElement, Fragment, isValidElement, cloneElement } from 'react';\nimport { AnalyticsContext, useAnalytics, createReactExtension, useElementFilter, getComponentData } from '@backstage/core-plugin-api';\nimport { makeStyles, ListItemIcon, ListItemText, Box, ListItem, List } from '@material-ui/core';\nimport Typography from '@material-ui/core/Typography';\nimport { Link } from '@backstage/core-components';\n\nconst useStyles = makeStyles(\n  () => ({\n    highlight: {}\n  }),\n  { name: \"BackstageHighlightedSearchResultText\" }\n);\nconst HighlightedSearchResultText = (props) => {\n  const { text, preTag, postTag } = props;\n  const classes = useStyles();\n  const terms = useMemo(\n    () => text.split(new RegExp(`(${preTag}.+?${postTag})`)),\n    [postTag, preTag, text]\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, terms.map(\n    (t, idx) => t.includes(preTag) ? /* @__PURE__ */ React.createElement(\"mark\", { className: classes.highlight, key: idx }, t.replace(new RegExp(`${preTag}|${postTag}`, \"g\"), \"\")) : t\n  ));\n};\n\nconst DefaultResultListItemComponent = ({\n  result,\n  highlight,\n  icon,\n  secondaryAction,\n  lineClamp = 5\n}) => {\n  if (!result)\n    return null;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, icon && /* @__PURE__ */ React.createElement(ListItemIcon, null, icon), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primaryTypographyProps: { variant: \"h6\" },\n      primary: /* @__PURE__ */ React.createElement(Link, { noTrack: true, to: result.location }, (highlight == null ? void 0 : highlight.fields.title) ? /* @__PURE__ */ React.createElement(\n        HighlightedSearchResultText,\n        {\n          text: (highlight == null ? void 0 : highlight.fields.title) || \"\",\n          preTag: (highlight == null ? void 0 : highlight.preTag) || \"\",\n          postTag: (highlight == null ? void 0 : highlight.postTag) || \"\"\n        }\n      ) : result.title),\n      secondary: /* @__PURE__ */ React.createElement(\n        Typography,\n        {\n          component: \"span\",\n          style: {\n            display: \"-webkit-box\",\n            WebkitBoxOrient: \"vertical\",\n            WebkitLineClamp: lineClamp,\n            overflow: \"hidden\"\n          },\n          color: \"textSecondary\",\n          variant: \"body2\"\n        },\n        (highlight == null ? void 0 : highlight.fields.text) ? /* @__PURE__ */ React.createElement(\n          HighlightedSearchResultText,\n          {\n            text: highlight.fields.text,\n            preTag: highlight.preTag,\n            postTag: highlight.postTag\n          }\n        ) : result.text\n      )\n    }\n  ), secondaryAction && /* @__PURE__ */ React.createElement(Box, { alignItems: \"flex-end\" }, secondaryAction));\n};\nconst HigherOrderDefaultResultListItem = (props) => {\n  return /* @__PURE__ */ React.createElement(\n    AnalyticsContext,\n    {\n      attributes: {\n        pluginId: \"search\",\n        extension: \"DefaultResultListItem\"\n      }\n    },\n    /* @__PURE__ */ React.createElement(DefaultResultListItemComponent, { ...props })\n  );\n};\n\nconst SEARCH_RESULT_LIST_ITEM_EXTENSION = \"search.results.list.items.extensions.v1\";\nconst findSearchResultListItemExtensionElement = (elements, result) => {\n  for (const element of elements) {\n    if (!isValidElement(element))\n      continue;\n    const predicate = getComponentData(\n      element,\n      SEARCH_RESULT_LIST_ITEM_EXTENSION\n    );\n    if (!(predicate == null ? void 0 : predicate(result)))\n      continue;\n    return cloneElement(element, {\n      rank: result.rank,\n      highlight: result.highlight,\n      result: result.document,\n      // Use props in situations where a consumer is manually rendering the extension\n      ...element.props\n    });\n  }\n  return null;\n};\nconst SearchResultListItemExtension = (props) => {\n  const {\n    rank,\n    result,\n    noTrack,\n    children,\n    alignItems = \"flex-start\",\n    ...rest\n  } = props;\n  const analytics = useAnalytics();\n  const handleClickCapture = useCallback(() => {\n    if (noTrack)\n      return;\n    if (!result)\n      return;\n    analytics.captureEvent(\"discover\", result.title, {\n      attributes: { to: result.location },\n      value: rank\n    });\n  }, [rank, result, noTrack, analytics]);\n  return /* @__PURE__ */ React.createElement(\n    ListItem,\n    {\n      divider: true,\n      alignItems,\n      onClickCapture: handleClickCapture,\n      ...rest\n    },\n    children\n  );\n};\nconst createSearchResultListItemExtension = (options) => {\n  const { name, component, predicate = () => true } = options;\n  return createReactExtension({\n    name,\n    component: {\n      lazy: () => component().then(\n        (type) => (props) => /* @__PURE__ */ React.createElement(\n          SearchResultListItemExtension,\n          {\n            rank: props.rank,\n            result: props.result,\n            noTrack: props.noTrack\n          },\n          createElement(type, props)\n        )\n      )\n    },\n    data: {\n      [SEARCH_RESULT_LIST_ITEM_EXTENSION]: predicate\n    }\n  });\n};\nconst useSearchResultListItemExtensions = (children) => {\n  const elements = useElementFilter(\n    children,\n    (collection) => {\n      return collection.selectByComponentData({\n        key: SEARCH_RESULT_LIST_ITEM_EXTENSION\n      }).getElements();\n    },\n    [children]\n  );\n  return useCallback(\n    (result, key) => {\n      const element = findSearchResultListItemExtensionElement(\n        elements,\n        result\n      );\n      return /* @__PURE__ */ React.createElement(Fragment, { key }, element != null ? element : /* @__PURE__ */ React.createElement(\n        SearchResultListItemExtension,\n        {\n          rank: result.rank,\n          result: result.document\n        },\n        /* @__PURE__ */ React.createElement(\n          HigherOrderDefaultResultListItem,\n          {\n            rank: result.rank,\n            highlight: result.highlight,\n            result: result.document\n          }\n        )\n      ));\n    },\n    [elements]\n  );\n};\nconst SearchResultListItemExtensions = (props) => {\n  const { results, children, ...rest } = props;\n  const render = useSearchResultListItemExtensions(children);\n  return /* @__PURE__ */ React.createElement(List, { ...rest }, results.map(render));\n};\n\nexport { HigherOrderDefaultResultListItem as H, SearchResultListItemExtensions as S, SearchResultListItemExtension as a, HighlightedSearchResultText as b, createSearchResultListItemExtension as c, useSearchResultListItemExtensions as u };\n//# sourceMappingURL=extensions-c878c532.esm.js.map\n","import { createApiRef, useApi, configApiRef, AnalyticsContext, useAnalytics } from '@backstage/core-plugin-api';\nimport { S as SearchResultListItemExtensions, u as useSearchResultListItemExtensions, H as HigherOrderDefaultResultListItem } from './esm/extensions-c878c532.esm.js';\nexport { H as DefaultResultListItem, b as HighlightedSearchResultText, a as SearchResultListItemExtension, S as SearchResultListItemExtensions, c as createSearchResultListItemExtension, u as useSearchResultListItemExtensions } from './esm/extensions-c878c532.esm.js';\nimport { TextField, InputAdornment, IconButton, makeStyles, CircularProgress, ListItemIcon, ListItemText, Chip, FormControl, FormLabel, FormControlLabel, Checkbox, InputLabel, Select, MenuItem, Typography, TablePagination, List, InputBase, ListSubheader, Menu, Button as Button$1 } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport SearchIcon from '@material-ui/icons/Search';\nimport React, { useContext, useState, useCallback, useEffect, forwardRef, useRef, useMemo } from 'react';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport { isEqual, isFunction } from 'lodash';\nimport useAsync from 'react-use/lib/useAsync';\nimport usePrevious from 'react-use/lib/usePrevious';\nimport { createVersionedContext, createVersionedValueMap } from '@backstage/version-bridge';\nimport { Autocomplete } from '@material-ui/lab';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport { Progress, ResponseErrorPanel, EmptyState, Link } from '@backstage/core-components';\nimport qs from 'qs';\nimport AddIcon from '@material-ui/icons/Add';\nimport ArrowRightIcon from '@material-ui/icons/ArrowForwardIos';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport '@material-ui/core/Typography';\n\nconst searchApiRef = createApiRef({\n  id: \"plugin.search.queryservice\"\n});\nclass MockSearchApi {\n  constructor(mockedResults) {\n    this.mockedResults = mockedResults;\n  }\n  query() {\n    return Promise.resolve(this.mockedResults || { results: [] });\n  }\n}\n\nconst SearchContext = createVersionedContext(\"search-context\");\nconst useSearch = () => {\n  const context = useContext(SearchContext);\n  if (!context) {\n    throw new Error(\"useSearch must be used within a SearchContextProvider\");\n  }\n  const value = context.atVersion(1);\n  if (!value) {\n    throw new Error(\"No SearchContext v1 found\");\n  }\n  return value;\n};\nconst useSearchContextCheck = () => {\n  const context = useContext(SearchContext);\n  return context !== void 0;\n};\nconst defaultInitialSearchState = {\n  term: \"\",\n  types: [],\n  filters: {},\n  pageLimit: void 0,\n  pageCursor: void 0\n};\nconst useSearchContextValue = (initialValue = defaultInitialSearchState) => {\n  var _a, _b, _c, _d;\n  const searchApi = useApi(searchApiRef);\n  const analytics = useAnalytics();\n  const [term, setTerm] = useState(initialValue.term);\n  const [types, setTypes] = useState(initialValue.types);\n  const [filters, setFilters] = useState(initialValue.filters);\n  const [pageLimit, setPageLimit] = useState(\n    initialValue.pageLimit\n  );\n  const [pageCursor, setPageCursor] = useState(\n    initialValue.pageCursor\n  );\n  const prevTerm = usePrevious(term);\n  const prevFilters = usePrevious(filters);\n  const result = useAsync(async () => {\n    var _a2, _b2;\n    const resultSet = await searchApi.query({\n      term,\n      types,\n      filters,\n      pageLimit,\n      pageCursor\n    });\n    if (term) {\n      analytics.captureEvent(\"search\", term, {\n        value: (_b2 = (_a2 = result.value) == null ? void 0 : _a2.numberOfResults) != null ? _b2 : void 0\n      });\n    }\n    return resultSet;\n  }, [term, types, filters, pageLimit, pageCursor]);\n  const hasNextPage = !result.loading && !result.error && ((_a = result.value) == null ? void 0 : _a.nextPageCursor);\n  const hasPreviousPage = !result.loading && !result.error && ((_b = result.value) == null ? void 0 : _b.previousPageCursor);\n  const fetchNextPage = useCallback(() => {\n    var _a2;\n    setPageCursor((_a2 = result.value) == null ? void 0 : _a2.nextPageCursor);\n  }, [(_c = result.value) == null ? void 0 : _c.nextPageCursor]);\n  const fetchPreviousPage = useCallback(() => {\n    var _a2;\n    setPageCursor((_a2 = result.value) == null ? void 0 : _a2.previousPageCursor);\n  }, [(_d = result.value) == null ? void 0 : _d.previousPageCursor]);\n  useEffect(() => {\n    if (prevTerm !== void 0 && term !== prevTerm) {\n      setPageCursor(void 0);\n    }\n  }, [term, prevTerm, setPageCursor]);\n  useEffect(() => {\n    if (prevFilters !== void 0 && !isEqual(filters, prevFilters)) {\n      setPageCursor(void 0);\n    }\n  }, [filters, prevFilters, setPageCursor]);\n  const value = {\n    result,\n    term,\n    setTerm,\n    types,\n    setTypes,\n    filters,\n    setFilters,\n    pageLimit,\n    setPageLimit,\n    pageCursor,\n    setPageCursor,\n    fetchNextPage: hasNextPage ? fetchNextPage : void 0,\n    fetchPreviousPage: hasPreviousPage ? fetchPreviousPage : void 0\n  };\n  return value;\n};\nconst LocalSearchContext = (props) => {\n  const { initialState, children } = props;\n  const value = useSearchContextValue(initialState);\n  return /* @__PURE__ */ React.createElement(\n    AnalyticsContext,\n    {\n      attributes: { searchTypes: value.types.sort().join(\",\") }\n    },\n    /* @__PURE__ */ React.createElement(SearchContext.Provider, { value: createVersionedValueMap({ 1: value }) }, children)\n  );\n};\nconst SearchContextProvider = (props) => {\n  const { initialState, inheritParentContextIfAvailable, children } = props;\n  const hasParentContext = useSearchContextCheck();\n  const configApi = useApi(configApiRef);\n  const propsInitialSearchState = initialState != null ? initialState : {};\n  const configInitialSearchState = configApi.has(\"search.query.pageLimit\") ? { pageLimit: configApi.getNumber(\"search.query.pageLimit\") } : {};\n  const searchContextInitialState = {\n    ...defaultInitialSearchState,\n    ...propsInitialSearchState,\n    ...configInitialSearchState\n  };\n  return hasParentContext && inheritParentContextIfAvailable ? /* @__PURE__ */ React.createElement(React.Fragment, null, children) : /* @__PURE__ */ React.createElement(LocalSearchContext, { initialState: searchContextInitialState }, children);\n};\n\nfunction withContext$1(Component) {\n  return forwardRef((props, ref) => /* @__PURE__ */ React.createElement(SearchContextProvider, { inheritParentContextIfAvailable: true }, /* @__PURE__ */ React.createElement(Component, { ...props, ref })));\n}\nconst SearchBarBase = withContext$1(\n  forwardRef((props, ref) => {\n    const {\n      onChange,\n      onKeyDown = () => {\n      },\n      onClear = () => {\n      },\n      onSubmit = () => {\n      },\n      debounceTime = 200,\n      clearButton = true,\n      fullWidth = true,\n      value: defaultValue,\n      label,\n      placeholder,\n      inputProps = {},\n      InputProps = {},\n      endAdornment,\n      ...rest\n    } = props;\n    const configApi = useApi(configApiRef);\n    const [value, setValue] = useState(\"\");\n    const forwardedValueRef = useRef(\"\");\n    useEffect(() => {\n      setValue((prevValue) => {\n        if (prevValue === forwardedValueRef.current) {\n          return String(defaultValue);\n        }\n        return prevValue;\n      });\n    }, [defaultValue, forwardedValueRef]);\n    useDebounce(\n      () => {\n        forwardedValueRef.current = value;\n        onChange(value);\n      },\n      debounceTime,\n      [value]\n    );\n    const handleChange = useCallback(\n      (e) => {\n        setValue(e.target.value);\n      },\n      [setValue]\n    );\n    const handleKeyDown = useCallback(\n      (e) => {\n        if (onKeyDown)\n          onKeyDown(e);\n        if (onSubmit && e.key === \"Enter\") {\n          onSubmit();\n        }\n      },\n      [onKeyDown, onSubmit]\n    );\n    const handleClear = useCallback(() => {\n      forwardedValueRef.current = \"\";\n      onChange(\"\");\n      setValue(\"\");\n      if (onClear) {\n        onClear();\n      }\n    }, [onChange, onClear]);\n    const ariaLabel = label ? void 0 : \"Search\";\n    const inputPlaceholder = placeholder != null ? placeholder : `Search in ${configApi.getOptionalString(\"app.title\") || \"Backstage\"}`;\n    const startAdornment = /* @__PURE__ */ React.createElement(InputAdornment, { position: \"start\" }, /* @__PURE__ */ React.createElement(IconButton, { \"aria-label\": \"Query\", size: \"small\", disabled: true }, /* @__PURE__ */ React.createElement(SearchIcon, null)));\n    const clearButtonEndAdornment = /* @__PURE__ */ React.createElement(InputAdornment, { position: \"end\" }, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        \"aria-label\": \"Clear\",\n        size: \"small\",\n        onClick: handleClear,\n        onKeyDown: (event) => {\n          if (event.key === \"Enter\") {\n            event.stopPropagation();\n          }\n        }\n      },\n      \"Clear\"\n    ));\n    return /* @__PURE__ */ React.createElement(\n      TextField,\n      {\n        id: \"search-bar-text-field\",\n        \"data-testid\": \"search-bar-next\",\n        variant: \"outlined\",\n        margin: \"normal\",\n        inputRef: ref,\n        value,\n        label,\n        placeholder: inputPlaceholder,\n        InputProps: {\n          startAdornment,\n          endAdornment: clearButton ? clearButtonEndAdornment : endAdornment,\n          ...InputProps\n        },\n        inputProps: {\n          \"aria-label\": ariaLabel,\n          ...inputProps\n        },\n        fullWidth,\n        onChange: handleChange,\n        onKeyDown: handleKeyDown,\n        ...rest\n      }\n    );\n  })\n);\nconst SearchBar = withContext$1(\n  forwardRef((props, ref) => {\n    const { value: initialValue = \"\", onChange, ...rest } = props;\n    const { term, setTerm } = useSearch();\n    useEffect(() => {\n      if (initialValue) {\n        setTerm(String(initialValue));\n      }\n    }, [initialValue, setTerm]);\n    const handleChange = useCallback(\n      (newValue) => {\n        if (onChange) {\n          onChange(newValue);\n        } else {\n          setTerm(newValue);\n        }\n      },\n      [onChange, setTerm]\n    );\n    return /* @__PURE__ */ React.createElement(\n      AnalyticsContext,\n      {\n        attributes: { pluginId: \"search\", extension: \"SearchBar\" }\n      },\n      /* @__PURE__ */ React.createElement(\n        SearchBarBase,\n        {\n          ...rest,\n          ref,\n          value: term,\n          onChange: handleChange\n        }\n      )\n    );\n  })\n);\n\nconst useStyles$3 = makeStyles((theme) => ({\n  loading: {\n    right: theme.spacing(1),\n    position: \"absolute\"\n  }\n}));\nconst withContext = (Component) => {\n  return (props) => /* @__PURE__ */ React.createElement(SearchContextProvider, { inheritParentContextIfAvailable: true }, /* @__PURE__ */ React.createElement(Component, { ...props }));\n};\nconst SearchAutocompleteLoadingAdornment = () => {\n  const classes = useStyles$3();\n  return /* @__PURE__ */ React.createElement(\n    CircularProgress,\n    {\n      className: classes.loading,\n      \"data-testid\": \"search-autocomplete-progressbar\",\n      color: \"inherit\",\n      size: 20\n    }\n  );\n};\nconst SearchAutocomplete = withContext(\n  function SearchAutocompleteComponent(props) {\n    const {\n      loading,\n      value,\n      onChange = () => {\n      },\n      options = [],\n      getOptionLabel = (option) => String(option),\n      inputPlaceholder,\n      inputDebounceTime,\n      freeSolo = true,\n      fullWidth = true,\n      clearOnBlur = false,\n      \"data-testid\": dataTestId = \"search-autocomplete\",\n      ...rest\n    } = props;\n    const { setTerm } = useSearch();\n    const getInputValue = useCallback(\n      (option) => {\n        if (!option)\n          return \"\";\n        if (typeof option === \"string\")\n          return option;\n        return getOptionLabel(option);\n      },\n      [getOptionLabel]\n    );\n    const inputValue = useMemo(\n      () => getInputValue(value),\n      [value, getInputValue]\n    );\n    const handleChange = useCallback(\n      (event, option, reason, details) => {\n        setTerm(getInputValue(option));\n        onChange(event, option, reason, details);\n      },\n      [getInputValue, setTerm, onChange]\n    );\n    const renderInput = useCallback(\n      ({\n        InputProps: { ref, className, endAdornment },\n        InputLabelProps,\n        ...params\n      }) => /* @__PURE__ */ React.createElement(\n        SearchBar,\n        {\n          ...params,\n          ref,\n          clearButton: false,\n          value: inputValue,\n          placeholder: inputPlaceholder,\n          debounceTime: inputDebounceTime,\n          endAdornment: loading ? /* @__PURE__ */ React.createElement(SearchAutocompleteLoadingAdornment, null) : endAdornment,\n          InputProps: { className }\n        }\n      ),\n      [loading, inputValue, inputPlaceholder, inputDebounceTime]\n    );\n    return /* @__PURE__ */ React.createElement(\n      Autocomplete,\n      {\n        ...rest,\n        \"data-testid\": dataTestId,\n        value,\n        onChange: handleChange,\n        options,\n        getOptionLabel,\n        renderInput,\n        freeSolo,\n        fullWidth,\n        clearOnBlur\n      }\n    );\n  }\n);\n\nconst SearchAutocompleteDefaultOption = (props) => {\n  const {\n    icon,\n    primaryText,\n    primaryTextTypographyProps,\n    secondaryText,\n    secondaryTextTypographyProps,\n    disableTextTypography\n  } = props;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, icon ? /* @__PURE__ */ React.createElement(ListItemIcon, null, icon) : null, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: primaryText,\n      primaryTypographyProps: primaryTextTypographyProps,\n      secondary: secondaryText,\n      secondaryTypographyProps: secondaryTextTypographyProps,\n      disableTypography: disableTextTypography\n    }\n  ));\n};\n\nconst useAsyncFilterValues = (fn, inputValue, defaultValues = [], debounce = 250) => {\n  const valuesMemo = useRef({});\n  const definiteFn = fn || (() => Promise.resolve([]));\n  const [state, callback] = useAsyncFn(definiteFn, [inputValue], {\n    loading: true\n  });\n  useDebounce(\n    () => {\n      if (valuesMemo.current[inputValue] === void 0) {\n        valuesMemo.current[inputValue] = callback(inputValue).then((values) => {\n          valuesMemo.current[inputValue] = values;\n          return values;\n        });\n      }\n    },\n    debounce,\n    [callback, inputValue]\n  );\n  if (defaultValues.length) {\n    return {\n      loading: false,\n      value: defaultValues\n    };\n  }\n  const possibleValue = valuesMemo.current[inputValue];\n  if (Array.isArray(possibleValue)) {\n    return {\n      loading: false,\n      value: possibleValue\n    };\n  }\n  return state;\n};\nconst useDefaultFilterValue = (name, defaultValue) => {\n  const { setFilters } = useSearch();\n  useEffect(() => {\n    if (defaultValue && [defaultValue].flat().length > 0) {\n      setFilters((prevFilters) => ({\n        ...prevFilters,\n        [name]: defaultValue\n      }));\n    }\n  }, []);\n};\n\nconst AutocompleteFilter = (props) => {\n  const {\n    className,\n    defaultValue,\n    name,\n    values: givenValues,\n    valuesDebounceMs,\n    label,\n    filterSelectedOptions,\n    limitTags,\n    multiple\n  } = props;\n  const [inputValue, setInputValue] = useState(\"\");\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues = typeof givenValues === \"function\" ? givenValues : void 0;\n  const defaultValues = typeof givenValues === \"function\" ? void 0 : givenValues;\n  const { value: values, loading } = useAsyncFilterValues(\n    asyncValues,\n    inputValue,\n    defaultValues,\n    valuesDebounceMs\n  );\n  const { filters, setFilters } = useSearch();\n  const filterValue = filters[name] || (multiple ? [] : null);\n  const handleChange = (_, newValue) => {\n    setFilters((prevState) => {\n      const { [name]: filter, ...others } = prevState;\n      if (newValue) {\n        return { ...others, [name]: newValue };\n      }\n      return { ...others };\n    });\n  };\n  const renderInput = (params) => /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      ...params,\n      name: \"search\",\n      variant: \"outlined\",\n      label,\n      fullWidth: true\n    }\n  );\n  const renderTags = (tagValue, getTagProps) => tagValue.map((option, index) => /* @__PURE__ */ React.createElement(Chip, { label: option, color: \"primary\", ...getTagProps({ index }) }));\n  return /* @__PURE__ */ React.createElement(\n    Autocomplete,\n    {\n      filterSelectedOptions,\n      limitTags,\n      multiple,\n      className,\n      id: `${multiple ? \"multi-\" : \"\"}select-filter-${name}--select`,\n      options: values || [],\n      loading,\n      value: filterValue,\n      onChange: handleChange,\n      onInputChange: (_, newValue) => setInputValue(newValue),\n      renderInput,\n      renderTags\n    }\n  );\n};\n\nconst useStyles$2 = makeStyles({\n  label: {\n    textTransform: \"capitalize\"\n  },\n  checkboxWrapper: {\n    display: \"flex\",\n    alignItems: \"center\",\n    width: \"100%\"\n  },\n  textWrapper: {\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    whiteSpace: \"nowrap\"\n  }\n});\nconst CheckboxFilter = (props) => {\n  const {\n    className,\n    defaultValue,\n    label,\n    name,\n    values: givenValues = [],\n    valuesDebounceMs\n  } = props;\n  const classes = useStyles$2();\n  const { filters, setFilters } = useSearch();\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues = typeof givenValues === \"function\" ? givenValues : void 0;\n  const defaultValues = typeof givenValues === \"function\" ? void 0 : givenValues;\n  const { value: values = [], loading } = useAsyncFilterValues(\n    asyncValues,\n    \"\",\n    defaultValues,\n    valuesDebounceMs\n  );\n  const handleChange = (e) => {\n    const {\n      target: { value, checked }\n    } = e;\n    setFilters((prevFilters) => {\n      const { [name]: filter, ...others } = prevFilters;\n      const rest = (filter || []).filter((i) => i !== value);\n      const items = checked ? [...rest, value] : rest;\n      return items.length ? { ...others, [name]: items } : others;\n    });\n  };\n  return /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      className,\n      disabled: loading,\n      fullWidth: true,\n      \"data-testid\": \"search-checkboxfilter-next\"\n    },\n    label ? /* @__PURE__ */ React.createElement(FormLabel, { className: classes.label }, label) : null,\n    values.map((value) => {\n      var _a;\n      return /* @__PURE__ */ React.createElement(\n        FormControlLabel,\n        {\n          key: value,\n          classes: {\n            root: classes.checkboxWrapper,\n            label: classes.textWrapper\n          },\n          label: value,\n          control: /* @__PURE__ */ React.createElement(\n            Checkbox,\n            {\n              color: \"primary\",\n              inputProps: { \"aria-labelledby\": value },\n              value,\n              name: value,\n              onChange: handleChange,\n              checked: ((_a = filters[name]) != null ? _a : []).includes(value)\n            }\n          )\n        }\n      );\n    })\n  );\n};\nconst SelectFilter = (props) => {\n  const {\n    className,\n    defaultValue,\n    label,\n    name,\n    values: givenValues,\n    valuesDebounceMs\n  } = props;\n  const classes = useStyles$2();\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues = typeof givenValues === \"function\" ? givenValues : void 0;\n  const defaultValues = typeof givenValues === \"function\" ? void 0 : givenValues;\n  const { value: values = [], loading } = useAsyncFilterValues(\n    asyncValues,\n    \"\",\n    defaultValues,\n    valuesDebounceMs\n  );\n  const { filters, setFilters } = useSearch();\n  const handleChange = (e) => {\n    const {\n      target: { value }\n    } = e;\n    setFilters((prevFilters) => {\n      const { [name]: filter, ...others } = prevFilters;\n      return value ? { ...others, [name]: value } : others;\n    });\n  };\n  return /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      disabled: loading,\n      className,\n      variant: \"filled\",\n      fullWidth: true,\n      \"data-testid\": \"search-selectfilter-next\"\n    },\n    label ? /* @__PURE__ */ React.createElement(InputLabel, { className: classes.label, margin: \"dense\" }, label) : null,\n    /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        variant: \"outlined\",\n        value: filters[name] || \"\",\n        onChange: handleChange\n      },\n      /* @__PURE__ */ React.createElement(MenuItem, { value: \"\" }, /* @__PURE__ */ React.createElement(\"em\", null, \"All\")),\n      values.map((value) => /* @__PURE__ */ React.createElement(MenuItem, { key: value, value }, /* @__PURE__ */ React.createElement(Typography, { variant: \"inherit\", noWrap: true }, value)))\n    )\n  );\n};\nconst SearchFilter = (props) => {\n  const { component: Element, ...elementProps } = props;\n  return /* @__PURE__ */ React.createElement(Element, { ...elementProps });\n};\nSearchFilter.Checkbox = (props) => /* @__PURE__ */ React.createElement(SearchFilter, { ...props, component: CheckboxFilter });\nSearchFilter.Select = (props) => /* @__PURE__ */ React.createElement(SearchFilter, { ...props, component: SelectFilter });\nSearchFilter.Autocomplete = (props) => /* @__PURE__ */ React.createElement(SearchFilter, { ...props, component: AutocompleteFilter });\n\nconst encodePageCursor = (pageCursor) => {\n  return Buffer.from(pageCursor.toString(), \"utf-8\").toString(\"base64\");\n};\nconst decodePageCursor = (pageCursor) => {\n  if (!pageCursor)\n    return 0;\n  return Number(Buffer.from(pageCursor, \"base64\").toString(\"utf-8\"));\n};\nconst SearchPaginationBase = (props) => {\n  const {\n    total: count = -1,\n    cursor: pageCursor,\n    hasNextPage,\n    onCursorChange: onPageCursorChange,\n    limit: rowsPerPage = 25,\n    limitLabel: labelRowsPerPage = \"Results per page:\",\n    limitText: labelDisplayedRows = ({ from, to }) => count > 0 ? `of ${count}` : `${from}-${to}`,\n    limitOptions: rowsPerPageOptions,\n    onLimitChange: onPageLimitChange,\n    ...rest\n  } = props;\n  const page = useMemo(() => decodePageCursor(pageCursor), [pageCursor]);\n  const handlePageChange = useCallback(\n    (_, newValue) => {\n      onPageCursorChange == null ? void 0 : onPageCursorChange(encodePageCursor(newValue));\n    },\n    [onPageCursorChange]\n  );\n  const handleRowsPerPageChange = useCallback(\n    (e) => {\n      const newValue = e.target.value;\n      onPageLimitChange == null ? void 0 : onPageLimitChange(parseInt(newValue, 10));\n    },\n    [onPageLimitChange]\n  );\n  return /* @__PURE__ */ React.createElement(\n    TablePagination,\n    {\n      ...rest,\n      component: \"div\",\n      count,\n      page,\n      nextIconButtonProps: {\n        ...hasNextPage !== void 0 && { disabled: !hasNextPage }\n      },\n      onPageChange: handlePageChange,\n      rowsPerPage,\n      labelRowsPerPage,\n      labelDisplayedRows,\n      rowsPerPageOptions,\n      onRowsPerPageChange: handleRowsPerPageChange\n    }\n  );\n};\nconst SearchPagination = (props) => {\n  const { pageLimit, setPageLimit, pageCursor, setPageCursor, fetchNextPage } = useSearch();\n  const handlePageLimitChange = useCallback(\n    (newPageLimit) => {\n      setPageLimit(newPageLimit);\n      setPageCursor(void 0);\n    },\n    [setPageLimit, setPageCursor]\n  );\n  return /* @__PURE__ */ React.createElement(\n    SearchPaginationBase,\n    {\n      ...props,\n      hasNextPage: !!fetchNextPage,\n      limit: pageLimit,\n      onLimitChange: handlePageLimitChange,\n      cursor: pageCursor,\n      onCursorChange: setPageCursor\n    }\n  );\n};\n\nconst SearchResultContext = (props) => {\n  const { children } = props;\n  const context = useSearch();\n  const { result: state, ...query } = context;\n  return children(state, query);\n};\nconst SearchResultApi = (props) => {\n  const { query, children } = props;\n  const searchApi = useApi(searchApiRef);\n  const state = useAsync(() => {\n    const { term = \"\", types = [], filters = {}, ...rest } = query;\n    return searchApi.query({ ...rest, term, types, filters });\n  }, [query]);\n  return children(state, query);\n};\nconst SearchResultState = (props) => {\n  const { query, children } = props;\n  return query ? /* @__PURE__ */ React.createElement(SearchResultApi, { query }, children) : /* @__PURE__ */ React.createElement(SearchResultContext, null, children);\n};\nconst SearchResultComponent = (props) => {\n  const {\n    query,\n    children,\n    noResultsComponent = /* @__PURE__ */ React.createElement(EmptyState, { missing: \"data\", title: \"Sorry, no results were found\" }),\n    ...rest\n  } = props;\n  return /* @__PURE__ */ React.createElement(SearchResultState, { query }, ({ loading, error, value }) => {\n    if (loading) {\n      return /* @__PURE__ */ React.createElement(Progress, null);\n    }\n    if (error) {\n      return /* @__PURE__ */ React.createElement(\n        ResponseErrorPanel,\n        {\n          title: \"Error encountered while fetching search results\",\n          error\n        }\n      );\n    }\n    if (!(value == null ? void 0 : value.results.length)) {\n      return noResultsComponent;\n    }\n    if (isFunction(children)) {\n      return children(value);\n    }\n    return /* @__PURE__ */ React.createElement(SearchResultListItemExtensions, { ...rest, results: value.results }, children);\n  });\n};\nconst SearchResult = (props) => /* @__PURE__ */ React.createElement(\n  AnalyticsContext,\n  {\n    attributes: {\n      pluginId: \"search\",\n      extension: \"SearchResult\"\n    }\n  },\n  /* @__PURE__ */ React.createElement(SearchResultComponent, { ...props })\n);\n\nconst SearchResultListLayout = (props) => {\n  const {\n    error,\n    loading,\n    resultItems,\n    renderResultItem = (resultItem) => /* @__PURE__ */ React.createElement(\n      HigherOrderDefaultResultListItem,\n      {\n        key: resultItem.document.location,\n        result: resultItem.document\n      }\n    ),\n    disableRenderingWithNoResults,\n    noResultsComponent = disableRenderingWithNoResults ? null : /* @__PURE__ */ React.createElement(EmptyState, { missing: \"data\", title: \"Sorry, no results were found\" }),\n    ...rest\n  } = props;\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (error) {\n    return /* @__PURE__ */ React.createElement(\n      ResponseErrorPanel,\n      {\n        title: \"Error encountered while fetching search results\",\n        error\n      }\n    );\n  }\n  if (!(resultItems == null ? void 0 : resultItems.length)) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, noResultsComponent);\n  }\n  return /* @__PURE__ */ React.createElement(List, { ...rest }, resultItems.map(renderResultItem));\n};\nconst SearchResultList = (props) => {\n  const { query, renderResultItem, children, ...rest } = props;\n  const defaultRenderResultItem = useSearchResultListItemExtensions(children);\n  return /* @__PURE__ */ React.createElement(\n    AnalyticsContext,\n    {\n      attributes: {\n        pluginId: \"search\",\n        extension: \"SearchResultList\"\n      }\n    },\n    /* @__PURE__ */ React.createElement(SearchResultState, { query }, ({ loading, error, value }) => /* @__PURE__ */ React.createElement(\n      SearchResultListLayout,\n      {\n        ...rest,\n        error,\n        loading,\n        resultItems: value == null ? void 0 : value.results,\n        renderResultItem: renderResultItem != null ? renderResultItem : defaultRenderResultItem\n      }\n    ))\n  );\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  listSubheader: {\n    display: \"flex\",\n    alignItems: \"center\"\n  },\n  listSubheaderName: {\n    marginLeft: theme.spacing(1),\n    textTransform: \"uppercase\"\n  },\n  listSubheaderChip: {\n    color: theme.palette.text.secondary,\n    margin: theme.spacing(0, 0, 0, 1.5)\n  },\n  listSubheaderFilter: {\n    display: \"flex\",\n    color: theme.palette.text.secondary,\n    margin: theme.spacing(0, 0, 0, 1.5)\n  },\n  listSubheaderLink: {\n    marginLeft: \"auto\",\n    display: \"flex\",\n    alignItems: \"center\"\n  },\n  listSubheaderLinkIcon: {\n    fontSize: \"inherit\",\n    marginLeft: theme.spacing(0.5)\n  }\n}));\nconst SearchResultGroupFilterFieldLayout = (props) => {\n  const classes = useStyles$1();\n  const { label, children, ...rest } = props;\n  return /* @__PURE__ */ React.createElement(\n    Chip,\n    {\n      ...rest,\n      className: classes.listSubheaderFilter,\n      variant: \"outlined\",\n      label: /* @__PURE__ */ React.createElement(React.Fragment, null, label, \": \", children)\n    }\n  );\n};\nconst NullIcon = () => null;\nconst useSearchResultGroupTextFilterStyles = makeStyles((theme) => ({\n  root: {\n    fontSize: \"inherit\",\n    \"&:focus\": {\n      outline: \"none\",\n      background: theme.palette.common.white\n    },\n    \"&:not(:focus)\": {\n      cursor: \"pointer\",\n      color: theme.palette.primary.main,\n      \"&:hover\": {\n        textDecoration: \"underline\"\n      }\n    }\n  }\n}));\nconst SearchResultGroupTextFilterField = (props) => {\n  const classes = useSearchResultGroupTextFilterStyles();\n  const { label, value = \"None\", onChange, onDelete } = props;\n  const handleChange = useCallback(\n    (e) => {\n      onChange(e.target.value);\n    },\n    [onChange]\n  );\n  return /* @__PURE__ */ React.createElement(SearchResultGroupFilterFieldLayout, { label, onDelete }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      role: \"textbox\",\n      component: \"span\",\n      className: classes.root,\n      onChange: handleChange,\n      contentEditable: true,\n      suppressContentEditableWarning: true\n    },\n    value == null ? void 0 : value.toString()\n  ));\n};\nconst useSearchResultGroupSelectFilterStyles = makeStyles((theme) => ({\n  root: {\n    fontSize: \"inherit\",\n    \"&:not(:focus)\": {\n      cursor: \"pointer\",\n      color: theme.palette.primary.main,\n      \"&:hover\": {\n        textDecoration: \"underline\"\n      }\n    },\n    \"&:focus\": {\n      outline: \"none\"\n    },\n    \"&>div:first-child\": {\n      padding: 0\n    }\n  }\n}));\nconst SearchResultGroupSelectFilterField = (props) => {\n  const classes = useSearchResultGroupSelectFilterStyles();\n  const { label, value = \"none\", onChange, onDelete, children } = props;\n  const handleChange = useCallback(\n    (e) => {\n      onChange(e.target.value);\n    },\n    [onChange]\n  );\n  return /* @__PURE__ */ React.createElement(SearchResultGroupFilterFieldLayout, { label, onDelete }, /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      className: classes.root,\n      value,\n      onChange: handleChange,\n      input: /* @__PURE__ */ React.createElement(InputBase, null),\n      IconComponent: NullIcon\n    },\n    /* @__PURE__ */ React.createElement(MenuItem, { value: \"none\" }, \"None\"),\n    children\n  ));\n};\nfunction SearchResultGroupLayout(props) {\n  const classes = useStyles$1();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const {\n    error,\n    loading,\n    icon,\n    title,\n    titleProps = {},\n    link = /* @__PURE__ */ React.createElement(React.Fragment, null, \"See all\", /* @__PURE__ */ React.createElement(ArrowRightIcon, { className: classes.listSubheaderLinkIcon })),\n    linkProps = {},\n    filterOptions,\n    renderFilterOption = (filterOption) => /* @__PURE__ */ React.createElement(MenuItem, { key: String(filterOption), value: String(filterOption) }, String(filterOption)),\n    filterFields,\n    renderFilterField,\n    resultItems,\n    renderResultItem = (resultItem) => /* @__PURE__ */ React.createElement(\n      HigherOrderDefaultResultListItem,\n      {\n        key: resultItem.document.location,\n        result: resultItem.document\n      }\n    ),\n    disableRenderingWithNoResults,\n    noResultsComponent = disableRenderingWithNoResults ? null : /* @__PURE__ */ React.createElement(EmptyState, { missing: \"data\", title: \"Sorry, no results were found\" }),\n    ...rest\n  } = props;\n  const handleClick = useCallback((e) => {\n    setAnchorEl(e.currentTarget);\n  }, []);\n  const handleClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (error) {\n    return /* @__PURE__ */ React.createElement(\n      ResponseErrorPanel,\n      {\n        title: \"Error encountered while fetching search results\",\n        error\n      }\n    );\n  }\n  if (!(resultItems == null ? void 0 : resultItems.length)) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, noResultsComponent);\n  }\n  return /* @__PURE__ */ React.createElement(List, { ...rest }, /* @__PURE__ */ React.createElement(ListSubheader, { className: classes.listSubheader }, icon, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      className: classes.listSubheaderName,\n      component: \"strong\",\n      ...titleProps\n    },\n    title\n  ), filterOptions ? /* @__PURE__ */ React.createElement(\n    Chip,\n    {\n      className: classes.listSubheaderChip,\n      component: \"button\",\n      icon: /* @__PURE__ */ React.createElement(AddIcon, null),\n      variant: \"outlined\",\n      label: \"Add filter\",\n      \"aria-controls\": \"filters-menu\",\n      \"aria-haspopup\": \"true\",\n      onClick: handleClick\n    }\n  ) : null, filterOptions ? /* @__PURE__ */ React.createElement(\n    Menu,\n    {\n      id: \"filters-menu\",\n      anchorEl,\n      open: Boolean(anchorEl),\n      onClose: handleClose,\n      onClick: handleClose,\n      keepMounted: true\n    },\n    filterOptions.map(renderFilterOption)\n  ) : null, filterFields == null ? void 0 : filterFields.map(\n    (filterField) => {\n      var _a;\n      return (_a = renderFilterField == null ? void 0 : renderFilterField(filterField)) != null ? _a : null;\n    }\n  ), /* @__PURE__ */ React.createElement(Link, { className: classes.listSubheaderLink, to: \"/search\", ...linkProps }, link)), resultItems.map(renderResultItem));\n}\nfunction SearchResultGroup(props) {\n  const { query, children, renderResultItem, linkProps = {}, ...rest } = props;\n  const defaultRenderResultItem = useSearchResultListItemExtensions(children);\n  return /* @__PURE__ */ React.createElement(\n    AnalyticsContext,\n    {\n      attributes: {\n        pluginId: \"search\",\n        extension: \"SearchResultGroup\"\n      }\n    },\n    /* @__PURE__ */ React.createElement(SearchResultState, { query }, ({ loading, error, value }, { term, types, pageCursor, filters = {} }) => {\n      const to = `/search?${qs.stringify(\n        { term, types, filters, pageCursor, query: term },\n        { arrayFormat: \"brackets\" }\n      )}`;\n      return /* @__PURE__ */ React.createElement(\n        SearchResultGroupLayout,\n        {\n          ...rest,\n          error,\n          loading,\n          linkProps: { to, ...linkProps },\n          filterFields: Object.keys(filters),\n          resultItems: value == null ? void 0 : value.results,\n          renderResultItem: renderResultItem != null ? renderResultItem : defaultRenderResultItem\n        }\n      );\n    })\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    gap: theme.spacing(2),\n    margin: theme.spacing(2, 0)\n  }\n}));\nconst SearchResultPager = () => {\n  const { fetchNextPage, fetchPreviousPage } = useSearch();\n  const classes = useStyles();\n  if (!fetchNextPage && !fetchPreviousPage) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null);\n  }\n  return /* @__PURE__ */ React.createElement(\"nav\", { \"aria-label\": \"pagination navigation\", className: classes.root }, /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      \"aria-label\": \"previous page\",\n      disabled: !fetchPreviousPage,\n      onClick: fetchPreviousPage,\n      startIcon: /* @__PURE__ */ React.createElement(ArrowBackIosIcon, null)\n    },\n    \"Previous\"\n  ), /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      \"aria-label\": \"next page\",\n      disabled: !fetchNextPage,\n      onClick: fetchNextPage,\n      endIcon: /* @__PURE__ */ React.createElement(ArrowRightIcon, null)\n    },\n    \"Next\"\n  ));\n};\n\nexport { AutocompleteFilter, CheckboxFilter, MockSearchApi, SearchAutocomplete, SearchAutocompleteDefaultOption, SearchBar, SearchBarBase, SearchContextProvider, SearchFilter, SearchPagination, SearchPaginationBase, SearchResult, SearchResultApi, SearchResultComponent, SearchResultContext, SearchResultGroup, SearchResultGroupFilterFieldLayout, SearchResultGroupLayout, SearchResultGroupSelectFilterField, SearchResultGroupTextFilterField, SearchResultList, SearchResultListLayout, SearchResultPager, SearchResultState, SelectFilter, searchApiRef, useSearch, useSearchContextCheck };\n//# sourceMappingURL=index.esm.js.map\n","import { ResponseError } from '@backstage/errors';\nimport qs from 'qs';\nimport { searchApiRef, SearchContextProvider, useSearch } from '@backstage/plugin-search-react';\nimport { createRouteRef, createPlugin, createApiFactory, discoveryApiRef, identityApiRef, createRoutableExtension, createComponentExtension, useApi } from '@backstage/core-plugin-api';\nimport React, { useEffect, useState, Fragment, cloneElement } from 'react';\nimport usePrevious from 'react-use/lib/usePrevious';\nimport { useOutlet, useLocation } from 'react-router-dom';\nimport { makeStyles, Card, CardHeader, CardContent, Accordion, AccordionSummary, AccordionDetails, List, Divider, ListItem, ListItemIcon, ListItemText, Tabs, Tab, FormControl, InputLabel, Select, Chip, MenuItem, Checkbox } from '@material-ui/core';\nimport useEffectOnce from 'react-use/lib/useEffectOnce';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport AllIcon from '@material-ui/icons/FontDownload';\nimport useAsync from 'react-use/lib/useAsync';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass SearchClient {\n  constructor(options) {\n    __publicField(this, \"discoveryApi\");\n    __publicField(this, \"identityApi\");\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n  }\n  async query(query) {\n    const { token } = await this.identityApi.getCredentials();\n    const queryString = qs.stringify(query);\n    const url = `${await this.discoveryApi.getBaseUrl(\n      \"search\"\n    )}/query?${queryString}`;\n    const response = await fetch(url, {\n      headers: token ? { Authorization: `Bearer ${token}` } : {}\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return response.json();\n  }\n}\n\nconst rootRouteRef = createRouteRef({\n  id: \"search\"\n});\nconst searchPlugin = createPlugin({\n  id: \"search\",\n  apis: [\n    createApiFactory({\n      api: searchApiRef,\n      deps: { discoveryApi: discoveryApiRef, identityApi: identityApiRef },\n      factory: ({ discoveryApi, identityApi }) => {\n        return new SearchClient({ discoveryApi, identityApi });\n      }\n    })\n  ],\n  routes: {\n    root: rootRouteRef\n  }\n});\nconst SearchPage$1 = searchPlugin.provide(\n  createRoutableExtension({\n    name: \"SearchPage\",\n    component: () => import('./index-104a35c3.esm.js').then((m) => m.SearchPage),\n    mountPoint: rootRouteRef\n  })\n);\nconst SidebarSearchModal = searchPlugin.provide(\n  createComponentExtension({\n    name: \"SidebarSearchModal\",\n    component: {\n      lazy: () => import('./index-eb06eaf0.esm.js').then(\n        (m) => m.SidebarSearchModal\n      )\n    }\n  })\n);\nconst HomePageSearchBar = searchPlugin.provide(\n  createComponentExtension({\n    name: \"HomePageSearchBar\",\n    component: {\n      lazy: () => import('./index-790c65a5.esm.js').then((m) => m.HomePageSearchBar)\n    }\n  })\n);\n\nconst UrlUpdater = () => {\n  const location = useLocation();\n  const {\n    term,\n    setTerm,\n    types,\n    setTypes,\n    pageCursor,\n    setPageCursor,\n    filters,\n    setFilters\n  } = useSearch();\n  const prevQueryParams = usePrevious(location.search);\n  useEffect(() => {\n    if (location.search === prevQueryParams) {\n      return;\n    }\n    const query = qs.parse(location.search.substring(1), { arrayLimit: 0 }) || {};\n    if (query.filters) {\n      setFilters(query.filters);\n    }\n    if (query.query) {\n      setTerm(query.query);\n    }\n    if (query.pageCursor) {\n      setPageCursor(query.pageCursor);\n    }\n    if (query.types) {\n      setTypes(query.types);\n    }\n  }, [prevQueryParams, location, setTerm, setTypes, setPageCursor, setFilters]);\n  useEffect(() => {\n    const newParams = qs.stringify(\n      {\n        query: term,\n        types,\n        pageCursor,\n        filters\n      },\n      { arrayFormat: \"brackets\" }\n    );\n    const newUrl = `${window.location.pathname}?${newParams}`;\n    window.history.replaceState(null, document.title, newUrl);\n  }, [term, types, pageCursor, filters]);\n  return null;\n};\nconst SearchPage = () => {\n  const outlet = useOutlet();\n  return /* @__PURE__ */ React.createElement(SearchContextProvider, null, /* @__PURE__ */ React.createElement(UrlUpdater, null), outlet);\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  card: {\n    backgroundColor: \"rgba(0, 0, 0, .11)\"\n  },\n  cardContent: {\n    paddingTop: theme.spacing(1)\n  },\n  icon: {\n    color: theme.palette.common.black\n  },\n  list: {\n    width: \"100%\"\n  },\n  listItemIcon: {\n    width: \"24px\",\n    height: \"24px\"\n  },\n  accordion: {\n    backgroundColor: theme.palette.background.paper\n  },\n  accordionSummary: {\n    minHeight: \"auto\",\n    \"&.Mui-expanded\": {\n      minHeight: \"auto\"\n    }\n  },\n  accordionSummaryContent: {\n    margin: theme.spacing(2, 0),\n    \"&.Mui-expanded\": {\n      margin: theme.spacing(2, 0)\n    }\n  },\n  accordionDetails: {\n    padding: theme.spacing(0, 0, 1)\n  }\n}));\nconst SearchTypeAccordion = (props) => {\n  const classes = useStyles$2();\n  const { filters, setPageCursor, setTypes, term, types } = useSearch();\n  const searchApi = useApi(searchApiRef);\n  const [expanded, setExpanded] = useState(true);\n  const { defaultValue, name, showCounts, types: givenTypes } = props;\n  const toggleExpanded = () => setExpanded((prevState) => !prevState);\n  const handleClick = (type) => {\n    return () => {\n      setTypes(type !== \"\" ? [type] : []);\n      setPageCursor(void 0);\n      setExpanded(false);\n    };\n  };\n  useEffect(() => {\n    if (defaultValue) {\n      setTypes([defaultValue]);\n    }\n  }, []);\n  const definedTypes = [\n    {\n      value: \"\",\n      name: \"All\",\n      icon: /* @__PURE__ */ React.createElement(AllIcon, null)\n    },\n    ...givenTypes\n  ];\n  const selected = types[0] || \"\";\n  const { value: resultCounts } = useAsync(async () => {\n    if (!showCounts) {\n      return {};\n    }\n    const counts = await Promise.all(\n      definedTypes.map((t) => t.value).map(async (type) => {\n        const { numberOfResults } = await searchApi.query({\n          term,\n          types: type ? [type] : [],\n          filters: types.includes(type) || !types.length && !type ? filters : {},\n          pageLimit: 0\n        });\n        return [\n          type,\n          numberOfResults !== void 0 ? `${numberOfResults >= 1e4 ? `>10000` : numberOfResults} results` : \" -- \"\n        ];\n      })\n    );\n    return Object.fromEntries(counts);\n  }, [filters, showCounts, term, types]);\n  return /* @__PURE__ */ React.createElement(Card, { className: classes.card }, /* @__PURE__ */ React.createElement(CardHeader, { title: name, titleTypographyProps: { variant: \"overline\" } }), /* @__PURE__ */ React.createElement(CardContent, { className: classes.cardContent }, /* @__PURE__ */ React.createElement(\n    Accordion,\n    {\n      className: classes.accordion,\n      expanded,\n      onChange: toggleExpanded\n    },\n    /* @__PURE__ */ React.createElement(\n      AccordionSummary,\n      {\n        classes: {\n          root: classes.accordionSummary,\n          content: classes.accordionSummaryContent\n        },\n        expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, { className: classes.icon }),\n        IconButtonProps: { size: \"small\" }\n      },\n      expanded ? \"Collapse\" : definedTypes.filter((t) => t.value === selected)[0].name\n    ),\n    /* @__PURE__ */ React.createElement(AccordionDetails, { classes: { root: classes.accordionDetails } }, /* @__PURE__ */ React.createElement(\n      List,\n      {\n        className: classes.list,\n        component: \"nav\",\n        \"aria-label\": \"filter by type\",\n        disablePadding: true,\n        dense: true\n      },\n      definedTypes.map((type) => /* @__PURE__ */ React.createElement(Fragment, { key: type.value }, /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(\n        ListItem,\n        {\n          selected: types[0] === type.value || types.length === 0 && type.value === \"\",\n          onClick: handleClick(type.value),\n          button: true\n        },\n        /* @__PURE__ */ React.createElement(ListItemIcon, null, cloneElement(type.icon, {\n          className: classes.listItemIcon\n        })),\n        /* @__PURE__ */ React.createElement(\n          ListItemText,\n          {\n            primary: type.name,\n            secondary: resultCounts && resultCounts[type.value]\n          }\n        )\n      )))\n    ))\n  )));\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  tabs: {\n    borderBottom: `1px solid ${theme.palette.textVerySubtle}`\n  },\n  tab: {\n    height: \"50px\",\n    fontWeight: theme.typography.fontWeightBold,\n    fontSize: theme.typography.pxToRem(13),\n    color: theme.palette.text.primary,\n    minWidth: \"130px\"\n  }\n}));\nconst SearchTypeTabs = (props) => {\n  const classes = useStyles$1();\n  const { setPageCursor, setTypes, types } = useSearch();\n  const { defaultValue, types: givenTypes } = props;\n  const changeTab = (_, newType) => {\n    setTypes(newType !== \"\" ? [newType] : []);\n    setPageCursor(void 0);\n  };\n  useEffect(() => {\n    if (defaultValue) {\n      setTypes([defaultValue]);\n    }\n  }, []);\n  const definedTypes = [\n    {\n      value: \"\",\n      name: \"All\"\n    },\n    ...givenTypes\n  ];\n  return /* @__PURE__ */ React.createElement(\n    Tabs,\n    {\n      \"aria-label\": \"List of search types tabs\",\n      className: classes.tabs,\n      indicatorColor: \"primary\",\n      value: types.length === 0 ? \"\" : types[0],\n      onChange: changeTab\n    },\n    definedTypes.map((type, idx) => /* @__PURE__ */ React.createElement(\n      Tab,\n      {\n        key: idx,\n        className: classes.tab,\n        label: type.name,\n        value: type.value\n      }\n    ))\n  );\n};\n\nconst useStyles = makeStyles((theme) => ({\n  label: {\n    textTransform: \"capitalize\"\n  },\n  chips: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    marginTop: theme.spacing(1)\n  },\n  chip: {\n    margin: 2\n  }\n}));\nconst SearchType = (props) => {\n  const { className, defaultValue, name, values = [] } = props;\n  const classes = useStyles();\n  const { types, setTypes } = useSearch();\n  useEffectOnce(() => {\n    if (!types.length) {\n      if (defaultValue && Array.isArray(defaultValue)) {\n        setTypes(defaultValue);\n      } else if (defaultValue) {\n        setTypes([defaultValue]);\n      }\n    }\n  });\n  const handleChange = (e) => {\n    const value = e.target.value;\n    setTypes(value);\n  };\n  return /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      className,\n      variant: \"filled\",\n      fullWidth: true,\n      \"data-testid\": \"search-typefilter-next\"\n    },\n    /* @__PURE__ */ React.createElement(InputLabel, { className: classes.label, margin: \"dense\" }, name),\n    /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        multiple: true,\n        variant: \"outlined\",\n        value: types,\n        onChange: handleChange,\n        placeholder: \"All Results\",\n        renderValue: (selected) => /* @__PURE__ */ React.createElement(\"div\", { className: classes.chips }, selected.map((value) => /* @__PURE__ */ React.createElement(\n          Chip,\n          {\n            key: value,\n            label: value,\n            className: classes.chip,\n            size: \"small\"\n          }\n        )))\n      },\n      values.map((value) => /* @__PURE__ */ React.createElement(MenuItem, { key: value, value }, /* @__PURE__ */ React.createElement(Checkbox, { checked: types.indexOf(value) > -1 }), /* @__PURE__ */ React.createElement(ListItemText, { primary: value })))\n    )\n  );\n};\nSearchType.Accordion = (props) => {\n  return /* @__PURE__ */ React.createElement(SearchTypeAccordion, { ...props });\n};\nSearchType.Tabs = (props) => {\n  return /* @__PURE__ */ React.createElement(SearchTypeTabs, { ...props });\n};\n\nexport { HomePageSearchBar as H, SearchPage as S, UrlUpdater as U, SearchType as a, SearchPage$1 as b, SidebarSearchModal as c, SearchClient as d, rootRouteRef as r, searchPlugin as s };\n//# sourceMappingURL=SearchType-a8f79021.esm.js.map\n","import { createApiRef, createRouteRef, createPlugin, createApiFactory, createRoutableExtension } from '@backstage/core-plugin-api';\n\nconst techRadarApiRef = createApiRef(\n  {\n    id: \"plugin.techradar.service\"\n  }\n);\nvar MovedState = /* @__PURE__ */ ((MovedState2) => {\n  MovedState2[MovedState2[\"Down\"] = -1] = \"Down\";\n  MovedState2[MovedState2[\"NoChange\"] = 0] = \"NoChange\";\n  MovedState2[MovedState2[\"Up\"] = 1] = \"Up\";\n  return MovedState2;\n})(MovedState || {});\n\nconst rings = new Array();\nrings.push({\n  id: \"adopt\",\n  name: \"ADOPT\",\n  color: \"#5BA300\",\n  description: \"Commodi accusantium culpa sed itaque excepturi rem eum nulla possimus.\"\n});\nrings.push({\n  id: \"trial\",\n  name: \"TRIAL\",\n  color: \"#009EB0\",\n  description: \"Recusandae possimus ipsum dolores.\"\n});\nrings.push({\n  id: \"assess\",\n  name: \"ASSESS\",\n  color: \"#C7BA00\",\n  description: \"In asperiores repellat error recusandae et adipisci laborum porro.\"\n});\nrings.push({\n  id: \"hold\",\n  name: \"HOLD\",\n  color: \"#E09B96\",\n  description: \"Esse mollitia in.\"\n});\nconst quadrants = new Array();\nquadrants.push({ id: \"infrastructure\", name: \"Infrastructure\" });\nquadrants.push({ id: \"frameworks\", name: \"Frameworks\" });\nquadrants.push({ id: \"languages\", name: \"Languages\" });\nquadrants.push({ id: \"process\", name: \"Process\" });\nconst entries = new Array();\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\"),\n      description: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua\"\n    }\n  ],\n  key: \"javascript\",\n  id: \"javascript\",\n  title: \"JavaScript\",\n  quadrant: \"languages\",\n  links: [\n    {\n      url: \"https://www.javascript.com/\",\n      title: \"Learn more\"\n    },\n    {\n      url: \"https://www.typescriptlang.org/\",\n      title: \"TypeScript\"\n    }\n  ],\n  description: 'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\\n\\n```ts\\nconst x = \"3\";\\n```\\n'\n});\nentries.push({\n  timeline: [\n    {\n      moved: -1,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\"),\n      description: \"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat\"\n    }\n  ],\n  key: \"typescript\",\n  id: \"typescript\",\n  title: \"TypeScript\",\n  quadrant: \"languages\",\n  description: \"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 1,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\"),\n      description: \"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur\"\n    }\n  ],\n  links: [\n    {\n      url: \"https://webpack.js.org/\",\n      title: \"Learn more\"\n    }\n  ],\n  key: \"webpack\",\n  id: \"webpack\",\n  title: \"Webpack\",\n  quadrant: \"frameworks\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  links: [\n    {\n      url: \"https://reactjs.org/\",\n      title: \"Learn more\"\n    }\n  ],\n  key: \"react\",\n  id: \"react\",\n  title: \"React\",\n  quadrant: \"frameworks\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  key: \"code-reviews\",\n  id: \"code-reviews\",\n  title: \"Code Reviews\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"assess\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  key: \"mob-programming\",\n  id: \"mob-programming\",\n  title: \"Mob Programming\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  key: \"docs-like-code\",\n  id: \"docs-like-code\",\n  title: \"Docs-like-code\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      ringId: \"hold\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  key: \"force-push\",\n  id: \"force-push\",\n  title: \"Force push to master\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\"),\n      description: \"long description\"\n    },\n    {\n      ringId: \"trial\",\n      date: /* @__PURE__ */ new Date(\"2020-07-05\"),\n      description: \"long description\"\n    }\n  ],\n  links: [\n    {\n      url: \"https://github.com\",\n      title: \"Learn more\"\n    }\n  ],\n  key: \"github-actions\",\n  id: \"github-actions\",\n  title: \"GitHub Actions\",\n  quadrant: \"infrastructure\"\n});\nconst mock = {\n  entries,\n  quadrants,\n  rings\n};\nclass SampleTechRadarApi {\n  async load() {\n    return mock;\n  }\n}\n\nconst rootRouteRef = createRouteRef({\n  id: \"tech-radar\"\n});\nconst techRadarPlugin = createPlugin({\n  id: \"tech-radar\",\n  routes: {\n    root: rootRouteRef\n  },\n  apis: [createApiFactory(techRadarApiRef, new SampleTechRadarApi())]\n});\nconst TechRadarPage = techRadarPlugin.provide(\n  createRoutableExtension({\n    name: \"TechRadarPage\",\n    component: () => import('./RadarPage-bd00b800.esm.js').then(function (n) { return n.b; }).then((m) => m.RadarPage),\n    mountPoint: rootRouteRef\n  })\n);\n\nexport { MovedState as M, SampleTechRadarApi as S, TechRadarPage as T, techRadarApiRef as a, rootRouteRef as r, techRadarPlugin as t };\n//# sourceMappingURL=plugin-76dae734.esm.js.map\n","import { useApi, configApiRef, createPlugin } from '@backstage/core-plugin-api';\nimport { useShadowRootElements, useShadowRootSelection, createTechDocsAddonExtension, TechDocsAddonLocations } from '@backstage/plugin-techdocs-react';\nimport React, { useState, useCallback, useEffect, useMemo } from 'react';\nimport { useLocalStorageValue } from '@react-hookz/web';\nimport { withStyles, Button, makeStyles, Portal, Paper, Slider, useTheme, MenuItem, ListItemText, Typography, Box, IconButton } from '@material-ui/core';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport parseGitUrl from 'git-url-parse';\nimport { replaceGithubUrlType, replaceGitLabUrlType } from '@backstage/integration';\nimport { scmIntegrationsApiRef } from '@backstage/integration-react';\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport { Link, GitHubIcon } from '@backstage/core-components';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport PhotoSwipeLightbox from 'photoswipe/lightbox';\nimport PhotoSwipe from 'photoswipe';\nimport 'photoswipe/style.css';\n\nconst NESTED_LIST_TOGGLE = \".md-nav__item--nested .md-toggle\";\nconst EXPANDABLE_NAVIGATION_LOCAL_STORAGE = \"@backstage/techdocs-addons/nav-expanded\";\nconst StyledButton = withStyles({\n  root: {\n    position: \"absolute\",\n    left: \"220px\",\n    top: \"19px\",\n    padding: 0,\n    minWidth: 0\n  }\n})(Button);\nconst CollapsedIcon = withStyles({\n  root: {\n    height: \"20px\",\n    width: \"20px\"\n  }\n})(ChevronRightIcon);\nconst ExpandedIcon = withStyles({\n  root: {\n    height: \"20px\",\n    width: \"20px\"\n  }\n})(ExpandMoreIcon);\nconst ExpandableNavigationAddon = () => {\n  const defaultValue = { expandAllNestedNavs: false };\n  const { value: expanded, set: setExpanded } = useLocalStorageValue(\n    EXPANDABLE_NAVIGATION_LOCAL_STORAGE,\n    { defaultValue }\n  );\n  const [hasNavSubLevels, setHasNavSubLevels] = useState(false);\n  const [...checkboxToggles] = useShadowRootElements([\n    NESTED_LIST_TOGGLE\n  ]);\n  const shouldToggle = useCallback(\n    (item) => {\n      const isExpanded = item.checked;\n      const shouldExpand = expanded == null ? void 0 : expanded.expandAllNestedNavs;\n      if (shouldExpand && !isExpanded) {\n        return true;\n      }\n      if (!shouldExpand && isExpanded) {\n        return true;\n      }\n      return false;\n    },\n    [expanded]\n  );\n  useEffect(() => {\n    if (!(checkboxToggles == null ? void 0 : checkboxToggles.length))\n      return;\n    setHasNavSubLevels(true);\n    checkboxToggles.forEach((item) => {\n      if (shouldToggle(item))\n        item.click();\n    });\n  }, [expanded, shouldToggle, checkboxToggles]);\n  const handleState = () => {\n    setExpanded((prevState) => ({\n      expandAllNestedNavs: !(prevState == null ? void 0 : prevState.expandAllNestedNavs)\n    }));\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, hasNavSubLevels ? /* @__PURE__ */ React.createElement(\n    StyledButton,\n    {\n      size: \"small\",\n      onClick: handleState,\n      \"aria-label\": (expanded == null ? void 0 : expanded.expandAllNestedNavs) ? \"collapse-nav\" : \"expand-nav\"\n    },\n    (expanded == null ? void 0 : expanded.expandAllNestedNavs) ? /* @__PURE__ */ React.createElement(ExpandedIcon, null) : /* @__PURE__ */ React.createElement(CollapsedIcon, null)\n  ) : null);\n};\n\nconst ADDON_FEEDBACK_CONTAINER_ID = \"techdocs-report-issue\";\nconst ADDON_FEEDBACK_CONTAINER_SELECTOR = `#${ADDON_FEEDBACK_CONTAINER_ID}`;\nconst PAGE_EDIT_LINK_SELECTOR = '[title^=\"Edit this page\"]';\nconst PAGE_FEEDBACK_LINK_SELECTOR = '[title^=\"Leave feedback for\"]';\nconst PAGE_MAIN_CONTENT_SELECTOR = '[data-md-component=\"main\"] .md-content';\n\nconst resolveBlobUrl = (url, type) => {\n  if (type === \"github\") {\n    return replaceGithubUrlType(url, \"blob\");\n  } else if (type === \"gitlab\") {\n    return replaceGitLabUrlType(url, \"blob\");\n  }\n  console.error(\n    `Invalid SCM type ${type} found in ReportIssue addon for URL ${url}!`\n  );\n  return url;\n};\nconst getTitle = (selection) => {\n  const text = selection.toString().substring(0, 70);\n  const ellipsis = text.length === 70 ? \"...\" : \"\";\n  return `Documentation feedback: ${text}${ellipsis}`;\n};\nconst getBody = (selection, markdownUrl, appTitle) => {\n  const title = \"## Documentation Feedback \\u{1F4DD}\";\n  const subheading = \"#### The highlighted text:\";\n  const commentHeading = \"#### The comment on the text:\";\n  const commentPlaceholder = \"_>replace this line with your comment<_\";\n  const highlightedTextAsQuote = selection.toString().trim().split(\"\\n\").map((line) => `> ${line.trim()}`).join(\"\\n\");\n  const facts = [\n    `${appTitle} URL: <${window.location.href}> \nMarkdown URL: <${markdownUrl}>`\n  ];\n  return `${title}\n\n ${subheading} \n\n ${highlightedTextAsQuote}\n\n ${commentHeading} \n ${commentPlaceholder}\n\n ___\n${facts}`;\n};\nconst useGitTemplate = (debounceTime) => {\n  var _a, _b;\n  const initialTemplate = { title: \"\", body: \"\" };\n  const selection = useShadowRootSelection(debounceTime);\n  const [editLink] = useShadowRootElements([PAGE_EDIT_LINK_SELECTOR]);\n  const url = (_a = editLink == null ? void 0 : editLink.href) != null ? _a : \"\";\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptionalString(\"app.title\") || \"Backstage\";\n  if (!selection || !url)\n    return initialTemplate;\n  const type = (_b = scmIntegrationsApi.byUrl(url)) == null ? void 0 : _b.type;\n  if (!type)\n    return initialTemplate;\n  return {\n    title: getTitle(selection),\n    body: getBody(selection, resolveBlobUrl(url, type), appTitle)\n  };\n};\nconst useGitRepository = () => {\n  var _a, _b;\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n  const [editLink] = useShadowRootElements([PAGE_EDIT_LINK_SELECTOR]);\n  const url = (_a = editLink == null ? void 0 : editLink.href) != null ? _a : \"\";\n  if (!url)\n    return null;\n  const type = (_b = scmIntegrationsApi.byUrl(url)) == null ? void 0 : _b.type;\n  if (!type)\n    return null;\n  return { ...parseGitUrl(resolveBlobUrl(url, type)), type };\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  root: {\n    display: \"grid\",\n    gridGap: theme.spacing(1),\n    gridAutoFlow: \"column\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    color: theme.palette.common.black,\n    fontSize: theme.typography.button.fontSize\n  }\n}));\nconst getIcon = ({ type }) => {\n  if (type === \"github\") {\n    return GitHubIcon;\n  }\n  return BugReportIcon;\n};\nconst getName = ({ type }) => {\n  if (type === \"github\") {\n    return \"Github\";\n  }\n  return \"Gitlab\";\n};\nconst getUrl = (repository, template) => {\n  const { title, body } = template;\n  const encodedTitle = encodeURIComponent(title);\n  const encodedBody = encodeURIComponent(body);\n  const { protocol, resource, owner, name, type } = repository;\n  const url = `${protocol}://${resource}/${owner}/${name}`;\n  const encodedUrl = encodeURI(url);\n  if (type === \"github\") {\n    return `${encodedUrl}/issues/new?title=${encodedTitle}&body=${encodedBody}`;\n  }\n  return `${encodedUrl}/issues/new?issue[title]=${encodedTitle}&issue[description]=${encodedBody}`;\n};\nconst IssueLink = ({ template, repository }) => {\n  const classes = useStyles$2();\n  const Icon = getIcon(repository);\n  const url = getUrl(repository, template);\n  return /* @__PURE__ */ React.createElement(Link, { className: classes.root, to: url, target: \"_blank\" }, /* @__PURE__ */ React.createElement(Icon, null), \" Open new \", getName(repository), \" issue\");\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  root: {\n    transform: \"translate(-100%, -100%)\",\n    position: \"absolute\",\n    padding: theme.spacing(1),\n    zIndex: theme.zIndex.tooltip,\n    background: theme.palette.common.white\n  }\n}));\nconst ReportIssueAddon = ({\n  debounceTime = 500,\n  templateBuilder: buildTemplate\n}) => {\n  const classes = useStyles$1();\n  const [style, setStyle] = useState();\n  const repository = useGitRepository();\n  const defaultTemplate = useGitTemplate(debounceTime);\n  const selection = useShadowRootSelection(debounceTime);\n  const [mainContent, feedbackLink] = useShadowRootElements([\n    PAGE_MAIN_CONTENT_SELECTOR,\n    PAGE_FEEDBACK_LINK_SELECTOR\n  ]);\n  let [feedbackContainer] = useShadowRootElements([\n    ADDON_FEEDBACK_CONTAINER_SELECTOR\n  ]);\n  if (feedbackLink) {\n    feedbackLink.style.display = \"none\";\n  }\n  useEffect(() => {\n    if (\n      // todo(backstage/techdocs-core) handle non-repo rendering\n      !repository || !selection || !selection.containsNode(mainContent, true) || (selection == null ? void 0 : selection.containsNode(feedbackContainer, true))\n    ) {\n      return;\n    }\n    const mainContentPosition = mainContent.getBoundingClientRect();\n    const selectionPosition = selection.getRangeAt(0).getBoundingClientRect();\n    const distanceFromTop = selectionPosition.top - mainContentPosition.top;\n    const minDistanceFromTop = 50;\n    let top = distanceFromTop < minDistanceFromTop ? 101 : distanceFromTop - 16;\n    if (mainContentPosition.top < 0) {\n      const absMainContentTop = Math.abs(mainContentPosition.top);\n      if (distanceFromTop - absMainContentTop < minDistanceFromTop) {\n        top += 89;\n      }\n    }\n    setStyle({\n      top: `${top}px`,\n      left: `${selectionPosition.left + selectionPosition.width / 2}px`\n    });\n  }, [selection, mainContent, feedbackContainer]);\n  if (!selection || !repository || ![\"github\", \"gitlab\"].includes(repository.type))\n    return null;\n  if (!feedbackContainer) {\n    feedbackContainer = document.createElement(\"div\");\n    feedbackContainer.setAttribute(\"id\", ADDON_FEEDBACK_CONTAINER_ID);\n    mainContent.prepend(feedbackContainer);\n  }\n  return /* @__PURE__ */ React.createElement(Portal, { container: feedbackContainer }, /* @__PURE__ */ React.createElement(\n    Paper,\n    {\n      \"data-testid\": \"report-issue-addon\",\n      className: classes.root,\n      style\n    },\n    /* @__PURE__ */ React.createElement(\n      IssueLink,\n      {\n        repository,\n        template: buildTemplate ? buildTemplate({ selection }) : defaultTemplate\n      }\n    )\n  ));\n};\n\nconst boxShadow = \"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)\";\nconst StyledSlider = withStyles((theme) => ({\n  root: {\n    height: 2,\n    padding: \"15px 0\"\n  },\n  thumb: {\n    height: 18,\n    width: 18,\n    backgroundColor: theme.palette.common.white,\n    boxShadow,\n    marginTop: -9,\n    marginLeft: -9,\n    \"&:focus, &:hover, &$active\": {\n      boxShadow: \"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)\",\n      // Reset on touch devices, it doesn't add specificity\n      \"@media (hover: none)\": {\n        boxShadow\n      }\n    }\n  },\n  active: {},\n  valueLabel: {\n    top: \"100%\",\n    left: \"50%\",\n    transform: \"scale(1) translate(-50%, -5px) !important\",\n    \"& *\": {\n      color: theme.palette.textSubtle,\n      fontSize: theme.typography.caption.fontSize,\n      background: \"transparent\"\n    }\n  },\n  track: {\n    height: 2\n  },\n  rail: {\n    height: 2,\n    opacity: 0.5\n  },\n  mark: {\n    height: 10,\n    width: 1,\n    marginTop: -4\n  },\n  markActive: {\n    opacity: 1,\n    backgroundColor: \"currentColor\"\n  }\n}))(Slider);\nconst settings = {\n  key: \"techdocs.addons.settings.textsize\",\n  defaultValue: 100\n};\nconst marks = [\n  {\n    value: 90\n  },\n  {\n    value: 100\n  },\n  {\n    value: 115\n  },\n  {\n    value: 130\n  },\n  {\n    value: 150\n  }\n];\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    color: theme.palette.textSubtle,\n    display: \"flex\",\n    alignItems: \"center\",\n    margin: 0,\n    minWidth: 200\n  },\n  menuItem: {\n    \"&:hover\": {\n      background: \"transparent\"\n    }\n  },\n  decreaseButton: {\n    marginRight: theme.spacing(1)\n  },\n  increaseButton: {\n    marginLeft: theme.spacing(1)\n  }\n}));\nconst TextSizeAddon = () => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const [body] = useShadowRootElements([\"body\"]);\n  const [value, setValue] = useState(() => {\n    const initialValue = localStorage == null ? void 0 : localStorage.getItem(settings.key);\n    return initialValue ? parseInt(initialValue, 10) : settings.defaultValue;\n  });\n  const values = useMemo(() => marks.map((mark) => mark.value), []);\n  const index = useMemo(() => values.indexOf(value), [values, value]);\n  const min = useMemo(() => values[0], [values]);\n  const max = useMemo(() => values[values.length - 1], [values]);\n  const getValueText = useCallback(() => `${value}%`, [value]);\n  const handleChangeCommitted = useCallback(\n    (_event, newValue) => {\n      if (!Array.isArray(newValue)) {\n        setValue(newValue);\n        localStorage == null ? void 0 : localStorage.setItem(settings.key, String(newValue));\n      }\n    },\n    [setValue]\n  );\n  const handleDecreaseClick = useCallback(\n    (event) => {\n      handleChangeCommitted(event, values[index - 1]);\n    },\n    [index, values, handleChangeCommitted]\n  );\n  const handleIncreaseClick = useCallback(\n    (event) => {\n      handleChangeCommitted(event, values[index + 1]);\n    },\n    [index, values, handleChangeCommitted]\n  );\n  useEffect(() => {\n    var _a, _b;\n    if (!body)\n      return;\n    const htmlFontSize = (_b = (_a = theme.typography) == null ? void 0 : _a.htmlFontSize) != null ? _b : 16;\n    body.style.setProperty(\n      \"--md-typeset-font-size\",\n      `${htmlFontSize * (value / 100)}px`\n    );\n  }, [body, value, theme]);\n  return /* @__PURE__ */ React.createElement(MenuItem, { className: classes.menuItem, button: true, disableRipple: true }, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle2\", color: \"textPrimary\" }, \"Text size\"),\n      secondary: /* @__PURE__ */ React.createElement(Box, { className: classes.container }, /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          className: classes.decreaseButton,\n          size: \"small\",\n          edge: \"start\",\n          disabled: value === min,\n          onClick: handleDecreaseClick,\n          \"aria-label\": \"Decrease text size\"\n        },\n        /* @__PURE__ */ React.createElement(RemoveIcon, null)\n      ), /* @__PURE__ */ React.createElement(\n        StyledSlider,\n        {\n          value,\n          \"aria-labelledby\": \"text-size-slider\",\n          getAriaValueText: getValueText,\n          valueLabelDisplay: \"on\",\n          valueLabelFormat: getValueText,\n          marks,\n          step: null,\n          min,\n          max,\n          onChangeCommitted: handleChangeCommitted\n        }\n      ), /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          className: classes.increaseButton,\n          size: \"small\",\n          edge: \"end\",\n          disabled: value === max,\n          onClick: handleIncreaseClick,\n          \"aria-label\": \"Increase text size\"\n        },\n        /* @__PURE__ */ React.createElement(AddIcon, null)\n      )),\n      disableTypography: true\n    }\n  ));\n};\n\nconst LightBoxAddon = () => {\n  const images = useShadowRootElements([\"img\"]);\n  useEffect(() => {\n    let dataSourceImages = null;\n    let lightbox = new PhotoSwipeLightbox({\n      pswpModule: PhotoSwipe,\n      initialZoomLevel: 1,\n      secondaryZoomLevel: (zoomLevelObject) => {\n        const imageWidth = zoomLevelObject.elementSize.x;\n        const imageHeight = zoomLevelObject.elementSize.y;\n        const viewportWidth = zoomLevelObject.panAreaSize.x;\n        const viewportHeight = zoomLevelObject.panAreaSize.y;\n        const widthScale = viewportWidth / imageWidth;\n        const heightScale = viewportHeight / imageHeight;\n        const scaleFactor = Math.min(widthScale, heightScale);\n        return scaleFactor;\n      },\n      wheelToZoom: true,\n      arrowPrevSVG: '<svg class=\"MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"ArrowBackIosIcon\" aria-label=\"fontSize large\"><path d=\"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z\"></path></svg>',\n      arrowNextSVG: '<svg class=\"MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"ArrowForwardIosIcon\" aria-label=\"fontSize large\"><path d=\"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z\"></path></svg>',\n      closeSVG: '<svg class=\"MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"CloseIcon\" aria-label=\"fontSize large\"><path d=\"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"></path></svg>',\n      zoomSVG: `<svg class=\"MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"ZoomIcon\" aria-label=\"fontSize large\">\n          <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"></path><path d=\"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\" id=\"photoswipe-zoom-icon-zoomin-path\"></path><path d=\"M12 10H 7 V 9 H 12 Z\" id=\"photoswipe-zoom-icon-zoomout-path\">\n        </svg>`\n    });\n    images.forEach((image, index) => {\n      image.onclick = () => {\n        if (dataSourceImages === null) {\n          dataSourceImages = images.map((dataSourceImage) => {\n            return {\n              element: dataSourceImage,\n              src: dataSourceImage.src,\n              msrc: dataSourceImage.src,\n              alt: dataSourceImage.alt,\n              width: dataSourceImage.clientWidth,\n              height: dataSourceImage.clientHeight\n            };\n          });\n        }\n        lightbox.loadAndOpen(index, dataSourceImages);\n        return false;\n      };\n    });\n    lightbox.init();\n    return () => {\n      lightbox.destroy();\n      lightbox = null;\n    };\n  }, [images]);\n  return null;\n};\n\nconst techdocsModuleAddonsContribPlugin = createPlugin({\n  id: \"techdocsModuleAddonsContrib\"\n});\nconst ExpandableNavigation = techdocsModuleAddonsContribPlugin.provide(\n  createTechDocsAddonExtension({\n    name: \"ExpandableNavigation\",\n    location: TechDocsAddonLocations.PrimarySidebar,\n    component: ExpandableNavigationAddon\n  })\n);\nconst ReportIssue = techdocsModuleAddonsContribPlugin.provide(\n  createTechDocsAddonExtension({\n    name: \"ReportIssue\",\n    location: TechDocsAddonLocations.Content,\n    component: ReportIssueAddon\n  })\n);\nconst TextSize = techdocsModuleAddonsContribPlugin.provide(\n  createTechDocsAddonExtension({\n    name: \"TextSize\",\n    location: TechDocsAddonLocations.Settings,\n    component: TextSizeAddon\n  })\n);\nconst LightBox = techdocsModuleAddonsContribPlugin.provide(\n  createTechDocsAddonExtension({\n    name: \"LightBox\",\n    location: TechDocsAddonLocations.Content,\n    component: LightBoxAddon\n  })\n);\n\nexport { ExpandableNavigation, LightBox, ReportIssue, TextSize, techdocsModuleAddonsContribPlugin };\n//# sourceMappingURL=index.esm.js.map\n","import React, { useCallback, memo, useState, useEffect, useContext, useMemo } from 'react';\nimport { useOutlet } from 'react-router-dom';\nimport { attachComponentData, createReactExtension, useElementFilter, createApiRef, useApi, configApiRef, AnalyticsContext } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\nimport { createVersionedContext, createVersionedValueMap } from '@backstage/version-bridge';\nimport { create } from 'jss';\nimport { jssPreset, StylesProvider } from '@material-ui/styles';\nimport { Progress } from '@backstage/core-components';\nimport debounce from 'lodash/debounce';\n\nconst TECHDOCS_ADDONS_KEY = \"techdocs.addons.addon.v1\";\nconst TECHDOCS_ADDONS_WRAPPER_KEY = \"techdocs.addons.wrapper.v1\";\nconst TechDocsAddons = () => null;\nattachComponentData(TechDocsAddons, TECHDOCS_ADDONS_WRAPPER_KEY, true);\nconst getDataKeyByName = (name) => {\n  return `${TECHDOCS_ADDONS_KEY}.${name.toLocaleLowerCase(\"en-US\")}`;\n};\nfunction createTechDocsAddonExtension(options) {\n  const { name, component: TechDocsAddon } = options;\n  return createReactExtension({\n    name,\n    component: {\n      sync: (props) => /* @__PURE__ */ React.createElement(TechDocsAddon, { ...props })\n    },\n    data: {\n      [TECHDOCS_ADDONS_KEY]: options,\n      [getDataKeyByName(name)]: true\n    }\n  });\n}\nconst getTechDocsAddonByName = (collection, key) => {\n  return collection.selectByComponentData({ key }).getElements()[0];\n};\nconst getAllTechDocsAddons = (collection) => {\n  return collection.selectByComponentData({\n    key: TECHDOCS_ADDONS_WRAPPER_KEY\n  }).selectByComponentData({\n    key: TECHDOCS_ADDONS_KEY\n  });\n};\nconst getAllTechDocsAddonsData = (collection) => {\n  return collection.selectByComponentData({\n    key: TECHDOCS_ADDONS_WRAPPER_KEY\n  }).findComponentData({\n    key: TECHDOCS_ADDONS_KEY\n  });\n};\nconst useTechDocsAddons = () => {\n  const node = useOutlet();\n  const collection = useElementFilter(node, getAllTechDocsAddons);\n  const options = useElementFilter(node, getAllTechDocsAddonsData);\n  const findAddonByData = useCallback(\n    (data) => {\n      var _a;\n      if (!collection || !data)\n        return null;\n      const nameKey = getDataKeyByName(data.name);\n      return (_a = getTechDocsAddonByName(collection, nameKey)) != null ? _a : null;\n    },\n    [collection]\n  );\n  const renderComponentByName = useCallback(\n    (name) => {\n      const data = options.find((option) => option.name === name);\n      return data ? findAddonByData(data) : null;\n    },\n    [options, findAddonByData]\n  );\n  const renderComponentsByLocation = useCallback(\n    (location) => {\n      const data = options.filter((option) => option.location === location);\n      return data.length ? data.map(findAddonByData) : null;\n    },\n    [options, findAddonByData]\n  );\n  return { renderComponentByName, renderComponentsByLocation };\n};\n\nconst techdocsApiRef = createApiRef({\n  id: \"plugin.techdocs.service\"\n});\nconst techdocsStorageApiRef = createApiRef({\n  id: \"plugin.techdocs.storageservice\"\n});\n\nfunction toLowercaseEntityRefMaybe(entityRef, config) {\n  if (config.getOptionalBoolean(\"techdocs.legacyUseCaseSensitiveTripletPaths\"))\n    return entityRef;\n  entityRef.kind = entityRef.kind.toLocaleLowerCase();\n  entityRef.name = entityRef.name.toLocaleLowerCase();\n  entityRef.namespace = entityRef.namespace.toLocaleLowerCase();\n  return entityRef;\n}\n\nconst areEntityRefsEqual = (prevEntityRef, nextEntityRef) => {\n  return stringifyEntityRef(prevEntityRef) === stringifyEntityRef(nextEntityRef);\n};\nconst defaultTechDocsReaderPageValue = {\n  title: \"\",\n  subtitle: \"\",\n  setTitle: () => {\n  },\n  setSubtitle: () => {\n  },\n  setShadowRoot: () => {\n  },\n  metadata: { loading: true },\n  entityMetadata: { loading: true },\n  entityRef: { kind: \"\", name: \"\", namespace: \"\" }\n};\nconst TechDocsReaderPageContext = createVersionedContext(\"techdocs-reader-page-context\");\nconst TechDocsReaderPageProvider = memo(\n  (props) => {\n    const { entityRef, children } = props;\n    const techdocsApi = useApi(techdocsApiRef);\n    const config = useApi(configApiRef);\n    const entityMetadata = useAsync(async () => {\n      return techdocsApi.getEntityMetadata(entityRef);\n    }, [entityRef]);\n    const metadata = useAsyncRetry(async () => {\n      return techdocsApi.getTechDocsMetadata(entityRef);\n    }, [entityRef]);\n    const [title, setTitle] = useState(defaultTechDocsReaderPageValue.title);\n    const [subtitle, setSubtitle] = useState(\n      defaultTechDocsReaderPageValue.subtitle\n    );\n    const [shadowRoot, setShadowRoot] = useState(\n      defaultTechDocsReaderPageValue.shadowRoot\n    );\n    useEffect(() => {\n      if (shadowRoot && !metadata.value && !metadata.loading) {\n        metadata.retry();\n      }\n    }, [\n      metadata.value,\n      metadata.loading,\n      shadowRoot,\n      metadata.retry,\n      metadata\n    ]);\n    const value = {\n      metadata,\n      entityRef: toLowercaseEntityRefMaybe(entityRef, config),\n      entityMetadata,\n      shadowRoot,\n      setShadowRoot,\n      title,\n      setTitle,\n      subtitle,\n      setSubtitle\n    };\n    const versionedValue = createVersionedValueMap({ 1: value });\n    return /* @__PURE__ */ React.createElement(\n      AnalyticsContext,\n      {\n        attributes: { entityRef: stringifyEntityRef(entityRef) }\n      },\n      /* @__PURE__ */ React.createElement(TechDocsReaderPageContext.Provider, { value: versionedValue }, children instanceof Function ? children(value) : children)\n    );\n  },\n  (prevProps, nextProps) => {\n    return areEntityRefsEqual(prevProps.entityRef, nextProps.entityRef);\n  }\n);\nconst useTechDocsReaderPage = () => {\n  const versionedContext = useContext(TechDocsReaderPageContext);\n  if (versionedContext === void 0) {\n    return defaultTechDocsReaderPageValue;\n  }\n  const context = versionedContext.atVersion(1);\n  if (context === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return context;\n};\n\nconst TechDocsAddonLocations = Object.freeze({\n  /**\n   * These addons fill up the header from the right, on the same line as the\n   * title.\n   */\n  Header: \"Header\",\n  /**\n   * These addons appear below the header and above all content; tooling addons\n   * can be inserted for convenience.\n   */\n  Subheader: \"Subheader\",\n  /**\n   * These addons are items added to the settings menu list and are designed to make\n   * the reader experience customizable, for example accessibility options\n   */\n  Settings: \"Settings\",\n  /**\n   * These addons appear left of the content and above the navigation.\n   */\n  PrimarySidebar: \"PrimarySidebar\",\n  /**\n   * These addons appear right of the content and above the table of contents.\n   */\n  SecondarySidebar: \"SecondarySidebar\",\n  /**\n   * A virtual location which allows mutation of all content within the shadow\n   * root by transforming DOM nodes. These addons should return null on render.\n   */\n  Content: \"Content\"\n  /**\n   * todo(backstage/community): This is a proposed virtual location which would\n   * help implement a common addon pattern in which many instances of a given\n   * element in markdown would be dynamically replaced at render-time based on\n   * attributes provided on that element, for example:\n   *\n   * ```md\n   * ## For Fun\n   * <TechDocsAddon>CatGif</TechDocsAddon>\n   *\n   * ## Component Metadata\n   * <TechDocsAddon entityRef=\"default:component/some-component-name\">CatalogEntityCard</TechDocsAddon>\n   *\n   * ## System Metadata\n   * <TechDocsAddon entityRef=\"default:system/some-system-name\">CatalogEntityCard</TechDocsAddon>\n   * ```\n   *\n   * Could correspond to a TechDocs addon named `CatalogEntityCard` with\n   * location `TechDocsAddonLocations.COMPONENT`, whose `component` would be\n   * the react component that would be rendered in place of all instances of\n   * the markdown illustrated above.\n   *\n   * The `@backstage/plugin-techdocs-react` package would need to be updated to, in\n   * cases where such addons had been registered, find all instances of the\n   * the `<TechDocsAddon>` tag whose `textContent` corresponded with the name of the\n   * addon, then replace them with component instances of the addon component,\n   * passing any attributes from the tag as props to the component.\n   */\n  // Component: 'Component',\n});\n\nconst SHADOW_DOM_STYLE_LOAD_EVENT = \"TECH_DOCS_SHADOW_DOM_STYLE_LOAD\";\nconst useShadowDomStylesEvents = (element) => {\n  useEffect(() => {\n    var _a;\n    if (!element) {\n      return () => {\n      };\n    }\n    const styles = element.querySelectorAll(\n      'head > link[rel=\"stylesheet\"]'\n    );\n    let count = (_a = styles == null ? void 0 : styles.length) != null ? _a : 0;\n    const event = new CustomEvent(SHADOW_DOM_STYLE_LOAD_EVENT);\n    if (!count) {\n      element.dispatchEvent(event);\n      return () => {\n      };\n    }\n    const handleLoad = () => {\n      if (--count === 0) {\n        element.dispatchEvent(event);\n      }\n    };\n    styles == null ? void 0 : styles.forEach((style) => {\n      style.addEventListener(\"load\", handleLoad);\n    });\n    return () => {\n      styles == null ? void 0 : styles.forEach((style) => {\n        style.removeEventListener(\"load\", handleLoad);\n      });\n    };\n  }, [element]);\n};\nconst useShadowDomStylesLoading = (element) => {\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    if (!element)\n      return () => {\n      };\n    setLoading(true);\n    const style = element.style;\n    style.setProperty(\"opacity\", \"0\");\n    const handleLoad = () => {\n      setLoading(false);\n      style.setProperty(\"opacity\", \"1\");\n    };\n    element.addEventListener(SHADOW_DOM_STYLE_LOAD_EVENT, handleLoad);\n    return () => {\n      element.removeEventListener(SHADOW_DOM_STYLE_LOAD_EVENT, handleLoad);\n    };\n  }, [element]);\n  return loading;\n};\nconst TechDocsShadowDom = (props) => {\n  const { element, onAppend, children } = props;\n  const [jss, setJss] = useState(\n    create({\n      ...jssPreset(),\n      insertionPoint: void 0\n    })\n  );\n  useShadowDomStylesEvents(element);\n  const loading = useShadowDomStylesLoading(element);\n  const ref = useCallback(\n    (shadowHost) => {\n      if (!element || !shadowHost)\n        return;\n      setJss(\n        create({\n          ...jssPreset(),\n          insertionPoint: element.querySelector(\"head\") || void 0\n        })\n      );\n      let shadowRoot = shadowHost.shadowRoot;\n      if (!shadowRoot) {\n        shadowRoot = shadowHost.attachShadow({ mode: \"open\" });\n      }\n      shadowRoot.replaceChildren(element);\n      if (typeof onAppend === \"function\") {\n        onAppend(shadowRoot);\n      }\n    },\n    [element, onAppend]\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, loading && /* @__PURE__ */ React.createElement(Progress, null), /* @__PURE__ */ React.createElement(StylesProvider, { jss, sheetsManager: /* @__PURE__ */ new Map() }, /* @__PURE__ */ React.createElement(\"div\", { ref, \"data-testid\": \"techdocs-native-shadowroot\" }), children));\n};\n\nconst useShadowRoot = () => {\n  const { shadowRoot } = useTechDocsReaderPage();\n  return shadowRoot;\n};\nconst useShadowRootElements = (selectors) => {\n  const shadowRoot = useShadowRoot();\n  if (!shadowRoot)\n    return [];\n  return selectors.map((selector) => shadowRoot == null ? void 0 : shadowRoot.querySelectorAll(selector)).filter((nodeList) => nodeList.length).map((nodeList) => Array.from(nodeList)).flat();\n};\nconst isValidSelection = (newSelection) => {\n  return newSelection.toString() && newSelection.rangeCount && newSelection.getRangeAt(0).getBoundingClientRect().top;\n};\nconst useShadowRootSelection = (waitMillis = 0) => {\n  const shadowRoot = useShadowRoot();\n  const [selection, setSelection] = useState(null);\n  const handleSelectionChange = useMemo(\n    () => debounce(() => {\n      const shadowDocument = shadowRoot;\n      const newSelection = shadowDocument.getSelection ? shadowDocument.getSelection() : document.getSelection();\n      if (newSelection && isValidSelection(newSelection)) {\n        setSelection(newSelection);\n      } else {\n        setSelection(null);\n      }\n    }, waitMillis),\n    [shadowRoot, setSelection, waitMillis]\n  );\n  useEffect(() => {\n    window.document.addEventListener(\"selectionchange\", handleSelectionChange);\n    return () => {\n      handleSelectionChange.cancel();\n      window.document.removeEventListener(\n        \"selectionchange\",\n        handleSelectionChange\n      );\n    };\n  }, [handleSelectionChange]);\n  return selection;\n};\n\nexport { SHADOW_DOM_STYLE_LOAD_EVENT, TECHDOCS_ADDONS_KEY, TECHDOCS_ADDONS_WRAPPER_KEY, TechDocsAddonLocations, TechDocsAddons, TechDocsReaderPageProvider, TechDocsShadowDom, createTechDocsAddonExtension, techdocsApiRef, techdocsStorageApiRef, toLowercaseEntityRefMaybe, useShadowDomStylesLoading, useShadowRoot, useShadowRootElements, useShadowRootSelection, useTechDocsAddons, useTechDocsReaderPage };\n//# sourceMappingURL=index.esm.js.map\n","import React from 'react';\nimport { Routes, Route, useRoutes } from 'react-router-dom';\nimport { getCompoundEntityRef, parseEntityRef } from '@backstage/catalog-model';\nimport { techdocsStorageApiRef, techdocsApiRef } from '@backstage/plugin-techdocs-react';\nimport { a as TechDocsStorageClient, T as TechDocsClient, r as rootRouteRef, b as rootDocsRouteRef, c as rootCatalogDocsRouteRef } from './routes-691e552c.esm.js';\nimport { createPlugin, createApiFactory, configApiRef, discoveryApiRef, identityApiRef, fetchApiRef, createRoutableExtension } from '@backstage/core-plugin-api';\nimport { createSearchResultListItemExtension } from '@backstage/plugin-search-react';\nimport { d as TechDocsReaderPageSubheader, c as TechDocsReaderPageContent, f as TechDocsReaderPage$1 } from './TechDocsReaderPage-b432d0c4.esm.js';\nimport { c as TechDocsIndexPage$1 } from './TechDocsIndexPage-a43a1a1c.esm.js';\nimport { useEntity, MissingAnnotationEmptyState } from '@backstage/plugin-catalog-react';\n\nconst techdocsPlugin = createPlugin({\n  id: \"techdocs\",\n  apis: [\n    createApiFactory({\n      api: techdocsStorageApiRef,\n      deps: {\n        configApi: configApiRef,\n        discoveryApi: discoveryApiRef,\n        identityApi: identityApiRef,\n        fetchApi: fetchApiRef\n      },\n      factory: ({ configApi, discoveryApi, identityApi, fetchApi }) => new TechDocsStorageClient({\n        configApi,\n        discoveryApi,\n        identityApi,\n        fetchApi\n      })\n    }),\n    createApiFactory({\n      api: techdocsApiRef,\n      deps: {\n        configApi: configApiRef,\n        discoveryApi: discoveryApiRef,\n        fetchApi: fetchApiRef\n      },\n      factory: ({ configApi, discoveryApi, fetchApi }) => new TechDocsClient({\n        configApi,\n        discoveryApi,\n        fetchApi\n      })\n    })\n  ],\n  routes: {\n    root: rootRouteRef,\n    docRoot: rootDocsRouteRef,\n    entityContent: rootCatalogDocsRouteRef\n  }\n});\nconst TechdocsPage = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"TechdocsPage\",\n    component: () => Promise.resolve().then(function () { return Router$1; }).then((m) => m.Router),\n    mountPoint: rootRouteRef\n  })\n);\nconst EntityTechdocsContent = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"EntityTechdocsContent\",\n    component: () => Promise.resolve().then(function () { return Router$1; }).then((m) => m.EmbeddedDocsRouter),\n    mountPoint: rootCatalogDocsRouteRef\n  })\n);\nconst TechDocsCustomHome = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"TechDocsCustomHome\",\n    component: () => import('./TechDocsCustomHome-114f3198.esm.js').then(\n      (m) => m.TechDocsCustomHome\n    ),\n    mountPoint: rootRouteRef\n  })\n);\nconst TechDocsIndexPage = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"TechDocsIndexPage\",\n    component: () => import('./TechDocsIndexPage-a43a1a1c.esm.js').then(function (n) { return n.d; }).then(\n      (m) => m.TechDocsIndexPage\n    ),\n    mountPoint: rootRouteRef\n  })\n);\nconst TechDocsReaderPage = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"TechDocsReaderPage\",\n    component: () => import('./index-233633bc.esm.js').then(\n      (m) => m.TechDocsReaderPage\n    ),\n    mountPoint: rootDocsRouteRef\n  })\n);\nconst TechDocsSearchResultListItem = techdocsPlugin.provide(\n  createSearchResultListItemExtension({\n    name: \"TechDocsSearchResultListItem\",\n    component: () => import('./TechDocsSearchResultListItem-4736f829.esm.js').then(\n      (m) => m.TechDocsSearchResultListItem\n    ),\n    predicate: (result) => result.type === \"techdocs\"\n  })\n);\n\nconst TECHDOCS_EXTERNAL_ANNOTATION$1 = \"backstage.io/techdocs-entity\";\nconst EntityPageDocs = ({ entity }) => {\n  var _a, _b;\n  let entityRef = getCompoundEntityRef(entity);\n  if ((_a = entity.metadata.annotations) == null ? void 0 : _a[TECHDOCS_EXTERNAL_ANNOTATION$1]) {\n    try {\n      entityRef = parseEntityRef(\n        (_b = entity.metadata.annotations) == null ? void 0 : _b[TECHDOCS_EXTERNAL_ANNOTATION$1]\n      );\n    } catch {\n    }\n  }\n  return /* @__PURE__ */ React.createElement(TechDocsReaderPage, { entityRef }, /* @__PURE__ */ React.createElement(TechDocsReaderPageSubheader, null), /* @__PURE__ */ React.createElement(TechDocsReaderPageContent, { withSearch: false }));\n};\n\nconst TECHDOCS_ANNOTATION = \"backstage.io/techdocs-ref\";\nconst TECHDOCS_EXTERNAL_ANNOTATION = \"backstage.io/techdocs-entity\";\nconst isTechDocsAvailable = (entity) => {\n  var _a, _b, _c, _d;\n  return Boolean((_b = (_a = entity == null ? void 0 : entity.metadata) == null ? void 0 : _a.annotations) == null ? void 0 : _b[TECHDOCS_ANNOTATION]) || Boolean((_d = (_c = entity == null ? void 0 : entity.metadata) == null ? void 0 : _c.annotations) == null ? void 0 : _d[TECHDOCS_EXTERNAL_ANNOTATION]);\n};\nconst Router = () => {\n  return /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, { path: \"/\", element: /* @__PURE__ */ React.createElement(TechDocsIndexPage$1, null) }), /* @__PURE__ */ React.createElement(\n    Route,\n    {\n      path: \"/:namespace/:kind/:name/*\",\n      element: /* @__PURE__ */ React.createElement(TechDocsReaderPage$1, null)\n    }\n  ));\n};\nconst EmbeddedDocsRouter = (props) => {\n  var _a, _b;\n  const { children } = props;\n  const { entity } = useEntity();\n  const element = useRoutes([\n    {\n      path: \"/*\",\n      element: /* @__PURE__ */ React.createElement(EntityPageDocs, { entity }),\n      children: [\n        {\n          path: \"*\",\n          element: children\n        }\n      ]\n    }\n  ]);\n  const projectId = ((_a = entity.metadata.annotations) == null ? void 0 : _a[TECHDOCS_ANNOTATION]) || ((_b = entity.metadata.annotations) == null ? void 0 : _b[TECHDOCS_EXTERNAL_ANNOTATION]);\n  if (!projectId) {\n    return /* @__PURE__ */ React.createElement(MissingAnnotationEmptyState, { annotation: [TECHDOCS_ANNOTATION] });\n  }\n  return element;\n};\n\nvar Router$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  isTechDocsAvailable: isTechDocsAvailable,\n  Router: Router,\n  EmbeddedDocsRouter: EmbeddedDocsRouter\n});\n\nexport { EntityTechdocsContent as E, Router as R, TechDocsCustomHome as T, TechDocsIndexPage as a, TechdocsPage as b, TechDocsReaderPage as c, TechDocsSearchResultListItem as d, EmbeddedDocsRouter as e, Router$1 as f, isTechDocsAvailable as i, techdocsPlugin as t };\n//# sourceMappingURL=Router-79dfcddc.esm.js.map\n","import React, { useEffect } from 'react';\nimport { useOutlet } from 'react-router-dom';\nimport { SubvalueCell, Link, Table, EmptyState, LinkButton, WarningPanel, CodeSnippet, PageWithHeader, Content, ContentHeader, SupportButton } from '@backstage/core-components';\nimport { EntityRefLinks, getEntityRelations, humanizeEntityRef, useEntityList, useStarredEntities, CATALOG_FILTER_EXISTS, EntityListProvider, CatalogFilterLayout, UserListPicker, EntityOwnerPicker, EntityTagPicker } from '@backstage/plugin-catalog-react';\nimport { useRouteRef, useApi, configApiRef } from '@backstage/core-plugin-api';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\nimport { capitalize } from 'lodash';\nimport { RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport { b as rootDocsRouteRef } from './routes-691e552c.esm.js';\nimport ShareIcon from '@material-ui/icons/Share';\nimport { withStyles } from '@material-ui/styles';\nimport Star from '@material-ui/icons/Star';\nimport StarBorder from '@material-ui/icons/StarBorder';\n\nfunction toLowerMaybe(str, config) {\n  return config.getOptionalBoolean(\n    \"techdocs.legacyUseCaseSensitiveTripletPaths\"\n  ) ? str : str.toLocaleLowerCase(\"en-US\");\n}\n\nconst YellowStar = withStyles({\n  root: {\n    color: \"#f3ba37\"\n  }\n})(Star);\nconst actionFactories = {\n  createCopyDocsUrlAction(copyToClipboard) {\n    return (row) => {\n      return {\n        icon: () => /* @__PURE__ */ React.createElement(ShareIcon, { fontSize: \"small\" }),\n        tooltip: \"Click to copy documentation link to clipboard\",\n        onClick: () => copyToClipboard(`${window.location.origin}${row.resolved.docsUrl}`)\n      };\n    };\n  },\n  createStarEntityAction(isStarredEntity, toggleStarredEntity) {\n    return (row) => {\n      const entity = row.entity;\n      const isStarred = isStarredEntity(entity);\n      return {\n        cellStyle: { paddingLeft: \"1em\" },\n        icon: () => isStarred ? /* @__PURE__ */ React.createElement(YellowStar, null) : /* @__PURE__ */ React.createElement(StarBorder, null),\n        tooltip: isStarred ? \"Remove from favorites\" : \"Add to favorites\",\n        onClick: () => toggleStarredEntity(entity)\n      };\n    };\n  }\n};\n\nfunction customTitle(entity) {\n  return entity.metadata.title || entity.metadata.name;\n}\nconst columnFactories = {\n  createNameColumn() {\n    return {\n      title: \"Document\",\n      field: \"entity.metadata.name\",\n      highlight: true,\n      render: (row) => /* @__PURE__ */ React.createElement(\n        SubvalueCell,\n        {\n          value: /* @__PURE__ */ React.createElement(Link, { to: row.resolved.docsUrl }, customTitle(row.entity)),\n          subvalue: row.entity.metadata.description\n        }\n      )\n    };\n  },\n  createOwnerColumn() {\n    return {\n      title: \"Owner\",\n      field: \"resolved.ownedByRelationsTitle\",\n      render: ({ resolved }) => /* @__PURE__ */ React.createElement(\n        EntityRefLinks,\n        {\n          entityRefs: resolved.ownedByRelations,\n          defaultKind: \"group\"\n        }\n      )\n    };\n  },\n  createKindColumn() {\n    return {\n      title: \"Kind\",\n      field: \"entity.kind\"\n    };\n  },\n  createTypeColumn() {\n    return {\n      title: \"Type\",\n      field: \"entity.spec.type\"\n    };\n  }\n};\n\nconst DocsTable = (props) => {\n  const { entities, title, loading, columns, actions, options } = props;\n  const [, copyToClipboard] = useCopyToClipboard();\n  const getRouteToReaderPageFor = useRouteRef(rootDocsRouteRef);\n  const config = useApi(configApiRef);\n  if (!entities)\n    return null;\n  const documents = entities.map((entity) => {\n    var _a;\n    const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n    return {\n      entity,\n      resolved: {\n        docsUrl: getRouteToReaderPageFor({\n          namespace: toLowerMaybe(\n            (_a = entity.metadata.namespace) != null ? _a : \"default\",\n            config\n          ),\n          kind: toLowerMaybe(entity.kind, config),\n          name: toLowerMaybe(entity.metadata.name, config)\n        }),\n        ownedByRelations,\n        ownedByRelationsTitle: ownedByRelations.map((r) => humanizeEntityRef(r, { defaultKind: \"group\" })).join(\", \")\n      }\n    };\n  });\n  const defaultColumns = [\n    columnFactories.createNameColumn(),\n    columnFactories.createOwnerColumn(),\n    columnFactories.createKindColumn(),\n    columnFactories.createTypeColumn()\n  ];\n  const defaultActions = [\n    actionFactories.createCopyDocsUrlAction(copyToClipboard)\n  ];\n  const pageSize = 20;\n  const paging = documents && documents.length > pageSize;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, loading || documents && documents.length > 0 ? /* @__PURE__ */ React.createElement(\n    Table,\n    {\n      isLoading: loading,\n      options: {\n        paging,\n        pageSize,\n        search: true,\n        actionsColumnIndex: -1,\n        ...options\n      },\n      data: documents,\n      columns: columns || defaultColumns,\n      actions: actions || defaultActions,\n      title: title ? `${title} (${documents.length})` : `All (${documents.length})`\n    }\n  ) : /* @__PURE__ */ React.createElement(\n    EmptyState,\n    {\n      missing: \"data\",\n      title: \"No documents to show\",\n      description: \"Create your own document. Check out our Getting Started Information\",\n      action: /* @__PURE__ */ React.createElement(\n        LinkButton,\n        {\n          color: \"primary\",\n          to: \"https://backstage.io/docs/features/techdocs/getting-started\",\n          variant: \"contained\"\n        },\n        \"DOCS\"\n      )\n    }\n  ));\n};\nDocsTable.columns = columnFactories;\nDocsTable.actions = actionFactories;\n\nconst EntityListDocsTable = (props) => {\n  var _a, _b;\n  const { columns, actions, options } = props;\n  const { loading, error, entities, filters } = useEntityList();\n  const { isStarredEntity, toggleStarredEntity } = useStarredEntities();\n  const [, copyToClipboard] = useCopyToClipboard();\n  const title = capitalize((_b = (_a = filters.user) == null ? void 0 : _a.value) != null ? _b : \"all\");\n  const defaultActions = [\n    actionFactories.createCopyDocsUrlAction(copyToClipboard),\n    actionFactories.createStarEntityAction(\n      isStarredEntity,\n      toggleStarredEntity\n    )\n  ];\n  if (error) {\n    return /* @__PURE__ */ React.createElement(\n      WarningPanel,\n      {\n        severity: \"error\",\n        title: \"Could not load available documentation.\"\n      },\n      /* @__PURE__ */ React.createElement(CodeSnippet, { language: \"text\", text: error.toString() })\n    );\n  }\n  return /* @__PURE__ */ React.createElement(\n    DocsTable,\n    {\n      title,\n      entities,\n      loading,\n      actions: actions || defaultActions,\n      columns,\n      options\n    }\n  );\n};\nEntityListDocsTable.columns = columnFactories;\nEntityListDocsTable.actions = actionFactories;\n\nconst TechDocsPageWrapper = (props) => {\n  var _a;\n  const { children } = props;\n  const configApi = useApi(configApiRef);\n  const generatedSubtitle = `Documentation available in ${(_a = configApi.getOptionalString(\"organization.name\")) != null ? _a : \"Backstage\"}`;\n  return /* @__PURE__ */ React.createElement(\n    PageWithHeader,\n    {\n      title: \"Documentation\",\n      subtitle: generatedSubtitle,\n      themeId: \"documentation\"\n    },\n    children\n  );\n};\n\nclass TechDocsFilter {\n  getCatalogFilters() {\n    return {\n      \"metadata.annotations.backstage.io/techdocs-ref\": CATALOG_FILTER_EXISTS\n    };\n  }\n}\nconst TechDocsPicker = () => {\n  const { updateFilters } = useEntityList();\n  useEffect(() => {\n    updateFilters({\n      techdocs: new TechDocsFilter()\n    });\n  }, [updateFilters]);\n  return null;\n};\n\nconst DefaultTechDocsHome = (props) => {\n  const { initialFilter = \"owned\", columns, actions } = props;\n  return /* @__PURE__ */ React.createElement(TechDocsPageWrapper, null, /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(ContentHeader, { title: \"\" }, /* @__PURE__ */ React.createElement(SupportButton, null, \"Discover documentation in your ecosystem.\")), /* @__PURE__ */ React.createElement(EntityListProvider, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout.Filters, null, /* @__PURE__ */ React.createElement(TechDocsPicker, null), /* @__PURE__ */ React.createElement(UserListPicker, { initialFilter }), /* @__PURE__ */ React.createElement(EntityOwnerPicker, null), /* @__PURE__ */ React.createElement(EntityTagPicker, null)), /* @__PURE__ */ React.createElement(CatalogFilterLayout.Content, null, /* @__PURE__ */ React.createElement(EntityListDocsTable, { actions, columns }))))));\n};\n\nconst TechDocsIndexPage = (props) => {\n  const outlet = useOutlet();\n  return outlet || /* @__PURE__ */ React.createElement(DefaultTechDocsHome, { ...props });\n};\n\nvar TechDocsIndexPage$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  TechDocsIndexPage: TechDocsIndexPage\n});\n\nexport { DocsTable as D, EntityListDocsTable as E, TechDocsPageWrapper as T, DefaultTechDocsHome as a, TechDocsPicker as b, TechDocsIndexPage as c, TechDocsIndexPage$1 as d, toLowerMaybe as t };\n//# sourceMappingURL=TechDocsIndexPage-a43a1a1c.esm.js.map\n","import React, { useReducer, useRef, useMemo, createContext, useContext, useState, useEffect, useCallback, Children } from 'react';\nimport { useParams, useNavigate, useLocation, useOutlet } from 'react-router-dom';\nimport { LogViewer, ErrorPage, useSidebarPinState, Content, HeaderLabel, Header, Page } from '@backstage/core-components';\nimport { techdocsStorageApiRef, useTechDocsReaderPage, SHADOW_DOM_STYLE_LOAD_EVENT, useShadowDomStylesLoading, useTechDocsAddons, TechDocsAddonLocations, useShadowRootElements, TechDocsShadowDom, TECHDOCS_ADDONS_WRAPPER_KEY, TECHDOCS_ADDONS_KEY, TechDocsReaderPageProvider } from '@backstage/plugin-techdocs-react';\nimport { makeStyles, createStyles, Button, Drawer, Grid, Typography, IconButton, CircularProgress, lighten, alpha, useTheme, withStyles, Tooltip, ThemeProvider, SvgIcon, useMediaQuery, Portal, Toolbar, Box, Menu } from '@material-ui/core';\nimport { SearchContextProvider, useSearch, SearchAutocomplete } from '@backstage/plugin-search-react';\nimport { TechDocsSearchResultListItem } from './TechDocsSearchResultListItem-4736f829.esm.js';\nimport { Alert, Skeleton } from '@material-ui/lab';\nimport Close from '@material-ui/icons/Close';\nimport { useApi, configApiRef, useAnalytics, useRouteRef, useRouteRefParams, getComponentData } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { scmIntegrationsApiRef } from '@backstage/integration-react';\nimport DOMPurify from 'dompurify';\nimport { replaceGithubUrlType } from '@backstage/integration';\nimport FeedbackOutlinedIcon from '@material-ui/icons/FeedbackOutlined';\nimport parseGitUrl from 'git-url-parse';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport IconButton$1 from '@material-ui/core/IconButton';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\nimport Helmet from 'react-helmet';\nimport { useTheme as useTheme$1 } from '@material-ui/core/styles';\nimport CodeIcon from '@material-ui/icons/Code';\nimport { getEntityRelations, EntityRefLink, EntityRefLinks } from '@backstage/plugin-catalog-react';\nimport { RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport { capitalize } from 'lodash';\nimport { r as rootRouteRef, b as rootDocsRouteRef } from './routes-691e552c.esm.js';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nfunction calculateDisplayState({\n  contentLoading,\n  content,\n  activeSyncState\n}) {\n  if (contentLoading) {\n    return \"CHECKING\";\n  }\n  if (activeSyncState === \"BUILD_READY_RELOAD\") {\n    return \"CHECKING\";\n  }\n  if (!content && activeSyncState === \"CHECKING\") {\n    return \"CHECKING\";\n  }\n  if (!content && activeSyncState === \"BUILDING\") {\n    return \"INITIAL_BUILD\";\n  }\n  if (!content) {\n    return \"CONTENT_NOT_FOUND\";\n  }\n  if (activeSyncState === \"BUILDING\") {\n    return \"CONTENT_STALE_REFRESHING\";\n  }\n  if (activeSyncState === \"BUILD_READY\") {\n    return \"CONTENT_STALE_READY\";\n  }\n  if (activeSyncState === \"ERROR\") {\n    return \"CONTENT_STALE_ERROR\";\n  }\n  return \"CONTENT_FRESH\";\n}\nfunction reducer(oldState, action) {\n  const newState = { ...oldState };\n  switch (action.type) {\n    case \"sync\":\n      if (action.state === \"CHECKING\") {\n        newState.buildLog = [];\n      }\n      newState.activeSyncState = action.state;\n      newState.syncError = action.syncError;\n      break;\n    case \"contentLoading\":\n      newState.contentLoading = true;\n      newState.contentError = void 0;\n      break;\n    case \"content\":\n      if (typeof action.path === \"string\") {\n        newState.path = action.path;\n      }\n      newState.contentLoading = false;\n      newState.content = action.content;\n      newState.contentError = action.contentError;\n      break;\n    case \"buildLog\":\n      newState.buildLog = newState.buildLog.concat(action.log);\n      break;\n    default:\n      throw new Error();\n  }\n  if ([\"BUILD_READY\", \"BUILD_READY_RELOAD\"].includes(newState.activeSyncState) && [\"contentLoading\", \"content\"].includes(action.type)) {\n    newState.activeSyncState = \"UP_TO_DATE\";\n    newState.buildLog = [];\n  }\n  return newState;\n}\nfunction useReaderState(kind, namespace, name, path) {\n  var _a, _b;\n  const [state, dispatch] = useReducer(reducer, {\n    activeSyncState: \"CHECKING\",\n    path,\n    contentLoading: true,\n    buildLog: []\n  });\n  const techdocsStorageApi = useApi(techdocsStorageApiRef);\n  const { retry: contentReload } = useAsyncRetry(async () => {\n    dispatch({ type: \"contentLoading\" });\n    try {\n      const entityDocs = await techdocsStorageApi.getEntityDocs(\n        { kind, namespace, name },\n        path\n      );\n      dispatch({ type: \"content\", content: entityDocs, path });\n      return entityDocs;\n    } catch (e) {\n      dispatch({ type: \"content\", contentError: e, path });\n    }\n    return void 0;\n  }, [techdocsStorageApi, kind, namespace, name, path]);\n  const contentRef = useRef({\n    content: void 0,\n    reload: () => {\n    }\n  });\n  contentRef.current = { content: state.content, reload: contentReload };\n  useAsync(async () => {\n    dispatch({ type: \"sync\", state: \"CHECKING\" });\n    const buildingTimeout = setTimeout(() => {\n      dispatch({ type: \"sync\", state: \"BUILDING\" });\n    }, 1e3);\n    try {\n      const result = await techdocsStorageApi.syncEntityDocs(\n        {\n          kind,\n          namespace,\n          name\n        },\n        (log) => {\n          dispatch({ type: \"buildLog\", log });\n        }\n      );\n      switch (result) {\n        case \"updated\":\n          if (!contentRef.current.content) {\n            contentRef.current.reload();\n            dispatch({ type: \"sync\", state: \"BUILD_READY_RELOAD\" });\n          } else {\n            dispatch({ type: \"sync\", state: \"BUILD_READY\" });\n          }\n          break;\n        case \"cached\":\n          dispatch({ type: \"sync\", state: \"UP_TO_DATE\" });\n          break;\n        default:\n          dispatch({\n            type: \"sync\",\n            state: \"ERROR\",\n            syncError: new Error(\"Unexpected return state\")\n          });\n          break;\n      }\n    } catch (e) {\n      dispatch({ type: \"sync\", state: \"ERROR\", syncError: e });\n    } finally {\n      clearTimeout(buildingTimeout);\n    }\n  }, [kind, name, namespace, techdocsStorageApi, dispatch, contentRef]);\n  const displayState = useMemo(\n    () => calculateDisplayState({\n      activeSyncState: state.activeSyncState,\n      contentLoading: state.contentLoading,\n      content: state.content\n    }),\n    [state.activeSyncState, state.content, state.contentLoading]\n  );\n  return {\n    state: displayState,\n    contentReload,\n    path: state.path,\n    content: state.content,\n    contentErrorMessage: (_a = state.contentError) == null ? void 0 : _a.toString(),\n    syncErrorMessage: (_b = state.syncError) == null ? void 0 : _b.toString(),\n    buildLog: state.buildLog\n  };\n}\n\nconst TechDocsReaderContext = createContext({});\nconst useTechDocsReader = () => useContext(TechDocsReaderContext);\nconst TechDocsReaderProvider = (props) => {\n  const { children } = props;\n  const { \"*\": path = \"\" } = useParams();\n  const { entityRef } = useTechDocsReaderPage();\n  const { kind, namespace, name } = entityRef;\n  const value = useReaderState(kind, namespace, name, path);\n  return /* @__PURE__ */ React.createElement(TechDocsReaderContext.Provider, { value }, children instanceof Function ? children(value) : children);\n};\nconst withTechDocsReaderProvider = (Component) => (props) => /* @__PURE__ */ React.createElement(TechDocsReaderProvider, null, /* @__PURE__ */ React.createElement(Component, { ...props }));\n\nconst isTechDocsSearchResult = (option) => {\n  return option == null ? void 0 : option.document;\n};\nconst TechDocsSearchBar = (props) => {\n  const { entityId, entityTitle, debounceTime = 150 } = props;\n  const [open, setOpen] = useState(false);\n  const navigate = useNavigate();\n  const {\n    setFilters,\n    result: { loading, value: searchVal }\n  } = useSearch();\n  const [options, setOptions] = useState([]);\n  useEffect(() => {\n    let mounted = true;\n    if (mounted && searchVal) {\n      const searchResults = searchVal.results.slice(0, 10);\n      setOptions(searchResults);\n    }\n    return () => {\n      mounted = false;\n    };\n  }, [loading, searchVal]);\n  const { kind, name, namespace } = entityId;\n  useEffect(() => {\n    setFilters((prevFilters) => {\n      return {\n        ...prevFilters,\n        kind,\n        namespace,\n        name\n      };\n    });\n  }, [kind, namespace, name, setFilters]);\n  const handleSelection = (_, selection) => {\n    if (isTechDocsSearchResult(selection)) {\n      const { location } = selection.document;\n      navigate(location);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\n    SearchAutocomplete,\n    {\n      \"data-testid\": \"techdocs-search-bar\",\n      size: \"small\",\n      open,\n      getOptionLabel: () => \"\",\n      filterOptions: (x) => {\n        return x;\n      },\n      onClose: () => {\n        setOpen(false);\n      },\n      onFocus: () => {\n        setOpen(true);\n      },\n      onChange: handleSelection,\n      blurOnSelect: true,\n      noOptionsText: \"No results found\",\n      value: null,\n      options,\n      renderOption: ({ document, highlight }) => /* @__PURE__ */ React.createElement(\n        TechDocsSearchResultListItem,\n        {\n          result: document,\n          lineClamp: 3,\n          asListItem: false,\n          asLink: false,\n          title: document.title,\n          highlight\n        }\n      ),\n      loading,\n      inputDebounceTime: debounceTime,\n      inputPlaceholder: `Search ${entityTitle || entityId.name} docs`,\n      freeSolo: false\n    }\n  );\n};\nconst TechDocsSearch = (props) => {\n  const initialState = {\n    term: \"\",\n    types: [\"techdocs\"],\n    pageCursor: \"\",\n    filters: props.entityId\n  };\n  return /* @__PURE__ */ React.createElement(SearchContextProvider, { initialState }, /* @__PURE__ */ React.createElement(TechDocsSearchBar, { ...props }));\n};\n\nconst useDrawerStyles = makeStyles(\n  (theme) => createStyles({\n    paper: {\n      width: \"100%\",\n      [theme.breakpoints.up(\"sm\")]: {\n        width: \"75%\"\n      },\n      [theme.breakpoints.up(\"md\")]: {\n        width: \"50%\"\n      },\n      padding: theme.spacing(2.5)\n    },\n    root: {\n      height: \"100%\",\n      overflow: \"hidden\"\n    },\n    logs: {\n      background: theme.palette.background.default\n    }\n  })\n);\nconst TechDocsBuildLogsDrawerContent = ({\n  buildLog,\n  onClose\n}) => {\n  const classes = useDrawerStyles();\n  const logText = buildLog.length === 0 ? \"Waiting for logs...\" : buildLog.join(\"\\n\");\n  return /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      direction: \"column\",\n      className: classes.root,\n      spacing: 0,\n      wrap: \"nowrap\"\n    },\n    /* @__PURE__ */ React.createElement(\n      Grid,\n      {\n        item: true,\n        container: true,\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        spacing: 0,\n        wrap: \"nowrap\"\n      },\n      /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\" }, \"Build Details\"),\n      /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          key: \"dismiss\",\n          title: \"Close the drawer\",\n          onClick: onClose,\n          color: \"inherit\"\n        },\n        /* @__PURE__ */ React.createElement(Close, null)\n      )\n    ),\n    /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true }, /* @__PURE__ */ React.createElement(LogViewer, { text: logText, classes: { root: classes.logs } }))\n  );\n};\nconst TechDocsBuildLogs = ({ buildLog }) => {\n  const classes = useDrawerStyles();\n  const [open, setOpen] = useState(false);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Button, { color: \"inherit\", onClick: () => setOpen(true) }, \"Show Build Logs\"), /* @__PURE__ */ React.createElement(\n    Drawer,\n    {\n      classes: { paper: classes.paper },\n      anchor: \"right\",\n      open,\n      onClose: () => setOpen(false)\n    },\n    /* @__PURE__ */ React.createElement(\n      TechDocsBuildLogsDrawerContent,\n      {\n        buildLog,\n        onClose: () => setOpen(false)\n      }\n    )\n  ));\n};\n\nconst TechDocsNotFound = ({ errorMessage }) => {\n  const techdocsBuilder = useApi(configApiRef).getOptionalString(\"techdocs.builder\");\n  const analyticsApi = useAnalytics();\n  const { entityRef } = useTechDocsReaderPage();\n  const location = useLocation();\n  useEffect(() => {\n    const { pathname, search, hash } = location;\n    analyticsApi.captureEvent(\"not-found\", `${pathname}${search}${hash}`, {\n      attributes: entityRef\n    });\n  }, [analyticsApi, entityRef, location]);\n  let additionalInfo = \"\";\n  if (techdocsBuilder !== \"local\") {\n    additionalInfo = \"Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance.\";\n  }\n  return /* @__PURE__ */ React.createElement(\n    ErrorPage,\n    {\n      status: \"404\",\n      statusMessage: errorMessage || \"Documentation not found\",\n      additionalInfo\n    }\n  );\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  root: {\n    marginBottom: theme.spacing(2)\n  },\n  message: {\n    // `word-break: break-word` is deprecated, but gives legacy support to browsers not supporting `overflow-wrap` yet\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/word-break\n    wordBreak: \"break-word\",\n    overflowWrap: \"anywhere\"\n  }\n}));\nconst TechDocsStateIndicator = () => {\n  let StateAlert = null;\n  const classes = useStyles$2();\n  const {\n    state,\n    contentReload,\n    contentErrorMessage,\n    syncErrorMessage,\n    buildLog\n  } = useTechDocsReader();\n  if (state === \"INITIAL_BUILD\") {\n    StateAlert = /* @__PURE__ */ React.createElement(\n      Alert,\n      {\n        classes: { root: classes.root },\n        variant: \"outlined\",\n        severity: \"info\",\n        icon: /* @__PURE__ */ React.createElement(CircularProgress, { size: \"24px\" }),\n        action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, { buildLog })\n      },\n      \"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.\"\n    );\n  }\n  if (state === \"CONTENT_STALE_REFRESHING\") {\n    StateAlert = /* @__PURE__ */ React.createElement(\n      Alert,\n      {\n        variant: \"outlined\",\n        severity: \"info\",\n        icon: /* @__PURE__ */ React.createElement(CircularProgress, { size: \"24px\" }),\n        action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, { buildLog }),\n        classes: { root: classes.root }\n      },\n      \"A newer version of this documentation is being prepared and will be available shortly.\"\n    );\n  }\n  if (state === \"CONTENT_STALE_READY\") {\n    StateAlert = /* @__PURE__ */ React.createElement(\n      Alert,\n      {\n        variant: \"outlined\",\n        severity: \"success\",\n        action: /* @__PURE__ */ React.createElement(Button, { color: \"inherit\", onClick: () => contentReload() }, \"Refresh\"),\n        classes: { root: classes.root }\n      },\n      \"A newer version of this documentation is now available, please refresh to view.\"\n    );\n  }\n  if (state === \"CONTENT_STALE_ERROR\") {\n    StateAlert = /* @__PURE__ */ React.createElement(\n      Alert,\n      {\n        variant: \"outlined\",\n        severity: \"error\",\n        action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, { buildLog }),\n        classes: { root: classes.root, message: classes.message }\n      },\n      \"Building a newer version of this documentation failed.\",\n      \" \",\n      syncErrorMessage\n    );\n  }\n  if (state === \"CONTENT_NOT_FOUND\") {\n    StateAlert = /* @__PURE__ */ React.createElement(React.Fragment, null, syncErrorMessage && /* @__PURE__ */ React.createElement(\n      Alert,\n      {\n        variant: \"outlined\",\n        severity: \"error\",\n        action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, { buildLog }),\n        classes: { root: classes.root, message: classes.message }\n      },\n      \"Building a newer version of this documentation failed.\",\n      \" \",\n      syncErrorMessage\n    ), /* @__PURE__ */ React.createElement(TechDocsNotFound, { errorMessage: contentErrorMessage }));\n  }\n  return StateAlert;\n};\n\nconst MKDOCS_CSS = /main\\.[A-Fa-f0-9]{8}\\.min\\.css$/;\nconst GOOGLE_FONTS = /^https:\\/\\/fonts\\.googleapis\\.com/;\nconst GSTATIC_FONTS = /^https:\\/\\/fonts\\.gstatic\\.com/;\nconst isLink = (node) => node.nodeName === \"LINK\";\nconst isSafe$1 = (node) => {\n  const href = (node == null ? void 0 : node.getAttribute(\"href\")) || \"\";\n  const isMkdocsCss = href.match(MKDOCS_CSS);\n  const isGoogleFonts = href.match(GOOGLE_FONTS);\n  const isGstaticFonts = href.match(GSTATIC_FONTS);\n  return isMkdocsCss || isGoogleFonts || isGstaticFonts;\n};\nconst removeUnsafeLinks = (node) => {\n  if (isLink(node) && !isSafe$1(node)) {\n    node.remove();\n  }\n  return node;\n};\n\nconst isIframe = (node) => node.nodeName === \"IFRAME\";\nconst isSafe = (node, hosts) => {\n  const src = node.getAttribute(\"src\") || \"\";\n  try {\n    const { host } = new URL(src);\n    return hosts.includes(host);\n  } catch {\n    return false;\n  }\n};\nconst removeUnsafeIframes = (hosts) => (node) => {\n  if (isIframe(node) && !isSafe(node, hosts)) {\n    node.remove();\n  }\n  return node;\n};\n\nconst useSanitizerConfig = () => {\n  const configApi = useApi(configApiRef);\n  return useMemo(() => {\n    return configApi.getOptionalConfig(\"techdocs.sanitizer\");\n  }, [configApi]);\n};\nconst useSanitizerTransformer = () => {\n  const config = useSanitizerConfig();\n  return useCallback(\n    async (dom) => {\n      const hosts = config == null ? void 0 : config.getOptionalStringArray(\"allowedIframeHosts\");\n      DOMPurify.addHook(\"beforeSanitizeElements\", removeUnsafeLinks);\n      const tags = [\"link\"];\n      if (hosts) {\n        tags.push(\"iframe\");\n        DOMPurify.addHook(\"beforeSanitizeElements\", removeUnsafeIframes(hosts));\n      }\n      return DOMPurify.sanitize(dom.outerHTML, {\n        ADD_TAGS: tags,\n        FORBID_TAGS: [\"style\"],\n        WHOLE_DOCUMENT: true,\n        RETURN_DOM: true\n      });\n    },\n    [config]\n  );\n};\n\nvar variables = ({ theme }) => `\n/*==================  Variables  ==================*/\n/*\n  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.\n  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.\n*/\n\n:host {\n  /* FONT */\n  --md-default-fg-color: ${theme.palette.text.primary};\n  --md-default-fg-color--light: ${theme.palette.text.secondary};\n  --md-default-fg-color--lighter: ${lighten(theme.palette.text.secondary, 0.7)};\n  --md-default-fg-color--lightest: ${lighten(\n  theme.palette.text.secondary,\n  0.3\n)};\n\n  /* BACKGROUND */\n  --md-default-bg-color:${theme.palette.background.default};\n  --md-default-bg-color--light: ${theme.palette.background.paper};\n  --md-default-bg-color--lighter: ${lighten(\n  theme.palette.background.paper,\n  0.7\n)};\n  --md-default-bg-color--lightest: ${lighten(\n  theme.palette.background.paper,\n  0.3\n)};\n\n  /* PRIMARY */\n  --md-primary-fg-color: ${theme.palette.primary.main};\n  --md-primary-fg-color--light: ${theme.palette.primary.light};\n  --md-primary-fg-color--dark: ${theme.palette.primary.dark};\n  --md-primary-bg-color: ${theme.palette.primary.contrastText};\n  --md-primary-bg-color--light: ${lighten(\n  theme.palette.primary.contrastText,\n  0.7\n)};\n\n  /* ACCENT */\n  --md-accent-fg-color: var(--md-primary-fg-color);\n\n  /* SHADOW */\n  --md-shadow-z1: ${theme.shadows[1]};\n  --md-shadow-z2: ${theme.shadows[2]};\n  --md-shadow-z3: ${theme.shadows[3]};\n\n  /* EXTENSIONS */\n  --md-admonition-fg-color: var(--md-default-fg-color);\n  --md-admonition-bg-color: var(--md-default-bg-color);\n  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */\n  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z\"/></svg>');\n  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z\"/></svg>');\n  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z\"/></svg>');\n  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z\"/></svg>');\n  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>');\n  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z\"/></svg>');\n  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z\"/></svg>');\n  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z\"/></svg>');\n  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z\"/></svg>');\n  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z\"/></svg>');\n  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z\"/></svg>');\n  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z\"/></svg>');\n  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z\"/></svg>');\n  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z\"/></svg>');\n  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"/></svg>');\n  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>');\n  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z\"/></svg>');\n  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z\"/></svg>');\n  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z\"/></svg>');\n  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z\"/></svg>');\n  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z\"/></svg>');\n  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z\"/></svg>');\n  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z\"/></svg>');\n  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z\"/></svg>');\n  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z\"/></svg>');\n  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d=\"m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z\"/></svg>');\n}\n\n:host > * {\n  /* CODE */\n  --md-code-fg-color: ${theme.palette.text.primary};\n  --md-code-bg-color: ${theme.palette.background.paper};\n  --md-code-hl-color: ${alpha(theme.palette.warning.main, 0.5)};\n  --md-code-hl-keyword-color: ${theme.palette.type === \"dark\" ? theme.palette.primary.light : theme.palette.primary.dark};\n  --md-code-hl-function-color: ${theme.palette.type === \"dark\" ? theme.palette.secondary.light : theme.palette.secondary.dark};\n  --md-code-hl-string-color: ${theme.palette.type === \"dark\" ? theme.palette.success.light : theme.palette.success.dark};\n  --md-code-hl-number-color: ${theme.palette.type === \"dark\" ? theme.palette.error.light : theme.palette.error.dark};\n  --md-code-hl-constant-color: var(--md-code-hl-function-color);\n  --md-code-hl-special-color: var(--md-code-hl-function-color);\n  --md-code-hl-name-color: var(--md-code-fg-color);\n  --md-code-hl-comment-color: var(--md-default-fg-color--light);\n  --md-code-hl-generic-color: var(--md-default-fg-color--light);\n  --md-code-hl-variable-color: var(--md-default-fg-color--light);\n  --md-code-hl-operator-color: var(--md-default-fg-color--light);\n  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);\n\n  /* TYPESET */\n  --md-typeset-font-size: 1rem;\n  --md-typeset-color: var(--md-default-fg-color);\n  --md-typeset-a-color: ${theme.palette.link};\n  --md-typeset-table-color: ${theme.palette.text.primary};\n  --md-typeset-del-color: ${theme.palette.type === \"dark\" ? alpha(theme.palette.error.dark, 0.5) : alpha(theme.palette.error.light, 0.5)};\n  --md-typeset-ins-color: ${theme.palette.type === \"dark\" ? alpha(theme.palette.success.dark, 0.5) : alpha(theme.palette.success.light, 0.5)};\n  --md-typeset-mark-color: ${theme.palette.type === \"dark\" ? alpha(theme.palette.warning.dark, 0.5) : alpha(theme.palette.warning.light, 0.5)};\n}\n\n@media screen and (max-width: 76.1875em) {\n  :host > * {\n    /* TYPESET */\n    --md-typeset-font-size: .9rem;\n  }\n}\n\n@media screen and (max-width: 600px) {\n  :host > * {\n    /* TYPESET */\n    --md-typeset-font-size: .7rem;\n  }\n}\n`;\n\nvar reset = ({ theme }) => `\n/*==================  Reset  ==================*/\n\nbody {\n  --md-text-color: var(--md-default-fg-color);\n  --md-text-link-color: var(--md-accent-fg-color);\n  --md-text-font-family: ${theme.typography.fontFamily};\n  font-family: var(--md-text-font-family);\n  background-color: unset;\n}\n`;\n\nconst SIDEBAR_WIDTH = \"224px\";\nvar layout = ({ theme, sidebar }) => `\n/*==================  Layout  ==================*/\n\n/* mkdocs material v9 compat */\n.md-nav__title {\n  color: var(--md-default-fg-color);\n}\n\n.md-grid {\n  max-width: 100%;\n  margin: 0;\n}\n\n.md-nav {\n  font-size: calc(var(--md-typeset-font-size) * 0.9);\n}\n.md-nav__link {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.md-nav__icon {\n  height: 20px !important;\n  width: 20px !important;\n  margin-left:${theme.spacing(1)}px;\n}\n.md-nav__icon svg {\n  margin: 0;\n  width: 20px !important;\n  height: 20px !important;\n}\n.md-nav__icon:after {\n  width: 20px !important;\n  height: 20px !important;\n}\n\n.md-nav__item--active > .md-nav__link, a.md-nav__link--active {\n  text-decoration: underline;\n  color: var(--md-typeset-a-color);\n}\n\n.md-main__inner {\n  margin-top: 0;\n}\n\n.md-sidebar {\n  bottom: 75px;\n  position: fixed;\n  width: 16rem;\n  overflow-y: auto;\n  overflow-x: hidden;\n  scrollbar-color: rgb(193, 193, 193) #eee;\n  scrollbar-width: thin;\n}\n.md-sidebar .md-sidebar__scrollwrap {\n  width: calc(12.1rem);\n}\n.md-sidebar--secondary {\n  right: ${theme.spacing(3)}px;\n}\n.md-sidebar::-webkit-scrollbar {\n  width: 5px;\n}\n.md-sidebar::-webkit-scrollbar-button {\n  width: 5px;\n  height: 5px;\n}\n.md-sidebar::-webkit-scrollbar-track {\n  background: #eee;\n  border: 1 px solid rgb(250, 250, 250);\n  box-shadow: 0px 0px 3px #dfdfdf inset;\n  border-radius: 3px;\n}\n.md-sidebar::-webkit-scrollbar-thumb {\n  width: 5px;\n  background: rgb(193, 193, 193);\n  border: transparent;\n  border-radius: 3px;\n}\n.md-sidebar::-webkit-scrollbar-thumb:hover {\n  background: rgb(125, 125, 125);\n}\n\n.md-content {\n  max-width: calc(100% - 16rem * 2);\n  margin-left: 16rem;\n  margin-bottom: 50px;\n}\n\n.md-footer {\n  position: fixed;\n  bottom: 0px;\n  pointer-events: none;\n}\n\n.md-footer-nav__link, .md-footer__link {\n  pointer-events: all;\n}\n\n.md-footer__title {\n  background-color: unset;\n}\n.md-footer-nav__link, .md-footer__link {\n  width: 16rem;\n}\n\n.md-dialog {\n  background-color: unset;\n}\n\n@media screen and (min-width: 76.25em) {\n  .md-sidebar {\n    height: auto;\n  }\n}\n\n@media screen and (max-width: 76.1875em) {\n  .md-nav {\n    transition: none !important;\n    background-color: var(--md-default-bg-color)\n  }\n  .md-nav--primary .md-nav__title {\n    cursor: auto;\n    color: var(--md-default-fg-color);\n    font-weight: 700;\n    white-space: normal;\n    line-height: 1rem;\n    height: auto;\n    display: flex;\n    flex-flow: column;\n    row-gap: 1.6rem;\n    padding: 1.2rem .8rem .8rem;\n    background-color: var(--md-default-bg-color);\n  }\n  .md-nav--primary .md-nav__title~.md-nav__list {\n    box-shadow: none;\n  }\n  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {\n    border-top: none;\n  }\n  .md-nav--primary .md-nav__title .md-nav__button {\n    display: none;\n  }\n  .md-nav--primary .md-nav__title .md-nav__icon {\n    color: var(--md-default-fg-color);\n    position: static;\n    height: auto;\n    margin: 0 0 0 -0.2rem;\n  }\n  .md-nav--primary > .md-nav__title [for=\"none\"] {\n    padding-top: 0;\n  }\n  .md-nav--primary .md-nav__item {\n    border-top: none;\n  }\n  .md-nav--primary :is(.md-nav__title,.md-nav__item) {\n    font-size : var(--md-typeset-font-size);\n  }\n  .md-nav .md-source {\n    display: none;\n  }\n\n  .md-sidebar {\n    height: 100%;\n  }\n  .md-sidebar--primary {\n    width: 12.1rem !important;\n    z-index: 200;\n    left: ${sidebar.isPinned ? `calc(-12.1rem + ${SIDEBAR_WIDTH})` : \"calc(-12.1rem + 72px)\"} !important;\n  }\n  .md-sidebar--secondary:not([hidden]) {\n    display: none;\n  }\n\n  .md-content {\n    max-width: 100%;\n    margin-left: 0;\n  }\n\n  .md-header__button {\n    margin: 0.4rem 0;\n    margin-left: 0.4rem;\n    padding: 0;\n  }\n\n  .md-overlay {\n    left: 0;\n  }\n\n  .md-footer {\n    position: static;\n    padding-left: 0;\n  }\n  .md-footer-nav__link {\n    /* footer links begin to overlap at small sizes without setting width */\n    width: 50%;\n  }\n}\n\n@media screen and (max-width: 600px) {\n  .md-sidebar--primary {\n    left: -12.1rem !important;\n    width: 12.1rem;\n  }\n}\n\n\n@media print {\n  .md-sidebar,\n  #toggle-sidebar {\n    display: none;\n  }\n  \n  .md-content {\n    margin: 0;\n    width: 100%;\n    max-width: 100%;\n  }\n}\n`;\n\nconst headings = [\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"];\nvar typeset = ({ theme }) => `\n/*==================  Typeset  ==================*/\n\n.md-typeset {\n  font-size: var(--md-typeset-font-size);\n}\n\n${headings.reduce((style, heading) => {\n  var _a;\n  const htmlFontSize = (_a = theme.typography.htmlFontSize) != null ? _a : 16;\n  const styles = theme.typography[heading];\n  const { lineHeight, fontFamily, fontWeight, fontSize } = styles;\n  const calculate = (value) => {\n    let factor = 1;\n    if (typeof value === \"number\") {\n      factor = value / htmlFontSize * 0.6;\n    }\n    if (typeof value === \"string\") {\n      factor = value.replace(\"rem\", \"\");\n    }\n    return `calc(${factor} * var(--md-typeset-font-size))`;\n  };\n  return style.concat(`\n    .md-typeset ${heading} {\n      color: var(--md-default-fg-color);\n      line-height: ${lineHeight};\n      font-family: ${fontFamily};\n      font-weight: ${fontWeight};\n      font-size: ${calculate(fontSize)};\n    }\n  `);\n}, \"\")}\n\n.md-typeset .md-content__button {\n  color: var(--md-default-fg-color);\n}\n\n.md-typeset hr {\n  border-bottom: 0.05rem dotted ${theme.palette.divider};\n}\n\n.md-typeset details {\n  font-size: var(--md-typeset-font-size) !important;\n}\n.md-typeset details summary {\n  padding-left: 2.5rem !important;\n}\n.md-typeset details summary:before,\n.md-typeset details summary:after {\n  top: 50% !important;\n  width: 20px !important;\n  height: 20px !important;\n  transform: rotate(0deg) translateY(-50%) !important;\n}\n.md-typeset details[open] > summary:after {\n  transform: rotate(90deg) translateX(-50%) !important;\n}\n\n.md-typeset blockquote {\n  color: var(--md-default-fg-color--light);\n  border-left: 0.2rem solid var(--md-default-fg-color--light);\n}\n\n.md-typeset table:not([class]) {\n  font-size: var(--md-typeset-font-size);\n  border: 1px solid var(--md-default-fg-color);\n  border-bottom: none;\n  border-collapse: collapse;\n}\n.md-typeset table:not([class]) th {\n  font-weight: bold;\n}\n.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {\n  border-bottom: 1px solid var(--md-default-fg-color);\n}\n\n.md-typeset pre > code::-webkit-scrollbar-thumb {\n  background-color: hsla(0, 0%, 0%, 0.32);\n}\n.md-typeset pre > code::-webkit-scrollbar-thumb:hover {\n  background-color: hsla(0, 0%, 0%, 0.87);\n}\n\n.md-typeset code {\n  word-break: keep-all;\n}\n`;\n\nvar animations = () => `\n/*==================  Animations  ==================*/\n/*\n  Disable CSS animations on link colors as they lead to issues in dark mode.\n  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.\n*/\n.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {\n  transition: none;\n}\n`;\n\nvar extensions = ({ theme }) => `\n/*==================  Extensions  ==================*/\n\n/* HIGHLIGHT */\n.highlight .md-clipboard:after {\n  content: unset;\n}\n\n.highlight .nx {\n  color: ${theme.palette.type === \"dark\" ? \"#ff53a3\" : \"#ec407a\"};\n}\n\n/* CODE HILITE */\n.codehilite .gd {\n  background-color: ${theme.palette.type === \"dark\" ? \"rgba(248,81,73,0.65)\" : \"#fdd\"};\n}\n\n.codehilite .gi {\n  background-color: ${theme.palette.type === \"dark\" ? \"rgba(46,160,67,0.65)\" : \"#dfd\"};\n}\n\n/* TABBED */\n.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),\n.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),\n.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),\n.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),\n.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),\n.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),\n.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),\n.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),\n.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),\n.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),\n.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),\n.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),\n.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),\n.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),\n.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),\n.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),\n.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),\n.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),\n.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),\n.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {\n  color: var(--md-accent-fg-color);\n  border-color: var(--md-accent-fg-color);\n}\n\n/* TASK-LIST */\n.task-list-control .task-list-indicator::before {\n  background-color: ${theme.palette.action.disabledBackground};\n}\n.task-list-control [type=\"checkbox\"]:checked + .task-list-indicator:before {\n background-color: ${theme.palette.success.main};\n}\n\n/* ADMONITION */\n.admonition {\n  font-size: var(--md-typeset-font-size) !important;\n}\n.admonition .admonition-title {\n  padding-left: 2.5rem !important;\n}\n\n.admonition .admonition-title:before {\n  top: 50% !important;\n  width: 20px !important;\n  height: 20px !important;\n  transform: translateY(-50%) !important;\n}\n`;\n\nconst rules = [\n  variables,\n  reset,\n  layout,\n  typeset,\n  animations,\n  extensions\n];\n\nconst useSidebar = () => useSidebarPinState();\nconst useRuleStyles = () => {\n  const sidebar = useSidebar();\n  const theme = useTheme();\n  return useMemo(() => {\n    const options = { theme, sidebar };\n    return rules.reduce((styles, rule) => styles + rule(options), \"\");\n  }, [theme, sidebar]);\n};\nconst useStylesTransformer = () => {\n  const styles = useRuleStyles();\n  return useCallback(\n    (dom) => {\n      dom.getElementsByTagName(\"head\")[0].insertAdjacentHTML(\"beforeend\", `<style>${styles}</style>`);\n      return dom;\n    },\n    [styles]\n  );\n};\n\nconst isSvgNeedingInlining = (attrName, attrVal, apiOrigin) => {\n  const isSrcToSvg = attrName === \"src\" && attrVal.endsWith(\".svg\");\n  const isRelativeUrl = !attrVal.match(/^([a-z]*:)?\\/\\//i);\n  const pointsToOurBackend = attrVal.startsWith(apiOrigin);\n  return isSrcToSvg && (isRelativeUrl || pointsToOurBackend);\n};\nconst addBaseUrl = ({\n  techdocsStorageApi,\n  entityId,\n  path\n}) => {\n  return async (dom) => {\n    const apiOrigin = await techdocsStorageApi.getApiOrigin();\n    const updateDom = async (list, attributeName) => {\n      for (const elem of list) {\n        if (elem.hasAttribute(attributeName)) {\n          const elemAttribute = elem.getAttribute(attributeName);\n          if (!elemAttribute)\n            return;\n          const newValue = await techdocsStorageApi.getBaseUrl(\n            elemAttribute,\n            entityId,\n            path\n          );\n          if (isSvgNeedingInlining(attributeName, elemAttribute, apiOrigin)) {\n            try {\n              const svg = await fetch(newValue, { credentials: \"include\" });\n              const svgContent = await svg.text();\n              elem.setAttribute(\n                attributeName,\n                `data:image/svg+xml;base64,${btoa(\n                  unescape(encodeURIComponent(svgContent))\n                )}`\n              );\n            } catch (e) {\n              elem.setAttribute(\"alt\", `Error: ${elemAttribute}`);\n            }\n          } else {\n            elem.setAttribute(attributeName, newValue);\n          }\n        }\n      }\n    };\n    await Promise.all([\n      updateDom(dom.querySelectorAll(\"img\"), \"src\"),\n      updateDom(dom.querySelectorAll(\"script\"), \"src\"),\n      updateDom(dom.querySelectorAll(\"source\"), \"src\"),\n      updateDom(dom.querySelectorAll(\"link\"), \"href\"),\n      updateDom(dom.querySelectorAll(\"a[download]\"), \"href\")\n    ]);\n    return dom;\n  };\n};\n\nlet ReactDOMPromise;\nif (process.env.HAS_REACT_DOM_CLIENT) {\n  ReactDOMPromise = import('react-dom/client');\n} else {\n  ReactDOMPromise = import('react-dom');\n}\nfunction renderReactElement(element, root) {\n  ReactDOMPromise.then((ReactDOM) => {\n    if (\"createRoot\" in ReactDOM) {\n      ReactDOM.createRoot(root).render(element);\n    } else {\n      ReactDOM.render(element, root);\n    }\n  });\n}\n\nconst addGitFeedbackLink = (scmIntegrationsApi) => {\n  return (dom) => {\n    var _a;\n    const sourceAnchor = dom.querySelector(\n      '[title=\"Edit this page\"]'\n    );\n    if (!sourceAnchor || !sourceAnchor.href) {\n      return dom;\n    }\n    const sourceURL = new URL(sourceAnchor.href);\n    const integration = scmIntegrationsApi.byUrl(sourceURL);\n    if ((integration == null ? void 0 : integration.type) !== \"github\" && (integration == null ? void 0 : integration.type) !== \"gitlab\") {\n      return dom;\n    }\n    const title = ((_a = dom.querySelector(\"article>h1\")) == null ? void 0 : _a.childNodes[0].textContent) || \"\";\n    const issueTitle = encodeURIComponent(`Documentation Feedback: ${title}`);\n    const issueDesc = encodeURIComponent(\n      `Page source:\n${sourceAnchor.href}\n\nFeedback:`\n    );\n    const gitUrl = (integration == null ? void 0 : integration.type) === \"github\" ? replaceGithubUrlType(sourceURL.href, \"blob\") : sourceURL.href;\n    const gitInfo = parseGitUrl(gitUrl);\n    const repoPath = `/${gitInfo.organization}/${gitInfo.name}`;\n    const feedbackLink = sourceAnchor.cloneNode();\n    switch (integration == null ? void 0 : integration.type) {\n      case \"gitlab\":\n        feedbackLink.href = `${sourceURL.origin}${repoPath}/issues/new?issue[title]=${issueTitle}&issue[description]=${issueDesc}`;\n        break;\n      case \"github\":\n        feedbackLink.href = `${sourceURL.origin}${repoPath}/issues/new?title=${issueTitle}&body=${issueDesc}`;\n        break;\n      default:\n        return dom;\n    }\n    renderReactElement(React.createElement(FeedbackOutlinedIcon), feedbackLink);\n    feedbackLink.style.paddingLeft = \"5px\";\n    feedbackLink.title = \"Leave feedback for this page\";\n    feedbackLink.id = \"git-feedback-link\";\n    sourceAnchor == null ? void 0 : sourceAnchor.insertAdjacentElement(\"beforebegin\", feedbackLink);\n    return dom;\n  };\n};\n\nconst addSidebarToggle = () => {\n  return (dom) => {\n    const mkdocsToggleSidebar = dom.querySelector(\n      '.md-header label[for=\"__drawer\"]'\n    );\n    const article = dom.querySelector(\"article\");\n    if (!mkdocsToggleSidebar || !article) {\n      return dom;\n    }\n    const toggleSidebar = mkdocsToggleSidebar.cloneNode();\n    renderReactElement(React.createElement(MenuIcon), toggleSidebar);\n    toggleSidebar.id = \"toggle-sidebar\";\n    toggleSidebar.title = \"Toggle Sidebar\";\n    toggleSidebar.classList.add(\"md-content__button\");\n    toggleSidebar.style.setProperty(\"padding\", \"0 0 0 5px\");\n    toggleSidebar.style.setProperty(\"margin\", \"0.4rem 0 0.4rem 0.4rem\");\n    article == null ? void 0 : article.prepend(toggleSidebar);\n    return dom;\n  };\n};\n\nconst rewriteDocLinks = () => {\n  return (dom) => {\n    const updateDom = (list, attributeName) => {\n      Array.from(list).filter((elem) => elem.hasAttribute(attributeName)).forEach((elem) => {\n        const elemAttribute = elem.getAttribute(attributeName);\n        if (elemAttribute) {\n          if (elemAttribute.match(/^https?:\\/\\//i)) {\n            elem.setAttribute(\"target\", \"_blank\");\n          }\n          try {\n            const normalizedWindowLocation = normalizeUrl(\n              window.location.href\n            );\n            elem.setAttribute(\n              attributeName,\n              new URL(elemAttribute, normalizedWindowLocation).toString()\n            );\n          } catch (_e) {\n            elem.replaceWith(elem.textContent || elemAttribute);\n          }\n        }\n      });\n    };\n    updateDom(Array.from(dom.getElementsByTagName(\"a\")), \"href\");\n    return dom;\n  };\n};\nfunction normalizeUrl(input) {\n  const url = new URL(input);\n  if (!url.pathname.endsWith(\"/\") && !url.pathname.endsWith(\".html\")) {\n    url.pathname += \"/\";\n  }\n  return url.toString();\n}\n\nconst addLinkClickListener = ({\n  baseUrl,\n  onClick\n}) => {\n  return (dom) => {\n    Array.from(dom.getElementsByTagName(\"a\")).forEach((elem) => {\n      elem.addEventListener(\"click\", (e) => {\n        const target = elem;\n        const href = target.getAttribute(\"href\");\n        if (!href)\n          return;\n        if (href.startsWith(baseUrl) && !elem.hasAttribute(\"download\")) {\n          e.preventDefault();\n          onClick(e, href);\n        }\n      });\n    });\n    return dom;\n  };\n};\n\nconst CopyToClipboardTooltip = withStyles((theme) => ({\n  tooltip: {\n    fontSize: \"inherit\",\n    color: theme.palette.text.primary,\n    margin: 0,\n    padding: theme.spacing(0.5),\n    backgroundColor: \"transparent\",\n    boxShadow: \"none\"\n  }\n}))(Tooltip);\nconst CopyToClipboardIcon = () => /* @__PURE__ */ React.createElement(SvgIcon, null, /* @__PURE__ */ React.createElement(\"path\", { d: \"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z\" }));\nconst CopyToClipboardButton = ({ text }) => {\n  const [open, setOpen] = useState(false);\n  const [, copyToClipboard2] = useCopyToClipboard();\n  const handleClick = useCallback(() => {\n    copyToClipboard2(text);\n    setOpen(true);\n  }, [text, copyToClipboard2]);\n  const handleClose = useCallback(() => {\n    setOpen(false);\n  }, [setOpen]);\n  return /* @__PURE__ */ React.createElement(\n    CopyToClipboardTooltip,\n    {\n      title: \"Copied to clipboard\",\n      placement: \"left\",\n      open,\n      onClose: handleClose,\n      leaveDelay: 1e3\n    },\n    /* @__PURE__ */ React.createElement(\n      IconButton$1,\n      {\n        style: { color: \"inherit\" },\n        className: \"md-clipboard md-icon\",\n        onClick: handleClick\n      },\n      /* @__PURE__ */ React.createElement(CopyToClipboardIcon, null)\n    )\n  );\n};\nconst copyToClipboard = (theme) => {\n  return (dom) => {\n    var _a;\n    const codes = dom.querySelectorAll(\"pre > code\");\n    for (const code of codes) {\n      const text = code.textContent || \"\";\n      const container = document.createElement(\"div\");\n      (_a = code == null ? void 0 : code.parentElement) == null ? void 0 : _a.prepend(container);\n      renderReactElement(\n        /* @__PURE__ */ React.createElement(ThemeProvider, { theme }, /* @__PURE__ */ React.createElement(CopyToClipboardButton, { text })),\n        container\n      );\n    }\n    return dom;\n  };\n};\n\nconst removeMkdocsHeader = () => {\n  return (dom) => {\n    var _a;\n    (_a = dom.querySelector(\".md-header\")) == null ? void 0 : _a.remove();\n    return dom;\n  };\n};\n\nconst simplifyMkdocsFooter = () => {\n  return (dom) => {\n    var _a, _b;\n    (_a = dom.querySelector(\".md-footer .md-copyright\")) == null ? void 0 : _a.remove();\n    (_b = dom.querySelector(\".md-footer-copyright\")) == null ? void 0 : _b.remove();\n    return dom;\n  };\n};\n\nconst onCssReady = ({\n  onLoading,\n  onLoaded\n}) => {\n  return (dom) => {\n    onLoading();\n    dom.addEventListener(\n      SHADOW_DOM_STYLE_LOAD_EVENT,\n      function handleShadowDomStyleLoad() {\n        onLoaded();\n        dom.removeEventListener(\n          SHADOW_DOM_STYLE_LOAD_EVENT,\n          handleShadowDomStyleLoad\n        );\n      }\n    );\n    return dom;\n  };\n};\n\nconst scrollIntoNavigation = () => {\n  return (dom) => {\n    setTimeout(() => {\n      const activeNavItems = dom == null ? void 0 : dom.querySelectorAll(`li.md-nav__item--active`);\n      if (activeNavItems.length !== 0) {\n        activeNavItems.forEach((activeNavItem) => {\n          const checkbox = activeNavItem == null ? void 0 : activeNavItem.querySelector(\"input\");\n          if (!(checkbox == null ? void 0 : checkbox.checked)) {\n            checkbox == null ? void 0 : checkbox.click();\n          }\n        });\n        const lastItem = activeNavItems[activeNavItems.length - 1];\n        lastItem.scrollIntoView();\n      }\n    }, 200);\n    return dom;\n  };\n};\n\nconst transform = async (html, transformers) => {\n  let dom;\n  if (typeof html === \"string\") {\n    dom = new DOMParser().parseFromString(html, \"text/html\").documentElement;\n  } else if (html instanceof Element) {\n    dom = html;\n  } else {\n    throw new Error(\"dom is not a recognized type\");\n  }\n  for (const transformer of transformers) {\n    dom = await transformer(dom);\n  }\n  return dom;\n};\n\nfunction resolveUrlToRelative(url, baseUrl) {\n  const parsedAppUrl = new URL(baseUrl);\n  const appUrlPath = `${parsedAppUrl.origin}${parsedAppUrl.pathname.replace(\n    /\\/$/,\n    \"\"\n  )}`;\n  const relativeUrl = url.replace(appUrlPath, \"\").replace(/^\\/+/, \"\");\n  const parsedUrl = new URL(`http://localhost/${relativeUrl}`);\n  return `${parsedUrl.pathname}${parsedUrl.search}${parsedUrl.hash}`;\n}\nfunction useNavigateUrl() {\n  const navigate = useNavigate();\n  const configApi = useApi(configApiRef);\n  const appBaseUrl = configApi.getOptionalString(\"app.baseUrl\");\n  const navigateFn = useCallback(\n    (to) => {\n      let url = to;\n      if (appBaseUrl) {\n        try {\n          url = resolveUrlToRelative(to, appBaseUrl);\n        } catch (err) {\n        }\n      }\n      navigate(url);\n    },\n    [navigate, appBaseUrl]\n  );\n  return navigateFn;\n}\n\nconst MOBILE_MEDIA_QUERY = \"screen and (max-width: 76.1875em)\";\nconst useTechDocsReaderDom = (entityRef) => {\n  const navigate = useNavigateUrl();\n  const theme = useTheme();\n  const isMobileMedia = useMediaQuery(MOBILE_MEDIA_QUERY);\n  const sanitizerTransformer = useSanitizerTransformer();\n  const stylesTransformer = useStylesTransformer();\n  const analytics = useAnalytics();\n  const techdocsStorageApi = useApi(techdocsStorageApiRef);\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n  const { state, path, content: rawPage } = useTechDocsReader();\n  const [dom, setDom] = useState(null);\n  const isStyleLoading = useShadowDomStylesLoading(dom);\n  const updateSidebarPosition = useCallback(() => {\n    if (!dom)\n      return;\n    const sidebars = dom.querySelectorAll(\".md-sidebar\");\n    sidebars.forEach((element) => {\n      var _a, _b, _c;\n      if (isMobileMedia) {\n        element.style.top = \"0px\";\n      } else {\n        const page = document == null ? void 0 : document.querySelector(\".techdocs-reader-page\");\n        const pageTop = (_a = page == null ? void 0 : page.getBoundingClientRect().top) != null ? _a : 0;\n        let domTop = (_b = dom.getBoundingClientRect().top) != null ? _b : 0;\n        const tabs = dom.querySelector(\".md-container > .md-tabs\");\n        const tabsHeight = (_c = tabs == null ? void 0 : tabs.getBoundingClientRect().height) != null ? _c : 0;\n        if (domTop < pageTop) {\n          domTop = pageTop;\n        }\n        element.style.top = `${Math.max(domTop, 0) + tabsHeight}px`;\n      }\n      element.style.setProperty(\"opacity\", \"1\");\n    });\n  }, [dom, isMobileMedia]);\n  useEffect(() => {\n    window.addEventListener(\"resize\", updateSidebarPosition);\n    window.addEventListener(\"scroll\", updateSidebarPosition, true);\n    return () => {\n      window.removeEventListener(\"resize\", updateSidebarPosition);\n      window.removeEventListener(\"scroll\", updateSidebarPosition, true);\n    };\n  }, [dom, updateSidebarPosition]);\n  const updateFooterWidth = useCallback(() => {\n    if (!dom)\n      return;\n    const footer = dom.querySelector(\".md-footer\");\n    if (footer) {\n      footer.style.width = `${dom.getBoundingClientRect().width}px`;\n    }\n  }, [dom]);\n  useEffect(() => {\n    window.addEventListener(\"resize\", updateFooterWidth);\n    return () => {\n      window.removeEventListener(\"resize\", updateFooterWidth);\n    };\n  }, [dom, updateFooterWidth]);\n  useEffect(() => {\n    if (!isStyleLoading) {\n      updateFooterWidth();\n      updateSidebarPosition();\n    }\n  }, [state, isStyleLoading, updateFooterWidth, updateSidebarPosition]);\n  const preRender = useCallback(\n    (rawContent, contentPath) => transform(rawContent, [\n      sanitizerTransformer,\n      addBaseUrl({\n        techdocsStorageApi,\n        entityId: entityRef,\n        path: contentPath\n      }),\n      rewriteDocLinks(),\n      addSidebarToggle(),\n      removeMkdocsHeader(),\n      simplifyMkdocsFooter(),\n      addGitFeedbackLink(scmIntegrationsApi),\n      stylesTransformer\n    ]),\n    [\n      // only add dependencies that are in state or memorized variables to avoid unnecessary calls between re-renders\n      entityRef,\n      scmIntegrationsApi,\n      techdocsStorageApi,\n      sanitizerTransformer,\n      stylesTransformer\n    ]\n  );\n  const postRender = useCallback(\n    async (transformedElement) => transform(transformedElement, [\n      scrollIntoNavigation(),\n      copyToClipboard(theme),\n      addLinkClickListener({\n        baseUrl: window.location.origin,\n        onClick: (event, url) => {\n          var _a, _b;\n          const modifierActive = event.ctrlKey || event.metaKey;\n          const parsedUrl = new URL(url);\n          const linkText = ((_a = event.target) == null ? void 0 : _a.innerText) || url;\n          const to = url.replace(window.location.origin, \"\");\n          analytics.captureEvent(\"click\", linkText, { attributes: { to } });\n          if (parsedUrl.hash) {\n            if (modifierActive) {\n              window.open(url, \"_blank\");\n            } else {\n              navigate(url);\n              (_b = transformedElement == null ? void 0 : transformedElement.querySelector(`[id=\"${parsedUrl.hash.slice(1)}\"]`)) == null ? void 0 : _b.scrollIntoView();\n            }\n          } else {\n            if (modifierActive) {\n              window.open(url, \"_blank\");\n            } else {\n              navigate(url);\n            }\n          }\n        }\n      }),\n      // disable MkDocs drawer toggling ('for' attribute => checkbox mechanism)\n      onCssReady({\n        onLoading: () => {\n        },\n        onLoaded: () => {\n          var _a;\n          (_a = transformedElement.querySelector(\".md-nav__title\")) == null ? void 0 : _a.removeAttribute(\"for\");\n        }\n      }),\n      // hide sidebars until their positions are updated\n      onCssReady({\n        onLoading: () => {\n          const sidebars = Array.from(\n            transformedElement.querySelectorAll(\".md-sidebar\")\n          );\n          sidebars.forEach((element) => {\n            element.style.setProperty(\"opacity\", \"0\");\n          });\n        },\n        onLoaded: () => {\n        }\n      })\n    ]),\n    [theme, navigate, analytics]\n  );\n  useEffect(() => {\n    if (!rawPage)\n      return () => {\n      };\n    let shouldReplaceContent = true;\n    preRender(rawPage, path).then(async (preTransformedDomElement) => {\n      if (!(preTransformedDomElement == null ? void 0 : preTransformedDomElement.innerHTML)) {\n        return;\n      }\n      if (!shouldReplaceContent) {\n        return;\n      }\n      window.scroll({ top: 0 });\n      const postTransformedDomElement = await postRender(\n        preTransformedDomElement\n      );\n      setDom(postTransformedDomElement);\n    });\n    return () => {\n      shouldReplaceContent = false;\n    };\n  }, [rawPage, path, preRender, postRender]);\n  return dom;\n};\n\nconst TechDocsReaderPageContentAddons = () => {\n  const addons = useTechDocsAddons();\n  const { shadowRoot } = useTechDocsReaderPage();\n  const contentElement = shadowRoot == null ? void 0 : shadowRoot.querySelector(\n    '[data-md-component=\"content\"]'\n  );\n  const primarySidebarElement = shadowRoot == null ? void 0 : shadowRoot.querySelector(\n    'div[data-md-component=\"sidebar\"][data-md-type=\"navigation\"], div[data-md-component=\"navigation\"]'\n  );\n  let primarySidebarAddonLocation = primarySidebarElement == null ? void 0 : primarySidebarElement.querySelector(\n    '[data-techdocs-addons-location=\"primary sidebar\"]'\n  );\n  if (!primarySidebarAddonLocation) {\n    primarySidebarAddonLocation = document.createElement(\"div\");\n    primarySidebarAddonLocation.setAttribute(\n      \"data-techdocs-addons-location\",\n      \"primary sidebar\"\n    );\n    primarySidebarElement == null ? void 0 : primarySidebarElement.prepend(primarySidebarAddonLocation);\n  }\n  const secondarySidebarElement = shadowRoot == null ? void 0 : shadowRoot.querySelector(\n    'div[data-md-component=\"sidebar\"][data-md-type=\"toc\"], div[data-md-component=\"toc\"]'\n  );\n  let secondarySidebarAddonLocation = secondarySidebarElement == null ? void 0 : secondarySidebarElement.querySelector(\n    '[data-techdocs-addons-location=\"secondary sidebar\"]'\n  );\n  if (!secondarySidebarAddonLocation) {\n    secondarySidebarAddonLocation = document.createElement(\"div\");\n    secondarySidebarAddonLocation.setAttribute(\n      \"data-techdocs-addons-location\",\n      \"secondary sidebar\"\n    );\n    secondarySidebarElement == null ? void 0 : secondarySidebarElement.prepend(secondarySidebarAddonLocation);\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Portal, { container: primarySidebarAddonLocation }, addons.renderComponentsByLocation(TechDocsAddonLocations.PrimarySidebar)), /* @__PURE__ */ React.createElement(Portal, { container: contentElement }, addons.renderComponentsByLocation(TechDocsAddonLocations.Content)), /* @__PURE__ */ React.createElement(Portal, { container: secondarySidebarAddonLocation }, addons.renderComponentsByLocation(TechDocsAddonLocations.SecondarySidebar)));\n};\n\nconst useStyles$1 = makeStyles({\n  search: {\n    width: \"100%\",\n    \"@media (min-width: 76.1875em)\": {\n      width: \"calc(100% - 34.4rem)\",\n      margin: \"0 auto\"\n    },\n    \"@media print\": {\n      display: \"none\"\n    }\n  }\n});\nconst TechDocsReaderPageContent = withTechDocsReaderProvider(\n  (props) => {\n    var _a;\n    const { withSearch = true, onReady } = props;\n    const classes = useStyles$1();\n    const {\n      entityMetadata: { value: entityMetadata, loading: entityMetadataLoading },\n      entityRef,\n      setShadowRoot\n    } = useTechDocsReaderPage();\n    const dom = useTechDocsReaderDom(entityRef);\n    const path = window.location.pathname;\n    const hash = window.location.hash;\n    const isStyleLoading = useShadowDomStylesLoading(dom);\n    const [hashElement] = useShadowRootElements([`[id=\"${hash.slice(1)}\"]`]);\n    useEffect(() => {\n      var _a2;\n      if (isStyleLoading)\n        return;\n      if (hash) {\n        if (hashElement) {\n          hashElement.scrollIntoView();\n        }\n      } else {\n        (_a2 = document == null ? void 0 : document.querySelector(\"header\")) == null ? void 0 : _a2.scrollIntoView();\n      }\n    }, [path, hash, hashElement, isStyleLoading]);\n    const handleAppend = useCallback(\n      (newShadowRoot) => {\n        setShadowRoot(newShadowRoot);\n        if (onReady instanceof Function) {\n          onReady();\n        }\n      },\n      [setShadowRoot, onReady]\n    );\n    if (entityMetadataLoading === false && !entityMetadata)\n      return /* @__PURE__ */ React.createElement(ErrorPage, { status: \"404\", statusMessage: \"PAGE NOT FOUND\" });\n    if (!dom) {\n      return /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Grid, { container: true }, /* @__PURE__ */ React.createElement(Grid, { xs: 12, item: true }, /* @__PURE__ */ React.createElement(TechDocsStateIndicator, null))));\n    }\n    return /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Grid, { container: true }, /* @__PURE__ */ React.createElement(Grid, { xs: 12, item: true }, /* @__PURE__ */ React.createElement(TechDocsStateIndicator, null)), withSearch && /* @__PURE__ */ React.createElement(Grid, { className: classes.search, xs: \"auto\", item: true }, /* @__PURE__ */ React.createElement(\n      TechDocsSearch,\n      {\n        entityId: entityRef,\n        entityTitle: (_a = entityMetadata == null ? void 0 : entityMetadata.metadata) == null ? void 0 : _a.title\n      }\n    )), /* @__PURE__ */ React.createElement(Grid, { xs: 12, item: true }, /* @__PURE__ */ React.createElement(TechDocsShadowDom, { element: dom, onAppend: handleAppend }, /* @__PURE__ */ React.createElement(TechDocsReaderPageContentAddons, null)))));\n  }\n);\nconst Reader = TechDocsReaderPageContent;\n\nconst skeleton = /* @__PURE__ */ React.createElement(Skeleton, { animation: \"wave\", variant: \"text\", height: 40 });\nconst TechDocsReaderPageHeader = (props) => {\n  const {\n    palette: {\n      common: { white }\n    }\n  } = useTheme$1();\n  const { children } = props;\n  const addons = useTechDocsAddons();\n  const configApi = useApi(configApiRef);\n  const {\n    title,\n    setTitle,\n    subtitle,\n    setSubtitle,\n    entityRef,\n    metadata: { value: metadata, loading: metadataLoading },\n    entityMetadata: { value: entityMetadata, loading: entityMetadataLoading }\n  } = useTechDocsReaderPage();\n  useEffect(() => {\n    if (!metadata)\n      return;\n    setTitle(metadata.site_name);\n    setSubtitle(() => {\n      let { site_description } = metadata;\n      if (!site_description || site_description === \"None\") {\n        site_description = \"\";\n      }\n      return site_description;\n    });\n  }, [metadata, setTitle, setSubtitle]);\n  const appTitle = configApi.getOptional(\"app.title\") || \"Backstage\";\n  const tabTitle = [title, subtitle, appTitle].filter(Boolean).join(\" | \");\n  const { locationMetadata, spec } = entityMetadata || {};\n  const lifecycle = spec == null ? void 0 : spec.lifecycle;\n  const ownedByRelations = entityMetadata ? getEntityRelations(entityMetadata, RELATION_OWNED_BY) : [];\n  const docsRootLink = useRouteRef(rootRouteRef)();\n  const labels = /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    HeaderLabel,\n    {\n      label: capitalize((entityMetadata == null ? void 0 : entityMetadata.kind) || \"entity\"),\n      value: /* @__PURE__ */ React.createElement(\n        EntityRefLink,\n        {\n          color: \"inherit\",\n          entityRef,\n          title: entityMetadata == null ? void 0 : entityMetadata.metadata.title,\n          defaultKind: \"Component\"\n        }\n      )\n    }\n  ), ownedByRelations.length > 0 && /* @__PURE__ */ React.createElement(\n    HeaderLabel,\n    {\n      label: \"Owner\",\n      value: /* @__PURE__ */ React.createElement(\n        EntityRefLinks,\n        {\n          color: \"inherit\",\n          entityRefs: ownedByRelations,\n          defaultKind: \"group\"\n        }\n      )\n    }\n  ), lifecycle ? /* @__PURE__ */ React.createElement(HeaderLabel, { label: \"Lifecycle\", value: String(lifecycle) }) : null, locationMetadata && locationMetadata.type !== \"dir\" && locationMetadata.type !== \"file\" ? /* @__PURE__ */ React.createElement(\n    HeaderLabel,\n    {\n      label: \"\",\n      value: /* @__PURE__ */ React.createElement(\n        Grid,\n        {\n          container: true,\n          direction: \"column\",\n          alignItems: \"center\",\n          style: { color: white }\n        },\n        /* @__PURE__ */ React.createElement(Grid, { style: { padding: 0 }, item: true }, /* @__PURE__ */ React.createElement(CodeIcon, { style: { marginTop: \"-25px\" } })),\n        /* @__PURE__ */ React.createElement(Grid, { style: { padding: 0 }, item: true }, \"Source\")\n      ),\n      url: locationMetadata.target\n    }\n  ) : null);\n  const noEntMetadata = !entityMetadataLoading && entityMetadata === void 0;\n  const noTdMetadata = !metadataLoading && metadata === void 0;\n  if (noEntMetadata || noTdMetadata)\n    return null;\n  return /* @__PURE__ */ React.createElement(\n    Header,\n    {\n      type: \"Documentation\",\n      typeLink: docsRootLink,\n      title: title || skeleton,\n      subtitle: subtitle === \"\" ? void 0 : subtitle || skeleton\n    },\n    /* @__PURE__ */ React.createElement(Helmet, { titleTemplate: \"%s\" }, /* @__PURE__ */ React.createElement(\"title\", null, tabTitle)),\n    labels,\n    children,\n    addons.renderComponentsByLocation(TechDocsAddonLocations.Header)\n  );\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    gridArea: \"pageSubheader\",\n    flexDirection: \"column\",\n    minHeight: \"auto\",\n    padding: theme.spacing(3, 3, 0),\n    \"@media print\": {\n      display: \"none\"\n    }\n  }\n}));\nconst TechDocsReaderPageSubheader = (props) => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const handleClick = useCallback((event) => {\n    setAnchorEl(event.currentTarget);\n  }, []);\n  const handleClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n  const {\n    entityMetadata: { value: entityMetadata, loading: entityMetadataLoading }\n  } = useTechDocsReaderPage();\n  const addons = useTechDocsAddons();\n  const subheaderAddons = addons.renderComponentsByLocation(\n    TechDocsAddonLocations.Subheader\n  );\n  const settingsAddons = addons.renderComponentsByLocation(TechDocsAddonLocations.Settings);\n  if (!subheaderAddons && !settingsAddons)\n    return null;\n  if (entityMetadataLoading === false && !entityMetadata)\n    return null;\n  return /* @__PURE__ */ React.createElement(Toolbar, { classes, ...props.toolbarProps }, /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      display: \"flex\",\n      justifyContent: \"flex-end\",\n      width: \"100%\",\n      flexWrap: \"wrap\"\n    },\n    subheaderAddons,\n    settingsAddons ? /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Settings\" }, /* @__PURE__ */ React.createElement(\n      IconButton,\n      {\n        \"aria-controls\": \"tech-docs-reader-page-settings\",\n        \"aria-haspopup\": \"true\",\n        onClick: handleClick\n      },\n      /* @__PURE__ */ React.createElement(SettingsIcon, null)\n    )), /* @__PURE__ */ React.createElement(\n      Menu,\n      {\n        id: \"tech-docs-reader-page-settings\",\n        getContentAnchorEl: null,\n        anchorEl,\n        anchorOrigin: { vertical: \"bottom\", horizontal: \"right\" },\n        open: Boolean(anchorEl),\n        onClose: handleClose,\n        keepMounted: true\n      },\n      /* @__PURE__ */ React.createElement(\"div\", null, settingsAddons)\n    )) : null\n  ));\n};\n\nconst TechDocsReaderLayout = (props) => {\n  const { withSearch, withHeader = true } = props;\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"documentation\" }, withHeader && /* @__PURE__ */ React.createElement(TechDocsReaderPageHeader, null), /* @__PURE__ */ React.createElement(TechDocsReaderPageSubheader, null), /* @__PURE__ */ React.createElement(TechDocsReaderPageContent, { withSearch }));\n};\nconst TechDocsReaderPage = (props) => {\n  const { kind, name, namespace } = useRouteRefParams(rootDocsRouteRef);\n  const { children, entityRef = { kind, name, namespace } } = props;\n  const outlet = useOutlet();\n  if (!children) {\n    const childrenList = outlet ? Children.toArray(outlet.props.children) : [];\n    const grandChildren = childrenList.flatMap(\n      (child) => {\n        var _a, _b;\n        return (_b = (_a = child == null ? void 0 : child.props) == null ? void 0 : _a.children) != null ? _b : [];\n      }\n    );\n    const page = grandChildren.find(\n      (grandChild) => !getComponentData(grandChild, TECHDOCS_ADDONS_WRAPPER_KEY) && !getComponentData(grandChild, TECHDOCS_ADDONS_KEY)\n    );\n    return /* @__PURE__ */ React.createElement(TechDocsReaderPageProvider, { entityRef }, page || /* @__PURE__ */ React.createElement(TechDocsReaderLayout, null));\n  }\n  return /* @__PURE__ */ React.createElement(TechDocsReaderPageProvider, { entityRef }, ({ metadata, entityMetadata, onReady }) => /* @__PURE__ */ React.createElement(\"div\", { className: \"techdocs-reader-page\" }, /* @__PURE__ */ React.createElement(Page, { themeId: \"documentation\" }, children instanceof Function ? children({\n    entityRef,\n    techdocsMetadataValue: metadata.value,\n    entityMetadataValue: entityMetadata.value,\n    onReady\n  }) : children)));\n};\n\nexport { Reader as R, TechDocsReaderProvider as T, TechDocsReaderLayout as a, TechDocsReaderPageHeader as b, TechDocsReaderPageContent as c, TechDocsReaderPageSubheader as d, TechDocsSearch as e, TechDocsReaderPage as f };\n//# sourceMappingURL=TechDocsReaderPage-b432d0c4.esm.js.map\n","import React from 'react';\nimport { makeStyles, ListItemText, ListItemIcon } from '@material-ui/core';\nimport Typography from '@material-ui/core/Typography';\nimport { Link } from '@backstage/core-components';\nimport { HighlightedSearchResultText } from '@backstage/plugin-search-react';\n\nconst useStyles = makeStyles({\n  flexContainer: {\n    flexWrap: \"wrap\"\n  },\n  itemText: {\n    width: \"100%\",\n    marginBottom: \"1rem\"\n  }\n});\nconst TechDocsSearchResultListItem = (props) => {\n  const {\n    result,\n    highlight,\n    lineClamp = 5,\n    asListItem = true,\n    asLink = true,\n    title,\n    icon\n  } = props;\n  const classes = useStyles();\n  const LinkWrapper = ({ children }) => asLink ? /* @__PURE__ */ React.createElement(Link, { noTrack: true, to: result.location }, children) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  const TextItem = () => {\n    const resultTitle = (highlight == null ? void 0 : highlight.fields.title) ? /* @__PURE__ */ React.createElement(\n      HighlightedSearchResultText,\n      {\n        text: highlight.fields.title,\n        preTag: highlight.preTag,\n        postTag: highlight.postTag\n      }\n    ) : result.title;\n    const entityTitle = (highlight == null ? void 0 : highlight.fields.entityTitle) ? /* @__PURE__ */ React.createElement(\n      HighlightedSearchResultText,\n      {\n        text: highlight.fields.entityTitle,\n        preTag: highlight.preTag,\n        postTag: highlight.postTag\n      }\n    ) : result.entityTitle;\n    const resultName = (highlight == null ? void 0 : highlight.fields.name) ? /* @__PURE__ */ React.createElement(\n      HighlightedSearchResultText,\n      {\n        text: highlight.fields.name,\n        preTag: highlight.preTag,\n        postTag: highlight.postTag\n      }\n    ) : result.name;\n    if (!result)\n      return null;\n    return /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        className: classes.itemText,\n        primaryTypographyProps: { variant: \"h6\" },\n        primary: /* @__PURE__ */ React.createElement(LinkWrapper, null, title ? title : /* @__PURE__ */ React.createElement(React.Fragment, null, resultTitle, \" | \", entityTitle != null ? entityTitle : resultName, \" docs\")),\n        secondary: /* @__PURE__ */ React.createElement(\n          Typography,\n          {\n            component: \"span\",\n            style: {\n              display: \"-webkit-box\",\n              WebkitBoxOrient: \"vertical\",\n              WebkitLineClamp: lineClamp,\n              overflow: \"hidden\"\n            },\n            color: \"textSecondary\",\n            variant: \"body2\"\n          },\n          (highlight == null ? void 0 : highlight.fields.text) ? /* @__PURE__ */ React.createElement(\n            HighlightedSearchResultText,\n            {\n              text: highlight.fields.text,\n              preTag: highlight.preTag,\n              postTag: highlight.postTag\n            }\n          ) : result.text\n        )\n      }\n    );\n  };\n  const ListItemWrapper = ({ children }) => asListItem ? /* @__PURE__ */ React.createElement(React.Fragment, null, icon && /* @__PURE__ */ React.createElement(ListItemIcon, null, typeof icon === \"function\" ? icon(result) : icon), /* @__PURE__ */ React.createElement(\"div\", { className: classes.flexContainer }, children)) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  return /* @__PURE__ */ React.createElement(ListItemWrapper, null, /* @__PURE__ */ React.createElement(TextItem, null));\n};\n\nexport { TechDocsSearchResultListItem };\n//# sourceMappingURL=TechDocsSearchResultListItem-4736f829.esm.js.map\n","import { ResponseError, NotFoundError } from '@backstage/errors';\nimport { EventSourcePolyfill } from 'event-source-polyfill';\nimport { createRouteRef } from '@backstage/core-plugin-api';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass TechDocsClient {\n  constructor(options) {\n    __publicField(this, \"configApi\");\n    __publicField(this, \"discoveryApi\");\n    __publicField(this, \"fetchApi\");\n    this.configApi = options.configApi;\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = options.fetchApi;\n  }\n  async getApiOrigin() {\n    return await this.discoveryApi.getBaseUrl(\"techdocs\");\n  }\n  /**\n   * Retrieve TechDocs metadata.\n   *\n   * When docs are built, we generate a techdocs_metadata.json and store it along with the generated\n   * static files. It includes necessary data about the docs site. This method requests techdocs-backend\n   * which retrieves the TechDocs metadata.\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   */\n  async getTechDocsMetadata(entityId) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const requestUrl = `${apiOrigin}/metadata/techdocs/${namespace}/${kind}/${name}`;\n    const request = await this.fetchApi.fetch(`${requestUrl}`);\n    if (!request.ok) {\n      throw await ResponseError.fromResponse(request);\n    }\n    return await request.json();\n  }\n  /**\n   * Retrieve metadata about an entity.\n   *\n   * This method requests techdocs-backend which uses the catalog APIs to respond with filtered\n   * information required here.\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   */\n  async getEntityMetadata(entityId) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const requestUrl = `${apiOrigin}/metadata/entity/${namespace}/${kind}/${name}`;\n    const request = await this.fetchApi.fetch(`${requestUrl}`);\n    if (!request.ok) {\n      throw await ResponseError.fromResponse(request);\n    }\n    return await request.json();\n  }\n}\nclass TechDocsStorageClient {\n  constructor(options) {\n    __publicField(this, \"configApi\");\n    __publicField(this, \"discoveryApi\");\n    __publicField(this, \"identityApi\");\n    __publicField(this, \"fetchApi\");\n    this.configApi = options.configApi;\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n    this.fetchApi = options.fetchApi;\n  }\n  async getApiOrigin() {\n    return await this.discoveryApi.getBaseUrl(\"techdocs\");\n  }\n  async getStorageUrl() {\n    var _a;\n    return (_a = this.configApi.getOptionalString(\"techdocs.storageUrl\")) != null ? _a : `${await this.discoveryApi.getBaseUrl(\"techdocs\")}/static/docs`;\n  }\n  async getBuilder() {\n    return this.configApi.getString(\"techdocs.builder\");\n  }\n  /**\n   * Fetch HTML content as text for an individual docs page in an entity's docs site.\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   * @param path - The unique path to an individual docs page e.g. overview/what-is-new\n   * @returns HTML content of the docs page as string\n   * @throws Throws error when the page is not found.\n   */\n  async getEntityDocs(entityId, path) {\n    const { kind, namespace, name } = entityId;\n    const storageUrl = await this.getStorageUrl();\n    const url = `${storageUrl}/${namespace}/${kind}/${name}/${path}`;\n    const request = await this.fetchApi.fetch(\n      `${url.endsWith(\"/\") ? url : `${url}/`}index.html`\n    );\n    let errorMessage = \"\";\n    switch (request.status) {\n      case 404:\n        errorMessage = \"Page not found. \";\n        if (!path) {\n          errorMessage += \"This could be because there is no index.md file in the root of the docs directory of this repository.\";\n        }\n        throw new NotFoundError(errorMessage);\n      case 500:\n        errorMessage = \"Could not generate documentation or an error in the TechDocs backend. \";\n        throw new Error(errorMessage);\n    }\n    return request.text();\n  }\n  /**\n   * Check if docs are on the latest version and trigger rebuild if not\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   * @param logHandler - Callback to receive log messages from the build process\n   * @returns Whether documents are currently synchronized to newest version\n   * @throws Throws error on error from sync endpoint in TechDocs Backend\n   */\n  async syncEntityDocs(entityId, logHandler = () => {\n  }) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const url = `${apiOrigin}/sync/${namespace}/${kind}/${name}`;\n    const { token } = await this.identityApi.getCredentials();\n    return new Promise((resolve, reject) => {\n      const source = new EventSourcePolyfill(url, {\n        withCredentials: true,\n        headers: token ? { Authorization: `Bearer ${token}` } : {}\n      });\n      source.addEventListener(\"log\", (e) => {\n        if (e.data) {\n          logHandler(JSON.parse(e.data));\n        }\n      });\n      source.addEventListener(\"finish\", (e) => {\n        let updated = false;\n        if (e.data) {\n          ({ updated } = JSON.parse(e.data));\n        }\n        resolve(updated ? \"updated\" : \"cached\");\n      });\n      source.onerror = (e) => {\n        source.close();\n        switch (e.status) {\n          case 404:\n            reject(new NotFoundError(e.message));\n            return;\n          default:\n            reject(new Error(e.data));\n            return;\n        }\n      };\n    });\n  }\n  async getBaseUrl(oldBaseUrl, entityId, path) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const newBaseUrl = `${apiOrigin}/static/docs/${namespace}/${kind}/${name}/${path}`;\n    return new URL(\n      oldBaseUrl,\n      newBaseUrl.endsWith(\"/\") ? newBaseUrl : `${newBaseUrl}/`\n    ).toString();\n  }\n}\n\nconst rootRouteRef = createRouteRef({\n  id: \"techdocs:index-page\"\n});\nconst rootDocsRouteRef = createRouteRef({\n  id: \"techdocs:reader-page\",\n  params: [\"namespace\", \"kind\", \"name\"]\n});\nconst rootCatalogDocsRouteRef = createRouteRef({\n  id: \"techdocs:catalog-reader-view\"\n});\n\nexport { TechDocsClient as T, TechDocsStorageClient as a, rootDocsRouteRef as b, rootCatalogDocsRouteRef as c, rootRouteRef as r };\n//# sourceMappingURL=routes-691e552c.esm.js.map\n","import { useOutlet } from 'react-router-dom';\nimport React, { useState, useEffect, useCallback, cloneElement } from 'react';\nimport { Typography, Button, makeStyles, Avatar, ListItem, ListItemIcon, ListItemText, Tooltip, Grid, ListItemSecondaryAction, List, Switch, TextField, IconButton, Menu, MenuItem } from '@material-ui/core';\nimport { EmptyState, CodeSnippet, sidebarConfig, InfoCard, useSidebarPinState, Select, Page, Header, RoutedTabs } from '@backstage/core-components';\nimport Star from '@material-ui/icons/Star';\nimport { useApi, errorApiRef, SessionState, googleAuthApiRef, microsoftAuthApiRef, githubAuthApiRef, gitlabAuthApiRef, oktaAuthApiRef, bitbucketAuthApiRef, oneloginAuthApiRef, atlassianAuthApiRef, bitbucketServerAuthApiRef, configApiRef, featureFlagsApiRef, FeatureFlagState, identityApiRef, alertApiRef, appThemeApiRef, attachComponentData, useElementFilter } from '@backstage/core-plugin-api';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport useAsync from 'react-use/lib/useAsync';\nimport SignOutIcon from '@material-ui/icons/MeetingRoom';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport useObservable from 'react-use/lib/useObservable';\nimport AutoIcon from '@material-ui/icons/BrightnessAuto';\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\nimport { useTranslationRef, appLanguageApiRef } from '@backstage/core-plugin-api/alpha';\nimport { a as userSettingsTranslationRef } from './translation-bd96c6ff.esm.js';\nimport { EntityRefLinks } from '@backstage/plugin-catalog-react';\nimport Grid$1 from '@material-ui/core/Grid';\nimport Typography$1 from '@material-ui/core/Typography';\n\nconst EXAMPLE$1 = `auth:\n  providers:\n    google:\n      development:\n        clientId: \\${AUTH_GOOGLE_CLIENT_ID}\n        clientSecret: \\${AUTH_GOOGLE_CLIENT_SECRET}\n`;\nconst EmptyProviders = () => /* @__PURE__ */ React.createElement(\n  EmptyState,\n  {\n    missing: \"content\",\n    title: \"No Authentication Providers\",\n    description: \"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.\",\n    action: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"Open \", /* @__PURE__ */ React.createElement(\"code\", null, \"app-config.yaml\"), \" and make the changes as highlighted below:\"), /* @__PURE__ */ React.createElement(\n      CodeSnippet,\n      {\n        text: EXAMPLE$1,\n        language: \"yaml\",\n        showLineNumbers: true,\n        highlightedNumbers: [3, 4, 5, 6, 7, 8],\n        customStyle: { background: \"inherit\", fontSize: \"115%\" }\n      }\n    ), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"primary\",\n        href: \"https://backstage.io/docs/auth/add-auth-provider\"\n      },\n      \"Read More\"\n    ))\n  }\n);\n\nconst useStyles$3 = makeStyles((theme) => ({\n  avatar: {\n    width: ({ size }) => size,\n    height: ({ size }) => size,\n    fontSize: ({ size }) => size * 0.7,\n    border: `1px solid ${theme.palette.textSubtle}`\n  }\n}));\nconst ProviderSettingsAvatar = ({ size, picture }) => {\n  const { iconSize } = sidebarConfig;\n  const classes = useStyles$3(size ? { size } : { size: iconSize });\n  return /* @__PURE__ */ React.createElement(Avatar, { src: picture, className: classes.avatar });\n};\n\nconst emptyProfile = {};\nconst ProviderSettingsItem = (props) => {\n  const { title, description, icon: Icon, apiRef } = props;\n  const api = useApi(apiRef);\n  const errorApi = useApi(errorApiRef);\n  const [signedIn, setSignedIn] = useState(false);\n  const [profile, setProfile] = useState(emptyProfile);\n  useEffect(() => {\n    let didCancel = false;\n    const subscription = api.sessionState$().subscribe((sessionState) => {\n      if (sessionState !== SessionState.SignedIn) {\n        setProfile(emptyProfile);\n        setSignedIn(false);\n      }\n      if (!didCancel) {\n        api.getProfile({ optional: true }).then((profileResponse) => {\n          if (!didCancel) {\n            if (sessionState === SessionState.SignedIn) {\n              setSignedIn(true);\n            }\n            if (profileResponse) {\n              setProfile(profileResponse);\n            }\n          }\n        });\n      }\n    });\n    return () => {\n      didCancel = true;\n      subscription.unsubscribe();\n    };\n  }, [api]);\n  return /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Icon, null)), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: title,\n      secondary: /* @__PURE__ */ React.createElement(Tooltip, { placement: \"top\", arrow: true, title: description }, /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 6 }, /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(ProviderSettingsAvatar, { size: 48, picture: profile.picture })), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, sm: true, container: true }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true, container: true, direction: \"column\", spacing: 2 }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true }, profile.displayName && /* @__PURE__ */ React.createElement(\n        Typography,\n        {\n          variant: \"subtitle1\",\n          color: \"textPrimary\",\n          gutterBottom: true\n        },\n        profile.displayName\n      ), profile.email && /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", color: \"textSecondary\" }, profile.email), /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", color: \"textSecondary\" }, description)))))),\n      secondaryTypographyProps: { noWrap: true, style: { width: \"80%\" } }\n    }\n  ), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(\n    Tooltip,\n    {\n      placement: \"top\",\n      arrow: true,\n      title: signedIn ? `Sign out from ${title}` : `Sign in to ${title}`\n    },\n    /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"outlined\",\n        color: \"primary\",\n        onClick: () => {\n          const action = signedIn ? api.signOut() : api.signIn();\n          action.catch((error) => errorApi.post(error));\n        }\n      },\n      signedIn ? `Sign out` : `Sign in`\n    )\n  )));\n};\n\nconst DefaultProviderSettings = (props) => {\n  const { configuredProviders } = props;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, configuredProviders.includes(\"google\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"Google\",\n      description: \"Provides authentication towards Google APIs and identities\",\n      apiRef: googleAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"microsoft\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"Microsoft\",\n      description: \"Provides authentication towards Microsoft APIs and identities\",\n      apiRef: microsoftAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"github\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"GitHub\",\n      description: \"Provides authentication towards GitHub APIs\",\n      apiRef: githubAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"gitlab\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"GitLab\",\n      description: \"Provides authentication towards GitLab APIs\",\n      apiRef: gitlabAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"okta\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"Okta\",\n      description: \"Provides authentication towards Okta APIs\",\n      apiRef: oktaAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"bitbucket\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"Bitbucket\",\n      description: \"Provides authentication towards Bitbucket APIs\",\n      apiRef: bitbucketAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"onelogin\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"OneLogin\",\n      description: \"Provides authentication towards OneLogin APIs\",\n      apiRef: oneloginAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"atlassian\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"Atlassian\",\n      description: \"Provides authentication towards Atlassian APIs\",\n      apiRef: atlassianAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"bitbucketServer\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"Bitbucket Server\",\n      description: \"Provides authentication towards Bitbucket Server APIs\",\n      apiRef: bitbucketServerAuthApiRef,\n      icon: Star\n    }\n  ));\n};\n\nconst UserSettingsAuthProviders = (props) => {\n  const { providerSettings } = props;\n  const configApi = useApi(configApiRef);\n  const providersConfig = configApi.getOptionalConfig(\"auth.providers\");\n  const configuredProviders = (providersConfig == null ? void 0 : providersConfig.keys()) || [];\n  const providers = providerSettings != null ? providerSettings : /* @__PURE__ */ React.createElement(DefaultProviderSettings, { configuredProviders });\n  if (!providerSettings && !(configuredProviders == null ? void 0 : configuredProviders.length)) {\n    return /* @__PURE__ */ React.createElement(EmptyProviders, null);\n  }\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: \"Available Providers\" }, /* @__PURE__ */ React.createElement(List, { dense: true }, providers));\n};\n\nconst EXAMPLE = `import { createPlugin } from '@backstage/core-plugin-api';\n\nexport default createPlugin({\n  id: 'plugin-name',\n  featureFlags: [{ name: 'enable-example-feature' }],\n});\n`;\nconst EmptyFlags = () => /* @__PURE__ */ React.createElement(\n  EmptyState,\n  {\n    missing: \"content\",\n    title: \"No Feature Flags\",\n    description: \"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.\",\n    action: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"An example for how to add a feature flag is highlighted below:\"), /* @__PURE__ */ React.createElement(\n      CodeSnippet,\n      {\n        text: EXAMPLE,\n        language: \"typescript\",\n        showLineNumbers: true,\n        highlightedNumbers: [6],\n        customStyle: { background: \"inherit\", fontSize: \"115%\" }\n      }\n    ), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"primary\",\n        href: \"https://backstage.io/docs/api/utility-apis\"\n      },\n      \"Read More\"\n    ))\n  }\n);\n\nconst getSecondaryText = (flag) => {\n  if (flag.description) {\n    return flag.description;\n  }\n  return flag.pluginId ? `Registered in ${flag.pluginId} plugin` : \"Registered in the application\";\n};\nconst FlagItem = ({ flag, enabled, toggleHandler }) => /* @__PURE__ */ React.createElement(ListItem, { divider: true, button: true, onClick: () => toggleHandler(flag.name) }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, { placement: \"top\", arrow: true, title: enabled ? \"Disable\" : \"Enable\" }, /* @__PURE__ */ React.createElement(Switch, { color: \"primary\", checked: enabled, name: flag.name }))), /* @__PURE__ */ React.createElement(ListItemText, { primary: flag.name, secondary: getSecondaryText(flag) }));\n\nconst sortFlags = (flags, featureFlagsApi) => {\n  const activeFlags = flags.filter((flag) => featureFlagsApi.isActive(flag.name));\n  const idleFlags = flags.filter((flag) => !featureFlagsApi.isActive(flag.name));\n  return [...activeFlags, ...idleFlags];\n};\nconst UserSettingsFeatureFlags = () => {\n  const featureFlagsApi = useApi(featureFlagsApiRef);\n  const inputRef = React.useRef();\n  const initialFeatureFlags = featureFlagsApi.getRegisteredFlags();\n  const initialFeatureFlagsSorted = sortFlags(\n    initialFeatureFlags,\n    featureFlagsApi\n  );\n  const [featureFlags] = useState(initialFeatureFlagsSorted);\n  const initialFlagState = Object.fromEntries(\n    featureFlags.map(({ name }) => [name, featureFlagsApi.isActive(name)])\n  );\n  const [state, setState] = useState(initialFlagState);\n  const [filterInput, setFilterInput] = useState(\"\");\n  const toggleFlag = useCallback(\n    (flagName) => {\n      const newState = featureFlagsApi.isActive(flagName) ? FeatureFlagState.None : FeatureFlagState.Active;\n      featureFlagsApi.save({\n        states: { [flagName]: newState },\n        merge: true\n      });\n      setState((prevState) => ({\n        ...prevState,\n        [flagName]: newState === FeatureFlagState.Active\n      }));\n    },\n    [featureFlagsApi]\n  );\n  if (!featureFlags.length) {\n    return /* @__PURE__ */ React.createElement(EmptyFlags, null);\n  }\n  const clearFilterInput = () => {\n    var _a;\n    setFilterInput(\"\");\n    (_a = inputRef == null ? void 0 : inputRef.current) == null ? void 0 : _a.focus();\n  };\n  const filteredFeatureFlags = featureFlags.filter((featureFlag) => {\n    const featureFlagName = featureFlag.name.toLocaleLowerCase(\"en-US\");\n    return featureFlagName.includes(filterInput.toLocaleLowerCase(\"en-US\"));\n  });\n  const Header = () => /* @__PURE__ */ React.createElement(Grid, { container: true, style: { justifyContent: \"space-between\" } }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 6, md: 8 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\" }, \"Feature Flags\"), /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle1\" }, \"Please refresh the page when toggling feature flags\")), featureFlags.length >= 10 && /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 6, md: 4 }, /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      label: \"Filter\",\n      style: { display: \"flex\", justifyContent: \"flex-end\" },\n      inputRef: (ref) => ref && ref.focus(),\n      InputProps: {\n        ...filterInput.length && {\n          endAdornment: /* @__PURE__ */ React.createElement(\n            IconButton,\n            {\n              \"aria-label\": \"Clear filter\",\n              onClick: clearFilterInput,\n              edge: \"end\"\n            },\n            /* @__PURE__ */ React.createElement(ClearIcon, null)\n          )\n        }\n      },\n      onChange: (e) => setFilterInput(e.target.value),\n      value: filterInput\n    }\n  )));\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: /* @__PURE__ */ React.createElement(Header, null) }, /* @__PURE__ */ React.createElement(List, { dense: true }, filteredFeatureFlags.map((featureFlag) => {\n    const enabled = Boolean(state[featureFlag.name]);\n    return /* @__PURE__ */ React.createElement(\n      FlagItem,\n      {\n        key: featureFlag.name,\n        flag: featureFlag,\n        enabled,\n        toggleHandler: toggleFlag\n      }\n    );\n  })));\n};\n\nconst useUserProfile = () => {\n  var _a;\n  const identityApi = useApi(identityApiRef);\n  const alertApi = useApi(alertApiRef);\n  const { value, loading, error } = useAsync(async () => {\n    return {\n      profile: await identityApi.getProfileInfo(),\n      identity: await identityApi.getBackstageIdentity()\n    };\n  }, []);\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: `Failed to load user identity: ${error}`,\n        severity: \"error\"\n      });\n    }\n  }, [error, alertApi]);\n  if (loading || error) {\n    return {\n      profile: {},\n      displayName: \"\",\n      loading\n    };\n  }\n  return {\n    profile: value.profile,\n    backstageIdentity: value.identity,\n    displayName: (_a = value.profile.displayName) != null ? _a : value.identity.userEntityRef,\n    loading\n  };\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  avatar: {\n    width: ({ size }) => size,\n    height: ({ size }) => size,\n    fontSize: ({ size }) => size * 0.7,\n    border: `1px solid ${theme.palette.textSubtle}`\n  }\n}));\nconst UserSettingsSignInAvatar = (props) => {\n  const { size } = props;\n  const { iconSize } = sidebarConfig;\n  const classes = useStyles$2(size ? { size } : { size: iconSize });\n  const { profile } = useUserProfile();\n  return /* @__PURE__ */ React.createElement(\n    Avatar,\n    {\n      src: profile.picture,\n      className: classes.avatar,\n      alt: \"Profile picture\"\n    }\n  );\n};\n\nconst UserSettingsMenu = () => {\n  const errorApi = useApi(errorApiRef);\n  const identityApi = useApi(identityApiRef);\n  const [open, setOpen] = React.useState(false);\n  const [anchorEl, setAnchorEl] = React.useState(\n    void 0\n  );\n  const handleOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setAnchorEl(void 0);\n    setOpen(false);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      \"data-testid\": \"user-settings-menu\",\n      \"aria-label\": \"more\",\n      onClick: handleOpen\n    },\n    /* @__PURE__ */ React.createElement(MoreVertIcon, null)\n  ), /* @__PURE__ */ React.createElement(Menu, { anchorEl, open, onClose: handleClose }, /* @__PURE__ */ React.createElement(\n    MenuItem,\n    {\n      \"data-testid\": \"sign-out\",\n      onClick: () => identityApi.signOut().catch((error) => errorApi.post(error))\n    },\n    /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(SignOutIcon, null)),\n    \"Sign Out\"\n  )));\n};\n\nconst UserSettingsProfileCard = () => {\n  const { profile, displayName } = useUserProfile();\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: \"Profile\", variant: \"gridItem\" }, /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 6 }, /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(UserSettingsSignInAvatar, { size: 96 })), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, sm: true, container: true }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true, container: true, direction: \"column\", spacing: 2 }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true }, /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle1\", gutterBottom: true }, displayName), profile.email && /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", color: \"textSecondary\" }, profile.email))), /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(UserSettingsMenu, null)))));\n};\n\nconst UserSettingsPinToggle = () => {\n  const { isPinned, toggleSidebarPinState } = useSidebarPinState();\n  return /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: \"Pin Sidebar\",\n      secondary: \"Prevent the sidebar from collapsing\"\n    }\n  ), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(\n    Tooltip,\n    {\n      placement: \"top\",\n      arrow: true,\n      title: `${isPinned ? \"Unpin\" : \"Pin\"} Sidebar`\n    },\n    /* @__PURE__ */ React.createElement(\n      Switch,\n      {\n        color: \"primary\",\n        checked: isPinned,\n        onChange: () => toggleSidebarPinState(),\n        name: \"pin\",\n        inputProps: { \"aria-label\": \"Pin Sidebar Switch\" }\n      }\n    )\n  )));\n};\n\nconst ThemeIcon = ({ id, activeId, icon }) => icon ? cloneElement(icon, {\n  color: activeId === id ? \"primary\" : void 0\n}) : /* @__PURE__ */ React.createElement(AutoIcon, { color: activeId === id ? \"primary\" : void 0 });\nconst useStyles$1 = makeStyles((theme) => ({\n  container: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    width: \"100%\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    paddingBottom: 8,\n    paddingRight: 16\n  },\n  list: {\n    width: \"initial\",\n    [theme.breakpoints.down(\"xs\")]: {\n      width: \"100%\",\n      padding: `0 0 12px`\n    }\n  },\n  listItemText: {\n    paddingRight: 0,\n    paddingLeft: 0\n  },\n  listItemSecondaryAction: {\n    position: \"relative\",\n    transform: \"unset\",\n    top: \"auto\",\n    right: \"auto\",\n    paddingLeft: 16,\n    [theme.breakpoints.down(\"xs\")]: {\n      paddingLeft: 0\n    }\n  }\n}));\nconst TooltipToggleButton = ({\n  children,\n  title,\n  value,\n  ...props\n}) => /* @__PURE__ */ React.createElement(Tooltip, { placement: \"top\", arrow: true, title }, /* @__PURE__ */ React.createElement(ToggleButton, { value, ...props }, children));\nconst UserSettingsThemeToggle = () => {\n  const classes = useStyles$1();\n  const appThemeApi = useApi(appThemeApiRef);\n  const activeThemeId = useObservable(\n    appThemeApi.activeThemeId$(),\n    appThemeApi.getActiveThemeId()\n  );\n  const themeIds = appThemeApi.getInstalledThemes();\n  const { t } = useTranslationRef(userSettingsTranslationRef);\n  const handleSetTheme = (_event, newThemeId) => {\n    if (themeIds.some((it) => it.id === newThemeId)) {\n      appThemeApi.setActiveThemeId(newThemeId);\n    } else {\n      appThemeApi.setActiveThemeId(void 0);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\n    ListItem,\n    {\n      className: classes.list,\n      classes: { container: classes.container }\n    },\n    /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        className: classes.listItemText,\n        primary: t(\"themeToggle.title\"),\n        secondary: t(\"themeToggle.description\")\n      }\n    ),\n    /* @__PURE__ */ React.createElement(ListItemSecondaryAction, { className: classes.listItemSecondaryAction }, /* @__PURE__ */ React.createElement(\n      ToggleButtonGroup,\n      {\n        exclusive: true,\n        size: \"small\",\n        value: activeThemeId != null ? activeThemeId : \"auto\",\n        onChange: handleSetTheme\n      },\n      themeIds.map((theme) => {\n        const themeId = theme.id;\n        const themeIcon = theme.icon;\n        const themeTitle = theme.title || (themeId === \"light\" || themeId === \"dark\" ? t(`themeToggle.names.${themeId}`) : themeId);\n        return /* @__PURE__ */ React.createElement(\n          TooltipToggleButton,\n          {\n            key: themeId,\n            title: t(\"themeToggle.select\", { theme: themeTitle }),\n            value: themeId\n          },\n          /* @__PURE__ */ React.createElement(React.Fragment, null, themeTitle, \"\\xA0\", /* @__PURE__ */ React.createElement(\n            ThemeIcon,\n            {\n              id: themeId,\n              icon: themeIcon,\n              activeId: activeThemeId\n            }\n          ))\n        );\n      }),\n      /* @__PURE__ */ React.createElement(Tooltip, { placement: \"top\", arrow: true, title: t(\"themeToggle.selectAuto\") }, /* @__PURE__ */ React.createElement(ToggleButton, { value: \"auto\", selected: activeThemeId === void 0 }, t(\"themeToggle.names.auto\"), \"\\xA0\", /* @__PURE__ */ React.createElement(\n        AutoIcon,\n        {\n          color: activeThemeId === void 0 ? \"primary\" : void 0\n        }\n      )))\n    ))\n  );\n};\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    width: \"100%\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    paddingBottom: 8,\n    paddingRight: 16\n  },\n  list: {\n    width: \"initial\",\n    [theme.breakpoints.down(\"xs\")]: {\n      width: \"100%\",\n      padding: `0 0 12px`\n    }\n  },\n  listItemText: {\n    paddingRight: 0,\n    paddingLeft: 0\n  },\n  listItemSecondaryAction: {\n    position: \"relative\",\n    transform: \"unset\",\n    top: \"auto\",\n    right: \"auto\",\n    paddingLeft: 16,\n    [theme.breakpoints.down(\"xs\")]: {\n      paddingLeft: 0\n    }\n  }\n}));\nconst UserSettingsLanguageToggle = () => {\n  const classes = useStyles();\n  const languageApi = useApi(appLanguageApiRef);\n  const { t } = useTranslationRef(userSettingsTranslationRef);\n  const [languageObservable] = useState(() => languageApi.language$());\n  const { language: currentLanguage } = useObservable(\n    languageObservable,\n    languageApi.getLanguage()\n  );\n  const { languages } = languageApi.getAvailableLanguages();\n  if (languages.length <= 1) {\n    return null;\n  }\n  const handleSetLanguage = (newLanguage) => {\n    languageApi.setLanguage(newLanguage);\n  };\n  const getLanguageDisplayName = (language) => {\n    try {\n      const names = new Intl.DisplayNames([language], {\n        type: \"language\"\n      });\n      return names.of(language) || language;\n    } catch (err) {\n      return language;\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\n    ListItem,\n    {\n      className: classes.list,\n      classes: { container: classes.container }\n    },\n    /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        className: classes.listItemText,\n        primary: t(\"languageToggle.title\"),\n        secondary: t(\"languageToggle.description\")\n      }\n    ),\n    /* @__PURE__ */ React.createElement(ListItemSecondaryAction, { className: classes.listItemSecondaryAction }, /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        label: \"\",\n        selected: currentLanguage,\n        items: languages.map((language) => ({\n          label: getLanguageDisplayName(language),\n          value: language\n        })),\n        onChange: (selectedItems) => handleSetLanguage(selectedItems)\n      }\n    ))\n  );\n};\n\nconst UserSettingsAppearanceCard = () => {\n  const { isMobile } = useSidebarPinState();\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: \"Appearance\", variant: \"gridItem\" }, /* @__PURE__ */ React.createElement(List, { dense: true }, /* @__PURE__ */ React.createElement(UserSettingsThemeToggle, null), /* @__PURE__ */ React.createElement(UserSettingsLanguageToggle, null), !isMobile && /* @__PURE__ */ React.createElement(UserSettingsPinToggle, null)));\n};\n\nconst Contents = () => {\n  const { backstageIdentity } = useUserProfile();\n  if (!backstageIdentity) {\n    return /* @__PURE__ */ React.createElement(Typography$1, null, \"No Backstage Identity\");\n  }\n  return /* @__PURE__ */ React.createElement(Grid$1, { container: true, spacing: 1 }, /* @__PURE__ */ React.createElement(Grid$1, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"subtitle1\", gutterBottom: true }, \"User Entity:\", \" \", /* @__PURE__ */ React.createElement(EntityRefLinks, { entityRefs: [backstageIdentity.userEntityRef] }))), /* @__PURE__ */ React.createElement(Grid$1, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"subtitle1\" }, \"Ownership Entities:\", \" \", /* @__PURE__ */ React.createElement(EntityRefLinks, { entityRefs: backstageIdentity.ownershipEntityRefs }))));\n};\nconst UserSettingsIdentityCard = () => /* @__PURE__ */ React.createElement(InfoCard, { title: \"Backstage Identity\" }, /* @__PURE__ */ React.createElement(Contents, null));\n\nconst UserSettingsGeneral = () => {\n  return /* @__PURE__ */ React.createElement(Grid, { container: true, direction: \"row\", spacing: 3 }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, md: 6 }, /* @__PURE__ */ React.createElement(UserSettingsProfileCard, null)), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, md: 6 }, /* @__PURE__ */ React.createElement(UserSettingsAppearanceCard, null)), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, md: 6 }, /* @__PURE__ */ React.createElement(UserSettingsIdentityCard, null)));\n};\n\nconst LAYOUT_DATA_KEY = \"plugin.user-settings.settingsLayout\";\nconst LAYOUT_ROUTE_DATA_KEY = \"plugin.user-settings.settingsLayoutRoute\";\nconst Route = () => null;\nattachComponentData(Route, LAYOUT_ROUTE_DATA_KEY, true);\nattachComponentData(Route, \"core.gatherMountPoints\", true);\nconst SettingsLayout = (props) => {\n  const { title, children } = props;\n  const { isMobile } = useSidebarPinState();\n  const routes = useElementFilter(\n    children,\n    (elements) => elements.selectByComponentData({\n      key: LAYOUT_ROUTE_DATA_KEY,\n      withStrictError: \"Child of SettingsLayout must be an SettingsLayout.Route\"\n    }).getElements().map((child) => child.props)\n  );\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"home\" }, !isMobile && /* @__PURE__ */ React.createElement(Header, { title: title != null ? title : \"Settings\" }), /* @__PURE__ */ React.createElement(RoutedTabs, { routes }));\n};\nattachComponentData(SettingsLayout, LAYOUT_DATA_KEY, true);\nSettingsLayout.Route = Route;\n\nconst DefaultSettingsPage = (props) => {\n  const { providerSettings, tabs } = props;\n  return /* @__PURE__ */ React.createElement(SettingsLayout, null, /* @__PURE__ */ React.createElement(SettingsLayout.Route, { path: \"general\", title: \"General\" }, /* @__PURE__ */ React.createElement(UserSettingsGeneral, null)), /* @__PURE__ */ React.createElement(\n    SettingsLayout.Route,\n    {\n      path: \"auth-providers\",\n      title: \"Authentication Providers\"\n    },\n    /* @__PURE__ */ React.createElement(UserSettingsAuthProviders, { providerSettings })\n  ), /* @__PURE__ */ React.createElement(SettingsLayout.Route, { path: \"feature-flags\", title: \"Feature Flags\" }, /* @__PURE__ */ React.createElement(UserSettingsFeatureFlags, null)), tabs);\n};\n\nconst SettingsPage = (props) => {\n  const { providerSettings } = props;\n  const outlet = useOutlet();\n  const layout = useElementFilter(\n    outlet,\n    (elements) => elements.selectByComponentData({\n      key: LAYOUT_DATA_KEY\n    }).getElements()\n  );\n  const tabs = useElementFilter(\n    outlet,\n    (elements) => elements.selectByComponentData({\n      key: LAYOUT_ROUTE_DATA_KEY\n    }).getElements()\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, layout.length !== 0 && layout || /* @__PURE__ */ React.createElement(DefaultSettingsPage, { tabs, providerSettings }));\n};\n\nexport { DefaultProviderSettings as D, LAYOUT_ROUTE_DATA_KEY as L, ProviderSettingsItem as P, SettingsLayout as S, UserSettingsAuthProviders as U, SettingsPage as a, UserSettingsGeneral as b, UserSettingsProfileCard as c, UserSettingsMenu as d, UserSettingsSignInAvatar as e, UserSettingsAppearanceCard as f, UserSettingsThemeToggle as g, UserSettingsPinToggle as h, UserSettingsIdentityCard as i, UserSettingsLanguageToggle as j, UserSettingsFeatureFlags as k, useUserProfile as u };\n//# sourceMappingURL=SettingsPage-500a9808.esm.js.map\n","import { createRouteRef, createPlugin, createRoutableExtension } from '@backstage/core-plugin-api';\nimport { createTranslationRef } from '@backstage/core-plugin-api/alpha';\n\nconst settingsRouteRef = createRouteRef({\n  id: \"user-settings\"\n});\nconst userSettingsPlugin = createPlugin({\n  id: \"user-settings\",\n  routes: {\n    settingsPage: settingsRouteRef\n  }\n});\nconst UserSettingsPage = userSettingsPlugin.provide(\n  createRoutableExtension({\n    name: \"UserSettingsPage\",\n    component: () => import('./index-2ff38412.esm.js').then((m) => m.SettingsPage),\n    mountPoint: settingsRouteRef\n  })\n);\n\nconst userSettingsTranslationRef = createTranslationRef({\n  id: \"user-settings\",\n  messages: {\n    languageToggle: {\n      title: \"Language\",\n      description: \"Change the language\",\n      select: \"Select language {{language}}\"\n    },\n    themeToggle: {\n      title: \"Theme\",\n      description: \"Change the theme mode\",\n      select: \"Select theme {{theme}}\",\n      selectAuto: \"Select Auto Theme\",\n      names: {\n        light: \"Light\",\n        dark: \"Dark\",\n        auto: \"Auto\"\n      }\n    }\n  }\n});\n\nexport { UserSettingsPage as U, userSettingsTranslationRef as a, settingsRouteRef as s, userSettingsPlugin as u };\n//# sourceMappingURL=translation-bd96c6ff.esm.js.map\n","import { WebStorage } from '@backstage/core-app-api';\nimport { ResponseError } from '@backstage/errors';\nimport ObservableImpl from 'zen-observable';\nimport { s as settingsRouteRef } from './esm/translation-bd96c6ff.esm.js';\nexport { U as UserSettingsPage, u as plugin, u as userSettingsPlugin } from './esm/translation-bd96c6ff.esm.js';\nimport React from 'react';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { SidebarItem } from '@backstage/core-components';\nimport { useRouteRef, attachComponentData } from '@backstage/core-plugin-api';\nimport { L as LAYOUT_ROUTE_DATA_KEY, S as SettingsLayout } from './esm/SettingsPage-500a9808.esm.js';\nexport { D as DefaultProviderSettings, P as ProviderSettingsItem, a as Router, S as SettingsLayout, f as UserSettingsAppearanceCard, U as UserSettingsAuthProviders, k as UserSettingsFeatureFlags, b as UserSettingsGeneral, i as UserSettingsIdentityCard, j as UserSettingsLanguageToggle, d as UserSettingsMenu, h as UserSettingsPinToggle, c as UserSettingsProfileCard, e as UserSettingsSignInAvatar, g as UserSettingsThemeToggle, u as useUserProfile } from './esm/SettingsPage-500a9808.esm.js';\nimport '@backstage/core-plugin-api/alpha';\nimport 'react-router-dom';\nimport '@material-ui/core';\nimport '@material-ui/icons/Star';\nimport '@material-ui/icons/Clear';\nimport 'react-use/lib/useAsync';\nimport '@material-ui/icons/MeetingRoom';\nimport '@material-ui/icons/MoreVert';\nimport 'react-use/lib/useObservable';\nimport '@material-ui/icons/BrightnessAuto';\nimport '@material-ui/lab/ToggleButton';\nimport '@material-ui/lab/ToggleButtonGroup';\nimport '@backstage/plugin-catalog-react';\nimport '@material-ui/core/Grid';\nimport '@material-ui/core/Typography';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst JSON_HEADERS = {\n  \"Content-Type\": \"application/json; charset=utf-8\",\n  Accept: \"application/json\"\n};\nconst buckets = /* @__PURE__ */ new Map();\nclass UserSettingsStorage {\n  constructor(namespace, fetchApi, discoveryApi, errorApi, identityApi, fallback) {\n    this.namespace = namespace;\n    this.fetchApi = fetchApi;\n    this.discoveryApi = discoveryApi;\n    this.errorApi = errorApi;\n    this.identityApi = identityApi;\n    this.fallback = fallback;\n    __publicField(this, \"subscribers\", /* @__PURE__ */ new Set());\n    __publicField(this, \"observables\", /* @__PURE__ */ new Map());\n  }\n  static create(options) {\n    var _a;\n    return new UserSettingsStorage(\n      (_a = options.namespace) != null ? _a : \"default\",\n      options.fetchApi,\n      options.discoveryApi,\n      options.errorApi,\n      options.identityApi,\n      WebStorage.create({\n        namespace: options.namespace,\n        errorApi: options.errorApi\n      })\n    );\n  }\n  forBucket(name) {\n    const bucketPath = `${this.namespace}.${name}`;\n    if (!buckets.has(bucketPath)) {\n      buckets.set(\n        bucketPath,\n        new UserSettingsStorage(\n          bucketPath,\n          this.fetchApi,\n          this.discoveryApi,\n          this.errorApi,\n          this.identityApi,\n          this.fallback\n        )\n      );\n    }\n    return buckets.get(bucketPath);\n  }\n  async remove(key) {\n    const fetchUrl = await this.getFetchUrl(key);\n    const response = await this.fetchApi.fetch(fetchUrl, {\n      method: \"DELETE\"\n    });\n    if (!response.ok && response.status !== 404) {\n      throw await ResponseError.fromResponse(response);\n    }\n    this.notifyChanges({ key, presence: \"absent\" });\n  }\n  async set(key, data) {\n    if (!await this.isSignedIn()) {\n      await this.fallback.set(key, data);\n      this.notifyChanges({ key, presence: \"present\", value: data });\n      return;\n    }\n    const fetchUrl = await this.getFetchUrl(key);\n    const response = await this.fetchApi.fetch(fetchUrl, {\n      method: \"PUT\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify({ value: data })\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const { value } = await response.json();\n    this.notifyChanges({ key, value, presence: \"present\" });\n  }\n  observe$(key) {\n    if (!this.observables.has(key)) {\n      this.observables.set(\n        key,\n        new ObservableImpl((subscriber) => {\n          this.subscribers.add(subscriber);\n          Promise.resolve().then(() => this.get(key)).then((snapshot) => subscriber.next(snapshot)).catch((error) => this.errorApi.post(error));\n          return () => {\n            this.subscribers.delete(subscriber);\n          };\n        }).filter(({ key: messageKey }) => messageKey === key)\n      );\n    }\n    return this.observables.get(key);\n  }\n  snapshot(key) {\n    return { key, presence: \"unknown\" };\n  }\n  async get(key) {\n    if (!await this.isSignedIn()) {\n      return this.fallback.snapshot(key);\n    }\n    const fetchUrl = await this.getFetchUrl(key);\n    const response = await this.fetchApi.fetch(fetchUrl);\n    if (response.status === 404) {\n      return { key, presence: \"absent\" };\n    }\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    try {\n      const { value: rawValue } = await response.json();\n      const value = JSON.parse(JSON.stringify(rawValue), (_key, val) => {\n        if (typeof val === \"object\" && val !== null) {\n          Object.freeze(val);\n        }\n        return val;\n      });\n      return { key, presence: \"present\", value };\n    } catch {\n      return { key, presence: \"absent\" };\n    }\n  }\n  async getFetchUrl(key) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"user-settings\");\n    const encodedNamespace = encodeURIComponent(this.namespace);\n    const encodedKey = encodeURIComponent(key);\n    return `${baseUrl}/buckets/${encodedNamespace}/keys/${encodedKey}`;\n  }\n  async notifyChanges(snapshot) {\n    for (const subscription of this.subscribers) {\n      try {\n        subscription.next(snapshot);\n      } catch {\n      }\n    }\n  }\n  async isSignedIn() {\n    try {\n      const credentials = await this.identityApi.getCredentials();\n      return (credentials == null ? void 0 : credentials.token) ? true : false;\n    } catch {\n      return false;\n    }\n  }\n}\n\nconst Settings = (props) => {\n  const routePath = useRouteRef(settingsRouteRef);\n  const Icon = props.icon ? props.icon : SettingsIcon;\n  return /* @__PURE__ */ React.createElement(SidebarItem, { text: \"Settings\", to: routePath(), icon: Icon });\n};\n\nconst USER_SETTINGS_TAB_KEY = LAYOUT_ROUTE_DATA_KEY;\nconst UserSettingsTab = (props) => /* @__PURE__ */ React.createElement(SettingsLayout.Route, { path: props.path, title: props.title }, /* @__PURE__ */ React.createElement(React.Fragment, null, \"props.children\"));\nattachComponentData(UserSettingsTab, USER_SETTINGS_TAB_KEY, \"UserSettingsTab\");\n\nexport { Settings, USER_SETTINGS_TAB_KEY, UserSettingsStorage, UserSettingsTab };\n//# sourceMappingURL=index.esm.js.map\n","import { createTheme as createTheme$2, createGenerateClassName, StylesProvider, ThemeProvider } from '@material-ui/core/styles';\nimport { darken, lighten, createTheme as createTheme$1, adaptV4Theme, StyledEngineProvider, ThemeProvider as ThemeProvider$1 } from '@mui/material/styles';\nimport React from 'react';\nimport { unstable_ClassNameGenerator } from '@mui/material/className';\nimport { CssBaseline } from '@material-ui/core';\n\nconst __v5Spacing = (defaultSpacing) => (...argsInput) => {\n  const args = argsInput.length === 0 ? [1] : argsInput;\n  const transform = (argument, themeSpacing) => {\n    if (typeof argument === \"string\") {\n      return argument;\n    }\n    return themeSpacing * argument;\n  };\n  return args.map((argument) => {\n    const output = transform(argument, defaultSpacing);\n    return typeof output === \"number\" ? `${output}px` : output;\n  }).join(\" \");\n};\nfunction adaptV5CssBaselineOverride(theme, overrides) {\n  if (!overrides || typeof overrides === \"string\") {\n    return void 0;\n  }\n  const styles = typeof overrides === \"function\" ? overrides(theme) : overrides;\n  if (styles) {\n    return { \"@global\": styles };\n  }\n  return void 0;\n}\nfunction adaptV5Override(theme, overrides) {\n  if (!overrides || typeof overrides === \"string\") {\n    return void 0;\n  }\n  if (typeof overrides === \"object\") {\n    const _theme = { ...theme };\n    const defaultSpacing = theme.spacing(1);\n    if (typeof defaultSpacing === \"number\") {\n      _theme.spacing = __v5Spacing(defaultSpacing);\n    }\n    return Object.fromEntries(\n      Object.entries(overrides).map(([className, style]) => {\n        if (typeof style === \"function\") {\n          return [className, style({ theme: _theme })];\n        }\n        return [className, style];\n      })\n    );\n  }\n  return overrides;\n}\nconst stateStyleKeyPattern = /^&.Mui-([\\w-]+)$/;\nfunction extractV5StateOverrides(overrides) {\n  let output = overrides;\n  if (!overrides || typeof overrides !== \"object\") {\n    return output;\n  }\n  for (const className of Object.keys(overrides)) {\n    const styles = overrides[className];\n    if (!styles || typeof styles !== \"object\") {\n      continue;\n    }\n    for (const _styleKey of Object.keys(styles)) {\n      const styleKey = _styleKey;\n      const match = styleKey.match(stateStyleKeyPattern);\n      if (match) {\n        const [, state] = match;\n        const { [styleKey]: stateStyles, ...restStyles } = styles;\n        if (stateStyles) {\n          output = {\n            ...output,\n            [className]: restStyles,\n            [state]: stateStyles\n          };\n        }\n      }\n    }\n  }\n  return output;\n}\nfunction transformV5ComponentThemesToV4(theme, components = {}) {\n  const overrides = {};\n  const props = {};\n  for (const name of Object.keys(components)) {\n    const component = components[name];\n    if (!component) {\n      continue;\n    }\n    if (\"styleOverrides\" in component) {\n      if (name === \"MuiCssBaseline\") {\n        overrides[name] = adaptV5CssBaselineOverride(\n          theme,\n          component.styleOverrides\n        );\n      } else {\n        overrides[name] = extractV5StateOverrides(\n          adaptV5Override(theme, component.styleOverrides)\n        );\n      }\n    }\n    if (\"defaultProps\" in component) {\n      props[name] = component.defaultProps;\n    }\n  }\n  return { overrides, props };\n}\n\nconst shapes = {\n  wave: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`,\n  wave2: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`,\n  round: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`\n};\nconst colorVariants = {\n  darkGrey: [\"#171717\", \"#383838\"],\n  marineBlue: [\"#006D8F\", \"#0049A1\"],\n  veryBlue: [\"#0027AF\", \"#270094\"],\n  rubyRed: [\"#98002B\", \"#8D1134\"],\n  toastyOrange: [\"#BE2200\", \"#A41D00\"],\n  purpleSky: [\"#8912CA\", \"#3E00EA\"],\n  eveningSea: [\"#00FFF2\", \"#035355\"],\n  teal: [\"#005B4B\"],\n  pinkSea: [\"#C8077A\", \"#C2297D\"],\n  greens: [\"#4BB8A5\", \"#187656\"]\n};\nfunction genPageTheme(props) {\n  var _a;\n  const { colors, shape, options } = props;\n  const gradientColors = colors.length === 1 ? [colors[0], colors[0]] : colors;\n  const gradient = `linear-gradient(90deg, ${gradientColors.join(\", \")})`;\n  const backgroundImage = `${shape},  ${gradient}`;\n  const fontColor = (_a = options == null ? void 0 : options.fontColor) != null ? _a : \"#FFFFFF\";\n  return {\n    colors,\n    shape,\n    backgroundImage,\n    fontColor\n  };\n}\nconst pageTheme = {\n  home: genPageTheme({ colors: colorVariants.teal, shape: shapes.wave }),\n  documentation: genPageTheme({\n    colors: colorVariants.pinkSea,\n    shape: shapes.wave2\n  }),\n  tool: genPageTheme({ colors: colorVariants.purpleSky, shape: shapes.round }),\n  service: genPageTheme({\n    colors: colorVariants.marineBlue,\n    shape: shapes.wave\n  }),\n  website: genPageTheme({ colors: colorVariants.veryBlue, shape: shapes.wave }),\n  library: genPageTheme({ colors: colorVariants.rubyRed, shape: shapes.wave }),\n  other: genPageTheme({ colors: colorVariants.darkGrey, shape: shapes.wave }),\n  app: genPageTheme({ colors: colorVariants.toastyOrange, shape: shapes.wave }),\n  apis: genPageTheme({ colors: colorVariants.teal, shape: shapes.wave2 }),\n  card: genPageTheme({ colors: colorVariants.greens, shape: shapes.wave })\n};\n\nconst DEFAULT_HTML_FONT_SIZE = 16;\nconst DEFAULT_FONT_FAMILY = '\"Helvetica Neue\", Helvetica, Roboto, Arial, sans-serif';\nconst DEFAULT_PAGE_THEME = \"home\";\nfunction createBaseThemeOptions(options) {\n  const {\n    palette,\n    htmlFontSize = DEFAULT_HTML_FONT_SIZE,\n    fontFamily = DEFAULT_FONT_FAMILY,\n    defaultPageTheme = DEFAULT_PAGE_THEME,\n    pageTheme: pageTheme$1 = pageTheme,\n    typography\n  } = options;\n  if (!pageTheme$1[defaultPageTheme]) {\n    throw new Error(`${defaultPageTheme} is not defined in pageTheme.`);\n  }\n  const defaultTypography = {\n    htmlFontSize,\n    fontFamily,\n    h1: {\n      fontSize: 54,\n      fontWeight: 700,\n      marginBottom: 10\n    },\n    h2: {\n      fontSize: 40,\n      fontWeight: 700,\n      marginBottom: 8\n    },\n    h3: {\n      fontSize: 32,\n      fontWeight: 700,\n      marginBottom: 6\n    },\n    h4: {\n      fontWeight: 700,\n      fontSize: 28,\n      marginBottom: 6\n    },\n    h5: {\n      fontWeight: 700,\n      fontSize: 24,\n      marginBottom: 4\n    },\n    h6: {\n      fontWeight: 700,\n      fontSize: 20,\n      marginBottom: 2\n    }\n  };\n  return {\n    palette,\n    typography: typography != null ? typography : defaultTypography,\n    page: pageTheme$1[defaultPageTheme],\n    getPageTheme: ({ themeId }) => {\n      var _a;\n      return (_a = pageTheme$1[themeId]) != null ? _a : pageTheme$1[defaultPageTheme];\n    }\n  };\n}\n\nconst defaultComponentThemes = {\n  MuiCssBaseline: {\n    styleOverrides: (theme) => ({\n      html: {\n        height: \"100%\",\n        fontFamily: theme.typography.fontFamily\n      },\n      body: {\n        height: \"100%\",\n        fontFamily: theme.typography.fontFamily,\n        overscrollBehaviorY: \"none\",\n        fontSize: \"0.875rem\",\n        lineHeight: 1.43\n      },\n      a: {\n        color: \"inherit\",\n        textDecoration: \"none\"\n      }\n    })\n  },\n  MuiGrid: {\n    defaultProps: {\n      spacing: 2\n    }\n  },\n  MuiSwitch: {\n    defaultProps: {\n      color: \"primary\"\n    }\n  },\n  MuiTableRow: {\n    styleOverrides: {\n      // Alternating row backgrounds\n      root: ({ theme }) => ({\n        \"&:nth-of-type(odd)\": {\n          backgroundColor: theme.palette.background.default\n        }\n      }),\n      // Use pointer for hoverable rows\n      hover: {\n        \"&:hover\": {\n          cursor: \"pointer\"\n        }\n      },\n      // Alternating head backgrounds\n      head: ({ theme }) => ({\n        \"&:nth-of-type(odd)\": {\n          backgroundColor: theme.palette.background.paper\n        }\n      })\n    }\n  },\n  // Tables are more dense than default mui tables\n  MuiTableCell: {\n    styleOverrides: {\n      root: ({ theme }) => ({\n        wordBreak: \"break-word\",\n        overflow: \"hidden\",\n        verticalAlign: \"middle\",\n        lineHeight: \"1\",\n        margin: 0,\n        padding: theme.spacing(3, 2, 3, 2.5),\n        borderBottom: 0\n      }),\n      sizeSmall: ({ theme }) => ({\n        padding: theme.spacing(1.5, 2, 1.5, 2.5)\n      }),\n      head: ({ theme }) => ({\n        wordBreak: \"break-word\",\n        overflow: \"hidden\",\n        color: theme.palette.textSubtle,\n        fontWeight: \"normal\",\n        lineHeight: \"1\"\n      })\n    }\n  },\n  MuiTabs: {\n    styleOverrides: {\n      // Tabs are smaller than default mui tab rows\n      root: {\n        minHeight: 24\n      }\n    }\n  },\n  MuiTab: {\n    styleOverrides: {\n      // Tabs are smaller and have a hover background\n      root: ({ theme }) => ({\n        color: theme.palette.link,\n        minHeight: 24,\n        textTransform: \"initial\",\n        letterSpacing: \"0.07em\",\n        \"&:hover\": {\n          color: darken(theme.palette.link, 0.3),\n          background: lighten(theme.palette.link, 0.95)\n        },\n        [theme.breakpoints.up(\"md\")]: {\n          minWidth: 120,\n          fontSize: theme.typography.pxToRem(14),\n          fontWeight: 500\n        }\n      }),\n      textColorPrimary: ({ theme }) => ({\n        color: theme.palette.link\n      })\n    }\n  },\n  MuiTableSortLabel: {\n    styleOverrides: {\n      // No color change on hover, just rely on the arrow showing up instead.\n      root: {\n        color: \"inherit\",\n        \"&:hover\": {\n          color: \"inherit\"\n        },\n        \"&:focus\": {\n          color: \"inherit\"\n        },\n        // Bold font for highlighting selected column\n        \"&.Mui-active\": {\n          fontWeight: \"bold\",\n          color: \"inherit\"\n        }\n      }\n    }\n  },\n  MuiListItemText: {\n    styleOverrides: {\n      dense: {\n        // Default dense list items to adding ellipsis for really long str...\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\"\n      }\n    }\n  },\n  MuiButton: {\n    styleOverrides: {\n      text: {\n        // Text buttons have less padding by default, but we want to keep the original padding\n        padding: void 0\n      }\n    }\n  },\n  MuiChip: {\n    styleOverrides: {\n      root: ({ theme }) => ({\n        // By default there's no margin, but it's usually wanted, so we add some trailing margin\n        marginRight: theme.spacing(1),\n        marginBottom: theme.spacing(1)\n      }),\n      label: ({ theme }) => ({\n        lineHeight: theme.spacing(2.5),\n        fontWeight: theme.typography.fontWeightMedium,\n        fontSize: theme.spacing(1.75)\n      }),\n      labelSmall: ({ theme }) => ({\n        fontSize: theme.spacing(1.5)\n      }),\n      deleteIcon: ({ theme }) => ({\n        width: theme.spacing(3),\n        height: theme.spacing(3),\n        margin: theme.spacing(0, 0.75, 0, -0.75)\n      }),\n      deleteIconSmall: ({ theme }) => ({\n        width: theme.spacing(2),\n        height: theme.spacing(2),\n        margin: theme.spacing(0, 0.5, 0, -0.5)\n      })\n    }\n  },\n  MuiCard: {\n    styleOverrides: {\n      root: {\n        // When cards have a forced size, such as when they are arranged in a\n        // CSS grid, the content needs to flex such that the actions (buttons\n        // etc) end up at the bottom of the card instead of just below the body\n        // contents.\n        display: \"flex\",\n        flexDirection: \"column\"\n      }\n    }\n  },\n  MuiCardHeader: {\n    styleOverrides: {\n      root: {\n        // Reduce padding between header and content\n        paddingBottom: 0\n      }\n    }\n  },\n  MuiCardContent: {\n    styleOverrides: {\n      root: {\n        // When cards have a forced size, such as when they are arranged in a\n        // CSS grid, the content needs to flex such that the actions (buttons\n        // etc) end up at the bottom of the card instead of just below the body\n        // contents.\n        flexGrow: 1,\n        \"&:last-child\": {\n          paddingBottom: void 0\n        }\n      }\n    }\n  },\n  MuiCardActions: {\n    styleOverrides: {\n      root: {\n        // We default to putting the card actions at the end\n        justifyContent: \"flex-end\"\n      }\n    }\n  },\n  MuiLink: {\n    defaultProps: {\n      underline: \"hover\"\n    }\n  },\n  MuiPaper: {\n    styleOverrides: { root: { backgroundImage: \"unset\" } }\n  }\n};\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _themes;\nclass UnifiedThemeHolder {\n  constructor(v4, v5) {\n    __privateAdd(this, _themes, /* @__PURE__ */ new Map());\n    __privateSet(this, _themes, /* @__PURE__ */ new Map());\n    if (v4) {\n      __privateGet(this, _themes).set(\"v4\", v4);\n    }\n    if (v5) {\n      __privateGet(this, _themes).set(\"v5\", v5);\n    }\n  }\n  getTheme(version) {\n    return __privateGet(this, _themes).get(version);\n  }\n}\n_themes = new WeakMap();\nfunction createUnifiedTheme(options) {\n  const themeOptions = createBaseThemeOptions(options);\n  const components = { ...defaultComponentThemes, ...options.components };\n  const v5Theme = createTheme$1({ ...themeOptions, components });\n  const v4Overrides = transformV5ComponentThemesToV4(v5Theme, components);\n  const v4Theme = { ...createTheme$2(themeOptions), ...v4Overrides };\n  return new UnifiedThemeHolder(v4Theme, v5Theme);\n}\nfunction createUnifiedThemeFromV4(options) {\n  const v5Theme = adaptV4Theme(options);\n  const v4Theme = createTheme$2(options);\n  return new UnifiedThemeHolder(v4Theme, createTheme$1(v5Theme));\n}\n\nconst palettes = {\n  light: {\n    type: \"light\",\n    mode: \"light\",\n    background: {\n      default: \"#F8F8F8\",\n      paper: \"#FFFFFF\"\n    },\n    status: {\n      ok: \"#1DB954\",\n      warning: \"#FF9800\",\n      error: \"#E22134\",\n      running: \"#1F5493\",\n      pending: \"#FFED51\",\n      aborted: \"#757575\"\n    },\n    bursts: {\n      fontColor: \"#FEFEFE\",\n      slackChannelText: \"#ddd\",\n      backgroundColor: {\n        default: \"#7C3699\"\n      },\n      gradient: {\n        linear: \"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)\"\n      }\n    },\n    primary: {\n      main: \"#1F5493\"\n    },\n    banner: {\n      info: \"#2E77D0\",\n      error: \"#E22134\",\n      text: \"#FFFFFF\",\n      link: \"#000000\",\n      closeButtonColor: \"#FFFFFF\",\n      warning: \"#FF9800\"\n    },\n    border: \"#E6E6E6\",\n    textContrast: \"#000000\",\n    textVerySubtle: \"#DDD\",\n    textSubtle: \"#6E6E6E\",\n    highlight: \"#FFFBCC\",\n    errorBackground: \"#FFEBEE\",\n    warningBackground: \"#F59B23\",\n    infoBackground: \"#ebf5ff\",\n    errorText: \"#CA001B\",\n    infoText: \"#004e8a\",\n    warningText: \"#000000\",\n    linkHover: \"#2196F3\",\n    link: \"#0A6EBE\",\n    gold: \"#FFD600\",\n    navigation: {\n      background: \"#171717\",\n      indicator: \"#9BF0E1\",\n      color: \"#b5b5b5\",\n      selectedColor: \"#FFF\",\n      navItem: {\n        hoverBackground: \"#404040\"\n      },\n      submenu: {\n        background: \"#404040\"\n      }\n    },\n    pinSidebarButton: {\n      icon: \"#181818\",\n      background: \"#BDBDBD\"\n    },\n    tabbar: {\n      indicator: \"#9BF0E1\"\n    }\n  },\n  dark: {\n    type: \"dark\",\n    mode: \"dark\",\n    background: {\n      default: \"#333333\",\n      paper: \"#424242\"\n    },\n    status: {\n      ok: \"#71CF88\",\n      warning: \"#FFB84D\",\n      error: \"#F84C55\",\n      running: \"#3488E3\",\n      pending: \"#FEF071\",\n      aborted: \"#9E9E9E\"\n    },\n    bursts: {\n      fontColor: \"#FEFEFE\",\n      slackChannelText: \"#ddd\",\n      backgroundColor: {\n        default: \"#7C3699\"\n      },\n      gradient: {\n        linear: \"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)\"\n      }\n    },\n    primary: {\n      main: \"#9CC9FF\",\n      dark: \"#82BAFD\"\n    },\n    secondary: {\n      main: \"#FF88B2\"\n    },\n    banner: {\n      info: \"#2E77D0\",\n      error: \"#E22134\",\n      text: \"#FFFFFF\",\n      link: \"#000000\",\n      closeButtonColor: \"#FFFFFF\",\n      warning: \"#FF9800\"\n    },\n    border: \"#E6E6E6\",\n    textContrast: \"#FFFFFF\",\n    textVerySubtle: \"#727272\",\n    textSubtle: \"#CCCCCC\",\n    highlight: \"#FFFBCC\",\n    errorBackground: \"#FFEBEE\",\n    warningBackground: \"#F59B23\",\n    infoBackground: \"#ebf5ff\",\n    errorText: \"#CA001B\",\n    infoText: \"#004e8a\",\n    warningText: \"#000000\",\n    linkHover: \"#82BAFD\",\n    link: \"#9CC9FF\",\n    gold: \"#FFD600\",\n    navigation: {\n      background: \"#424242\",\n      indicator: \"#9BF0E1\",\n      color: \"#b5b5b5\",\n      selectedColor: \"#FFF\",\n      navItem: {\n        hoverBackground: \"#404040\"\n      },\n      submenu: {\n        background: \"#404040\"\n      }\n    },\n    pinSidebarButton: {\n      icon: \"#404040\",\n      background: \"#BDBDBD\"\n    },\n    tabbar: {\n      indicator: \"#9BF0E1\"\n    }\n  }\n};\n\nconst themes = {\n  light: createUnifiedTheme({ palette: palettes.light }),\n  dark: createUnifiedTheme({ palette: palettes.dark })\n};\n\nunstable_ClassNameGenerator.configure((componentName) => {\n  return `v5-${componentName}`;\n});\n\nconst generateV4ClassName = createGenerateClassName({\n  productionPrefix: \"jss4-\"\n});\nfunction UnifiedThemeProvider(props) {\n  const { children, theme, noCssBaseline = false } = props;\n  const v4Theme = theme.getTheme(\"v4\");\n  const v5Theme = theme.getTheme(\"v5\");\n  let cssBaseline = void 0;\n  if (!noCssBaseline) {\n    cssBaseline = /* @__PURE__ */ React.createElement(CssBaseline, null);\n  }\n  let result = /* @__PURE__ */ React.createElement(React.Fragment, null, cssBaseline, children);\n  if (v4Theme) {\n    result = /* @__PURE__ */ React.createElement(StylesProvider, { generateClassName: generateV4ClassName }, /* @__PURE__ */ React.createElement(ThemeProvider, { theme: v4Theme }, result));\n  }\n  if (v5Theme) {\n    result = /* @__PURE__ */ React.createElement(StyledEngineProvider, { injectFirst: true }, /* @__PURE__ */ React.createElement(ThemeProvider$1, { theme: v5Theme }, result));\n  }\n  return result;\n}\n\nfunction createThemeOptions(options) {\n  var _a, _b, _c, _d;\n  return {\n    props: {\n      MuiGrid: (_b = (_a = defaultComponentThemes) == null ? void 0 : _a.MuiGrid) == null ? void 0 : _b.defaultProps,\n      MuiSwitch: (_d = (_c = defaultComponentThemes) == null ? void 0 : _c.MuiSwitch) == null ? void 0 : _d.defaultProps\n    },\n    ...createBaseThemeOptions(options)\n  };\n}\nfunction createThemeOverrides(theme) {\n  return transformV5ComponentThemesToV4(\n    // Safe but we have to make sure we don't use mui5 specific stuff in the default component themes\n    theme,\n    defaultComponentThemes\n  ).overrides;\n}\nfunction createTheme(options) {\n  const themeOptions = createThemeOptions(options);\n  const baseTheme = createTheme$2(themeOptions);\n  const overrides = createThemeOverrides(baseTheme);\n  const theme = { ...baseTheme, overrides };\n  return theme;\n}\n\nconst lightTheme = createTheme({\n  palette: palettes.light\n});\nconst darkTheme = createTheme({\n  palette: palettes.dark\n});\n\nexport { UnifiedThemeProvider, colorVariants, createBaseThemeOptions, createTheme, createThemeOptions, createThemeOverrides, createUnifiedTheme, createUnifiedThemeFromV4, darkTheme, defaultComponentThemes, genPageTheme, lightTheme, pageTheme, palettes, shapes, themes, transformV5ComponentThemesToV4 };\n//# sourceMappingURL=index.esm.js.map\n","import { createContext, useContext } from 'react';\n\nfunction getGlobalObject() {\n  if (typeof window !== \"undefined\" && window.Math === Math) {\n    return window;\n  }\n  if (typeof self !== \"undefined\" && self.Math === Math) {\n    return self;\n  }\n  return Function(\"return this\")();\n}\nconst globalObject = getGlobalObject();\nconst makeKey = (id) => `__@backstage/${id}__`;\nfunction getOrCreateGlobalSingleton(id, supplier) {\n  const key = makeKey(id);\n  let value = globalObject[key];\n  if (value) {\n    return value;\n  }\n  value = supplier();\n  globalObject[key] = value;\n  return value;\n}\n\nfunction createVersionedValueMap(versions) {\n  Object.freeze(versions);\n  const versionedValue = {\n    atVersion(version) {\n      return versions[version];\n    }\n  };\n  Object.defineProperty(versionedValue, \"$map\", {\n    configurable: true,\n    enumerable: true,\n    get() {\n      return versions;\n    }\n  });\n  return versionedValue;\n}\n\nfunction createVersionedContext(key) {\n  return getOrCreateGlobalSingleton(\n    key,\n    () => createContext(void 0)\n  );\n}\nfunction useVersionedContext(key) {\n  return useContext(createVersionedContext(key));\n}\nfunction createVersionedContextForTesting(key) {\n  return {\n    set(versions) {\n      globalThis[`__@backstage/${key}__`] = createContext(\n        createVersionedValueMap(versions)\n      );\n    },\n    reset() {\n      delete globalThis[`__@backstage/${key}__`];\n    }\n  };\n}\n\nexport { createVersionedContext, createVersionedContextForTesting, createVersionedValueMap, getOrCreateGlobalSingleton, useVersionedContext };\n//# sourceMappingURL=index.esm.js.map\n"],"names":["apis","configApi","alertApi","errorApi","identityApi","discoveryApi","oauthRequestApi","config","discovery","identity","OptionallyWrapInRouter","children","DefaultNotFoundPage","DefaultBootErrorPage","step","error","message","DefaultErrorBoundaryFallback","resetError","plugin","components","icons","themes","createApp","options","_a","_b","_c","_d","CATALOG_FILTER_EXISTS","isQueryEntitiesInitialRequest","request","pluginId","__defProp$1","__defNormalProp$1","obj","key","value","__publicField$1","DefaultApiClient","baseUrl","uri","__defProp","__defNormalProp","__publicField","CatalogClient","id","entityRef","filter","fields","order","offset","limit","after","encodedOrder","directive","entities","refCompare","a","b","aRef","bRef","response","items","i","params","orderFields","fullTextFilter","field","normalizedFullTextFilterTerm","cursor","r","compoundName","kind","namespace","name","facets","type","target","dryRun","location","exists","locationRef","l","uid","entity","errors","filters","filterItem","filterParts","v","ENTITY_STATUS_CATALOG_PROCESSING_TYPE","isApiEntity","isComponentEntity","isDomainEntity","isGroupEntity","isLocationEntity","isResourceEntity","isSystemEntity","isUserEntity","DEFAULT_NAMESPACE","ANNOTATION_VIEW_URL","ANNOTATION_EDIT_URL","ANNOTATION_KUBERNETES_API_SERVER","ANNOTATION_KUBERNETES_API_SERVER_CA","ANNOTATION_KUBERNETES_AUTH_PROVIDER","__defProp$4","__defNormalProp$4","__publicField$4","DefaultNamespaceEntityPolicy","parseRefString","ref","colonI","slashI","getCompoundEntityRef","parseEntityRef","context","defaultKind","defaultNamespace","parsed","textual","stringifyEntityRef","__defProp$3","__defNormalProp$3","__publicField$3","GroupDefaultParentEntityPolicy","parentEntityRef","group","CommonValidatorFunctions","separator","isValidPrefix","isValidSuffix","parts","$schema$b","$id$b","description$b","examples$a","type$3","required$2","additionalProperties$2","properties$2","entityEnvelopeSchema","$schema$a","$id$a","description$a","examples$9","type$2","required$1","additionalProperties$1","properties$1","entitySchema","$schema$9","$id$9","description$9","examples$8","type$1","required","additionalProperties","properties","entityMetaSchema","$schema$8","$id$8","description$8","definitions","commonSchema","compiledSchemaCache","refDependencyCandidates","throwAjvError","val","compileAjvSchema","schema","disableCache","cacheKey","cached","extraSchemas","getExtraSchemas","ajv","compiled","seen","selected","todo","current","getAllRefs","match","c","entityEnvelopeSchemaValidator","validate","data","entityKindSchemaValidator","softCandidates","e","entitySchemaValidator","KubernetesValidatorFunctions","n","defaultValidators","makeValidator","overrides","__defProp$2","__defNormalProp$2","__publicField$2","FieldFormatEntityPolicy","validators","_e","_f","_g","require2","validator","isValid","expectation","optional","k","tags","links","defaultKnownFields","NoForeignRootFieldsEntityPolicy","knownFields","SchemaValidEntityPolicy","AllEntityPolicies","policies","result","policy","output","AnyEntityPolicy","EntityPolicies","$schema$7","$id$7","description$7","examples$7","allOf$7","schema$7","ajvCompiledJsonSchemaValidator","apiEntityV1alpha1Validator","$schema$6","$id$6","description$6","examples$6","allOf$6","schema$6","componentEntityV1alpha1Validator","$schema$5","$id$5","description$5","examples$5","allOf$5","schema$5","domainEntityV1alpha1Validator","$schema$4","$id$4","description$4","examples$4","allOf$4","schema$4","groupEntityV1alpha1Validator","$schema$3","$id$3","description$3","examples$3","allOf$3","schema$3","locationEntityV1alpha1Validator","RELATION_OWNED_BY","RELATION_OWNER_OF","RELATION_CONSUMES_API","RELATION_API_CONSUMED_BY","RELATION_PROVIDES_API","RELATION_API_PROVIDED_BY","RELATION_DEPENDS_ON","RELATION_DEPENDENCY_OF","RELATION_PARENT_OF","RELATION_CHILD_OF","RELATION_MEMBER_OF","RELATION_HAS_MEMBER","RELATION_PART_OF","RELATION_HAS_PART","$schema$2","$id$2","description$2","examples$2","allOf$2","schema$2","resourceEntityV1alpha1Validator","$schema$1","$id$1","description$1","examples$1","allOf$1","schema$1","systemEntityV1alpha1Validator","$schema","$id","description","examples","allOf","userEntityV1alpha1Validator","ANNOTATION_LOCATION","ANNOTATION_ORIGIN_LOCATION","ANNOTATION_SOURCE_LOCATION","scriptProtocolPattern","parseLocationRef","splitIndex","stringifyLocationRef","getEntitySourceLocation","propsOfHumanDuration","readDurationFromConfig","root","found","prop","good","p","invalidProps","what","bad","prefix","CONFIG_KEY_PART_PATTERN","isObject","typeOf","typeName","expected","ConfigReader","fallback","configs","previousReader","filteredKeys","deprecatedKeys","reader","localKeys","fallbackKeys","fallbackValue","into","from","fallbackConfig","values","index","number","valueString","keyName","theValue","part","badKey","__defProp$l","__defNormalProp$l","__publicField$l","ApiAggregator","holders","apiRef","holder","api","ApiContext","ApiProvider","props","parentHolder","__defProp$k","__defNormalProp$k","__publicField$k","ApiResolver","factories","heap","allDeps","factory","dep","loading","impl","deps","dependent","impls","__defProp$j","__defNormalProp$j","__publicField$j","ScopePriority","ScopePriority2","ApiFactoryRegistry","scope","priority","existing","tuple","refs","showLoginPopup","resolve","reject","width","height","left","top","popup","targetOrigin","messageListener","event","authResult","done","intervalId","errMessage","__defProp$i","__defNormalProp$i","__publicField$i","warned$1","defaultJoinScopes","scopes","DefaultAuthConnector","environment","provider","joinScopes","sessionTransform","popupOptions","res","authInfo","_h","popupUrl","payload","path","query","queryString","__defProp$h","__defNormalProp$h","__publicField$h","DirectAuthConnector","hasScopes$1","searched","searchFor","SessionScopeHelper","session","sessionScopes","newScope","__defProp$g","__defNormalProp$g","__publicField$g","PublishSubject","subscriber","onNext","onError","onComplete","observer","BehaviorSubject","__defProp$f","__defNormalProp$f","__publicField$f","SessionStateTracker","isSignedIn","__defProp$e","__defNormalProp$e","__publicField$e","RefreshingAuthSessionManager","connector","defaultScopes","sessionShouldRefresh","refreshedSession","currentScopes","refreshedScopes","newSession","__defProp$d","__defNormalProp$d","__publicField$d","StaticAuthSessionManager","__defProp$c","__defNormalProp$c","__publicField$c","AuthSessionStore","manager","storageKey","sessionJson","_key","__defProp$b","__defNormalProp$b","__publicField$b","DEFAULT_PROVIDER$b","OAuth2","scopeTransform","x","backstageIdentity","expInSec","sessionManager","min","normalizedScopes","scopeList","DEFAULT_PROVIDER$a","GithubAuth","DEFAULT_PROVIDER$9","GitlabAuth","DEFAULT_PROVIDER$8","SCOPE_PREFIX$1","GoogleAuth","DEFAULT_PROVIDER$7","OKTA_OIDC_SCOPES","OKTA_SCOPE_PREFIX","OktaAuth","samlSessionSchema","DEFAULT_PROVIDER$6","SamlAuth","authSessionStore","__defProp$a","__defNormalProp$a","__publicField$a","DEFAULT_PROVIDER$5","_MicrosoftAuth","audiences","aud","audience","groups","resourceURI","MicrosoftAuth","DEFAULT_PROVIDER$4","OIDC_SCOPES","SCOPE_PREFIX","OneLoginAuth","DEFAULT_PROVIDER$3","BitbucketAuth","DEFAULT_PROVIDER$2","BitbucketServerAuth","DEFAULT_PROVIDER$1","AtlassianAuth","DEFAULT_PROVIDER","VMwareCloudAuth","__defProp$9","__defNormalProp$9","__publicField$9","AlertApiForwarder","alert","MultipleAnalyticsApi","actualApis","analyticsApi","NoOpAnalyticsApi","_event","__defProp$8","__defNormalProp$8","__publicField$8","STORAGE_KEY$1","AppThemeSelector","selector","initialThemeId","themeId","_a2","ERROR_PREFIX","UrlPatternDiscovery","pattern","urlStr","url","FrontendHostDiscovery","endpoints","defaultEndpoint","endpoint","ErrorAlerter","__defProp$7","__defNormalProp$7","__publicField$7","ErrorApiForwarder","UnhandledErrorForwarder","errorContext","__defProp$6","__defNormalProp$6","__publicField$6","validateFlagName","LocalStorageFeatureFlags","flag","state","enabled","jsonStr","json","entries","createFetchApi","middleware","m","IdentityAuthInjectorFetchMiddleware","allowUrl","headerName","headerValue","matcher","buildMatcher","token","next","input","init","buildPrefixMatcher","prefixes","trimmedPrefixes","join","right","PluginProtocolResolverFetchMiddleware","hostname","pathname","search","hash","username","password","base","authority","isUrl","FetchMiddlewares","__defProp$5","__defNormalProp$5","__publicField$5","hasScopes","moreScopess","moreScopes","OAuthPendingRequests","acc","reason","OAuthRequestManager","handler","scopeRequest","newRequests","buckets","_WebStorage","bucketPath","webStorage","presence","item","messageKey","eventKey","trimmedKey","snapshot","subscription","WebStorage","InternalAppContext","isReactRouterBeta","getExtensionContext","routes","matches","routeMatch","routeObject","routeRef","TrackNavigation","attributes","analytics","RouteTracker","routeObjects","getBasePath","readBasePath","SignInPageWrapper","Component","appIdentityProxy","setIdentityApi","basePath","AppRouter","RouterComponent","SignInPageComponent","mountPath","internalAppContext","traverseElementTree","collectors","queue","node","parent","contexts","element","nextContexts","collector","discoverer","createCollector","accumulatorFactory","visit","childDiscoverer","routeElementDiscoverer","pluginCollector","FeatureFlagged","featureFlagApi","isEnabled","MATCH_ALL_ROUTE","stringifyNode","anyNode","pluginSet","set","collectSubTree","routingV2Collector","ctx","pathProp","mountPoint","parentChildren","elementProp","newObj","extension","others","mountPointPlugin","routingV1Collector","currentObj","currentParentRouteRef","sticky","caseSensitive","currentCtxPath","routePath","featureFlagCollector","routeRefType","isRouteRef","isSubRouteRef","isExternalRouteRef","joinPaths","paths","normalized","resolveTargetRef","anyRouteRef","routePaths","routeBindings","targetRef","subRoutePath","resolvedRoute","resolvedPath","targetPath","resolveBasePath","sourceLocation","routeParents","refDiffList","matchIndex","targetSearchRef","parentPath","diffPaths","RouteResolver","appBasePath","relativeSourceLocation","encodedParams","RoutingContext","RoutingProvider","resolver","versionedValue","validateRouteParameters","notLeafRoutes","route","currentRouteRef","fullPath","j","validateRouteBindings","plugins","externalRouteRef","AppContext","AppContextProvider","appContext","mkError","thing","logDeprecation","AppIdentityProxy","targetOptions","resolveTheme","shouldPreferDark","selectedTheme","theme","darkTheme","lightTheme","useShouldPreferDarkTheme","mediaQuery","setPrefersDark","listener","AppThemeProvider","appThemeApi","useObservable","appTheme","defaultConfigLoader","defaultConfigLoaderSync","runtimeConfigJson","appConfig","windowAppConfig","ApiRegistryBuilder","ApiRegistry","resolveRouteBindings","bindRoutes","externalRoutes","targetRoutes","externalRoute","__accessCheck$2","member","msg","__privateGet$2","getter","__privateAdd$2","__privateSet$2","setter","_languages","_language$1","_subject","STORAGE_KEY","DEFAULT_LANGUAGE","_AppLanguageSelector","languages","initialLanguage","storedLanguage","language","lng","AppLanguageSelector","toInternalTranslationResource","resource","toInternalTranslationRef","__accessCheck$1","__privateGet$1","__privateAdd$1","__privateSet$1","__privateMethod","method","_loaded","_loading","_loaders","_getLoaderKey","getLoaderKey_fn","_i18n","_loader","_language","_registeredRefs","_languageChangeListeners","_changeLanguage","changeLanguage_fn","_createSnapshot","createSnapshot_fn","_registerDefaults","registerDefaults_fn","removeNulls","messages","ResourceLoader","onLoad","internalResource","entry","loader","load","_I18nextTranslationApi","i18n","loaded","resources","instance","translationRef","internalRef","loadTicket","loadResource","ticket","onChange","defaultMessages","defaultResource","I18nextTranslationApi","createLocalBaseUrl","fullUrl","overrideBaseUrlConfigs","inputConfigs","urlConfigReader","appBaseUrl","backendBaseUrl","newBackendBaseUrl","newAppBaseUrl","appOrigin","backendOrigin","maybeNewBackendBaseUrl","maybeNewAppBaseUrl","__accessCheck","__privateGet","__privateAdd","__privateSet","_getProviderCalled","useConfigLoader","configLoader","hasConfig","useAsync","noConfigNode","Progress","BootErrorPage","ThemeProvider","AppContextImpl","app","AppManager","_i","AppProvider","routesHaveBeenValidated","needsFeatureFlagRegistrationRef","routing","featureFlags","usesReactRouterBeta","loadedConfig","hasConfigApi","featureFlagsApi","registeredFlags","flagNames","f","languageApi","pluginIds","createSpecializedApp","warned","FlatRoutes","NotFoundErrorPage","isBeta","withNotFound","elements","child","AlertDisplay","setMessages","anchorOrigin","transientTimeoutMs","timeoutMs","msgs","firstMessage","timeout","newMsgs","handleClose","Alert","Close","LAST_SEEN_ONLINE_STORAGE_KEY","useLogoutDisconnectedUserEffect","enableEffect","autologoutIsEnabled","idleTimeoutSeconds","lastSeenOnlineStore","lastSeenOnline","nowSeconds","lastSeenOnlineSeconds","StillTherePrompt","idleTimer","setOpen","open","promptTimeoutMillis","remainingTime","setRemainingTime","interval","handleStillHere","seconds","DefaultTimestampStore","date","timestamp","ConditionalAutoLogout","idleTimeoutMinutes","events","useWorkerTimers","logoutIfDisconnected","promptBeforeIdleSeconds","promptOpen","setPromptOpen","remainingTimeCountdown","setRemainingTimeCountdown","promptBeforeIdleMillis","promptBeforeIdle","onPrompt","onIdle","onActive","onAction","_idleTimer","timer","defaultConfig","defaultTrackedEvents","parseConfig","_j","AutoLogout","isLogged","setIsLogged","isLoggedIn","stringToColor","str","color","extractInitials","names","firstName","lastName","useStyles$O","makeStyles","displayName","picture","customStyles","classes","styles","fontStyles","useStyles$N","isExternalUri","originalWindowOpen","newOpen","args","useBaseUrl","useBasePath","useResolvedPath","external","startsWithBasePath","getNodeText","onClick","noTrack","to","linkText","newWindow","handleClick","LinkWrapper","LinkButton","Button","CopyTextButton","text","tooltipDelay","tooltipText","ariaLabel","copyToClipboard","useCopyToClipboard","handleCopyClick","CodeSnippet","showLineNumbers","highlightedNumbers","customStyle","showCopyCodeButton","mode","dark","docco","highlightColor","lineNumber","CreateButton","title","isXSScreen","AddCircleOutline","DependencyGraphTypes","DependencyGraphTypes2","Direction2","Alignment2","Ranker2","LabelPosition2","useStyles$M","DefaultNode","setWidth","setHeight","idRef","renderedHeight","renderedWidth","padding","paddedWidth","paddedHeight","ARROW_MARKER_ID","NODE_TEST_ID","EDGE_TEST_ID","LABEL_TEST_ID","useStyles$L","renderDefault$1","Node","render","setNode","y","nodeProps","nodeRef","useStyles$K","DefaultLabel","label","useStyles$J","renderDefault","Edge","setEdge","edge","curve","showArrowHeads","points","labelProps","labelRef","createPath","d","finitePoints","point","WORKSPACE_ID","DependencyGraph","edges","nodes","renderNode","direction","align","nodeMargin","edgeMargin","rankMargin","paddingX","paddingY","acyclicer","ranker","labelPosition","labelOffset","edgeRanks","edgeWeight","renderLabel","defs","zoom","fit","svgProps","containerWidth","setContainerWidth","containerHeight","setContainerHeight","graph","graphWidth","setGraphWidth","graphHeight","setGraphHeight","graphNodes","setGraphNodes","graphEdges","setGraphEdges","maxWidth","maxHeight","minHeight","scalableHeight","containerRef","container","workspace","enableZoom","newContainerWidth","newContainerHeight","setNodesAndEdges","currentGraphNodes","currentGraphEdges","nodeId","existingNode","updateGraph","newHeight","newWidth","useStyles$I","DismissableBanner","variant","fixed","notificationsStore","rawDismissedBanners","dismissedBanners","setDismissedBanners","observedItems","currentValue","useStyles$H","EmptyStateImage","missing","useStyles$G","EmptyState","action","COMPONENT_YAML_TEMPLATE","ANNOTATION_REGEXP","ANNOTATION_YAML","ANNOTATION_LINE","line","useStyles$F","generateLineNumbers","lineCount","generateComponentYaml","annotations","annotationYaml","ann","generateDescription","isSingular","prev","curr","MissingAnnotationEmptyState","annotation","readMoreUrl","useStyles$E","flatten","headingRenderer","level","slug","inline","className","MarkdownContent","content","dialect","linkTarget","transformLinkUri","transformImageUri","getWarningTextColor","severity","getWarningBackgroundColor","useErrorOutlineStyles","ErrorOutlineStyled","ErrorOutline","ExpandMoreIconStyled","ExpandMore","useStyles$D","capitalize","s","WarningPanel","titleFormat","defaultExpanded","subTitle","Accordion","AccordionSummary","AccordionDetails","useStyles$C","ErrorList","stack","ErrorPanel","useStyles$B","ResponseErrorPanel","body","cause","errorString","requestString","messageString","stackString","jsonString","Divider","createRootElement","rootContainer","addRootElement","rootElem","usePortal","rootElemRef","existingParent","parentElem","getRootElem","STATES_LOCAL_STORAGE_KEY","useCalloutStates","states","setStates","raw","setState","newStates","useCalloutHasBeenSeen","featureId","markSeen","useShowCallout","useStyles$A","FeatureCalloutCircular","show","hide","portalElement","wrapperRef","placement","setPlacement","update","wrapperBounds","longest","borderWidth","dotLeft","dotTop","dotSize","textWidth","textLeft","textTop","useIconStyles","IconLinkVertical","disabled","href","icon","useStyles$z","HeaderIconLinkRow","link","generateGradientStops","themeType","luminance","fadeSize","fadePadding","useStyles$y","useScrollDistance","scrollLeft","scrollRight","setScroll","el","handleUpdate","useSmoothScroll","speed","minDistance","scrollTarget","setScrollTarget","startTime","frameTime","frameDuration","scrollDistance","scrollAmount","newScrollTarget","HorizontalScrollGrid","scrollStep","scrollSpeed","minScrollDistance","otherProps","handleScrollClick","forwards","useStyles$x","Lifecycle","shorthand","alpha","RealLogViewer","LogViewer","useItemStyles","LoginRequestListItem","busy","setBusy","setError","handleContinue","IconComponent","ListItemAvatar","useStyles$w","OAuthRequestDialog","_props","authRedirect","requests","handleRejectAll","useStyles$v","OverflowTooltip","hover","setHover","isMounted","useIsMounted","handleToggled","truncated","isVisible","setIsVisible","handle","LinearProgress","useStyles$u","BottomLink","SlackLink","slackChannel","ErrorBoundary","errorInfo","useStyles$t","CardActionsTopRight","withStyles","VARIANT_STYLES","InfoCard","subheader","divider","deepLink","errorBoundaryProps","headerStyle","headerProps","actionsClassName","actions","cardClassName","actionsTopRight","noPadding","titleTypographyProps","calculatedStyle","calculatedCardStyle","cardSubTitle","errProps","CardHeader","useStyles$s","defaultGaugeProps","getProgressColor","palette","inverse","max","actualMax","actualValue","Gauge","hoverRef","setHoverRef","getColor","fractional","unit","asPercentage","asActual","isHovering","setIsHovering","handleMouseOver","handleMouseOut","useStyles$r","GaugeCard","progress","gaugeProps","LinearGauge","percent","lineWidth","strokeColor","useStyles$q","createStyles","ClosedDropdown","SvgIcon","useStyles$p","OpenedDropdown","BootstrapInput","InputBase","useStyles$o","SelectComponent","multiple","placeholder","triggerReset","native","margin","setValue","isOpen","handleChange","handleOpen","previous","handleDelete","selectedValue","newValue","chip","FormControl","InputLabel","Select","MenuItem","Checkbox","noop","VerticalStepperContext","SimpleStepper","elevated","onStepChange","activeStep","stepIndex","setStepIndex","stepHistory","setStepHistory","steps","endStep","useStyles$n","RestartBtn","NextBtn","last","SkipBtn","BackBtn","SimpleStepperFooter","stepperLength","newIndex","callback","handleNext","handleBack","handleRestart","useStyles$m","SimpleStepperStep","end","muiProps","useStyles$l","StatusOK","StatusWarning","StatusError","StatusPending","StatusRunning","StatusAborted","tableTitleCellStyles","tableContentCellStyles","listStyles","listItemStyles","TitleCell","TableCell","ContentCell","MetadataTable","dense","Table","TableBody","MetadataTableItem","rest","TableRow","MetadataList","MetadataListItem","listStyle","nestedListStyle","StyledList","StyledNestedList","renderList","list","nested","toValue","renderMap","map","ItemValue","TableItem","mapToItems","info","StructuredMetadataTable","metadata","metadataItems","stringify","queryParams","parse","extractState","stateName","joinQueryString","useQueryParamState","debounceTime","searchParams","setSearchParams","searchParamsString","queryParamState","setQueryParamState","newState","oldState","DEFAULT_SUPPORT_CONFIG","useSupportConfig","supportConfig","itemConf","linkConf","useSystemIcon","Icon","BrokenImageIcon","CatalogIcon","ChatIcon","DashboardIcon","DocsIcon","EmailIcon","GitHubIcon","GroupIcon","HelpIcon","UserIcon","WarningIcon","useStyles$k","SupportIcon","SupportLink","SupportListItem","idx","SupportButton","configItems","popoverOpen","setPopoverOpen","anchorEl","setAnchorEl","isSmallScreen","onClickHandler","popoverCloseHandler","MenuList","useStyles$j","Content","stretch","restProps","useStyles$i","HeaderTabs","tabs","selectedIndex","selectedTab","setSelectedTab","_","Tabs","tab","Tab","useSelectedSubRoute","subRoutes","sortedRoutes","currentRoute","matchedRoute","foundIndex","t","RoutedTabs","navigate","headerTabs","onTabChange","tabIndex","Helmet","Route","createSubRoutesFromChildren","childrenProps","routeType","tabProps","TabbedLayout","useSubvalueCellStyles","SubvalueCell","subvalue","useFilterStyles$1","Filters","onChangeFilters","selectedFilters","setSelectedFilters","reset","TableLoadingBody","CircularProgress","tableIcons","AddBox","Check","Clear","DeleteOutline","Edit","SaveAlt","FilterList","FirstPage","LastPage","ChevronLeft","ArrowUpward","Remove","ViewColumn","extractValueByField","StyledMTableHeader","StyledMTableToolbar","useFilterStyles","useTableStyles","convertColumns","columns","column","cellStyle","cellStyleFn","rowData","rowColumn","removeDefaultValues","defaultState","defaultInitialState","TableToolbar","toolbarProps","toolbarRef","setSearch","hasFilters","selectedFiltersLength","toggleFilters","filtersClasses","onSearchChanged","searchText","emptyContent","subtitle","localization","initialState","onStateChange","tableClasses","calculatedInitialState","filtersOpen","setFiltersOpen","getFieldByTitle","titleValue","tableData","selectedFiltersArray","filterValue","fieldValue","Toolbar","hasNoRows","columnCount","Body","makeBody","constructFilters","bodyProps","filterConfig","dataValue","extractDistinctValues","distinctValues","addValue","constructSelect","lastNum","TrendLine","useStyles$h","ContentHeaderTitle","ContentHeader","TitleComponent","textAlign","renderedTitle","useStyles$g","MicDrop","useStyles$f","StackDetails","detailsOpen","setDetailsOpen","useStyles$e","ErrorPage","status","statusMessage","additionalInfo","supportUrl","support","ClickableText","StyledBox","childrenArray","firstPage","secondPage","expandablePages","currentPage","hasHiddenBreadcrumbs","pageLink","drawerWidthClosed","iconPadding","userBadgePadding","sidebarConfig","makeSidebarConfig","customSidebarConfig","submenuConfig","makeSidebarSubmenuConfig","customSubmenuConfig","SIDEBAR_INTRO_LOCAL_STORAGE","SidebarConfigContext","SidebarItemWithSubmenuContext","defaultSidebarOpenStateContext","LegacySidebarContext","VersionedSidebarContext","SidebarOpenStateProvider","useSidebarOpenState","versionedOpenStateContext","legacyOpenStateContext","openStateContext","MobileSidebarContext","defaultSidebarPinStateContext","LegacySidebarPinStateContext","VersionedSidebarPinStateContext","SidebarPinStateProvider","useSidebarPinState","versionedPinStateContext","legacyPinStateContext","pinStateContext","useStyles$d","MobileSidebarGroup","selectedMenuItemIndex","setSelectedMenuItemIndex","value2","BottomNavigationAction","SidebarGroup","isMobile","useStyles$c","sortSidebarGroupsForPriority","sidebarGroupType","OverlayMenu","onClose","Drawer","MobileSidebar","sidebarGroups","Menu","shouldShowGroupChildren","BottomNavigation","LocalStorage","useStyles$b","PageContext","SidebarPage","isPinned","setIsPinned","contentRef","pageContext","toggleSidebarPinState","useContent","useStyles$a","DesktopSidebar","openDelayMs","closeDelayMs","disableExpandOnHover","hoverTimerRef","A11ySkipSidebar","Sidebar","focusContent","isLocationMatch","currentLocation","toLocation","exact","toDecodedSearch","toQueryParameters","currentDecodedSearch","currentQueryParameters","queryStringMatcher","useStyles$9","SidebarSubmenuItem","dropdownItems","setIsHoveredOn","closeSubmenu","isActive","showDropDown","setShowDropDown","handleClickDropdown","ArrowDropUp","ArrowDropDown","object","useStyles$8","SidebarSubmenu","isHoveredOn","isSubmenuOpen","setIsSubmenuOpen","useStyles$7","DoubleArrowLeft","useStyles$6","DoubleArrowRight","makeSidebarStyles","useMemoStyles","useLocationMatch","submenu","active","_to","isButtonItem","sidebarSubmenuType","WorkaroundNavLink","style","activeStyle","activeClassName","ariaCurrentProp","locationPathname","toPathname","ariaCurrent","SidebarItemBase","hasNotifications","hasSubmenu","disableHighlight","navLinkProps","divStyle","displayItemIcon","ArrowRight","itemIcon","Badge","openContent","childProps","subject","SidebarItemWithSubmenu","handleMouseEnter","handleMouseLeave","arrowIcon","SidebarItem","SidebarSearchField","setInput","handleEnter","ev","handleInput","handleInputClick","handleItemClick","SidebarSpace","styled","SidebarSpacer","SidebarDivider","styledScrollbar","SidebarScrollWrapper","scrollbarStyles","SidebarExpandButton","useStyles$5","TypeFragment","typeLink","pageTitle","TitleFragment","tooltip","FinalTitle","SubtitleFragment","Header","pageTitleOverride","appTitle","documentTitle","titleTemplate","defaultTitle","ActionItem","secondaryLabel","HeaderActionMenu","white","actionItems","anchorElRef","actionItem","useStyles$4","HeaderLabelContent","typographyRootComponent","HeaderLabel","contentTypograpyRootComponent","styles$1","useStyles$3","ItemCardHeader","ItemCard","tag","useStyles$2","ItemCardGrid","useStyles$1","Page","baseTheme","PageWithHeader","proxiedSessionSchema","DEFAULTS","tokenToExpiry","jwtToken","_header","rawPayload","_signature","ProxiedSignInIdentity","promise","headers","mergedHeaders","ProxiedSignInPage","execute","GuestUserIdentity","userEntityRef","parseJwtPayload","LegacyUserIdentity","sub","ent","UserIdentity","authApi","profile","ex","useStyles","GridItem","commonProvider","onSignInStarted","onSignInSuccess","onSignInFailure","handleLogin","identityResponse","guestProvider","ID_TOKEN_REGEX","useFormStyles","asInputRef","renderResult","customProvider","register","handleSubmit","formState","handleResult","userId","idToken","FormHelperText","IdentityApiSignOutProxy","PROVIDER_STORAGE_KEY","signInProviders","validateIDs","providers","getSignInProviders","identityProviders","useSignInProviders","apiHolder","setLoading","handleWrappedResult","selectedProviderId","didCancel","handleSignInSuccess","handleSignInStarted","handleSignInFailure","MultiSignInPage","providerElements","SingleSignInPage","auto","showLoginPage","setShowLoginPage","login","checkExisting","showPopup","err","SignInPage","useTabsStyles","BoldHeader","TabbedCard","tabsClasses","selectIndex","_ev","newSelectedIndex","selectedTabContent","useCardTabStyles","CardTab","createTranslationMessages","createTranslationResource","_id","_messages","_resources","flattenMessages","TranslationRefImpl","createTranslationRef","translationApiRef","appLanguageApiRef","loggedRefs","useTranslationRef","translationApi","setSnapshot","observable","errMsg","initialRenderRef","useApiHolder","versionedHolder","useApi","withApis","WrappedComponent","Hoc","ApiRefImpl","createApiRef","SessionState","SessionState2","googleAuthApiRef","githubAuthApiRef","oktaAuthApiRef","gitlabAuthApiRef","microsoftAuthApiRef","oneloginAuthApiRef","bitbucketAuthApiRef","bitbucketServerAuthApiRef","atlassianAuthApiRef","vmwareCloudAuthApiRef","alertApiRef","analyticsApiRef","appThemeApiRef","configApiRef","discoveryApiRef","errorApiRef","FeatureFlagState","FeatureFlagState2","featureFlagsApiRef","fetchApiRef","identityApiRef","oauthRequestApiRef","storageApiRef","AnalyticsReactContext","useAnalyticsContext","theContext","AnalyticsContext","combinedValue","versionedCombinedValue","createApiFactory","globalEvents","routableExtensionRenderedEvent","Tracker","_routeNodeType","useAnalyticsApi","useAnalytics","trackerRef","getTracker","tracker","useApp","versionedContext","globalStore","componentDataKey","attachComponentData","component","dataComponent","getComponentData","_a$2","RouteRefImpl","createRouteRef","_a$1","PARAM_PATTERN","SubRouteRefImpl","createSubRouteRef","pathParams","param","ExternalRouteRefImpl","createExternalRouteRef","useRouteRef","routeFunc","isOptional","useRouteRefParams","_routeRef","PluginErrorBoundary","ErrorBoundaryFallback","createRoutableExtension","createReactExtension","InnerComponent","RoutableExtensionWrapper","componentName","createComponentExtension","lazyLoader","Result","selectChildren","rootNode","strictError","Collection","selection","useElementFilter","filterFn","dependencies","PluginImpl","createPlugin","isError","maybe","assertError","serializeError","deserializeError","stringifyError","CustomErrorBase","fullMessage","causeStr","InputError","AuthenticationError","NotAllowedError","NotFoundError","ConflictError","NotModifiedError","NotImplementedError","ServiceUnavailableError","ForwardedError","parseErrorResponseBody","ResponseError","statusText","scmAuthApiRef","_providers","_api","_host","_scopeMapping","_providerName","ScmAuthMux","_ScmAuth","providerName","host","scopeMapping","github","gitlab","azure","bitbucket","githubAuthApi","gitlabAuthApi","microsoftAuthApi","bitbucketAuthApi","additionalScopes","additionalScope","restOptions","uniqueScopes","ScmAuth","ScmIntegrationsApi","scmIntegrationsApiRef","ScmIntegrationIcon","DefaultIcon","isValidHost","check","isValidUrl","basicIntegrations","integrations","getHost","defaultScmResolveUrl","updated","filepath","repoRootPath","AMAZON_AWS_HOST","readAwsS3IntegrationConfig","s3ForcePathStyle","accessKeyId","secretAccessKey","roleArn","externalId","readAwsS3IntegrationConfigs","_AwsS3Integration","integrationConfig","AwsS3Integration","_origin","_owner","_project","_repo","_path","_ref","_baseUrl","VERSION_PREFIX_GIT_BRANCH","_AzureUrl","origin","owner","project","repo","repoUrl","version","AzureUrl","AZURE_HOST","AzureDevOpsCredentialFields","AzureDevopsCredentialFieldMap","asAzureDevOpsCredential","credential","requiredFields","forbiddenFields","readAzureIntegrationConfig","credentialConfigs","_b2","mapped","credentials","credentialConfig","organization","indexes","org","readAzureIntegrationConfigs","_AzureIntegration","azureUrl","newUrl","mockBaseUrl","updatedPath","AzureIntegration","getAzureFileFetchUrl","getAzureDownloadUrl","getAzureCommitsUrl","tenMinutes","CachedAzureDevOpsCredentialsProvider","accessToken","DefaultAzureDevOpsCredentialsProvider","integration","opts","getAzureRequestOptions","additionalHeaders","BITBUCKET_HOST","BITBUCKET_API_BASE_URL","readBitbucketIntegrationConfig","apiBaseUrl","appPassword","readBitbucketIntegrationConfigs","_BitbucketIntegration","resolved","urlData","editUrl","BitbucketIntegration","getBitbucketDefaultBranch","repoName","isHosted","branchUrl","getBitbucketRequestOptions","defaultBranch","displayId","getBitbucketDownloadUrl","protocol","branch","getBitbucketFileFetchUrl","filepathtype","pathWithoutSlash","buffer","Buffer","BITBUCKET_CLOUD_HOST","BITBUCKET_CLOUD_API_BASE_URL","readBitbucketCloudIntegrationConfig","readBitbucketCloudIntegrationConfigs","_BitbucketCloudIntegration","BitbucketCloudIntegration","getBitbucketCloudDefaultBranch","getBitbucketCloudRequestOptions","getBitbucketCloudDownloadUrl","getBitbucketCloudFileFetchUrl","readBitbucketServerIntegrationConfig","readBitbucketServerIntegrationConfigs","_BitbucketServerIntegration","BitbucketServerIntegration","getBitbucketServerDefaultBranch","getBitbucketServerRequestOptions","getBitbucketServerDownloadUrl","getBitbucketServerFileFetchUrl","readGerritIntegrationConfig","cloneUrl","gitilesBaseUrl","readGerritIntegrationConfigs","GERRIT_BODY_PREFIX","parseGerritGitilesUrl","baseUrlParse","urlParse","projectEndIndex","branchIndex","filePath","buildGerritGitilesUrl","buildGerritGitilesArchiveUrl","archiveName","getGitilesAuthenticationUrl","getAuthenticationPrefix","getGerritBranchApiUrl","getGerritCloneRepoUrl","getGerritFileContentsApiUrl","getGerritProjectsApiUrl","getGerritRequestOptions","parseGerritJsonResponse","responseBody","_GerritIntegration","GerritIntegration","readGiteaConfig","getGiteaEditContentsUrl","giteaUrl","parseGiteaUrl","getGiteaFileContentsUrl","getGiteaArchiveUrl","getGiteaLatestCommitUrl","getGiteaRequestOptions","_blank","_src","_branch","_GiteaIntegration","giteaConfigs","gitea","GiteaIntegration","GITHUB_HOST","GITHUB_API_BASE_URL","GITHUB_RAW_BASE_URL","readGithubIntegrationConfig","rawBaseUrl","apps","readGithubIntegrationConfigs","getGithubFileFetchUrl","chooseEndpoint","getGitHubRequestOptions","Cache","supplier","existingInstallationData","tokenData","HEADERS","GithubAppManager","installationId","suspended","repositoryNames","installationClient","repos","repository","installation","inst","notFoundError","GithubAppCredentialsMux","ac","results","resultItem","notNotFoundError","_SingleInstanceGithubCredentialsProvider","githubAppCredentialsMux","SingleInstanceGithubCredentialsProvider","DefaultGithubCredentialsProvider","credentialsProviders","credentialsProvider","_GithubIntegration","replaceGithubUrlType","GithubIntegration","getGitHubFileFetchUrl","GitHubIntegration","readGitHubIntegrationConfig","readGitHubIntegrationConfigs","replaceGitHubUrlType","GITLAB_HOST","GITLAB_API_BASE_URL","readGitLabIntegrationConfig","readGitLabIntegrationConfigs","getGitLabIntegrationRelativePath","relativePath","getGitLabFileFetchUrl","projectID","getProjectId","buildProjectUrl","getGitLabRequestOptions","branchAndFilePath","repoIDLookup","_GitLabIntegration","replaceGitLabUrlType","GitLabIntegration","_SingleInstanceGitlabCredentialsProvider","_opts","SingleInstanceGitlabCredentialsProvider","DefaultGitlabCredentialsProvider","readGoogleGcsIntegrationConfig","privateKey","ScmIntegrations","integrationsByType","candidates","filteredCandidates","rootRoute","registerComponentRouteRef","apiDocsConfigRef","LazyAsyncApiDefinition","AsyncApiDefinitionWidget","LazyGraphQlDefinition","GraphQlDefinitionWidget","LazyOpenApiDefinition","OpenApiDefinitionWidget","validSubmitMethods","GrpcApiDefinitionWidget","TrpcApiDefinitionWidget","definition","defaultDefinitionWidgets","apiDocsPlugin","definitionWidgets","apiEntity","ApiExplorerPage","EntityApiDefinitionCard","EntityConsumedApisCard","EntityConsumingComponentsCard","EntityProvidedApisCard","EntityProvidingComponentsCard","EntityHasApisCard","rootRouteRef","bazaarApiRef","isBazaarAvailable","bazaarClient","BazaarClient","bazaarProject","resp","bazaarPlugin","fetchApi","BazaarPage","statuses","StatusTag","InputField","inputType","control","helperText","rules","InputSelector","option","DateSelector","DoubleDateSelector","DialogContent","DialogActions","CustomDialogTitle","other","ProjectDialog","handleSave","isAddForm","defaultValues","projectSelector","deleteButton","getValues","handleSaveForm","handleCloseDialog","ConfirmationDialog","EditProjectDialog","openEdit","handleEditClose","handleCardClose","fetchBazaarProject","bazaarApi","openDelete","setOpenDelete","setDefaultValues","handleDeleteClose","handleDeleteSubmit","handleEditSubmit","formValues","AboutField","gridSizes","childElements","CardContentFields","members","descriptionSize","membersSize","catalogEntityRoute","ProjectSelector","catalogEntities","disableClearable","defaultValue","LinkProjectDialog","openProjectSelector","handleProjectSelectorClose","initEntity","selectedEntity","setSelectedEntity","selectedEntityName","setSelectedEntityName","handleEntityClick","sortMembers","m1","m2","sortByDate","dateA","sortByTitle","sortByTitleDescending","sortByMembers","parseBazaarProject","parseMember","parseBazaarResponse","fetchProjectMembers","dbMembers","fetchCatalogItems","catalogApi","HomePageBazaarInfoCard","initProject","_k","_l","_m","_n","entityLink","setOpenEdit","setOpenProjectSelector","openUnlink","setOpenUnlink","isMember","setIsMember","fetchCatalogEntities","bazaarLinkedRefs","fetchMembers","fetchUserId","handleMembersClick","getEntityPageLink","handleLink","handleUnlinkSubmit","ProjectCard","fetchBazaarProjects","openCard","setOpenCard","updatedAt","membersCount","ProjectPreview","bazaarProjects","useTablePagination","gridSize","page","setPage","rows","setRows","handlePageChange","newPage","handleRowChange","getUnlinkedCatalogEntities$1","bazaarProjectRefs","BazaarOverviewCard","fullWidth","fullHeight","bazaarLink","unlinkedCatalogEntities","setUnlinkedCatalogEntities","catalogEntityRefs","unlinkedCEntities","EntityBazaarInfoContent","handleUnlinkClose","EntityBazaarInfoCard","isBazaar","setIsBazaar","isBazaarProject","AddProjectDialog","SortMethodSelector","sortMethodNbr","handleSortMethodChange","getUnlinkedCatalogEntities","SortView","sortMethods","setSortMethodNbr","openAdd","setOpenAdd","searchValue","setSearchValue","dbProjects","getSearchResults","newSortMethod","RESOURCE_TYPE_CATALOG_ENTITY","catalogEntityReadPermission","catalogEntityCreatePermission","catalogEntityDeletePermission","catalogEntityRefreshPermission","catalogLocationReadPermission","catalogLocationCreatePermission","catalogLocationDeletePermission","catalogPermissions","DefaultRenderLabel","relations","EntityKindIcon","DefaultRenderNode","focused","hasKindIcon","iconSize","paddedIconWidth","displayTitle","ALL_RELATION_PAIRS","Direction","useEntityStore","catalogClient","setEntities","updateEntities","cachedEntities","requestedEntities","filteredEntities","asyncState","fetch","entityRefs","requestEntities","useEntityRelationGraph","rootEntityRefs","maxDepth","kinds","expectedEntities","processedEntityRefs","nextDepthRefQueue","depth","entityRefQueue","rel","useEntityRelationNodesAndEdges","unidirectional","mergeRelations","onNodeClick","relationPairs","nodesAndEdges","visitedNodes","nodeQueue","pair","EntityRelationsGraph","rootEntityNames","catalogGraphRouteRef","catalogEntityRouteRef","catalogGraphPlugin","EntityCatalogGraphCard","CatalogGraphPage","catalogImportApiRef","getGithubIntegrationConfig","scmIntegrationsApi","getCatalogFilename","getBranchName","CatalogImportClient","catalogFilename","analyzation","locations","repositoryUrl","fileContent","ghConfig","githubIntegrationConfig","octo","branchName","fileName","repoData","formatHttpErrorMessage","parentRef","catalogImportPlugin","scmAuthApi","CatalogImportPage","appTreeApiRef","componentsApiRef","useComponentRef","iconsApiRef","routeResolutionApiRef","routableExtensionRenderedEvent$1","Fallback","createComponentRef","coreProgressComponentRef","coreNotFoundErrorPageComponentRef","coreErrorBoundaryFallbackComponentRef","coreComponentRefs","disableTracking","routable","createExtensionDataRef","toInternalExtensionDefinition","internal","inputs","createExtensionInput","extensionData","resolveExtensionDefinition","internalDefinition","namePart","extensions","def","extensionIds","duplicates","createExtensionOverrides","ff","createApiExtension","configSchema","extensionInputs","createApiExtension2","createAppRootElementExtension","createAppRootWrapperExtension","createAppRootWrapperExtension2","createRouterExtension","createRouterExtension2","schemaCreator","formatIssue","issue","createPageExtension","z","ExtensionComponent","createNavItemExtension","createNavItemExtension2","createNavLogoExtension","logoIcon","logoFull","createNavLogoExtension2","createSignInPageExtension","createSignInPageExtension2","createThemeExtension","createThemeExtension2","createComponentExtension2","createTranslationExtension","createTranslationExtension2","MESSAGE_MARKER","describeParentCallSite","ErrorConstructor","startIndex","secondEntryStart","secondEntryEnd","_params$1","_creationSite","_name","name_get","toInternalRouteRef","creationSite","_params","_parent","parentParams","defaultTarget","routeResolutionApi","isOwnerOf","possibleOwners","owners","ownerItem","useEntityPermission","permission","loadingEntity","entityError","allowed","loadingPermission","permissionError","catalogExtensionData","createEntityCardExtension","mergeFilters","createEntityContentExtension","getEntityRelations","relationType","entityNames","NewEntityContext","AsyncEntityProvider","refresh","EntityProvider","useEntity","useAsyncEntity","catalogApiRef","entityPresentationApiRef","defaultEntityPresentation","entityOrRef","getParts","shortRef","getShortRef","primary","candidate","secondary","defaultKindLower","defaultNamespaceLower","useUpdatingObservable","updatedValue","useEntityPresentation","entityPresentationApi","presentation","starredEntitiesApiRef","MockStarredEntitiesApi","isScreenSmallerThanBreakpoint","theme2","filterDrawerOpen","setFilterDrawerOpen","CatalogFilterLayout","isEntityTextFilter","reduceCatalogFilters","condensedFilters","compoundFilter","reduceBackendCatalogFilters","backendCatalogFilters","EntityTagFilter","EntityOwnerFilter","EntityLifecycleFilter","EntityNamespaceFilter","EntityUserFilter","EntityOrphanFilter","EntityTextFilter","UserListFilter","reduceEntityFilters","sourceLocationRef","EntityKindFilter","EntityTypeFilter","words","exactMatch","partialMatch","word","fullRefs","o","ownershipEntityRefs","starredEntityRefs","isOwnedEntity","isStarredEntity","orphan","EntityErrorFilter","EntityListContext","EntityListProvider","requestedFilters","setRequestedFilters","enablePagination","queryParameters","initialCursor","setCursor","outputState","setOutputState","compacted","entityFilter","backendFilter","previousBackendFilter","oldParams","newParams","updateFilters","prevFilters","newFilters","pageInfo","prevCursor","nextCursor","useEntityList","useEntityTypeFilter","kindFilter","typeFilter","typeParameter","flattenedQueryTypes","selectedTypes","setSelectedTypes","availableTypes","setAvailableTypes","facetsRef","oldFacets","newTypes","stillValidTypes","useRelatedEntities","relationFilter","filterByTypeLower","filterByKindLower","getEntityRef$1","useStarredEntities","starredEntitiesApi","starredEntities","toggleStarredEntity","getEntityRef","useStarredEntity","setIsStarredEntity","useEntityOwnership","myOwnerRefs","entityOwnerRefs","useAllKinds","allKinds","filterKinds","allowedKinds","forcedKinds","availableKinds","useEntityKindFilter","kindParameter","queryParamKind","selectedKind","setSelectedKind","EntityKindPicker","hidden","initialFilter","icon$2","checkedIcon$2","OptionCheckbox","EntityAutocompletePickerOption","availableOptions","showCounts","EntityAutocompletePickerInput","EntityAutocompletePicker","Filter","InputProps","initialSelectedOptions","queryParameter","availableValues","facet","count","selectedOptions","setSelectedOptions","shouldAddFilter","EntityLifecyclePicker","humanizeEntityRef","humanizeEntity","defaultName","useFacetsEntities","facetsPromise","start","decodeCursor","filteredRefs","filterEntity","encodeCursor","isFacetsResponse","normalizedText","useQueryEntities","initialRequest","cursorRequest","response2","useFetchEntities","initialSelectedOwnersRefs","isOwnersOnlyMode","queryEntitiesResponse","facetsEntitiesResponse","handleFetch","useSelectedOwners","allEntities","FixedWidthFormControlLabel","_theme","icon$1","checkedIcon$1","RenderOptionLabel","isGroup","EntityOwnerPicker","ownersParameter","setText","queryParamOwners","selectedOwners","setSelectedOwners","cache","availableOwners","EntityDisplayName","hideIcon","disableTooltip","primaryTitle","secondaryTitle","entityRouteRef","entityRouteParams","EntityRefLink","linkProps","entityRoute","useEntityRoute","routeParams","EntityRefLinks","hideIcons","entityRefString","EntityCardActions","EmailCardAction","GroupCardActions","email","UserCardActions","maxTagChips","EntityPeekAheadPopover","delayTime","popupState","isHovered","setIsHovered","debouncedHandleMouseEnter","retrievedEntity","handleOnMouseLeave","EntitySearchBar","columnFactories","formatContent","entity1","entity2","relation","getRelations","systemEntityColumns","componentEntityColumns","EntityTable","tableOptions","tableStyle","EntityTagPicker","EntityTypePicker","YellowStar","FavoriteEntity","DEFAULT_ICON","getKind","useIcon","actualKind","useAncestry","currentRef","isRootNode","CustomNode","AncestryPage","ListItemText","ListSubheader","Container","findLink","KeyValueListItem","useColocated","currentEntityRef","colocated","EntityList","Contents$1","originLocation","colocatedEntities","atLocation","atOrigin","ColocatedPage","sortKeys","JsonPage","OverviewPage","apiVersion","spec","groupedRelations","groupRelations","YamlPage","TabPanel","a11yProps","InspectEntityDialog","activeTab","setActiveTab","useUnregisterEntityDialogState","isBootstrap","prerequisites","locationPromise","colocatedEntitiesPromise","locationAnnotationFilter","location2","colocatedEntities2","unregisterLocation","deleteEntity","Contents","onConfirm","showDelete","setShowDelete","onUnregister","onDelete","entityName","DialogActionsPanel","UnregisterEntityDialog","useOwnedEntitiesCount","loadingEntityRefs","user","allFilters","catalogFilters","loadingEntityOwnership","fetchEntities","req","ownedClaims","getOwnedCountClaims","totalItems","ownersRefs","commonOwnedBy","useAllEntitiesCount","prevRequest","newRequest","useStarredEntitiesCount","getFilterGroups","orgName","UserListPicker","availableFilters","userParameter","userAndGroupFilterIds","filterGroups","filterGroup","ownedEntitiesCount","loadingOwnedEntities","ownedEntitiesFilter","allCount","starredEntitiesCount","starredEntitiesFilter","loadingStarredEntities","queryParamUserFilter","selectedUserFilter","setSelectedUserFilter","filterCounts","checkedIcon","EntityProcessingStatusPicker","selectedAdvancedItems","setSelectedAdvancedItems","orphanChange","errorChange","availableAdvancedItems","EntityNamespacePicker","generateYamlExample","yamlText","lineNumbers","entityKind","MockEntityListContextProvider","setFilters","resolvedValue","UnregisterEntity","unregisterEntityOptions","isUnregisterAllowed","onUnregisterEntity","isBoolean","isDisabled","unregisterButton","EntityContextMenu","UNSTABLE_extraContextMenuItems","UNSTABLE_contextMenuOptions","onInspectEntity","isAllowed","onOpen","copyState","extraItems","dataKey","EntityLayoutTitle","paramKind","paramNamespace","paramName","EntityLabels","ownedByRelations","EntityLayout","NotFoundComponent","elementProps","headerTitle","headerType","confirmationDialogOpen","setConfirmationDialogOpen","inspectionDialogOpen","setInspectionDialogOpen","catalogRoute","unregisterRedirectRoute","cleanUpAfterRemoval","DeleteEntityDialog","isOrphan","EntityOrphanWarning","catalogLink","getRelationWarnings","entityRefRelations","relatedEntities","hasRelationWarnings","EntityRelationWarning","errorFilter","getOwnAndAncestorsErrors","hasCatalogProcessingErrors","EntityProcessingErrorsPanel","ancestorError","ENTITY_SWITCH_KEY","EntitySwitchCaseComponent","EntitySwitch","collection","condition","elementsChildren","AsyncEntitySwitch","getDefaultChildren","renderMultipleMatches","promises","durationToMilliseconds","duration","years","months","weeks","days","hours","minutes","milliseconds","DEFAULT_CACHE_TTL","DEFAULT_BATCH_DELAY","DEFAULT_ICONS","Extension","Memory","Category","Storage","Apartment","LocationOn","Person","People","FeaturedPlayList","createDefaultRenderer","_cache","_cacheTtlMs","_kindIcons","_renderer","_getEntityForInitialRender","getEntityForInitialRender_fn","_createLoader","createLoader_fn","_maybeFallbackIcon","maybeFallbackIcon_fn","_DefaultEntityPresentationApi","cacheTtl","batchDelay","renderer","kindIcons","needsLoad","initialSnapshot","aborted","newEntity","updatedSnapshot","cachedEntity","cacheTtlMs","batchDelayMs","now","cb","renderedIcon","DefaultEntityPresentationApi","performMigrationToTheNewBucket","storageApi","source","oldStarredEntities","targetEntities","old","split","DefaultStarredEntitiesApi","createComponentRouteRef","viewTechDocRouteRef","createFromTemplateRouteRef","unregisterRedirectRouteRef","CatalogKindHeader","strCmp","strCmpAll","cmpValues","cmpVal","isKind","isEntityWith","isComponentType","types","isResourceType","predicate","isNamespace","namespaces","FilteredEntityLayout","FilterContainer","EntityListContainer","catalogPlugin","CatalogIndexPage","CatalogEntityPage","EntityAboutCard","EntityLinksCard","EntityLabelsCard","EntityHasSystemsCard","EntityHasComponentsCard","EntityHasSubcomponentsCard","EntityHasResourcesCard","EntityDependsOnComponentsCard","EntityDependencyOfComponentsCard","EntityDependsOnResourcesCard","RelatedEntitiesCard","CatalogSearchResultListItem","githubActionsApiRef","GithubActionsClient","runId","pageSize","BuildStatus","BuildStatus2","buildRouteRef","githubActionsPlugin","EntityGithubActionsContent","Router$1","EntityLatestGithubActionRunCard","EntityLatestGithubActionsForBranchCard","EntityRecentGithubActionsRunsCard","GITHUB_ACTIONS_ANNOTATION","getProjectNameFromEntity","WorkflowRunStatus","WorkflowIcon","getStatusDescription","conclusion","useWorkflowRunJobs","jobs","job","_c2","useWorkflowRunsDetails","useDownloadWorkflowRunLogs","getHostnameFromEntity","WorkflowRunLogs","inProgress","projectName","jobLogs","logText","getElapsedTime","startDate","StepView","JobListItem","JobsList","WorkflowRunDetails","_o","details","useWorkflowRuns","initialPageSize","total","setTotal","setPageSize","branches","setBranches","setDefaultBranch","runs","retry","fetchedDefaultBranch","selectedBranch","branchSet","iteratePage","branchSet2","branchesData","workflowRunsData","run","statusColors","matchesSearchTerm","searchTerm","lowerCaseSearchTerm","WorkflowRunsCardView","onChangePageSize","onChangePage","routeLink","filteredRuns","WorkflowRunsCardSearch","handleSearch","WorkflowRunsCard","setBranch","setRuns","setSearchTerm","runsData","cardProps","githubHost","hasNoRuns","handleMenuChange","branchItem","generatedColumns","row","d1","d2","WorkflowRunsTableView","WorkflowRunsTable","tableProps","isGithubActionsAvailable","view","workflowRunsComponent","WidgetContent","lastRun","LatestWorkflowRunCard","LatestWorkflowsForBranchCard","firstLine","RecentWorkflowRunsCard","SettingsModal","close","createCardExtension","layout","settings","isCustomizable","componentParts","CardExtension","Renderer","Settings","Actions","ContextProvider","settingsOpen","setSettingsOpen","innerContent","isOperator","visitsApiRef","Form","WidgetSettingsOverlay","widget","handleRemove","handleSettingsSave","deletable","settingsDialogOpen","setSettingsDialogOpen","formData","getTitle","AddWidgetDialog","widgets","handleAdd","CustomHomepageButtons","editMode","numWidgets","clearLayout","setAddWidgetDialogOpen","changeEditMode","defaultConfigAvailable","restoreDefault","RSJFTypeSchema","RSJFTypeUiSchema","ReactElementSchema","LayoutSchema","LayoutConfigurationSchema","WidgetSchema","GridWidgetSchema","CustomHomepageGridStateV1Schema","ResponsiveGrid","useHomeStorage","defaultWidgets","setWidgets","grid","homeSnapshot","convertConfigToDefaultWidgets","availableWidgets","ret","conf","w","widgetId","availableWidgetsFilter","elem","CustomHomepageGrid","defaultLayout","addWidgetDialogOpen","editModeOn","setEditMode","getWidgetByName","getWidgetNameFromKey","widgetSettings","resizable","movable","handleLayoutChange","newLayout","newWidgets","handleRestoreDefaultConfig","widgetName","widgetProps","getToEntityRef","rootPath","stringifyEntityRefImpl","getVisitName","document","VisitListener","toEntityRef","visitName","visitsApi","toEntityRefImpl","visitNameImpl","requestId","VisitsStorageApi","visits","saveParams","visitIndex","VisitsWebStorageApi","homePlugin","HomepageCompositionRoot","ComponentAccordion","ComponentTabs","ComponentTab","WelcomeTitle","HomePageCompanyLogo","HomePageRandomJoke","HomePageToolkit","HomePageStarredEntities","HeaderWorldClock","HomePageTopVisited","HomePageRecentlyVisited","FeaturedDocsCard","TemplateBackstageLogo","TemplateBackstageLogoIcon","catalogIndexRouteRef","orgPlugin","EntityGroupProfileCard","EntityMembersListCard","EntityOwnershipCard","EntityUserProfileCard","MyGroupsSidebarItem","singularTitle","pluralTitle","AuthorizeResult","AuthorizeResult2","isPermission","comparedPermission","isResourcePermission","resourceType","isCreatePermission","isReadPermission","isUpdatePermission","isDeletePermission","toPermissionEvaluator","permissionAuthorizer","parsedRequests","createPermission","permissionCriteriaSchema","authorizePermissionResponseSchema","queryPermissionResponseSchema","responseSchema","itemSchema","ids","PermissionClient","queries","permissionApi","responsesById","permissionApiRef","IdentityPermissionApi","permissionClient","usePermission","PermissionedRoute","resourceRef","errorComponent","permissionResult","shownElement","RequirePermission","templateEntityV1beta3Validator","isTemplateEntityV1beta3","isObject$1","extractUiSchema","uiSchema","anyOf","oneOf","then","_else","propName","schemaNode","innerUiSchema","depName","extractSchemaFromStep","inputStep","returnSchema","createFieldValidation","fieldValidation","isFieldValidation","hasErrors","createAsyncValidators","rootSchema","pathPrefix","parsedSchema","formValidation","validateForm","validatorName","definitionInSchema","hasItems","doValidateItem","propValue","itemUiSchema","doValidate","itemsSchema","itemsUiSchema","ReviewState","reviewData","backstageReviewOptions","useTemplateSchema","manifest","returningSteps","stepFeatureFlag","strippedSchema","useFormDataFromQuery","useTemplateParameterSchema","templateRef","scaffolderApi","useFilteredSchemaProperties","featureFlagKey","filteredSteps","featureFlag","filteredStep","removedPropertyKeys","useTransformSchemaToProps","layouts","objectFieldTemplate","Layout","FieldOverrides","ScaffolderField","displayLabel","rawErrors","help","rawDescription","FieldTemplate","classNames","onDropPropertyClick","onKeyChange","readonly","registry","uiOptions","WrapIfAdditionalTemplate","DescriptionFieldTemplate","WrappedForm","wrappedFields","wrapperProps","templates","ErrorListTemplate","Stepper","stepperProps","ReviewStateComponent","ReviewStepComponent","backButtonText","createButtonText","reviewButtonText","setActiveStep","isValidating","setIsValidating","setFormState","setErrors","validation2","validation","prevActiveStep","handleCreate","currentStep","returnedValidation","stepNum","backLabel","createLabel","reviewLabel","isAllowedLabelClick","cardBackgroundImage","cardFontColor","getPageTheme","themeForType","SubtitleComponent","CardLink","TemplateCard","template","iconResolver","hasTags","hasLinks","displayDefaultDivider","TemplateGroup","CardComponent","onSelected","titleComponent","Card","additionalLinks","TemplateGroups","templateFilter","TemplateCardComponent","onTemplateSelected","Workflow","workflowProps","templateName","sortedManifest","EmbeddableWorkflow","LinkOutputs","TextOutputs","setIndex","DefaultTemplateOutputs","textOutputIndex","setTextOutputIndex","defaultIndex","textOutput","useStepIconStyles","StepIcon","completed","skipped","getMiddle","StepTime","time","setTime","getDelay","calculate","startedAt","formatted","TaskBorder","TaskSteps","isCompleted","isFailed","isSkipped","stepIconProps","TaskLogStream","TemplateCategoryPicker","ScaffolderPageContextMenu","onEditorClicked","onActionsClicked","onTasksClicked","onCreateClicked","SecretsContext","SecretsContextProvider","secrets","setSecrets","useTemplateSecrets","updateSecrets","currentSecrets","scaffolderApiRef","FIELD_EXTENSION_WRAPPER_KEY","FIELD_EXTENSION_KEY","createScaffolderFieldExtension","FieldExtensionDataHolder","ScaffolderFieldExtensions","useCustomFieldExtensions","outlet","LAYOUTS_KEY","LAYOUTS_WRAPPER_KEY","useCustomLayouts","reducer","draft","logLine","currentStepLog","stepId","useTaskEventStream","taskId","dispatch","logPusher","retryCount","startStreamLogProcess","task","collectedLogEvents","emitLogs","logs","maxRetries","createScaffolderLayout","LayoutDataHolder","ScaffolderLayouts","makeFieldSchemaFromZod","uiOptionsSchema","entityQueryFilterExpressionSchema$1","EntityPickerSchema","EntityPicker","idSchema","catalogFilter","buildCatalogFilter$1","allowArbitraryValues","getLabel","onSelect","convertOpsValues$1","convertSchemaFiltersToQuery$1","schemaFilters","entityNamePickerValidation","EntityNamePickerSchema","EntityNamePicker","autoFocus","OwnerPickerSchema","OwnerPicker","ownerUiSchema","entityQueryFilterExpressionSchema","MultiEntityPickerSchema","MultiEntityPicker","buildCatalogFilter","validateMultiEntityPickerValidation","convertOpsValues","convertSchemaFiltersToQuery","RepoUrlPickerSchema","repoPickerValidation","integrationApi","GithubRepoPicker","allowedOwners","ownerItems","GiteaRepoPicker","GitlabRepoPicker","AzureRepoPicker","allowedOrganizations","organizationItems","BitbucketRepoPicker","allowedProjects","projectItems","GerritRepoPicker","RepoUrlPickerHost","hosts","hostsOptions","RepoUrlPickerRepoName","allowedRepos","repoItems","serializeRepoPickerUrl","parseRepoPickerUrl","RepoUrlPicker","allowedHosts","prevState","updateLocalState","requestUserCredentials","encodedHost","encodedRepoName","hostType","OwnedEntityPickerSchema","OwnedEntityPicker","identityRefs","entityPickerUISchema","buildEntityPickerUISchema","EntityTagsPickerSchema","EntityTagsPicker","tagOptions","setTagOptions","inputValue","setInputValue","inputError","setInputError","tagValidator","existingTags","tagsRequest","tagFacets","setTags","hasError","addDuplicate","currentTags","newTag","MyGroupsPickerSchema","MyGroupsPicker","setGroups","selectedGroup","setSelectedGroup","groupValues","updateChange","fontColor","ContextMenu","cancelEnabled","logsVisible","buttonBarVisible","onStartOver","onToggleLogs","onToggleButtonBar","pageTheme","cancelStatus","cancel","OngoingTask","templateRouteRef","taskStream","_a3","setLogVisibleState","setButtonBarVisibleState","startOver","_d2","_e2","_f2","triggerCancel","Outputs","ScaffolderClient","templatePath","processEvent","eventSource","inputAfter","selectedTemplateRouteRef","scaffolderTaskRouteRef","scaffolderListTaskRouteRef","actionsRouteRef","editRouteRef","scaffolderPlugin","EntityPickerFieldExtension","EntityNamePickerFieldExtension","MultiEntityPickerFieldExtension","RepoUrlPickerFieldExtension","OwnerPickerFieldExtension","MyGroupsPickerFieldExtension","ScaffolderPage","OwnedEntityPickerFieldExtension","EntityTagsPickerFieldExtension","TemplateTypePicker","global","setTimeout","clearTimeout","XMLHttpRequest","XDomainRequest","ActiveXObject","NativeEventSource","Promise","Response","TextDecoder","TextEncoder","AbortController","C","F","originalFetch2","signal","TextDecoderPolyfill","octets","valid","codePoint","shift","octetsCount","bitsNeeded","REPLACER","string","octet","supportsStreamOption","XHRWrapper","xhr","that","silent","onStart","contentType","onProgress","responseText","onFinish","onReadyStateChange","onTimeout","error1","toLowerCase","HeadersPolyfill","all","array","XHRTransport","onStartCallback","onProgressCallback","onFinishCallback","withCredentials","chunk","HeadersWrapper","FetchTransport","controller","textDecoder","readNextChunk","EventTarget","throwError","typeListeners","length","listeners","filtered","Event","MessageEvent","ConnectionEvent","ErrorEvent","WAITING","CONNECTING","OPEN","CLOSED","AFTER_CR","FIELD_START","FIELD","VALUE_START","VALUE","contentTypeRegExp","MINIMUM_DURATION","MAXIMUM_DURATION","parseDuration","clampDuration","fire","EventSourcePolyfill","getBestXHRTransport","isFetchSupported","es","lastEventIdQueryParameterName","initialRetry","heartbeatTimeout","lastEventId","wasActivity","textLength","TransportOption","transport","abortController","currentState","dataBuffer","lastEventIdBuffer","eventTypeBuffer","textBuffer","fieldStart","valueStart","textChunk","position","nextHeartbeat","requestURL","requestHeaders","R","module","exports","HighlightedSearchResultText","preTag","postTag","terms","DefaultResultListItemComponent","highlight","secondaryAction","lineClamp","HigherOrderDefaultResultListItem","SEARCH_RESULT_LIST_ITEM_EXTENSION","findSearchResultListItemExtensionElement","SearchResultListItemExtension","rank","alignItems","handleClickCapture","createSearchResultListItemExtension","useSearchResultListItemExtensions","SearchResultListItemExtensions","searchApiRef","MockSearchApi","mockedResults","SearchContext","useSearch","useSearchContextCheck","defaultInitialSearchState","useSearchContextValue","initialValue","searchApi","term","setTerm","setTypes","pageLimit","setPageLimit","pageCursor","setPageCursor","prevTerm","resultSet","hasNextPage","hasPreviousPage","fetchNextPage","fetchPreviousPage","LocalSearchContext","SearchContextProvider","inheritParentContextIfAvailable","hasParentContext","propsInitialSearchState","configInitialSearchState","searchContextInitialState","withContext$1","SearchBarBase","onKeyDown","onClear","onSubmit","clearButton","inputProps","endAdornment","forwardedValueRef","prevValue","handleKeyDown","handleClear","inputPlaceholder","startAdornment","clearButtonEndAdornment","SearchBar","withContext","SearchAutocompleteLoadingAdornment","SearchAutocomplete","getOptionLabel","inputDebounceTime","freeSolo","clearOnBlur","dataTestId","getInputValue","renderInput","InputLabelProps","SearchAutocompleteDefaultOption","primaryText","primaryTextTypographyProps","secondaryText","secondaryTextTypographyProps","disableTextTypography","useAsyncFilterValues","fn","debounce","valuesMemo","definiteFn","possibleValue","useDefaultFilterValue","AutocompleteFilter","givenValues","valuesDebounceMs","filterSelectedOptions","limitTags","asyncValues","renderTags","tagValue","getTagProps","CheckboxFilter","checked","SelectFilter","SearchFilter","Element","encodePageCursor","decodePageCursor","SearchPaginationBase","onPageCursorChange","rowsPerPage","labelRowsPerPage","labelDisplayedRows","rowsPerPageOptions","onPageLimitChange","handleRowsPerPageChange","SearchPagination","handlePageLimitChange","newPageLimit","SearchResultContext","SearchResultApi","SearchResultState","SearchResultComponent","noResultsComponent","SearchResult","SearchResultListLayout","resultItems","renderResultItem","disableRenderingWithNoResults","SearchResultList","defaultRenderResultItem","SearchResultGroupFilterFieldLayout","NullIcon","useSearchResultGroupTextFilterStyles","SearchResultGroupTextFilterField","useSearchResultGroupSelectFilterStyles","SearchResultGroupSelectFilterField","SearchResultGroupLayout","titleProps","filterOptions","renderFilterOption","filterOption","filterFields","renderFilterField","filterField","SearchResultGroup","SearchResultPager","SearchClient","searchPlugin","SearchPage$1","SidebarSearchModal","HomePageSearchBar","UrlUpdater","prevQueryParams","SearchPage","SearchTypeAccordion","expanded","setExpanded","givenTypes","toggleExpanded","definedTypes","resultCounts","counts","numberOfResults","SearchTypeTabs","changeTab","newType","SearchType","techRadarApiRef","MovedState","MovedState2","rings","quadrants","mock","SampleTechRadarApi","TechRadarPage","NESTED_LIST_TOGGLE","EXPANDABLE_NAVIGATION_LOCAL_STORAGE","StyledButton","CollapsedIcon","ExpandedIcon","ExpandableNavigationAddon","hasNavSubLevels","setHasNavSubLevels","checkboxToggles","shouldToggle","isExpanded","shouldExpand","handleState","ADDON_FEEDBACK_CONTAINER_ID","ADDON_FEEDBACK_CONTAINER_SELECTOR","PAGE_EDIT_LINK_SELECTOR","PAGE_FEEDBACK_LINK_SELECTOR","PAGE_MAIN_CONTENT_SELECTOR","resolveBlobUrl","ellipsis","getBody","markdownUrl","subheading","commentHeading","commentPlaceholder","highlightedTextAsQuote","facts","useGitTemplate","initialTemplate","editLink","useGitRepository","getIcon","getName","getUrl","encodedTitle","encodedBody","encodedUrl","IssueLink","ReportIssueAddon","buildTemplate","setStyle","defaultTemplate","mainContent","feedbackLink","feedbackContainer","mainContentPosition","selectionPosition","distanceFromTop","minDistanceFromTop","absMainContentTop","boxShadow","StyledSlider","marks","TextSizeAddon","mark","getValueText","handleChangeCommitted","handleDecreaseClick","handleIncreaseClick","htmlFontSize","LightBoxAddon","images","dataSourceImages","lightbox","zoomLevelObject","imageWidth","imageHeight","viewportWidth","viewportHeight","widthScale","heightScale","image","dataSourceImage","techdocsModuleAddonsContribPlugin","ExpandableNavigation","ReportIssue","TextSize","LightBox","TECHDOCS_ADDONS_KEY","TECHDOCS_ADDONS_WRAPPER_KEY","TechDocsAddons","getDataKeyByName","createTechDocsAddonExtension","TechDocsAddon","getTechDocsAddonByName","getAllTechDocsAddons","getAllTechDocsAddonsData","useTechDocsAddons","findAddonByData","nameKey","renderComponentByName","renderComponentsByLocation","techdocsApiRef","techdocsStorageApiRef","toLowercaseEntityRefMaybe","areEntityRefsEqual","prevEntityRef","nextEntityRef","defaultTechDocsReaderPageValue","TechDocsReaderPageContext","TechDocsReaderPageProvider","techdocsApi","entityMetadata","setTitle","setSubtitle","shadowRoot","setShadowRoot","prevProps","nextProps","useTechDocsReaderPage","TechDocsAddonLocations","SHADOW_DOM_STYLE_LOAD_EVENT","useShadowDomStylesEvents","handleLoad","useShadowDomStylesLoading","TechDocsShadowDom","onAppend","jss","setJss","shadowHost","useShadowRoot","useShadowRootElements","selectors","nodeList","isValidSelection","newSelection","useShadowRootSelection","waitMillis","setSelection","handleSelectionChange","shadowDocument","techdocsPlugin","TechdocsPage","EntityTechdocsContent","TechDocsCustomHome","TechDocsIndexPage","TechDocsReaderPage","TechDocsSearchResultListItem","TECHDOCS_EXTERNAL_ANNOTATION$1","EntityPageDocs","TECHDOCS_ANNOTATION","TECHDOCS_EXTERNAL_ANNOTATION","toLowerMaybe","actionFactories","isStarred","customTitle","DocsTable","getRouteToReaderPageFor","documents","defaultColumns","defaultActions","paging","EntityListDocsTable","TechDocsPageWrapper","generatedSubtitle","TechDocsFilter","TechDocsPicker","DefaultTechDocsHome","TechDocsIndexPage$1","calculateDisplayState","contentLoading","activeSyncState","useReaderState","techdocsStorageApi","contentReload","entityDocs","buildingTimeout","log","TechDocsReaderContext","useTechDocsReader","TechDocsReaderProvider","withTechDocsReaderProvider","isTechDocsSearchResult","TechDocsSearchBar","entityId","entityTitle","searchVal","setOptions","mounted","searchResults","handleSelection","TechDocsSearch","useDrawerStyles","TechDocsBuildLogsDrawerContent","buildLog","TechDocsBuildLogs","TechDocsNotFound","errorMessage","techdocsBuilder","TechDocsStateIndicator","StateAlert","contentErrorMessage","syncErrorMessage","MKDOCS_CSS","GOOGLE_FONTS","GSTATIC_FONTS","isLink","isSafe$1","isMkdocsCss","isGoogleFonts","isGstaticFonts","removeUnsafeLinks","isIframe","isSafe","src","removeUnsafeIframes","useSanitizerConfig","useSanitizerTransformer","dom","variables","SIDEBAR_WIDTH","sidebar","headings","typeset","heading","lineHeight","fontFamily","fontWeight","fontSize","factor","animations","useSidebar","useRuleStyles","rule","useStylesTransformer","isSvgNeedingInlining","attrName","attrVal","apiOrigin","isSrcToSvg","isRelativeUrl","pointsToOurBackend","addBaseUrl","updateDom","attributeName","elemAttribute","svgContent","ReactDOMPromise","renderReactElement","ReactDOM","addGitFeedbackLink","sourceAnchor","sourceURL","issueTitle","issueDesc","gitUrl","gitInfo","repoPath","addSidebarToggle","mkdocsToggleSidebar","article","toggleSidebar","rewriteDocLinks","normalizedWindowLocation","normalizeUrl","addLinkClickListener","CopyToClipboardTooltip","CopyToClipboardIcon","CopyToClipboardButton","copyToClipboard2","codes","code","removeMkdocsHeader","simplifyMkdocsFooter","onCssReady","onLoading","onLoaded","handleShadowDomStyleLoad","scrollIntoNavigation","activeNavItems","activeNavItem","checkbox","transform","html","transformers","transformer","resolveUrlToRelative","parsedAppUrl","appUrlPath","relativeUrl","parsedUrl","useNavigateUrl","MOBILE_MEDIA_QUERY","useTechDocsReaderDom","isMobileMedia","sanitizerTransformer","stylesTransformer","rawPage","setDom","isStyleLoading","updateSidebarPosition","pageTop","domTop","tabsHeight","updateFooterWidth","footer","preRender","rawContent","contentPath","postRender","transformedElement","modifierActive","shouldReplaceContent","preTransformedDomElement","postTransformedDomElement","TechDocsReaderPageContentAddons","addons","contentElement","primarySidebarElement","primarySidebarAddonLocation","secondarySidebarElement","secondarySidebarAddonLocation","TechDocsReaderPageContent","withSearch","onReady","entityMetadataLoading","hashElement","handleAppend","newShadowRoot","Reader","skeleton","TechDocsReaderPageHeader","metadataLoading","site_description","tabTitle","locationMetadata","lifecycle","docsRootLink","labels","TechDocsReaderPageSubheader","subheaderAddons","settingsAddons","TechDocsReaderLayout","withHeader","grandChild","asListItem","asLink","TextItem","resultTitle","resultName","ListItemWrapper","TechDocsClient","requestUrl","TechDocsStorageClient","logHandler","oldBaseUrl","newBaseUrl","rootDocsRouteRef","rootCatalogDocsRouteRef","EXAMPLE$1","EmptyProviders","size","ProviderSettingsAvatar","emptyProfile","ProviderSettingsItem","signedIn","setSignedIn","setProfile","sessionState","profileResponse","DefaultProviderSettings","configuredProviders","UserSettingsAuthProviders","providerSettings","providersConfig","EXAMPLE","EmptyFlags","getSecondaryText","FlagItem","toggleHandler","sortFlags","flags","activeFlags","idleFlags","UserSettingsFeatureFlags","inputRef","initialFeatureFlags","initialFeatureFlagsSorted","initialFlagState","filterInput","setFilterInput","toggleFlag","flagName","clearFilterInput","filteredFeatureFlags","useUserProfile","UserSettingsSignInAvatar","UserSettingsMenu","UserSettingsProfileCard","UserSettingsPinToggle","ThemeIcon","activeId","TooltipToggleButton","UserSettingsThemeToggle","activeThemeId","themeIds","handleSetTheme","newThemeId","it","themeIcon","themeTitle","UserSettingsLanguageToggle","languageObservable","currentLanguage","handleSetLanguage","newLanguage","getLanguageDisplayName","selectedItems","UserSettingsAppearanceCard","UserSettingsIdentityCard","UserSettingsGeneral","LAYOUT_DATA_KEY","LAYOUT_ROUTE_DATA_KEY","SettingsLayout","DefaultSettingsPage","SettingsPage","settingsRouteRef","UserSettingsPage","userSettingsTranslationRef","JSON_HEADERS","UserSettingsStorage","fetchUrl","rawValue","encodedNamespace","encodedKey","USER_SETTINGS_TAB_KEY","UserSettingsTab","__v5Spacing","defaultSpacing","argsInput","argument","themeSpacing","adaptV5CssBaselineOverride","adaptV5Override","stateStyleKeyPattern","extractV5StateOverrides","_styleKey","styleKey","stateStyles","restStyles","transformV5ComponentThemesToV4","shapes","colorVariants","genPageTheme","colors","shape","gradient","backgroundImage","DEFAULT_HTML_FONT_SIZE","DEFAULT_FONT_FAMILY","DEFAULT_PAGE_THEME","createBaseThemeOptions","defaultPageTheme","pageTheme$1","typography","defaultTypography","defaultComponentThemes","_themes","UnifiedThemeHolder","v4","v5","createUnifiedTheme","themeOptions","v5Theme","v4Overrides","v4Theme","createUnifiedThemeFromV4","palettes","generateV4ClassName","UnifiedThemeProvider","noCssBaseline","cssBaseline","createThemeOptions","createThemeOverrides","createTheme","getGlobalObject","globalObject","makeKey","getOrCreateGlobalSingleton","createVersionedValueMap","versions","createVersionedContext","useVersionedContext","createVersionedContextForTesting"],"sourceRoot":""}