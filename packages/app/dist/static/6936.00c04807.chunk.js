"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6936],{74555:(xe,k,o)=>{o.r(k),o.d(k,{RealLogViewer:()=>ve});var C=o(77125),y=o(29365),U=o(99594),W=o(53373),E=o.n(W),c=o(14041),Z=o(18690),D=o(19686),G=o(84392);function $({onlyFirst:e=!1}={}){const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}var Y=o(95479),B=o.n(Y),X=o(37639),J=o(24378),Q=o(16249),w=o(72501),q=o(68887),_=o(63798),R=o(65859),ee=o(58837),I=o(268),A=o(95186),b=o(38084),F=o(54024),M=o(40935),N=o(4499),z=o(85229),T=o(42020),j=o(6456),te=o(73518),K=o(63465),ne=o(51100),pe=o(18846),ye=o(45250),Ae=o(1517),Se=o(67991),Ce=o(12784),Le=o(20644),ke=o(43144),Ee=o(62220),Be=o(90147),Re=o(93285),Ie=o(25301),be=o(16975),Fe=o(3514),oe=Object.defineProperty,se=(e,t,n)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p=(e,t,n)=>(se(e,typeof t!="symbol"?t+"":t,n),n);const P=$(),H=/\n\r?/g,O=Object.fromEntries(Object.entries({1:e=>({...e,bold:!0}),3:e=>({...e,italic:!0}),4:e=>({...e,underline:!0}),22:({bold:e,...t})=>t,23:({italic:e,...t})=>t,24:({underline:e,...t})=>t,30:e=>({...e,foreground:"black"}),31:e=>({...e,foreground:"red"}),32:e=>({...e,foreground:"green"}),33:e=>({...e,foreground:"yellow"}),34:e=>({...e,foreground:"blue"}),35:e=>({...e,foreground:"magenta"}),36:e=>({...e,foreground:"cyan"}),37:e=>({...e,foreground:"white"}),39:({foreground:e,...t})=>t,90:e=>({...e,foreground:"grey"}),40:e=>({...e,background:"black"}),41:e=>({...e,background:"red"}),42:e=>({...e,background:"green"}),43:e=>({...e,background:"yellow"}),44:e=>({...e,background:"blue"}),45:e=>({...e,background:"magenta"}),46:e=>({...e,background:"cyan"}),47:e=>({...e,background:"white"}),49:({background:e,...t})=>t}).map(([e,t])=>[`\x1B[${e}m`,t]));class L{constructor(t=1,n=[]){this.lineNumber=t,this.chunks=n,p(this,"text"),this.text=n.map(s=>s.text).join("").toLocaleLowerCase("en-US")}lastChunk(){return this.chunks[this.chunks.length-1]}replaceLastChunk(t){t&&(this.chunks.splice(this.chunks.length-1,1,...t),this.text=this.chunks.map(n=>n.text).join("").toLocaleLowerCase("en-US"))}}class re{constructor(){p(this,"text",""),p(this,"lines",[]),p(this,"processLines",(t,n={},s=1)=>{var r;const l=[];let i=n,d=s,a=0;for(H.lastIndex=0;;){const u=H.exec(t);if(!u){const g=this.processText(t.slice(a),i);return l.push(new L(d,g)),l}const h=t.slice(a,u.index);a=u.index+u[0].length;const f=this.processText(h,i);l.push(new L(d,f)),i=(r=f[f.length-1].modifiers)!=null?r:i,d+=1}}),p(this,"processText",(t,n)=>{const s=[];let r=n,l=0;for(P.lastIndex=0;;){const i=P.exec(t);if(!i)return s.push({text:t.slice(l),modifiers:r}),s;const d=t.slice(l,i.index);s.push({text:d,modifiers:r}),l=i.index+i[0].length,r=this.processCode(i[0],r)}}),p(this,"processCode",(t,n)=>{var s,r;return(r=(s=O[t])==null?void 0:s.call(O,n))!=null?r:n})}process(t){var n,s,r;if(this.text===t)return this.lines;if(this.text&&t.startsWith(this.text)){const l=this.lines.length>0?this.lines.length-1:0,i=(n=this.lines[l])!=null?n:new L,d=i.lastChunk(),a=this.processLines(((s=d==null?void 0:d.text)!=null?s:"")+t.slice(this.text.length),d==null?void 0:d.modifiers,i==null?void 0:i.lineNumber);i.replaceLastChunk((r=a[0])==null?void 0:r.chunks),this.lines[l]=i,this.lines=this.lines.concat(a.slice(1))}else this.lines=this.processLines(t);return this.text=t,this.lines}}function le(e,t){const n=new Array;if(t.bold&&n.push(e.modifierBold),t.italic&&n.push(e.modifierItalic),t.underline&&n.push(e.modifierUnderline),t.foreground){const s=`modifierForeground${B()(t.foreground)}`;n.push(e[s])}if(t.background){const s=`modifierBackground${B()(t.background)}`;n.push(e[s])}return n.length>0?n.join(" "):void 0}function ie(e,t){if(!t||!e.includes(t))return;const n=new Array;let s=0;for(;;){const r=e.indexOf(t,s);if(r===-1)break;const l=r+t.length;n.push({start:r,end:l}),s=l}return n}function ae(e,t){const n=ie(e.text,t);if(!n)return e.chunks;const s=new Array;let r=0,l=0,i=n[l];for(const d of e.chunks){const{text:a,modifiers:u}=d;if(!i||r+a.length<i.start){s.push(d),r+=a.length;continue}let h=0;for(;i;){const g=Math.max(i.start-r,0);if(g>a.length)break;const v=Math.min(i.end-r,a.length);if(g>h&&s.push({text:a.slice(h,g),modifiers:u}),v>g&&s.push({modifiers:u,highlight:l,text:a.slice(g,v)}),h=v,i.end-r===v)l+=1,i=n[l];else break}h<a.length&&s.push({text:a.slice(h),modifiers:u}),r+=a.length}return s}const ce=({attributes:e,content:t})=>{const{href:n,...s}=e;return c.createElement(J.N_,{to:n,...s},t)};function de({line:e,classes:t,searchText:n,highlightResultIndex:s}){const r=(0,c.useMemo)(()=>ae(e,n),[e,n]),l=(0,c.useMemo)(()=>r.map(({text:i,modifiers:d,highlight:a},u)=>c.createElement("span",{key:u,className:E()(le(t,d),a!==void 0&&(a===s?t.textSelectedHighlight:t.textHighlight))},c.createElement(X.A,{options:{render:ce}},i))),[r,s,t]);return c.createElement(c.Fragment,null,l)}function ue(e){var t;const{resultCount:n,resultIndexStep:s,toggleShouldFilter:r}=e,l=(t=e.resultIndex)!=null?t:0,i=d=>{d.key==="Enter"&&(d.metaKey||d.ctrlKey||d.altKey?r():s(d.shiftKey))};return c.createElement(c.Fragment,null,n!==void 0&&c.createElement(c.Fragment,null,c.createElement(y.A,{size:"small",onClick:()=>s(!0)},c.createElement(q.A,null)),c.createElement(w.A,null,Math.min(l+1,n),"/",n),c.createElement(y.A,{size:"small",onClick:()=>s()},c.createElement(_.A,null))),c.createElement(Q.A,{size:"small",variant:"standard",placeholder:"Search",value:e.searchInput,onKeyPress:i,onChange:d=>e.setSearchInput(d.target.value)}),c.createElement(y.A,{size:"small",onClick:r},e.shouldFilter?c.createElement(R.A,{color:"primary"}):c.createElement(R.A,{color:"disabled"})))}const V=40,he=(0,ee.A)(e=>({root:{background:e.palette.background.paper},header:{height:V,display:"flex",alignItems:"center",justifyContent:"flex-end"},log:{fontFamily:'"Monaco", monospace',fontSize:e.typography.pxToRem(12)},line:{position:"relative",whiteSpace:"pre","&:hover":{background:e.palette.action.hover}},lineSelected:{background:e.palette.action.selected,"&:hover":{background:e.palette.action.selected}},lineCopyButton:{position:"absolute",paddingTop:0,paddingBottom:0},lineNumber:{display:"inline-block",textAlign:"end",width:60,marginRight:e.spacing(1),cursor:"pointer"},textHighlight:{background:(0,I.X4)(e.palette.info.main,.15)},textSelectedHighlight:{background:(0,I.X4)(e.palette.info.main,.4)},modifierBold:{fontWeight:e.typography.fontWeightBold},modifierItalic:{fontStyle:"italic"},modifierUnderline:{textDecoration:"underline"},modifierForegroundBlack:{color:A.A.black},modifierForegroundRed:{color:b.A[500]},modifierForegroundGreen:{color:F.A[500]},modifierForegroundYellow:{color:M.A[500]},modifierForegroundBlue:{color:N.A[500]},modifierForegroundMagenta:{color:z.A[500]},modifierForegroundCyan:{color:T.A[500]},modifierForegroundWhite:{color:A.A.white},modifierForegroundGrey:{color:j.A[500]},modifierBackgroundBlack:{background:A.A.black},modifierBackgroundRed:{background:b.A[500]},modifierBackgroundGreen:{background:F.A[500]},modifierBackgroundYellow:{background:M.A[500]},modifierBackgroundBlue:{background:N.A[500]},modifierBackgroundMagenta:{background:z.A[500]},modifierBackgroundCyan:{background:T.A[500]},modifierBackgroundWhite:{background:A.A.white},modifierBackgroundGrey:{background:j.A[500]}}),{name:"BackstageLogViewer"});function fe(e,t){if(!t)return{lines:e};const n=[],s=[];for(const r of e)if(r.text.includes(t)){n.push(r);let l=0,i=0;for(;;){const d=r.text.indexOf(t,l);if(d===-1)break;s.push({lineNumber:r.lineNumber,lineIndex:i++}),l=d+t.length}}return{lines:n,results:s}}function ge(e){var t;const[n,s]=(0,c.useState)(""),r=n.toLocaleLowerCase("en-US"),[l,i]=(0,c.useState)(0),[d,a]=(0,te.e)(!1),u=(0,c.useMemo)(()=>fe(e,r),[e,r]),h=u.results?u.results[Math.min(l,u.results.length-1)]:void 0,f=(t=u.results)==null?void 0:t.length,g=v=>{if(v){if(f!==void 0){const m=Math.min(l-1,f-2);i(m<0?f-1:m)}}else if(f!==void 0){const m=l+1;i(m>=f?0:m)}};return{lines:d?u.lines:e,searchText:r,searchInput:n,setSearchInput:s,shouldFilter:d,toggleShouldFilter:a,resultCount:f,resultIndex:l,resultIndexStep:g,resultLine:h==null?void 0:h.lineNumber,resultLineIndex:h==null?void 0:h.lineIndex}}function me(e){const t=(0,K.u)(K.r),[n,s]=(0,c.useState)(),r=n?Math.min(n.start,n.end):void 0,l=n?Math.max(n.start,n.end):void 0,[{error:i},d]=(0,ne.A)();return(0,c.useEffect)(()=>{i&&t.post(i)},[i,t]),{shouldShowButton(a){return r===a||l===a},isSelected(a){return n?r<=a&&a<=l:!1},setSelection(a,u){s(u?h=>h?{start:h.start,end:a}:{start:a,end:a}:h=>(h==null?void 0:h.start)===a&&(h==null?void 0:h.end)===a?void 0:{start:a,end:a})},copySelection(){if(n){const a=e.slice(Math.min(n.start,n.end)-1,Math.max(n.start,n.end)).map(u=>u.chunks.map(h=>h.text).join("")).join(`
`);d(a),s(void 0)}}}}function ve(e){const t=he({classes:e.classes}),n=(0,c.useRef)(null),r=(0,c.useMemo)(()=>new re,[]).process(e.text),l=ge(r),i=me(r),d=(0,Z.zy)();(0,c.useEffect)(()=>{l.resultLine!==void 0&&n.current&&n.current.scrollToItem(l.resultLine-1,"center")},[l.resultLine]),(0,c.useEffect)(()=>{if(d.hash){const u=parseInt(d.hash.replace(/\D/g,""),10);i.setSelection(u,!1)}},[]);const a=(u,h)=>{i.setSelection(u,h.shiftKey)};return c.createElement(D.Ay,null,({height:u,width:h})=>c.createElement(C.A,{style:{width:h,height:u},className:t.root},c.createElement(C.A,{className:t.header},c.createElement(ue,{...l})),c.createElement(G.Y1,{ref:n,className:t.log,height:(u||480)-V,width:h||640,itemData:l.lines,itemSize:20,itemCount:l.lines.length},({index:f,style:g,data:v})=>{const m=v[f],{lineNumber:x}=m;return c.createElement(C.A,{style:{...g},className:E()(t.line,{[t.lineSelected]:i.isSelected(x)})},i.shouldShowButton(x)&&c.createElement(y.A,{"data-testid":"copy-button",size:"small",className:t.lineCopyButton,onClick:()=>i.copySelection()},c.createElement(U.A,{fontSize:"inherit"})),c.createElement("a",{role:"row",target:"_self",href:`#line-${x}`,className:t.lineNumber,onClick:S=>a(x,S),onKeyPress:S=>a(x,S)},x),c.createElement(de,{line:m,classes:t,searchText:l.searchText,highlightResultIndex:l.resultLine===x?l.resultLineIndex:void 0}))})))}}}]);})();

//# sourceMappingURL=6936.00c04807.chunk.js.map