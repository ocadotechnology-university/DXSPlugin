"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9521],{74257:(b,y,t)=>{t.d(y,{C:()=>T});var n=t(29835),E=t(23180),r=t(92651),P=t(58054),h=t(72501),c=t(7031);const O={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};var D=t(75625),I=t(39330),K=t(80109),B=t(15303),V=t(45250),L=t(65398),j=t.n(L),a=t(14041),x=t(67720);const d=Object.freeze({createNameColumn(e){function l(o){var i;return((i=o.metadata)==null?void 0:i.title)||(0,r.SE)(o,{defaultKind:e==null?void 0:e.defaultKind})}return{title:"Name",field:"resolved.entityRef",highlight:!0,customSort({entity:o},{entity:i}){return l(o).localeCompare(l(i))},render:({entity:o})=>a.createElement(r.zI,{entityRef:o,defaultKind:(e==null?void 0:e.defaultKind)||"Component"})}},createSystemColumn(){return{title:"System",field:"resolved.partOfSystemRelationTitle",render:({resolved:e})=>a.createElement(r.iI,{entityRefs:e.partOfSystemRelations,defaultKind:"system"})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:e})=>a.createElement(r.iI,{entityRefs:e.ownedByRelations,defaultKind:"group"})}},createSpecTargetsColumn(){return{title:"Targets",field:"entity.spec.targets",render:({entity:e})=>{var l,o;return a.createElement(a.Fragment,null,(((l=e==null?void 0:e.spec)==null?void 0:l.targets)||((o=e==null?void 0:e.spec)==null?void 0:o.target))&&a.createElement(E.Mm,{text:(e.spec.targets||[e.spec.target]).join(", "),placement:"bottom-start"}))}}},createSpecTypeColumn(e={hidden:!1}){return{title:"Type",field:"entity.spec.type",hidden:e.hidden,width:"auto"}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"entity.spec.lifecycle"}},createMetadataDescriptionColumn(){return{title:"Description",field:"entity.metadata.description",render:({entity:e})=>a.createElement(E.Mm,{text:e.metadata.description,placement:"bottom-start"}),width:"auto"}},createTagsColumn(){return{title:"Tags",field:"entity.metadata.tags",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:e})=>a.createElement(a.Fragment,null,e.metadata.tags&&e.metadata.tags.map(l=>a.createElement(x.A,{key:l,label:l,size:"small",variant:"outlined",style:{marginBottom:"0px"}}))),width:"auto"}},createTitleColumn(e){return{title:"Title",field:"entity.metadata.title",hidden:e==null?void 0:e.hidden,searchable:!0}},createLabelColumn(e,l){return{title:(l==null?void 0:l.title)||"Label",field:"entity.metadata.labels",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:o})=>{var i;const u=(i=o.metadata)==null?void 0:i.labels,s=u&&u[e]||(l==null?void 0:l.defaultValue);return a.createElement(a.Fragment,null,s&&a.createElement(x.A,{key:s,label:s,size:"small",variant:"outlined"}))},width:"auto"}},createNamespaceColumn(){return{title:"Namespace",field:"entity.metadata.namespace",width:"auto"}}});function w(e){const{columns:l,data:o,next:i,prev:u}=e,{updateFilters:s}=(0,r.nK)();return a.createElement(E.XI,{columns:l,data:o,options:{paginationPosition:"both",pageSizeOptions:[],showFirstLastPageButtons:!1,pageSize:Number.MAX_SAFE_INTEGER,emptyRowsWhenPaging:!1},onSearchChange:m=>s({text:m?new r.V3(m):void 0}),onPageChange:m=>{m>0?i==null||i():u==null||u()},page:u?1:0,totalCount:i?Number.MAX_VALUE:Number.MAX_SAFE_INTEGER,localization:{pagination:{labelDisplayedRows:""}}})}const S=({filters:e,entities:l})=>{var o;const i=e.type===void 0;return[d.createTitleColumn({hidden:!0}),d.createNameColumn({defaultKind:(o=e.kind)==null?void 0:o.value}),...u(),d.createMetadataDescriptionColumn(),d.createTagsColumn()];function u(){var s;const m=[d.createSystemColumn(),d.createOwnerColumn(),d.createSpecTypeColumn({hidden:!i}),d.createSpecLifecycleColumn()];switch((s=e.kind)==null?void 0:s.value){case"user":return[];case"domain":case"system":return[d.createOwnerColumn()];case"group":case"template":return[d.createSpecTypeColumn({hidden:!i})];case"location":return[d.createSpecTypeColumn({hidden:!i}),d.createSpecTargetsColumn()];default:return l.every(v=>v.metadata.namespace==="default")?m:[...m,d.createNamespaceColumn()]}}},R=(0,c.A)({root:{color:"#f3ba37"}})(K.A),A=(e,l)=>{const o=i=>i.metadata.title||(0,r.SE)(i,{defaultKind:"Component"});return o(e).localeCompare(o(l))},T=e=>{var l,o,i,u;const{columns:s=S,tableOptions:m,subtitle:v,emptyContent:H}=e,{isStarredEntity:k,toggleStarredEntity:q}=(0,r.IT)(),z=(0,r.nK)(),{loading:U,error:G,entities:_,filters:W,pageInfo:F}=z,ee=!!F,X=(0,a.useMemo)(()=>typeof s=="function"?s(z):s,[s,z]);if(G)return a.createElement("div",null,a.createElement(E.Bp,{severity:"error",title:"Could not fetch catalog entities."},a.createElement(E.z7,{language:"text",text:G.toString()})));const te=[({entity:f})=>{var C;const g=(C=f.metadata.annotations)==null?void 0:C[n._P],M="View";return{icon:()=>a.createElement(a.Fragment,null,a.createElement(h.A,{style:O},M),a.createElement(I.A,{fontSize:"small"})),tooltip:M,disabled:!g,onClick:()=>{g&&window.open(g,"_blank")}}},({entity:f})=>{var C;const g=(C=f.metadata.annotations)==null?void 0:C[n.P],M="Edit";return{icon:()=>a.createElement(a.Fragment,null,a.createElement(h.A,{style:O},M),a.createElement(D.A,{fontSize:"small"})),tooltip:M,disabled:!g,onClick:()=>{g&&window.open(g,"_blank")}}},({entity:f})=>{const C=k(f),g=C?"Remove from favorites":"Add to favorites";return{cellStyle:{paddingLeft:"1em"},icon:()=>a.createElement(a.Fragment,null,a.createElement(h.A,{style:O},g),C?a.createElement(R,null):a.createElement(B.A,null)),tooltip:g,onClick:()=>q(f)}}],ae=((l=W.kind)==null?void 0:l.value)||"",ne=((o=W.type)==null?void 0:o.value)||"",$=[(0,V.capitalize)((u=(i=W.user)==null?void 0:i.value)!=null?u:"all"),ne,j()(ae)].filter(f=>f).join(" "),le=`${$} (${_.length})`,Y=e.actions||te,J={actionsColumnIndex:-1,loadingType:"linear",showEmptyDataSourceMessage:!U,padding:"dense",...m};if(ee)return a.createElement(w,{columns:X,emptyContent:H,isLoading:U,title:le,actions:Y,subtitle:v,options:J,data:_.map(p),next:F.next,prev:F.prev});const Q=_.sort(A).map(p),Z=20,oe=Q.length>Z;return a.createElement(E.XI,{isLoading:U,columns:X,options:{paging:oe,pageSize:Z,pageSizeOptions:[20,50,100],...J},title:`${$} (${_.length})`,data:Q,actions:Y,subtitle:v,emptyContent:H})};T.columns=d,T.defaultColumnsFunc=S;function p(e){const l=(0,P.g)(e,n.jn,{kind:"system"}),o=(0,P.g)(e,n.vv);return{entity:e,resolved:{name:(0,r.SE)(e,{defaultKind:"Component"}),entityRef:(0,n.U2)(e),ownedByRelationsTitle:o.map(i=>(0,r.SE)(i,{defaultKind:"group"})).join(", "),ownedByRelations:o,partOfSystemRelationTitle:l.map(i=>(0,r.SE)(i,{defaultKind:"system"})).join(", "),partOfSystemRelations:l}}}},99521:(b,y,t)=>{t.r(y),t.d(y,{BaseCatalogPage:()=>R,CatalogPage:()=>T,DefaultCatalogPage:()=>A});var n=t(14041),E=t(18690),r=t(23180),P=t(48821),h=t(11638),c=t(92651),N=t(41241),O=t(74257),D=t(59294),I=t(99993),K=t(17899),B=t(25033),V=t.n(B),L=t(96403),j=t.n(L),a=t(45250),x=t.n(a),d=t(65398),w=t.n(d);const S=(0,D.h2)({id:"catalog",messages:{indexPage:{title:"{{orgName}} Catalog",createButtonTitle:"Create"}}});function R(p){var e;const{filters:l,content:o=n.createElement(O.C,null),pagination:i}=p,u=(e=(0,P.u)(P.p).getOptionalString("organization.name"))!=null?e:"Backstage",s=(0,h.Sf)(N.c),{t:m}=(0,D.ie)(S),{allowed:v}=(0,K.JT)({permission:I.C4});return n.createElement(r.dT,{title:m("indexPage.title",{orgName:u}),themeId:"home"},n.createElement(r.UC,null,n.createElement(r.dv,{title:""},v&&n.createElement(r.ly,{title:m("indexPage.createButtonTitle"),to:s&&s()}),n.createElement(r.Yl,null,"All your software catalog entities")),n.createElement(c.B9,{pagination:i},n.createElement(c.GI,null,n.createElement(c.GI.Filters,null,l),n.createElement(c.GI.Content,null,o)))))}function A(p){const{columns:e,actions:l,initiallySelectedFilter:o="owned",initialKind:i="component",tableOptions:u={},emptyContent:s,pagination:m,ownerPickerMode:v}=p;return n.createElement(R,{filters:n.createElement(n.Fragment,null,n.createElement(c.mb,{initialFilter:i}),n.createElement(c.QD,null),n.createElement(c.y2,{initialFilter:o}),n.createElement(c.t3,{mode:v}),n.createElement(c.WI,null),n.createElement(c.mo,null),n.createElement(c.n5,null),n.createElement(c.VF,null)),content:n.createElement(O.C,{columns:e,actions:l,tableOptions:u,emptyContent:s}),pagination:m})}function T(p){return(0,E.P1)()||n.createElement(A,{...p})}},39330:(b,y,t)=>{var n,E=t(4293),r=t(78920);n={value:!0},y.A=void 0;var P=r(t(14041)),h=E(t(74044)),c=(0,h.default)(P.createElement("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}),"OpenInNew");y.A=c}}]);})();

//# sourceMappingURL=9521.192b52dc.chunk.js.map