{"version":3,"file":"static/4858.6cdf0d47.chunk.js","mappings":"yUAYA,MAAMA,EAA0B,CAC9B,UAAW,GACX,cAAe,EACf,eAAgB,EAChB,OAAQ,CAAC,EACT,QAAS,GACT,KAAM,QACR,EACMC,EAAsB,CAC1B,GAAGD,EACH,aAAc,IAAM,CACpB,EACA,iBAAkB,IAAM,CACxB,EACA,kBAAmB,IAAM,CACzB,EACA,UAAW,IAAM,CACjB,EACA,WAAY,IAAM,CAClB,EACA,QAAS,IAAM,CACf,EACA,WAAY,IAAM,CAClB,CACF,EACME,KAAU,iBAAcD,CAAmB,EAC3CE,EAAiB,CAACC,EAAYC,IAAgBC,GAAMF,EAAYG,IAAW,CAC/E,GAAGA,EACH,CAACF,CAAU,EAAG,OAAOC,GAAM,WAAaA,EAAEC,EAAMF,CAAU,CAAC,EAAIC,CACjE,EAAE,EACIE,EAAkB,CAAC,CAAE,SAAAC,CAAS,IAAM,CACxC,KAAM,CAACC,EAASN,CAAU,EAAI,WAC5BJ,CACF,EACM,CACJ,aAAAW,EACA,iBAAAC,EACA,kBAAAC,EACA,UAAAC,EACA,WAAAC,EACA,QAAAC,CACF,KAAI,WACF,KAAO,CACL,aAAcb,EAAeC,EAAY,WAAW,EACpD,iBAAkBD,EAAeC,EAAY,eAAe,EAC5D,kBAAmBD,EAAeC,EAAY,gBAAgB,EAC9D,UAAWD,EAAeC,EAAY,QAAQ,EAC9C,WAAYD,EAAeC,EAAY,SAAS,EAChD,QAASD,EAAeC,EAAY,MAAM,CAC5C,GACA,CAACA,CAAU,CACb,EACMa,EAAQ,CACZ,GAAGP,EACH,WAAAN,EACA,aAAAO,EACA,iBAAAC,EACA,kBAAAC,EACA,UAAAC,EACA,WAAAC,EACA,QAAAC,CACF,EACA,OAAuB,gBAAoBd,EAAQ,SAAU,CAAE,MAAAe,CAAM,EAAGR,CAAQ,CAClF,EACMS,EAAa,IAAM,CACvB,MAAMD,EAAQ,aAAiBf,CAAO,EACtC,GAAIe,IAAU,OACZ,MAAM,IAAI,MACR,4FACF,EACF,OAAOA,CACT,EAEME,EAAU,IAAM,CACpB,KAAM,CAAE,UAAAC,EAAW,aAAAT,EAAc,OAAAU,EAAQ,cAAAC,EAAe,QAAAC,CAAQ,EAAIL,EAAW,EACzEM,KAAU,eACd,IAAMb,EAAcc,GAAkB,CAACA,CAAa,EACpD,CAACd,CAAY,CACf,EACMe,EAAQN,EAAY,YAAc,YACxC,MAAI,CAACG,GAAWF,EAAO,QAAUC,EACR,gBAAoB,WAAgB,IAAI,EAC1C,gBAAoB,IAAQ,CAAE,QAAS,OAAQ,QAAAE,CAAQ,EAAGE,CAAK,CACxF,EAEA,SAASC,EAAiBC,EAAQ,CAChC,GAAI,CACF,MAAMC,EAAQD,EAAO,UAAU,OAAO,EAChCE,EAAWF,EAAO,UAAU,UAAU,EACtCX,EAAQc,EAASH,CAAM,EAC7B,SAAI,KAAWE,CAAQ,GAAKb,IAAU,OAC7B,CAAE,MAAAY,EAAO,SAAAC,EAAU,MAAAb,CAAM,EAElC,MACF,MAAgB,CACd,MACF,CACF,CACA,SAASc,EAASH,EAAQ,CACxB,IAAIX,EACJ,GAAI,CACFA,EAAQW,EAAO,UAAU,OAAO,CAClC,MAAgB,CACd,GAAI,CACFX,EAAQW,EAAO,UAAU,OAAO,CAClC,MAAQ,CACR,CACF,CACA,OAAOX,CACT,CACA,SAASe,EAAmCC,EAAS,CACnD,GAAI,CACF,OAAOA,EAAQ,IAAIN,CAAgB,EAAE,OAAO,OAAO,CACrD,MAAQ,CACN,MACF,CACF,CAEA,MAAMO,KAAc,KAAYC,IAAY,CAC1C,KAAM,CACJ,WAAY,SACZ,YAAa,QACf,CACF,EAAE,EACIC,EAAW,CAAC,CAAE,MAAAC,CAAM,IAAM,CAC9B,MAAMC,EAAUJ,EAAY,EAC5B,OAAuB,gBACrB,IACA,CACE,UAAW,KACX,GAAIG,EAAM,SACV,OAAQ,GACR,UAAWC,EAAQ,IACrB,EACAD,EAAM,IACR,CACF,EAEME,EAAiB,CAAC,CAAE,MAAAF,CAAM,IAAsB,gBAAoB,IAAY,CAAE,UAAW,OAAQ,QAAS,UAAW,MAAO,eAAgB,EAAGA,EAAM,KAAM,QAASA,EAAM,KAAO,EAAI,IAAM,EAAE,EACjMG,EAAoB,CAAC,CAAE,MAAAH,CAAM,IAAM,CACvC,IAAII,EACJ,MAAMC,EAAY,KAAS,WAAWL,EAAM,SAAS,EACrD,OAAuB,gBACrB,IACA,CACE,UAAW,OACX,QAAS,UACT,MAAO,gBACP,UAAWI,EAAKC,EAAU,MAAM,IAAM,KAAOD,EAAK,MACpD,EACAC,GAAa,KAAS,IAAI,EAAE,QAAQ,KAAK,EAAIA,EAAU,SAAS,OAAO,EAAIA,EAAU,WAAW,CAClG,CACF,EACMC,EAAa,CAAC,CAClB,MAAAN,EACA,KAAAO,CACF,IAAMA,IAAS,WAA6B,gBAAoBJ,EAAmB,CAAE,MAAAH,CAAM,CAAC,EAAoB,gBAAoBE,EAAgB,CAAE,MAAAF,CAAM,CAAC,EAEvJQ,KAAc,KAAYC,IAAW,CACzC,KAAM,CACJ,MAAOA,EAAM,QAAQ,OAAO,MAC5B,WAAY,OACZ,OAAQ,CACV,CACF,EAAE,EACIC,GAAeV,GAAU,CAC7B,IAAII,EACJ,GAAI,CACF,SAAO,OAAgBA,EAAKJ,GAAS,KAAO,OAASA,EAAM,YAAc,KAAOI,EAAK,EAAE,CACzF,MAAY,CACV,MACF,CACF,EACMO,EAAmBC,GAAU,CACjC,MAAMC,EAAW,OAAO,KAAK,IAAa,EACpCC,EAAeF,EAAQC,EAAS,OACtC,OAAO,KAAcA,EAASC,CAAY,CAAC,EAAE,CAAC,CAChD,EACMC,GAAgBC,GAAW,CAC/B,MAAMC,EAAeN,EAAgB,CAAC,EACtC,GAAI,CAACK,EACH,OAAOC,EAYT,MAAMC,EAXc,CAClB,YACA,WACA,MACA,QACA,OACA,WACA,SACA,SACA,UACF,EAC+B,QAC7BF,EAAO,KAAK,kBAAkB,OAAO,CACvC,EACA,OAAOE,IAAe,GAAKD,EAAeN,EAAgBO,EAAa,CAAC,CAC1E,EACMC,GAAe,CAAC,CAAE,MAAAnB,CAAM,IAAM,CAClC,IAAII,EACJ,MAAMH,EAAUO,EAAY,EACtBQ,EAASN,GAAYV,CAAK,EAChC,OAAuB,gBACrB,IACA,CACE,KAAM,QACN,UAAWC,EAAQ,KACnB,QAASG,EAAKY,GAAU,KAAO,OAASA,EAAO,OAAS,KAAOZ,EAAK,SAAS,kBAAkB,OAAO,EACtG,MAAO,CAAE,WAAYW,GAAaC,CAAM,CAAE,CAC5C,CACF,CACF,EAEMI,MAAc,KAAYtB,IAAY,CAC1C,OAAQ,CACN,SAAU,CACZ,CACF,EAAE,EACIuB,EAAgB,CAAC,CACrB,MAAArB,EACA,WAAAsB,CACF,IAAM,CACJ,MAAMrB,EAAUmB,GAAY,EAC5B,OAAuB,gBAAoB,IAAU,CAAE,eAAgB,EAAK,EAAmB,gBAAoB,IAAgB,CAAE,UAAWnB,EAAQ,MAAO,EAAmB,gBAAoBkB,GAAc,CAAE,MAAAnB,CAAM,CAAC,CAAC,EAAmB,gBAC/O,IACA,CACE,QAAyB,gBAAoBD,EAAU,CAAE,MAAAC,CAAM,CAAC,EAChE,UAA2B,gBAAoBM,EAAY,CAAE,MAAAN,EAAO,KAAMsB,CAAW,CAAC,EACtF,kBAAmB,EACrB,CACF,CAAC,CACH,EAEMC,GAAiB,IAAsB,gBAAoB,WAAgB,KAAsB,gBAAoB,IAAY,CAAE,QAAS,QAAS,MAAO,eAAgB,EAAG,kCAAkC,EAAmB,gBAAoB,IAAY,CAAE,QAAS,QAAS,MAAO,eAAgB,EAAG,8GAA8G,CAAC,EAEjaC,GAAe,IAAsB,gBAAoB,WAAgB,KAAsB,gBAAoB,IAAY,CAAE,QAAS,QAAS,MAAO,eAAgB,EAAG,4DAA4D,CAAC,EAE1OC,MAAc,KAAY3B,IAAY,CAC1C,SAAU,CACR,aAAc,EAChB,CACF,EAAE,EACI4B,EAAwB,IAAM,CAClC,MAAMzB,EAAUwB,GAAY,EAC5B,OAAuB,gBAAoB,IAAU,CAAE,eAAgB,EAAK,EAAmB,gBAAoB,IAAgB,KAAsB,gBACvJ,IACA,CACE,UAAWxB,EAAQ,SACnB,QAAS,OACT,MAAO,GACP,OAAQ,EACV,CACF,CAAC,EAAmB,gBAClB,IACA,CACE,QAAyB,gBAAoB,IAAU,CAAE,QAAS,OAAQ,MAAO,OAAQ,OAAQ,EAAG,CAAC,EACrG,kBAAmB,EACrB,CACF,CAAC,CACH,EACM0B,GAAoB,CAAC,CACzB,cAAA1C,EACA,eAAA2C,EACA,UAAA7C,CACF,IAAsB,gBAAoB,WAAgB,KAAM,MAAME,CAAa,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC4C,EAAIjB,IAA0B,gBAAoBc,EAAuB,CAAE,IAAKd,CAAM,CAAC,CAAC,EAAGgB,EAAiB3C,GAAiC,gBAAoB,IAAU,CAAE,GAAI,CAACF,CAAU,EAAG,MAAM6C,EAAiB3C,CAAa,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC4C,EAAIjB,IAA0B,gBAAoBc,EAAuB,CAAE,IAAKd,CAAM,CAAC,CAAC,CAAC,CAAC,EAE9akB,MAAY,KAAYhC,IAAY,CACxC,MAAO,CACL,aAAc,MAChB,CACF,EAAE,EACIiC,GAAY,CAAC,CACjB,MAAAC,EACA,WAAAV,EACA,OAAAtC,EAAS,CAAC,EACV,cAAAC,EAAgB,EAChB,eAAA2C,EAAiB,EACjB,UAAA7C,EAAY,GACZ,QAAAG,EAAU,EACZ,IAAM,CACJ,MAAMe,EAAU6B,GAAU,EAC1B,IAAIG,EAA2B,gBAAoB,WAAgB,IAAI,EACvE,OAAI/C,EACF+C,EAA2B,gBACzBN,GACA,CACE,cAAA1C,EACA,eAAA2C,EACA,UAAA7C,CACF,CACF,EACSC,EAAO,SAAW,EAC3BiD,EAA2B,gBAAoBV,GAAgB,IAAI,EAC1DvC,EAAO,OAASC,EACzBgD,EAA2B,gBAAoB,WAAgB,KAAMjD,EAAO,IAAI,CAACgB,EAAOY,IAA0B,gBAAoBS,EAAe,CAAE,MAAArB,EAAO,IAAKY,EAAO,WAAAU,CAAW,CAAC,CAAC,EAAmB,gBAAoBE,GAAc,IAAI,CAAC,EAEjPS,EAA2B,gBAAoB,WAAgB,KAAMjD,EAAO,MAAM,EAAGC,CAAa,EAAE,IAAI,CAACe,EAAOY,IAA0B,gBAAoBS,EAAe,CAAE,MAAArB,EAAO,IAAKY,EAAO,WAAAU,CAAW,CAAC,CAAC,EAAGtC,EAAO,OAASC,GAAiC,gBAAoB,IAAU,CAAE,GAAI,CAACF,CAAU,EAAGC,EAAO,MAAMC,EAAe2C,CAAc,EAAE,IAAI,CAAC5B,EAAOY,IAA0B,gBACrYS,EACA,CACE,MAAArB,EACA,IAAKY,EACL,WAAAU,CACF,CACF,CAAC,CAAC,CAAC,EAEkB,gBAAoB,WAAgB,KAAsB,gBAAoB,IAAY,CAAE,QAAS,KAAM,UAAWrB,EAAQ,KAAM,EAAG+B,CAAK,EAAmB,gBAAoB,IAAM,CAAE,MAAO,GAAM,eAAgB,EAAK,EAAGC,CAAQ,CAAC,CAClQ,EAEMC,GAAgB,IAAM,CAC1B,KAAM,CAAE,UAAAnD,EAAW,cAAAE,EAAe,eAAA2C,EAAgB,OAAA5C,EAAQ,QAAAE,EAAS,KAAAiD,CAAK,EAAItD,EAAW,EACvF,OAAuB,gBACrBkD,GACA,CACE,OAAA/C,EACA,MAAOmD,IAAS,MAAQ,cAAgB,mBACxC,WAAYA,IAAS,MAAQ,OAAS,WACtC,UAAApD,EACA,cAAAE,EACA,eAAA2C,EACA,QAAA1C,CACF,CACF,CACF,EAEMkD,GAAU,CAAC,CACf,OAAApD,EACA,cAAAC,EACA,eAAA2C,EACA,QAAA1C,EACA,KAAAiD,CACF,IAAM,CACJ,KAAM,CAAE,WAAApE,EAAY,UAAAU,EAAW,WAAAC,CAAW,EAAIG,EAAW,KACzD,aAAU,IAAM,CACd,MAAMR,EAAU,CAAC,EACjBA,EAAQ,KAAO8D,EACXnD,GACFX,EAAQ,OAASW,EACjBX,EAAQ,QAAU,IACTa,IACTb,EAAQ,QAAUa,GAEhBD,IACFZ,EAAQ,cAAgBY,GACtB2C,IACFvD,EAAQ,eAAiBuD,GAC3B7D,EAAYG,IAAW,CAAE,GAAGA,EAAO,GAAGG,CAAQ,EAAE,CAClD,EAAG,CAACN,EAAYoE,EAAMnD,EAAQE,EAASD,EAAe2C,CAAc,CAAC,EACrE,MAAMrC,KAAS,KAAO,GAAY,EAC5B8C,KAAY,KAAO,GAAY,EAC/B,CAAE,QAASC,CAAW,KAAI,WAAS,SAAY,CACnD,IAAIlC,EAAImC,EACR,GAAI,CAACvD,GAAU,CAACE,GAAWiD,IAAS,SAAU,CAC5C,MAAMK,EAAW7C,GACdS,EAAKb,EAAO,uBAAuB,4BAA4B,IAAM,KAAOa,EAAK,CAAC,CACrF,EACA,OAAO,MAAMiC,EAAU,KAAK,CAC1B,MAAOT,GAAkB,KAAOA,EAAiB,EACjD,QAAS,CAAC,CAAE,MAAO,YAAa,UAAW,MAAO,CAAC,EACnD,GAAGY,GAAY,CAAE,SAAAA,CAAS,CAC5B,CAAC,EAAE,KAAK/D,CAAS,CACnB,CACA,GAAI,CAACO,GAAU,CAACE,GAAWiD,IAAS,MAAO,CACzC,MAAMK,EAAW7C,GACd4C,EAAKhD,EAAO,uBAAuB,yBAAyB,IAAM,KAAOgD,EAAK,CAAC,CAClF,EACA,OAAO,MAAMF,EAAU,KAAK,CAC1B,MAAOT,GAAkB,KAAOA,EAAiB,EACjD,QAAS,CAAC,CAAE,MAAO,OAAQ,UAAW,MAAO,CAAC,EAC9C,GAAGY,GAAY,CAAE,SAAAA,CAAS,CAC5B,CAAC,EAAE,KAAK/D,CAAS,CACnB,CAEF,EAAG,CAAC4D,EAAWrD,EAAQE,EAAST,CAAS,CAAC,EAC1C,sBAAU,IAAM,CACTS,GACHR,EAAW4D,CAAU,CAEzB,EAAG,CAACpD,EAASR,EAAY4D,CAAU,CAAC,EACb,gBAAoBJ,GAAe,IAAI,CAChE,C,sMCnWA,MAAMO,EAA0BC,GAA0B,gBAAoB,IAAS,CAAE,GAAGA,EAAO,KAAM,QAAS,CAAC,C","sources":["webpack://app/../../node_modules/@backstage/plugin-home/dist/esm/Content-cd749ae7.esm.js","webpack://app/../../node_modules/@backstage/plugin-home/dist/esm/RecentlyVisited-c0ca7307.esm.js"],"sourcesContent":["import React, { createContext, useMemo, useCallback, useEffect } from 'react';\nimport { Button, makeStyles, Typography, Chip, ListItem, ListItemAvatar, ListItemText, Collapse, List } from '@material-ui/core';\nimport { i as isOperator, v as visitsApiRef } from './VisitListener-7a513ef0.esm.js';\nimport { Link } from '@backstage/core-components';\nimport { DateTime } from 'luxon';\nimport { colorVariants } from '@backstage/theme';\nimport { parseEntityRef } from '@backstage/catalog-model';\nimport { Skeleton } from '@material-ui/lab';\nimport '@backstage/core-app-api';\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\n\nconst defaultContextValueOnly = {\n  collapsed: true,\n  numVisitsOpen: 3,\n  numVisitsTotal: 8,\n  visits: [],\n  loading: true,\n  kind: \"recent\"\n};\nconst defaultContextValue = {\n  ...defaultContextValueOnly,\n  setCollapsed: () => {\n  },\n  setNumVisitsOpen: () => {\n  },\n  setNumVisitsTotal: () => {\n  },\n  setVisits: () => {\n  },\n  setLoading: () => {\n  },\n  setKind: () => {\n  },\n  setContext: () => {\n  }\n};\nconst Context = createContext(defaultContextValue);\nconst getFilteredSet = (setContext, contextKey) => (e) => setContext((state) => ({\n  ...state,\n  [contextKey]: typeof e === \"function\" ? e(state[contextKey]) : e\n}));\nconst ContextProvider = ({ children }) => {\n  const [context, setContext] = React.useState(\n    defaultContextValueOnly\n  );\n  const {\n    setCollapsed,\n    setNumVisitsOpen,\n    setNumVisitsTotal,\n    setVisits,\n    setLoading,\n    setKind\n  } = useMemo(\n    () => ({\n      setCollapsed: getFilteredSet(setContext, \"collapsed\"),\n      setNumVisitsOpen: getFilteredSet(setContext, \"numVisitsOpen\"),\n      setNumVisitsTotal: getFilteredSet(setContext, \"numVisitsTotal\"),\n      setVisits: getFilteredSet(setContext, \"visits\"),\n      setLoading: getFilteredSet(setContext, \"loading\"),\n      setKind: getFilteredSet(setContext, \"kind\")\n    }),\n    [setContext]\n  );\n  const value = {\n    ...context,\n    setContext,\n    setCollapsed,\n    setNumVisitsOpen,\n    setNumVisitsTotal,\n    setVisits,\n    setLoading,\n    setKind\n  };\n  return /* @__PURE__ */ React.createElement(Context.Provider, { value }, children);\n};\nconst useContext = () => {\n  const value = React.useContext(Context);\n  if (value === void 0)\n    throw new Error(\n      \"VisitedByType useContext found undefined ContextValue, <ContextProvider/> could be missing\"\n    );\n  return value;\n};\n\nconst Actions = () => {\n  const { collapsed, setCollapsed, visits, numVisitsOpen, loading } = useContext();\n  const onClick = useCallback(\n    () => setCollapsed((prevCollapsed) => !prevCollapsed),\n    [setCollapsed]\n  );\n  const label = collapsed ? \"View More\" : \"View Less\";\n  if (!loading && visits.length <= numVisitsOpen)\n    return /* @__PURE__ */ React.createElement(React.Fragment, null);\n  return /* @__PURE__ */ React.createElement(Button, { variant: \"text\", onClick }, label);\n};\n\nfunction readFilterConfig(config) {\n  try {\n    const field = config.getString(\"field\");\n    const operator = config.getString(\"operator\");\n    const value = getValue(config);\n    if (isOperator(operator) && value !== void 0) {\n      return { field, operator, value };\n    }\n    return void 0;\n  } catch (error) {\n    return void 0;\n  }\n}\nfunction getValue(config) {\n  let value = void 0;\n  try {\n    value = config.getString(\"value\");\n  } catch (error) {\n    try {\n      value = config.getNumber(\"value\");\n    } catch {\n    }\n  }\n  return value;\n}\nfunction createFilterByQueryParamFromConfig(configs) {\n  try {\n    return configs.map(readFilterConfig).filter(Boolean);\n  } catch {\n    return void 0;\n  }\n}\n\nconst useStyles$4 = makeStyles((_theme) => ({\n  name: {\n    marginLeft: \"0.8rem\",\n    marginRight: \"0.8rem\"\n  }\n}));\nconst ItemName = ({ visit }) => {\n  const classes = useStyles$4();\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: Link,\n      to: visit.pathname,\n      noWrap: true,\n      className: classes.name\n    },\n    visit.name\n  );\n};\n\nconst ItemDetailHits = ({ visit }) => /* @__PURE__ */ React.createElement(Typography, { component: \"span\", variant: \"caption\", color: \"textSecondary\" }, visit.hits, \" time\", visit.hits > 1 ? \"s\" : \"\");\nconst ItemDetailTimeAgo = ({ visit }) => {\n  var _a;\n  const visitDate = DateTime.fromMillis(visit.timestamp);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"time\",\n      variant: \"caption\",\n      color: \"textSecondary\",\n      dateTime: (_a = visitDate.toISO()) != null ? _a : void 0\n    },\n    visitDate >= DateTime.now().startOf(\"day\") ? visitDate.toFormat(\"HH:mm\") : visitDate.toRelative()\n  );\n};\nconst ItemDetail = ({\n  visit,\n  type\n}) => type === \"time-ago\" ? /* @__PURE__ */ React.createElement(ItemDetailTimeAgo, { visit }) : /* @__PURE__ */ React.createElement(ItemDetailHits, { visit });\n\nconst useStyles$3 = makeStyles((theme) => ({\n  chip: {\n    color: theme.palette.common.white,\n    fontWeight: \"bold\",\n    margin: 0\n  }\n}));\nconst maybeEntity = (visit) => {\n  var _a;\n  try {\n    return parseEntityRef((_a = visit == null ? void 0 : visit.entityRef) != null ? _a : \"\");\n  } catch (e) {\n    return void 0;\n  }\n};\nconst getColorByIndex = (index) => {\n  const variants = Object.keys(colorVariants);\n  const variantIndex = index % variants.length;\n  return colorVariants[variants[variantIndex]][0];\n};\nconst getChipColor = (entity) => {\n  const defaultColor = getColorByIndex(0);\n  if (!entity)\n    return defaultColor;\n  const entityKinds = [\n    \"component\",\n    \"template\",\n    \"api\",\n    \"group\",\n    \"user\",\n    \"resource\",\n    \"system\",\n    \"domain\",\n    \"location\"\n  ];\n  const foundIndex = entityKinds.indexOf(\n    entity.kind.toLocaleLowerCase(\"en-US\")\n  );\n  return foundIndex === -1 ? defaultColor : getColorByIndex(foundIndex + 1);\n};\nconst ItemCategory = ({ visit }) => {\n  var _a;\n  const classes = useStyles$3();\n  const entity = maybeEntity(visit);\n  return /* @__PURE__ */ React.createElement(\n    Chip,\n    {\n      size: \"small\",\n      className: classes.chip,\n      label: ((_a = entity == null ? void 0 : entity.kind) != null ? _a : \"Other\").toLocaleLowerCase(\"en-US\"),\n      style: { background: getChipColor(entity) }\n    }\n  );\n};\n\nconst useStyles$2 = makeStyles((_theme) => ({\n  avatar: {\n    minWidth: 0\n  }\n}));\nconst VisitListItem = ({\n  visit,\n  detailType\n}) => {\n  const classes = useStyles$2();\n  return /* @__PURE__ */ React.createElement(ListItem, { disableGutters: true }, /* @__PURE__ */ React.createElement(ListItemAvatar, { className: classes.avatar }, /* @__PURE__ */ React.createElement(ItemCategory, { visit })), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: /* @__PURE__ */ React.createElement(ItemName, { visit }),\n      secondary: /* @__PURE__ */ React.createElement(ItemDetail, { visit, type: detailType }),\n      disableTypography: true\n    }\n  ));\n};\n\nconst VisitListEmpty = () => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", color: \"textSecondary\" }, \"There are no visits to show yet.\"), /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", color: \"textSecondary\" }, \"Once you start using Backstage, your visits will appear here as a quick link to carry on where you left off.\"));\n\nconst VisitListFew = () => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", color: \"textSecondary\" }, \"The more pages you visit, the more pages will appear here.\"));\n\nconst useStyles$1 = makeStyles((_theme) => ({\n  skeleton: {\n    borderRadius: 30\n  }\n}));\nconst VisitListItemSkeleton = () => {\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(ListItem, { disableGutters: true }, /* @__PURE__ */ React.createElement(ListItemAvatar, null, /* @__PURE__ */ React.createElement(\n    Skeleton,\n    {\n      className: classes.skeleton,\n      variant: \"rect\",\n      width: 50,\n      height: 24\n    }\n  )), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: /* @__PURE__ */ React.createElement(Skeleton, { variant: \"text\", width: \"100%\", height: 28 }),\n      disableTypography: true\n    }\n  ));\n};\nconst VisitListSkeleton = ({\n  numVisitsOpen,\n  numVisitsTotal,\n  collapsed\n}) => /* @__PURE__ */ React.createElement(React.Fragment, null, Array(numVisitsOpen).fill(null).map((_e, index) => /* @__PURE__ */ React.createElement(VisitListItemSkeleton, { key: index })), numVisitsTotal > numVisitsOpen && /* @__PURE__ */ React.createElement(Collapse, { in: !collapsed }, Array(numVisitsTotal - numVisitsOpen).fill(null).map((_e, index) => /* @__PURE__ */ React.createElement(VisitListItemSkeleton, { key: index }))));\n\nconst useStyles = makeStyles((_theme) => ({\n  title: {\n    marginBottom: \"2rem\"\n  }\n}));\nconst VisitList = ({\n  title,\n  detailType,\n  visits = [],\n  numVisitsOpen = 3,\n  numVisitsTotal = 8,\n  collapsed = true,\n  loading = false\n}) => {\n  const classes = useStyles();\n  let listBody = /* @__PURE__ */ React.createElement(React.Fragment, null);\n  if (loading) {\n    listBody = /* @__PURE__ */ React.createElement(\n      VisitListSkeleton,\n      {\n        numVisitsOpen,\n        numVisitsTotal,\n        collapsed\n      }\n    );\n  } else if (visits.length === 0) {\n    listBody = /* @__PURE__ */ React.createElement(VisitListEmpty, null);\n  } else if (visits.length < numVisitsOpen) {\n    listBody = /* @__PURE__ */ React.createElement(React.Fragment, null, visits.map((visit, index) => /* @__PURE__ */ React.createElement(VisitListItem, { visit, key: index, detailType })), /* @__PURE__ */ React.createElement(VisitListFew, null));\n  } else {\n    listBody = /* @__PURE__ */ React.createElement(React.Fragment, null, visits.slice(0, numVisitsOpen).map((visit, index) => /* @__PURE__ */ React.createElement(VisitListItem, { visit, key: index, detailType })), visits.length > numVisitsOpen && /* @__PURE__ */ React.createElement(Collapse, { in: !collapsed }, visits.slice(numVisitsOpen, numVisitsTotal).map((visit, index) => /* @__PURE__ */ React.createElement(\n      VisitListItem,\n      {\n        visit,\n        key: index,\n        detailType\n      }\n    ))));\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\", className: classes.title }, title), /* @__PURE__ */ React.createElement(List, { dense: true, disablePadding: true }, listBody));\n};\n\nconst VisitedByType = () => {\n  const { collapsed, numVisitsOpen, numVisitsTotal, visits, loading, kind } = useContext();\n  return /* @__PURE__ */ React.createElement(\n    VisitList,\n    {\n      visits,\n      title: kind === \"top\" ? \"Top Visited\" : \"Recently Visited\",\n      detailType: kind === \"top\" ? \"hits\" : \"time-ago\",\n      collapsed,\n      numVisitsOpen,\n      numVisitsTotal,\n      loading\n    }\n  );\n};\n\nconst Content = ({\n  visits,\n  numVisitsOpen,\n  numVisitsTotal,\n  loading,\n  kind\n}) => {\n  const { setContext, setVisits, setLoading } = useContext();\n  useEffect(() => {\n    const context = {};\n    context.kind = kind;\n    if (visits) {\n      context.visits = visits;\n      context.loading = false;\n    } else if (loading) {\n      context.loading = loading;\n    }\n    if (numVisitsOpen)\n      context.numVisitsOpen = numVisitsOpen;\n    if (numVisitsTotal)\n      context.numVisitsTotal = numVisitsTotal;\n    setContext((state) => ({ ...state, ...context }));\n  }, [setContext, kind, visits, loading, numVisitsOpen, numVisitsTotal]);\n  const config = useApi(configApiRef);\n  const visitsApi = useApi(visitsApiRef);\n  const { loading: reqLoading } = useAsync(async () => {\n    var _a, _b;\n    if (!visits && !loading && kind === \"recent\") {\n      const filterBy = createFilterByQueryParamFromConfig(\n        (_a = config.getOptionalConfigArray(\"home.recentVisits.filterBy\")) != null ? _a : []\n      );\n      return await visitsApi.list({\n        limit: numVisitsTotal != null ? numVisitsTotal : 8,\n        orderBy: [{ field: \"timestamp\", direction: \"desc\" }],\n        ...filterBy && { filterBy }\n      }).then(setVisits);\n    }\n    if (!visits && !loading && kind === \"top\") {\n      const filterBy = createFilterByQueryParamFromConfig(\n        (_b = config.getOptionalConfigArray(\"home.topVisits.filterBy\")) != null ? _b : []\n      );\n      return await visitsApi.list({\n        limit: numVisitsTotal != null ? numVisitsTotal : 8,\n        orderBy: [{ field: \"hits\", direction: \"desc\" }],\n        ...filterBy && { filterBy }\n      }).then(setVisits);\n    }\n    return void 0;\n  }, [visitsApi, visits, loading, setVisits]);\n  useEffect(() => {\n    if (!loading) {\n      setLoading(reqLoading);\n    }\n  }, [loading, setLoading, reqLoading]);\n  return /* @__PURE__ */ React.createElement(VisitedByType, null);\n};\n\nexport { Actions as A, Content as C, ContextProvider as a };\n//# sourceMappingURL=Content-cd749ae7.esm.js.map\n","import { C as Content } from './Content-cd749ae7.esm.js';\nexport { A as Actions, a as ContextProvider } from './Content-cd749ae7.esm.js';\nimport React from 'react';\nimport '@material-ui/core';\nimport './VisitListener-7a513ef0.esm.js';\nimport 'react-grid-layout';\nimport '@backstage/core-plugin-api';\nimport 'react-grid-layout/css/styles.css';\nimport 'react-resizable/css/styles.css';\nimport 'lodash';\nimport 'react-use/lib/useObservable';\nimport '@backstage/core-components';\nimport '@material-ui/core/Typography';\nimport '@material-ui/core/IconButton';\nimport '@material-ui/icons/Settings';\nimport '@material-ui/icons/Delete';\nimport '@rjsf/core';\nimport '@rjsf/material-ui';\nimport '@rjsf/validator-ajv8';\nimport '@material-ui/core/List';\nimport '@material-ui/core/ListItem';\nimport '@material-ui/icons/Add';\nimport '@material-ui/core/ListItemText';\nimport '@material-ui/core/Button';\nimport '@material-ui/icons/Save';\nimport '@material-ui/icons/Edit';\nimport '@material-ui/icons/Cancel';\nimport 'zod';\nimport 'react-router-dom';\nimport '@backstage/core-app-api';\nimport '@backstage/catalog-model';\nimport 'luxon';\nimport '@backstage/theme';\nimport '@material-ui/lab';\nimport 'react-use/lib/useAsync';\n\nconst RecentlyVisitedContent = (props) => /* @__PURE__ */ React.createElement(Content, { ...props, kind: \"recent\" });\n\nexport { RecentlyVisitedContent as Content };\n//# sourceMappingURL=RecentlyVisited-c0ca7307.esm.js.map\n"],"names":["defaultContextValueOnly","defaultContextValue","Context","getFilteredSet","setContext","contextKey","e","state","ContextProvider","children","context","setCollapsed","setNumVisitsOpen","setNumVisitsTotal","setVisits","setLoading","setKind","value","useContext","Actions","collapsed","visits","numVisitsOpen","loading","onClick","prevCollapsed","label","readFilterConfig","config","field","operator","getValue","createFilterByQueryParamFromConfig","configs","useStyles$4","_theme","ItemName","visit","classes","ItemDetailHits","ItemDetailTimeAgo","_a","visitDate","ItemDetail","type","useStyles$3","theme","maybeEntity","getColorByIndex","index","variants","variantIndex","getChipColor","entity","defaultColor","foundIndex","ItemCategory","useStyles$2","VisitListItem","detailType","VisitListEmpty","VisitListFew","useStyles$1","VisitListItemSkeleton","VisitListSkeleton","numVisitsTotal","_e","useStyles","VisitList","title","listBody","VisitedByType","kind","Content","visitsApi","reqLoading","_b","filterBy","RecentlyVisitedContent","props"],"sourceRoot":""}