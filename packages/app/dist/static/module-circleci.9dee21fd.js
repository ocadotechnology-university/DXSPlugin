"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8255],{27850:(Nt,Ge,d)=>{d.d(Ge,{j_:()=>it,gB:()=>ut});var D=d(63957),O=d(63465),o=d(2562),E=d(14041),xe=d(18690),Ue=d(73657),je=d(8973),G=d(29655),U=d(72501),Te=d(91567),V=d(77125),Se=d(42899),he=d(58837),ae=d(71677),Ae=d(19087),Ve=d(29365),Y=d(24378),$e=d(6924),Ce=d(52950),st=d(4794),Me=d.n(st),de=d(21718),we=d(38282),H=d(97388);function ye(m,h,b){var $;let M=(($=m==null?void 0:m.relations)==null?void 0:$.filter(F=>F.type===h).map(F=>parseEntityRef(F.targetRef)))||[];return b!=null&&b.kind&&(M=M.filter(F=>F.kind.toLocaleLowerCase("en-US")===b.kind.toLocaleLowerCase("en-US"))),M}const Ze=(0,H.tK)("entity-context"),re=m=>{const{children:h,entity:b,loading:$,error:M,refresh:F}=m,X={entity:b,loading:$,error:M,refresh:F};return React.createElement(Ze.Provider,{value:createVersionedValueMap({1:X})},React.createElement(AnalyticsContext,{attributes:{...b?{entityRef:stringifyEntityRef(b)}:void 0}},h))},w=m=>React.createElement(re,{entity:m.entity,loading:!m.entity,error:void 0,refresh:void 0,children:m.children});function A(){const m=(0,H.qO)("entity-context");if(!m)throw new Error("Entity context is not available");const h=m.atVersion(1);if(!h)throw new Error("EntityContext v1 not available");if(!h.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:h.entity}}function C(){const m=useVersionedContext("entity-context");if(!m)throw new Error("Entity context is not available");const h=m.atVersion(1);if(!h)throw new Error("EntityContext v1 not available");const{entity:b,loading:$,error:M,refresh:F}=h;return{entity:b,loading:$,error:M,refresh:F}}var T=d(7841),k=d(64118),J=d(42226),te=Object.defineProperty,Ee=(m,h,b)=>h in m?te(m,h,{enumerable:!0,configurable:!0,writable:!0,value:b}):m[h]=b,_=(m,h,b)=>(Ee(m,typeof h!="symbol"?h+"":h,b),b);const ve=(0,O.c)({id:"plugin.circleci.service"}),me="/circleci/api";class Oe{constructor(h){_(this,"discoveryApi"),_(this,"proxyPath");var b;this.discoveryApi=h.discoveryApi,this.proxyPath=(b=h.proxyPath)!=null?b:me}async retry(h,b){return(0,D.postBuildActions)("",h,D.BuildAction.RETRY,{circleHost:await this.getApiUrl(),...b.vcs})}async getBuilds(h,b){const{limit:$=10,offset:M=0}=h;return(0,D.getBuildSummaries)("",{options:{limit:$,offset:M},vcs:{},circleHost:await this.getApiUrl(),...b})}async getUser(h){return(0,D.getMe)("",{circleHost:await this.getApiUrl(),...h})}async getBuild(h,b){return(0,D.getFullBuild)("",h,{circleHost:await this.getApiUrl(),...b.vcs})}async getApiUrl(){return await this.discoveryApi.getBaseUrl("proxy")+this.proxyPath}}const ke=(0,o.HM)({id:"circle-ci"}),j=(0,o.Vb)({id:"circle-ci/build",parent:ke,path:"/:buildId"}),it=(0,o.i1)({id:"circleci",apis:[(0,o.bW)({api:ve,deps:{discoveryApi:O.q},factory:({discoveryApi:m})=>new Oe({discoveryApi:m})})]}).provide((0,o.QJ)({name:"EntityCircleCIContent",component:()=>Promise.resolve().then(function(){return rn}).then(m=>m.Router),mountPoint:ke}));function St(m){return m?Ce.c9.fromISO(m).toRelative():""}function lt(m,h){if(!m||!h)return"";const b=Ce.c9.fromISO(m),$=Ce.c9.fromISO(h),M=Ce.IX.fromDateTimes(b,$).toDuration();return Me()(M.as("milliseconds"),{largest:1})}const Pt=(0,he.A)({accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"}}),ct=({url:m,name:h,className:b,action:$})=>{const M=Pt(),[F,X]=(0,E.useState)([]);(0,E.useEffect)(()=>{fetch(m).then(ce=>ce.json()).then(ce=>{typeof ce!="undefined"&&X(ce.map(({message:Fe})=>Fe))})},[m]);const le=lt($.start_time,$.end_time);return E.createElement(je.A,{TransitionProps:{unmountOnExit:!0},className:b},E.createElement(G.A,{expandIcon:E.createElement($e.A,null),"aria-controls":`panel-${h}-content`,id:`panel-${h}-header`,IconButtonProps:{className:M.button}},E.createElement(U.A,{variant:"button"},h," (",le,")")),E.createElement(Te.A,{className:M.accordionDetails},F.length===0?"Nothing here...":E.createElement("div",{style:{height:"20vh",width:"100%"}},E.createElement(Y.rW,{text:F.join(`
`)}))))},We=(m,h)=>{const b=(0,E.useRef)(!1);return{startPolling:async()=>{if(b.current!==!0)for(b.current=!0;b.current===!0;)await m(),await new Promise(F=>setTimeout(F,h))},stopPolling:()=>{b.current=!1}}},qe="circleci.com/project-slug",Lt=m=>m?{retried:"Retried",canceled:"Canceled",infrastructure_fail:"Infra fail",timedout:"Timedout",not_run:"Not run",running:"Running",failed:"Failed",queued:"Queued",scheduled:"Scheduled",not_running:"Not running",no_tests:"No tests",fixed:"Fixed",success:"Success"}[m]:"",$t=m=>{const{workflows:h}=m!=null?m:{};return{id:h==null?void 0:h.workflow_id,url:`${m.build_url}/workflows/${h==null?void 0:h.workflow_id}`,jobName:h==null?void 0:h.job_name,name:h==null?void 0:h.workflow_name}},rt=m=>{const h=(0,T.getOr)({},"all_commit_details[0]",m);return{branchName:String(m.branch),commit:{hash:String(m.vcs_revision),shortHash:String(m.vcs_revision).slice(0,7),committerName:m.committer_name,url:h.commit_url}}},S=m=>{var h,b,$,M;return{isUser:((h=m==null?void 0:m.user)==null?void 0:h.is_user)||!1,login:((b=m==null?void 0:m.user)==null?void 0:b.login)||"none",name:($=m==null?void 0:m.user)==null?void 0:$.name,avatarUrl:(M=m==null?void 0:m.user)==null?void 0:M.avatar_url}},f=(m,h)=>m.map(b=>({id:String(b.build_num),buildName:b.subject?b.subject+(b.retry_of?` (retry of #${b.retry_of})`:""):"",startTime:b.start_time,stopTime:b.stop_time,onRestartClick:()=>typeof b.build_num!="undefined"&&h(b.build_num),source:rt(b),workflow:$t(b),user:S(b),status:Lt(b.status),buildUrl:b.build_url})),x=()=>{var m,h;const{entity:b}=A(),[$,M,F]=((h=(m=b.metadata.annotations)==null?void 0:m[qe])!=null?h:"").split("/");return{vcs:$,owner:M,repo:F}};function I(m){switch(m){case"gh":case"github":return D.GitType.GITHUB;default:return D.GitType.BITBUCKET}}function B(){const{repo:m,owner:h,vcs:b}=x(),$=(0,O.u)(ve),M=(0,O.u)(O.r),[F,X]=(0,E.useState)(0),[le,ce]=(0,E.useState)(0),[Fe,xt]=(0,E.useState)(10),He=(0,E.useCallback)(async({limit:Be,offset:gt})=>{if(h===""||m===""||b==="")return Promise.reject("No credentials provided");try{return await $.getBuilds({limit:Be,offset:gt},{vcs:{owner:h,repo:m,type:I(b)}})}catch(Wt){return M.post(Wt),Promise.reject(Wt)}},[m,h,b,$,M]),dt=async Be=>{try{await $.retry(Be,{vcs:{owner:h,repo:m,type:I(b)}})}catch(gt){M.post(gt)}};(0,E.useEffect)(()=>{He({limit:1,offset:0}).then(Be=>X(Be==null?void 0:Be[0].build_num))},[m,He]);const{loading:mt,value:Ye,retry:pt}=(0,we.A)(()=>He({offset:le*Fe,limit:Fe}).then(Be=>f(Be!=null?Be:[],dt)),[le,Fe,He]),on=`${h}/${m}`;return[{page:le,pageSize:Fe,loading:mt,value:Ye,projectName:on,total:F},{getBuilds:He,setPage:ce,setPageSize:xt,restartBuild:dt,retry:pt}]}const z=1500;function Q(m){const{vcs:h,repo:b,owner:$}=x(),M=(0,O.u)(ve),F=(0,O.u)(O.r),X=(0,E.useMemo)(()=>({owner:$,repo:b,type:I(h)}),[$,b,h]),le=(0,E.useCallback)(async()=>{if($===""||b===""||h==="")return Promise.reject("No credentials provided");try{const Ye={vcs:X},pt=await M.getBuild(m,Ye);return Promise.resolve(pt)}catch(Ye){return F.post(Ye),Promise.reject(Ye)}},[X,m,M,F]),ce=async()=>{try{await M.retry(m,{vcs:X})}catch(Ye){F.post(Ye)}},{loading:Fe,value:xt,retry:He}=(0,we.A)(()=>le(),[le]),{startPolling:dt,stopPolling:mt}=We(le,z);return[{loading:Fe,value:xt,retry:He},{restartBuild:ce,getBuildWithSteps:le,startPolling:dt,stopPolling:mt}]}const K=({build:m})=>E.createElement(V.A,{display:"flex",alignItems:"center"},"#",m==null?void 0:m.build_num," - ",m==null?void 0:m.subject,E.createElement(Y.Su,{to:(m==null?void 0:m.build_url)||"#"},E.createElement(de.A,null))),ie=(0,he.A)(m=>({neutral:{},failed:{position:"relative","&:after":{pointerEvents:"none",content:'""',position:"absolute",top:0,right:0,left:0,bottom:0,boxShadow:`inset 4px 0px 0px ${m.palette.error.main}`}},running:{position:"relative","&:after":{pointerEvents:"none",content:'""',position:"absolute",top:0,right:0,left:0,bottom:0,boxShadow:`inset 4px 0px 0px ${m.palette.info.main}`}},cardContent:{backgroundColor:m.palette.background.default},success:{position:"relative","&:after":{pointerEvents:"none",content:'""',position:"absolute",top:0,right:0,left:0,bottom:0,boxShadow:`inset 4px 0px 0px ${m.palette.success.main}`}}})),De=(m,h={})=>h.failed?m.failed:["running","queued"].includes(h.status)?m.running:h.status==="success"?m.success:m.neutral,Ke=({actions:m})=>{const h=ie();return E.createElement(E.Fragment,null,m.map(b=>E.createElement(ct,{className:b.failed?h.failed:h.success,action:b,name:b.name,url:b.output_url||""})))},qt=({build:m})=>E.createElement(V.A,null,m&&m.steps&&m.steps.map(({name:h,actions:b})=>E.createElement(Ke,{key:h,name:h,actions:b}))),_t=()=>{const{buildId:m=""}=(0,xe.g)(),h=ie(),[{loading:b,value:$},{startPolling:M,stopPolling:F}]=Q(parseInt(m,10));return(0,E.useEffect)(()=>(M(),()=>F()),[m,M,F]),E.createElement(E.Fragment,null,E.createElement(V.A,{mb:3},E.createElement(Y.BI,{"aria-label":"breadcrumb"},E.createElement(Y.N_,{to:".."},"All builds"),E.createElement(U.A,null,"Build details"))),E.createElement(Se.A,{container:!0,spacing:3,direction:"column"},E.createElement(Se.A,{item:!0},E.createElement(Y.nO,{className:De(h,$),title:E.createElement(K,{build:$}),cardClassName:h.cardContent},b?E.createElement(Y.ke,null):E.createElement(qt,{build:$})))))},en=(m="")=>{switch(m.toLocaleLowerCase("en-US")){case"queued":case"scheduled":return E.createElement(Y.Ek,null);case"running":return E.createElement(Y.W$,null);case"failed":return E.createElement(Y.Xs,null);case"success":return E.createElement(Y.So,null);case"canceled":default:return E.createElement(Y.EV,null)}},tn=(0,he.A)(m=>({root:{display:"flex","& > *":{margin:m.spacing(1),verticalAlign:"center"}},small:{width:m.spacing(3),height:m.spacing(3)}})),nn=({build:m})=>{var h,b,$;const M=tn(),{user:F,source:X}=m;return E.createElement(V.A,{display:"flex",alignItems:"center",className:M.root},E.createElement(ae.Ay,{title:(h=F.name)!=null?h:F.login},E.createElement(Ae.A,{alt:F.name,src:F.avatarUrl,className:M.small})),E.createElement(V.A,null,E.createElement(U.A,{variant:"button"},X==null?void 0:X.branchName),E.createElement(U.A,{variant:"body1"},((b=X==null?void 0:X.commit)==null?void 0:b.url)!==void 0?E.createElement(Y.N_,{to:($=X==null?void 0:X.commit)==null?void 0:$.url},X==null?void 0:X.commit.shortHash):X==null?void 0:X.commit.shortHash)))},Mt=[{title:"ID",field:"id",type:"numeric",width:"80px"},{title:"Build",field:"buildName",highlight:!0,width:"20%",render:m=>{const h=()=>{var b;const $=(0,o.Sf)(j);return E.createElement(Y.N_,{component:Ue.N_,to:`${$({buildId:m.id})}`},m.buildName?m.buildName:(b=m==null?void 0:m.workflow)==null?void 0:b.name)};return E.createElement(h,null)}},{title:"Job",field:"buildName",highlight:!0,render:m=>{var h,b;return E.createElement(Y.N_,{to:(h=m==null?void 0:m.buildUrl)!=null?h:""},E.createElement(V.A,{display:"flex",alignItems:"center"},E.createElement(de.A,{fontSize:"small",color:"disabled"}),E.createElement(V.A,{mr:1}),(b=m==null?void 0:m.workflow)==null?void 0:b.jobName))}},{title:"Source",field:"source.commit.hash",highlight:!0,render:m=>E.createElement(nn,{build:m})},{title:"Status",field:"status",render:m=>E.createElement(V.A,{display:"flex",alignItems:"center"},en(m.status),E.createElement(V.A,{mr:1}),E.createElement(U.A,{variant:"button"},m.status))},{title:"Time",field:"startTime",render:m=>m!=null&&m.startTime?E.createElement(E.Fragment,null,E.createElement(U.A,{variant:"body2"},"run ",St(m==null?void 0:m.startTime)),E.createElement(U.A,{variant:"body2"},m!=null&&m.stopTime?`took ${lt(m==null?void 0:m.startTime,m==null?void 0:m.stopTime)}`:"")):null},{title:"Workflow",field:"workflow.name",highlight:!0,render:m=>{var h,b;return E.createElement(Y.N_,{to:`https://app.circleci.com/pipelines/workflows/${(h=m==null?void 0:m.workflow)==null?void 0:h.id}`},E.createElement(V.A,{display:"flex",alignItems:"center"},E.createElement(de.A,{fontSize:"small",color:"disabled"}),E.createElement(V.A,{mr:1}),(b=m==null?void 0:m.workflow)==null?void 0:b.name))}},{title:"Actions",width:"10%",render:m=>E.createElement(Ve.A,{onClick:m.onRestartClick},E.createElement(k.A,null))}],Nn=({projectName:m,loading:h,pageSize:b,page:$,retry:M,builds:F,onChangePage:X,onChangePageSize:le,total:ce})=>E.createElement(Y.XI,{isLoading:h,options:{paging:!0,pageSize:b,padding:"dense",pageSizeOptions:[10,20,50]},totalCount:ce,page:$,actions:[{icon:()=>E.createElement(k.A,null),tooltip:"Refresh Data",isFreeAction:!0,onClick:()=>M()}],data:F,onPageChange:X,onRowsPerPageChange:le,title:E.createElement(V.A,{display:"flex",alignItems:"center"},E.createElement(J.A,null),E.createElement(V.A,{mr:1}),E.createElement(U.A,{variant:"h6"},m)),columns:Mt}),an=()=>{const[{total:m,loading:h,value:b,projectName:$,page:M,pageSize:F},{setPage:X,retry:le,setPageSize:ce}]=B();return E.createElement(Nn,{total:m,loading:h,retry:le,builds:b!=null?b:[],projectName:$,page:M,onChangePage:X,pageSize:F,onChangePageSize:ce})},Ot=()=>E.createElement(Se.A,{container:!0,spacing:3,direction:"column"},E.createElement(Se.A,{item:!0},E.createElement(an,null))),ut=m=>{var h;return!!((h=m.metadata.annotations)!=null&&h[qe])};var rn=Object.freeze({__proto__:null,isCircleCIAvailable:ut,Router:()=>{const{entity:m}=A();return ut(m)?E.createElement(xe.BV,null,E.createElement(xe.qh,{path:"/",element:E.createElement(Ot,null)}),E.createElement(xe.qh,{path:`${j.path}`,element:E.createElement(_t,null)})):E.createElement(Y.o9,{annotation:qe})}})},24378:(Nt,Ge,d)=>{d.d(Ge,{BI:()=>ga,nO:()=>ht,N_:()=>pe,Su:()=>Ft,rW:()=>So,o9:()=>Yr,ke:()=>Ut,Xs:()=>Jo,So:()=>Yo,Ek:()=>Qo,W$:()=>Zo,EV:()=>Xo,XI:()=>pa});var D=d(63465),O=d(2562),o=d(14041);function E(e){return{$$type:"@backstage/TranslationMessages",id:e.ref.id,full:!!e.full,messages:e.messages}}function xe(e){return{$$type:"@backstage/TranslationResource",version:"v1",id:e.ref.id,resources:Object.entries(e.translations).map(([t,n])=>({language:t,loader:()=>n().then(a=>{const r=a.default;return{messages:(r==null?void 0:r.$$type)==="@backstage/TranslationMessages"?r.messages:r}})}))}}var Ue=Object.defineProperty,je=(e,t,n)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,G=(e,t,n)=>(je(e,typeof t!="symbol"?t+"":t,n),n),U=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Te=(e,t,n)=>(U(e,t,"read from private field"),n?n.call(e):t.get(e)),V=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Se=(e,t,n,a)=>(U(e,t,"write to private field"),a?a.call(e,n):t.set(e,n),n),he,ae,Ae;function Ve(e){const t=new Array;function n(a,r){for(const[s,i]of Object.entries(a))typeof i=="string"?t.push([r+s,i]):n(i,`${r}${s}.`)}return n(e,""),Object.fromEntries(t)}class Y{constructor(t){V(this,he,void 0),V(this,ae,void 0),V(this,Ae,void 0),G(this,"$$type","@backstage/TranslationRef"),G(this,"version","v1"),Se(this,he,t.id),Se(this,ae,Ve(t.messages))}get id(){return Te(this,he)}get T(){throw new Error("Not implemented")}getDefaultMessages(){return Te(this,ae)}setDefaultResource(t){Se(this,Ae,t)}getDefaultResource(){return Te(this,Ae)}toString(){return`TranslationRef{id=${this.id}}`}}he=new WeakMap,ae=new WeakMap,Ae=new WeakMap;function $e(e){const t=new Y(e);return e.translations&&t.setDefaultResource(xe({ref:t,translations:e.translations})),t}const Ce=(0,D.c)({id:"core.translation"}),st=(0,D.c)({id:"core.applanguage"}),Me=new WeakSet,de=e=>{const t=(0,D.u)(D.r),n=(0,D.u)(Ce),[a,r]=(0,o.useState)(()=>n.getTranslation(e)),s=(0,o.useMemo)(()=>n.translation$(e),[n,e]),i=(0,o.useCallback)(c=>{if(!Me.has(e)){const u=`Failed to load translation resource '${e.id}'; caused by ${c}`;console.error(u),t.post(new Error(u)),Me.add(e)}},[t,e]);(0,o.useEffect)(()=>{const c=s.subscribe({next(u){u.ready&&r(u)},error(u){i(u)}});return()=>{c.unsubscribe()}},[s,i]);const l=(0,o.useRef)(!0);if((0,o.useEffect)(()=>{l.current?l.current=!1:r(n.getTranslation(e))},[n,e]),!a.ready)throw new Promise(c=>{const u=s.subscribe({next(g){g.ready&&(u.unsubscribe(),c())},error(g){u.unsubscribe(),i(g),c()}})});return{t:a.t}};var we=d(29365),H=d(72501);const ye=$e({id:"core-components",messages:{signIn:{title:"Sign In",loginFailed:"Login failed",customProvider:{title:"Custom User",subtitle:`Enter your own User ID and credentials.
 This selection will not be stored.`,userId:"User ID",tokenInvalid:"Token is not a valid OpenID Connect JWT Token",continue:"Continue",idToken:"ID Token (optional)"},guestProvider:{title:"Guest",subtitle:`Enter as a Guest User.
 You will not have a verified identity, meaning some features might be unavailable.`,enter:"Enter"}},skipToContent:"Skip to content",copyTextButton:{tooltipText:"Text copied to clipboard"},simpleStepper:{reset:"Reset",finish:"Finish",next:"Next",skip:"Skip",back:"Back"},errorPage:{subtitle:"ERROR {{status}}: {{statusMessage}}",title:"Looks like someone dropped the mic!",goBack:"Go back",showMoreDetails:"Show more details",showLessDetails:"Show less details"},emptyState:{missingAnnotation:{title:"Missing Annotation",actionTitle:"Add the annotation to your component YAML as shown in the highlighted example below:",readMore:"Read more"}},supportConfig:{default:{title:"Support Not Configured",linkTitle:"Add `app.support` config key"}},errorBoundary:{title:"Please contact {{slackChannel}} for help."},oauthRequestDialog:{title:"Login Required",authRedirectTitle:"This will trigger a http redirect to OAuth Login.",login:"Log in",rejectAll:"Reject All"},supportButton:{title:"Support",close:"Close"},table:{filter:{title:"Filters",clearAll:"Clear all"}},alertDisplay:{message_one:"({{ count }} older message)",message_other:"({{ count }} older messages)"},autoLogout:{stillTherePrompt:{title:"Logging out due to inactivity",buttonText:"Yes! Don't log me out"}},proxiedSignInPage:{title:"You do not appear to be signed in. Please try reloading the browser page."}}});var Ze=d(18846),re=d(64947),w=d(58837),A=d(54917),C=d(268),T=d(7031),k=d(99703),J=d(60882),te=d(49203),Ee=d(53373),_=d.n(Ee),ve=d(45250),me=d(18690),Oe=d(73657),ke=d(21613),j=d(77125),at=d(20279),it=d(40697),St=d(25577),lt=d(71677),Pt=d(99594),ct=d(51100),We=d(5893),qe=d(1517),Lt=d(67991),$t=d(12784),rt=d(22249),S=d(20644),f=d(42899);const x=d.p+"static/missingAnnotation.67f79e98..svg",I=d.p+"static/noInformation.4b426325..svg",B=d.p+"static/createComponent.975d1e1e..svg",z=d.p+"static/noBuild.1715fa71..svg";var Q=d(58007),K=d(8109),ie=d(5951),De=d(8973),Ke=d(29655),qt=d(91567),_t=d(9181),en=d(6924),tn=d(60767),nn=d(28138),Mt=d(37197),Nn=d(43144),an=d(68887),Ot=d(63798),ut=d(81179),Fa=d(62220),rn=d(88951),m=d(40703),h=d(59469),b=d(48653),$=d(45685),M=d(52235),F=d(90147),X=d(69076),le=d(67720),ce=d(95061),Fe=d(41857),xt=d(48543),He=d(26343),dt=d(81215),mt=d(10437),Ye=d(95479),pt=d(54801),on=d(55197),Be=d(45810),gt=d.n(Be),Wt=d(93285),Ha=d(38605),za=d(31653),Dt=d(25301),Ga=d(83313),Ua=d(89019),ja=d(62461),Pn=d(64704),Va=d(6774),Ka=d(75625),sn=d(65859),Ya=d(5416),Xa=d(33494),Ja=d(80113),Qa=d(26229),Za=d(46802),qa=d(78467),il=d(16975),_a=d(45634),Ln=d(97388),er=d(13085),tr=d(79065),nr=d(55704),ar=d(94509),$n=d(16249),Mn=d(62248),be=d(46195),rr=d(61612),or=d(80824),On=d(51253),sr=d(3514),ir=d.n(sr);function ll(e){const[t,n]=useState([]),a=useApi(alertApiRef),{t:r}=useTranslationRef(coreComponentsTranslationRef),{anchorOrigin:s={vertical:"top",horizontal:"center"},transientTimeoutMs:i}=e,l=i!=null?i:5e3;useEffect(()=>{const g=a.alert$().subscribe(p=>n(y=>y.concat(p)));return()=>{g.unsubscribe()}},[a]);const[c]=t;if(useEffect(()=>{if(c&&c.display==="transient"){const g=setTimeout(()=>{n(p=>{const y=p.filter(v=>v!==c);return y.length===p.length?p:y})},l);return()=>clearTimeout(g)}},[c,l]),t.length===0)return null;const u=()=>{n(g=>g.filter(p=>p!==c))};return React.createElement(Snackbar,{open:!0,anchorOrigin:s},React.createElement(Alert,{action:React.createElement(IconButton,{color:"inherit",size:"small",onClick:u,"data-testid":"error-button-close"},React.createElement(CloseIcon,null)),severity:c.severity},React.createElement(Typography,{component:"span"},String(c.message),t.length>1&&React.createElement("em",null,r("alertDisplay.message",{count:t.length-1})))))}const lr="@backstage/autologout:lastSeenOnline",cr=({enableEffect:e,autologoutIsEnabled:t,idleTimeoutSeconds:n,lastSeenOnlineStore:a,identityApi:r})=>{useEffect(()=>{if(t&&e){const s=a.get();if(s){const l=Math.ceil(new Date().getTime()/1e3),c=Math.ceil(s.getTime()/1e3);l-c>n&&r.signOut()}a.save(new Date)}else a.delete()},[t,e,r,n,a])},ur=e=>{const{idleTimer:t,setOpen:n,open:a,promptTimeoutMillis:r,remainingTime:s,setRemainingTime:i}=e,{t:l}=useTranslationRef(coreComponentsTranslationRef);useEffect(()=>{const p=setInterval(()=>{i(Math.ceil(t.getRemainingTime()))},500);return()=>{clearInterval(p)}},[t,i]);const c=()=>{n(!1),t.activate()},g=Math.max(s-r/1e3,0)>1?"seconds":"second";return React.createElement(Dialog,{open:a,"data-testid":"inactivity-prompt-dialog"},React.createElement(DialogTitle,null,l("autoLogout.stillTherePrompt.title")),React.createElement(DialogContent,null,React.createElement(DialogContentText,null,"You are about to be disconnected in"," ",React.createElement("b",null,Math.ceil(s/1e3)," ",g),". Are you still there?")),React.createElement(DialogActions,null,React.createElement(Button$1,{onClick:c,color:"secondary",variant:"contained",size:"small"},l("autoLogout.stillTherePrompt.buttonText"))))};class dr{constructor(t){this.key=t}save(t){localStorage.setItem(this.key,t.toJSON())}delete(){localStorage.removeItem(this.key)}get(){const t=localStorage.getItem(this.key);return t!==null?new Date(Date.parse(t)):null}}const mr=({idleTimeoutMinutes:e,events:t,useWorkerTimers:n,logoutIfDisconnected:a,promptBeforeIdleSeconds:r,promptOpen:s,setPromptOpen:i,remainingTimeCountdown:l,setRemainingTimeCountdown:c,identityApi:u,lastSeenOnlineStore:g})=>{const p=r*1e3,y=p>0,v=async()=>{i(!0),c(p)},R=()=>{i(!1),c(0),u.signOut()},P=()=>{i(!1),c(0)},N=(oe,ge)=>{g.save(new Date)},W=useIdleTimer({timeout:e*60*1e3,events:t,crossTab:!0,name:"autologout-timer",timers:n?workerTimers:void 0,onIdle:R,onActive:y?P:void 0,onAction:a?N:void 0,onPrompt:y?v:void 0,promptBeforeIdle:y?p:void 0,syncTimers:1e3});return React.createElement(React.Fragment,null,y&&React.createElement(ur,{idleTimer:W,open:s,setOpen:i,remainingTime:l,setRemainingTime:c,promptTimeoutMillis:p}))},At={enabled:!0,idleTimeoutMinutes:.5,promptBeforeIdleSeconds:10,useWorkerTimers:!0,logoutIfDisconnected:!0},pr=null,gr=(e,t)=>{var n,a,r,s,i,l,c,u,g,p;return{enabled:(a=(n=e.getOptionalBoolean("auth.autologout.enabled"))!=null?n:t.enabled)!=null?a:At.enabled,idleTimeoutMinutes:(s=(r=e.getOptionalNumber("auth.autologout.idleTimeoutMinutes"))!=null?r:t.idleTimeoutMinutes)!=null?s:At.idleTimeoutMinutes,promptBeforeIdleSeconds:(l=(i=e.getOptionalNumber("auth.autologout.promptBeforeIdleSeconds"))!=null?i:t.promptBeforeIdleSeconds)!=null?l:At.promptBeforeIdleSeconds,useWorkerTimers:(u=(c=e.getOptionalBoolean("auth.autologout.useWorkerTimers"))!=null?c:t.useWorkerTimers)!=null?u:At.useWorkerTimers,logoutIfDisconnected:(p=(g=e.getOptionalBoolean("auth.autologout.logoutIfDisconnected"))!=null?g:t.logoutIfDisconnected)!=null?p:At.logoutIfDisconnected}},cl=e=>{const t=useApi(identityApiRef),n=useApi(configApiRef),[a,r]=useState(!1);useEffect(()=>{async function P(N){(await N.getCredentials()).token?r(!0):r(!1)}P(t)},[t]);const{enabled:s,idleTimeoutMinutes:i,promptBeforeIdleSeconds:l,logoutIfDisconnected:c,useWorkerTimers:u}=useMemo(()=>gr(n,e),[n,e]);useEffect(()=>{if(i<.5)throw new Error("\u274C idleTimeoutMinutes property should be >= 0.5 minutes (30 seconds).");if(l<0)throw new Error("\u274C promptBeforeIdleSeconds property should be >= 0 seconds. Set to 0 to disable the prompt.");if(i*60<=l)throw new Error("\u274C promptBeforeIdleSeconds should be smaller than idleTimeoutMinutes")},[i,l]);const g=useMemo(()=>new dr(lr),[]),[p,y]=useState(!1),[v,R]=useState(0);return cr({enableEffect:c,autologoutIsEnabled:s&&a,idleTimeoutSeconds:i*60,lastSeenOnlineStore:g,identityApi:t}),!s||!a?null:React.createElement(mr,{idleTimeoutMinutes:i,promptBeforeIdleSeconds:l,useWorkerTimers:u,events:pr,logoutIfDisconnected:c,promptOpen:p,setPromptOpen:y,remainingTimeCountdown:v,setRemainingTimeCountdown:R,identityApi:t,lastSeenOnlineStore:g})};function fr(e){let t=0;for(let a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);let n="#";for(let a=0;a<3;a++){const r=t>>a*8&255;n+=`00${r.toString(16)}`.slice(-2)}return n}function hr(e){var t;const n=e.trim().split(" "),a=(t=n[0])!=null?t:"",r=n.length>1?n[n.length-1]:"";return a&&r?`${a.charAt(0)}${r.charAt(0)}`:a.charAt(0)}const yr=(0,w.A)(e=>({avatar:{width:"4rem",height:"4rem",color:e.palette.common.white},avatarText:{fontWeight:e.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function ul(e){const{displayName:t,picture:n,customStyles:a}=e,r=yr();let s={...a};const i={fontFamily:s.fontFamily,fontSize:s.fontSize,fontWeight:s.fontWeight};return n||(s={backgroundColor:fr(t||""),...a}),React.createElement(MaterialAvatar,{alt:t,src:n,className:r.avatar,style:s},t&&React.createElement(Typography,{variant:"h6",component:"span",className:r.avatarText,style:i},hr(t)))}function Er(){const[e]=(0,me.AV)(o.createElement(me.qh,{index:!0,element:o.createElement("div",null)}));return!e.index}const vr=(0,w.A)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",userSelect:"none",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),Wn=e=>/^([a-z+.-]+):/.test(e),Dn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,ln=window.open;if(ln&&!ln.__backstage){const e=function(...n){const a=String(n[0]);if(Dn.test(a))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return ln.apply(this,n)};e.__backstage=!0,window.open=e}const br=()=>{try{return(0,D.u)(D.p).getOptionalString("app.baseUrl")}catch{return}},Rr=()=>{var e;const t="http://sample.dev",n=(e=br())!=null?e:"/",{pathname:a}=new URL(n,t);return(0,ve.trimEnd)(a,"/")},Sr=e=>{let t=String(e);const n=Rr(),a=Wn(t),r=t.startsWith(n);return!a&&!r&&(t=n.concat(t)),t},cn=e=>{var t;return e instanceof Array?e.map(cn).join(" ").trim():typeof e=="object"&&e?cn((t=e==null?void 0:e.props)==null?void 0:t.children):["string","number"].includes(typeof e)?String(e):""},pe=o.forwardRef(({onClick:e,noTrack:t,...n},a)=>{const r=vr(),s=(0,O.st)(),i=Er()?Sr(n.to):n.to,l=cn(n.children)||i,c=Wn(i),u=c&&!!/^https?:/.exec(i);if(Dn.test(i))throw new Error("Link component rejected javascript: URL as a security precaution");const g=p=>{e==null||e(p),t||s.captureEvent("click",l,{attributes:{to:i}})};return c?o.createElement(te.A,{...u?{target:"_blank",rel:"noopener"}:{},...n,...n["aria-label"]?{"aria-label":`${n["aria-label"]}, Opens in a new window`}:{},ref:a,href:i,onClick:g,className:_()(r.externalLink,n.className)},n.children,o.createElement(H.A,{component:"span",className:r.visuallyHidden},", Opens in a new window")):o.createElement(te.A,{...n,ref:a,component:Oe.N_,to:i,onClick:g})}),xr=o.forwardRef((e,t)=>o.createElement(pe,{ref:t,...e,color:"initial"})),Ft=o.forwardRef((e,t)=>o.createElement(re.A,{ref:t,component:xr,...e})),dl=null;function Ct(e){const{t}=de(ye),{text:n,tooltipDelay:a=1e3,tooltipText:r=t("copyTextButton.tooltipText"),"aria-label":s="Copy text"}=e,i=(0,D.u)(D.r),[l,c]=(0,o.useState)(!1),[{error:u},g]=(0,ct.A)();(0,o.useEffect)(()=>{u&&i.post(u)},[u,i]);const p=y=>{y.stopPropagation(),c(!0),g(n)};return o.createElement(o.Fragment,null,o.createElement(lt.Ay,{id:"copy-test-tooltip",title:r,placement:"top",leaveDelay:a,onClose:()=>c(!1),open:l},o.createElement(we.A,{onClick:p,"aria-label":s},o.createElement(Pt.A,null))))}function Ht(e){const{text:t,language:n,showLineNumbers:a=!1,highlightedNumbers:r,customStyle:s,showCopyCodeButton:i=!1}=e,l=(0,A.A)(),c=l.palette.type==="dark"?it.A:St.A,u=l.palette.type==="dark"?"#256bf3":"#e6ffed";return o.createElement(j.A,{position:"relative"},o.createElement(at.A,{customStyle:s,language:n,style:c,showLineNumbers:a,wrapLines:!0,lineNumberStyle:{color:l.palette.textVerySubtle},lineProps:g=>r!=null&&r.includes(g)?{style:{backgroundColor:u}}:{}},t),i&&o.createElement(j.A,{position:"absolute",top:0,right:0},o.createElement(Ct,{text:t})))}function ml(e){const{title:t,to:n}=e,a=useMediaQuery(r=>r.breakpoints.down("xs"));return n?a?React.createElement(IconButton,{component:Link$1,color:"primary",title:t,size:"small",to:n},React.createElement(AddCircleOutline,null)):React.createElement(Button$1,{component:Link$1,variant:"contained",color:"primary",to:n},t):null}var wt;(e=>{(t=>{t.TOP_BOTTOM="TB",t.BOTTOM_TOP="BT",t.LEFT_RIGHT="LR",t.RIGHT_LEFT="RL"})(e.Direction||(e.Direction={})),(t=>{t.UP_LEFT="UL",t.UP_RIGHT="UR",t.DOWN_LEFT="DL",t.DOWN_RIGHT="DR"})(e.Alignment||(e.Alignment={})),(t=>{t.NETWORK_SIMPLEX="network-simplex",t.TIGHT_TREE="tight-tree",t.LONGEST_PATH="longest-path"})(e.Ranker||(e.Ranker={})),(t=>{t.LEFT="l",t.RIGHT="r",t.CENTER="c"})(e.LabelPosition||(e.LabelPosition={}))})(wt||(wt={}));const Ar=(0,w.A)(e=>({node:{fill:e.palette.primary.light,stroke:e.palette.primary.light},text:{fill:e.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function Cr({node:{id:e}}){const t=Ar(),[n,a]=React.useState(0),[r,s]=React.useState(0),i=React.useRef(null);React.useLayoutEffect(()=>{if(i.current){let{height:g,width:p}=i.current.getBBox();g=Math.round(g),p=Math.round(p),(g!==r||p!==n)&&(a(p),s(g))}},[n,r]);const l=10,c=n+l*2,u=r+l*2;return React.createElement("g",null,React.createElement("rect",{className:t.node,width:c,height:u,rx:10}),React.createElement("text",{ref:i,className:t.text,y:u/2,x:c/2,textAnchor:"middle",alignmentBaseline:"middle"},e))}const Fn="arrow-marker",wr="node",Ir="edge",Tr="label",kr=(0,rt.A)(e=>({node:{transition:`${e.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),Br=e=>React.createElement(Cr,{...e});function Nr({render:e=Br,setNode:t,node:n}){const{width:a,height:r,x:s=0,y:i=0}=n,l=n,c=kr(),u=React.useRef(null);return React.useLayoutEffect(()=>{if(u.current){let{height:g,width:p}=u.current.getBBox();g=Math.round(g),p=Math.round(p),(g!==r||p!==a)&&t(n.id,{...n,height:g,width:p})}},[n,a,r,t]),React.createElement("g",{ref:u,"data-testid":wr,className:c.node,transform:`translate(${s-a/2},${i-r/2})`},e({node:l}))}const Pr=(0,rt.A)(e=>({text:{fill:e.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function Lr({edge:{label:e}}){const t=Pr();return React.createElement("text",{className:t.text,textAnchor:"middle"},e)}const $r=(0,rt.A)(e=>({path:{strokeWidth:1.3,stroke:e.palette.textSubtle,fill:"none",transition:`${e.transitions.duration.shortest}ms`},label:{transition:`${e.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),Mr=e=>React.createElement(Lr,{...e});function Or({render:e=Mr,setEdge:t,id:n,edge:a,curve:r,showArrowHeads:s}){const{x:i=0,y:l=0,width:c,height:u,points:g}=a,p=a,y=$r(),v=React.useRef(null);React.useLayoutEffect(()=>{if(v.current){let{height:N,width:W}=v.current.getBBox();N=Math.round(N),W=Math.round(W),(N!==u||W!==c)&&t(n,{...a,height:N,width:W})}},[a,u,c,t,n]);let R="";const P=React.useMemo(()=>d3Shape.line().x(N=>N.x).y(N=>N.y).curve(d3Shape[r]),[r]);if(g){const N=g.filter(W=>isFinite(W.x)&&isFinite(W.y));R=P(N)||""}return React.createElement(React.Fragment,null,R&&React.createElement("path",{"data-testid":Ir,className:y.path,markerEnd:s?`url(#${Fn})`:void 0,d:R}),p.label?React.createElement("g",{ref:v,"data-testid":Tr,className:y.label,transform:`translate(${i},${l})`},e({edge:p})):null)}const Hn="workspace";function pl(e){var t,n;const{edges:a,nodes:r,renderNode:s,direction:i=wt.Direction.TOP_BOTTOM,align:l,nodeMargin:c=50,edgeMargin:u=10,rankMargin:g=50,paddingX:p=0,paddingY:y=0,acyclicer:v,ranker:R=wt.Ranker.NETWORK_SIMPLEX,labelPosition:P=wt.LabelPosition.RIGHT,labelOffset:N=10,edgeRanks:W=1,edgeWeight:oe=1,renderLabel:ge,defs:L,zoom:q="enabled",curve:se="curveMonotoneX",showArrowHeads:fe=!1,fit:ze="grow",...bt}=e,Xe=useTheme$1(),[et,kn]=React.useState(100),[ot,Qt]=React.useState(100),Z=React.useRef(new dagre.graphlib.Graph),[Re,It]=React.useState(((t=Z.current.graph())==null?void 0:t.width)||0),[Je,Tt]=React.useState(((n=Z.current.graph())==null?void 0:n.height)||0),[tt,nt]=React.useState([]),[Bn,el]=React.useState([]),kt=Math.max(Re,et),Rt=Math.max(Je,ot),tl=Math.min(Je,ot),nl=ze==="grow"?Rt:tl,al=React.useMemo(()=>debounce(ne=>{if(!ne)return;const ue=d3Selection.select(ne),ee=d3Selection.select(ne.getElementById(Hn));function Pe(){ue.call(d3Zoom.zoom().scaleExtent([1,1/0]).on("zoom",Qe=>{Qe.transform.x=Math.min(0,Math.max(Qe.transform.x,kt-kt*Qe.transform.k)),Qe.transform.y=Math.min(0,Math.max(Qe.transform.y,Rt-Rt*Qe.transform.k)),ee.attr("transform",Qe.transform)}))}q==="enabled"?Pe():q==="enable-on-click"&&ue.on("click",()=>Pe());const{width:Le,height:Zt}=ne.getBoundingClientRect();et!==Le&&kn(Le),ot!==Zt&&Qt(Zt)},100),[ot,et,kt,Rt,q]),Da=React.useCallback(()=>{const ne=Z.current.nodes(),ue=Z.current.edges();ne.forEach(ee=>{r.some(Le=>Le.id===ee)||Z.current.removeNode(ee)}),ue.forEach(ee=>{a.some(Le=>Le.from===ee.v&&Le.to===ee.w)||Z.current.removeEdge(ee.v,ee.w)}),r.forEach(ee=>{const Pe=Z.current.nodes().find(Le=>ee.id===Le);if(Pe&&Z.current.node(Pe)){const{width:Le,height:Zt,x:Qe,y:sl}=Z.current.node(Pe);Z.current.setNode(Pe,{...ee,width:Le,height:Zt,x:Qe,y:sl})}else Z.current.setNode(ee.id,{...ee,width:0,height:0})}),a.forEach(ee=>{Z.current.setEdge(ee.from,ee.to,{...ee,label:ee.label,width:0,height:0,labelpos:P,labeloffset:N,weight:oe,minlen:W})})},[a,r,P,N,oe,W]),Bt=React.useMemo(()=>debounce(()=>{dagre.layout(Z.current);const{height:ne,width:ue}=Z.current.graph(),ee=Math.max(0,ne||0),Pe=Math.max(0,ue||0);It(Pe),Tt(ee),nt(Z.current.nodes()),el(Z.current.edges())},250,{leading:!0}),[]);React.useEffect(()=>(Z.current.setGraph({rankdir:i,align:l,nodesep:c,edgesep:u,ranksep:g,marginx:p,marginy:y,acyclicer:v,ranker:R}),Da(),Bt(),Bt.cancel),[v,l,i,u,p,y,c,g,R,Da,Bt]);function rl(ne,ue){return Z.current.setNode(ne,ue),Bt(),Z.current}function ol(ne,ue){return Z.current.setEdge(ne,ue),Bt(),Z.current}return React.createElement("svg",{ref:al,...bt,width:"100%",height:nl,viewBox:`0 0 ${kt} ${Rt}`},React.createElement("defs",null,React.createElement("marker",{id:Fn,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},React.createElement("path",{fill:Xe.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),L),React.createElement("g",{id:Hn},React.createElement("svg",{width:Re,height:Je,y:Rt/2-Je/2,x:kt/2-Re/2,viewBox:`0 0 ${Re} ${Je}`},Bn.map(ne=>{const ue=Z.current.edge(ne);return ue?React.createElement(Or,{key:`${ne.v}-${ne.w}`,id:ne,setEdge:ol,render:ge,edge:ue,curve:se,showArrowHeads:fe}):null}),tt.map(ne=>{const ue=Z.current.node(ne);return ue?React.createElement(Nr,{key:ne,setNode:rl,render:s,node:ue}):null}))))}const Wr=(0,w.A)(e=>{var t,n;return{root:{padding:e.spacing(0),marginBottom:e.spacing(0),marginTop:e.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:e.spacing(6),marginTop:-e.spacing(3),zIndex:"unset"},icon:{fontSize:e.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap",color:e.palette.banner.text},message:{display:"flex",alignItems:"center","& a":{color:e.palette.banner.link}},button:{color:(t=e.palette.banner.closeButtonColor)!=null?t:"inherit"},info:{backgroundColor:e.palette.banner.info},error:{backgroundColor:e.palette.banner.error},warning:{backgroundColor:(n=e.palette.banner.warning)!=null?n:e.palette.banner.error}}},{name:"BackstageDismissableBanner"}),gl=e=>{var t;const{variant:n,message:a,id:r,fixed:s=!1}=e,i=Wr(),c=useApi(storageApiRef).forBucket("notifications"),u=(t=c.snapshot("dismissedBanners").value)!=null?t:[],[g,p]=useState(new Set(u)),y=useObservable(c.observe$("dismissedBanners"));useEffect(()=>{var R;if(y!=null&&y.value){const P=(R=y==null?void 0:y.value)!=null?R:[];p(new Set(P))}},[y==null?void 0:y.value]);const v=()=>{c.set("dismissedBanners",[...g,r])};return React.createElement(Snackbar,{anchorOrigin:s?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!g.has(r),classes:{root:classNames(i.root,!s&&i.topPosition)}},React.createElement(SnackbarContent,{classes:{root:classNames(i.content,i[n]),message:i.message},message:a,action:[React.createElement(IconButton,{key:"dismiss",title:"Permanently dismiss this message",className:i.button,onClick:v},React.createElement(CloseIcon,{className:i.icon}))]}))},Dr=(0,w.A)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),Fr=({missing:e})=>{const t=Dr();switch(e){case"field":return o.createElement("img",{src:x,className:t.generalImg,alt:"annotation is missing"});case"info":return o.createElement("img",{src:I,alt:"no Information",className:t.generalImg});case"content":return o.createElement("img",{src:B,alt:"create Component",className:t.generalImg});case"data":return o.createElement("img",{src:z,alt:"no Build",className:t.generalImg});default:return null}},Hr=(0,w.A)(e=>({root:{backgroundColor:e.palette.background.default,padding:e.spacing(2,0,0,0)},action:{marginTop:e.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function zr(e){const{title:t,description:n,missing:a,action:r}=e,s=Hr();return o.createElement(f.A,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:s.root,spacing:2},o.createElement(f.A,{item:!0,xs:12,md:6},o.createElement(f.A,{container:!0,direction:"column"},o.createElement(f.A,{item:!0,xs:!0},o.createElement(H.A,{variant:"h5"},t)),o.createElement(f.A,{item:!0,xs:!0},o.createElement(H.A,{variant:"body1"},n)),o.createElement(f.A,{item:!0,xs:!0,className:s.action},r))),o.createElement(f.A,{item:!0,xs:12,md:6,className:s.imageContainer},typeof a=="string"?o.createElement(Fr,{missing:a}):a.customImage))}const un=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,zn=/^.*ANNOTATION.*$/m,Gn=un.match(zn)[0],Gr=un.split(`
`).findIndex(e=>zn.test(e)),Ur=(0,w.A)(e=>({code:{borderRadius:6,margin:e.spacing(2,0),background:e.palette.type==="dark"?"#444":e.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function jr(e){return Array.from(Array(e+1).keys(),t=>t+Gr)}function Vr(e){const t=e.map(n=>Gn.replace("ANNOTATION",n)).join(`
`);return un.replace(Gn,t)}function Kr(e){const t=e.length<=1;return o.createElement(o.Fragment,null,"The ",t?"annotation":"annotations"," ",e.map(n=>o.createElement("code",null,n)).reduce((n,a)=>o.createElement(o.Fragment,null,n,", ",a))," ",t?"is":"are"," missing. You need to add the"," ",t?"annotation":"annotations"," to your component if you want to enable this tool.")}function Yr(e){const{annotation:t,readMoreUrl:n}=e,a=Array.isArray(t)?t:[t],r=n||"https://backstage.io/docs/features/software-catalog/well-known-annotations",s=Ur(),{t:i}=de(ye);return o.createElement(zr,{missing:"field",title:i("emptyState.missingAnnotation.title"),description:Kr(a),action:o.createElement(o.Fragment,null,o.createElement(H.A,{variant:"body1"},i("emptyState.missingAnnotation.actionTitle")),o.createElement(j.A,{className:s.code},o.createElement(Ht,{text:Vr(a),language:"yaml",showLineNumbers:!0,highlightedNumbers:jr(a.length),customStyle:{background:"inherit",fontSize:"115%"}})),o.createElement(re.A,{color:"primary",component:pe,to:r},i("emptyState.missingAnnotation.readMore")))})}const Xr=(0,w.A)(e=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${e.palette.border}`},"& th, & td":{border:`1px solid ${e.palette.border}`,padding:e.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:e.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:e.palette.background.paper},"& tr":{backgroundColor:e.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:e.palette.background.default},"& a":{color:e.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),Un=(e,t)=>t?typeof t=="string"?e+t:o.Children.toArray(t.props.children).reduce(Un,e):e,ft=({level:e,children:t})=>{const r=o.Children.toArray(t).reduce(Un,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return o.createElement(`h${e}`,{id:r},t)},Jr={code:({inline:e,className:t,children:n,...a})=>{const r=String(n).replace(/\n+$/,""),s=/language-(\w+)/.exec(t||"");return!e&&s?o.createElement(Ht,{language:s[1],text:r}):o.createElement("code",{className:t,...a},n)},h1:ft,h2:ft,h3:ft,h4:ft,h5:ft,h6:ft};function Qr(e){const{content:t,dialect:n="gfm",linkTarget:a,transformLinkUri:r,transformImageUri:s,className:i}=e,l=Xr();return o.createElement(tn.$,{remarkPlugins:n==="gfm"?[nn.A]:[],className:`${l.markdown} ${i}`,children:t,components:Jr,linkTarget:a,transformLinkUri:r,transformImageUri:s})}const zt=(e,t)=>(t.palette.type==="light"?C.e$:C.a)(t.palette[e].light,.6),jn=(e,t)=>(t.palette.type==="light"?C.a:C.e$)(t.palette[e].light,.9),Vn=(0,w.A)(e=>({root:{marginRight:e.spacing(1),fill:({severity:t})=>zt(t,e)}})),Zr=({severity:e})=>{const t=Vn({severity:e});return o.createElement(_t.A,{classes:t})},qr=({severity:e})=>{const t=Vn({severity:e});return o.createElement(en.A,{classes:t})},_r=(0,w.A)(e=>({panel:{backgroundColor:({severity:t})=>jn(t,e),color:({severity:t})=>zt(t,e),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:t})=>zt(t,e),fontWeight:e.typography.fontWeightBold},markdownContent:{"& p":{display:"inline"}},message:{width:"100%",display:"block",color:({severity:t})=>zt(t,e),backgroundColor:({severity:t})=>jn(t,e)},details:{width:"100%",display:"block",color:e.palette.textContrast,backgroundColor:e.palette.background.default,border:`1px solid ${e.palette.border}`,padding:e.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),eo=e=>e.charAt(0).toLocaleUpperCase("en-US")+e.slice(1);function to(e){const{severity:t="warning",title:n,titleFormat:a,message:r,children:s,defaultExpanded:i}=e,l=_r({severity:t}),c=eo(t)+(n?`: ${n}`:"");return o.createElement(De.A,{defaultExpanded:i!=null?i:!1,className:l.panel,role:"alert"},o.createElement(Ke.A,{expandIcon:o.createElement(qr,{severity:t}),className:l.summary},o.createElement(Zr,{severity:t}),o.createElement(H.A,{className:l.summaryText,variant:"subtitle1"},a==="markdown"?o.createElement(Qr,{content:c,className:l.markdownContent}):c)),(r||s)&&o.createElement(qt.A,null,o.createElement(f.A,{container:!0},r&&o.createElement(f.A,{item:!0,xs:12},o.createElement(H.A,{className:l.message,variant:"body1"},r)),s&&o.createElement(f.A,{item:!0,xs:12,className:l.details},s))))}const no=(0,w.A)(e=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:e.spacing(2)},divider:{margin:e.spacing(2)}}),{name:"BackstageErrorPanel"}),ao=({error:e,message:t,stack:n,children:a})=>{const r=no();return o.createElement(Q.A,{dense:!0},o.createElement(K.A,{alignItems:"flex-start"},o.createElement(ie.A,{classes:{secondary:r.text},primary:"Error",secondary:e}),o.createElement(Ct,{text:e})),o.createElement(K.A,{alignItems:"flex-start"},o.createElement(ie.A,{classes:{secondary:r.text},primary:"Message",secondary:t}),o.createElement(Ct,{text:t})),n&&o.createElement(K.A,{alignItems:"flex-start"},o.createElement(ie.A,{classes:{secondary:r.text},primary:"Stack Trace",secondary:n}),o.createElement(Ct,{text:n})),a)};function Gt(e){const{title:t,error:n,defaultExpanded:a,titleFormat:r,children:s}=e;return o.createElement(to,{severity:"error",title:t!=null?t:n.message,defaultExpanded:a,titleFormat:r},o.createElement(ao,{error:n.name,message:n.message,stack:n.stack,children:s}))}const ro=(0,w.A)(e=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:e.spacing(2)},divider:{margin:e.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function fl(e){var t;const{title:n,error:a,defaultExpanded:r}=e,s=ro();if(a.name!=="ResponseError")return React.createElement(Gt,{title:n!=null?n:a.message,defaultExpanded:r,error:a});const{body:i,cause:l}=a,{request:c,response:u}=i,g=`${u.statusCode}: ${l.name}`,p=c&&`${c.method} ${c.url}`,y=l.message.replace(/\\n/g,`
`),v=(t=l.stack)==null?void 0:t.replace(/\\n/g,`
`),R=JSON.stringify(i,void 0,2);return React.createElement(Gt,{title:n!=null?n:a.message,defaultExpanded:r,error:{name:g,message:y,stack:v}},p&&React.createElement(ListItem,{alignItems:"flex-start"},React.createElement(ListItemText,{classes:{secondary:s.text},primary:"Request",secondary:c?`${p}`:void 0}),React.createElement(Ct,{text:p})),React.createElement(React.Fragment,null,React.createElement(Divider,{component:"li",className:s.divider}),React.createElement(ListItem,{alignItems:"flex-start"},React.createElement(ListItemText,{classes:{secondary:s.text},primary:"Full Error as JSON"})),React.createElement(Ht,{language:"json",text:R,showCopyCodeButton:!0})))}function oo(e){const t=document.createElement("div");return t.setAttribute("id",e),t}function so(e){document.body.insertBefore(e,document.body.lastElementChild.nextElementSibling)}function io(e){const t=useRef(null);useEffect(function(){const r=document.querySelector(`#${e}`),s=r||oo(e);return r||so(s),s.appendChild(t.current),function(){t.current.remove(),s.childNodes.length===-1&&s.remove()}},[e]);function n(){return t.current||(t.current=document.createElement("div")),t.current}return n()}const dn="core.calloutSeen";function lo(){const[e,t]=useState(()=>{const a=localStorage.getItem(dn);return a?JSON.parse(a):{}}),n=useCallback((a,r)=>{const s=localStorage.getItem(dn),l={...s?JSON.parse(s):{},[a]:r};t(l),localStorage.setItem(dn,JSON.stringify(l))},[]);return{states:e,setState:n}}function co(e){const{states:t,setState:n}=lo(),a=useCallback(()=>{n(e,!0)},[n,e]);return{seen:t[e]===!0,markSeen:a}}function uo(e){const{seen:t,markSeen:n}=co(e);return{show:t===!1,hide:n}}const mo=(0,w.A)(e=>({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:`2px solid ${e.palette.common.white}`,zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:e.palette.common.white,zIndex:2003}}),{name:"BackstageFeatureCalloutCircular"});function hl(e){const{featureId:t,title:n,description:a,children:r}=e,{show:s,hide:i}=uo(t),l=io("core.callout"),c=useRef(null),[u,g]=useState(),p=mo(),y=useCallback(()=>{if(c.current){const v=c.current.getBoundingClientRect(),R=Math.max(v.width,v.height),P=800,N=v.x-(R-v.width)/2-P,W=v.y-(R-v.height)/2-P,oe=R+2*P,ge=450,L=v.x+v.width/2-ge,q=v.y-(R-v.height)/2+R+20;g({dotLeft:N,dotTop:W,dotSize:oe,borderWidth:P,textTop:q,textLeft:L,textWidth:ge})}},[]);return useEffect(()=>(window.addEventListener("resize",y),window.addEventListener("scroll",y),()=>{window.removeEventListener("resize",y),window.removeEventListener("scroll",y)}),[y]),useLayoutEffect(y,[c.current,y]),s?React.createElement(React.Fragment,null,React.createElement(Box,{className:p.featureWrapper,ref:c},r),createPortal(React.createElement(Box,{className:p.backdrop},React.createElement(ClickAwayListener,{onClickAway:i},React.createElement(React.Fragment,null,React.createElement(Box,{className:p.dot,"data-testid":"dot",style:{left:u==null?void 0:u.dotLeft,top:u==null?void 0:u.dotTop,width:u==null?void 0:u.dotSize,height:u==null?void 0:u.dotSize,borderWidth:u==null?void 0:u.borderWidth},onClick:i,onKeyDown:i,role:"button",tabIndex:0},React.createElement(Box,{className:p.pulseCircle})),React.createElement(Box,{className:p.text,"data-testid":"text",style:{left:u==null?void 0:u.textLeft,top:u==null?void 0:u.textTop,width:u==null?void 0:u.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},n),React.createElement(Typography,null,a))))),l)):React.createElement(React.Fragment,null,r)}const po=(0,w.A)(e=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:e.palette.text.secondary,cursor:"default"},primary:{color:e.palette.primary.main},secondary:{color:e.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:e.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function go({color:e="primary",disabled:t=!1,href:n="#",icon:a=React.createElement(LinkIcon,null),label:r,onClick:s,title:i}){const l=po();return t?React.createElement(Box,{title:i,className:classNames(l.link,l.disabled)},a,React.createElement(Typography,{variant:"caption",component:"span",className:l.label},r)):React.createElement(pe,{title:i,className:classNames(l.link,l[e]),to:n,onClick:s},a,React.createElement(Typography,{variant:"caption",component:"span",className:l.label},r))}const fo=(0,w.A)(e=>({links:{margin:e.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:e.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function yl(e){const{links:t}=e,n=fo();return React.createElement("nav",{className:n.links},t.map((a,r)=>React.createElement(go,{key:r+1,...a})))}const Kn=e=>{const t=e==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${t}) 0%,
    hsla(0, 0%, ${t}, 0.987) 8.1%,
    hsla(0, 0%, ${t}, 0.951) 15.5%,
    hsla(0, 0%, ${t}, 0.896) 22.5%,
    hsla(0, 0%, ${t}, 0.825) 29%,
    hsla(0, 0%, ${t}, 0.741) 35.3%,
    hsla(0, 0%, ${t}, 0.648) 41.2%,
    hsla(0, 0%, ${t}, 0.55) 47.1%,
    hsla(0, 0%, ${t}, 0.45) 52.9%,
    hsla(0, 0%, ${t}, 0.352) 58.8%,
    hsla(0, 0%, ${t}, 0.259) 64.7%,
    hsla(0, 0%, ${t}, 0.175) 71%,
    hsla(0, 0%, ${t}, 0.104) 77.5%,
    hsla(0, 0%, ${t}, 0.049) 84.5%,
    hsla(0, 0%, ${t}, 0.013) 91.9%,
    hsla(0, 0%, ${t}, 0) 100%
  `},ho=100,mn=10,yo=(0,w.A)(e=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:ho,height:`calc(100% + ${mn}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-mn,background:`linear-gradient(90deg, ${Kn(e.palette.type)})`},fadeRight:{right:-mn,background:`linear-gradient(270deg, ${Kn(e.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-e.spacing(2)},buttonRight:{right:-e.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function Eo(e){const[[t,n],a]=React.useState([0,0]);return React.useLayoutEffect(()=>{const r=e.current;if(!r){a([0,0]);return}const s=()=>{const i=r.scrollLeft,l=r.scrollWidth-r.offsetWidth-r.scrollLeft;a([i,l])};return s(),r.addEventListener("scroll",s),window.addEventListener("resize",s),()=>{r.removeEventListener("scroll",s),window.removeEventListener("resize",s)}},[e]),[t,n]}function vo(e,t,n){const[a,r]=React.useState(0);return React.useLayoutEffect(()=>{if(a===0)return;const s=window.performance.now(),i=requestAnimationFrame(l=>{if(!e.current)return;const c=l-s,u=Math.abs(a)*c/t,p=Math.max(n,u)*Math.sign(a);e.current.scrollBy({left:p});const y=a-p;Math.sign(a)!==Math.sign(y)?r(0):r(y)});return()=>cancelAnimationFrame(i)},[e,a,t,n]),r}function El(e){const{scrollStep:t=100,scrollSpeed:n=50,minScrollDistance:a=5,children:r,...s}=e,i=yo(e),l=React.useRef(),[c,u]=Eo(l),g=vo(l,n,a),p=y=>{l.current&&g(y?t:-t)};return React.createElement(Box,{...s,className:i.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:i.container,ref:l},r),React.createElement(Box,{className:classNames(i.fade,i.fadeLeft,{[i.fadeHidden]:c===0})}),React.createElement(Box,{className:classNames(i.fade,i.fadeRight,{[i.fadeHidden]:u===0})}),c>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>p(!1),className:classNames(i.button,i.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),u>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>p(!0),className:classNames(i.button,i.buttonRight,{})},React.createElement(ChevronRight,null)))}const bo=(0,w.A)(e=>({alpha:{color:e.palette.common.white,fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}}),{name:"BackstageLifecycle"});function vl(e){const t=bo(e),{shorthand:n,alpha:a}=e;return n?React.createElement(Typography,{component:"span",className:t[a?"alpha":"beta"],style:{fontSize:"120%"}},a?React.createElement(React.Fragment,null,"\u03B1"):React.createElement(React.Fragment,null,"\u03B2")):React.createElement(Typography,{component:"span",className:t[a?"alpha":"beta"]},a?"Alpha":"Beta")}const Ro=(0,o.lazy)(()=>Promise.all([d.e(2838),d.e(6936)]).then(d.bind(d,74555)).then(e=>({default:e.RealLogViewer})));function So(e){const{Progress:t}=(0,O.nm)().getComponents();return o.createElement(o.Suspense,{fallback:o.createElement(t,null)},o.createElement(Ro,{...e}))}const xo=(0,w.A)(e=>({root:{paddingLeft:e.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),Ao=({request:e,busy:t,setBusy:n})=>{const a=xo(),[r,s]=useState(),{t:i}=useTranslationRef(coreComponentsTranslationRef),l=async()=>{n(!0);try{await e.trigger()}catch(u){s(isError(u)?u.message:"An unspecified error occurred")}finally{n(!1)}},c=e.provider.icon;return React.createElement(ListItem,{disabled:t,classes:{root:a.root}},React.createElement(ListItemAvatar,null,React.createElement(c,{fontSize:"large"})),React.createElement(ListItemText,{primary:e.provider.title,secondary:r&&React.createElement(Typography,{color:"error"},r)}),React.createElement(Button$1,{color:"primary",variant:"contained",onClick:l},i("oauthRequestDialog.login")))},Co=(0,w.A)(e=>({dialog:{paddingTop:e.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:e.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:e.spacing(2,0)}}),{name:"OAuthRequestDialog"});function bl(e){var t;const n=Co(),[a,r]=useState(!1),s=useApi(oauthRequestApiRef),i=useApi(configApiRef),{t:l}=useTranslationRef(coreComponentsTranslationRef),c=(t=i.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?t:!1,u=useObservable(useMemo(()=>s.authRequest$(),[s]),[]),g=()=>{u.forEach(p=>p.reject())};return React.createElement(Dialog,{open:!!u.length,fullWidth:!0,maxWidth:"xs",classes:{paper:n.dialog},"aria-labelledby":"oauth-req-dialog-title"},React.createElement("main",null,React.createElement(DialogTitle,{classes:{root:n.title},id:"oauth-req-dialog-title"},React.createElement(Typography,{className:n.titleHeading,variant:"h1",variantMapping:{h1:"span"}},l("oauthRequestDialog.title")),c?React.createElement(Typography,null,l("oauthRequestDialog.authRedirectTitle")):null),React.createElement(DialogContent,{dividers:!0,classes:{root:n.contentList}},React.createElement(List,null,u.map(p=>React.createElement(Ao,{key:p.provider.title,request:p,busy:a,setBusy:r}))))),React.createElement(DialogActions,{classes:{root:n.actionButtons}},React.createElement(Button$1,{onClick:g},l("oauthRequestDialog.rejectAll"))))}const wo=(0,w.A)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function Rl(e){var t;const[n,a]=useState(!1),r=useIsMounted(),s=wo(),i=l=>{r()&&a(l)};return React.createElement(Tooltip,{title:(t=e.title)!=null?t:e.text||"",placement:e.placement,disableHoverListener:!n},React.createElement(TextTruncate,{text:e.text,line:e.line,onToggled:i,containerClassName:s.container}))}function Ut(e){const t=(0,A.A)(),[n,a]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{const r=setTimeout(()=>a(!0),t.transitions.duration.short);return()=>clearTimeout(r)},[t.transitions.duration.short]),n?o.createElement(rn.A,{...e,"data-testid":"progress"}):o.createElement(j.A,{display:"none"})}const Io=(0,w.A)(e=>({root:{maxWidth:"fit-content",padding:e.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:e.palette.textSubtle},arrow:{color:e.palette.textSubtle}}),{name:"BackstageBottomLink"});function Yn(e){const{link:t,title:n,onClick:a}=e,r=Io();return o.createElement(j.A,null,o.createElement(Mt.A,null),o.createElement(pe,{to:t,onClick:a,underline:"none"},o.createElement(j.A,{display:"flex",alignItems:"center",className:r.root},o.createElement(j.A,{className:r.boxTitle,fontWeight:"fontWeightBold",m:1},o.createElement(H.A,null,o.createElement("strong",null,n))),o.createElement(M.A,{className:r.arrow}))))}const To=e=>{const{slackChannel:t}=e,{t:n}=de(ye);if(t){if(typeof t=="string")return o.createElement(H.A,null,n("errorBoundary.title",{slackChannel:t}));if(!t.href)return o.createElement(H.A,null,n("errorBoundary.title",{slackChannel:t.name}))}else return null;return o.createElement(Ft,{to:t.href,variant:"contained"},t.name)},Xn=class extends o.Component{constructor(t){super(t),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(t,n){console.error(`ErrorBoundary, error: ${t}, info: ${n}`),this.setState({error:t,errorInfo:n})}render(){const{slackChannel:t,children:n}=this.props,{error:a}=this.state;return a?o.createElement(Gt,{title:"Something Went Wrong",error:a},o.createElement(To,{slackChannel:t})):n}},ko=(0,w.A)(e=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:e.spacing(2,2,2,2.5)},headerTitle:{fontWeight:e.typography.fontWeightBold},headerSubheader:{paddingTop:e.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),Bo=(0,T.A)(e=>({root:{display:"inline-block",padding:e.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(h.A),Jn={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function ht(e){const{title:t,subheader:n,divider:a=!0,deepLink:r,slackChannel:s,errorBoundaryProps:i,variant:l,children:c,headerStyle:u,headerProps:g,icon:p,action:y,actionsClassName:v,actions:R,cardClassName:P,actionsTopRight:N,className:W,noPadding:oe,titleTypographyProps:ge}=e,L=ko();let q={},se={};l&&l.split(/[\s]+/g).forEach(Xe=>{q={...q,...Jn.card[Xe]},se={...se,...Jn.cardContent[Xe]}});const fe=()=>!n&&!p?null:o.createElement("div",{className:L.headerSubheader,"data-testid":"info-card-subheader"},n&&o.createElement("div",{className:L.subheader},n),p),ze=i||(s?{slackChannel:s}:{});return o.createElement(m.A,{style:q,className:W},o.createElement(Xn,{...ze},t&&o.createElement($.A,{classes:{root:L.header,title:L.headerTitle,subheader:L.headerSubheader,avatar:L.headerAvatar,action:L.headerAction,content:L.headerContent},title:t,subheader:fe(),action:y,style:{...u},titleTypographyProps:ge,...g}),N&&o.createElement(Bo,null,N),a&&o.createElement(Mt.A,null),o.createElement(b.A,{className:_()(P,{[L.noPadding]:oe}),style:se},c),R&&o.createElement(h.A,{className:v},R),r&&o.createElement(Yn,{...r})))}const No=(0,w.A)(e=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:e.typography.pxToRem(45),fontWeight:e.typography.fontWeightBold,color:e.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),Qn={fractional:!0,inverse:!1,unit:"%",max:100},Zn=({palette:e,value:t,inverse:n,max:a})=>{if(isNaN(t))return"#ddd";const r=a||Qn.max,s=n?r-t:t;return s<r/3?e.status.error:s<r*(2/3)?e.status.warning:e.status.ok};function Po(e){const[t,n]=useState(null),{getColor:a=Zn}=e,r=No(e),{palette:s}=useTheme(),{value:i,fractional:l,inverse:c,unit:u,max:g,description:p}={...Qn,...e},y=l?Math.round(i*g):i,v=g!==100?Math.round(i):y,[R,P]=useState(!1);return useEffect(()=>{const N=t,W=()=>P(!0),oe=()=>P(!1);return N&&p?(N.addEventListener("mouseenter",W),N.addEventListener("mouseleave",oe),()=>{N.removeEventListener("mouseenter",W),N.removeEventListener("mouseleave",oe)}):()=>{P(!1)}},[p,t]),React.createElement(Box,{ref:n,className:r.root},React.createElement(Circle,{strokeLinecap:"butt",percent:y,strokeWidth:12,trailWidth:12,strokeColor:a({palette:s,value:v,inverse:c,max:g}),className:r.circle}),p&&R?React.createElement(Box,{className:r.description},p):React.createElement(Box,{className:r.overlay},isNaN(i)?"N/A":`${v}${u}`))}const Lo=(0,w.A)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function Sl(e){const t=Lo(e),{title:n,subheader:a,progress:r,inverse:s,deepLink:i,description:l,icon:c,variant:u,getColor:g}=e,p={inverse:s,description:l,getColor:g,value:r};return React.createElement(Box,{className:t.root},React.createElement(ht,{title:n,subheader:a,deepLink:i,variant:u,icon:c},React.createElement(Po,{...p})))}function xl(e){const{value:t,getColor:n=Zn,width:a="thick"}=e,{palette:r}=useTheme();if(isNaN(t))return null;let s=Math.round(t*100*100)/100;s>100&&(s=100);const i=a==="thick"?4:1,l=n({palette:r,value:s,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${s}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:s,strokeWidth:i,trailWidth:i,strokeColor:l})))}const $o=(0,w.A)(e=>(0,k.A)({icon:{position:"absolute",right:e.spacing(.5),pointerEvents:"none",color:"#616161"}}),{name:"BackstageClosedDropdown"}),Mo=()=>{const e=$o();return o.createElement(mt.A,{className:e.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"currentColor"}))},Oo=(0,w.A)(e=>(0,k.A)({icon:{position:"absolute",right:e.spacing(.5),pointerEvents:"none",color:"#616161"}}),{name:"BackstageOpenedDropdown"}),Wo=()=>{const e=Oo();return o.createElement(mt.A,{className:e.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"currentColor"}))},Do=(0,T.A)(e=>(0,k.A)({root:{"label + &":{marginTop:e.spacing(3)},"&.Mui-focused > div[role=button]":{borderColor:e.palette.primary.main}},input:{borderRadius:e.shape.borderRadius,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",fontSize:e.typography.body1.fontSize,padding:e.spacing(1.25,3.25,1.25,1.5),transition:e.transitions.create(["border-color","box-shadow"]),"&:focus":{background:e.palette.background.paper,borderRadius:e.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(Fe.A),Fo=(0,w.A)(e=>(0,k.A)({formControl:{margin:e.spacing(1,0),maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:e.typography.body2.fontSize,fontFamily:e.typography.fontFamily,color:e.palette.text.primary,"&.Mui-focused":{color:e.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:e.typography.body2.fontSize,fontFamily:e.typography.fontFamily,color:e.palette.text.primary,"&.Mui-focused":{color:e.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function Ho(e){const{multiple:t,items:n,label:a,placeholder:r,selected:s,onChange:i,triggerReset:l,native:c=!1,disabled:u=!1,margin:g}=e,p=Fo(),[y,v]=(0,o.useState)(s||(t?[]:"")),[R,P]=(0,o.useState)(!1);(0,o.useEffect)(()=>{v(t?[]:"")},[l,t]),(0,o.useEffect)(()=>{v(s||(t?[]:""))},[s,t]);const N=L=>{v(L.target.value),i(L.target.value)},W=L=>{if(u){L.preventDefault();return}P(q=>t&&!(L.target instanceof HTMLElement)?!0:!q)},oe=()=>{P(!1)},ge=L=>()=>{const q=y.filter(se=>se!==L);v(q),i(q)};return o.createElement(j.A,{className:p.root},o.createElement(ce.A,{className:p.formControl},o.createElement(xt.A,{className:p.formLabel},a),o.createElement(dt.A,{"aria-label":a,value:y,native:c,disabled:u,"data-testid":"select",displayEmpty:!0,multiple:t,margin:g,onChange:N,open:R,onOpen:W,onClose:oe,input:o.createElement(Do,null),label:a,renderValue:L=>{var q;return t&&y.length!==0?o.createElement(j.A,{className:p.chips},L.map(se=>{const fe=n.find(ze=>ze.value===se);return fe?o.createElement(le.A,{key:fe==null?void 0:fe.value,label:fe==null?void 0:fe.label,clickable:!0,onDelete:ge(se),className:p.chip}):!1})):o.createElement(H.A,null,y.length===0?r||"":(q=n.find(se=>se.value===L))==null?void 0:q.label)},IconComponent:()=>R?o.createElement(Wo,null):o.createElement(Mo,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},r&&!t&&o.createElement(He.A,{value:[]},r),c?n&&n.map(L=>o.createElement("option",{value:L.value,key:L.value},L.label)):n&&n.map(L=>o.createElement(He.A,{key:L.value,value:L.value},t&&o.createElement(X.A,{color:"primary",checked:y.includes(L.value)||!1,className:p.checkbox}),L.label)))))}const pn=()=>{},qn=o.createContext({stepperLength:0,stepIndex:0,setStepIndex:pn,stepHistory:[],setStepHistory:pn,onStepChange:pn});function Al(e){const{children:t,elevated:n,onStepChange:a,activeStep:r=0}=e,[s,i]=useState(r),[l,c]=useState([0]);useEffect(()=>{i(r)},[r]);const u=[];let g;return Children.forEach(t,p=>{isValidElement(p)&&(p.props.end?g=p:u.push(p))}),React.createElement(React.Fragment,null,React.createElement(qn.Provider,{value:{stepIndex:s,setStepIndex:i,stepHistory:l,setStepHistory:c,onStepChange:a,stepperLength:Children.count(t)}},React.createElement(MuiStepper,{activeStep:s,orientation:"vertical",elevation:n?2:0},u)),s>=Children.count(t)-1&&g)}const zo=(0,w.A)(e=>({root:{marginTop:e.spacing(3),"& button":{marginRight:e.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),Go=({text:e,handleClick:t})=>{const{t:n}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(Button$1,{onClick:t},e||n("simpleStepper.reset"))},Uo=({text:e,handleClick:t,disabled:n,last:a,stepIndex:r})=>{const{t:s}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(Button$1,{variant:"contained",color:"primary",disabled:n,"data-testid":`nextButton-${r}`,onClick:t},e||s(a?"simpleStepper.finish":"simpleStepper.next"))},jo=({text:e,handleClick:t,disabled:n,stepIndex:a})=>{const{t:r}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:n,"data-testid":`skipButton-${a}`,onClick:t},e||r("simpleStepper.skip"))},Vo=({text:e,handleClick:t,disabled:n,stepIndex:a})=>{const{t:r}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(Button$1,{onClick:t,"data-testid":`backButton-${a}`,disabled:n},e||r("simpleStepper.back"))},_n=({actions:e={},children:t})=>{const n=zo(),{stepperLength:a,stepIndex:r,setStepIndex:s,stepHistory:i,setStepHistory:l,onStepChange:c}=useContext(qn),u=(v,R)=>{R&&R(),c&&c(r,v),s(v)},g=()=>{const v=e.nextStep?e.nextStep(r,a-1):r+1;u(v,e.onNext),l([...i,v])},p=()=>{i.pop(),u(i[i.length-1],e.onBack),l([...i])},y=()=>{u(0,e.onRestart),l([0])};return React.createElement(Box,{className:n.root},[void 0,!0].includes(e.showBack)&&r!==0&&React.createElement(Vo,{text:e.backText,handleClick:p,disabled:r===0,stepIndex:r}),e.showSkip&&React.createElement(jo,{text:e.skipText,handleClick:g,disabled:!!a&&r>=a||!!e.canSkip&&!e.canSkip(),stepIndex:r}),[void 0,!0].includes(e.showNext)&&React.createElement(Uo,{text:e.nextText,handleClick:g,disabled:!!a&&r>=a||!!e.canNext&&!e.canNext(),stepIndex:r}),e.showRestart&&r!==0&&React.createElement(Go,{text:e.restartText,handleClick:y,stepIndex:r}),t)},Ko=(0,w.A)(e=>({end:{padding:e.spacing(3)}}),{name:"SimpleStepperStep"});function Cl(e){const{title:t,children:n,end:a,actions:r,...s}=e,i=Ko();return a?React.createElement(Box,{className:i.end},React.createElement(Typography,{variant:"h6"},t),n,React.createElement(_n,{actions:{...r||{},showNext:!1}})):React.createElement(MuiStep,{...s},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},t)),React.createElement(StepContent,null,n,React.createElement(_n,{actions:r})))}const yt=(0,w.A)(e=>({status:{fontWeight:e.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:e.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:e.palette.status.ok}},warning:{"&::before":{backgroundColor:e.palette.status.warning}},error:{"&::before":{backgroundColor:e.palette.status.error}},pending:{"&::before":{backgroundColor:e.palette.status.pending}},running:{"&::before":{backgroundColor:e.palette.status.running}},aborted:{"&::before":{backgroundColor:e.palette.status.aborted}}}),{name:"BackstageStatus"});function Yo(e){const t=yt(e);return o.createElement(H.A,{component:"span",className:_()(t.status,t.ok),"aria-label":"Status ok","aria-hidden":"true",...e})}function Xo(e){const t=yt(e);return o.createElement(H.A,{component:"span",className:_()(t.status,t.warning),"aria-label":"Status warning","aria-hidden":"true",...e})}function Jo(e){const t=yt(e);return o.createElement(H.A,{component:"span",className:_()(t.status,t.error),"aria-label":"Status error","aria-hidden":"true",...e})}function Qo(e){const t=yt(e);return o.createElement(H.A,{component:"span",className:_()(t.status,t.pending),"aria-label":"Status pending","aria-hidden":"true",...e})}function Zo(e){const t=yt(e);return o.createElement(H.A,{component:"span",className:_()(t.status,t.running),"aria-label":"Status running","aria-hidden":"true",...e})}function wl(e){const t=yt(e);return React.createElement(Typography,{component:"span",className:classNames(t.status,t.aborted),"aria-label":"Status aborted","aria-hidden":"true",...e})}const qo=e=>(0,k.A)({root:{fontWeight:e.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:e.spacing(4),border:"0",verticalAlign:"top"}}),_o={root:{border:"0",verticalAlign:"top"}},es=e=>(0,k.A)({root:{margin:e.spacing(0,0,-1,0)}}),ts=e=>(0,k.A)({root:{padding:e.spacing(0,0,1,0)},random:{}}),ns=(0,T.A)(qo,{name:"BackstageMetadataTableTitleCell"})(pt.A),as=(0,T.A)(_o,{name:"BackstageMetadataTableCell"})(pt.A),rs=({dense:e,children:t})=>React.createElement(Table$1,{size:e?"small":"medium"},React.createElement(TableBody,null,t)),os=({title:e,children:t,...n})=>React.createElement(TableRow,null,e&&React.createElement(ns,null,e),React.createElement(as,{colSpan:e?1:2,...n},t)),ea=(0,T.A)(es,{name:"BackstageMetadataTableList"})(({classes:e,children:t})=>o.createElement(Q.A,{disablePadding:!0,className:e.root},t)),ta=(0,T.A)(ts,{name:"BackstageMetadataTableListItem"})(({classes:e,children:t})=>o.createElement(K.A,{className:e.root},t)),na=(0,k.A)({root:{margin:"0 0",listStyleType:"none"}}),ss=e=>(0,k.A)({root:{...na.root,paddingLeft:e.spacing(1)}}),aa=(0,T.A)(na,{name:"BackstageStructuredMetadataTableList"})(({classes:e,children:t})=>o.createElement(ea,{classes:e},t)),ra=(0,T.A)(ss,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:e,children:t})=>o.createElement(ea,{classes:e},t));function is(e,t,n){const a=e.map((r,s)=>React.createElement(ta,{key:s},gn(r,t,n)));return n?React.createElement(ra,null,a):React.createElement(aa,null,a)}function ls(e,t,n){const a=Object.keys(e).map(r=>{const s=gn(e[r],t,!0);return React.createElement(ta,{key:r},React.createElement(Typography,{variant:"body2",component:"span"},`${t.titleFormat(r)}: `),s)});return n?React.createElement(ra,null,a):React.createElement(aa,null,a)}function gn(e,t,n){return React.isValidElement(e)?React.createElement(Fragment,null,e):e!==null&&typeof e=="object"&&!Array.isArray(e)?ls(e,t,n):Array.isArray(e)?is(e,t,n):typeof e=="boolean"?React.createElement(Fragment,null,e?"\u2705":"\u274C"):React.createElement(Typography,{variant:"body2",component:"span"},e)}const cs=({value:e,options:t})=>React.createElement(Fragment,null,gn(e,t,!1)),us=({title:e,value:t,options:n})=>React.createElement(os,{title:n.titleFormat(e)},React.createElement(cs,{value:t,options:n}));function ds(e,t){return Object.keys(e).map(n=>React.createElement(us,{key:n,title:n,value:e[n],options:t}))}function Il(e){const{metadata:t,dense:n=!0,options:a={}}=e,r=ds(t,{titleFormat:startCase,...a});return React.createElement(rs,{dense:n},r)}function ms(e){return qs.stringify(e,{strictNullHandling:!0})}function oa(e){return qs.parse(e,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function sa(e,t){return oa(e)[t]}function ps(e,t,n){const a={...oa(e),[t]:n};return ms(a)}function Tl(e,t=250){const[n,a]=useSearchParams(),r=n.toString(),[s,i]=useState(sa(r,e));return useEffect(()=>{const l=sa(r,e);i(c=>isEqual(l,c)?c:l)},[r,i,e]),useDebouncedEffect(()=>{const l=ps(r,e,s);r!==l&&a(l,{replace:!0})},[a,s,r,e],t),[s,i]}const gs=()=>{const{t:e}=useTranslationRef(coreComponentsTranslationRef);return{url:"https://github.com/backstage/backstage/issues",items:[{title:e("supportConfig.default.title"),icon:"warning",links:[{title:e("supportConfig.default.linkTitle"),url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]}};function ia(){const t=useApiHolder().get(configApiRef),n=t==null?void 0:t.getOptionalConfig("app.support"),a=gs();return n?{url:n.getString("url"),items:n.getConfigArray("items").flatMap(r=>{var s;return{title:r.getString("title"),icon:r.getOptionalString("icon"),links:((s=r.getOptionalConfigArray("links"))!=null?s:[]).flatMap(i=>({url:i.getString("url"),title:i.getString("title")}))}})}:a}function Ne(e){var t;const{id:n,Fallback:a=MuiBrokenImageIcon,...r}=e,i=(t=useApp().getSystemIcon(n))!=null?t:a;return React.createElement(i,{...r})}function kl(e){return React.createElement(Ne,{id:"brokenImage",...e})}function Bl(e){return React.createElement(Ne,{id:"catalog",...e})}function Nl(e){return React.createElement(Ne,{id:"chat",...e})}function Pl(e){return React.createElement(Ne,{id:"dashboard",...e})}function Ll(e){return React.createElement(Ne,{id:"docs",...e})}function $l(e){return React.createElement(Ne,{id:"email",...e})}function Ml(e){return React.createElement(Ne,{id:"github",...e})}function Ol(e){return React.createElement(Ne,{id:"group",...e})}function jt(e){return React.createElement(Ne,{id:"help",...e})}function Wl(e){return React.createElement(Ne,{id:"user",...e})}function Dl(e){return React.createElement(Ne,{id:"warning",...e})}const fs=(0,w.A)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),hs=({icon:e})=>{var t;const n=useApp(),a=e&&(t=n.getSystemIcon(e))!=null?t:jt;return React.createElement(a,null)},ys=({link:e})=>{var t;return React.createElement(pe,{to:e.url},(t=e.title)!=null?t:e.url)},Es=({item:e})=>{var t;return React.createElement(MenuItem,null,React.createElement(ListItemIcon,null,React.createElement(hs,{icon:e.icon})),React.createElement(ListItemText,{primary:e.title,secondary:(t=e.links)==null?void 0:t.reduce((n,a,r)=>[...n,r>0&&React.createElement("br",{key:r}),React.createElement(ys,{link:a,key:a.url})],[])}))};function Fl(e){const{t}=useTranslationRef(coreComponentsTranslationRef),{title:n,items:a,children:r}=e,{items:s}=ia(),[i,l]=useState(!1),[c,u]=useState(null),g=fs(),p=useMediaQuery(R=>R.breakpoints.down("sm")),y=R=>{u(R.currentTarget),l(!0)},v=()=>{l(!1)};return React.createElement(React.Fragment,null,React.createElement(Box,{display:"flex",ml:1},p?React.createElement(IconButton,{color:"primary",size:"small",onClick:y,"data-testid":"support-button","aria-label":"Support"},React.createElement(jt,null)):React.createElement(Button$1,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:y,startIcon:React.createElement(jt,null)},t("supportButton.title"))),React.createElement(Popover,{"data-testid":"support-button-popover",open:i,anchorEl:c,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:v},React.createElement(MenuList,{className:g.popoverList,autoFocusItem:!!c},n&&React.createElement(MenuItem,{alignItems:"flex-start",className:g.menuItem},React.createElement(Typography,{variant:"subtitle1"},n)),React.Children.map(r,(R,P)=>React.createElement(MenuItem,{alignItems:"flex-start",key:`child-${P}`,className:g.menuItem},R)),(a!=null?a:s).map((R,P)=>React.createElement(Es,{item:R,key:`item-${P}`}))),React.createElement(DialogActions,null,React.createElement(Button$1,{color:"primary",onClick:v,"aria-label":"Close"},t("supportButton.close")))))}const vs=(0,w.A)(e=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:e.spacing(3),paddingBottom:e.spacing(3),paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function fn(e){const{className:t,stretch:n,noPadding:a,children:r,...s}=e,i=vs();return o.createElement("article",{...s,className:_()(i.root,t,{[i.stretch]:n,[i.noPadding]:a})},r)}const bs=(0,w.A)(e=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:e.palette.background.paper,paddingLeft:e.spacing(3),minWidth:0},defaultTab:{...e.typography.caption,padding:e.spacing(3,3),textTransform:"uppercase",fontWeight:e.typography.fontWeightBold,color:e.palette.text.secondary},selected:{color:e.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:e.palette.background.default,color:e.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function Rs(e){const{tabs:t,onChange:n,selectedIndex:a}=e,[r,s]=(0,o.useState)(a!=null?a:0),i=bs(),l=(0,o.useCallback)((c,u)=>{a===void 0&&s(u),n&&n(u)},[a,n]);return(0,o.useEffect)(()=>{a!==void 0&&s(a)},[a]),o.createElement(j.A,{className:i.tabsWrapper},o.createElement(za.A,{indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:l,value:r},t.map((c,u)=>o.createElement(Ha.A,{...c.tabProps,"data-testid":`header-tab-${u}`,label:c.label,key:c.id,value:u,className:i.defaultTab,classes:{selected:i.selected,root:i.tabRoot}}))))}function Ss(e){var t,n,a,r,s;const i=(0,me.g)(),c=e.map(({path:v,children:R})=>({caseSensitive:!1,path:`${v}/*`,element:R})).sort((v,R)=>R.path.replace(/\/\*$/,"").localeCompare(v.path.replace(/\/\*$/,""))),u=(n=(0,me.Ye)(c))!=null?n:(t=e[0])==null?void 0:t.children;let g=(a=i["*"])!=null?a:"";g.startsWith("/")||(g=`/${g}`);const[p]=(r=(0,ke.ue)(c,g))!=null?r:[],y=p?e.findIndex(v=>`${v.path}/*`===p.route.path):0;return{index:y===-1?0:y,element:u,route:(s=e[y])!=null?s:e[0]}}function xs(e){const{routes:t}=e,n=(0,me.Zp)(),{index:a,route:r,element:s}=Ss(t),i=(0,o.useMemo)(()=>t.map(c=>({id:c.path,label:c.title,tabProps:c.tabProps})),[t]),l=c=>{let{path:u}=t[c];u=u.replace(/\/\*$/,""),u=u.replace(/^\//,""),n(u)};return o.createElement(o.Fragment,null,o.createElement(Rs,{tabs:i,selectedIndex:a,onChange:l}),o.createElement(fn,null,o.createElement(Wt.m,{title:r==null?void 0:r.title}),s))}const hn=()=>null;(0,O.h3)(hn,"core.gatherMountPoints",!0);function la(e){const t=o.createElement(hn,{path:"",title:""},o.createElement("div",null)).type;return o.Children.toArray(e).flatMap(n=>{if(!(0,o.isValidElement)(n))return[];if(n.type===o.Fragment)return la(n.props.children);if(n.type!==t)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:a,title:r,children:s,tabProps:i}=n.props;return[{path:a,title:r,children:s,tabProps:i}]})}function As(e){const t=la(e.children);return o.createElement(xs,{routes:t})}As.Route=hn;const Cs=(0,w.A)(e=>({value:{marginBottom:e.spacing(.75)},subvalue:{color:e.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function Hl(e){const{value:t,subvalue:n}=e,a=Cs();return React.createElement(React.Fragment,null,React.createElement(Box,{className:a.value},t),React.createElement(Box,{className:a.subvalue},n))}const ws=(0,w.A)(e=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:e.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:e.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${e.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:e.spacing(2)}}}),{name:"BackstageTableFilters"}),Is=e=>{var t;const n=ws(),{onChangeFilters:a}=e,{t:r}=de(ye),[s,i]=(0,o.useState)({...e.selectedFilters}),[l,c]=(0,o.useState)(!1),u=()=>{i({}),c(g=>!g)};return(0,o.useEffect)(()=>{a(s)},[s,a]),o.createElement(j.A,{className:n.root},o.createElement(j.A,{className:n.header},o.createElement(j.A,{className:n.value},r("table.filter.title")),o.createElement(re.A,{color:"primary",onClick:u},r("table.filter.clearAll"))),o.createElement(j.A,{className:n.filters},((t=e.filters)==null?void 0:t.length)&&e.filters.map(g=>o.createElement(Ho,{triggerReset:l,key:g.element.label,...g.element,selected:s[g.element.label],onChange:p=>i({...s,[g.element.label]:p})}))))};function Ts(e){return o.createElement("tbody",{"data-testid":"loading-indicator"},o.createElement("tr",null,o.createElement("td",{colSpan:e.colSpan},o.createElement(j.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",minHeight:"15rem"}},o.createElement(qa.A,{size:"5rem"})))))}const ca={Add:(0,o.forwardRef)((e,t)=>o.createElement(Ga.A,{...e,ref:t})),Check:(0,o.forwardRef)((e,t)=>o.createElement(ja.A,{...e,ref:t})),Clear:(0,o.forwardRef)((e,t)=>o.createElement(Pn.default,{...e,ref:t})),Delete:(0,o.forwardRef)((e,t)=>o.createElement(Va.A,{...e,ref:t})),DetailPanel:(0,o.forwardRef)((e,t)=>o.createElement(Ot.A,{...e,ref:t})),Edit:(0,o.forwardRef)((e,t)=>o.createElement(Ka.A,{...e,ref:t})),Export:(0,o.forwardRef)((e,t)=>o.createElement(Qa.A,{...e,ref:t})),Filter:(0,o.forwardRef)((e,t)=>o.createElement(sn.A,{...e,ref:t})),FirstPage:(0,o.forwardRef)((e,t)=>o.createElement(Ya.A,{...e,ref:t})),LastPage:(0,o.forwardRef)((e,t)=>o.createElement(Xa.A,{...e,ref:t})),NextPage:(0,o.forwardRef)((e,t)=>o.createElement(Ot.A,{...e,ref:t})),PreviousPage:(0,o.forwardRef)((e,t)=>o.createElement(an.A,{...e,ref:t})),ResetSearch:(0,o.forwardRef)((e,t)=>o.createElement(Pn.default,{...e,ref:t})),Search:(0,o.forwardRef)((e,t)=>o.createElement(sn.A,{...e,ref:t})),SortArrow:(0,o.forwardRef)((e,t)=>o.createElement(Ua.A,{...e,ref:t})),ThirdStateCheck:(0,o.forwardRef)((e,t)=>o.createElement(Ja.A,{...e,ref:t})),ViewColumn:(0,o.forwardRef)((e,t)=>o.createElement(Za.A,{...e,ref:t}))};function ua(e,t){const n=t.split(".");let a=e[n[0]];for(let r=1;r<n.length;++r){if(a===void 0)return a;const s=n[r];a=a[s]}return a}const ks=(0,T.A)(e=>({header:{padding:e.spacing(1,2,1,2.5),borderTop:`1px solid ${e.palette.grey.A100}`,borderBottom:`1px solid ${e.palette.grey.A100}`,fontWeight:e.typography.fontWeightBold,position:"static",wordBreak:"normal",textTransform:"uppercase"}}),{name:"BackstageTableHeader"})(Dt.rV),da=(0,T.A)(e=>({root:{padding:e.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:e.typography.fontWeightBold}},searchField:{paddingRight:e.spacing(2)}}),{name:"BackstageTableToolbar"})(Dt.Nb),Bs=(0,w.A)(e=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:e.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),Ns=(0,w.A)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function Ps(e,t){return e.map(n=>{var a;const r=(a=n.headerStyle)!=null?a:{};let s=n.cellStyle||{};if(n.highlight)if(r.color=t.palette.textContrast,typeof s=="object")s.fontWeight=t.typography.fontWeightBold;else{const i=s;s=(l,c,u)=>({...i(l,c,u),fontWeight:t.typography.fontWeightBold})}return{...n,headerStyle:r,cellStyle:s}})}function Ls(e,t){return(0,ve.transform)(e,(n,a,r)=>{(0,ve.isEqual)(a,t[r])||(n[r]=a)})}const ma={search:"",filtersOpen:!1,filters:{}};function $s(e){const{toolbarRef:t,setSearch:n,hasFilters:a,selectedFiltersLength:r,toggleFilters:s}=e,i=Bs(),l=(0,o.useCallback)(c=>{e.onSearchChanged(c),n(c)},[e,n]);return a?o.createElement(j.A,{className:i.root},o.createElement(j.A,{className:i.root},o.createElement(we.A,{onClick:s,"aria-label":"filter list"},o.createElement(sn.A,null)),o.createElement(H.A,{className:i.title},"Filters (",r,")")),o.createElement(da,{...e,ref:t,onSearchChanged:l})):o.createElement(da,{...e,ref:t,onSearchChanged:l})}function pa(e){const{data:t,columns:n,emptyContent:a,options:r,title:s,subtitle:i,localization:l,filters:c,initialState:u,onStateChange:g,components:p,isLoading:y,...v}=e,R=Ns(),P=(0,A.A)(),N={...ma,...u},[W,oe]=(0,o.useState)(N.filtersOpen),ge=(0,o.useCallback)(()=>oe(Re=>!Re),[oe]),[L,q]=(0,o.useState)(N.filters),[se,fe]=(0,o.useState)(N.search);(0,o.useEffect)(()=>{if(g){const Re=Ls({search:se,filtersOpen:W,filters:L},ma);g(Re)}},[se,W,L,g]);const ze=(0,o.useCallback)(Re=>{var It;return(It=n.find(Je=>Je.title===Re))==null?void 0:It.field},[n]),bt=(0,o.useMemo)(()=>{if(typeof t=="function"||!L)return t;const Re=Object.values(L);return t&&Re.flat().length?t.filter(Je=>!!Object.entries(L).filter(([,Tt])=>!!Tt.length).every(([Tt,tt])=>{const nt=ua(Je,ze(Tt));return Array.isArray(nt)&&Array.isArray(tt)?nt.some(Bn=>tt.includes(Bn)):Array.isArray(nt)?nt.includes(tt):Array.isArray(tt)?tt.includes(nt):nt===tt})):t},[t,L,ze]),Xe=Object.values(L).flat().length,et=!!(c!=null&&c.length),kn=(0,o.useCallback)(Re=>o.createElement($s,{setSearch:fe,hasFilters:et,selectedFiltersLength:Xe,toggleFilters:ge,...Re}),[ge,et,Xe,fe]),ot=typeof t!="function"&&t.length===0,Qt=n.length,Z=(0,o.useMemo)(()=>Ms({hasNoRows:ot,emptyContent:a,columnCount:Qt,loading:y}),[ot,a,Qt,y]);return o.createElement(j.A,{className:R.root},W&&t&&typeof t!="function"&&(c==null?void 0:c.length)&&o.createElement(Is,{filters:Os(c,t,n),selectedFilters:L,onChangeFilters:q}),o.createElement(Dt.Ay,{components:{Header:ks,Body:Z,Toolbar:kn,...p},options:r,columns:Ps(n,P),icons:ca,title:o.createElement(o.Fragment,null,o.createElement(H.A,{variant:"h5",component:"h2"},s),i&&o.createElement(H.A,{color:"textSecondary",variant:"body1"},i)),data:bt,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"},...l},...v}))}pa.icons=Object.freeze(ca);function Ms({columnCount:e,emptyContent:t,hasNoRows:n,loading:a}){return r=>a?o.createElement(Ts,{colSpan:e}):t&&n?o.createElement("tbody",null,o.createElement("tr",null,o.createElement("td",{colSpan:e},t))):o.createElement(Dt.C6,{...r})}function Os(e,t,n){const a=s=>{const i=new Set,l=c=>{c!=null&&i.add(c)};return t&&t.forEach(c=>{var u;const g=ua(c,(u=n.find(p=>p.title===s))==null?void 0:u.field);Array.isArray(g)?g.forEach(l):l(g)}),i},r=s=>({placeholder:"All results",label:s.column,multiple:s.type==="multiple-select",items:[...a(s.column)].sort().map(i=>({label:i,value:i}))});return e.map(s=>({type:s.type,element:r(s)}))}function Ws(e,t){const n=e[e.length-1];if(n)return n>=.9?t.palette.status.ok:n>=.5?t.palette.status.warning:t.palette.status.error}function zl(e){var t;const n=useTheme();return e.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...e},e.title&&React.createElement("title",null,e.title),React.createElement(SparklinesLine,{color:(t=e.color)!=null?t:Ws(e.data,n)})):null}const Ds=e=>makeStyles(t=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:t.spacing(2),textAlign:e.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:t.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),Fs=({title:e="Unknown page",className:t})=>React.createElement(Typography,{variant:"h4",component:"h2",className:t,"data-testid":"header-title"},e);function Hs(e){const{description:t,title:n,titleComponent:a=void 0,children:r,textAlign:s="left"}=e,i=Ds({textAlign:s})(),l=a||React.createElement(Fs,{title:n,className:i.title});return React.createElement(React.Fragment,null,React.createElement(Helmet,{title:n}),React.createElement(Box,{className:i.container},React.createElement(Box,{className:i.leftItemsBox},l,t&&React.createElement(Typography,{className:i.description,variant:"body2"},t)),React.createElement(Box,{className:i.rightItemsBox},r)))}const zs=(0,w.A)(e=>({micDrop:{maxWidth:"60%",bottom:e.spacing(2),right:e.spacing(2),[e.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:e.spacing(10,"auto",4)}}}),{name:"BackstageErrorPageMicDrop"}),Gs=()=>{const e=zs();return React.createElement("img",{src:MicDropSvgUrl,className:e.micDrop,alt:"Girl dropping mic from her hands"})},Us=(0,w.A)(e=>({title:{paddingBottom:e.spacing(5),[e.breakpoints.down("xs")]:{paddingBottom:e.spacing(4),fontSize:e.typography.h3.fontSize}}}),{name:"BackstageErrorPageStackDetails"});function js(e){const{stack:t}=e,n=Us(),{t:a}=useTranslationRef(coreComponentsTranslationRef),[r,s]=useState(!1);return r?React.createElement(React.Fragment,null,React.createElement(Typography,{variant:"h6",className:n.title},React.createElement(pe,{to:"#",onClick:()=>s(!1)},a("errorPage.showLessDetails"))),React.createElement(Ht,{text:t,language:"text",showCopyCodeButton:!0,showLineNumbers:!0})):React.createElement(Typography,{variant:"h6",className:n.title},React.createElement(pe,{to:"#",onClick:()=>s(!0)},a("errorPage.showMoreDetails")))}const Vs=(0,w.A)(e=>({container:{padding:e.spacing(8),[e.breakpoints.down("xs")]:{padding:e.spacing(2)}},title:{paddingBottom:e.spacing(5),[e.breakpoints.down("xs")]:{paddingBottom:e.spacing(4),fontSize:e.typography.h3.fontSize}},subtitle:{color:e.palette.textSubtle}}),{name:"BackstageErrorPage"});function Gl(e){const{status:t="",statusMessage:n,additionalInfo:a,supportUrl:r,stack:s}=e,i=Vs(),l=useNavigate(),c=ia(),{t:u}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(Grid,{container:!0,className:i.container},React.createElement(Grid,{item:!0,xs:12,sm:8,md:4},React.createElement(Typography,{"data-testid":"error",variant:"body1",className:i.subtitle},u("errorPage.subtitle",{status:t,statusMessage:n})),React.createElement(Typography,{variant:"body1",className:i.subtitle},a),React.createElement(Typography,{variant:"h2",className:i.title},u("errorPage.title")),React.createElement(Typography,{variant:"h6",className:i.title},React.createElement(pe,{to:"#","data-testid":"go-back-link",onClick:()=>l(-1)},u("errorPage.goBack")),"... or please"," ",React.createElement(pe,{to:r||c.url},"contact support")," if you think this is a bug."),s&&React.createElement(js,{stack:s})),React.createElement(Gs,null))}const Ks=(0,T.A)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(H.A),yn=(0,T.A)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(j.A),Ys=(0,T.A)({root:{fontStyle:"italic"}},{name:"BreadcrumbsCurrentPage"})(j.A);function ga(e){const{children:t,...n}=e,[a,r]=o.useState(null),s=o.Children.toArray(t),[i,l,...c]=s,u=c.length?c.pop():s[s.length-1],g=s.length>3,p=R=>{r(R.currentTarget)},y=()=>{r(null)},v=!!a;return o.createElement(o.Fragment,null,o.createElement(_a.A,{"aria-label":"breadcrumb",...n},s.length>1&&o.createElement(yn,{clone:!0},i),s.length>2&&o.createElement(yn,{clone:!0},l),g&&o.createElement(Ks,{onClick:p},"..."),o.createElement(Ys,null,u)),o.createElement(on.Ay,{open:v,anchorEl:a,onClose:y,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},o.createElement(Q.A,null,c.map((R,P)=>o.createElement(K.A,{key:P,button:!0},o.createElement(yn,{clone:!0},R))))))}const Vt=72,fa=24,ha=18,_e={drawerWidthClosed:Vt,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:Vt,iconSize:Vt-fa*2,iconPadding:fa,selectedIndicatorWidth:3,userBadgePadding:ha,userBadgeDiameter:Vt-ha*2,mobileSidebarHeight:56},Xs=e=>({..._e,...e,iconContainerWidth:_e.drawerWidthClosed,iconSize:_e.drawerWidthClosed-_e.iconPadding*2,userBadgeDiameter:_e.drawerWidthClosed-_e.userBadgePadding*2}),ya={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:_e.defaultOpenDelayMs+200},Js=e=>({...ya,...e}),Ul="@backstage/core/sidebar-intro-dismissed",Ie=(0,o.createContext)({sidebarConfig:_e,submenuConfig:ya}),En=(0,o.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),Ea={isOpen:!1,setOpen:()=>{}},va=(0,o.createContext)(Ea),ba=(0,Ln.tK)("sidebar-open-state-context");function Ra(e){const{children:t,value:n}=e;return React.createElement(va.Provider,{value:n},React.createElement(ba.Provider,{value:createVersionedValueMap({1:n})},t))}const vn=()=>{const e=(0,o.useContext)(ba),t=(0,o.useContext)(va);if(e===void 0)return t||Ea;const n=e.atVersion(1);if(n===void 0)throw new Error("No context found for version 1.");return n},Sa=(0,o.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),xa={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},Aa=(0,o.createContext)(xa),Ca=(0,Ln.tK)("sidebar-pin-state-context");function Qs(e){const{children:t,value:n}=e;return React.createElement(Aa.Provider,{value:n},React.createElement(Ca.Provider,{value:createVersionedValueMap({1:n})},t))}const bn=()=>{const e=(0,o.useContext)(Ca),t=(0,o.useContext)(Aa);if(e===void 0)return t||xa;const n=e.atVersion(1);if(n===void 0)throw new Error("No context found for version 1.");return n},Zs=(0,w.A)(e=>({root:{flexGrow:0,margin:e.spacing(0,2),color:e.palette.navigation.color},selected:t=>({color:`${e.palette.navigation.selectedColor}!important`,borderTop:`solid ${t.sidebarConfig.selectedIndicatorWidth}px ${e.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),_s=e=>{const{to:t,label:n,icon:a,value:r}=e,{sidebarConfig:s}=(0,o.useContext)(Ie),i=Zs({sidebarConfig:s}),l=(0,me.zy)(),{selectedMenuItemIndex:c,setSelectedMenuItemIndex:u}=(0,o.useContext)(Sa),g=(y,v)=>{u(v===c?-1:v)},p=r===c&&c>=0||r!==c&&!(c>=0)&&t===l.pathname;return o.createElement(er.A,{"aria-label":n,label:n,icon:a,component:pe,to:t||l.pathname,onChange:g,value:r,selected:p,classes:i})},wa=e=>{const{children:t,to:n,label:a,icon:r,value:s}=e,{isMobile:i}=bn();return i?o.createElement(_s,{to:n,label:a,icon:r,value:s}):o.createElement(o.Fragment,null,t)},Ia=(0,w.A)(e=>({root:{position:"fixed",backgroundColor:e.palette.navigation.background,color:e.palette.navigation.color,bottom:0,left:0,right:0,zIndex:e.zIndex.snackbar,borderTop:"1px solid #383838","@media print":{display:"none"}},overlay:t=>({background:e.palette.navigation.background,width:"100%",bottom:`${t.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${t.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:e.palette.navigation.color,alignItems:"center",justifyContent:"space-between",padding:e.spacing(2,3)},overlayHeaderClose:{color:e.palette.navigation.color},marginMobileSidebar:t=>({marginBottom:`${t.sidebarConfig.mobileSidebarHeight}px`})})),ei=e=>orderBy(e,({props:{priority:t}})=>Number.isInteger(t)?t:-1,"desc"),ti=o.createElement(wa).type,ni=({children:e,label:t="Menu",open:n,onClose:a})=>{const{sidebarConfig:r}=useContext(Ie),s=Ia({sidebarConfig:r});return React.createElement(Drawer,{anchor:"bottom",open:n,onClose:a,ModalProps:{BackdropProps:{classes:{root:s.marginMobileSidebar}}},classes:{root:s.marginMobileSidebar,paperAnchorBottom:s.overlay}},React.createElement(Box,{className:s.overlayHeader},React.createElement(Typography,{variant:"h3"},t),React.createElement(IconButton,{onClick:a,classes:{root:s.overlayHeaderClose}},React.createElement(CloseIcon,null))),React.createElement(Box,{component:"nav"},e))},ai=e=>{const{sidebarConfig:t}=useContext(Ie),{children:n}=e,a=Ia({sidebarConfig:t}),r=useLocation(),[s,i]=useState(-1);useEffect(()=>{i(-1)},[r.pathname]);let l=useElementFilter(n,u=>u.getElements().filter(g=>g.type===ti));if(n)l.length?l=ei(l):l.push(React.createElement(wa,{key:"default_menu",icon:React.createElement(MenuIcon,null)},n));else return null;const c=s>=0&&!l[s].props.to;return React.createElement(Ra,{value:{isOpen:!0,setOpen:()=>{}}},React.createElement(Sa.Provider,{value:{selectedMenuItemIndex:s,setSelectedMenuItemIndex:i}},React.createElement(ni,{label:l[s]&&l[s].props.label,open:c,onClose:()=>i(-1)},l[s]&&l[s].props.children),React.createElement(BottomNavigation,{className:a.root,"data-testid":"mobile-sidebar-root",component:"nav"},l)))},Ta={getSidebarPinState(){let e;try{e=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!e},setSidebarPinState(e){return window.localStorage.setItem("sidebarPinState",JSON.stringify(e))}},ri=(0,w.A)(e=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[e.breakpoints.up("sm")]:{paddingLeft:t=>t.isPinned?t.sidebarConfig.drawerWidthOpen:t.sidebarConfig.drawerWidthClosed},[e.breakpoints.down("xs")]:{paddingBottom:t=>t.sidebarConfig.mobileSidebarHeight},"@media print":{padding:"0px !important"}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),ka=(0,o.createContext)({content:{contentRef:void 0}});function jl(e){const[t,n]=useState(()=>Ta.getSidebarPinState()),{sidebarConfig:a}=useContext(Ie),r=useRef(null),s=useMemo(()=>({content:{contentRef:r}}),[r]);useEffect(()=>{Ta.setSidebarPinState(t)},[t]);const i=useMediaQuery(u=>u.breakpoints.down("xs"),{noSsr:!0}),l=()=>n(!t),c=ri({isPinned:t,sidebarConfig:a});return React.createElement(Qs,{value:{isPinned:t,toggleSidebarPinState:l,isMobile:i}},React.createElement(ka.Provider,{value:s},React.createElement(Box,{className:c.root},e.children)))}function Ba(){const{content:e}=useContext(ka);return{focusContent:useCallback(()=>{var n,a;(a=(n=e==null?void 0:e.contentRef)==null?void 0:n.current)==null||a.focus()},[e]),contentRef:e==null?void 0:e.contentRef}}const Na=(0,w.A)(e=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:e.zIndex.appBar,background:e.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"@media print":{display:"none"}},drawerWidth:t=>({width:t.sidebarConfig.drawerWidthClosed}),drawerOpen:t=>({width:t.sidebarConfig.drawerWidthOpen,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),oi=e=>{const{sidebarConfig:t}=useContext(Ie),{openDelayMs:n=t.defaultOpenDelayMs,closeDelayMs:a=t.defaultCloseDelayMs,disableExpandOnHover:r,children:s}=e,i=Na({sidebarConfig:t}),l=useMediaQuery(W=>W.breakpoints.down("md"),{noSsr:!0}),[c,u]=useState(0),g=useRef(),{isPinned:p,toggleSidebarPinState:y}=bn(),v=()=>{p||r||(g.current&&(clearTimeout(g.current),g.current=void 0),c!==2&&!l&&(g.current=window.setTimeout(()=>{g.current=void 0,u(2)},n),u(1)))},R=()=>{p||r||(g.current&&(clearTimeout(g.current),g.current=void 0),c===1?u(0):c===2&&(g.current=window.setTimeout(()=>{g.current=void 0,u(0)},a)))},P=c===2&&!l||p,N=W=>{W?(u(2),y()):(u(0),y())};return React.createElement("nav",{style:{},"aria-label":"sidebar nav"},React.createElement(si,null),React.createElement(Ra,{value:{isOpen:P,setOpen:N}},React.createElement(Box,{className:i.root,"data-testid":"sidebar-root",onMouseEnter:r?()=>{}:v,onFocus:r?()=>{}:v,onMouseLeave:r?()=>{}:R,onBlur:r?()=>{}:R},React.createElement(Box,{className:classNames(i.drawer,i.drawerWidth,{[i.drawerOpen]:P})},s))))},Vl=e=>{var t,n;const a=Xs((t=e.sidebarOptions)!=null?t:{}),r=Js((n=e.submenuOptions)!=null?n:{}),{children:s,disableExpandOnHover:i,openDelayMs:l,closeDelayMs:c}=e,{isMobile:u}=bn();return u?React.createElement(ai,null,s):React.createElement(Ie.Provider,{value:{sidebarConfig:a,submenuConfig:r}},React.createElement(oi,{openDelayMs:l,closeDelayMs:c,disableExpandOnHover:i},s))};function si(){const{sidebarConfig:e}=useContext(Ie),{focusContent:t,contentRef:n}=Ba(),a=Na({sidebarConfig:e}),{t:r}=useTranslationRef(coreComponentsTranslationRef);return n!=null&&n.current?React.createElement(Button$1,{onClick:t,variant:"contained",className:classNames(a.visuallyHidden)},r("skipToContent")):null}function Kt(e,t,n=!1){const a=new URLSearchParams(t.search).toString(),r=gt().parse(a),s=new URLSearchParams(e.search).toString(),i=gt().parse(s),l=n?ve.isEqual:ve.isMatch;return(0,ve.isEqual)(t.pathname,e.pathname)&&l(i,r)}const ii=(0,w.A)(e=>{var t,n;return{item:{height:48,width:"100%","&:hover":{background:((t=e.palette.navigation.navItem)==null?void 0:t.hoverBackground)||"#6f6f6f",color:e.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:e.palette.navigation.color,padding:e.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:e.palette.common.white},label:{margin:e.spacing(1.75),marginLeft:e.spacing(1),fontSize:e.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((n=e.palette.navigation.navItem)==null?void 0:n.hoverBackground)||"#6f6f6f",color:e.palette.navigation.selectedColor}},textContent:{color:e.palette.navigation.color,paddingLeft:e.spacing(4),paddingRight:e.spacing(1),fontSize:e.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),Kl=e=>{const{title:t,subtitle:n,to:a,icon:r,dropdownItems:s,exact:i}=e,l=ii(),{setIsHoveredOn:c}=useContext(En),u=()=>{c(!1)},g=useResolvedPath$1(a!=null?a:""),p=useLocation();let y=Kt(p,g,i);const[v,R]=useState(!1),P=()=>{R(!v)};return s!==void 0?(s.some(N=>{const W=resolvePath(N.to);return y=Kt(p,W,i),y}),React.createElement(Box,{className:l.itemContainer},React.createElement(Tooltip,{title:t,enterDelay:500,enterNextDelay:500},React.createElement(Button$1,{role:"button",onClick:P,onTouchStart:N=>N.stopPropagation(),className:classNames(l.item,y?l.selected:void 0)},r&&React.createElement(r,{fontSize:"small"}),React.createElement(Typography,{variant:"subtitle1",component:"span",className:l.label},t,React.createElement("br",null),n&&React.createElement(Typography,{variant:"caption",component:"span",className:l.subtitle},n)),v?React.createElement(ArrowDropUpIcon,{className:l.dropdownArrow}):React.createElement(ArrowDropDownIcon,{className:l.dropdownArrow}))),s&&v&&React.createElement(Box,{className:l.dropdown},s.map((N,W)=>React.createElement(Tooltip,{key:W,title:N.title,enterDelay:500,enterNextDelay:500},React.createElement(pe,{to:N.to,underline:"none",className:l.dropdownItem,onClick:u,onTouchStart:oe=>oe.stopPropagation()},React.createElement(Typography,{component:"span",className:l.textContent},N.title))))))):React.createElement(Box,{className:l.itemContainer},React.createElement(Tooltip,{title:t,enterDelay:500,enterNextDelay:500},React.createElement(pe,{to:a,underline:"none",className:classNames(l.item,y?l.selected:void 0),onClick:u,onTouchStart:N=>N.stopPropagation()},r&&React.createElement(r,{fontSize:"small"}),React.createElement(Typography,{variant:"subtitle1",component:"span",className:l.label},t,React.createElement("br",null),n&&React.createElement(Typography,{variant:"caption",component:"span",className:l.subtitle},n)))))},li=(0,w.A)(e=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:e.spacing(7)+1},drawer:t=>{var n,a;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[e.breakpoints.up("sm")]:{marginLeft:t.left,transition:e.transitions.create("margin-left",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(a=(n=e.palette.navigation.submenu)==null?void 0:n.background)!=null?a:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:t.submenuConfig.drawerWidthClosed,transitionDelay:`${t.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:t=>({width:t.submenuConfig.drawerWidthOpen,[e.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:e.spacing(3),left:0,top:0}}),title:{fontSize:e.typography.h5.fontSize,fontWeight:e.typography.fontWeightMedium,color:e.palette.common.white,padding:e.spacing(2.5),[e.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),ci=e=>{const{isOpen:t}=vn(),{sidebarConfig:n,submenuConfig:a}=(0,o.useContext)(Ie),r=t?n.drawerWidthOpen:n.drawerWidthClosed,s=li({left:r,submenuConfig:a}),{isHoveredOn:i}=(0,o.useContext)(En),[l,c]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{c(i)},[i]),o.createElement(j.A,{className:_()(s.drawer,{[s.drawerOpen]:l})},o.createElement(H.A,{variant:"h5",component:"span",className:s.title},e.title),e.children)},ui=(0,w.A)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),di=()=>{const e=ui();return React.createElement(Box,{className:e.iconContainer},React.createElement(Box,{className:e.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},mi=(0,w.A)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),pi=()=>{const e=mi();return React.createElement(Box,{className:e.iconContainer},React.createElement(Box,{className:e.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},gi=e=>(0,w.A)(t=>{var n,a,r,s;return{root:{color:t.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:e.drawerWidthClosed,justifyContent:"center"},open:{[t.breakpoints.up("sm")]:{width:e.drawerWidthOpen}},highlightable:{"&:hover":{background:(a=(n=t.palette.navigation.navItem)==null?void 0:n.hoverBackground)!=null?a:"#404040"}},highlighted:{background:(s=(r=t.palette.navigation.navItem)==null?void 0:r.hoverBackground)!=null?s:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:e.iconContainerWidth,marginRight:-t.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:t.typography.fontWeightBold,fontSize:t.typography.fontSize},searchFieldHTMLInput:{padding:t.spacing(2,0,2)},searchContainer:{width:e.drawerWidthOpen-e.iconContainerWidth},secondaryAction:{width:t.spacing(6),textAlign:"center",marginRight:t.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:t.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${e.selectedIndicatorWidth}px ${t.palette.navigation.indicator}`,color:t.palette.navigation.selectedColor},"&$closed":{width:e.drawerWidthClosed},"& $closedItemIcon":{paddingRight:e.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-e.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function Yt(e){return(0,o.useMemo)(()=>gi(e),[e])()}const fi=(e,t)=>(0,O.OJ)(e.props.children,n=>{let a=!1;return n.getElements().forEach(({props:{to:r,dropdownItems:s}})=>{if(!a){if(s!=null&&s.length){s.forEach(({to:i})=>a=a||Kt(t,(0,ke.o1)(i)));return}r&&(a=Kt(t,(0,ke.o1)(r)))}}),a},[t.pathname]);function Rn(e){return e.to===void 0}const hi=o.createElement(ci).type,yi=o.forwardRef(function({to:t,end:n,style:a,className:r,activeStyle:s,caseSensitive:i,activeClassName:l="active","aria-current":c="page",...u},g){let{pathname:p}=(0,me.zy)(),{pathname:y}=(0,me.x$)(t);i||(p=p.toLocaleLowerCase("en-US"),y=y.toLocaleLowerCase("en-US"));let v=p===y;!v&&!n&&(v=p.startsWith(`${y}/`));const R=v?c:void 0;return o.createElement(Oe.N_,{...u,to:t,ref:g,"aria-current":R,style:{...a,...v?s:void 0},className:_()([typeof r!="function"?r:void 0,v?l:void 0])})}),Pa=(0,o.forwardRef)((e,t)=>{const{icon:n,text:a,hasNotifications:r=!1,hasSubmenu:s=!1,disableHighlight:i=!1,onClick:l,noTrack:c,children:u,className:g,...p}=e,{sidebarConfig:y}=(0,o.useContext)(Ie),v=Yt(y),{isOpen:R}=vn(),P=!R&&s?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},N=o.createElement(j.A,{style:P},o.createElement(n,{fontSize:"small"}),!R&&s?o.createElement(Mn.A,{fontSize:"small"}):o.createElement(o.Fragment,null)),W=o.createElement(ar.A,{color:"secondary",variant:"dot",overlap:"circular",invisible:!r,className:_()({[v.closedItemIcon]:!R})},N),oe=o.createElement(o.Fragment,null,o.createElement(j.A,{"data-testid":"login-button",className:v.iconContainer},W),a&&o.createElement(H.A,{variant:"subtitle2",component:"span",className:v.label},a),o.createElement("div",{className:v.secondaryAction},u)),ge=R?oe:W,L={onClick:l,className:_()(g,v.root,R?v.open:v.closed,Rn(e)&&v.buttonItem,{[v.highlightable]:!i})},q=(0,O.st)(),{pathname:se}=(0,me.x$)(!Rn(e)&&e.to?e.to:""),fe=(0,o.useCallback)(ze=>{if(!c){const bt="click",Xe=a!=null?a:"Sidebar Item",et=se?{attributes:{to:se}}:void 0;q.captureEvent(bt,Xe,et)}l==null||l(ze)},[q,a,se,c,l]);return Rn(e)?o.createElement(re.A,{role:"button","aria-label":a,...L,ref:t,onClick:fe},ge):o.createElement(yi,{...L,activeClassName:v.selected,to:e.to?e.to:"",ref:t,"aria-label":a||e.to,...p,onClick:fe},ge)}),Ei=({children:e,...t})=>{const{sidebarConfig:n}=(0,o.useContext)(Ie),a=Yt(n),[r,s]=(0,o.useState)(!1),i=(0,me.zy)(),l=fi(e,i),c=(0,We.A)(y=>y.breakpoints.down("sm")),u=()=>{s(!0)},g=()=>{s(!1)},p=()=>c?r?o.createElement(nr.A,{fontSize:"small",className:a.submenuArrow}):o.createElement(tr.A,{fontSize:"small",className:a.submenuArrow}):!r&&o.createElement(Mn.A,{fontSize:"small",className:a.submenuArrow});return o.createElement(En.Provider,{value:{isHoveredOn:r,setIsHoveredOn:s}},o.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:g,onTouchStart:r?g:u,onMouseEnter:u,className:_()(r&&a.highlighted)},o.createElement(Pa,{hasSubmenu:!0,className:l?a.selected:"",...t},p()),r&&e))},vi=(0,o.forwardRef)((e,t)=>{const[n]=(0,O.OJ)(e.children,a=>a.getElements().filter(r=>r.type===hi));return n?o.createElement(Ei,{...e},n):o.createElement(Pa,{...e,ref:t})});function Yl(e){const{sidebarConfig:t}=useContext(Ie),[n,a]=useState(""),r=Yt(t),s=e.icon?e.icon:SearchIcon,i=()=>{e.onSearch(n),a("")},l=p=>{p.key==="Enter"&&(p.preventDefault(),i())},c=p=>{a(p.target.value)},u=p=>{p.preventDefault(),p.stopPropagation()},g=p=>{i(),p.preventDefault()};return React.createElement(Box,{className:r.searchRoot},React.createElement(vi,{icon:s,to:e.to,onClick:g,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:n,onClick:u,onChange:c,onKeyDown:l,className:r.searchContainer,InputProps:{disableUnderline:!0,className:r.searchField},inputProps:{className:r.searchFieldHTMLInput}})))}const Xl=(0,J.A)("div")({flex:1},{name:"BackstageSidebarSpace"}),Jl=(0,J.A)("div")({height:8},{name:"BackstageSidebarSpacer"}),Ql=(0,J.A)("hr")(({theme:e})=>({height:1,width:"100%",background:"#383838",border:"none",margin:e.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),bi=e=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:e.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:e.palette.text.secondary,borderRadius:"5px"}}),Zl=(0,J.A)("div")(({theme:e})=>{const t=bi(e);return{flex:"0 1 auto",overflowX:"hidden",width:"100%",minHeight:"48px",overflowY:"hidden","@media (hover: none)":t,"&:hover":t}}),ql=()=>{const{sidebarConfig:e}=useContext(Ie),t=Yt(e),{isOpen:n,setOpen:a}=vn();if(useMediaQuery(i=>i.breakpoints.down("md"),{noSsr:!0}))return null;const s=()=>{a(!n)};return React.createElement(Button$1,{role:"button",onClick:s,className:t.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:t.arrows},n?React.createElement(di,null):React.createElement(pi,null)))},Ri=(0,w.A)(e=>({header:{gridArea:"pageHeader",padding:e.spacing(3),width:"100%",boxShadow:e.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:e.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[e.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:e.page.fontColor,wordBreak:"break-word",fontSize:e.typography.h3.fontSize,marginBottom:0},subtitle:{color:e.page.fontColor,opacity:.8,display:"inline-block",marginTop:e.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:e.spacing(1),color:e.page.fontColor},breadcrumb:{color:e.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-e.spacing(.3),marginBottom:e.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-e.spacing(.3),marginBottom:e.spacing(.3)}}),{name:"BackstageHeader"}),Si=({type:e,typeLink:t,classes:n,pageTitle:a})=>e?t?React.createElement(ga,{className:n.breadcrumb},React.createElement(pe,{to:t},e),React.createElement(Typography,null,a)):React.createElement(Typography,{className:n.type},e):null,xi=({pageTitle:e,classes:t,tooltip:n})=>{const{contentRef:a}=Ba(),r=React.createElement(Typography,{ref:a,tabIndex:-1,className:t.title,variant:"h1"},e);return n?React.createElement(Tooltip,{title:n,placement:"top-start"},r):r},Ai=({classes:e,subtitle:t})=>t?typeof t!="string"?React.createElement(React.Fragment,null,t):React.createElement(Typography,{className:e.subtitle,variant:"subtitle2",component:"span"},t):null;function Sn(e){const{children:t,pageTitleOverride:n,style:a,subtitle:r,title:s,tooltip:i,type:l,typeLink:c}=e,u=Ri(),p=useApi(configApiRef).getOptionalString("app.title")||"Backstage",y=n||s,v=s||n,R=`${y} | %s | ${p}`,P=`${y} | ${p}`;return React.createElement(React.Fragment,null,React.createElement(Helmet,{titleTemplate:R,defaultTitle:P}),React.createElement("header",{style:a,className:u.header},React.createElement(Box,{className:u.leftItemsBox},React.createElement(Si,{classes:u,type:l,typeLink:c,pageTitle:v}),React.createElement(xi,{classes:u,pageTitle:v,tooltip:i}),React.createElement(Ai,{classes:u,subtitle:r})),React.createElement(Grid,{container:!0,className:u.rightItemsBox,spacing:4},t)))}const Ci=({label:e,secondaryLabel:t,icon:n,disabled:a=!1,onClick:r})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:a,button:!0,onClick:s=>{r&&r(s)}},n&&React.createElement(ListItemIcon,null,n),React.createElement(ListItemText,{primary:e,secondary:t})));function _l(e){const{palette:{common:{white:t}}}=useTheme(),{actionItems:n}=e,[a,r]=React.useState(!1),s=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>r(!0),"data-testid":"header-action-menu",ref:s,style:{color:t,height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:a,anchorEl:s.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>r(!1)},React.createElement(List,null,n.map((i,l)=>React.createElement(Ci,{key:`header-action-menu-${l}`,...i})))))}const wi=(0,w.A)(e=>({root:{textAlign:"left"},label:{color:e.page.fontColor,fontWeight:e.typography.fontWeightBold,letterSpacing:0,fontSize:e.typography.fontSize,marginBottom:e.spacing(1)/2,lineHeight:1},value:{color:(0,C.X4)(e.page.fontColor,.8),fontSize:e.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),Ii=({value:e,className:t,typographyRootComponent:n})=>React.createElement(Typography,{component:n!=null?n:typeof e=="string"?"p":"span",className:t},e);function ec(e){const{label:t,value:n,url:a,contentTypograpyRootComponent:r}=e,s=wi(),i=React.createElement(Ii,{className:s.value,value:n||"<Unknown>",typographyRootComponent:r});return React.createElement(Grid,{item:!0},React.createElement(Typography,{component:"span",className:s.root},React.createElement(Typography,{className:s.label},t),a?React.createElement(pe,{to:a},i):i))}const Ti=e=>(0,k.A)({root:{color:e.palette.common.white,padding:e.spacing(2,2,3),backgroundImage:e.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),ki=(0,w.A)(Ti,{name:"BackstageItemCardHeader"});function Bi(e){const{title:t,subtitle:n,children:a}=e,r=ki(e);return React.createElement(Box,{className:r.root},n&&React.createElement(Typography,{variant:"subtitle2",component:"h3"},n),t&&React.createElement(Typography,{variant:"h6",component:"h4"},t),a)}function tc(e){const{description:t,tags:n,title:a,type:r,subtitle:s,label:i,onClick:l,href:c}=e;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(Bi,{title:a,subtitle:s||r})),React.createElement(CardContent,null,n!=null&&n.length?React.createElement(Box,null,n.map((u,g)=>React.createElement(Chip,{size:"small",label:u,key:g}))):null,t),React.createElement(CardActions,null,!c&&React.createElement(Ft,{to:"#",onClick:l,color:"primary"},i),c&&React.createElement(Ft,{to:c,color:"primary"},i)))}const Ni=e=>(0,k.A)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:e.spacing(2)}}),Pi=(0,w.A)(Ni,{name:"BackstageItemCardGrid"});function nc(e){const{children:t,...n}=e,a=Pi(n);return React.createElement(Box,{className:a.root,...n},t)}const Li=(0,w.A)(e=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[e.breakpoints.down("xs")]:{height:"100%"},"@media print":{display:"block",height:"auto",overflowY:"inherit"}}}),{name:"BackstagePage"});function xn(e){const{themeId:t,children:n}=e,a=Li();return React.createElement(ThemeProvider,{theme:r=>({...r,page:r.getPageTheme({themeId:t})})},React.createElement("main",{className:a.root},n))}function ac(e){const{themeId:t,children:n,...a}=e;return React.createElement(xn,{themeId:t},React.createElement(Sn,{...a}),n)}const $i=be.z.object({providerInfo:be.z.object({}).catchall(be.z.unknown()).optional(),profile:be.z.object({email:be.z.string().optional(),displayName:be.z.string().optional(),picture:be.z.string().optional()}),backstageIdentity:be.z.object({token:be.z.string(),identity:be.z.object({type:be.z.literal("user"),userEntityRef:be.z.string(),ownershipEntityRefs:be.z.array(be.z.string())})})});var Mi=Object.defineProperty,Oi=(e,t,n)=>t in e?Mi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,An=(e,t,n)=>(Oi(e,typeof t!="symbol"?t+"":t,n),n);const La={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function Wi(e){const t=new Date(Date.now()+La.defaultTokenExpiryMillis);if(!e)return t;const[n,a,r]=e.split("."),s=JSON.parse(window.atob(a));return typeof s.exp!="number"?t:new Date(s.exp*1e3-La.tokenExpiryMarginMillis)}class Cn{constructor(t){An(this,"options"),An(this,"abortController"),An(this,"state"),this.options=t,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:t}=this.getSessionSync(),n=t.identity.userEntityRef,a=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(n);if(!a)throw new TypeError(`Invalid user entity reference "${n}"`);return a[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const t=this.state.type==="active"?this.state.session:void 0,n=this.fetchSession().then(a=>(this.state={type:"active",session:a,expiresAt:Wi(a.backstageIdentity.token)},a),a=>{throw this.state={type:"failed",error:a},a});return this.state={type:"fetching",promise:n,previous:t},n}async fetchSession(){const t=await this.options.discoveryApi.getBaseUrl("auth"),n=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,a=new Headers(n);a.set("X-Requested-With","XMLHttpRequest");const r=await fetch(`${t}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:a,credentials:"include"});if(!r.ok)throw await ut.o3.fromResponse(r);return $i.parse(await r.json())}}const rc=e=>{const t=useApi(discoveryApiRef),{t:n}=useTranslationRef(coreComponentsTranslationRef),[{status:a,error:r},{execute:s}]=useAsync(async()=>{const i=new Cn({provider:e.provider,discoveryApi:t,headers:e.headers});await i.start(),e.onSignInSuccess(i)});return useMountEffect(s),a==="loading"?React.createElement(Ut,null):r?React.createElement(Gt,{title:n("proxiedSignInPage.title"),error:r}):null};class Xt{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const t="user:default/guest";return{type:"user",userEntityRef:t,ownershipEntityRefs:[t]}}async getCredentials(){return{}}async signOut(){}}function Di(e){const[t,n,a]=e.split(".");return JSON.parse(window.atob(n))}class wn{constructor(t){this.result=t}getUserId(){return this.result.userId}static fromResult(t){return new wn(t)}async getIdToken(){var t,n;return(n=(t=this.result).getIdToken)==null?void 0:n.call(t)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const t=await this.getIdToken();if(!t){const r=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:r,ownershipEntityRefs:[r]}}const{sub:n,ent:a}=Di(t);return{type:"user",userEntityRef:n,ownershipEntityRefs:a!=null?a:[]}}async getCredentials(){var t,n;return{token:await((n=(t=this.result).getIdToken)==null?void 0:n.call(t))}}async signOut(){var t,n;return(n=(t=this.result).signOut)==null?void 0:n.call(t)}}var Fi=Object.defineProperty,Hi=(e,t,n)=>t in e?Fi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zi=(e,t,n)=>(Hi(e,typeof t!="symbol"?t+"":t,n),n);class Et{constructor(t,n,a){this.identity=t,this.authApi=n,this.profile=a,zi(this,"profilePromise")}static createGuest(){return new Xt}static fromLegacy(t){return wn.fromResult(t)}static create(t){return new Et(t.identity,t.authApi,t.profile)}getUserId(){const t=this.identity.userEntityRef,n=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(t);if(!n)throw new TypeError(`Invalid user entity reference "${t}"`);return n[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(t){throw this.profilePromise=void 0,t}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const In=(0,w.A)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),Jt=({children:e})=>{const t=In();return o.createElement(f.A,{component:"li",item:!0,classes:t},e)},Gi={Component:({config:e,onSignInStarted:t,onSignInSuccess:n,onSignInFailure:a})=>{const{apiRef:r,title:s,message:i}=e,l=(0,D.u)(r),c=(0,D.u)(D.r),{t:u}=de(ye),g=async()=>{try{t();const p=await l.getBackstageIdentity({instantPopup:!0});if(!p)throw a(),new Error(`The ${s} provider is not configured to support sign-in`);const y=await l.getProfile();n(Et.create({identity:p.identity,profile:y,authApi:l}))}catch(p){a(),c.post(new ut.HK(u("signIn.loginFailed"),p))}};return o.createElement(Jt,null,o.createElement(ht,{variant:"fullHeight",title:s,actions:o.createElement(re.A,{color:"primary",variant:"outlined",onClick:g},u("signIn.title"))},o.createElement(H.A,{variant:"body1"},i)))},loader:async(e,t)=>{const n=e.get(t),a=await n.getBackstageIdentity({optional:!0});if(!a)return;const r=await n.getProfile();return Et.create({identity:a.identity,profile:r,authApi:n})}},$a=async e=>{try{return await e.getBackstageIdentity()}catch(t){if(t.name==="ResponseError"&&t.cause.name==="NotFoundError")return;throw t}},Ui={Component:({onSignInStarted:e,onSignInSuccess:t,onSignInFailure:n})=>{const a=(0,D.u)(D.q),[r,s]=(0,rr.A)("enableLegacyGuestToken"),{t:i}=de(ye),l=async()=>{e();const c=new Cn({provider:"guest",discoveryApi:a});if(!await $a(c)){if(confirm("Failed to sign in as a guest using the auth backend. Do you want to fallback to the legacy guest token?")){s(!0),t(new Xt);return}throw n(),new Error("You cannot sign in as a guest, you must either enable the legacy guest token or configure the auth backend to support guest sign in.")}t(c)};return o.createElement(Jt,null,o.createElement(ht,{title:"Guest",variant:"fullHeight",actions:o.createElement(re.A,{color:"primary",variant:"outlined",onClick:l},i("signIn.guestProvider.enter"))},o.createElement(H.A,{variant:"body1",style:{whiteSpace:"pre-line"}},i("signIn.guestProvider.subtitle"))))},loader:async e=>{const t=localStorage.getItem("enableLegacyGuestToken")==="true",n=new Cn({provider:"guest",discoveryApi:e.get(D.q)}),a=await $a(n);if(!(!a&&!t)){if(a&&t)if(confirm("You are currently using the legacy guest token, but you have the new guest backend module installed. Do you want to use the new module?"))localStorage.removeItem("enableLegacyGuestToken");else return new Xt;else if(t)return new Xt;return n}}},ji=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,Vi=(0,w.A)(e=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:e.spacing(2)},subTitle:{whiteSpace:"pre-line"}}),{name:"BackstageCustomProvider"}),Ma=e=>{const{ref:t,...n}=e;return{inputRef:t,...n}},Ki={Component:({onSignInStarted:e,onSignInSuccess:t})=>{const n=Vi(),{t:a}=de(ye),{register:r,handleSubmit:s,formState:i}=(0,or.mN)({mode:"onChange"}),{errors:l}=i,c=({userId:u,idToken:g})=>{e(),t(Et.fromLegacy({userId:u,getIdToken:g!==void 0?async()=>g:void 0,profile:{email:`${u}@example.com`}}))};return o.createElement(Jt,null,o.createElement(ht,{title:a("signIn.customProvider.title"),variant:"fullHeight"},o.createElement(H.A,{variant:"body1",className:n.subTitle},a("signIn.customProvider.subtitle")),o.createElement("form",{className:n.form,onSubmit:s(c)},o.createElement(ce.A,null,o.createElement($n.A,{...Ma(r("userId",{required:!0})),label:a("signIn.customProvider.userId"),margin:"normal",error:!!l.userId}),l.userId&&o.createElement(On.A,{error:!0},l.userId.message)),o.createElement(ce.A,null,o.createElement($n.A,{...Ma(r("idToken",{required:!1,validate:u=>!u||ji.test(u)||a("signIn.customProvider.tokenInvalid")})),label:a("signIn.customProvider.idToken"),margin:"normal",autoComplete:"off",error:!!l.idToken}),l.idToken&&o.createElement(On.A,{error:!0},l.idToken.message)),o.createElement(re.A,{type:"submit",color:"primary",variant:"outlined",className:n.button,disabled:!(i!=null&&i.isDirty)||!ir()(l)},a("signIn.customProvider.continue")))))},loader:async()=>{}};class Tn{constructor(t){this.config=t}static from(t){return new Tn(t)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const vt="@backstage/core:SignInPage:provider",Oa={guest:Ui,custom:Ki,common:Gi};function Wa(e,t){if(e in t)throw new Error(`"${e}" ID is duplicated. IDs of identity providers have to be unique.`)}function Yi(e){return e.reduce((n,a)=>{if(typeof a=="string")return Wa(a,n),n[a]={components:Oa[a],id:a},n;const{id:r}=a;return Wa(r,n),n[r]={components:Oa.common,id:r,config:a},n},{})}const Xi=(e,t)=>{const n=useApi(errorApiRef),a=useApiHolder(),[r,s]=useState(!0),i=useCallback(c=>{t(Tn.from({identityApi:c,signOut:async()=>{var u;localStorage.removeItem(vt),await((u=c.signOut)==null?void 0:u.call(c))}}))},[t]);useLayoutEffect(()=>{var c;if(!r)return;const u=localStorage.getItem(vt);if(u===null){s(!1);return}const g=e[u];if(!g){s(!1);return}let p=!1;return g.components.loader(a,(c=g.config)==null?void 0:c.apiRef).then(y=>{if(p){localStorage.removeItem(vt);return}y?i(y):s(!1)}).catch(y=>{localStorage.removeItem(vt),!p&&(n.post(y),s(!1))}),()=>{p=!0}},[r,n,t,a,e,i]);const l=useMemo(()=>Object.keys(e).map(c=>{const u=e[c],{Component:g}=u.components,p=R=>{i(R)},y=()=>{var R;localStorage.setItem(vt,((R=u==null?void 0:u.config)==null?void 0:R.id)||u.id)},v=()=>{localStorage.removeItem(vt)};return React.createElement(g,{key:u.id,config:u.config,onSignInStarted:y,onSignInSuccess:p,onSignInFailure:v})}),[e,i]);return[r,l]},Ji=({onSignInSuccess:e,providers:t=[],title:n,align:a="left"})=>{const r=useApi(configApiRef),s=In(),i=Yi(t),[l,c]=Xi(i,e);return l?React.createElement(Ut,null):React.createElement(xn,{themeId:"home"},React.createElement(Sn,{title:r.getString("app.title")}),React.createElement(fn,null,n&&React.createElement(Hs,{title:n,textAlign:a}),React.createElement(Grid,{container:!0,justifyContent:a==="center"?a:"flex-start",spacing:2,component:"ul",classes:s},c)))},Qi=({provider:e,auto:t,onSignInSuccess:n})=>{const a=In(),r=useApi(e.apiRef),s=useApi(configApiRef),{t:i}=useTranslationRef(coreComponentsTranslationRef),[l,c]=useState(),[u,g]=useState(!1),p=async({checkExisting:y,showPopup:v})=>{try{let R;if(y&&(R=await r.getBackstageIdentity({optional:!0})),!R&&(v||t)&&(g(!0),R=await r.getBackstageIdentity({instantPopup:!0}),!R))throw new Error(`The ${e.title} provider is not configured to support sign-in`);if(!R){g(!0);return}const P=await r.getProfile();n(Et.create({identity:R.identity,authApi:r,profile:P}))}catch(R){c(R),g(!0)}};return useMountEffect(()=>p({checkExisting:!0})),u?React.createElement(xn,{themeId:"home"},React.createElement(Sn,{title:s.getString("app.title")}),React.createElement(fn,null,React.createElement(Grid,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:a},React.createElement(Jt,null,React.createElement(ht,{variant:"fullHeight",title:e.title,actions:React.createElement(Button$1,{color:"primary",variant:"outlined",onClick:()=>{p({showPopup:!0})}},i("signIn.title"))},React.createElement(Typography,{variant:"body1"},e.message),l&&l.name!=="PopupRejectedError"&&React.createElement(Typography,{variant:"body1",color:"error"},l.message)))))):React.createElement(Ut,null)};function dc(e){return"provider"in e?React.createElement(Qi,{...e}):React.createElement(Ji,{...e})}const Zi=(0,w.A)(e=>({root:{padding:e.spacing(0,2,0,2.5),minHeight:e.spacing(3)},indicator:{backgroundColor:e.palette.info.main,height:e.spacing(.3)}}),{name:"BackstageTabbedCard"}),qi=(0,T.A)(e=>({root:{padding:e.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:e.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})($.A);function mc(e){const{slackChannel:t,errorBoundaryProps:n,children:a,title:r,deepLink:s,value:i,onChange:l}=e,c=Zi(),[u,g]=useState(0),p=l||((R,P)=>g(P));let y;i?React.Children.map(a,R=>{React.isValidElement(R)&&(R==null?void 0:R.props.value)===i&&(y=R==null?void 0:R.props.children)}):React.Children.map(a,(R,P)=>{React.isValidElement(R)&&P===u&&(y=R==null?void 0:R.props.children)});const v=n||(t?{slackChannel:t}:{});return React.createElement(Card,null,React.createElement(Xn,{...v},r&&React.createElement(qi,{title:r}),React.createElement(Tabs,{classes:c,value:i||u,onChange:p},a),React.createElement(Divider,null),React.createElement(CardContent,null,y),s&&React.createElement(Yn,{...s})))}const _i=(0,w.A)(e=>({root:{minWidth:e.spacing(6),minHeight:e.spacing(3),margin:e.spacing(0,2,0,0),padding:e.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:e.palette.text.primary}},selected:{fontWeight:e.typography.fontWeightBold}}),{name:"BackstageCardTab"});function pc(e){const{children:t,...n}=e,a=_i();return React.createElement(TabUI,{disableRipple:!0,classes:a,...n})}},63465:(Nt,Ge,d)=>{d.d(Ge,{a:()=>Me,c:()=>G,f:()=>re,p:()=>we,q:()=>H,r:()=>ye,u:()=>xe});var D=d(14041),O=d(97388),o=d(81179);function E(){const k=(0,O.qO)("api-context");if(!k)throw new o.EH("API context is not available");const J=k.atVersion(1);if(!J)throw new o.EH("ApiContext v1 not available");return J}function xe(k){const te=E().get(k);if(!te)throw new o.EH(`No implementation available for ${k}`);return te}function Ue(k){return function(te){const Ee=ve=>{const me=E(),Oe={};for(const ke in k)if(k.hasOwnProperty(ke)){const j=k[ke],at=me.get(j);if(!at)throw new NotImplementedError(`No implementation available for ${j}`);Oe[ke]=at}return React.createElement(te,{...ve,...Oe})},_=te.displayName||te.name||"Component";return Ee.displayName=`withApis(${_})`,Ee}}class je{constructor(J){if(this.config=J,!J.id.split(".").flatMap(Ee=>Ee.split("-")).every(Ee=>Ee.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${J.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function G(k){return new je(k)}var U=(k=>(k.SignedIn="SignedIn",k.SignedOut="SignedOut",k))(U||{});const Te=G({id:"core.auth.google"}),V=G({id:"core.auth.github"}),Se=G({id:"core.auth.okta"}),he=G({id:"core.auth.gitlab"}),ae=G({id:"core.auth.microsoft"}),Ae=G({id:"core.auth.onelogin"}),Ve=G({id:"core.auth.bitbucket"}),Y=G({id:"core.auth.bitbucket-server"}),$e=G({id:"core.auth.atlassian"}),Ce=G({id:"core.auth.vmware-cloud"}),st=G({id:"core.alert"}),Me=G({id:"core.analytics"}),de=G({id:"core.apptheme"}),we=G({id:"core.config"}),H=G({id:"core.discovery"}),ye=G({id:"core.error"});var Ze=(k=>(k[k.None=0]="None",k[k.Active=1]="Active",k))(Ze||{});const re=G({id:"core.featureflags"}),w=G({id:"core.fetch"}),A=G({id:"core.identity"}),C=G({id:"core.oauthrequest"}),T=G({id:"core.storage"})},2562:(Nt,Ge,d)=>{d.d(Ge,{HM:()=>ye,OJ:()=>Lt,QJ:()=>lt,Sf:()=>Oe,Vb:()=>k,bW:()=>G,h3:()=>Y,i1:()=>rt,nm:()=>ae,st:()=>he});var D=d(97388),O=d(14041),o=d(63465),E=d(18690);const xe=(0,D.tK)("analytics-context"),Ue=()=>{const S=(0,O.useContext)(xe);if(S===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const f=S.atVersion(1);if(f===void 0)throw new Error("No context found for version 1.");return f},je=S=>{const{attributes:f,children:x}=S,B={...Ue(),...f},z=(0,D.Bl)({1:B});return O.createElement(xe.Provider,{value:z},x)};function G(S,f){return"id"in S?{api:S,deps:{},factory:()=>f}:S}const U=(0,D.Q6)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),Te="_ROUTABLE-EXTENSION-RENDERED";class V{constructor(f,x={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=f,this.context=x,U.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{U.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...U.mostRecentGatheredNavigation,...U.mostRecentRoutableExtensionRender}),U.mostRecentGatheredNavigation=void 0,U.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),U.beforeUnloadRegistered=!0)}setContext(f){this.context=f}captureEvent(f,x,{value:I,attributes:B}={}){const{_routeNodeType:z,...Q}=this.context;if(f===Te){U.mostRecentGatheredNavigation&&(U.mostRecentRoutableExtensionRender={context:{...Q,extension:"App"}});return}if(U.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...U.mostRecentGatheredNavigation,...U.mostRecentRoutableExtensionRender})}catch(K){console.warn("Error during analytics event capture. %o",K)}U.mostRecentGatheredNavigation=void 0,U.mostRecentRoutableExtensionRender=void 0}if(f==="navigate"&&z==="gathered"&&Q.pluginId==="root"){U.mostRecentGatheredNavigation={action:f,subject:x,value:I,attributes:B,context:Q};return}try{this.analyticsApi.captureEvent({action:f,subject:x,value:I,attributes:B,context:Q})}catch(K){console.warn("Error during analytics event capture. %o",K)}}}function Se(){try{return(0,o.u)(o.a)}catch{return{captureEvent:()=>{}}}}function he(){const S=(0,O.useRef)(null),f=Ue(),x=Se();function I(){return S.current===null&&(S.current=new V(x)),S.current}const B=I();return B.setContext(f),B}const ae=()=>{const S=(0,D.qO)("app-context");if(!S)throw new Error("App context is not available");const f=S.atVersion(1);if(!f)throw new Error("AppContext v1 not available");return f},Ae=(0,D.Q6)("component-data-store",()=>new WeakMap),Ve="__backstage_data";function Y(S,f,x){var I;const B=S;let z=(I=B[Ve])!=null?I:Ae.get(S);if(z||(z={map:new Map},Object.defineProperty(B,Ve,{enumerable:!1,configurable:!0,writable:!1,value:z}),Ae.set(S,z)),z.map.has(f)){const Q=S.displayName||S.name;throw new Error(`Attempted to attach duplicate data "${f}" to component "${Q}"`)}z.map.set(f,x)}function $e(S,f){var x;if(!S)return;const I=S.type;if(!I)return;const B=(x=I[Ve])!=null?x:Ae.get(I);if(B)return B.map.get(f)}const Ce=(0,D.Q6)("route-ref-type",()=>Symbol("route-ref-type"));var st=Object.defineProperty,Me=(S,f,x)=>f in S?st(S,f,{enumerable:!0,configurable:!0,writable:!0,value:x}):S[f]=x,de=(S,f,x)=>(Me(S,typeof f!="symbol"?f+"":f,x),x),we;class H{constructor(f,x){this.id=f,this.params=x,de(this,we,"absolute")}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}we=Ce;function ye(S){var f;return new H(S.id,(f=S.params)!=null?f:[])}var Ze=Object.defineProperty,re=(S,f,x)=>f in S?Ze(S,f,{enumerable:!0,configurable:!0,writable:!0,value:x}):S[f]=x,w=(S,f,x)=>(re(S,typeof f!="symbol"?f+"":f,x),x),A;const C=/^\w+$/;class T{constructor(f,x,I,B){this.id=f,this.path=x,this.parent=I,this.params=B,w(this,A,"sub")}toString(){return`routeRef{type=sub,id=${this.id}}`}}A=Ce;function k(S){const{id:f,path:x,parent:I}=S,B=x.split("/").filter(K=>K.startsWith(":")).map(K=>K.substring(1)),z=[...I.params,...B];if(I.params.some(K=>B.includes(K)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!x.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${x}'`);if(x.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${x}'`);for(const K of B)if(!C.test(K))throw new Error(`SubRouteRef path has invalid param, got '${K}'`);return new T(f,x,I,z)}var J=Object.defineProperty,te=(S,f,x)=>f in S?J(S,f,{enumerable:!0,configurable:!0,writable:!0,value:x}):S[f]=x,Ee=(S,f,x)=>(te(S,typeof f!="symbol"?f+"":f,x),x),_;class ve{constructor(f,x,I){this.id=f,this.params=x,this.optional=I,Ee(this,_,"external")}toString(){return`routeRef{type=external,id=${this.id}}`}}_=Ce;function me(S){var f;return new ve(S.id,(f=S.params)!=null?f:[],!!S.optional)}function Oe(S){const{pathname:f}=(0,E.zy)(),x=(0,D.qO)("routing-context");if(!x)throw new Error("Routing context is not available");const I=x.atVersion(1),B=(0,O.useMemo)(()=>I&&I.resolve(S,{pathname:f}),[I,S,f]);if(!x)throw new Error("useRouteRef used outside of routing context");if(!I)throw new Error("RoutingContext v1 not available");const z="optional"in S&&S.optional;if(!B&&!z)throw new Error(`No path for ${S}`);return B}function ke(S){return useParams()}var j=Object.defineProperty,at=(S,f,x)=>f in S?j(S,f,{enumerable:!0,configurable:!0,writable:!0,value:x}):S[f]=x,it=(S,f,x)=>(at(S,typeof f!="symbol"?f+"":f,x),x);class St extends O.Component{constructor(){super(...arguments),it(this,"state",{error:void 0}),it(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(f){return{error:f}}render(){const{error:f}=this.state,{app:x,plugin:I}=this.props,{ErrorBoundaryFallback:B}=x.getComponents();return f?O.createElement(B,{error:f,resetError:this.handleErrorReset,plugin:I}):this.props.children}}function lt(S){const{component:f,mountPoint:x,name:I}=S;return ct({component:{lazy:()=>f().then(B=>{const z=K=>{const ie=he();try{Oe(x)}catch(De){if(typeof De=="object"&&De!==null){const{message:Ke}=De;if(typeof Ke=="string"&&Ke.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${x} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw De}return(0,O.useEffect)(()=>{ie.captureEvent(Te,"")},[ie]),O.createElement(B,{...K})},Q=I||B.displayName||B.name||"LazyComponent";return z.displayName=`RoutableExtension(${Q})`,z},B=>Q=>{const K=ae(),{BootErrorPage:ie}=K.getComponents();return O.createElement(ie,{step:"load-chunk",error:B})})},data:{"core.mountPoint":x},name:I})}function Pt(S){const{component:f,name:x}=S;return ct({component:f,name:x})}function ct(S){const{data:f={},name:x}=S;x||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let I;if("lazy"in S.component){const z=S.component.lazy;I=(0,O.lazy)(()=>z().then(Q=>({default:Q})))}else I=S.component.sync;const B=x||I.displayName||I.name||"Component";return{expose(z){const Q=K=>{const ie=ae(),{Progress:De}=ie.getComponents(),Ke=f==null?void 0:f["core.mountPoint"];return O.createElement(O.Suspense,{fallback:O.createElement(De,null)},O.createElement(St,{app:ie,plugin:z},O.createElement(je,{attributes:{pluginId:z.getId(),...x&&{extension:x},...Ke&&{routeRef:Ke.id}}},O.createElement(I,{...K}))))};Y(Q,"core.plugin",z),Y(Q,"core.extensionName",x);for(const[K,ie]of Object.entries(f))Y(Q,K,ie);return Q.displayName=`Extension(${B})`,Q}}}function We(S,f,x,I){return O.Children.toArray(S).flatMap(B=>{if(!(0,O.isValidElement)(B))return[];if(B.type===O.Fragment)return We(B.props.children,f,x,I);if($e(B,"core.featureFlagged")){const z=B.props;return("with"in z?f.isActive(z.with):!f.isActive(z.without))?We(B.props.children,f,x,I):[]}if(x===void 0||x(B))return[B];if(I)throw new Error(I);return We(B.props.children,f,x,I)})}class qe{constructor(f,x){this.node=f,this.featureFlagsApi=x}selectByComponentData(f){const x=We(this.node,this.featureFlagsApi,I=>$e(I,f.key)!==void 0,f.withStrictError);return new qe(x,this.featureFlagsApi)}findComponentData(f){return We(this.node,this.featureFlagsApi,I=>$e(I,f.key)!==void 0).map(I=>$e(I,f.key)).filter(I=>I!==void 0)}getElements(){return We(this.node,this.featureFlagsApi)}}function Lt(S,f,x=[]){const I=(0,o.u)(o.f),B=new qe(S,I);return(0,O.useMemo)(()=>f(B),[S,...x])}class $t{constructor(f){this.config=f}getId(){return this.config.id}getApis(){var f;return(f=this.config.apis)!=null?f:[]}getFeatureFlags(){var f,x;return(x=(f=this.config.featureFlags)==null?void 0:f.slice())!=null?x:[]}get routes(){var f;return(f=this.config.routes)!=null?f:{}}get externalRoutes(){var f;return(f=this.config.externalRoutes)!=null?f:{}}provide(f){return f.expose(this)}toString(){return`plugin{${this.config.id}}`}}function rt(S){return new $t(S)}},81179:(Nt,Ge,d)=>{d.d(Ge,{EH:()=>Me,HK:()=>we,o3:()=>w});var D=d(69655),O=d.n(D);function o(A){if(typeof A!="object"||A===null||Array.isArray(A))return!1;const C=A;return!(typeof C.name!="string"||C.name===""||typeof C.message!="string")}function E(A){if(typeof A!="object"||A===null||Array.isArray(A))throw new Error(`Encountered invalid error, not an object, got '${A}'`);const C=A;if(typeof C.name!="string"||C.name==="")throw new Error(`Encountered error object without a name, got '${A}'`);if(typeof C.message!="string")throw new Error(`Encountered error object without a message, got '${A}'`)}function xe(A,C){const k={name:"Unknown",message:"<no reason given>",...serializeError$1(A)};return C!=null&&C.includeStack||delete k.stack,k}function Ue(A){const C=(0,D.deserializeError)(A);return A.stack||(C.stack=void 0),C}function je(A){if(o(A)){const C=String(A);return C!=="[object Object]"?C:`${A.name}: ${A.message}`}return`unknown error '${A}'`}var G=Object.defineProperty,U=(A,C,T)=>C in A?G(A,C,{enumerable:!0,configurable:!0,writable:!0,value:T}):A[C]=T,Te=(A,C,T)=>(U(A,typeof C!="symbol"?C+"":C,T),T);class V extends Error{constructor(C,T){var k;let J=C;if(T!==void 0){const te=je(T);J?J+=`; caused by ${te}`:J=`caused by ${te}`}super(J),Te(this,"cause"),(k=Error.captureStackTrace)==null||k.call(Error,this,this.constructor),(!this.name||this.name==="Error")&&this.constructor.name!=="Error"&&(this.name=this.constructor.name),this.cause=o(T)?T:void 0}}var Se=Object.defineProperty,he=(A,C,T)=>C in A?Se(A,C,{enumerable:!0,configurable:!0,writable:!0,value:T}):A[C]=T,ae=(A,C,T)=>(he(A,typeof C!="symbol"?C+"":C,T),T);class Ae extends V{constructor(){super(...arguments),ae(this,"name","InputError")}}class Ve extends V{constructor(){super(...arguments),ae(this,"name","AuthenticationError")}}class Y extends V{constructor(){super(...arguments),ae(this,"name","NotAllowedError")}}class $e extends V{constructor(){super(...arguments),ae(this,"name","NotFoundError")}}class Ce extends V{constructor(){super(...arguments),ae(this,"name","ConflictError")}}class st extends V{constructor(){super(...arguments),ae(this,"name","NotModifiedError")}}class Me extends V{constructor(){super(...arguments),ae(this,"name","NotImplementedError")}}class de extends null{}class we extends V{constructor(C,T){super(C,T),this.name=o(T)?T.name:"Error"}}async function H(A){var C;try{const T=await A.text();if(T){if((C=A.headers.get("content-type"))!=null&&C.startsWith("application/json"))try{const k=JSON.parse(T);if(k.error&&k.response)return k}catch{}return{error:{name:"Error",message:`Request failed with status ${A.status} ${A.statusText}, ${T}`},response:{statusCode:A.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${A.status} ${A.statusText}`},response:{statusCode:A.status}}}var ye=Object.defineProperty,Ze=(A,C,T)=>C in A?ye(A,C,{enumerable:!0,configurable:!0,writable:!0,value:T}):A[C]=T,re=(A,C,T)=>(Ze(A,typeof C!="symbol"?C+"":C,T),T);class w extends Error{constructor(C){super(C.message),re(this,"response"),re(this,"body"),re(this,"cause"),re(this,"statusCode"),re(this,"statusText"),this.name="ResponseError",this.response=C.response,this.body=C.data,this.cause=C.cause,this.statusCode=C.statusCode,this.statusText=C.statusText}static async fromResponse(C){const T=await H(C),k=T.response.statusCode||C.status,J=C.statusText,te=`Request failed with ${k} ${J}`,Ee=Ue(T.error);return new w({message:te,response:C,data:T,cause:Ee,statusCode:k,statusText:J})}}}}]);})();

//# sourceMappingURL=module-circleci.9dee21fd.js.map